var VideoRecommendationPlugin=function(n){var r={};function i(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=n,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={};t.env=window.glb&&window.glb.getCurrentEnv&&window.glb.getCurrentEnv()||"local",t.tenant=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.SITE_ID||"gshow",t.deviceGroup=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.MOBILE_GROUP||"desktop",t.parseMilliseconds=function(e){var t=e/1e3,n=parseInt(t/60,10),r=parseInt(t%60,10);return 1<=n?n+(30<r?1:0)+" min":parseInt(t,10)+" seg"},t.createElement=function(e){var t=document.createElement("div");return t.setAttribute("class",e),t},t.delegate=function(e,t,r,i){function o(e,t){return e&&e.classList&&e.classList.contains(t)}a[t+"-"+r]||(a[t+"-"+r]={className:r,cb:i},e.addEventListener(t,function(e){var t=e.target,n=!0;if(!o(t,r))for(;t&&n;)t=t.parentNode,o(t,r)&&(n=!1);o(t,r)&&i(t,e)}))},t.initCircleProgress=function(e){var n=void 0,r=document.getElementById(e),i=r.getContext("2d");i.lineWidth="4",i.strokeStyle="#fff";var o=r.width/2,a=r.height/2;return{start:function(){return new Promise(function(e){var t;i.clearRect(0,0,r.width,r.height),t=0,n=setInterval(function(){t+=1,i.clearRect(0,0,r.width,r.height),i.beginPath(),i.arc(o,a,40,Math.PI/180*270,Math.PI/180*(270+t)),i.stroke(),360<=t&&(clearInterval(n),e())},6e3/360)})},stop:function(){clearInterval(n)}}},t.ajax=function(e){var r=e.url,t=e.method,i=void 0===t?"GET":t,n=e.body,o=void 0===n?null:n;return new Promise(function(e,t){var n=new XMLHttpRequest;n.withCredentials=!0,n.open(i,r),n.onload=function(){200<=n.status&&n.status<300&&e(n.response),t(n.statusText)},n.onerror=function(){return t(n.statusText)},n.send(o)})},t.logging=function(e){for(var t,n=arguments.length,r=Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return console[e]||(e="log"),(t=console)[e].apply(t,["[player-plugin-videos-recommendation]"].concat(r))}},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function r(e){var t=e.action,n=e.opt_label,r=void 0===n?null:n,i=e.opt_value,o=void 0===i?null:i;a.push(["_trackEvent","videos",t,r,o,!0])}function i(e){Array.isArray(e)?e.forEach(r):r(e)}var a=window._gaq||[];t.default={send:i,sendClickCancelAutoplay:function(){i({action:"cancelar",opt_label:"clique | cancelar autoplay"})},sendImpressionAutoplay:function(){i({action:"impressao autoplay",opt_label:"impressao autoplay"})},sendStartAutoplay:function(){i({action:"start",opt_label:"autoplay"})},sendClickAutoplay:function(){i({action:"clique no autoplay",opt_label:"autoplay"})},CATEGORY:"videos"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PLUGIN_KEYNAME="playerPluginVideosRecommendation",t.PLUGIN_FLOW_NAME="video-recommendation-flow-plugin",t.SEEN_VIDEOS_STORAGE_KEY="seen"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n(5)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(6);var o=n(0),s=d(n(11)),a=d(n(2)),c=d(n(14)),l=n(3),u=d(n(15));function d(e){return e&&e.__esModule?e:{default:e}}var f=Clappr,p=f.Events,h=f.UICorePlugin,v={},y=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,h),r(m,[{key:"name",get:function(){return l.PLUGIN_FLOW_NAME}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"nextVideo",get:function(){return this.videos[0].content}},{key:"circleProgress",get:function(){return this.circleProgressCache||(this.circleProgressCache=(0,o.initCircleProgress)("canvas-"+this.uniqueId)),this.circleProgressCache}},{key:"shouldInit",get:function(){var e=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.BRANDED_CONTENT,t=window.cdaaas&&window.cdaaas.SETTINGS&&"g1"===window.cdaaas.SETTINGS.SITE_ID;return!(e&&t)}}]),r(m,[{key:"mountPluginElement",value:function(){this.pluginElement=(0,o.createElement)("video-rec-after-end"),this.pluginElement.innerHTML=this.template(),this.pluginElementTitle=this.pluginElement.getElementsByClassName("video-rec-after-end__screen__title")[0],this.pluginElementBackground=this.pluginElement.getElementsByClassName("video-rec-after-end__screen--next-video")[0],this.playerElement.appendChild(this.pluginElement)}},{key:"mountCancelScreen",value:function(){this.cancelScreen=new c.default(this.playerElement,this.uniqueId),this.cancelScreen.onReplay(this.replayVideo.bind(this)),this.cancelScreen.onClick(this.playVideo.bind(this))}},{key:"addClickEvents",value:function(){var e=this;(0,o.delegate)(this.playerElement,"click","canvas-"+this.uniqueId,function(){a.default.sendClickAutoplay(),e.circleProgress.stop(),e.playVideo()}.bind(this)),(0,o.delegate)(this.playerElement,"click","btn-cancel-"+this.uniqueId,function(){e.toggleScreen(!1),a.default.sendClickCancelAutoplay(),e.circleProgress.stop(),e.recommendationHandler.updateSeenVideos(e.nextVideo.video.id),e.updatePlugin().then(function(){return e.cancelScreen.open()})}.bind(this))}},{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,p.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){if(this.container){this.stopListening(this.container);var e=this.container.playback;e&&this.stopListening(e)}this.container=this.core.getCurrentContainer(),this.listenToOnce(this.container.playback,p.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,p.CONTAINER_ENDED,this.onEnded),this.listenTo(this.container,p.CONTAINER_DESTROYED,this.onDestroy)}},{key:"onDestroy",value:function(){this.circleProgress&&this.circleProgress.stop()}},{key:"getVideoAlternativeData",value:function(e){var t=e._experiment_properties,n=t.experiment,r=t.alternative,i=t.trackId,o=e.id,a=v[o];return a||(a=new s.default(n),v[o]=a),{abClient:a,alternative:r,testId:i}}},{key:"buildAndSendVideoConversion",value:function(e){if(e){var t=this.getVideoAlternativeData(e),n=t.abClient,r=t.alternative,i=t.testId,o=e.content.video.url;n.sendConversion(r,i,o)}}},{key:"buildAndSendVideoImpression",value:function(e){if(e){var t=this.getVideoAlternativeData(e),n=t.alternative,r=t.testId,i=t.abClient,o=this.playback.video.urlForConsumption;i.sendImpression(n,r,o)}}},{key:"onPlay",value:function(){var t=this;if(this.recommendationHandler.updateSeenVideos(this.playback.video.id),this.videos){var e=this.videos.filter(function(e){return e.content.video.id===t.playback.video.id})[0];this.buildAndSendVideoConversion(e)}this.updatePlugin(!0).catch(function(){})}},{key:"playVideo",value:function(e,t){var n=0<arguments.length&&void 0!==e?e:this.nextVideo.video.id,r=1<arguments.length&&void 0!==t?t:this.nextVideo.title;this.toggleScreen(!1),this.updateTitleElement(r),this.core.load(n),this.playback.play(),this.updatePlugin().catch(function(){})}},{key:"replayVideo",value:function(){this.playback.play()}},{key:"onEnded",value:function(){var e=this;this.videos?(this.toggleScreen(!0),this.buildAndSendVideoImpression(this.videos[0]),a.default.sendImpressionAutoplay(),this.circleProgress.start().then(function(){a.default.sendStartAutoplay(),e.circleProgress.stop(),e.playVideo()})):this.removePlugin()}},{key:"updatePlugin",value:function(e){var t=this,n=0<arguments.length&&void 0!==e&&e;return this.playerElement.classList.add("video-rec-after-end--enabled"),this.toggleScreen(!1),n?this.recommendationHandler.getVideos().then(function(e){e?(t.videos=e,t.cancelScreen.updateVideos(e),t.updateElement()):t.removePlugin()}).catch(function(){return t.removePlugin()}):Promise.resolve()}},{key:"updateElement",value:function(){this.pluginElementBackground.style="background-image: url('"+this.nextVideo.image.sizes.M.url+"')",this.pluginElementTitle.textContent=this.nextVideo.title}},{key:"updateTitleElement",value:function(e){this.titleElement&&(this.titleElement.textContent=e)}},{key:"template",value:function(){return'\n      <div data-track-category="'+a.default.CATEGORY+'"\n        class="video-rec-after-end__screen video-rec-after-end__screen--next-video" style="background-image: url(\'\')">\n        <div class="video-rec-after-end__content">\n          <span class="video-rec-after-end__screen__chapeu">Assista ao pr√≥ximo</span>\n          <span class="video-rec-after-end__screen__title"></span>\n          <div\n            data-track-action="next-video"\n            data-track-label="click"\n            class="video-rec-after-end__screen__canvas canvas-'+this.uniqueId+'"\n          >\n            <canvas id="canvas-'+this.uniqueId+'"></canvas>\n            <svg class="video-rec-after-end__screen__canvas__play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <g fill="none" fill-rule="evenodd">\n              <path d="M0 0h24v24H0z"></path>\n              <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"></path>\n            </g></svg>\n          </div>\n          <button\n            data-track-action="cancel-video"\n            data-track-label="click"\n            type="button"\n            class="video-rec-after-end__screen__btn-cancel btn-cancel-'+this.uniqueId+'">\n            Cancelar\n          </button>\n        </div>\n      </div>\n    '}},{key:"toggleScreen",value:function(e){var t=!(0<arguments.length&&void 0!==e)||e;this.playerElement.classList.toggle("video-rec-after-end--show",t)}},{key:"removePlugin",value:function(){(0,o.logging)("warn","Desabilitando plugin."),this.playerElement.classList.remove("video-rec-after-end--enabled"),this.destroy()}}]),m);function m(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,e));return t.core.options.exitFullscreenOnEnd=!1,t.pluginOptions=t.core._options.VideoRecommendationPlugin||{},t.enabled=!1,t.shouldInit&&(t.uniqueId=t.core.uniqueId,t.playerElement=t.core.el,t.titleElement=t.pluginOptions.titleElement,t.recommendationHandler=new u.default({endpoint:"https://recomendacao.globo.com/rec/v2/item/"+o.tenant+"/videos-flow",videoId:t.core.options.source}),t.recommendationHandler.onError(function(){(0,o.logging)("warn","Desabilitando plugin."),t.playerElement.classList.remove("video-rec-after-end--enabled"),t.destroy()}),t.mountPluginElement(),t.mountCancelScreen(),t.addClickEvents(),t.enable()),t}t.default=y,e.exports=t.default},function(e,t,n){var r=n(7);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0};n(9)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(e.exports=n(8)(!1)).push([e.i,'.clappr-player.video-rec-cancel-screen--enabled .poster{-webkit-filter:blur(10px);filter:blur(10px);-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1)}.video-rec-cancel-screen{width:100%;height:100%;position:absolute;display:none!important;z-index:1000;background-color:transparent;background-position:0 0;background-repeat:no-repeat;background-size:cover;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default}.video-rec-cancel-screen--active{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-cancel-screen__title{font-size:14px!important;font-family:opensans-regular!important}@media screen and (min-width:620px){.video-rec-cancel-screen__title{font-size:20px!important;margin-top:5px!important}}.video-rec-cancel-screen__replay{display:-webkit-box;display:-ms-flexbox;display:flex;font:normal 14px/18px opensans-regular!important;letter-spacing:-.3px;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1002;color:#fff;fill:#fff;background-color:transparent;border:0;margin:18px auto 0;padding:8px;outline:0;cursor:pointer}@media screen and (min-width:620px){.video-rec-cancel-screen__replay{margin-top:35px;font:normal 16px/18px opensans-regular!important}}.video-rec-cancel-screen__replay svg{margin-right:6px}.video-rec-cancel-screen__video-list{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:15px!important}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list{max-width:80%;margin-top:25px!important}}.video-rec-cancel-screen__video-list section{-webkit-box-flex:1;-ms-flex:1;flex:1;margin:0 15px!important;display:none!important;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;cursor:pointer}.video-rec-cancel-screen__video-list section:first-child{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section{display:block!important;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.video-rec-cancel-screen__video-list section:first-child{display:block!important}}.video-rec-cancel-screen__video-list section .thumb-container{max-width:35%;height:auto;position:relative;background-color:#333}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .thumb-container{max-width:100%}.video-rec-cancel-screen__video-list section .thumb-container__picture{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}.video-rec-cancel-screen__video-list section .thumb-container picture img{width:100%}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .thumb-container picture img{max-width:100%;height:auto}}.video-rec-cancel-screen__video-list section .thumb-container__duration{right:0;position:absolute;bottom:0;background-color:#000;font-size:12px!important;font-family:opensans-regular!important;padding:2px 5px!important}.video-rec-cancel-screen__video-list section .thumb-container__play{top:30%;left:37%;max-width:25%;position:absolute}.video-rec-cancel-screen__video-list section .info-container{width:100%;text-align:left;font:normal 14px/18px opensans-bold!important;margin-left:10px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container{display:block;margin-left:0!important}}.video-rec-cancel-screen__video-list section .info-container__chapeu{display:block;font-family:opensans-regular!important;font-weight:600;-webkit-line-clamp:1;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container__chapeu{margin-top:10px!important;font-size:14px!important}}.video-rec-cancel-screen__video-list section .info-container__title{-webkit-line-clamp:2;display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container__title{-webkit-line-clamp:3;margin-top:4px!important;font-size:16px!important;line-height:20px!important}}.clappr-player.video-rec-after-end--enabled .poster__play-wrapper{visibility:hidden!important}.video-rec-after-end{display:none!important;width:100%;height:100%;position:absolute;z-index:1000;background-color:#333}.video-rec-after-end #canvas{width:100%;height:auto}.video-rec-after-end__content{max-width:72%;z-index:1002}.video-rec-after-end__screen{width:100%;height:100%;position:absolute;z-index:1000;background-color:transparent;background-position:0 0;background-repeat:no-repeat;background-size:cover;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.video-rec-after-end__screen--next-video{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-after-end__screen--next-video:after{content:"";width:100%;height:100%;position:absolute;top:0;left:0;z-index:1001;background-color:#000;opacity:.6}.video-rec-after-end__screen__chapeu{display:block;font:normal 14px/19px opensans-regular!important;letter-spacing:-.3px;text-align:center}@media screen and (min-width:620px){.video-rec-after-end__screen__chapeu{font:normal 18px/18px opensans-regular!important}}.video-rec-after-end__screen__title{display:block;font:normal 4.5vw/5.5vw opensans-bold!important;letter-spacing:-.3px;text-align:center;margin-top:2px!important;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}@media screen and (min-width:620px){.video-rec-after-end__screen__title{font-size:20px!important;line-height:24px!important;margin-top:8px!important;display:block}}.video-rec-after-end__screen__canvas{position:relative;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;margin-top:10px!important;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);height:12vw}@media screen and (min-width:620px){.video-rec-after-end__screen__canvas{margin-top:30px!important;-webkit-transform:none;-ms-transform:none;transform:none;height:auto;height:70px}}.video-rec-after-end__screen__canvas__play{max-width:40px;position:absolute}.video-rec-after-end__screen__btn-cancel{display:block;font:normal 14px/18px opensans-regular!important;letter-spacing:-.3px;text-align:center;z-index:1002;color:#fff;background-color:transparent;border:0;margin:10px auto 0;cursor:pointer;position:relative;z-index:2}@media screen and (min-width:620px){.video-rec-after-end__screen__btn-cancel{font:normal 16px/18px opensans-regular!important;margin:28px auto 0}}.video-rec-after-end__screen__btn-cancel:active{outline:0}.video-rec-after-end--show .video-rec-after-end{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-after-end--show .media-control{display:none}',""])},function(e,t,n){"use strict";e.exports=function(n){var a=[];return a.toString=function(){return this.map(function(e){var t=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(r),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(o).concat([i]).join("\n")}return[n].join("\n")}(e,n);return e[2]?"@media "+e[2]+"{"+t+"}":t}).join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(n[i]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&n[o[0]]||(t&&!o[2]?o[2]=t:t&&(o[2]="("+o[2]+") and ("+t+")"),a.push(o))}},a}},function(e,t,n){var r,i,o,c={},l=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),a=(o={},function(e){if(void 0===o[e]){var t=function(e){return document.querySelector(e)}.call(this,e);if(t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}o[e]=t}return o[e]}),s=null,u=0,d=[],f=n(10);function p(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=c[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(g(r.parts[o],t))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(g(r.parts[o],t));c[r.id]={id:r.id,refs:1,parts:a}}}}function h(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function v(e,t){var n=a(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=d[d.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=a(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function y(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);0<=t&&d.splice(t,1)}function m(e){var t=document.createElement("style");return e.attrs.type="text/css",b(t,e.attrs),v(e,t),t}function b(t,n){Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])})}function g(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var a=u++;n=s=s||m(e),r=E.bind(null,n,a,!1),i=E.bind(null,n,a,!0)}else i=t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",b(t,e.attrs),v(e,t),t}(e),r=function(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=f(r));i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n,e),function(){y(n),n.href&&URL.revokeObjectURL(n.href)}):(n=m(e),r=function(e,t){var n=t.css,r=t.media;r&&e.setAttribute("media",r);if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){y(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}e.exports=function(e,a){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(a=a||{}).attrs="object"==typeof a.attrs?a.attrs:{},a.singleton||"boolean"==typeof a.singleton||(a.singleton=l()),a.insertInto||(a.insertInto="head"),a.insertAt||(a.insertAt="bottom");var s=h(e,a);return p(s,a),function(e){for(var t=[],n=0;n<s.length;n++){var r=s[n];(i=c[r.id]).refs--,t.push(i)}e&&p(h(e,a),a);for(n=0;n<t.length;n++){var i;if(0===(i=t[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete c[i.id]}}}};var _,w=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function E(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,o=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var n,r=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(r)?e:(n=0===r.indexOf("//")?r:0===r.indexOf("/")?i+r:o+r.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}}(n(12)),s=n(0),c=n(13),l=(o=c)&&o.__esModule?o:{default:o};"qa"===s.env&&a.Settings.useQAConfiguration();var u=new a.HorizonClient(s.tenant,s.deviceGroup),d=new l.default(s.env,u),f=(r(p,[{key:"_sendCustom",value:function(e,t,n,r){return(0,s.logging)("log","Enviando "+e+" para o experimento "+this.experimentName+" para alternativa "+t,"com testId "+n+" e originURL "+r),d[e]({experiment:this.experimentName,alternative:t,testId:n},d.options().withOriginURL(r))}},{key:"send",value:function(t){try{for(var e=arguments.length,n=Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this._sendCustom.apply(this,[t].concat(n))}catch(e){(0,s.logging)("error","Falha ao enviar "+t+" para teste AB: "+this.experimentName+"."),(0,s.logging)("error",e)}}},{key:"sendImpression",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.send.apply(this,["impression"].concat(t))}},{key:"sendConversion",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.send.apply(this,["conversion"].concat(t))}}]),p);function p(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),this._interactionsSent=[],this.experimentName=e}t.default=f,e.exports=t.default},function(e,o,t){"use strict";(function(e){var t,n,r,i,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return i={},r.m=n=[function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(10));function i(e){return e&&e.__esModule?e:{default:e}}var o={AVOID_COOKIE_USAGE:!1,EVENTS_BUFFER_SIZE:100,EVENTS_SENDER_INTERVAL:1e4,EVENTS_SENDER_MIN_INTERVAL:5e3,EVENTS_SENDER_MAX_INTERVAL:2e4,EVENTS_DISCARD_AFTER_MSECS:36e5,EVENTS_BULK_SIZE:10,HORIZON_CALLBACK_STACK_LIMIT:1e3,HORIZON_TRACK_IDENTIFICATION_RESOURCE:"id",HORIZON_TRACK_HOST:"horizon-track.globo.com",HORIZON_CLIENT_UUID:i(n(2)).default.getResource("clientInstanceUUID",(0,r.default)()),HORIZON_REQUEST_ENCODING:"base64",HORIZON_SCHEMAS_HOST:"horizon-schemas.globo.com",IDENTIFICATION_LOAD_RETRY_AFTER_MSECS:5e3,PACKAGE_VERSION:"1.5.1",SCHEMA_VALIDATOR_SCRIPT_URL:"s3.glbimg.com/cdn/libs/tv4/1.3.0/tv4.min.js",SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES:2,SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS:1e4,USE_HTTPS:!0},a={avoidCookieUsage:function(){o.AVOID_COOKIE_USAGE=!0},useHTTPOnly:function(){o.USE_HTTPS=!1},useQAConfiguration:function(){o.HORIZON_TRACK_HOST="horizon-track.qa.globoi.com",o.HORIZON_SCHEMAS_HOST="horizon-schemas.qa.globoi.com",o.HORIZON_REQUEST_ENCODING="json"}};t.default=Object.assign(o,a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={COMPONENT_NOT_READY:"[Horizon] Component is not ready.",COMPONENT_UNAVAILABLE:"[Horizon] Class or function is required.",DUPLICATED_SCHEMA:"[Horizon] Duplicated schema.",ERROR_LOADING_RESOURCE:"[Horizon] Failed to load resource.",INVALID_AUTH_TOKEN:"[Horizon] Invalid authorization token.",INVALID_DATA:"[Horizon] Invalid data.",INVALID_DATE:"[Horizon] Invalid date-time RFC 3339 format.",INVALID_ENVIRONMENT:"[Horizon] Invalid environment value.",INVALID_FORMAT:"[Horizon] Invalid event format.",INVALID_REQUEST:"[Horizon] Invalid request.",INVALID_TIMESTAMP:"[Horizon] Invalid timestamp.",INVALID_VERSION_FORMAT:"[Horizon] Invalid version format.",LIMIT_EXCEEDED:"[Horizon] Resource limit exceeded.",MUST_BE_DEFINED:"[Horizon] Parameter or argument must be defined",SCHEMA_VALIDATOR_ERROR_LOADING:"[Horizon] Could not load SchemaValidator.",UNSUPPORTED_TYPE:"[Horizon] Unsupported type.",UNSUPPORTED_TENANT:"[Horizon] Unsupported tenant.",UNSUPPORTED_ENCODER:"[Horizon] Unsupported encoder.",USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE:"[Horizon] Can not set or remove a logged user when AVOID_COOKIE_USAGE is not enabled."},i={mustBeDefined:function(e){throw new Error(r.MUST_BE_DEFINED+": "+e+".")}};t.default=Object.assign(r,i)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function r(){return window.horizonResources=window.horizonResources||{},window.horizonResources}t.default={getContext:r,getResource:function(e,t){var n=r();return n[e]=n[e]||t,n[e]}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={execAsync:function(e,t){setTimeout(function(){return e(t)},1)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={request:function(e,t,n,r){var i=new XMLHttpRequest;i.open(e,t,!0),i.onload=function(){return i.status<400?n(JSON.parse(i.response)):r(i.response)},i.onerror=r,i.send()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},i=u(n(3)),o=u(n(2)),a=u(n(1)),s=u(n(4)),c=u(n(0));function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return e&&e.__esModule?e:{default:e}}function d(){return o.default.getResource("idManager",{clientIDs:{}})}function f(e){var t=d();if(!t.instance){var n=e||c.default.HORIZON_TRACK_HOST+"/"+c.default.HORIZON_TRACK_IDENTIFICATION_RESOURCE,r=!1===c.default.AVOID_COOKIE_USAGE;t.instance=new g(n,r)}return t.instance}var p=["GLBID","GST"],h="statusReady",v="statusNotReady",y="statusLoading",m="statusScheduled",b="statusError",g=(r(_,[{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===h)return e(d().clientIDs);if(this.callbacks.onReady.length>c.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(a.default.LIMIT_EXCEEDED+" IDManager callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===b?e():this.callbacks.onError.push(e)}},{key:"getAsKeyValue",value:function(){if(!this.isReady())throw new Error(""+a.default.COMPONENT_NOT_READY);if(this.bypass)return"";var t=d();return Object.keys(t.clientIDs).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t.clientIDs[e])}).join("&")}},{key:"isReady",value:function(){return this.state===h}},{key:"retry",value:function(){var e=this;this.state=m,this.callbacks.onRetry.forEach(function(e){return e()}),setTimeout(function(){e.state=v,e.load()},c.default.IDENTIFICATION_LOAD_RETRY_AFTER_MSECS)}},{key:"setLoggedUser",value:function(e,t){if(-1===p.indexOf(e))throw Error(a.default.INVALID_AUTH_TOKEN);d().clientIDs[e]=t}},{key:"removeLoggedUser",value:function(){var t=d();p.forEach(function(e){return delete t.clientIDs[e]})}},{key:"load",value:function(){var n=this,t=d();if(this.state===v){this.state=y,this.callbacks.onLoad.forEach(function(e){return e()});var e=c.default.USE_HTTPS?"https://":"http://";s.default.request("GET",e+this.url,function(e){t.clientIDs=Object.assign(t.clientIDs||{},e),n.state=h,n.callbacks.onReady.forEach(function(e){return i.default.execAsync(e,t.clientIDs)})},function(t){n.state=b,n.callbacks.onError.forEach(function(e){return i.default.execAsync(e,t)}),n.retry()})}}}]),_);function _(e,t){!function(e){if(!(e instanceof _))throw new TypeError("Cannot call a class as a function")}(this),this.state=t?h:v,this.url=e,this.bypass=t,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}t.default={getInstance:f,getContextManager:d,setLoggedUser:function(e,t){if(!c.default.AVOID_COOKIE_USAGE)throw Error(a.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);e&&0!==e.length||a.default.mustBeDefined("tokenName"),t&&0!==t.length||a.default.mustBeDefined("tokenValue"),f().setLoggedUser(e,t)},removeLoggedUser:function(){if(!c.default.AVOID_COOKIE_USAGE)throw Error(a.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);f().removeLoggedUser()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IDManager=t.Settings=t.HorizonClient=void 0,n(7);var r=a(n(9)),i=a(n(0)),o=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}var s={setLoggedUser:o.default.setLoggedUser,removeLoggedUser:o.default.removeLoggedUser};t.HorizonClient=r.default,t.Settings=i.default,t.IDManager=s},function(e,t,n){n(8).polyfill()},function(e,t,n){function r(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var c=o[a],l=Object.getOwnPropertyDescriptor(i,c);void 0!==l&&l.enumerable&&(n[c]=i[c])}}return n}e.exports={assign:r,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:r})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e},c=o(n(0)),l=o(n(13)),u=o(n(1)),d=o(n(15)),f=o(n(26)),p=o(n(27)),h=o(n(5));function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e){return e&&e.__esModule?e:{default:e}}var a="stateReady",v="stateNotReady",s="stateLoading",y=["web","instant-article","app"],m=(r(b,[{key:"useDefaultContentType",value:function(e){this.defaultContentType=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"setReferer",value:function(e){this.referer=e||document.referrer}},{key:"unload",value:function(){this.flush()}},{key:"getScopeInfo",value:function(){return{url:document.location.href,actionTs:+Date.now(),horizonClientVersion:this.clientVersion,horizonClientReferer:this.referer}}},{key:"validateBeforeEnqueue",value:function(e){var t=this.getSchemasProvider().get(e.id,e.version);this.validator.validateFor(e,t)}},{key:"onReady",value:function(e){this.validator.isReady()?this.getSchemasProvider().isReady()?this.getIdManager().isReady()?(this.state=a,e()):(this.state=s,this.getIdManager().onReady(e),this.getIdManager().load()):(this.state=s,this.getSchemasProvider().onReady(e),this.getSchemasProvider().load()):(this.state=s,this.validator.onReady(e),this.validator.load())}},{key:"flush",value:function(){var e=this;this.isReady()?this.getEventBus().flush():this.onReady(function(){return e.flush()})}},{key:"send",value:function(e){var t=this;if(this.validator.validateArgs(e),!this.isReady())return this.state===v&&this.flush(),void this.onReady(function(){return t.send(e)});this.validateBeforeEnqueue(e);var n=this.getScopeInfo(),r=Object.assign({},n,e);r.contentType||(this.defaultContentType||u.default.mustBeDefined("contentType"),r.contentType=this.defaultContentType),this.getEventBus().enqueue(r)}}]),b);function b(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"web";if(function(e){if(!(e instanceof b))throw new TypeError("Cannot call a class as a function")}(this),this.tenant=e||p.default.getTenant()||u.default.mustBeDefined("tenant"),this.deviceGroup=t||p.default.getDeviceGroup()||u.default.mustBeDefined("deviceGroup"),this.defaultContentType=r,-1===y.indexOf(i))throw Error(u.default.INVALID_ENVIRONMENT);this.environment=i,this.validator=l.default,this.clientVersion=c.default.PACKAGE_VERSION,this.state=v,this.referer=document.referrer;var o=null,a=null,s=null;this.setSchemasProvider=function(e){o=e},this.getSchemasProvider=function(){if(!o){var e=f.default.getInstance();n.setSchemasProvider(e)}return o},this.setEventBus=function(e){a=e},this.getEventBus=function(){if(!a){var e=d.default.getInstance(n.tenant,n.deviceGroup,n.environment,n.getIdManager());n.setEventBus(e)}return a},this.setIdManager=function(e){s=e},this.getIdManager=function(){if(!s){var e=h.default.getInstance();n.setIdManager(e)}return s},this.isReady=function(){return!!o&&!!s&&n.validator.isReady()&&o.isReady()&&s.isReady()},window.addEventListener("beforeunload",function(){n.unload()})}t.default=m},function(e,t,n){var a=n(11),s=n(12);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||a)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var o=0;o<16;++o)t[r+o]=i[o];return t||s(i)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,r=i;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==f(Symbol.iterator)?function(e){return void 0===e?"undefined":f(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":f(e)},r=s(n(14)),o=s(n(1)),a=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}function c(){return!!window.tv4}function l(e){return null===e?null:isNaN(e)&&!isNaN(Date.parse(e))?null:o.default.INVALID_DATE}var u={ready:[]},d=["url"];t.default={validateFor:function(e,t){if(!c())throw new Error(o.default.ERROR_LOADING_RESOURCE+" Validator is not ready.");if(!t)throw new Error(o.default.INVALID_DATA+" Argument: schema.");if(!/\d+\.\d+/.test(e.version))throw new Error(o.default.INVALID_VERSION_FORMAT);if(!tv4.validate(e.properties,t))throw new Error(o.default.INVALID_DATA+" "+e.id+" "+e.version+". "+tv4.error)},validateArgs:function(t){var e=Object.prototype.hasOwnProperty;if(!(t&&e.call(t,"id")&&e.call(t,"version")&&e.call(t,"properties")))throw new Error(o.default.INVALID_FORMAT+" Missing properties: "+JSON.stringify(t));if("string"!=typeof t.id||"string"!=typeof t.version||"object"!==i(t.properties))throw new Error(o.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(t));if(0<d.filter(function(e){return t[e]&&"string"!=typeof t[e]}).length)throw new Error(o.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(t));if(t.id.length<2||t.version.length<3)throw new Error(o.default.INVALID_FORMAT+" Invalid property size: "+JSON.stringify(t));var n=Object.assign({},t);delete n.id,delete n.version,delete n.properties,delete n.contentType;var r=Object.keys(n);if(0<r.length&&!r.every(function(e){return-1!==d.indexOf(e)}))throw new Error(o.default.INVALID_FORMAT+" Extra keys aren't allowed: "+JSON.stringify(n))},tv4IsValidData:l,isReady:c,onReady:function(e){if(c())return e();if(u.ready.length>a.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(o.default.LIMIT_EXCEEDED+" Validator callback stack.");return u.ready.unshift(e)},load:function(){if(!r.default.isDefined("tv4")){var e=(a.default.USE_HTTPS?"https://":"http://")+a.default.SCHEMA_VALIDATOR_SCRIPT_URL;(0,r.default)([e],"tv4",{async:!0,numRetries:a.default.SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES,success:function(){tv4.addFormat("date-time",l),u.ready.forEach(function(e){return e()})},error:function(e){throw new Error(o.default.SCHEMA_VALIDATOR_ERROR_LOADING+" "+e)}})}}}},function(e,t,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){var d=function e(){},a={},c={},l={};function s(e,t){if(e){var n=l[e];if(c[e]=t,n)for(;n.length;){n[0](e,t),n.splice(0,1)}}}function u(e,t){e.call&&(e={success:e}),t.length?(e.error||d)(t):(e.success||d)(e)}function f(n,r,i,o){var a,s,e=document,t=i.async,c=(i.numRetries||0)+1,l=i.before||d,u=n.replace(/^(css|img)!/,"");o=o||0,/(^css!|\.css$)/.test(n)?((s=e.createElement("link")).rel="stylesheet",s.href=u,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(n)?(s=e.createElement("img")).src=u:((s=e.createElement("script")).src=n,s.async=void 0===t||t),s.onload=s.onerror=s.onbeforeload=function(e){var t=e.type[0];if(a)try{s.sheet.cssText.length||(t="e")}catch(e){18!=e.code&&(t="e")}if("e"==t){if((o+=1)<c)return f(n,r,i,o)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";r(n,t,e.defaultPrevented)},!1!==l(n,s)&&e.head.appendChild(s)}function n(e,t,n){var r,i;if(t&&t.trim&&(r=t),i=(r?n:t)||{},r){if(r in a)throw"LoadJS";a[r]=!0}function o(t,n){!function(e,i,t){var n,r,o=(e=e.push?e:[e]).length,a=o,s=[];for(n=function e(t,n,r){if("e"==n&&s.push(t),"b"==n){if(!r)return;s.push(t)}--o||i(s)},r=0;r<a;r++){f(e[r],n,t)}}(e,function(e){u(i,e),t&&u({success:t,error:n},e),s(r,e)},i)}if(i.returnPromise)return new Promise(o);o()}return n.ready=function(e,t){return function(e,r){var t,n,i,o=[],a=(e=e.push?e:[e]).length,s=a;for(t=function e(t,n){n.length&&o.push(t),--s||r(o)};a--;){n=e[a],(i=c[n])?t(n,i):(l[n]=l[n]||[]).push(t)}}(e,function(e){u(t,e)}),n},n.done=function(e){s(e,[])},n.reset=function(){a={},c={},l={}},n.isDefined=function(e){return e in a},n})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n(16);var o=f(n(2)),l=f(n(17)),u=f(n(0)),a=f(n(1)),s=f(n(22)),c=f(n(23)),d=f(n(24));function f(e){return e&&e.__esModule?e:{default:e}}function p(){return o.default.getResource("bus",{})}var h=(r(v,[{key:"setMaxQueueSize",value:function(e){this.queue=s.default.fromArray(this.queue.items,e)}},{key:"filterQueue",value:function(){var t=Date.now()-u.default.EVENTS_DISCARD_AFTER_MSECS;return this.queue.filter(function(e){return e.actionTs>t})}},{key:"prepareRequest",value:function(){var e=this.queue.splice(0,u.default.EVENTS_BULK_SIZE);return this.actionCounter+=e.length,{horizonClientUUID:this.instanceID,horizonClientTenant:this.currentTenant,horizonClientTs:Date.now(),horizonClientType:"js",horizonClientDeviceGroup:this.deviceGroup,horizonDispatchNumber:this.dispatchNumber,horizonActionCounter:this.actionCounter,horizonEnvironment:this.environment,actions:e}}},{key:"isValidRequest",value:function(e){if(!e||e&&!e.actions)throw new Error(a.default.INVALID_REQUEST);return 0<e.actions.length}},{key:"dispatch",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"json",r=u.default.USE_HTTPS?"https://":"http://",i=this.idManager.getAsKeyValue(),o=i?"?"+i:"",a=r+u.default.HORIZON_TRACK_HOST+"/event/"+this.currentTenant+o,s=l.default.get(n);if(!this.isValidRequest(e))return!1;this.dispatchNumber+=1;var c=s(e);return navigator.sendBeacon(a,c)}},{key:"enqueue",value:function(e){if(!e.actionTs)throw new Error(a.default.INVALID_TIMESTAMP);this.queue.push(e)}},{key:"flush",value:function(){for(;0<this.queue.length;){this.queue=this.filterQueue();var e=this.prepareRequest();this.dispatch(e,u.default.HORIZON_REQUEST_ENCODING)}}},{key:"length",get:function(){return this.queue.length}}]),v);function v(e,t,n,r,i){var o=this;!function(e){if(!(e instanceof v))throw new TypeError("Cannot call a class as a function")}(this),this.currentTenant=e||a.default.mustBeDefined("tenant"),this.instanceID=t||a.default.mustBeDefined("instanceID"),this.deviceGroup=n||a.default.mustBeDefined("deviceGroup"),this.environment=r||a.default.mustBeDefined("environment"),this.queue=new s.default(u.default.EVENTS_BUFFER_SIZE),this.idManager=i,this.dispatchNumber=1,this.actionCounter=0,(new c.default).every(u.default.EVENTS_SENDER_INTERVAL).call(function(){o.queue=o.filterQueue();var e=o.prepareRequest();o.dispatch(e,u.default.HORIZON_REQUEST_ENCODING)||e.actions.forEach(function(e){return o.enqueue(e)})}).call(d.default).start()}t.default={getInstance:function(e,t,n,r){var i=p(),o=e+"-"+t;return i[o]||(i[o]=new h(e,u.default.HORIZON_CLIENT_UUID,t,n,r)),i[o]},reset:function(e,t){e&&0!==e.length||a.default.mustBeDefined("tenant"),t&&0!==t.length||a.default.mustBeDefined("deviceGroup");var n=e+"-"+t;delete p()[n]},getContextBus:p}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==f(Symbol.iterator)?function(e){return void 0===e?"undefined":f(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":f(e)})(e)}(function(){!function(){return"navigator"in this&&"sendBeacon"in this.navigator}.call(this)&&("navigator"in this||(this.navigator={}),this.navigator.sendBeacon=function(e,t){var n=this.event&&this.event.type,r="unload"===n||"beforeunload"===n,i="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("POST",e,!r),i.withCredentials=!0,i.setRequestHeader("Accept","*/*"),function(e){return"string"==typeof e}(t)?(i.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),i.responseType="text/plain"):function(e){return e instanceof Blob}(t)&&t.type&&i.setRequestHeader("Content-Type",t.type);try{i.send(t)}catch(e){return!1}return!0}.bind(this))}).call("object"===("undefined"==typeof window?"undefined":n(window))?window:{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(18)),i=a(n(21)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var s={base64:function(e){var t=new FormData;return t.append("data",r.default.encode(i.default.encode(JSON.stringify(e)))),t.append("encoding","base64"),t},json:function(e){return JSON.stringify(e)}};t.default={get:function(e){if(!(e in s))throw new Error(o.default.UNSUPPORTED_ENCODER+" Invalid "+e+" encoder.");return s[e]}}},function(e,a,c){(function(r,i){var o;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(){void 0===a||f(a);var e=("object"==(void 0===r?"undefined":f(r))&&r&&r.exports,"object"==(void 0===i?"undefined":f(i))&&i);e.global!==e&&e.window;function t(e){this.message=e}(t.prototype=new Error).name="InvalidCharacterError";function l(e){throw new t(e)}var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=/[\t\n\f\r ]/g,n={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,r,i,o=e.length%3,a="",s=-1,c=e.length-o;++s<c;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,r=e.charCodeAt(++s),a+=u.charAt((i=t+n+r)>>18&63)+u.charAt(i>>12&63)+u.charAt(i>>6&63)+u.charAt(63&i);return 2==o?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),a+=u.charAt((i=t+n)>>10)+u.charAt(i>>4&63)+u.charAt(i<<2&63)+"="):1==o&&(i=e.charCodeAt(s),a+=u.charAt(i>>2)+u.charAt(i<<4&63)+"=="),a},decode:function(e){var t=(e=String(e).replace(s,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),t%4!=1&&!/[^+a-zA-Z0-9/]/.test(e)||l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,r,i=0,o="",a=-1;++a<t;)r=u.indexOf(e.charAt(a)),n=i%4?64*n+r:r,i++%4&&(o+=String.fromCharCode(255&n>>(-2*i&6)));return o},version:"0.1.0"};void 0===(o=function(){return n}.call(a,c,a,r))||(r.exports=o)}()}).call(a,c(19)(e),c(20))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"==typeof window?"undefined":f(window))&&(n=window)}e.exports=n},function(e,t,n){function o(e){for(var t,n,r=[],i=0,o=e.length;i<o;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function r(e){if(55296<=e&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function i(e,t){return p(e>>t&63|128)}function a(e){if(0==(4294967168&e))return p(e);var t="";return 0==(4294965248&e)?t=p(e>>6&31|192):0==(4294901760&e)?(r(e),t=p(e>>12&15|224),t+=i(e,6)):0==(4292870144&e)&&(t=p(e>>18&7|240),t+=i(e,12),t+=i(e,6)),t+p(63&e|128)}function s(){if(d<=f)throw Error("Invalid byte index");var e=255&u[f];if(f++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,t;if(d<f)throw Error("Invalid byte index");if(f==d)return!1;if(e=255&u[f],f++,0==(128&e))return e;if(192==(224&e)){if(128<=(t=(31&e)<<6|s()))return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if(2048<=(t=(15&e)<<12|s()<<6|s()))return r(t),t;throw Error("Invalid continuation byte")}if(240==(248&e)&&65536<=(t=(7&e)<<18|s()<<12|s()<<6|s())&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var l,u,d,f,p;l=t,p=String.fromCharCode,l.version="3.0.0",l.encode=function(e){for(var t=o(e),n=t.length,r=-1,i="";++r<n;)i+=a(t[r]);return i},l.decode=function(e){u=o(e),d=u.length,f=0;for(var t,n=[];!1!==(t=c());)n.push(t);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)65535<(t=e[r])&&(i+=p((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=p(t);return i}(n)}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,[{key:"push",value:function(e){this._queue=[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.slice(0,this.maxSize-1)))}},{key:"forEach",value:function(e){return this._queue.forEach(e)}},{key:"slice",value:function(e,t){return this._queue.slice(e,t)}},{key:"splice",value:function(e,t){return this._queue.splice(e,t)}},{key:"clear",value:function(){this._queue=[]}},{key:"filter",value:function(e){return o.fromArray(this._queue.filter(e),this.maxSize)}},{key:"length",get:function(){return this._queue.length}},{key:"items",get:function(){return JSON.parse(JSON.stringify(this._queue))}}],[{key:"fromArray",value:function(e,t){var n=new o(t);return e.forEach(function(e){return n.push(e)}),n}}]),o);function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this._queue=[],this.maxSize=e}t.default=i},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,[{key:"tick",value:function(){var t=this;this.callbacks.forEach(function(e){return e(t)})}},{key:"start",value:function(){return this.tickIntervalId=setInterval(this.tick.bind(this),this.interval),this}},{key:"stop",value:function(){return clearInterval(this.tickIntervalId),this.tickIntervalId=0,this}},{key:"reschedule",value:function(e){return this.stop().every(e).start()}},{key:"every",value:function(e){return this.interval=e,this}},{key:"call",value:function(e){return this.callbacks.push(e),this}},{key:"isRunning",get:function(){return!!this.tickIntervalId}}]),o);function o(){!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.interval=0,this.tickIntervalId=0,this.callbacks=[]}t.default=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(25)),o=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=o.default.EVENTS_SENDER_MIN_INTERVAL,n=o.default.EVENTS_SENDER_MAX_INTERVAL,r=Number(i.default.get("_hzt.interval"))||o.default.EVENTS_SENDER_INTERVAL;r<=n&&t<=r&&e.interval!==r&&e.reschedule(r)}},function(e,t,n){var r,i,o;
/*!
     * JavaScript Cookie v2.2.0
     * https://github.com/js-cookie/js-cookie
     *
     * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
     * Released under the MIT license
     */void 0===(i="function"==typeof(r=o=function(){function v(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function e(p){function h(e,t,n){var r;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=v({path:"/"},h.defaults,n)).expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*n.expires),n.expires=i}n.expires=n.expires?n.expires.toUTCString():"";try{r=JSON.stringify(t),/^[\{\[]/.test(r)&&(t=r)}catch(e){}t=p.write?p.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var o="";for(var a in n)n[a]&&(o+="; "+a,!0!==n[a]&&(o+="="+n[a]));return document.cookie=e+"="+t+o}e||(r={});for(var s=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,l=0;l<s.length;l++){var u=s[l].split("="),d=u.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var f=u[0].replace(c,decodeURIComponent);if(d=p.read?p.read(d,f):p(d,f)||d.replace(c,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(e===f){r=d;break}e||(r[f]=d)}catch(e){}}return r}}return(h.set=h).get=function(e){return h.call(h,e)},h.getJSON=function(){return h.apply({json:!0},[].slice.call(arguments))},h.defaults={},h.remove=function(e,t){h(e,"",v(t,{expires:-1}))},h.withConverter=e,h}(function(){})})?r.call(t,n,t,e):r)||(e.exports=i),e.exports=o()},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e},i=u(n(3)),o=u(n(2)),a=u(n(1)),s=u(n(0)),c=u(n(4));function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e){return e&&e.__esModule?e:{default:e}}function d(){return o.default.getResource("schemas",{data:{}})}var f="statusReady",p="statusNotReady",h="statusLoading",v="statusScheduled",y="statusError",m=(r(b,[{key:"get",value:function(e,t){var n=e+"-"+t;if(!this.isReady())throw new Error(""+a.default.COMPONENT_NOT_READY);var r=d().data[n];if(!r)throw new Error(a.default.UNSUPPORTED_TYPE+": "+n);return r}},{key:"isReady",value:function(){return this.state===f}},{key:"retry",value:function(){var e=this;this.state=v,this.callbacks.onRetry.forEach(function(e){return e()}),setTimeout(function(){e.state=p,e.load()},s.default.SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS)}},{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===f)return e(d().data);if(this.callbacks.onReady.length>s.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(a.default.LIMIT_EXCEEDED+" Schemas callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===y?e():this.callbacks.onError.push(e)}},{key:"load",value:function(){var n=this,t=d();if(this.state===p){this.state=h,this.callbacks.onLoad.forEach(function(e){return e()});var e=s.default.USE_HTTPS?"https://":"http://";c.default.request("GET",e+this.url,function(e){t.data=Object.assign(t.data||{},e),n.state=f,n.callbacks.onReady.forEach(function(e){return i.default.execAsync(e,t.data)})},function(t){n.state=y,n.callbacks.onError.forEach(function(e){return i.default.execAsync(e,t)}),n.retry()})}}}]),b);function b(e){!function(e){if(!(e instanceof b))throw new TypeError("Cannot call a class as a function")}(this),this.url=e,this.state=p,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}t.default={getInstance:function(e){var t=d();return t.provider||(t.provider=new m(e||s.default.HORIZON_SCHEMAS_HOST+"/schemas")),t.provider},getContextSchemas:d}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});function r(e){return window.cdaaas&&window.cdaaas.SETTINGS?window.cdaaas.SETTINGS[e]:null}function i(e){return window.utag_data?window.utag_data[e]:null}t.default={getTenant:function(){return r("SITE_ID")||i("ut.profile")||"unknown"},getDeviceGroup:function(){return r("MOBILE_GROUP")||i("platform")||"unknown"}}}],r.c=i,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6);function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,i},"object"==f(o)&&"object"==f(e)?e.exports=i():(n=[],void 0===(r="function"==typeof(t=i)?t.apply(o,n):t)||(e.exports=r))}).call(this,t(1)(e))},function(e,o,t){"use strict";(function(e){var t,n,r,i,l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return i={},r.m=n=[function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,[{key:"getParams",value:function(e){var t={skipImpressions:this.isSkippedImpression()};return Object.assign({},t,e)}},{key:"getLocationParams",value:function(){return{drawed:!0,countImpressions:!this.isSkippedImpression()}}},{key:"getHeaders",value:function(){return this.options.extraHeaders||[]}},{key:"getHeader",value:function(n){var r="";return this.getHeaders().forEach(function(t){Object.keys(t).forEach(function(e){n===e&&(r=t[e])})}),r}},{key:"getDict",value:function(){return this.options}},{key:"getTimeout",value:function(){var e=this.options.timeout;return void 0===e&&(e=1e3),e}},{key:"skipImpression",value:function(){return this.options.skipImpressions=!0,this}},{key:"timeout",value:function(e){return this.options.timeout=e,this}},{key:"isFieldSetted",value:function(e){return void 0!==e&&!1!==e}},{key:"isSkippedImpression",value:function(){return this.isFieldSetted(this.options.skipImpressions)}},{key:"addHeader",value:function(e){var t=[];return this.options.hasOwnProperty("extraHeaders")&&(t=this.options.extraHeaders),t.push(e),this.options.extraHeaders=t,this}},{key:"withOriginURL",value:function(e){return new o(this.clone(this.options)).originURL(e)}},{key:"originURL",value:function(e){return this.addHeader({"x-canonical-uri":e}),this}},{key:"getOriginURL",value:function(){return this.getHeader("x-canonical-uri")}},{key:"enableGADebugger",value:function(){return this.options.enableGADebugger=!0,this}},{key:"isEnabledGADebugger",value:function(){return this.isFieldSetted(this.options.enableGADebugger)}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}],[{key:"validated",value:function(e){if(e instanceof o)return e;if(void 0===e)return new o;throw new TypeError("GloboABOptions n√£o v√°lido")}}]),o);function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.options=e}e.exports=i},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=n(10),o=(r(a,[{key:"oneWaySend",value:function(e,t,n,r){this.do("PUT",e,null,t,null,null,n,r)}},{key:"do",value:function(e,t,n,r,i,o,a,s){var c=this,l=6<arguments.length&&void 0!==a?a:[],u=7<arguments.length&&void 0!==s?s:1e3,d="",f=y.interceptParams(t,n);for(var p in f)f.hasOwnProperty(p)&&(d+="&"+p+"="+f[p]);d=d&&"?"+d.substring(1);var h=this.abHost+t+d,v=this.createXHR();v.open(e,h,!0),v.timeout=u,v.onload=function(){200<=v.status&&v.status<400?c.callIfDefined(i,v):c.callIfDefined(o,c.handleError(v,h))},v.onerror=function(e){c.callIfDefined(o,c.handleError(e,h))},v.ontimeout=function(e){c.callIfDefined(o,c.handleError(e,h))},r&&(v.setRequestHeader("Content-Type","application/json;charset=utf-8"),r=JSON.stringify(r)),Array.from(l).forEach(function(t){Object.keys(t).forEach(function(e){v.setRequestHeader(e,t[e])})}),v.send(r)}},{key:"handleError",value:function(e,t){var n={};return n.type=e.type?e.type:"undefined",e.target instanceof XMLHttpRequest&&(e=e.target),e instanceof XMLHttpRequest?(n.status=e.status,n.url=t,n.timeout=e.timeout,n.msg=e.responseText):n.msg=e.toString(),n}},{key:"createXHR",value:function(){var e=new XMLHttpRequest;return e.withCredentials=!0,e}},{key:"callIfDefined",value:function(e,t){e&&e(t)}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.abHost=e}e.exports=o},function(e,t,n){var r,i="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":l(e)};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(1),a=n(16),s=(r(c,[{key:"selectedAlternatives",value:function(e,t,n,r){this.request.do("GET","/v2/selected-alternatives",t.getParams({experiments:e}),null,n,r,t.getHeaders(),t.getTimeout())}},{key:"recordMetric",value:function(e,t,n){var r="/v2/tests/"+t.testId+"/"+e,i={experiment:t.experiment,alternative:t.alternative};this.requestWrapper.oneWay(r,i,n.getHeaders(),n.getTimeout())}}]),c);function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.abHost=e,this.request=new o(this.abHost),this.requestWrapper=new a(this.abHost)}e.exports=s},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(0),o=(r(s,[{key:"impression",value:function(e){var t=e||this.options;this.context.googleAnalytics.impression(t,this.experiment),this._sendMetric("impression",t)}},{key:"conversion",value:function(e){var t=e||this.options;this.context.googleAnalytics.conversion(t,this.experiment),this._sendMetric("conversion",t)}},{key:"_sendMetric",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:this.options,r={experiment:this.experiment,alternative:this.alternative,testId:this.testId};this.context.abEndpoint.recordMetric(e,r,n)}}],[{key:"parseRequest",value:function(e,t,n){var r=JSON.parse(e),i={};for(var o in r.experiments)if(r.experiments.hasOwnProperty(o)){var a=new s(r.experiments[o],t,n);i[o]=a}return i}}]),s);function s(e,t){var n=e.experiment,r=e.alternative,i=e.testId,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.experiment=n,this.alternative=r,this.testId=i,this.context=t,this.options=o}e.exports=o},function(e,t,n){var i="function"==typeof Symbol&&"symbol"===l(Symbol.iterator)?function(e){return void 0===e?"undefined":l(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":l(e)},r=function(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=n(17),s=(r(c,[{key:"googleAnalytics",value:function(e,t,n,r){"function"==typeof ga?(this.created||(ga("create","UA-6912161-21","auto","globoab"),this.created=!0),ga("globoab.send","event","debug-ab-"+a.version,e,this.toMessage(t,n,r))):console.error("Globo-ab - It was not possible to identify the ga function...")}},{key:"choose",value:function(e,t,n,r){this._send(e,t,"choose",n,r)}},{key:"impression",value:function(e,t){this._send(e,t,"impression","call")}},{key:"conversion",value:function(e,t){this._send(e,t,"conversion","call")}},{key:"_send",value:function(e,t,n,r,i){void 0!==e&&e.isEnabledGADebugger()&&this.googleAnalytics(t,n,r,i)}},{key:"toMessage",value:function(e,t,n){"object"===(void 0===n?"undefined":i(n))&&(n=JSON.stringify(n).substring(0,1e3));var r=e+"."+t;return void 0!==n&&(r=r+"."+n),r}}]),c);function c(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.created=!1}e.exports=s},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(0),a=n(3),s=n(4),c=n(5),l=(r(u,[{key:"options",value:function(){return this._options}},{key:"impression",value:function(e,t){var n=e.experiment,r=e.alternative,i=e.testId,o=t||this._options;new s({experiment:n,alternative:r,testId:i},this,o).impression()}},{key:"conversion",value:function(e,t){var n=e.experiment,r=e.alternative,i=e.testId,o=t||this._options;new s({experiment:n,alternative:r,testId:i},this,o).conversion()}},{key:"choose",value:function(e){if(this.googleAnalytics.choose(this.options(),e,"call"),"string"==typeof e)return this._chooseOne(e);if(Array.isArray(e))return this._chooseMulti(e);throw new TypeError("Para sorteio o experimento precisa ser uma string ou uma lista")}},{key:"_chooseOne",value:function(r){var i=this;return new Promise(function(n,t){i.abEndpoint.selectedAlternatives(r,i.options(),function(e){var t=s.parseRequest(e.responseText,i,i.options())[r];i.googleAnalytics.choose(i.options(),r,"success"),n(t)},function(e){i.googleAnalytics.choose(i.options(),r,"fail",e),t(e)})})}},{key:"_chooseMulti",value:function(e){var r=this,i=e.join(",");return new Promise(function(n,t){r.abEndpoint.selectedAlternatives(i,r.options(),function(e){var t=s.parseRequest(e.responseText,r,r.options());r.googleAnalytics.choose(r.options(),i,"success"),n(t)},function(e){r.googleAnalytics.choose(r.options(),i,"fail",e),t(e)})})}}]),u);function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.server=e,this.abEndpoint=new a(this.server),this.googleAnalytics=new c,this._options=t}e.exports=l},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(12),a=n(11),s=n(0),c=n(5),l=(r(u,[{key:"options",value:function(){return this._options}},{key:"choose",value:function(e){var r=this;return new Promise(function(n,t){r.abEndpoint.selectedDrawedExperiment(e,r.options(),function(e){var t=o.parseRequest(e.responseText,r,r.options());n(t)},function(e){t(e)})})}}]),u);function u(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.server=e,this.abEndpoint=new a(this.server),this.googleAnalytics=new c,this._options=t}e.exports=l},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(0),a=n(13),s=n(14),c=(r(l,[{key:"options",value:function(){return this._options}},{key:"increment",value:function(e){var t=e.experiment,n=e.arm,r=e.testId,i=e.abAlternative,o=e.arms;new s({experiment:t,arm:n,testId:r,abAlternative:i,arms:void 0===o?[]:o},this,this.options()).increment()}},{key:"reward",value:function(e){var t=e.experiment,n=e.arm,r=e.testId,i=e.abAlternative,o=e.slot,a=void 0===o?0:o;new s({experiment:t,arm:n,testId:r,abAlternative:i},this,this.options()).reward(a,n)}},{key:"choose",value:function(r){var i=this;return new Promise(function(n,t){i.mabEndpoint.getSelectedArm(r,i.options(),function(e){var t=s.parseRequest(e.responseText,r,i,i.options());n(t)},function(e){t(e)})})}}]),l);function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),this.server=e,this._options=t,this.mabEndpoint=new a(this.server)}e.exports=c},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(0),a=n(6),s=n(8),c=n(7),l=(r(u,[{key:"createOptions",value:function(){return this._options=new o,this.abMain=new a(this._getServer(this.env),this._options),this._options}},{key:"options",value:function(){return this._options}},{key:"mab",value:function(){return new s(this._getMabServer(this.env),this.options())}},{key:"location",value:function(){return new c(this._getServer(this.env),this.options())}},{key:"impression",value:function(e,t){var n=e.experiment,r=e.alternative,i=e.testId;this.abMain.impression({experiment:n,alternative:r,testId:i},t)}},{key:"conversion",value:function(e,t){var n=e.experiment,r=e.alternative,i=e.testId;this.abMain.conversion({experiment:n,alternative:r,testId:i},t)}},{key:"choose",value:function(e){return this.abMain.choose(e)}},{key:"_getEnv",value:function(e){return"prod"===e||"prod.be"===e||"qa"===e||"qa.be"===e||"local"===e?e:"qa"}},{key:"_getServer",value:function(){return"local"===this.env?"http://localhost:8888":"prod"===this.env?"https://globo-ab.globo.com":"prod.be"===this.env?"http://be.globo-ab.globoi.com":"qa.be"===this.env?"https://be.globo-ab.qa.globoi.com":"https://globo-ab.qa.globoi.com"}},{key:"_getMabServer",value:function(){return"local"===this.env?"http://localhost:8888":"prod"===this.env?"https://globo-mab.globo.com":"prod.be"===this.env?"http://be.globo-mab.globoi.com":"qa.be"===this.env?"https://be.globo-mab.qa.globoi.com":"https://globo-mab.qa.globoi.com"}}]),u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.env=this._getEnv(e),this._options=new o,this.abMain=new a(this._getServer(this.env),this._options)}e.exports=l},function(n,e,t){(function(e){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(o,null,[{key:"getPluginParams",value:function(){var e={},t=["ab-client-context","ab-client-experiment","ab-client-alternative"],n=o.getDocumentLocationSearch().substr(1).split("&");for(var r in n)if(n.hasOwnProperty(r)){var i=n[r].split("=");-1<t.indexOf(i[0])&&(e[i[0]]=i[1])}return e}},{key:"getDocumentLocationSearch",value:function(){return document.location.search}},{key:"isCompatibleWithPlugin",value:function(){return void 0!==e.window}},{key:"interceptParams",value:function(e,t){try{if(o.isCompatibleWithPlugin()&&e){var n=void 0,r=void 0;if(-1<e.indexOf("/location/")){var i=e.split("/");n=i[i.length-1]}else-1<e.indexOf("selected-alternatives")&&(r=t.experiments||t.experiment);if(r||n)return Object.assign({},t,this.getExperimentSettings(n,r))}}catch(e){console.error(e)}return t}},{key:"getExperimentSettings",value:function(e,t){var n=this.getPluginParams();if(e&&n["ab-client-context"]===e&&n["ab-client-experiment"]){var r={experiment:n["ab-client-experiment"],alternative:n["ab-client-alternative"]};return r.alternative||delete r.alternative,r}return t&&n["ab-client-experiment"]===t&&n["ab-client-alternative"]?{alternative:n["ab-client-alternative"]}:{}}}]),o);function o(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o)}n.exports=t}).call(e,t(2))},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(1),a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,n(3)),r(s,[{key:"selectedDrawedExperiment",value:function(e,t,n,r){this.request.do("GET","/ab/location/"+e,t.getLocationParams(),null,n,r)}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return t.abHost=e,t.request=new o(t.abHost),t}e.exports=a},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=n(4),o=(r(a,null,[{key:"parseRequest",value:function(e,t,n){var r=JSON.parse(e),i=Object.keys(r)[0],o=r[i],a=o.alternative,s=o.testId;return new c({experiment:i,alternative:a,testId:s},t,n)}}]),a);function a(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a)}e.exports=o},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(1),a=(r(s,[{key:"getSelectedArm",value:function(e,t,n,r){var i="",o="GET";t.isSkippedImpression()?i="/mab/"+e+"/choose":(i="/mab/"+e+"/chooseAndIncrement",o="POST"),this.request.do(o,i,null,null,n,r,t.getHeaders(),t.getTimeout())}},{key:"recordMABMetric",value:function(e,t,n){var r="/mab/"+t.experiment+"/"+e,i=t.arms?t.arms:[],o={arm:t.arm,testId:t.testId,abAlternative:t.abAlternative,arms:i};this.request.do("POST",r,{},o,null,null,n.getHeaders(),n.getTimeout())}}]),s);function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this.abHost=e,this.request=new o(this.abHost)}e.exports=a},function(e,t,n){var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=n(0),o=(r(u,[{key:"increment",value:function(){var e=this.arms;0===e.length&&(e=[{slot:0,name:this.arm}]),this._sendMetric("increment",e)}},{key:"reward",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:"",r=[{slot:0<arguments.length&&void 0!==e?e:0,name:""===n?this.arm:n}];this._sendMetric("reward",r)}},{key:"_sendMetric",value:function(e,t){var n={experiment:this.experiment,arm:this.arm,testId:this.testId,abAlternative:this.abAlternative,arms:t};this._recordMetric(e,n)}},{key:"_recordMetric",value:function(e,t){this.context.mabEndpoint.recordMABMetric(e,t,this.options)}}],[{key:"parseRequest",value:function(e,t,n,r){var i=JSON.parse(e);return i.experiment=t,new u(i,n,r)}}]),u);function u(e,t){var n=e.experiment,r=e.arm,i=e.testId,o=e.abAlternative,a=e.arms,s=void 0===a?[]:a,c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.experiment=n,this.arm=r,this.testId=i,this.abAlternative=o,this.arms=s,this.context=t,this.options=c}e.exports=o},function(i,e,t){(function(n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var e=(function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(t,[{key:"send",value:function(e,t){n.navigator.sendBeacon(this.abHost+e,JSON.stringify(t))}}]),t);function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.abHost=e}i.exports=e}).call(e,t(2))},function(s,e,c){(function(e){var t=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e};function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=c(15),i=c(1),o=(t(a,[{key:"oneWay",value:function(e,t,n,r){this.isBrowserSupportSendBeacon()&&!this.hasHeaders(n)?this.sendBeaconOneWay.send(e,t):this.xmlHttp.oneWaySend(e,t,n,r)}},{key:"isBrowserSupportSendBeacon",value:function(){return!(void 0===e.navigator||!e.navigator.sendBeacon)}},{key:"hasHeaders",value:function(e){return void 0!==e&&0<e.length}}]),a);function a(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.host=e,this.sendBeaconOneWay=new n(this.host),this.xmlHttp=new i(this.host)}s.exports=o}).call(e,c(2))},function(e,t){e.exports={name:"globo-ab-client",version:"3.1.1",description:"Client for creating experiment at Globo AB platform",main:"lib/globo-ab.js",directories:{src:"src"},publishConfig:{registry:"https://artifactory.globoi.com/artifactory/api/npm/npm-local"},dependencies:{},devDependencies:{babel:"^6.23.0","babel-core":"^6.26.0","babel-loader":"^7.1.2","babel-preset-env":"^1.6.1",enzyme:"^3.4.4","enzyme-adapter-react-16":"^1.2.0",eslint:"^4.15.0","eslint-config-google":"^0.9.1",istanbul:"^0.4.5",jasmine:"^2.9.0","jasmine-enzyme":"^6.0.3",jsdom:"^12.0.0",proxyquire:"^1.8.0",sinon:"^4.2.0",webpack:"^2.2.1",jshint:"^2.9.6","http-server":"^0.11.1"},scripts:{test:"jasmine",coverage:"istanbul cover -x **/spec/** node_modules/jasmine/bin/jasmine.js",build:"eslint --fix ./src/* && jasmine && webpack",start:"http-server",tag:"git tag -a 3.0.10 -m '3.0.10'"},repository:{type:"git",url:"gitlab@gitlab.globoi.com:personalizacao/globo-ab-client.git"},keywords:["globo-ab"],author:"Bigdata Analytics Team",license:"ISC"}}],r.c=i,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9);function r(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,r),t.l=!0,t.exports}var n,i},"object"===l(o)&&"object"===l(e)?e.exports=i():(n=[],void 0===(r="function"==typeof(t=i)?t.apply(o,n):t)||(e.exports=r))}).call(this,t(1)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,a=n(0),s=n(2),c=(o=s)&&o.__esModule?o:{default:o};var l=(r(u,[{key:"open",value:function(){this.playerElement.classList.add("video-rec-cancel-screen--enabled"),this.element.classList.add("video-rec-cancel-screen--active"),this.analytics.send([{action:"exibicao recomendacao",opt_label:"exibicao dos 3 videos"}])}},{key:"close",value:function(){this.playerElement.classList.remove("video-rec-cancel-screen--enabled"),this.element.classList.remove("video-rec-cancel-screen--active")}},{key:"updateVideos",value:function(e){var t=0<arguments.length&&void 0!==e?e:[];this.listElement.innerHTML=t.map(this.renderVideo.bind(this)).join("")}},{key:"onReplay",value:function(e){this.replayCallback=e}},{key:"onClick",value:function(e){this.clickCallback=e}},{key:"handleReplay",value:function(){this.close(),this.replayCallback(),this.analytics.send({action:"play reveja",opt_label:"rever"})}},{key:"handleClick",value:function(e){var t=parseInt(e.getAttribute("data-index"),10)+1,n=parseInt(e.getAttribute("data-video-id")),r=e.getAttribute("data-video-title");this.clickCallback(n,r),this.analytics.send({action:"recomendacao",opt_label:"clique | video "+t}),this.close()}},{key:"renderVideo",value:function(e,t){return'\n      <section data-index="'+t+'" class="video-'+this.uniqueId+'"\n      data-video-id="'+e.content.video.id+'"\n      data-video-title="'+e.content.title+'">\n        <div class="thumb-container">\n          <picture class="thumb-container__picture">\n            <source media="(min-width: 620px)" srcset="'+e.content.image.sizes.S.url+'">\n            <img src="'+e.content.image.sizes.S.url+'" />\n          </picture>\n          <span class="thumb-container__duration">'+(0,a.parseMilliseconds)(e.content.video.duration)+'</span>\n          <svg class="thumb-container__play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <g fill="none" fill-rule="evenodd">\n              <path d="M0 0h24v24H0z"></path>\n              <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"></path>\n            </g>\n          </svg>\n        </div>\n        <div class="info-container">\n          <span class="info-container__chapeu">'+e.content.section+'</span>\n          <span class="info-container__title">'+e.content.title+"<span>\n        </div>\n      </section>\n    "}},{key:"template",value:function(){return'\n      <span class="video-rec-cancel-screen__title">Assista tamb√©m</span>\n      <div class="video-rec-cancel-screen__video-list"></div>\n      <button class="video-rec-cancel-screen__replay replay-'+this.uniqueId+'" type="button">\n        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 22 22">\n          <path d="M0 0h24v24H0z" fill="none"/>\n          <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>\n        </svg>\n        Reveja\n      </button>\n    '}}]),u);function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),this.analytics=c.default,this.uniqueId=t,this.playerElement=e,this.element=(0,a.createElement)("video-rec-cancel-screen"),this.element.innerHTML=this.template(),this.playerElement.appendChild(this.element),this.listElement=this.element.getElementsByClassName("video-rec-cancel-screen__video-list")[0],this.replayCallback=function(){},this.clickCallback=function(e){return e},(0,a.delegate)(this.playerElement,"click","replay-"+this.uniqueId,this.handleReplay.bind(this)),(0,a.delegate)(this.playerElement,"click","video-"+this.uniqueId,this.handleClick.bind(this))}t.default=l,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=n(3),a=n(0);var s=(r(c,[{key:"_getEndpoint",value:function(){var e=this.endpoint+"?registerImpression=false";return this.videoId&&(e+="&documentKey=video:"+this.videoId),Promise.resolve(e)}},{key:"_requestData",value:function(){var t=this;return this._getEndpoint().then(function(e){return(0,a.ajax)({url:e}).catch(function(e){return(0,a.logging)("error","Falha ao requisitar v√≠deos recomendados."),Promise.reject(e)}).then(function(e){return t.endpointData=JSON.parse(e),Promise.resolve(t.endpointData)})})}},{key:"_getSessionStorage",value:function(e){if(window.sessionStorage){var t=window.sessionStorage.getItem(o.PLUGIN_KEYNAME+"--"+e);if(!t)return null;try{return JSON.parse(t)}catch(e){return{error:e}}}}},{key:"_setSessionStorage",value:function(e,t){if(window.sessionStorage){var n="string"==typeof e?e:JSON.stringify(e);return window.sessionStorage.setItem(o.PLUGIN_KEYNAME+"--"+t,n),e}}},{key:"_filterSeenVideos",value:function(e){var t=this.getSeenVideos();return t.length<=0?e:e.filter(function(e){return t.indexOf(e.content.video.id)<0})}},{key:"onError",value:function(e){"function"==typeof e&&(this.onErrorCallback=e)}},{key:"getSeenVideos",value:function(){return this._getSessionStorage(o.SEEN_VIDEOS_STORAGE_KEY)||[]}},{key:"getVideos",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:3;return this._requestData().then(function(e){return t._filterSeenVideos(e)}).then(function(e){return e.length>=n?Promise.resolve(e.slice(0,n)):((0,a.logging)("warn","Todos os v√≠deos foram vistos."),Promise.reject())}).catch(function(e){return e instanceof Error&&(0,a.logging)("error",e),Promise.reject(t.onErrorCallback())})}},{key:"updateSeenVideos",value:function(e){var t=this.getSeenVideos();return e&&t.indexOf(e)<0&&t.push(e),this._setSessionStorage(t,o.SEEN_VIDEOS_STORAGE_KEY)}}]),c);function c(e){var t=e.endpoint,n=e.videoId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),this.endpoint=t,this.endpointData=[],this.currentConfig={},this.onErrorCallback=function(){},this.videoId=n}t.default=s,e.exports=t.default}]);