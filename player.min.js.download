var WP3=function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function n(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,T(i.key),i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h(this,n)}}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=f(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},g.apply(this,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){u=!0,r=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function T(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=R(e);if(t){var r=R(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return P(this,n)}}function M(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function N(){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=M(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},N.apply(this,arguments)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function H(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=F(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return a;r++}}}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}),Object.values||(Object.values=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var a=t[r];if(e.call(i,a,r,t))return r;r++}return-1},configurable:!0,writable:!0});var j={mp4:"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="},K=function(){var e,t,n,i,r,a,o=[],s=o.concat,l=o.filter,u=o.slice,c=window.document,d={},h={},p={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,g=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,v=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],E=c.createElement("table"),T=c.createElement("tr"),A={tr:c.createElement("tbody"),tbody:E,thead:E,tfoot:E,td:T,th:T,"*":c.createElement("div")},k=/complete|loaded|interactive/,_=/^[\w-]*$/,S={},w=S.toString,C={},I=c.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},R=Array.isArray||function(e){return e instanceof Array};function x(e){return null==e?String(e):S[w.call(e)]||"object"}function L(e){return"function"==x(e)}function P(e){return null!=e&&e==e.window}function O(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function M(e){return"object"==x(e)}function N(e){return M(e)&&!P(e)&&Object.getPrototypeOf(e)==Object.prototype}function B(e){var t=!!e&&"length"in e&&e.length,i=n.type(e);return"function"!=i&&!P(e)&&("array"==i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function U(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function F(e){return e in h?h[e]:h[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function V(e,t){return"number"!=typeof t||p[U(e)]?t:t+"px"}function H(e){return"children"in e?u.call(e.children):n.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function j(e,t){var n,i=e?e.length:0;for(n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function K(n,i,r){for(t in i)r&&(N(i[t])||R(i[t]))?(N(i[t])&&!N(n[t])&&(n[t]={}),R(i[t])&&!R(n[t])&&(n[t]=[]),K(n[t],i[t],r)):i[t]!==e&&(n[t]=i[t])}function G(e,t){return null==t?n(e):n(e).filter(t)}function W(e,t,n,i){return L(t)?t.call(e,n,i):t}function z(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function Y(t,n){var i=t.className||"",r=i&&i.baseVal!==e;if(n===e)return r?i.baseVal:i;r?i.baseVal=n:t.className=n}function q(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?n.parseJSON(e):e):e}catch(t){return e}}function $(e,t){t(e);for(var n=0,i=e.childNodes.length;n<i;n++)$(e.childNodes[n],t)}return C.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,r=e.parentNode,a=!r;return a&&(r=I).appendChild(e),i=~C.qsa(r,t).indexOf(e),a&&I.removeChild(e),i},r=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},a=function(e){return l.call(e,(function(t,n){return e.indexOf(t)==n}))},C.fragment=function(t,i,r){var a,o,s;return g.test(t)&&(a=n(c.createElement(RegExp.$1))),a||(t.replace&&(t=t.replace(m,"<$1></$2>")),i===e&&(i=f.test(t)&&RegExp.$1),i in A||(i="*"),(s=A[i]).innerHTML=""+t,a=n.each(u.call(s.childNodes),(function(){s.removeChild(this)}))),N(r)&&(o=n(a),n.each(r,(function(e,t){b.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),a},C.Z=function(e,t){return new j(e,t)},C.isZ=function(e){return e instanceof C.Z},C.init=function(t,i){var r,a;if(!t)return C.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&f.test(t))r=C.fragment(t,RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}else{if(L(t))return n(c).ready(t);if(C.isZ(t))return t;if(R(t))a=t,r=l.call(a,(function(e){return null!=e}));else if(M(t))r=[t],t=null;else if(f.test(t))r=C.fragment(t.trim(),RegExp.$1,i),t=null;else{if(i!==e)return n(i).find(t);r=C.qsa(c,t)}}return C.Z(r,t)},(n=function(e,t){return C.init(e,t)}).extend=function(e){var t,n=u.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){K(e,n,t)})),e},C.qsa=function(e,t){var n,i="#"==t[0],r=!i&&"."==t[0],a=i||r?t.slice(1):t,o=_.test(a);return e.getElementById&&o&&i?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:u.call(o&&!i&&e.getElementsByClassName?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},n.contains=c.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},n.type=x,n.isFunction=L,n.isWindow=P,n.isArray=R,n.isPlainObject=N,n.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},n.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},n.inArray=function(e,t,n){return o.indexOf.call(t,e,n)},n.camelCase=r,n.trim=function(e){return null==e?"":String.prototype.trim.call(e)},n.uuid=0,n.support={},n.expr={},n.noop=function(){},n.map=function(e,t){var i,r,a,o,s=[];if(B(e))for(r=0;r<e.length;r++)null!=(i=t(e[r],r))&&s.push(i);else for(a in e)null!=(i=t(e[a],a))&&s.push(i);return(o=s).length>0?n.fn.concat.apply([],o):o},n.each=function(e,t){var n,i;if(B(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(i in e)if(!1===t.call(e[i],i,e[i]))return e;return e},n.grep=function(e,t){return l.call(e,t)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){S["[object "+t+"]"]=t.toLowerCase()})),n.fn={constructor:C.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=C.isZ(t)?t.toArray():t;return s.apply(C.isZ(this)?this.toArray():this,n)},map:function(e){return n(n.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return n(u.apply(this,arguments))},ready:function(e){return k.test(c.readyState)&&c.body?e(n):c.addEventListener("DOMContentLoaded",(function(){e(n)}),!1),this},get:function(t){return t===e?u.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return L(e)?this.not(this.not(e)):n(l.call(this,(function(t){return C.matches(t,e)})))},add:function(e,t){return n(a(this.concat(n(e,t))))},is:function(e){return this.length>0&&C.matches(this[0],e)},not:function(t){var i=[];if(L(t)&&t.call!==e)this.each((function(e){t.call(this,e)||i.push(this)}));else{var r="string"==typeof t?this.filter(t):B(t)&&L(t.item)?u.call(t):n(t);this.forEach((function(e){r.indexOf(e)<0&&i.push(e)}))}return n(i)},has:function(e){return this.filter((function(){return M(e)?n.contains(this,e):n(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!M(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!M(e)?e:n(e)},find:function(e){var t=this;return e?"object"==typeof e?n(e).filter((function(){var e=this;return o.some.call(t,(function(t){return n.contains(t,e)}))})):1==this.length?n(C.qsa(this[0],e)):this.map((function(){return C.qsa(this,e)})):n()},closest:function(e,t){var i=[],r="object"==typeof e&&n(e);return this.each((function(n,a){for(;a&&!(r?r.indexOf(a)>=0:C.matches(a,e));)a=a!==t&&!O(a)&&a.parentNode;a&&i.indexOf(a)<0&&i.push(a)})),n(i)},parents:function(e){for(var t=[],i=this;i.length>0;)i=n.map(i,(function(e){if((e=e.parentNode)&&!O(e)&&t.indexOf(e)<0)return t.push(e),e}));return G(t,e)},parent:function(e){return G(a(this.pluck("parentNode")),e)},children:function(e){return G(this.map((function(){return H(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||u.call(this.childNodes)}))},siblings:function(e){return G(this.map((function(e,t){return l.call(H(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return n.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=c.createElement(e),c.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),d[e]=n),d[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=L(e);if(this[0]&&!t)var i=n(e).get(0),r=i.parentNode||this.length>1;return this.each((function(a){n(this).wrapAll(t?e.call(this,a):r?i.cloneNode(!0):i)}))},wrapAll:function(e){if(this[0]){var t;for(n(this[0]).before(e=n(e));(t=e.children()).length;)e=t.first();n(e).append(this)}return this},wrapInner:function(e){var t=L(e);return this.each((function(i){var r=n(this),a=r.contents(),o=t?e.call(this,i):e;a.length?a.wrapAll(o):r.append(o)}))},unwrap:function(){return this.parent().each((function(){n(this).replaceWith(n(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var i=n(this);(t===e?"none"==i.css("display"):t)?i.show():i.hide()}))},prev:function(e){return n(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return n(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(t){var i=this.innerHTML;n(this).empty().append(W(this,e,t,i))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=W(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(n,i){var r;return"string"!=typeof n||1 in arguments?this.each((function(e){if(1===this.nodeType)if(M(n))for(t in n)z(this,t,n[t]);else z(this,n,W(this,i,e,this.getAttribute(n)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(n))?r:e},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){z(this,e)}),this)}))},prop:function(e,t){return e=D[e]||e,1 in arguments?this.each((function(n){this[e]=W(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=D[e]||e,this.each((function(){delete this[e]}))},data:function(t,n){var i="data-"+t.replace(y,"-$1").toLowerCase(),r=1 in arguments?this.attr(i,n):this.attr(i);return null!==r?q(r):e},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=W(this,e,t,this.value)}))):this[0]&&(this[0].multiple?n(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var i=n(this),r=W(this,e,t,i.offset()),a=i.offsetParent().offset(),o={top:r.top-a.top,left:r.left-a.left};"static"==i.css("position")&&(o.position="relative"),i.css(o)}));if(!this.length)return null;if(c.documentElement!==this[0]&&!n.contains(c.documentElement,this[0]))return{top:0,left:0};var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(e,i){if(arguments.length<2){var a=this[0];if("string"==typeof e){if(!a)return;return a.style[r(e)]||getComputedStyle(a,"").getPropertyValue(e)}if(R(e)){if(!a)return;var o={},s=getComputedStyle(a,"");return n.each(e,(function(e,t){o[t]=a.style[r(t)]||s.getPropertyValue(t)})),o}}var l="";if("string"==x(e))i||0===i?l=U(e)+":"+V(e,i):this.each((function(){this.style.removeProperty(U(e))}));else for(t in e)e[t]||0===e[t]?l+=U(t)+":"+V(t,e[t])+";":this.each((function(){this.style.removeProperty(U(t))}));return this.each((function(){this.style.cssText+=";"+l}))},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(Y(e))}),F(e))},addClass:function(e){return e?this.each((function(t){if("className"in this){i=[];var r=Y(this);W(this,e,t,r).split(/\s+/g).forEach((function(e){n(this).hasClass(e)||i.push(e)}),this),i.length&&Y(this,r+(r?" ":"")+i.join(" "))}})):this},removeClass:function(t){return this.each((function(n){if("className"in this){if(t===e)return Y(this,"");i=Y(this),W(this,t,n,i).split(/\s+/g).forEach((function(e){i=i.replace(F(e)," ")})),Y(this,i.trim())}}))},toggleClass:function(t,i){return t?this.each((function(r){var a=n(this);W(this,t,r,Y(this)).split(/\s+/g).forEach((function(t){(i===e?!a.hasClass(t):i)?a.addClass(t):a.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var n="scrollTop"in this[0];return t===e?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var n="scrollLeft"in this[0];return t===e?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),r=v.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(n(e).css("margin-top"))||0,i.left-=parseFloat(n(e).css("margin-left"))||0,r.top+=parseFloat(n(t[0]).css("border-top-width"))||0,r.left+=parseFloat(n(t[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||c.body;e&&!v.test(e.nodeName)&&"static"==n(e).css("position");)e=e.offsetParent;return e}))}},n.fn.detach=n.fn.remove,["width","height"].forEach((function(t){var i=t.replace(/./,(function(e){return e[0].toUpperCase()}));n.fn[t]=function(r){var a,o=this[0];return r===e?P(o)?o["inner"+i]:O(o)?o.documentElement["scroll"+i]:(a=this.offset())&&a[t]:this.each((function(e){(o=n(this)).css(t,W(this,r,e,o[t]()))}))}})),["after","prepend","before","append"].forEach((function(t,i){var r=i%2;n.fn[t]=function(){var t,a,o=n.map(arguments,(function(i){var r=[];return"array"==(t=x(i))?(i.forEach((function(t){return t.nodeType!==e?r.push(t):n.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(C.fragment(t)))})),r):"object"==t||null==i?i:C.fragment(i)})),s=this.length>1;return o.length<1?this:this.each((function(e,t){a=r?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null;var l=n.contains(c.documentElement,a);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!a)return n(e).remove();a.insertBefore(e,t),l&&$(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},n.fn[r?t+"To":"insert"+(i?"Before":"After")]=function(e){return n(e)[t](this),this}})),C.Z.prototype=j.prototype=n.fn,C.uniq=a,C.deserializeValue=q,n.zepto=C,n}();window.Zepto=K,void 0===window.$&&(window.$=K),function(e){var t,n,i=+new Date,r=window.document,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,s=/^(?:text|application)\/xml/i,l="application/json",u="text/html",c=/^\s*$/,d=r.createElement("a");function h(t,n,i,a){if(t.global)return function(t,n,i){var r=e.Event(n);return e(t).trigger(r,i),!r.isDefaultPrevented()}(n||r,i,a)}function p(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===h(t,n,"ajaxBeforeSend",[e,t]))return!1;h(t,n,"ajaxSend",[e,t])}function f(e,t,n,i){var r=n.context,a="success";n.success.call(r,e,a,t),i&&i.resolveWith(r,[e,a,t]),h(n,r,"ajaxSuccess",[t,n,e]),m(a,t,n)}function g(e,t,n,i,r){var a=i.context;i.error.call(a,n,t,e),r&&r.rejectWith(a,[n,t,e]),h(i,a,"ajaxError",[n,i,e||t]),m(t,n,i)}function m(t,n,i){var r=i.context;i.complete.call(r,n,t),h(i,r,"ajaxComplete",[n,i]),function(t){t.global&&!--e.active&&h(t,null,"ajaxStop")}(i)}function v(){}function y(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function b(t,n,i,r){return e.isFunction(n)&&(r=i,i=n,n=void 0),e.isFunction(i)||(r=i,i=void 0),{url:t,data:n,success:i,dataType:r}}d.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var a,o,s=t.jsonpCallback,l=(e.isFunction(s)?s():s)||"Zepto"+i++,u=r.createElement("script"),c=window[l],d=function(t){e(u).triggerHandler("error",t||"abort")},h={abort:d};return n&&n.promise(h),e(u).on("load error",(function(i,r){clearTimeout(o),e(u).off().remove(),"error"!=i.type&&a?f(a[0],h,t,n):g(null,r||"error",h,t,n),window[l]=c,a&&e.isFunction(c)&&c(a[0]),c=a=void 0})),!1===p(h,t)?(d("abort"),h):(window[l]=function(){a=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+l),r.head.appendChild(u),t.timeout>0&&(o=setTimeout((function(){d("timeout")}),t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:v,success:v,error:v,complete:v,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:l,xml:"application/xml, text/xml",html:u,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:v},e.ajax=function(i){var a,m,b=e.extend({},i||{}),E=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===b[t]&&(b[t]=e.ajaxSettings[t]);!function(t){t.global&&0==e.active++&&h(t,null,"ajaxStart")}(b),b.crossDomain||((a=r.createElement("a")).href=b.url,a.href=a.href,b.crossDomain=d.protocol+"//"+d.host!=a.protocol+"//"+a.host),b.url||(b.url=window.location.toString()),(m=b.url.indexOf("#"))>-1&&(b.url=b.url.slice(0,m)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=y(t.url,t.data),t.data=void 0)}(b);var T=b.dataType,A=/\?.+=\?/.test(b.url);if(A&&(T="jsonp"),!1!==b.cache&&(i&&!0===i.cache||"script"!=T&&"jsonp"!=T)||(b.url=y(b.url,"_="+Date.now())),"jsonp"==T)return A||(b.url=y(b.url,b.jsonp?b.jsonp+"=?":!1===b.jsonp?"":"callback=?")),e.ajaxJSONP(b,E);var k,_=b.accepts[T],S={},w=function(e,t){S[e.toLowerCase()]=[e,t]},C=/^([\w-]+:)\/\//.test(b.url)?RegExp.$1:window.location.protocol,I=b.xhr(),D=I.setRequestHeader;if(E&&E.promise(I),b.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",_||"*/*"),(_=b.mimeType||_)&&(_.indexOf(",")>-1&&(_=_.split(",",2)[0]),I.overrideMimeType&&I.overrideMimeType(_)),(b.contentType||!1!==b.contentType&&b.data&&"GET"!=b.type.toUpperCase())&&w("Content-Type",b.contentType||"application/x-www-form-urlencoded"),b.headers)for(n in b.headers)w(n,b.headers[n]);if(I.setRequestHeader=w,I.onreadystatechange=function(){if(4==I.readyState){I.onreadystatechange=v,clearTimeout(k);var t,n=!1;if(I.status>=200&&I.status<300||304==I.status||0==I.status&&"file:"==C){if(T=T||function(e){return e&&(e=e.split(";",2)[0]),e&&(e==u?"html":e==l?"json":o.test(e)?"script":s.test(e)&&"xml")||"text"}(b.mimeType||I.getResponseHeader("content-type")),"arraybuffer"==I.responseType||"blob"==I.responseType)t=I.response;else{t=I.responseText;try{t=function(e,t,n){if(n.dataFilter==v)return e;var i=n.context;return n.dataFilter.call(i,e,t)}(t,T,b),"script"==T?(0,eval)(t):"xml"==T?t=I.responseXML:"json"==T&&(t=c.test(t)?null:e.parseJSON(t))}catch(e){n=e}if(n)return g(n,"parsererror",I,b,E)}f(t,I,b,E)}else g(I.statusText||null,I.status?"error":"abort",I,b,E)}},!1===p(I,b))return I.abort(),g(null,"abort",I,b,E),I;var R=!("async"in b)||b.async;if(I.open(b.type,b.url,R,b.username,b.password),b.xhrFields)for(n in b.xhrFields)I[n]=b.xhrFields[n];for(n in S)D.apply(I,S[n]);return b.timeout>0&&(k=setTimeout((function(){I.onreadystatechange=v,I.abort(),g(null,"timeout",I,b,E)}),b.timeout)),I.send(b.data?b.data:null),I},e.get=function(){return e.ajax(b.apply(null,arguments))},e.post=function(){var t=b.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=b.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var r,o=this,s=t.split(/\s/),l=b(t,n,i),u=l.success;return s.length>1&&(l.url=s[0],r=s[1]),l.success=function(t){o.html(r?e("<div>").html(t.replace(a,"")).find(r):t),u&&u.apply(o,arguments)},e.ajax(l),this};var E=encodeURIComponent;function T(t,n,i,r){var a,o=e.isArray(n),s=e.isPlainObject(n);e.each(n,(function(n,l){a=e.type(l),r&&(n=i?r:r+"["+(s||"object"==a||"array"==a?n:"")+"]"),!r&&o?t.add(l.name,l.value):"array"==a||!i&&"object"==a?T(t,l,i,n):t.add(n,l)}))}e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(E(t)+"="+E(n))},T(i,t,n),i.join("&").replace(/%20/g,"+")}}(K),function(e){e.Callbacks=function(t){t=e.extend({},t);var n,i,r,a,o,s,l=[],u=!t.once&&[],c=function(e){for(n=t.memory&&e,i=!0,s=a||0,a=0,o=l.length,r=!0;l&&s<o;++s)if(!1===l[s].apply(e[0],e[1])&&t.stopOnFalse){n=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):n?l.length=0:d.disable())},d={add:function(){if(l){var i=l.length,s=function(n){e.each(n,(function(e,n){"function"==typeof n?t.unique&&d.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&s(n)}))};s(arguments),r?o=l.length:n&&(a=i,c(n))}return this},remove:function(){return l&&e.each(arguments,(function(t,n){for(var i;(i=e.inArray(n,l,i))>-1;)l.splice(i,1),r&&(i<=o&&--o,i<=s&&--s)})),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return o=l.length=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||i&&!u||(t=[e,(t=t||[]).slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments)},fired:function(){return!!i}};return d}}(K),function(e){var t=Array.prototype.slice;function n(t){var i=[["resolve","done",e.Callbacks({once:1,memory:1}),"resolved"],["reject","fail",e.Callbacks({once:1,memory:1}),"rejected"],["notify","progress",e.Callbacks({memory:1})]],r="pending",a={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var t=arguments;return n((function(n){e.each(i,(function(i,r){var s=e.isFunction(t[i])&&t[i];o[r[1]]((function(){var t=s&&s.apply(this,arguments);if(t&&e.isFunction(t.promise))t.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var i=this===a?n.promise():this,o=s?[t]:arguments;n[r[0]+"With"](i,o)}}))})),t=null})).promise()},promise:function(t){return null!=t?e.extend(t,a):a}},o={};return e.each(i,(function(e,t){var n=t[2],s=t[3];a[t[1]]=n.add,s&&n.add((function(){r=s}),i[1^e][2].disable,i[2][2].lock),o[t[0]]=function(){return o[t[0]+"With"](this===o?a:this,arguments),this},o[t[0]+"With"]=n.fireWith})),a.promise(o),t&&t.call(o,o),o}e.when=function(i){var r,a,o,s=t.call(arguments),l=s.length,u=0,c=1!==l||i&&e.isFunction(i.promise)?l:0,d=1===c?i:n(),h=function(e,n,i){return function(a){n[e]=this,i[e]=arguments.length>1?t.call(arguments):a,i===r?d.notifyWith(n,i):--c||d.resolveWith(n,i)}};if(l>1)for(r=new Array(l),a=new Array(l),o=new Array(l);u<l;++u)s[u]&&e.isFunction(s[u].promise)?s[u].promise().done(h(u,o,s)).fail(d.reject).progress(h(u,a,r)):--c;return c||d.resolveWith(o,s),d.promise()},e.Deferred=n}(K),function(e){var t,n=1,i=Array.prototype.slice,r=e.isFunction,a=function(e){return"string"==typeof e},o={},s={},l="onfocusin"in window,u={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};function d(e){return e._zid||(e._zid=n++)}function h(e,t,n,i){if((t=p(t)).ns)var r=(a=t.ns,new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)"));var a;return(o[d(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!n||d(e.fn)===d(n))&&(!i||e.sel==i)}))}function p(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function f(e,t){return e.del&&!l&&e.e in u||!!t}function g(e){return c[e]||l&&u[e]||e}function m(n,i,r,a,s,l,u){var h=d(n),m=o[h]||(o[h]=[]);i.split(/\s/).forEach((function(i){if("ready"==i)return e(document).ready(r);var o=p(i);o.fn=r,o.sel=s,o.e in c&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=l;var d=l||r;o.proxy=function(e){if(!(e=A(e)).isImmediatePropagationStopped()){e.data=a;var i=d.apply(n,e._args==t?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},o.i=m.length,m.push(o),"addEventListener"in n&&n.addEventListener(g(o.e),o.proxy,f(o,u))}))}function v(e,t,n,i,r){var a=d(e);(t||"").split(/\s/).forEach((function(t){h(e,t,n,i).forEach((function(t){delete o[a][t.i],"removeEventListener"in e&&e.removeEventListener(g(t.e),t.proxy,f(t,r))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:m,remove:v},e.proxy=function(t,n){var o=2 in arguments&&i.call(arguments,2);if(r(t)){var s=function(){return t.apply(n,o?o.concat(i.call(arguments)):arguments)};return s._zid=d(t),s}if(a(n))return o?(o.unshift(t[n],t),e.proxy.apply(null,o)):e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var y=function(){return!0},b=function(){return!1},E=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function A(n,i){return!i&&n.isDefaultPrevented||(i||(i=n),e.each(T,(function(e,t){var r=i[e];n[e]=function(){return this[t]=y,r&&r.apply(i,arguments)},n[t]=b})),n.timeStamp||(n.timeStamp=Date.now()),(i.defaultPrevented!==t?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(n.isDefaultPrevented=y)),n}function k(e){var n,i={originalEvent:e};for(n in e)E.test(n)||e[n]===t||(i[n]=e[n]);return A(i,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(n,o,s,l,u){var c,d,h=this;return n&&!a(n)?(e.each(n,(function(e,t){h.on(e,o,s,t,u)})),h):(a(o)||r(l)||!1===l||(l=s,s=o,o=t),l!==t&&!1!==s||(l=s,s=t),!1===l&&(l=b),h.each((function(t,r){u&&(c=function(e){return v(r,e.type,l),l.apply(this,arguments)}),o&&(d=function(t){var n,a=e(t.target).closest(o,r).get(0);if(a&&a!==r)return n=e.extend(k(t),{currentTarget:a,liveFired:r}),(c||l).apply(a,[n].concat(i.call(arguments,1)))}),m(r,n,l,s,o,d||c)})))},e.fn.off=function(n,i,o){var s=this;return n&&!a(n)?(e.each(n,(function(e,t){s.off(e,i,t)})),s):(a(i)||r(o)||!1===o||(o=i,i=t),!1===o&&(o=b),s.each((function(){v(this,n,o,i)})))},e.fn.trigger=function(t,n){return(t=a(t)||e.isPlainObject(t)?e.Event(t):A(t))._args=n,this.each((function(){t.type in u&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var i,r;return this.each((function(o,s){(i=k(a(t)?e.Event(t):t))._args=n,i.target=s,e.each(h(s,t.type||t),(function(e,t){if(r=t.proxy(i),i.isImmediatePropagationStopped())return!1}))})),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){a(e)||(e=(t=e).type);var n=document.createEvent(s[e]||"Events"),i=!0;if(t)for(var r in t)"bubbles"==r?i=!!t[r]:n[r]=t[r];return n.initEvent(e,i,!0),A(n)}}(K),function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(e){return null}}}}(),function(e){var t=e.zepto,n=t.qsa,i=t.matches;function r(t){return!(!(t=e(t)).width()&&!t.height())&&"none"!==t.css("display")}var a=e.expr[":"]={visible:function(){if(r(this))return this},hidden:function(){if(!r(this))return this},selected:function(){if(this.selected)return this},checked:function(){if(this.checked)return this},parent:function(){return this.parentNode},first:function(e){if(0===e)return this},last:function(e,t){if(e===t.length-1)return this},eq:function(e,t,n){if(e===n)return this},contains:function(t,n,i){if(e(this).text().indexOf(i)>-1)return this},has:function(e,n,i){if(t.qsa(this,i).length)return this}},o=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),s=/^\s*>/,l="Zepto"+ +new Date;function u(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,r=o.exec(e);if(r&&r[2]in a&&(n=a[r[2]],i=r[3],e=r[1],i)){var s=Number(i);i=isNaN(s)?i.replace(/^["']|["']$/g,""):s}return t(e,n,i)}t.qsa=function(i,r){return u(r,(function(a,o,u){try{var c;!a&&o?a="*":s.test(a)&&(c=e(i).addClass(l),a="."+l+" "+a);var d=n(i,a)}catch(e){throw console.error("error performing selector: %o",r),e}finally{c&&c.removeClass(l)}return o?t.uniq(e.map(d,(function(e,t){return o.call(e,t,d,u)}))):d}))},t.matches=function(e,t){return u(t,(function(t,n,r){return(!t||i(e,t))&&(!n||n.call(e,null,r)===e)}))}}(K);var G,W,z,Y=K,q=[{name:"Chromium",group:"Chrome",identifier:"Chromium/([0-9.]*)"},{name:"Chrome Mobile",group:"Chrome",identifier:"Chrome/([0-9.]*) Mobile",versionIdentifier:"Chrome/([0-9.]*)"},{name:"Chrome",group:"Chrome",identifier:"Chrome/([0-9.]*)"},{name:"Chrome for iOS",group:"Chrome",identifier:"CriOS/([0-9.]*)"},{name:"Android Browser",group:"Chrome",identifier:"CrMo/([0-9.]*)"},{name:"Firefox",group:"Firefox",identifier:"Firefox/([0-9.]*)"},{name:"Opera Mini",group:"Opera",identifier:"Opera Mini/([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera ([0-9.]*)"},{name:"Opera",group:"Opera",identifier:"Opera/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"},{name:"IEMobile",group:"Explorer",identifier:"IEMobile/([0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"MSIE ([a-zA-Z0-9.]*)"},{name:"Internet Explorer",group:"Explorer",identifier:"Trident/([0-9.]*)",versionIdentifier:"rv:([0-9.]*)"},{name:"Spartan",group:"Spartan",identifier:"Edge/([0-9.]*)",versionIdentifier:"Edge/([0-9.]*)"},{name:"Safari",group:"Safari",identifier:"Safari/([0-9.]*)",versionIdentifier:"Version/([0-9.]*)"}],X=[{name:"Windows 2000",group:"Windows",identifier:"Windows NT 5.0",version:"5.0"},{name:"Windows XP",group:"Windows",identifier:"Windows NT 5.1",version:"5.1"},{name:"Windows Vista",group:"Windows",identifier:"Windows NT 6.0",version:"6.0"},{name:"Windows 7",group:"Windows",identifier:"Windows NT 6.1",version:"7.0"},{name:"Windows 8",group:"Windows",identifier:"Windows NT 6.2",version:"8.0"},{name:"Windows 8.1",group:"Windows",identifier:"Windows NT 6.3",version:"8.1"},{name:"Windows 10",group:"Windows",identifier:"Windows NT 10.0",version:"10.0"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone ([0-9.]*)"},{name:"Windows Phone",group:"Windows Phone",identifier:"Windows Phone OS ([0-9.]*)"},{name:"Windows",group:"Windows",identifier:"Windows"},{name:"Chrome OS",group:"Chrome OS",identifier:"CrOS"},{name:"Android",group:"Android",identifier:"Android",versionIdentifier:"Android ([a-zA-Z0-9.-]*)"},{name:"iPad",group:"iOS",identifier:"iPad",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPod",group:"iOS",identifier:"iPod",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"iPhone",group:"iOS",identifier:"iPhone OS",versionIdentifier:"OS ([0-9_]*)",versionSeparator:"[_|.]"},{name:"Mac OS X High Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])13([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Sierra",group:"Mac OS",identifier:"Mac OS X (10([_|.])12([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X El Capitan",group:"Mac OS",identifier:"Mac OS X (10([_|.])11([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Yosemite",group:"Mac OS",identifier:"Mac OS X (10([_|.])10([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mavericks",group:"Mac OS",identifier:"Mac OS X (10([_|.])9([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Mountain Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])8([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Lion",group:"Mac OS",identifier:"Mac OS X (10([_|.])7([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Snow Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])6([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Leopard",group:"Mac OS",identifier:"Mac OS X (10([_|.])5([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Tiger",group:"Mac OS",identifier:"Mac OS X (10([_|.])4([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Panther",group:"Mac OS",identifier:"Mac OS X (10([_|.])3([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Jaguar",group:"Mac OS",identifier:"Mac OS X (10([_|.])2([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Puma",group:"Mac OS",identifier:"Mac OS X (10([_|.])1([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS X Cheetah",group:"Mac OS",identifier:"Mac OS X (10([_|.])0([0-9_.]*))",versionSeparator:"[_|.]"},{name:"Mac OS",group:"Mac OS",identifier:"Mac OS"},{name:"Ubuntu",group:"Linux",identifier:"Ubuntu",versionIdentifier:"Ubuntu/([0-9.]*)"},{name:"Debian",group:"Linux",identifier:"Debian"},{name:"Gentoo",group:"Linux",identifier:"Gentoo"},{name:"Linux",group:"Linux",identifier:"Linux"},{name:"BlackBerry",group:"BlackBerry",identifier:"BlackBerry"}],Q={},Z=function(e,t){var n=e.split(".",2);t.fullVersion=e,n[0]&&(t.majorVersion=parseInt(n[0])),n[1]&&(t.minorVersion=parseInt(n[1]))},J=function(e,t,n){var i="["==t.substr(0,1)?new RegExp(t,"g"):t,r=e.split(i,2);"."!=t&&(e=e.replace(new RegExp(t,"g"),".")),n.fullVersion=e,r&&r[0]&&(n.majorVersion=parseInt(r[0])),r&&r[1]&&(n.minorVersion=parseInt(r[1]))},ee=function(e){var t,n=e.match(/\b(playstation 4|nx|opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(n[1]))return t=/\brv[ :]+(\d+)/g.exec(e)||[],{name:"IE",version:parseInt(t[1]||"")};if("Chrome"===n[1]){if(null!=(t=e.match(/\bOPR\/(\d+)/)))return{name:"Opera",version:parseInt(t[1])};if(null!=(t=e.match(/\bEdge\/(\d+)/)))return{name:"Edge",version:parseInt(t[1])}}else/android/i.test(e)&&(t=e.match(/version\/(\d+)/i))&&(n.splice(1,1,"Android WebView"),n.splice(2,1,t[1]));return{name:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"])[0],version:parseInt(n[1])}}(navigator.userAgent);Q.isEdge=/Edg|EdgiOS|EdgA/i.test(navigator.userAgent),Q.isChrome=/Chrome|CriOS/i.test(navigator.userAgent)&&!Q.isEdge,Q.isSafari=/Safari/i.test(navigator.userAgent)&&!Q.isChrome&&!Q.isEdge,Q.isFirefox=/Firefox/i.test(navigator.userAgent),Q.isLegacyIE=!!window.ActiveXObject,Q.isIE=Q.isLegacyIE||/trident.*rv:1\d/i.test(navigator.userAgent),Q.isIE11=/trident.*rv:11/i.test(navigator.userAgent),Q.isChromecast=Q.isChrome&&/CrKey/i.test(navigator.userAgent),Q.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone|IEMobile|Mobile Safari|Opera Mini/i.test(navigator.userAgent),Q.isiOS=/iPad|iPhone|iPod/i.test(navigator.userAgent),Q.isAndroid=/Android/i.test(navigator.userAgent),Q.isWindowsPhone=/Windows Phone/i.test(navigator.userAgent),Q.isWin8App=/MSAppHost/i.test(navigator.userAgent),Q.isWiiU=/WiiU/i.test(navigator.userAgent),Q.isPS4=/PlayStation 4/i.test(navigator.userAgent),Q.hasLocalstorage=function(){try{return localStorage.setItem("clappr","clappr"),localStorage.removeItem("clappr"),!0}catch(e){return!1}}(),Q.hasFlash=function(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!(!navigator.mimeTypes||void 0===navigator.mimeTypes["application/x-shockwave-flash"]||!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)}}(),Q.name=ee.name,Q.version=ee.version,Q.userAgent=navigator.userAgent,Q.data=function(){var e,t={},n=Q.userAgent.toLowerCase(),i=H(q);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a&&a[1]){if(t.name=r.name,t.group=r.group,r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&Z(o[1],t)}else Z(a[1],t);break}}}catch(e){i.e(e)}finally{i.f()}return t}(),Q.os=function(){var e,t={},n=Q.userAgent.toLowerCase(),i=H(X);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=new RegExp(r.identifier.toLowerCase()).exec(n);if(null!=a){if(t.name=r.name,t.group=r.group,r.version)J(r.version,r.versionSeparator?r.versionSeparator:".",t);else if(a[1])J(a[1],r.versionSeparator?r.versionSeparator:".",t);else if(r.versionIdentifier){var o=new RegExp(r.versionIdentifier.toLowerCase()).exec(n);null!=o&&o[1]&&J(o[1],r.versionSeparator?r.versionSeparator:".",t)}break}}}catch(e){i.e(e)}finally{i.f()}return t}(),Q.isWindows=/^Windows$/i.test(Q.os.group),Q.isMacOS=/^Mac OS$/i.test(Q.os.group),Q.isLinux=/^Linux$/i.test(Q.os.group),Q.viewport=((G={}).width=Y(window).width(),G.height=Y(window).height(),G),Q.device=(W=Q.userAgent,(z=/\((iP(?:hone|ad|od))?(?:[^;]*; ){0,2}([^)]+(?=\)))/.exec(W))&&(z[1]||z[2])||""),void 0!==window.orientation&&function(){switch(window.orientation){case-90:case 90:Q.viewport.orientation="landscape";break;default:Q.viewport.orientation="portrait"}}();var te={},ne=[],ie=(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}).bind(window),re=(window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout).bind(window);function ae(e,t){if(t)for(var n in t){var i=Object.getOwnPropertyDescriptor(t,n);i?Object.defineProperty(e,n,i):e[n]=t[n]}return e}function oe(e,t){var n=function(e){D(i,e);var n=O(i);function i(){var e;S(this,i);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a)),t.initialize&&t.initialize.apply(L(e),a),e}return C(i)}(e);return ae(n.prototype,t),n}var se={fullscreenElement:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},requestFullscreen:function(e){if(e.requestFullscreen)return e.requestFullscreen();if(e.webkitRequestFullscreen){if("function"==typeof e.then)return e.webkitRequestFullscreen();e.webkitRequestFullscreen()}else{if(e.mozRequestFullScreen)return e.mozRequestFullScreen();if(e.msRequestFullscreen)return e.msRequestFullscreen();e.querySelector&&e.querySelector("video")&&e.querySelector("video").webkitEnterFullScreen?e.querySelector("video").webkitEnterFullScreen():e.webkitEnterFullScreen&&e.webkitEnterFullScreen()}},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},fullscreenEnabled:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},le=function(){function e(){S(this,e)}return C(e,null,[{key:"_defaultConfig",value:function(){return{volume:{value:100,parse:parseInt}}}},{key:"_defaultValueFor",value:function(e){try{return this._defaultConfig()[e].parse(this._defaultConfig()[e].value)}catch(e){return}}},{key:"_createKeyspace",value:function(e){return"clappr.".concat(document.domain,".").concat(e)}},{key:"restore",value:function(e){return Q.hasLocalstorage&&localStorage[this._createKeyspace(e)]?this._defaultConfig()[e].parse(localStorage[this._createKeyspace(e)]):this._defaultValueFor(e)}},{key:"persist",value:function(e,t){if(Q.hasLocalstorage)try{return localStorage[this._createKeyspace(e)]=t,!0}catch(e){return!1}}}]),e}(),ue=function(){function e(){S(this,e)}return C(e,null,[{key:"params",get:function(){var e=window.location.search.substring(1);return e!==this.query&&(this._urlParams=this.parse(e),this.query=e),this._urlParams}},{key:"hashParams",get:function(){var e=window.location.hash.substring(1);return e!==this.hash&&(this._hashParams=this.parse(e),this.hash=e),this._hashParams}},{key:"parse",value:function(e){for(var t,n=/\+/g,i=/([^&=]+)=?([^&]*)/g,r=function(e){return decodeURIComponent(e.replace(n," "))},a={};t=i.exec(e);)a[r(t[1]).toLowerCase()]=r(t[2]);return a}}]),e}();function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t",t=0,n=ue.params[e]||ue.hashParams[e]||"",i=n.match(/[0-9]+[hms]+/g)||[];if(i.length>0){var r={h:3600,m:60,s:1};i.forEach((function(e){if(e){var n=e[e.length-1],i=parseInt(e.slice(0,e.length-1),10);t+=i*r[n]}}))}else n&&(t=parseInt(n,10));return t}function de(e){return te[e]||(te[e]=0),e+ ++te[e]}function he(e){return e-parseFloat(e)+1>=0}function pe(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function fe(){return window.navigator&&window.navigator.language}function ge(e,t){var n=(t=Object.assign({inline:!1,muted:!1,timeout:250,type:"video",source:j.mp4,element:null},t)).element?t.element:document.createElement(t.type);n.muted=t.muted,!0===t.muted&&n.setAttribute("muted","muted"),!0===t.inline&&n.setAttribute("playsinline","playsinline"),n.src=t.source;var i=n.play(),r=setTimeout((function(){a(!1,new Error("Timeout ".concat(t.timeout," ms has been reached")))}),t.timeout),a=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;clearTimeout(r),e(t,n)};void 0!==i?i.then((function(){return a(!0)})).catch((function(e){return a(!1,e)})):a(!0)}var me=function(){function e(){S(this,e)}return C(e,null,[{key:"configure",value:function(e){this.options=Y.extend(!0,this.options,e)}},{key:"create",value:function(e){return this.options.recycleVideo&&"video"===e&&ne.length>0?ne.shift():document.createElement(e)}},{key:"garbage",value:function(e){this.options.recycleVideo&&"VIDEO"===e.tagName.toUpperCase()&&(Y(e).children().remove(),Object.values(e.attributes).forEach((function(t){return e.removeAttribute(t.name)})),ne.push(e))}}]),e}();me.options={recycleVideo:!1};var ve=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;S(this,e),this.delay=t,this.lastTime=0}return C(e,[{key:"handle",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=(new Date).getTime(),r=i-this.lastTime;r<this.delay&&r>0&&(t(),n&&e.preventDefault()),this.lastTime=i}}]),e}(),ye={Config:le,Fullscreen:se,QueryString:ue,DomRecycler:me,assign:ae,extend:oe,formatTime:function(e,t){if(!isFinite(e))return"--:--";e*=1e3;var n=(e=parseInt(e/1e3))%60,i=(e=parseInt(e/60))%60,r=(e=parseInt(e/60))%24,a=parseInt(e/24),o="";return a&&a>0&&(o+=a+":",r<1&&(o+="00:")),(r&&r>0||t)&&(o+=("0"+r).slice(-2)+":"),o+=("0"+i).slice(-2)+":",(o+=("0"+n).slice(-2)).trim()},seekStringToSeconds:ce,uniqueId:de,currentScriptUrl:pe,isNumber:he,requestAnimationFrame:ie,cancelAnimationFrame:re,getBrowserLanguage:fe,now:function(){return window.performance&&window.performance.now?performance.now():Date.now()},removeArrayItem:function(e,t){var n=e.indexOf(t);n>=0&&e.splice(n,1)},listContainsIgnoreCase:function(e,t){return void 0!==e&&void 0!==t&&void 0!==t.find((function(t){return e.toLowerCase()===t.toLowerCase()}))},canAutoPlayMedia:ge,Media:j,DoubleEventHandler:ve},be="font-weight: bold; font-size: 13px;",Ee="color: #ff8000;"+be,Te="color: #ff0000;"+be,Ae=["color: #0000ff;"+be,"color: #006600;"+be,Ee,Te,Te],ke=["debug","info","warn","error","disabled"],_e=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;S(this,e),this.EXCLUDE_LIST=["timeupdate","playback:timeupdate","playback:progress","container:hover","container:timeupdate","container:progress"],this.level=t,this.previousLevel=this.level,this.offLevel=n}return C(e,[{key:"level",get:function(){return this._level},set:function(e){this._level=e}},{key:"debug",value:function(e){this.log(e,0,Array.prototype.slice.call(arguments,1))}},{key:"info",value:function(e){this.log(e,1,Array.prototype.slice.call(arguments,1))}},{key:"warn",value:function(e){this.log(e,2,Array.prototype.slice.call(arguments,1))}},{key:"error",value:function(e){this.log(e,3,Array.prototype.slice.call(arguments,1))}},{key:"onOff",value:function(){this.level===this.offLevel?this.level=this.previousLevel:(this.previousLevel=this.level,this.level=this.offLevel),window.console&&window.console.log&&window.console.log("%c[Clappr.Log] set log level to "+ke[this.level],Ee)}},{key:"log",value:function(e,t,n){if(!(this.EXCLUDE_LIST.indexOf(n[0])>=0||t<this.level)){n||(n=e,e=null);var i=Ae[t],r="";e&&(r="["+e+"]"),window.console&&window.console.log&&window.console.log.apply(console,["%c["+ke[t]+"]"+r,i].concat(n))}}}]),e}();_e.LEVEL_DEBUG=0,_e.LEVEL_INFO=1,_e.LEVEL_WARN=2,_e.LEVEL_ERROR=3,_e.getInstance=function(){return void 0===this._instance&&(this._instance=new this),this._instance},_e.setLevel=function(e){this.getInstance().level=e},_e.debug=function(){this.getInstance().debug.apply(this.getInstance(),arguments)},_e.info=function(){this.getInstance().info.apply(this.getInstance(),arguments)},_e.warn=function(){this.getInstance().warn.apply(this.getInstance(),arguments)},_e.error=function(){this.getInstance().error.apply(this.getInstance(),arguments)};var Se=Array.prototype.slice,we=/\s+/,Ce=function(e,t,n,i){if(!n)return!0;if("object"===_(n)){for(var r in n)e[t].apply(e,[r,n[r]].concat(i));return!1}if(we.test(n)){for(var a=n.split(we),o=0,s=a.length;o<s;o++)e[t].apply(e,[a[o]].concat(i));return!1}return!0},Ie=function(e,t,n,i){var r,a=-1,o=e.length,s=t[0],l=t[1],u=t[2];!function c(){try{switch(t.length){case 0:for(;++a<o;)(r=e[a]).callback.call(r.ctx);return;case 1:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s);return;case 2:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l);return;case 3:for(;++a<o;)(r=e[a]).callback.call(r.ctx,s,l,u);return;default:for(;++a<o;)(r=e[a]).callback.apply(r.ctx,t);return}}catch(e){_e.error.apply(_e,[n,"error on event",i,"trigger","-",e]),c()}}()},De=function(){function e(){S(this,e)}return C(e,[{key:"on",value:function(e,t,n){return Ce(this,"on",e,[t,n])&&t?(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:n,ctx:n||this}),this):this}},{key:"once",value:function(e,t,n){var i,r=this;if(!Ce(this,"once",e,[t,n])||!t)return this;var a=function(){return r.off(e,i)};return i=function(){a(),t.apply(this,arguments)},this.on(e,i,n)}},{key:"off",value:function(e,t,n){var i,r,a,o,s,l,u,c;if(!this._events||!Ce(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(s=0,l=(o=e?[e]:Object.keys(this._events)).length;s<l;s++)if(e=o[s],a=this._events[e]){if(this._events[e]=i=[],t||n)for(u=0,c=a.length;u<c;u++)r=a[u],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&i.push(r);i.length||delete this._events[e]}return this}},{key:"trigger",value:function(e){var t=this.name||this.constructor.name;if(_e.debug.apply(_e,[t].concat(Array.prototype.slice.call(arguments))),!this._events)return this;var n=Se.call(arguments,1);if(!Ce(this,"trigger",e,n))return this;var i=this._events[e],r=this._events.all;return i&&Ie(i,n,t,e),r&&Ie(r,arguments,t,e),this}},{key:"stopListening",value:function(e,t,n){var i=this._listeningTo;if(!i)return this;var r=!t&&!n;for(var a in n||"object"!==_(t)||(n=this),e&&((i={})[e._listenId]=e),i)(e=i[a]).off(t,n,this),(r||0===Object.keys(e._events).length)&&delete this._listeningTo[a];return this}}],[{key:"register",value:function(t){e.Custom||(e.Custom={});var n="string"==typeof t&&t.toUpperCase().trim();n&&!e.Custom[n]?e.Custom[n]=n.toLowerCase().split("_").map((function(e,t){return 0===t?e:e=e[0].toUpperCase()+e.slice(1)})).join(""):_e.error("Events","Error when register event: "+t)}},{key:"listAvailableCustomEvents",value:function(){return e.Custom||(e.Custom={}),Object.keys(e.Custom).filter((function(t){return"string"==typeof e.Custom[t]}))}}]),e}(),Re={listenTo:"on",listenToOnce:"once"};Object.keys(Re).forEach((function(e){De.prototype[e]=function(t,n,i){return(this._listeningTo||(this._listeningTo={}))[t._listenId||(t._listenId=de("l"))]=t,i||"object"!==_(n)||(i=this),t[Re[e]](n,i,this),this}})),De.PLAYER_READY="ready",De.PLAYER_RESIZE="resize",De.PLAYER_FULLSCREEN="fullscreen",De.PLAYER_PLAY="play",De.PLAYER_PAUSE="pause",De.PLAYER_STOP="stop",De.PLAYER_ENDED="ended",De.PLAYER_SEEK="seek",De.PLAYER_ERROR="playererror",De.ERROR="error",De.PLAYER_TIMEUPDATE="timeupdate",De.PLAYER_VOLUMEUPDATE="volumeupdate",De.PLAYER_SUBTITLE_AVAILABLE="subtitleavailable",De.PLAYBACK_PROGRESS="playback:progress",De.PLAYBACK_TIMEUPDATE="playback:timeupdate",De.PLAYBACK_READY="playback:ready",De.PLAYBACK_BUFFERING="playback:buffering",De.PLAYBACK_BUFFERFULL="playback:bufferfull",De.PLAYBACK_SETTINGSUPDATE="playback:settingsupdate",De.PLAYBACK_LOADEDMETADATA="playback:loadedmetadata",De.PLAYBACK_HIGHDEFINITIONUPDATE="playback:highdefinitionupdate",De.PLAYBACK_BITRATE="playback:bitrate",De.PLAYBACK_LEVELS_AVAILABLE="playback:levels:available",De.PLAYBACK_LEVEL_SWITCH_START="playback:levels:switch:start",De.PLAYBACK_LEVEL_SWITCH_END="playback:levels:switch:end",De.PLAYBACK_PLAYBACKSTATE="playback:playbackstate",De.PLAYBACK_DVR="playback:dvr",De.PLAYBACK_MEDIACONTROL_DISABLE="playback:mediacontrol:disable",De.PLAYBACK_MEDIACONTROL_ENABLE="playback:mediacontrol:enable",De.PLAYBACK_ENDED="playback:ended",De.PLAYBACK_PLAY_INTENT="playback:play:intent",De.PLAYBACK_PLAY="playback:play",De.PLAYBACK_PAUSE="playback:pause",De.PLAYBACK_SEEK="playback:seek",De.PLAYBACK_SEEKED="playback:seeked",De.PLAYBACK_STOP="playback:stop",De.PLAYBACK_ERROR="playback:error",De.PLAYBACK_STATS_ADD="playback:stats:add",De.PLAYBACK_FRAGMENT_LOADED="playback:fragment:loaded",De.PLAYBACK_LEVEL_SWITCH="playback:level:switch",De.PLAYBACK_SUBTITLE_AVAILABLE="playback:subtitle:available",De.PLAYBACK_SUBTITLE_CHANGED="playback:subtitle:changed",De.PLAYBACK_AUDIO_AVAILABLE="playback:audio:available",De.PLAYBACK_AUDIO_CHANGED="playback:audio:changed",De.CORE_CONTAINERS_CREATED="core:containers:created",De.CORE_ACTIVE_CONTAINER_CHANGED="core:active:container:changed",De.CORE_OPTIONS_CHANGE="core:options:change",De.CORE_READY="core:ready",De.CORE_FULLSCREEN="core:fullscreen",De.CORE_RESIZE="core:resize",De.CORE_SCREEN_ORIENTATION_CHANGED="core:screen:orientation:changed",De.CORE_MOUSE_MOVE="core:mousemove",De.CORE_MOUSE_LEAVE="core:mouseleave",De.CONTAINER_PLAYBACKSTATE="container:playbackstate",De.CONTAINER_PLAYBACKDVRSTATECHANGED="container:dvr",De.CONTAINER_BITRATE="container:bitrate",De.CONTAINER_STATS_REPORT="container:stats:report",De.CONTAINER_DESTROYED="container:destroyed",De.CONTAINER_READY="container:ready",De.CONTAINER_RESIZE="container:resize",De.CONTAINER_ERROR="container:error",De.CONTAINER_LOADEDMETADATA="container:loadedmetadata",De.CONTAINER_SUBTITLE_AVAILABLE="container:subtitle:available",De.CONTAINER_SUBTITLE_CHANGED="container:subtitle:changed",De.CONTAINER_AUDIO_AVAILABLE="container:audio:available",De.CONTAINER_AUDIO_CHANGED="container:audio:changed",De.CONTAINER_TIMEUPDATE="container:timeupdate",De.CONTAINER_PROGRESS="container:progress",De.CONTAINER_PLAY="container:play",De.CONTAINER_STOP="container:stop",De.CONTAINER_PAUSE="container:pause",De.CONTAINER_ENDED="container:ended",De.CONTAINER_CLICK="container:click",De.CONTAINER_DBLCLICK="container:dblclick",De.CONTAINER_CONTEXTMENU="container:contextmenu",De.CONTAINER_MOUSE_ENTER="container:mouseenter",De.CONTAINER_MOUSE_LEAVE="container:mouseleave",De.CONTAINER_MOUSE_UP="container:mouseup",De.CONTAINER_MOUSE_DOWN="container:mousedown",De.CONTAINER_SEEK="container:seek",De.CONTAINER_SEEKED="container:seeked",De.CONTAINER_VOLUME="container:volume",De.CONTAINER_FULLSCREEN="container:fullscreen",De.CONTAINER_STATE_BUFFERING="container:state:buffering",De.CONTAINER_STATE_BUFFERFULL="container:state:bufferfull",De.CONTAINER_SETTINGSUPDATE="container:settingsupdate",De.CONTAINER_HIGHDEFINITIONUPDATE="container:highdefinitionupdate",De.CONTAINER_MEDIACONTROL_SHOW="container:mediacontrol:show",De.CONTAINER_MEDIACONTROL_HIDE="container:mediacontrol:hide",De.CONTAINER_MEDIACONTROL_DISABLE="container:mediacontrol:disable",De.CONTAINER_MEDIACONTROL_ENABLE="container:mediacontrol:enable",De.CONTAINER_STATS_ADD="container:stats:add",De.CONTAINER_OPTIONS_CHANGE="container:options:change",De.MEDIACONTROL_RENDERED="mediacontrol:rendered",De.MEDIACONTROL_FULLSCREEN="mediacontrol:fullscreen",De.MEDIACONTROL_SHOW="mediacontrol:show",De.MEDIACONTROL_HIDE="mediacontrol:hide",De.MEDIACONTROL_MOUSEMOVE_SEEKBAR="mediacontrol:mousemove:seekbar",De.MEDIACONTROL_MOUSELEAVE_SEEKBAR="mediacontrol:mouseleave:seekbar",De.MEDIACONTROL_PLAYING="mediacontrol:playing",De.MEDIACONTROL_NOTPLAYING="mediacontrol:notplaying",De.MEDIACONTROL_CONTAINERCHANGED="mediacontrol:containerchanged",De.MEDIACONTROL_OPTIONS_CHANGE="mediacontrol:options:change";var xe=function(e){D(n,e);var t=O(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return S(this,n),(e=t.call(this,i))._options=i,e.uniqueId=de("o"),e}return C(n,[{key:"options",get:function(){return this._options}}]),n}(De),Le={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Pe=/(.)^/,Oe={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},Me=/\\|'|\r|\n|\t|\u2028|\u2029/g,Ne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},Be=new RegExp("[&<>\"']","g"),Ue=function(e){return null===e?"":(""+e).replace(Be,(function(e){return Ne[e]}))},Fe=0,Ve=function(e,t){var n,i=new RegExp([(Le.escape||Pe).source,(Le.interpolate||Pe).source,(Le.evaluate||Pe).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(i,(function(t,n,i,o,s){return a+=e.slice(r,s).replace(Me,(function(e){return"\\"+Oe[e]})),n&&(a+="'+\n((__t=("+n+"))==null?'':escapeExpr(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),o&&(a+="';\n"+o+"\n__p+='"),r=s+t.length,t})),a+="';\n",Le.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n//# sourceURL=/microtemplates/source["+Fe+++"]";try{n=new Function(Le.variable||"obj","escapeExpr",a)}catch(e){throw e.source=a,e}if(t)return n(t,Ue);var o=function(e){return n.call(this,e,Ue)};return o.source="function("+(Le.variable||"obj")+"){\n"+a+"}",o};Ve.settings=Le;var He={getStyleFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""};return Y('<style class="clappr-style"></style>').html(Ve(e.toString())(t))}},je=/^(\S+)\s*(.*)$/,Ke=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e)).cid=de("c"),i._ensureElement(),i.delegateEvents(),i}return C(n,[{key:"tagName",get:function(){return"div"}},{key:"events",get:function(){return{}}},{key:"attributes",get:function(){return{}}},{key:"$",value:function(e){return this.$el.find(e)}},{key:"render",value:function(){return this}},{key:"destroy",value:function(){return this.$el.remove(),this.stopListening(),this.undelegateEvents(),this}},{key:"setElement",value:function(e,t){return this.$el&&this.undelegateEvents(),this.$el=Y.zepto.isZ(e)?e:Y(e),this.el=this.$el[0],!1!==t&&this.delegateEvents(),this}},{key:"delegateEvents",value:function(e){for(var t in e||(e=this.events),this.undelegateEvents(),e){var n=e[t];if(n&&n.constructor!==Function&&(n=this[e[t]]),n){var i=t.match(je),r=i[1],a=i[2];r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n.bind(this)):this.$el.on(r,a,n.bind(this))}}return this}},{key:"undelegateEvents",value:function(){return this.$el.off(".delegateEvents"+this.cid),this}},{key:"_ensureElement",value:function(){if(this.el)this.setElement(this.el,!1);else{var e=Y.extend(!0,{},this.attributes);this.id&&(e.id=this.id),this.className&&(e.class=this.className);var t=Y(me.create(this.tagName)).attr(e);this.setElement(t,!1)}}}]),n}(xe),Ge=function(e){D(n,e);var t=O(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return S(this,n),(e=t.call(this,i)).core=r,e}return C(n,[{key:"name",get:function(){return"error"}},{key:"createError",value:function(e){this.core?this.core.trigger(De.ERROR,e):_e.warn(this.name,"Core is not set. Error: ",e)}}],[{key:"Levels",get:function(){return{FATAL:"FATAL",WARN:"WARN",INFO:"INFO"}}}]),n}(xe),We={createError:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{useCodePrefix:!0},n=this.constructor&&this.constructor.type||"",i=this.name||n,r=this.i18n||this.core&&this.core.i18n||this.container&&this.container.i18n,a="".concat(i,":").concat(e&&e.code||"unknown"),o={description:"",level:Ge.Levels.FATAL,origin:i,scope:n,raw:{}},s=Object.assign({},o,e,{code:t.useCodePrefix?a:e.code});if(r&&s.level==Ge.Levels.FATAL&&!s.UI){var l={title:r.t("default_error_title"),message:r.t("default_error_message")};s.UI=l}return this.playerError?this.playerError.createError(s):_e.warn(i,"PlayerError is not defined. Error: ",s),s}},ze=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e.options)).core=e,i.enabled=!0,i.bindEvents(),i.render(),i}return C(n,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"getExternalInterface",value:function(){return{}}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"render",value:function(){return this}}]),n}(Ke);Object.assign(ze.prototype,We),ze.extend=function(e){return oe(ze,e)},ze.type="core";var Ye=function(e){D(n,e);var t=O(n);function n(e,i,r){var a;return S(this,n),(a=t.call(this,e))._i18n=i,a.currentTime=0,a.volume=100,a.playback=e.playback,a.playerError=r,a.settings=Y.extend(!0,{},a.playback.settings),a.isReady=!1,a.mediaControlDisabled=!1,a.plugins=[a.playback],a.dblTapHandler=new ve(500),a.clickTimer=null,a.clickDelay=200,a.actionsMetadata={},a.bindEvents(),a}return C(n,[{key:"name",get:function(){return"Container"}},{key:"attributes",get:function(){return{class:"container","data-container":""}}},{key:"events",get:function(){return{click:"clicked",dblclick:"dblClicked",touchend:"dblTap",contextmenu:"onContextMenu",mouseenter:"mouseEnter",mouseleave:"mouseLeave",mouseup:"onMouseUp",mousedown:"onMouseDown"}}},{key:"ended",get:function(){return this.playback.ended}},{key:"buffering",get:function(){return this.playback.buffering}},{key:"i18n",get:function(){return this._i18n}},{key:"hasClosedCaptionsTracks",get:function(){return this.playback.hasClosedCaptionsTracks}},{key:"closedCaptionsTracks",get:function(){return this.playback.closedCaptionsTracks}},{key:"closedCaptionsTrackId",get:function(){return this.playback.closedCaptionsTrackId},set:function(e){this.playback.closedCaptionsTrackId=e}},{key:"audioTracks",get:function(){return this.playback.audioTracks}},{key:"currentAudioTrack",get:function(){return this.playback.currentAudioTrack}},{key:"bindEvents",value:function(){this.listenTo(this.playback,De.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.playback,De.PLAYBACK_TIMEUPDATE,this.timeUpdated),this.listenTo(this.playback,De.PLAYBACK_READY,this.ready),this.listenTo(this.playback,De.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,De.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,De.PLAYBACK_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.playback,De.PLAYBACK_LOADEDMETADATA,this.loadedMetadata),this.listenTo(this.playback,De.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinitionUpdate),this.listenTo(this.playback,De.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,De.PLAYBACK_PLAYBACKSTATE,this.playbackStateChanged),this.listenTo(this.playback,De.PLAYBACK_DVR,this.playbackDvrStateChanged),this.listenTo(this.playback,De.PLAYBACK_MEDIACONTROL_DISABLE,this.disableMediaControl),this.listenTo(this.playback,De.PLAYBACK_MEDIACONTROL_ENABLE,this.enableMediaControl),this.listenTo(this.playback,De.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,De.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,De.PLAYBACK_ENDED,this.onEnded),this.listenTo(this.playback,De.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,De.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,De.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,De.PLAYBACK_ERROR,this.error),this.listenTo(this.playback,De.PLAYBACK_SUBTITLE_AVAILABLE,this.subtitleAvailable),this.listenTo(this.playback,De.PLAYBACK_SUBTITLE_CHANGED,this.subtitleChanged),this.listenTo(this.playback,De.PLAYBACK_AUDIO_AVAILABLE,this.audioAvailable),this.listenTo(this.playback,De.PLAYBACK_AUDIO_CHANGED,this.audioChanged)}},{key:"subtitleAvailable",value:function(){this.trigger(De.CONTAINER_SUBTITLE_AVAILABLE)}},{key:"subtitleChanged",value:function(e){this.trigger(De.CONTAINER_SUBTITLE_CHANGED,e)}},{key:"audioAvailable",value:function(e){this.trigger(De.CONTAINER_AUDIO_AVAILABLE,e)}},{key:"audioChanged",value:function(e){this.trigger(De.CONTAINER_AUDIO_CHANGED,e)}},{key:"playbackStateChanged",value:function(e){this.trigger(De.CONTAINER_PLAYBACKSTATE,e)}},{key:"playbackDvrStateChanged",value:function(e){this.settings=this.playback.settings,this.dvrInUse=e,this.trigger(De.CONTAINER_PLAYBACKDVRSTATECHANGED,e)}},{key:"updateBitrate",value:function(e){this.trigger(De.CONTAINER_BITRATE,e)}},{key:"statsReport",value:function(e){this.trigger(De.CONTAINER_STATS_REPORT,e)}},{key:"getPlaybackType",value:function(){return this.playback.getPlaybackType()}},{key:"isDvrEnabled",value:function(){return!!this.playback.dvrEnabled}},{key:"isDvrInUse",value:function(){return!!this.dvrInUse}},{key:"destroy",value:function(){this.disableResizeObserver(),this.trigger(De.CONTAINER_DESTROYED,this,this.name),this.stopListening(),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove()}},{key:"setStyle",value:function(e){this.$el.css(e)}},{key:"animate",value:function(e,t){return this.$el.animate(e,t).promise()}},{key:"ready",value:function(){this.isReady=!0,this.trigger(De.CONTAINER_READY,this.name)}},{key:"isPlaying",value:function(){return this.playback.isPlaying()}},{key:"getStartTimeOffset",value:function(){return this.playback.getStartTimeOffset()}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"getDuration",value:function(){return this.playback.getDuration()}},{key:"error",value:function(e){this.isReady||this.ready(),this.trigger(De.CONTAINER_ERROR,e,this.name)}},{key:"loadedMetadata",value:function(e){this.trigger(De.CONTAINER_LOADEDMETADATA,e)}},{key:"timeUpdated",value:function(e){this.currentTime=e.current,this.trigger(De.CONTAINER_TIMEUPDATE,e,this.name)}},{key:"onProgress",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.trigger.apply(this,[De.CONTAINER_PROGRESS].concat(t,[this.name]))}},{key:"playing",value:function(){this.trigger(De.CONTAINER_PLAY,this.name,this.actionsMetadata.playEvent||{}),this.actionsMetadata.playEvent={}}},{key:"paused",value:function(){this.trigger(De.CONTAINER_PAUSE,this.name,this.actionsMetadata.pauseEvent||{}),this.actionsMetadata.pauseEvent={}}},{key:"stopped",value:function(){this.trigger(De.CONTAINER_STOP,this.actionsMetadata.stopEvent||{}),this.actionsMetadata.stopEvent={}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.playEvent=e,this.playback.play(e)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.playback.stop(e),this.currentTime=0}},{key:"switchAudioTrack",value:function(e){this.playback.switchAudioTrack(e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback.pause(e)}},{key:"onEnded",value:function(){this.trigger(De.CONTAINER_ENDED,this,this.name),this.currentTime=0}},{key:"clicked",value:function(){var e=this;this.options.chromeless&&!this.options.allowUserInteraction||(this.clickTimer=setTimeout((function(){e.clickTimer&&e.trigger(De.CONTAINER_CLICK,e,e.name)}),this.clickDelay))}},{key:"cancelClicked",value:function(){clearTimeout(this.clickTimer),this.clickTimer=null}},{key:"dblClicked",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||(this.cancelClicked(),this.trigger(De.CONTAINER_DBLCLICK,this,this.name))}},{key:"dblTap",value:function(e){var t=this;this.options.chromeless&&!this.options.allowUserInteraction||this.dblTapHandler.handle(e,(function(){t.cancelClicked(),t.trigger(De.CONTAINER_DBLCLICK,t,t.name)}))}},{key:"onContextMenu",value:function(e){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(De.CONTAINER_CONTEXTMENU,e,this.name)}},{key:"seek",value:function(e){this.playback.seek(e)}},{key:"onSeek",value:function(e){this.trigger(De.CONTAINER_SEEK,e,this.name)}},{key:"onSeeked",value:function(){this.trigger(De.CONTAINER_SEEKED,this.name)}},{key:"seekPercentage",value:function(e){var t=this.getDuration();if(e>=0&&e<=100){var n=t*(e/100);this.seek(n)}}},{key:"setVolume",value:function(e){this.volume=parseFloat(e),this.trigger(De.CONTAINER_VOLUME,this.volume,this.name),this.playback.volume(this.volume)}},{key:"fullscreen",value:function(){this.trigger(De.CONTAINER_FULLSCREEN,this.name)}},{key:"onBuffering",value:function(){this.trigger(De.CONTAINER_STATE_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(De.CONTAINER_STATE_BUFFERFULL,this.name)}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"mouseEnter",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(De.CONTAINER_MOUSE_ENTER)}},{key:"mouseLeave",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(De.CONTAINER_MOUSE_LEAVE)}},{key:"mouseUp",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(De.CONTAINER_MOUSE_UP)}},{key:"mouseDown",value:function(){this.options.chromeless&&!this.options.allowUserInteraction||this.trigger(De.CONTAINER_MOUSE_DOWN)}},{key:"settingsUpdate",value:function(){this.settings=this.playback.settings,this.trigger(De.CONTAINER_SETTINGSUPDATE)}},{key:"highDefinitionUpdate",value:function(e){this.trigger(De.CONTAINER_HIGHDEFINITIONUPDATE,e)}},{key:"isHighDefinitionInUse",value:function(){return this.playback.isHighDefinitionInUse()}},{key:"disableMediaControl",value:function(){this.mediaControlDisabled||(this.mediaControlDisabled=!0,this.trigger(De.CONTAINER_MEDIACONTROL_DISABLE))}},{key:"enableMediaControl",value:function(){this.mediaControlDisabled&&(this.mediaControlDisabled=!1,this.trigger(De.CONTAINER_MEDIACONTROL_ENABLE))}},{key:"updateStyle",value:function(){!this.options.chromeless||this.options.allowUserInteraction?this.$el.removeClass("chromeless"):this.$el.addClass("chromeless")}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver(),this.resizeObserverInterval=setInterval((function(){return e.checkResize()}),500)}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval)}},{key:"checkResize",value:function(){var e={width:this.el.clientWidth,height:this.el.clientHeight},t=this.currentSize||{},n=t.width;(t.height!==e.height||n!==e.width)&&(this.currentSize=e,this.trigger(De.CONTAINER_RESIZE,e))}},{key:"configure",value:function(e){this._options=Y.extend(!0,this._options,e),this.updateStyle(),this.playback.configure(this.options),this.trigger(De.CONTAINER_OPTIONS_CHANGE)}},{key:"render",value:function(){var e=He.getStyleFor(".container[data-container] {\n  position: absolute;\n  background-color: black;\n  height: 100%;\n  width: 100%;\n  max-width: 100%; }\n  .container[data-container] .chromeless {\n    cursor: default; }\n\n[data-player]:not(.nocursor) .container[data-container]:not(.chromeless).pointer-enabled {\n  cursor: pointer; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.$el.append(this.playback.render().el),this.updateStyle(),this.checkResize(),this.enableResizeObserver(),this}}]),n}(Ke);Object.assign(Ye.prototype,We);var qe=function(e){D(n,e);var t=O(n);function n(e,i,r){var a;return S(this,n),(a=t.call(this,e)).settings={},a._i18n=i,a.playerError=r,a._consented=!1,a}return C(n,[{key:"isAudioOnly",get:function(){return!1}},{key:"isAdaptive",get:function(){return!1}},{key:"ended",get:function(){return!1}},{key:"i18n",get:function(){return this._i18n}},{key:"buffering",get:function(){return!1}},{key:"consent",value:function(e){"function"==typeof e&&e()}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"stop",value:function(){}},{key:"seek",value:function(e){}},{key:"seekPercentage",value:function(e){}},{key:"getStartTimeOffset",value:function(){return 0}},{key:"getDuration",value:function(){return 0}},{key:"isPlaying",value:function(){return!1}},{key:"isReady",get:function(){return!1}},{key:"hasClosedCaptionsTracks",get:function(){return this.closedCaptionsTracks.length>0}},{key:"closedCaptionsTracks",get:function(){return[]}},{key:"closedCaptionsTrackId",get:function(){return-1},set:function(e){}},{key:"audioTracks",get:function(){return[]}},{key:"currentAudioTrack",get:function(){return null}},{key:"switchAudioTrack",value:function(e){}},{key:"getPlaybackType",value:function(){return n.NO_OP}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"mute",value:function(){}},{key:"unmute",value:function(){}},{key:"volume",value:function(e){}},{key:"configure",value:function(e){this._options=Y.extend(!0,this._options,e)}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){t&&e.play()}))}},{key:"canAutoPlay",value:function(e){e(!0,null)}}]),n}(Ke);Object.assign(qe.prototype,We),qe.extend=function(e){return oe(qe,e)},qe.canPlay=function(e,t){return!1},qe.VOD="vod",qe.AOD="aod",qe.LIVE="live",qe.NO_OP="no_op",qe.type="playback";var $e=function(e){D(n,e);var t=O(n);function n(e,i,r,a){var o;return S(this,n),(o=t.call(this,e))._i18n=r,o.loader=i,o.playerError=a,o}return C(n,[{key:"options",get:function(){return this._options},set:function(e){this._options=e}},{key:"createContainers",value:function(){var e=this;return Y.Deferred((function(t){t.resolve(e.options.sources.map((function(t){return e.createContainer(t)})))}))}},{key:"findPlaybackPlugin",value:function(e,t){return this.loader.playbackPlugins.filter((function(n){return n.canPlay(e,t)}))[0]}},{key:"createContainer",value:function(e){var t=null,n=this.options.mimeType;"object"===_(e)?(t=e.source.toString(),e.mimeType&&(n=e.mimeType)):t=e.toString(),t.match(/^\/\//)&&(t=window.location.protocol+t);var i=k(k({},this.options),{},{src:t,mimeType:n}),r=this.findPlaybackPlugin(t,n),a=r?new r(i,this._i18n,this.playerError):new qe;i=k(k({},i),{},{playback:a});var o=new Ye(i,this._i18n,this.playerError),s=Y.Deferred();return s.promise(o),this.addContainerPlugins(o),this.listenToOnce(o,De.CONTAINER_READY,(function(){return s.resolve(o)})),o}},{key:"addContainerPlugins",value:function(e){this.loader.containerPlugins.forEach((function(t){e.addPlugin(new t(e))}))}}]),n}(xe),Xe=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e)).playerError=new Ge(e,L(i)),i.configureDomRecycler(),i.firstResize=!0,i.plugins=[],i.containers=[],i._boundFullscreenHandler=function(){return i.handleFullscreenChange()},Y(document).bind("fullscreenchange",i._boundFullscreenHandler),Y(document).bind("MSFullscreenChange",i._boundFullscreenHandler),Y(document).bind("mozfullscreenchange",i._boundFullscreenHandler),Q.isMobile&&Y(window).bind("resize",(function(e){i.handleWindowResize(e)})),i}return C(n,[{key:"events",get:function(){return{webkitfullscreenchange:"handleFullscreenChange",mousemove:"onMouseMove",mouseleave:"onMouseLeave"}}},{key:"attributes",get:function(){return{"data-player":"",tabindex:9999}}},{key:"isReady",get:function(){return!!this.ready}},{key:"i18n",get:function(){return this.getPlugin("strings")||{t:function(e){return e}}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.getPlugin("media_control"))||this.dummyMediaControl}},{key:"dummyMediaControl",get:function(){return this._dummyMediaControl||(this._dummyMediaControl=new ze(this)),this._dummyMediaControl}},{key:"activeContainer",get:function(){return this._activeContainer},set:function(e){this._activeContainer=e,this.trigger(De.CORE_ACTIVE_CONTAINER_CHANGED,this._activeContainer)}},{key:"activePlayback",get:function(){return this.activeContainer&&this.activeContainer.playback}},{key:"activePlaybackEl",get:function(){if(this.activePlayback)return this.activePlayback.$el?this.activePlayback.$el.find("video")[0]:this.activePlayback.el}},{key:"configureDomRecycler",value:function(){var e=this.options&&this.options.playback&&this.options.playback.recycleVideo;me.configure({recycleVideo:e})}},{key:"createContainers",value:function(e){this.defer=Y.Deferred(),this.defer.promise(this),this.containerFactory=new $e(e,e.loader,this.i18n,this.playerError),this.prepareContainers()}},{key:"prepareContainers",value:function(){var e=this;this.containerFactory.createContainers().then((function(t){return e.setupContainers(t)})).then((function(t){return e.resolveOnContainersReady(t)}))}},{key:"updateSize",value:function(){this.isFullscreen()?this.setFullscreen():this.setPlayerSize()}},{key:"setFullscreen",value:function(){Q.isiOS||(this.$el.addClass("fullscreen"),this.$el.removeAttr("style"),this.previousSize={width:this.options.width,height:this.options.height},this.currentSize={width:Y(window).width(),height:Y(window).height()})}},{key:"setPlayerSize",value:function(){this.$el.removeClass("fullscreen"),this.currentSize=this.previousSize,this.previousSize={width:Y(window).width(),height:Y(window).height()},this.resize(this.currentSize)}},{key:"resize",value:function(e){he(e.height)||he(e.width)?(this.el.style.height="".concat(e.height,"px"),this.el.style.width="".concat(e.width,"px")):(this.el.style.height="".concat(e.height),this.el.style.width="".concat(e.width)),this.previousSize={width:this.options.width,height:this.options.height},this.options.width=e.width,this.options.height=e.height,this.currentSize=e,this.triggerResize(this.currentSize)}},{key:"enableResizeObserver",value:function(){var e=this;this.disableResizeObserver();this.resizeObserverInterval=setInterval((function(){e.triggerResize({width:e.el.clientWidth,height:e.el.clientHeight})}),500)}},{key:"triggerResize",value:function(e){(this.firstResize||this.oldHeight!==e.height||this.oldWidth!==e.width)&&(this.oldHeight=e.height,this.oldWidth=e.width,this.computedSize=e,this.firstResize=!1,this.trigger(De.CORE_RESIZE,e))}},{key:"disableResizeObserver",value:function(){this.resizeObserverInterval&&clearInterval(this.resizeObserverInterval),this.resizeObserverInterval=null}},{key:"resolveOnContainersReady",value:function(e){var t=this;Y.when.apply(Y,e).done((function(){t.defer.resolve(t),t.ready=!0,t.trigger(De.CORE_READY)}))}},{key:"addPlugin",value:function(e){this.plugins.push(e)}},{key:"hasPlugin",value:function(e){return!!this.getPlugin(e)}},{key:"getPlugin",value:function(e){return this.plugins.filter((function(t){return t.name===e}))[0]}},{key:"load",value:function(e,t){this.options.mimeType=t,e=e&&e.constructor===Array?e:[e],this.options.sources=e,this.containers.forEach((function(e){return e.destroy()})),this.containerFactory.options=Y.extend(!0,this.options,{sources:e}),this.prepareContainers()}},{key:"destroy",value:function(){this.disableResizeObserver(),this.containers.forEach((function(e){return e.destroy()})),this.plugins.forEach((function(e){return e.destroy()})),this.$el.remove(),Y(document).unbind("fullscreenchange",this._boundFullscreenHandler),Y(document).unbind("MSFullscreenChange",this._boundFullscreenHandler),Y(document).unbind("mozfullscreenchange",this._boundFullscreenHandler),this.stopListening()}},{key:"handleFullscreenChange",value:function(){this.trigger(De.CORE_FULLSCREEN,this.isFullscreen()),this.updateSize()}},{key:"handleWindowResize",value:function(e){var t=window.innerWidth>window.innerHeight?"landscape":"portrait";this._screenOrientation!==t&&(this._screenOrientation=t,this.triggerResize({width:this.el.clientWidth,height:this.el.clientHeight}),this.trigger(De.CORE_SCREEN_ORIENTATION_CHANGED,{event:e,orientation:this._screenOrientation}))}},{key:"removeContainer",value:function(e){this.stopListening(e),this.containers=this.containers.filter((function(t){return t!==e}))}},{key:"setupContainer",value:function(e){this.listenTo(e,De.CONTAINER_DESTROYED,this.removeContainer),this.containers.push(e)}},{key:"setupContainers",value:function(e){return e.forEach(this.setupContainer.bind(this)),this.trigger(De.CORE_CONTAINERS_CREATED),this.renderContainers(),this.activeContainer=e[0],this.render(),this.appendToParent(),this.containers}},{key:"renderContainers",value:function(){var e=this;this.containers.forEach((function(t){return e.el.appendChild(t.render().el)}))}},{key:"createContainer",value:function(e,t){var n=this.containerFactory.createContainer(e,t);return this.setupContainer(n),this.el.appendChild(n.render().el),n}},{key:"getCurrentContainer",value:function(){return this.activeContainer}},{key:"getCurrentPlayback",value:function(){return this.activePlayback}},{key:"getPlaybackType",value:function(){return this.activeContainer&&this.activeContainer.getPlaybackType()}},{key:"isFullscreen",value:function(){var e=se.fullscreenElement();return e&&e===this.el||e&&e===this.activePlaybackEl||this.activePlaybackEl&&this.activePlaybackEl.webkitDisplayingFullscreen||!1}},{key:"toggleFullscreen",value:function(){var e=this;if(this.isFullscreen()){var t=Q.isiOS?this.activePlaybackEl:document;se.cancelFullscreen(t),!Q.isiOS&&this.$el.removeClass("fullscreen nocursor")}else{var n=Q.isiOS?this.activePlaybackEl:this.el;if(!n)return;Q.isSafari||Q.isiOS?se.requestFullscreen(n):se.requestFullscreen(n).then((function(e){return e}),(function(t){return setTimeout((function(){if(!e.isFullscreen())throw new ReferenceError(t)}),600)})),!Q.isiOS&&this.$el.addClass("fullscreen")}}},{key:"onMouseMove",value:function(e){this.trigger(De.CORE_MOUSE_MOVE,e)}},{key:"onMouseLeave",value:function(e){this.trigger(De.CORE_MOUSE_LEAVE,e)}},{key:"configure",value:function(e){var t=this;this._options=Y.extend(!0,this._options,e),this.configureDomRecycler();var n=e.source||e.sources;n&&this.load(n,e.mimeType||this.options.mimeType),this.trigger(De.CORE_OPTIONS_CHANGE,e),this.containers.forEach((function(e){return e.configure(t.options)}))}},{key:"appendToParent",value:function(){var e=He.getStyleFor('[data-player] {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "Roboto", "Open Sans", Arial, sans-serif;\n  text-shadow: 0 0 0;\n  box-sizing: border-box; }\n  [data-player]:focus {\n    outline: 0; }\n  [data-player] * {\n    box-sizing: inherit; }\n  [data-player] > * {\n    float: none;\n    max-width: none; }\n  [data-player] > div {\n    display: block; }\n  [data-player].fullscreen {\n    width: 100% !important;\n    height: 100% !important;\n    top: 0;\n    left: 0; }\n  [data-player].nocursor {\n    cursor: none; }\n\n.clappr-style {\n  display: none !important; }\n'.toString(),{baseUrl:this.options.baseUrl}),t=He.getStyleFor('[data-player] div, [data-player] span, [data-player] applet, [data-player] object, [data-player] iframe,\n[data-player] h1, [data-player] h2, [data-player] h3, [data-player] h4, [data-player] h5, [data-player] h6, [data-player] p, [data-player] blockquote, [data-player] pre,\n[data-player] a, [data-player] abbr, [data-player] acronym, [data-player] address, [data-player] big, [data-player] cite, [data-player] code,\n[data-player] del, [data-player] dfn, [data-player] em, [data-player] img, [data-player] ins, [data-player] kbd, [data-player] q, [data-player] s, [data-player] samp,\n[data-player] small, [data-player] strike, [data-player] strong, [data-player] sub, [data-player] sup, [data-player] tt, [data-player] var,\n[data-player] b, [data-player] u, [data-player] i, [data-player] center,\n[data-player] dl, [data-player] dt, [data-player] dd, [data-player] ol, [data-player] ul, [data-player] li,\n[data-player] fieldset, [data-player] form, [data-player] label, [data-player] legend,\n[data-player] table, [data-player] caption, [data-player] tbody, [data-player] tfoot, [data-player] thead, [data-player] tr, [data-player] th, [data-player] td,\n[data-player] article, [data-player] aside, [data-player] canvas, [data-player] details, [data-player] embed,\n[data-player] figure, [data-player] figcaption, [data-player] footer, [data-player] header, [data-player] hgroup,\n[data-player] menu, [data-player] nav, [data-player] output, [data-player] ruby, [data-player] section, [data-player] summary,\n[data-player] time, [data-player] mark, [data-player] audio, [data-player] video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n[data-player] table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n[data-player] caption, [data-player] th, [data-player] td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n[data-player] q, [data-player] blockquote {\n  quotes: none; }\n  [data-player] q:before, [data-player] q:after, [data-player] blockquote:before, [data-player] blockquote:after {\n    content: "";\n    content: none; }\n\n[data-player] a img {\n  border: none; }\n'.toString(),{baseUrl:this.options.baseUrl});this.$el.append(e[0]),this.options.includeResetStyle&&this.$el.append(t[0]),!(this.$el.parent()&&this.$el.parent().length)&&this.$el.appendTo(this.options.parentElement)}},{key:"render",value:function(){this.options.width=this.options.width||this.$el.width(),this.options.height=this.options.height||this.$el.height();var e={width:this.options.width,height:this.options.height};return this.previousSize=this.currentSize=this.computedSize=e,this.updateSize(),this.enableResizeObserver(),this}}]),n}(Ke);Object.assign(Xe.prototype,We);var Qe,Ze,Je=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e.options)).player=e,i}return C(n,[{key:"loader",get:function(){return this.player.loader}},{key:"create",value:function(){return this.options.loader=this.loader,this.core=new Xe(this.options),this.addCorePlugins(),this.core.createContainers(this.options),this.core}},{key:"addCorePlugins",value:function(){var e=this;return this.loader.corePlugins.forEach((function(t){var n=new t(e.core);e.core.addPlugin(n),e.setupExternalInterface(n)})),this.core}},{key:"setupExternalInterface",value:function(e){var t=e.getExternalInterface();for(var n in t)this.player[n]=t[n].bind(e)}}]),n}(xe),et=/(\d+)(?:\.(\d+))?(?:\.(\d+))?/,tt=function(){function e(t,n,i){S(this,e),this.major=parseInt(t||0,10),this.minor=parseInt(n||0,10),this.patch=parseInt(i||0,10)}return C(e,[{key:"compare",value:function(e){var t=this.major-e.major;return t=(t=t||this.minor-e.minor)||this.patch-e.patch}},{key:"inc",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"patch";return void 0!==this[e]&&(this[e]+=1),this}},{key:"satisfies",value:function(e,t){return this.compare(e)>=0&&(!t||this.compare(t)<0)}},{key:"toString",value:function(){return"".concat(this.major,".").concat(this.minor,".").concat(this.patch)}}],[{key:"parse",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t.match(et)||[],i=B(n,4),r=i[1],a=i[2],o=i[3];return void 0===r?null:new e(r,a,o)}}]),e}(),nt=function(e,t){return e&&t?Object.entries(e).filter((function(e){return B(e,2)[1].type===t})).reduce((function(e,t){var n=B(t,2),i=n[0],r=n[1];return e[i]=r,e}),{}):{}},it=(Qe={plugins:{},playbacks:[]},Ze="0.4.27",function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;S(this,e),this.playerId=n,this.playbackPlugins=U(Qe.playbacks);var i=e.registeredPlugins,r=i.core,a=i.container;this.containerPlugins=Object.values(a),this.corePlugins=Object.values(r),Array.isArray(t)||this.validateExternalPluginsType(t),this.addExternalPlugins(t)}return C(e,[{key:"groupPluginsByType",value:function(e){return Array.isArray(e)&&(e=e.reduce((function(e,t){return e[t.type]||(e[t.type]=[]),e[t.type].push(t),e}),{})),e}},{key:"removeDups",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e,n){return e[n.prototype.name]&&t||(e[n.prototype.name]&&delete e[n.prototype.name],e[n.prototype.name]=n),e},i=e.reduceRight(n,Object.create(null)),r=[];for(var a in i)r.unshift(i[a]);return r}},{key:"addExternalPlugins",value:function(t){var n="boolean"!=typeof t.loadExternalPluginsFirst||t.loadExternalPluginsFirst,i="boolean"!=typeof t.loadExternalPlaybacksFirst||t.loadExternalPlaybacksFirst;if((t=this.groupPluginsByType(t)).playback){var r=t.playback.filter((function(t){return e.checkVersionSupport(t),!0}));this.playbackPlugins=i?this.removeDups(r.concat(this.playbackPlugins)):this.removeDups(this.playbackPlugins.concat(r),!0)}if(t.container){var a=t.container.filter((function(t){return e.checkVersionSupport(t),!0}));this.containerPlugins=n?this.removeDups(a.concat(this.containerPlugins)):this.removeDups(this.containerPlugins.concat(a),!0)}if(t.core){var o=t.core.filter((function(t){return e.checkVersionSupport(t),!0}));this.corePlugins=n?this.removeDups(o.concat(this.corePlugins)):this.removeDups(this.corePlugins.concat(o),!0)}}},{key:"validateExternalPluginsType",value:function(e){["playback","container","core"].forEach((function(t){(e[t]||[]).forEach((function(e){var n="external "+e.type+" plugin on "+t+" array";if(e.type!==t)throw new ReferenceError(n)}))}))}}],[{key:"registeredPlaybacks",get:function(){return U(Qe.playbacks)}},{key:"registeredPlugins",get:function(){var e=Qe.plugins;return{core:nt(e,"core"),container:nt(e,"container")}}},{key:"checkVersionSupport",value:function(e){var t=e.prototype,n=t.supportedVersion,i=t.name;if(!n||!n.min)return _e.warn("Loader","missing version information for ".concat(i)),!1;var r=n.max?tt.parse(n.max):tt.parse(n.min).inc("minor"),a=tt.parse(n.min);return!!tt.parse(Ze).satisfies(a,r)||(_e.warn("Loader","unsupported plugin ".concat(i,": Clappr version ").concat(Ze," does not match required range [").concat(a,",").concat(r,")")),!1)}},{key:"registerPlugin",value:function(t){if(!t||!t.prototype.name)return _e.warn("Loader","missing information to register plugin: ".concat(t)),!1;e.checkVersionSupport(t);var n=Qe.plugins;if(!n)return!1;var i=n[t.prototype.name];return i&&_e.warn("Loader","overriding plugin entry: ".concat(t.prototype.name," - ").concat(i)),n[t.prototype.name]=t,!0}},{key:"registerPlayback",value:function(t){if(!t||!t.prototype.name)return!1;e.checkVersionSupport(t);var n=Qe.playbacks,i=n.findIndex((function(e){return e.prototype.name===t.prototype.name}));if(i>=0){var r=n[i];n.splice(i,1),_e.warn("Loader","overriding playback entry: ".concat(r.name," - ").concat(r))}return Qe.playbacks=[t].concat(U(n)),!0}},{key:"unregisterPlugin",value:function(e){if(!e)return!1;var t=Qe.plugins;return!!t[e]&&(delete t[e],!0)}},{key:"unregisterPlayback",value:function(e){if(!e)return!1;var t=Qe.playbacks,n=t.findIndex((function(t){return t.prototype.name===e}));return!(n<0||(t.splice(n,1),Qe.playbacks=t,0))}},{key:"clearPlugins",value:function(){Qe.plugins={}}},{key:"clearPlaybacks",value:function(){Qe.playbacks=[]}}]),e}()),rt=pe().replace(/\/[^/]+$/,""),at=function(e){D(n,e);var t=O(n);function n(e){var i;S(this,n),i=t.call(this,e);var r={playerId:de(""),persistConfig:!0,width:640,height:360,baseUrl:rt,allowUserInteraction:Q.isMobile,includeResetStyle:!0,playback:{recycleVideo:!0}};i._options=Y.extend(!0,r,e),i.options.sources=i._normalizeSources(e),i.options.chromeless||(i.options.allowUserInteraction=!0),i.options.allowUserInteraction||(i.options.disableKeyboardShortcuts=!0),i._registerOptionEventListeners(i.options.events),i._coreFactory=new Je(L(i));var a=i._getParentElement(i.options);return a&&i.attachTo(a),i}return C(n,[{key:"loader",get:function(){return this._loader||(this._loader=new it(this.options.plugins||{},this.options.playerId)),this._loader},set:function(e){this._loader=e}},{key:"ended",get:function(){return this.core.activeContainer.ended}},{key:"buffering",get:function(){return this.core.activeContainer.buffering}},{key:"isReady",get:function(){return!!this._ready}},{key:"eventsMapping",get:function(){return{onReady:De.PLAYER_READY,onResize:De.PLAYER_RESIZE,onPlay:De.PLAYER_PLAY,onPause:De.PLAYER_PAUSE,onStop:De.PLAYER_STOP,onEnded:De.PLAYER_ENDED,onSeek:De.PLAYER_SEEK,onError:De.PLAYER_ERROR,onTimeUpdate:De.PLAYER_TIMEUPDATE,onVolumeUpdate:De.PLAYER_VOLUMEUPDATE,onSubtitleAvailable:De.PLAYER_SUBTITLE_AVAILABLE}}},{key:"_getParentElement",value:function(e){var t=e.parentId,n=e.parent;return t?document.querySelector(t):n}},{key:"attachTo",value:function(e){return this.options.parentElement=e,this.core=this._coreFactory.create(),this._addEventListeners(),this}},{key:"_addEventListeners",value:function(){return this.core.isReady?this._onReady():this.listenToOnce(this.core,De.CORE_READY,this._onReady),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this._containerChanged),this.listenTo(this.core,De.CORE_FULLSCREEN,this._onFullscreenChange),this.listenTo(this.core,De.CORE_RESIZE,this._onResize),this}},{key:"_addContainerEventListeners",value:function(){var e=this.core.activeContainer;return e&&(this.listenTo(e,De.CONTAINER_PLAY,this._onPlay),this.listenTo(e,De.CONTAINER_PAUSE,this._onPause),this.listenTo(e,De.CONTAINER_STOP,this._onStop),this.listenTo(e,De.CONTAINER_ENDED,this._onEnded),this.listenTo(e,De.CONTAINER_SEEK,this._onSeek),this.listenTo(e,De.CONTAINER_ERROR,this._onError),this.listenTo(e,De.CONTAINER_TIMEUPDATE,this._onTimeUpdate),this.listenTo(e,De.CONTAINER_VOLUME,this._onVolumeUpdate),this.listenTo(e,De.CONTAINER_SUBTITLE_AVAILABLE,this._onSubtitleAvailable)),this}},{key:"_registerOptionEventListeners",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.keys(t).length>0;return i&&Object.keys(n).forEach((function(t){var i=e.eventsMapping[t];i&&e.off(i,n[t])})),Object.keys(t).forEach((function(n){var i=e.eventsMapping[n];if(i){var r=t[n];(r="function"==typeof r&&r)&&e.on(i,r)}})),this}},{key:"_containerChanged",value:function(){this.stopListening(),this._addEventListeners()}},{key:"_onReady",value:function(){this._ready=!0,this._addContainerEventListeners(),this.trigger(De.PLAYER_READY)}},{key:"_onFullscreenChange",value:function(e){this.trigger(De.PLAYER_FULLSCREEN,e)}},{key:"_onVolumeUpdate",value:function(e){this.trigger(De.PLAYER_VOLUMEUPDATE,e)}},{key:"_onSubtitleAvailable",value:function(){this.trigger(De.PLAYER_SUBTITLE_AVAILABLE)}},{key:"_onResize",value:function(e){this.trigger(De.PLAYER_RESIZE,e)}},{key:"_onPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger(De.PLAYER_PLAY,t)}},{key:"_onPause",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.trigger(De.PLAYER_PAUSE,t)}},{key:"_onStop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trigger(De.PLAYER_STOP,this.getCurrentTime(),e)}},{key:"_onEnded",value:function(){this.trigger(De.PLAYER_ENDED)}},{key:"_onSeek",value:function(e){this.trigger(De.PLAYER_SEEK,e)}},{key:"_onTimeUpdate",value:function(e){this.trigger(De.PLAYER_TIMEUPDATE,e)}},{key:"_onError",value:function(e){this.trigger(De.PLAYER_ERROR,e)}},{key:"_normalizeSources",value:function(e){var t=e.sources||(void 0!==e.source?[e.source]:[]);return 0===t.length?[{source:"",mimeType:""}]:t}},{key:"resize",value:function(e){return this.core.resize(e),this}},{key:"load",value:function(e,t,n){return void 0!==n&&this.configure({autoPlay:!!n}),this.core.load(e,t),this}},{key:"destroy",value:function(){return this.stopListening(),this.core.destroy(),this}},{key:"consent",value:function(e){this.core.getCurrentPlayback().consent(e)}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.play(e),this}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.pause(e),this}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.core.activeContainer.stop(e),this}},{key:"seek",value:function(e){return this.core.activeContainer.seek(e),this}},{key:"seekPercentage",value:function(e){return this.core.activeContainer.seekPercentage(e),this}},{key:"mute",value:function(){return this.core.activePlayback.mute(),this}},{key:"unmute",value:function(){return this.core.activePlayback.unmute(),this}},{key:"isPlaying",value:function(){return this.core.activeContainer.isPlaying()}},{key:"isDvrEnabled",value:function(){return this.core.activeContainer.isDvrEnabled()}},{key:"isDvrInUse",value:function(){return this.core.activeContainer.isDvrInUse()}},{key:"configure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._registerOptionEventListeners(e.events,this.options.events),this.core.configure(e),this}},{key:"getPlugin",value:function(e){return this.core.plugins.concat(this.core.activeContainer.plugins).filter((function(t){return t.name===e}))[0]}},{key:"getCurrentTime",value:function(){return this.core.activeContainer.getCurrentTime()}},{key:"getStartTimeOffset",value:function(){return this.core.activeContainer.getStartTimeOffset()}},{key:"getDuration",value:function(){return this.core.activeContainer.getDuration()}}]),n}(xe);Object.assign(at.prototype,We);var ot=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e.options)).container=e,i.enabled=!0,i.bindEvents(),i}return C(n,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"bindEvents",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}]),n}(xe);Object.assign(ot.prototype,We),ot.extend=function(e){return oe(ot,e)},ot.type="container";var st=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e.options)).core=e,i.enabled=!0,i.bindEvents(),i}return C(n,[{key:"playerError",get:function(){return this.core.playerError}},{key:"bindEvents",value:function(){}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.enabled&&(this.stopListening(),this.enabled=!1)}},{key:"getExternalInterface",value:function(){return{}}},{key:"destroy",value:function(){this.stopListening()}}]),n}(xe);Object.assign(st.prototype,We),st.extend=function(e){return oe(st,e)},st.type="core";var lt=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e.options)).container=e,i.enabled=!0,i.bindEvents(),i}return C(n,[{key:"playerError",get:function(){return this.container.playerError}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.$el.show(),this.enabled=!0)}},{key:"disable",value:function(){this.stopListening(),this.$el.hide(),this.enabled=!1}},{key:"bindEvents",value:function(){}}]),n}(Ke);Object.assign(lt.prototype,We),lt.extend=function(e){return oe(lt,e)},lt.type="container";var ut={mp4:["avc1.42E01E","avc1.58A01E","avc1.4D401E","avc1.64001E","mp4v.20.8","mp4v.20.240","mp4a.40.2"].map((function(e){return'video/mp4; codecs="'+e+', mp4a.40.2"'})),ogg:['video/ogg; codecs="theora, vorbis"','video/ogg; codecs="dirac"','video/ogg; codecs="theora, speex"'],"3gpp":['video/3gpp; codecs="mp4v.20.8, samr"'],webm:['video/webm; codecs="vp8, vorbis"'],mkv:['video/x-matroska; codecs="theora, vorbis"'],m3u8:["application/x-mpegurl"]};ut.ogv=ut.ogg,ut["3gp"]=ut["3gpp"];var ct={wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},dt=Object.keys(ct).reduce((function(e,t){return[].concat(U(e),U(ct[t]))}),[]),ht={code:"unknown",message:"unknown"},pt=function(e){D(n,e);var t=O(n);function n(){var e;S(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];(e=t.call.apply(t,[this].concat(r)))._destroyed=!1,e._loadStarted=!1,e._isBuffering=!1,e._playheadMoving=!1,e._playheadMovingTimer=null,e._stopped=!1,e._ccTrackId=-1,e._setupSrc(e.options.src),e.options.playback||(e.options.playback=e.options||{}),e.options.playback.disableContextMenu=e.options.playback.disableContextMenu||e.options.disableVideoTagContextMenu,e._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60;var o,s=e.options.playback,l=s.preload||(Q.isSafari?"auto":e.options.preload);return e.options.poster&&("string"==typeof e.options.poster?o=e.options.poster:"string"==typeof e.options.poster.url&&(o=e.options.poster.url)),Y.extend(!0,e.el,{muted:e.options.mute,defaultMuted:e.options.mute,loop:e.options.loop,poster:o,preload:l||"metadata",crossOrigin:s.crossOrigin,"x-webkit-playsinline":s.playInline}),(s.controls||e.options.useVideoTagDefaultControls)&&e.$el.attr("controls",""),s.playInline&&e.$el.attr({playsinline:"playsinline"}),s.crossOrigin&&e.$el.attr({crossorigin:s.crossOrigin}),e.settings={default:["seekbar"]},e.settings.left=["playpause","position","duration"],e.settings.right=["fullscreen","volume","hd-indicator"],s.externalTracks&&e._setupExternalTracks(s.externalTracks),e.options.autoPlay&&e.attemptAutoPlay(),e}return C(n,[{key:"name",get:function(){return"html5_video"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"tagName",get:function(){return this.isAudioOnly?"audio":"video"}},{key:"isAudioOnly",get:function(){var e=this.options.src,t=n._mimeTypesForUrl(e,ct,this.options.mimeType);return this.options.playback&&this.options.playback.audioOnly||this.options.audioOnly||dt.indexOf(t[0])>=0}},{key:"attributes",get:function(){return{"data-html5-video":""}}},{key:"events",get:function(){return{canplay:"_onCanPlay",canplaythrough:"_handleBufferingEvents",durationchange:"_onDurationChange",ended:"_onEnded",error:"_onError",loadeddata:"_onLoadedData",loadedmetadata:"_onLoadedMetadata",pause:"_onPause",playing:"_onPlaying",progress:"_onProgress",seeking:"_onSeeking",seeked:"_onSeeked",stalled:"_handleBufferingEvents",timeupdate:"_onTimeUpdate",waiting:"_onWaiting"}}},{key:"ended",get:function(){return this.el.ended}},{key:"buffering",get:function(){return this._isBuffering}},{key:"isLive",get:function(){return this.getPlaybackType()===qe.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"configure",value:function(e){N(R(n.prototype),"configure",this).call(this,e),this.el.loop=!!e.loop}},{key:"attemptAutoPlay",value:function(){var e=this;this.canAutoPlay((function(t,n){n&&_e.warn(e.name,"autoplay error.",{result:t,error:n}),t&&setTimeout((function(){return!e._destroyed&&e.play()}),0)}))}},{key:"canAutoPlay",value:function(e){if(this.options.disableCanAutoPlay)e(!0,null);else{var t={timeout:this.options.autoPlayTimeout||500,inline:this.options.playback.playInline||!1,muted:this.options.mute||!1};Q.isMobile&&me.options.recycleVideo&&(t.element=this.el),ge(e,t)}}},{key:"_setupExternalTracks",value:function(e){this._externalTracks=e.map((function(e){return{kind:e.kind||"subtitles",label:e.label,lang:e.lang,src:e.src}}))}},{key:"_setupSrc",value:function(e){this.el.src!==e&&(this._ccIsSetup=!1,this.el.src=e,this._src=this.el.src)}},{key:"_onLoadedMetadata",value:function(e){this._handleBufferingEvents(),this.trigger(De.PLAYBACK_LOADEDMETADATA,{duration:e.target.duration,data:e}),this._updateSettings();var t=void 0===this._options.autoSeekFromUrl||this._options.autoSeekFromUrl;this.getPlaybackType()!==qe.LIVE&&t&&this._checkInitialSeek()}},{key:"_onDurationChange",value:function(){this._updateSettings(),this._onTimeUpdate(),this._onProgress()}},{key:"_updateSettings",value:function(){this.getPlaybackType()===qe.VOD||this.getPlaybackType()===qe.AOD?this.settings.left=["playpause","position","duration"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(De.PLAYBACK_SETTINGSUPDATE)}},{key:"isSeekEnabled",value:function(){return isFinite(this.getDuration())}},{key:"getPlaybackType",value:function(){var e="audio"===this.tagName?qe.AOD:qe.VOD;return[0,void 0,1/0].indexOf(this.el.duration)>=0?qe.LIVE:e}},{key:"isHighDefinitionInUse",value:function(){return!1}},{key:"consent",value:function(e){var t=this;if(this.isPlaying()||this.el._consented)N(R(n.prototype),"consent",this).call(this,e);else{var i=function i(){t.el.removeEventListener("loadedmetadata",i,!1),t.el.removeEventListener("error",i,!1),t.el._consented=!0,N(R(n.prototype),"consent",t).call(t,e)};this.el.addEventListener("loadedmetadata",i,!1),this.el.addEventListener("error",i,!1),this.el.load()}}},{key:"play",value:function(){this.trigger(De.PLAYBACK_PLAY_INTENT),this._stopped=!1,this._setupSrc(this._src),this._handleBufferingEvents();var e=this.el.play();e&&e.catch&&e.catch((function(){}))}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"stop",value:function(){this.pause(),this._stopped=!0,this.el.removeAttribute("src"),this.el.load(),this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(De.PLAYBACK_STOP)}},{key:"volume",value:function(e){0===e?(this.$el.attr({muted:"true"}),this.el.muted=!0):(this.$el.attr({muted:null}),this.el.muted=!1,this.el.volume=e/100)}},{key:"mute",value:function(){this.el.muted=!0}},{key:"unmute",value:function(){this.el.muted=!1}},{key:"isMuted",value:function(){return!0===this.el.muted||0===this.el.volume}},{key:"isPlaying",value:function(){return!this.el.paused&&!this.el.ended}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startPlayheadMovingChecks",value:function(){null===this._playheadMovingTimer&&(this._playheadMovingTimeOnCheck=null,this._determineIfPlayheadMoving(),this._playheadMovingTimer=setInterval(this._determineIfPlayheadMoving.bind(this),500))}},{key:"_stopPlayheadMovingChecks",value:function(){null!==this._playheadMovingTimer&&(clearInterval(this._playheadMovingTimer),this._playheadMovingTimer=null,this._playheadMoving=!1)}},{key:"_determineIfPlayheadMoving",value:function(){var e=this._playheadMovingTimeOnCheck,t=this.el.currentTime;this._playheadMoving=e!==t,this._playheadMovingTimeOnCheck=t,this._handleBufferingEvents()}},{key:"_onWaiting",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onLoadedData",value:function(){this._loadStarted=!0,this._handleBufferingEvents()}},{key:"_onCanPlay",value:function(){this._handleBufferingEvents()}},{key:"_onPlaying",value:function(){this._checkForClosedCaptions(),this._startPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(De.PLAYBACK_PLAY)}},{key:"_onPause",value:function(){this._stopPlayheadMovingChecks(),this._handleBufferingEvents(),this.trigger(De.PLAYBACK_PAUSE)}},{key:"_onSeeking",value:function(){this.trigger(De.PLAYBACK_SEEK,this.getCurrentTime()),this._handleBufferingEvents()}},{key:"_onSeeked",value:function(){this._handleBufferingEvents(),this.trigger(De.PLAYBACK_SEEKED)}},{key:"_onEnded",value:function(){this._handleBufferingEvents(),this.trigger(De.PLAYBACK_ENDED,this.name)}},{key:"_handleBufferingEvents",value:function(){var e=!this.el.ended&&!this.el.paused,t=this._loadStarted&&!this.el.ended&&!this._stopped&&(e&&!this._playheadMoving||this.el.readyState<this.el.HAVE_FUTURE_DATA);this._isBuffering!==t&&(this._isBuffering=t,t?this.trigger(De.PLAYBACK_BUFFERING,this.name):this.trigger(De.PLAYBACK_BUFFERFULL,this.name))}},{key:"_onError",value:function(){var e=this.el.error||ht,t=e.code,n=e.message,i=t===ht.code,r=this.createError({code:t,description:n,raw:this.el.error,level:i?Ge.Levels.WARN:Ge.Levels.FATAL});i?_e.warn(this.name,"HTML5 unknown error: ",r):this.trigger(De.PLAYBACK_ERROR,r)}},{key:"destroy",value:function(){this._destroyed=!0,this.handleTextTrackChange&&this.el.textTracks.removeEventListener("change",this.handleTextTrackChange),N(R(n.prototype),"destroy",this).call(this),this.el.removeAttribute("src"),this.el.load(),this._src=null,me.garbage(this.el)}},{key:"_updateDvr",value:function(e){this.trigger(De.PLAYBACK_DVR,e),this.trigger(De.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(_e.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),e+=this.el.seekable.start(0),this.el.currentTime=e}},{key:"seekPercentage",value:function(e){var t=this.el.duration*(e/100);this.seek(t)}},{key:"_checkInitialSeek",value:function(){var e=ce();0!==e&&this.seek(e)}},{key:"getCurrentTime",value:function(){return this.el.currentTime}},{key:"getDuration",value:function(){if(this.isLive){if(this.el.seekable.length>0)return this.el.seekable.end(0)-this.el.seekable.start(0);this._scheduleUpdateSettingsCheck()}return this.el.duration}},{key:"_scheduleUpdateSettingsCheck",value:function(){var e=this;this._updateSettingsCheckInFlight||(this._updateSettingsCheckInFlight=setTimeout((function(){e._updateSettings(),e._updateSettingsCheckInFlight=null}),1e3))}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(De.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var e=[],t=0,n=0;n<this.el.buffered.length;n++)e=[].concat(U(e),[{start:this.el.buffered.start(n),end:this.el.buffered.end(n)}]),this.el.currentTime>=e[n].start&&this.el.currentTime<=e[n].end&&(t=n);var i={start:e[t].start,current:e[t].end,total:this.el.duration};this.trigger(De.PLAYBACK_PROGRESS,i,e)}}},{key:"_typeFor",value:function(e){var t=n._mimeTypesForUrl(e,ut,this.options.mimeType);return 0===t.length&&(t=n._mimeTypesForUrl(e,ct,this.options.mimeType)),(t[0]||"").split(";")[0]}},{key:"_ready",value:function(){this._isReadyState||(this._isReadyState=!0,this.trigger(De.PLAYBACK_READY,this.name))}},{key:"_checkForClosedCaptions",value:function(){if(this.isHTML5Video&&!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(De.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e,this.handleTextTrackChange=this._handleTextTrackChange.bind(this),this.el.textTracks.addEventListener("change",this.handleTextTrackChange)}this._ccIsSetup=!0}}},{key:"_handleTextTrackChange",value:function(){var e=this.closedCaptionsTracks.find((function(e){return"showing"===e.track.mode}))||{id:-1};this._ccTrackId!==e.id&&(this._ccTrackId=e.id,this.trigger(De.PLAYBACK_SUBTITLE_CHANGED,{id:e.id}))}},{key:"isHTML5Video",get:function(){return this.name===n.prototype.name}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.el.textTracks?Array.from(this.el.textTracks):[]).filter((function(e){return"subtitles"===e.kind||"captions"===e.kind})).map((function(t){return{id:e++,name:t.label,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return this._ccTrackId},set:function(e){if(he(e)){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return;if("showing"===t.track.mode)return}n.filter((function(e){return"hidden"!==e.track.mode})).forEach((function(e){return e.track.mode="hidden"})),t&&(t.track.mode="showing"),this._ccTrackId=e,this.trigger(De.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}},{key:"template",get:function(){return Ve('<% for (var i = 0; i < tracks.length; i++) { %>\n  <track data-html5-video-track="<%= i %>" kind="<%= tracks[i].kind %>" label="<%= tracks[i].label %>" srclang="<%= tracks[i].lang %>" src="<%= tracks[i].src %>">\n<% }; %>\n')}},{key:"render",value:function(){this.options.playback.disableContextMenu&&this.$el.on("contextmenu",(function(){return!1})),this._externalTracks&&this._externalTracks.length>0&&this.$el.html(this.template({tracks:this._externalTracks})),this._ready();var e=He.getStyleFor("[data-html5-video] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  display: block; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this}}]),n}(qe);pt._mimeTypesForUrl=function(e,t,n){var i=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1],r=n||i&&t[i.toLowerCase()]||[];return r.constructor===Array?r:[r]},pt._canPlay=function(e,t,n,i){var r=pt._mimeTypesForUrl(n,t,i),a=document.createElement(e);return!!r.filter((function(e){return!!a.canPlayType(e).replace(/no/,"")}))[0]},pt.canPlay=function(e,t){return pt._canPlay("audio",ct,e,t)||pt._canPlay("video",ut,e,t)};var ft=function(e){D(n,e);var t=O(n);function n(){return S(this,n),t.apply(this,arguments)}return C(n,[{key:"name",get:function(){return"html5_audio"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"tagName",get:function(){return"audio"}},{key:"isAudioOnly",get:function(){return!0}},{key:"updateSettings",value:function(){this.settings.left=["playpause","position","duration"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(De.PLAYBACK_SETTINGSUPDATE)}},{key:"getPlaybackType",value:function(){return qe.AOD}}]),n}(pt);ft.canPlay=function(e,t){return pt._canPlay("audio",{wav:["audio/wav"],mp3:["audio/mp3",'audio/mpeg;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.5"'],oga:["audio/ogg"]},e,t)};var gt=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e)).el.src=e.src,i}return C(n,[{key:"name",get:function(){return"html_img"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"tagName",get:function(){return"img"}},{key:"attributes",get:function(){return{"data-html-img":""}}},{key:"events",get:function(){return{load:"_onLoad",abort:"_onError",error:"_onError"}}},{key:"getPlaybackType",value:function(){return qe.NO_OP}},{key:"render",value:function(){var e=He.getStyleFor("[data-html-img] {\n  max-width: 100%;\n  max-height: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});return this.$el.append(e[0]),this.trigger(De.PLAYBACK_READY,this.name),this}},{key:"_onLoad",value:function(){this.trigger(De.PLAYBACK_ENDED,this.name)}},{key:"_onError",value:function(e){var t="error"===e.type?"load error":"loading aborted";this.trigger(De.PLAYBACK_ERROR,{message:t},this.name)}}]),n}(qe);gt.canPlay=function(e){return/\.(png|jpg|jpeg|gif|bmp|tiff|pgm|pnm|webp)(|\?.*)$/i.test(e)};var mt=function(e){D(n,e);var t=O(n);function n(){var e;S(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._noiseFrameNum=-1,e}return C(n,[{key:"name",get:function(){return"no_op"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Ve("<canvas data-no-op-canvas></canvas>\n<p data-no-op-msg><%=message%></p><p>\n</p>")}},{key:"attributes",get:function(){return{"data-no-op":""}}},{key:"render",value:function(){var e=this.options.playbackNotSupportedMessage||this.i18n.t("playback_not_supported"),t=He.getStyleFor("[data-no-op] {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  text-align: center; }\n\n[data-no-op] p[data-no-op-msg] {\n  position: absolute;\n  text-align: center;\n  font-size: 25px;\n  left: 0;\n  right: 0;\n  color: white;\n  padding: 10px;\n  /* center vertically */\n  top: 50%;\n  transform: translateY(-50%);\n  max-height: 100%;\n  overflow: auto; }\n\n[data-no-op] canvas[data-no-op-canvas] {\n  background-color: #777;\n  height: 100%;\n  width: 100%; }\n".toString(),{baseUrl:this.options.baseUrl});this.$el.append(t[0]),this.$el.html(this.template({message:e})),this.trigger(De.PLAYBACK_READY,this.name);var n=!(!this.options.poster||!this.options.poster.showForNoOp);return!this.options.autoPlay&&n||this._animate(),this}},{key:"_noise",value:function(){if(this._noiseFrameNum=(this._noiseFrameNum+1)%5,!this._noiseFrameNum){var e,t=this.context.createImageData(this.context.canvas.width,this.context.canvas.height);try{e=new Uint32Array(t.data.buffer)}catch(r){e=new Uint32Array(this.context.canvas.width*this.context.canvas.height*4);for(var n=t.data,i=0;i<n.length;i++)e[i]=n[i]}for(var r=e.length,a=6*Math.random()+4,o=0,s=0,l=0;l<r;){if(o<0)o=a*Math.random(),s=255*Math.pow(Math.random(),.4)<<24;o-=1,e[l++]=s}this.context.putImageData(t,0,0)}}},{key:"_loop",value:function(){var e=this;this._stop||(this._noise(),this._animationHandle=ie((function(){return e._loop()})))}},{key:"destroy",value:function(){this._animationHandle&&(re(this._animationHandle),this._stop=!0)}},{key:"_animate",value:function(){this.canvas=this.$el.find("canvas[data-no-op-canvas]")[0],this.context=this.canvas.getContext("2d"),this._loop()}}]),n}(qe);mt.canPlay=function(e){return!0};var vt=function(e){D(n,e);var t=O(n);function n(e){var i;return S(this,n),(i=t.call(this,e))._initializeMessages(),i}return C(n,[{key:"name",get:function(){return"strings"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"t",value:function(e){var t=this._language(),n=this._messages.en;return(t&&this._messages[t]||n)[e]||n[e]||e}},{key:"_language",value:function(){return this.core.options.language||fe()}},{key:"_initializeMessages",value:function(){this._messages=Y.extend(!0,{en:{live:"live",back_to_live:"back to live",disabled:"Disabled",playback_not_supported:"Your browser does not support the playback of this video. Please try using a different browser.",default_error_title:"Could not play video.",default_error_message:"There was a problem trying to load the video."},de:{live:"Live",back_to_live:"Zurück zum Live-Video",disabled:"Deaktiviert",playback_not_supported:"Ihr Browser unterstützt das Playback Verfahren nicht. Bitte vesuchen Sie es mit einem anderen Browser.",default_error_title:"Video kann nicht abgespielt werden",default_error_message:"Es gab ein Problem beim Laden des Videos"},pt:{live:"ao vivo",back_to_live:"voltar para o ao vivo",disabled:"Desativado",playback_not_supported:"Seu navegador não supporta a reprodução deste video. Por favor, tente usar um navegador diferente.",default_error_title:"Não foi possível reproduzir o vídeo.",default_error_message:"Ocorreu um problema ao tentar carregar o vídeo."},es_am:{live:"vivo",back_to_live:"volver en vivo",disabled:"No disponible",playback_not_supported:"Su navegador no soporta la reproducción de este video. Por favor, utilice un navegador diferente.",default_error_title:"No se puede reproducir el video.",default_error_message:"Se ha producido un error al cargar el video."},es:{live:"en directo",back_to_live:"volver al directo",disabled:"No disponible",playback_not_supported:"Este navegador no es compatible para reproducir este vídeo. Utilice un navegador diferente.",default_error_title:"No se puede reproducir el vídeo.",default_error_message:"Se ha producido un problema al cargar el vídeo."},ru:{live:"прямой эфир",back_to_live:"к прямому эфиру",disabled:"Отключено",playback_not_supported:"Ваш браузер не поддерживает воспроизведение этого видео. Пожалуйста, попробуйте другой браузер."},bg:{live:"на живо",back_to_live:"Върни на живо",disabled:"Изключено",playback_not_supported:"Вашият браузър не поддържа възпроизвеждането на това видео. Моля, пробвайте с друг браузър.",default_error_title:"Видеото не може да се възпроизведе.",default_error_message:"Възникна проблем при зареждането на видеото."},fr:{live:"en direct",back_to_live:"retour au direct",disabled:"Désactivé",playback_not_supported:"Votre navigateur ne supporte pas la lecture de cette vidéo. Merci de tenter sur un autre navigateur.",default_error_title:"Impossible de lire la vidéo.",default_error_message:"Un problème est survenu lors du chargement de la vidéo."},tr:{live:"canlı",back_to_live:"canlı yayına dön",disabled:"Engelli",playback_not_supported:"Tarayıcınız bu videoyu oynatma desteğine sahip değil. Lütfen farklı bir tarayıcı ile deneyin."},et:{live:"Otseülekanne",back_to_live:"Tagasi otseülekande juurde",disabled:"Keelatud",playback_not_supported:"Teie brauser ei toeta selle video taasesitust. Proovige kasutada muud brauserit."},ar:{live:"مباشر",back_to_live:"الرجوع إلى المباشر",disabled:"معطّل",playback_not_supported:"المتصفح الذي تستخدمه لا يدعم تشغيل هذا الفيديو. الرجاء إستخدام متصفح آخر.",default_error_title:"غير قادر الى التشغيل.",default_error_message:"حدثت مشكلة أثناء تحميل الفيديو."},zh:{live:"直播",back_to_live:"返回直播",disabled:"已禁用",playback_not_supported:"您的浏览器不支持该视频的播放。请尝试使用另一个浏览器。",default_error_title:"无法播放视频。",default_error_message:"在尝试加载视频时出现了问题。"}},this.core.options.strings||{}),this._messages["de-DE"]=this._messages.de,this._messages["pt-BR"]=this._messages.pt,this._messages["en-US"]=this._messages.en,this._messages["bg-BG"]=this._messages.bg,this._messages["es-419"]=this._messages.es_am,this._messages["es-ES"]=this._messages.es,this._messages["fr-FR"]=this._messages.fr,this._messages["tr-TR"]=this._messages.tr,this._messages["et-EE"]=this._messages.et,this._messages["ar-IQ"]=this._messages.ar,this._messages["zh-CN"]=this._messages.zh}}]),n}(st),yt=function(e){D(n,e);var t=O(n);function n(){return S(this,n),t.apply(this,arguments)}return C(n,[{key:"name",get:function(){return"sources"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_CONTAINERS_CREATED,this.onContainersCreated)}},{key:"onContainersCreated",value:function(){var e=this.core.containers.filter((function(e){return"no_op"!==e.playback.name}))[0]||this.core.containers[0];e&&this.core.containers.forEach((function(t){t!==e&&t.destroy()}))}}]),n}(st),bt="0.4.27";it.registerPlugin(vt),it.registerPlugin(yt),it.registerPlayback(mt),it.registerPlayback(gt),it.registerPlayback(ft),it.registerPlayback(pt);var Et,Tt,At,kt,_t,St={Player:at,Events:De,Browser:Q,ContainerPlugin:ot,UIContainerPlugin:lt,CorePlugin:st,UICorePlugin:ze,Playback:qe,Container:Ye,Core:Xe,PlayerError:Ge,Loader:it,BaseObject:xe,UIObject:Ke,Utils:ye,HTML5Audio:ft,HTML5Video:pt,HTMLImg:gt,Log:_e,Styler:He,version:bt,template:Ve,$:Y},wt=Object.freeze({__proto__:null,$:Y,BaseObject:xe,Browser:Q,Container:Ye,ContainerPlugin:ot,Core:Xe,CorePlugin:st,Events:De,HTML5Audio:ft,HTML5Video:pt,HTMLImg:gt,Loader:it,Log:_e,Playback:qe,Player:at,PlayerError:Ge,Styler:He,UIContainerPlugin:lt,UICorePlugin:ze,UIObject:Ke,Utils:ye,default:St,template:Ve,version:bt});Q.isCrawlerBot=(Et=window.navigator.userAgent,Tt=/Applebot/i.test(Et),At=/YandexBot|YandexRenderResourcesBot/i.test(Et),kt=/Googlebot|AdsBot-Google/i.test(Et),_t=/BingPreview|bingbot/i.test(Et),Tt||kt||At||_t),Q.supportsFakeLocation=/puffin/i.test(navigator.userAgent),Q.supportsTouchEvents="ontouchstart"in window||navigator.maxTouchPoints>0,Q.isHybridDevice=Q.supportsTouchEvents&&!Q.isMobile,"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a])}return n},writable:!0,configurable:!0}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;for(var r=0|t,a=Math.max(r>=0?r:i-Math.abs(r),0);a<i;){if(n[a]===e)return!0;a++}return!1}}),Math.trunc=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)},String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t});var Ct=function(){function e(){r(this,e)}return o(e,null,[{key:"s4",value:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},{key:"generate",value:function(){return"".concat(this.s4()+this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4(),"-").concat(this.s4()).concat(this.s4()).concat(this.s4())}}]),e}(),It=function(e){try{if("object"===i(e))return JSON.stringify(e)}catch(e){}return e};function Dt(e,t){return"".concat(e).concat(t>1?"s":"")}var Rt=ye.formatTime,xt=function(e){return e&&"function"==typeof e.getTime?Math.trunc(e.getTime()/1e3):NaN};var Lt=!Q.isChrome&&!Q.isChromecast&&!Q.isSmartTvEnvironment,Pt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.httpOnly=t,this.protocol="http".concat(t?"":"s"),this.customEnv=n}return o(e,[{key:"blackVideoUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.mp4")}},{key:"blackVideoStreamingUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.m3u8")}},{key:"blackDashUrl",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/black.mpd")}},{key:"browserReportScript",get:function(){return"".concat(this.protocol,"://s3.glbimg.com/cdn/libs/browser-report/3.5.0/browser-report.min.js")}}],[{key:"isInternal",get:function(){return/(ef(-.*)?|publish\.api\.video|player)(\.qa01|\.local|\.dev)?\.globoi\.com$/.test(location.hostname)}},{key:"isLocalhost",get:function(){return["localhost","127.0.0.1"].includes(location.hostname)}},{key:"isGloboiDomain",get:function(){return/\.globoi\.com$/.test(location.hostname)}},{key:"isGloboDomain",get:function(){return!this.isInternal&&/\.globo\.com$/.test(location.hostname)}},{key:"playerId",get:function(){return this._playerId||(this._playerId=Ct.generate()),this._playerId}},{key:"hashQueryString",get:function(){var e="&version=".concat("1.38.1"),t="hash?".concat("resource_id=<%= resourceId %>").concat("<%= callback ? '&callback=' + callback : '' %>").concat(e).concat("&player=<%= player %>").concat("&tz=<%= tz %>").concat("&cdn=<%= cdn %>").concat("&profile=<%= profile %>").concat("<% if (flatUrl) { %>&flat_url=true<% } %>");return Lt&&(t+="&ts=<%= ts %>"),t}},{key:"get",value:function(t,n,i){return"qa1"===t&&(t="dev"),new e[t=e.isInternal?"dev"===t?"internalDev":"internal":t||"prod"](n,i)}}]),e}();Pt.local=ye.extend(Pt,{get name(){return"local"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://playback.video.globo.com/v3/video-session")},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://playback2.video.globo.com/v3/video-session")},get hashTemplate(){return Ve("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Pt.hashQueryString))},get playlistTemplate(){return Ve("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ve("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Pt.dev=ye.extend(Pt,{get name(){return"dev"},get securityHost(){return"".concat(this.protocol,"://security.video.dev.globoi.com")},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://playback.video.dev.globoi.com/v3/video-session")},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://playback.video.dev.globoi.com/v3/video-session")},get hashTemplate(){return Ve("".concat(this.protocol,"://security.video.dev.globoi.com/videos/<%= videoId %>/").concat(Pt.hashQueryString))},get playlistTemplate(){return Ve("".concat(this.protocol,"://api.globovideos.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ve("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Pt.internalDev=ye.extend(Pt,{get name(){return"internalDev"},get securityHost(){return"".concat(this.protocol,"://api.video.dev.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://internal-playback.backstage.dev.globoi.com/internal/v3/video-session")},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://internal-playback.backstage.dev.globoi.com/internal/v3/video-session")},get hashTemplate(){return Ve("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(Pt.hashQueryString))},get playlistTemplate(){return Ve("".concat(this.protocol,"://api.video.dev.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ve("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.dev.globoi.com/<%= size %>/<%= videoId %>.jpg"))}}),Pt.internal=ye.extend(Pt,{get name(){return"internal"},get securityHost(){return"".concat(this.protocol,"://api.video.globoi.com")},get CDNRouterHost(){return"".concat(this.protocol,"://internal-playback.backstage.globoi.com/internal/v3/video-session")},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://internal-playback.backstage.globoi.com/internal/v3/video-session")},get hashTemplate(){return Ve("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(Pt.hashQueryString))},get playlistTemplate(){return Ve("".concat(this.protocol,"://api.video.globoi.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ve("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Pt.prod=ye.extend(Pt,{get name(){return"prod"},get securityHost(){return"".concat(this.protocol,"://security.video.globo.com")},get CDNRouterHost(){return"".concat(this.protocol,"://playback.video.globo.com/v3/video-session")},get CDNRouterFallbackHost(){return"".concat(this.protocol,"://playback2.video.globo.com/v3/video-session")},get hashTemplate(){return Ve("".concat(this.protocol,"://security.video.globo.com/videos/<%= videoId %>/").concat(Pt.hashQueryString))},get playlistTemplate(){return Ve("".concat(this.protocol,"://api.globovideos.com/videos/<%= videoId %>/").concat(this.httpOnly?"insecure_playlist":"playlist","/without_resources/callback/<%= callback %>"))},get posterTemplate(){return Ve("".concat(this.protocol,"://s0<%= domainNumber %>.video.glbimg.com/<%= size %>/<%= videoId %>.jpg"))}}),Pt.custom=ye.extend(Pt.prod,{get name(){return"custom"},get CDNRouterHost(){return this.customEnv.CDNRouterHost||"".concat(this.protocol,"://playback.video.globo.com/v3/video-session")},get CDNRouterFallbackHost(){return this.customEnv.CDNRouterFallbackHost||"".concat(this.protocol,"://playback2.video.globo.com/v3/video-session")}});var Ot=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.options=n,this.id=t.id,this.title=t.title,this.kind=t.kind,this.program=t.program,this.channel=t.channel,this.category=t.category,this.createdAt=t.created_at,this.exhibitedAt=t.exhibited_at,this.programId=t.program_id,this.channelId=t.channel_id,this.duration=t.duration,this.serviceId=t.service_id,this.providerId=t.provider_id,this.providerUrl=t.provider_url,this.type=t.type,this.affiliate=t.affiliate,this.geofencing=!!t.geofencing,this.isSubscriberOnly=!!t.subscriber_only,this.encrypted=!!t.encrypted,this.isArchived=t.archived,this.urlForConsumption=t.url_for_consumption,this.adult=t.adult,this.contentRating=t.content_rating,this.contentRatingCriteria=t.content_rating_criteria,this.isSelfRated=t.self_rated,this.verifyContentRating=t.verify_content_rating,this.adUnit=t.ad_unit,this.adCustomData=t.ad_custom_data,this.adAccountId=t.ad_account_id,this.adCmsId=t.ad_cms_id,this.cuepoints=t.cuepoints,this.rawData=t,this.rawData.videos=[t],this.selectedLevel=n.selectedLevel,this.preferredLevel=n.preferredLevel,this.preferredCDN=n.preferredCDN,this.posterImageUrls=this.createPosterImageUrl(),this.drm=e.getDRMProtocol()}return o(e,[{key:"isLive",get:function(){return"Live"===this.type}},{key:"posterTemplate",get:function(){var e;return null===(e=this.options.env)||void 0===e?void 0:e.posterTemplate}},{key:"createPosterImageUrl",value:function(){var e=this,t=this.posterTemplate;if(t){var n=Number(this.id)%4+1,i={};return[240,360,720].forEach((function(r){i[r]=t({domainNumber:n,size:"x".concat(r),videoId:e.id})})),i}}}],[{key:"getDRMProtocol",value:function(){var t=(e.overrides||{}).getDRMProtocol;return"function"==typeof t?t():Q.isSmartTvEnvironment?"playready":e.getDesktopDRMProtocol()}},{key:"getDesktopDRMProtocol",value:function(){return Q.isSafari||Q.isiOS?"fairplay":Q.isChrome||Q.isFirefox||Q.isChromecast||Q.isEdge?"widevine":"playready"}},{key:"getPlayerType",value:function(){var t=(e.overrides||{}).getPlayerType;return"function"==typeof t?t():Q.isMobile?Q.isAndroid?Q.preventUsingCookies?"android_flat":"android":Q.isiOS?"safari_mobile":Q.isWindowsPhone?"windows_phone":"html5":Q.isChromecast?"chromecast":Q.isSafari?"safari":Q.preventUsingCookies?"desktop_flat":"desktop"}}]),e}(),Mt=function(e,t){var n=t+1-e.toString().length;return new Array(Math.max(0,n)).join("0")+e},Nt="0123456789abcdef",Bt=function(e){for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);t+=Nt.charAt(i>>>4&15)+Nt.charAt(15&i)}return t},Ut=function(){return new Date},Ft=function(){return Ut().getTime()},Vt=function(e,t,n){return t.replace(/\[/g,".").replace(/]/g,"").split(".").filter(Boolean).every((function(t){return!(t&&void 0===(e=e[t]))}))?e:n},Ht=function(){var e=-Ut().getTimezoneOffset(),t=Math.abs(e)/60,n=Math.abs(e)%60;return"".concat(0===e?"":e>0?"+":"-").concat(Mt(t,2),":").concat(Mt(n,2))},jt=function(e){var t=document.cookie.match("(^|;) ?".concat(e,"=([^;]*)(;|$)"));return t?window.unescape(t[2]):null},Kt=function(e){var t=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},n=function(e,n,i,r,a,o){return t((s=t(t(n,e),t(r,o)))<<(l=a)|s>>>32-l,i);var s,l},i=function(e,t,i,r,a,o,s){return n(t&i|~t&r,e,t,a,o,s)},r=function(e,t,i,r,a,o,s){return n(t&r|i&~r,e,t,a,o,s)},a=function(e,t,i,r,a,o,s){return n(t^i^r,e,t,a,o,s)},o=function(e,t,i,r,a,o,s){return n(i^(t|~r),e,t,a,o,s)};return function(e){return function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}(function(e,n){e[n>>5]|=128<<n%32,e[14+(n+64>>>9<<4)]=n;for(var s=1732584193,l=-271733879,u=-1732584194,c=271733878,d=0;d<e.length;d+=16){var h=s,p=l,f=u,g=c;s=i(s,l,u,c,e[d+0],7,-680876936),c=i(c,s,l,u,e[d+1],12,-389564586),u=i(u,c,s,l,e[d+2],17,606105819),l=i(l,u,c,s,e[d+3],22,-1044525330),s=i(s,l,u,c,e[d+4],7,-176418897),c=i(c,s,l,u,e[d+5],12,1200080426),u=i(u,c,s,l,e[d+6],17,-1473231341),l=i(l,u,c,s,e[d+7],22,-45705983),s=i(s,l,u,c,e[d+8],7,1770035416),c=i(c,s,l,u,e[d+9],12,-1958414417),u=i(u,c,s,l,e[d+10],17,-42063),l=i(l,u,c,s,e[d+11],22,-1990404162),s=i(s,l,u,c,e[d+12],7,1804603682),c=i(c,s,l,u,e[d+13],12,-40341101),u=i(u,c,s,l,e[d+14],17,-1502002290),l=i(l,u,c,s,e[d+15],22,1236535329),s=r(s,l,u,c,e[d+1],5,-165796510),c=r(c,s,l,u,e[d+6],9,-1069501632),u=r(u,c,s,l,e[d+11],14,643717713),l=r(l,u,c,s,e[d+0],20,-373897302),s=r(s,l,u,c,e[d+5],5,-701558691),c=r(c,s,l,u,e[d+10],9,38016083),u=r(u,c,s,l,e[d+15],14,-660478335),l=r(l,u,c,s,e[d+4],20,-405537848),s=r(s,l,u,c,e[d+9],5,568446438),c=r(c,s,l,u,e[d+14],9,-1019803690),u=r(u,c,s,l,e[d+3],14,-187363961),l=r(l,u,c,s,e[d+8],20,1163531501),s=r(s,l,u,c,e[d+13],5,-1444681467),c=r(c,s,l,u,e[d+2],9,-51403784),u=r(u,c,s,l,e[d+7],14,1735328473),l=r(l,u,c,s,e[d+12],20,-1926607734),s=a(s,l,u,c,e[d+5],4,-378558),c=a(c,s,l,u,e[d+8],11,-2022574463),u=a(u,c,s,l,e[d+11],16,1839030562),l=a(l,u,c,s,e[d+14],23,-35309556),s=a(s,l,u,c,e[d+1],4,-1530992060),c=a(c,s,l,u,e[d+4],11,1272893353),u=a(u,c,s,l,e[d+7],16,-155497632),l=a(l,u,c,s,e[d+10],23,-1094730640),s=a(s,l,u,c,e[d+13],4,681279174),c=a(c,s,l,u,e[d+0],11,-358537222),u=a(u,c,s,l,e[d+3],16,-722521979),l=a(l,u,c,s,e[d+6],23,76029189),s=a(s,l,u,c,e[d+9],4,-640364487),c=a(c,s,l,u,e[d+12],11,-421815835),u=a(u,c,s,l,e[d+15],16,530742520),l=a(l,u,c,s,e[d+2],23,-995338651),s=o(s,l,u,c,e[d+0],6,-198630844),c=o(c,s,l,u,e[d+7],10,1126891415),u=o(u,c,s,l,e[d+14],15,-1416354905),l=o(l,u,c,s,e[d+5],21,-57434055),s=o(s,l,u,c,e[d+12],6,1700485571),c=o(c,s,l,u,e[d+3],10,-1894986606),u=o(u,c,s,l,e[d+10],15,-1051523),l=o(l,u,c,s,e[d+1],21,-2054922799),s=o(s,l,u,c,e[d+8],6,1873313359),c=o(c,s,l,u,e[d+15],10,-30611744),u=o(u,c,s,l,e[d+6],15,-1560198380),l=o(l,u,c,s,e[d+13],21,1309151649),s=o(s,l,u,c,e[d+4],6,-145523070),c=o(c,s,l,u,e[d+11],10,-1120210379),u=o(u,c,s,l,e[d+2],15,718787259),l=o(l,u,c,s,e[d+9],21,-343485551),s=t(s,h),l=t(l,p),u=t(u,f),c=t(c,g)}return[s,l,u,c]}(function(e){var t,n=new Array(e.length>>2);for(t=0;t<n.length;t++)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}(e),8*e.length))}(function(e,t){var n,i,r="",a=-1;for(e+=t.substr(1,8);++a<e.length;)n=e.charCodeAt(a),i=a+1<e.length?e.charCodeAt(a+1):0,55296<=n&&n<=56319&&56320<=i&&i<=57343&&(n=65536+((1023&n)<<10)+(1023&i),a++),n<=127?r+=String.fromCharCode(n):n<=2047?r+=String.fromCharCode(192|n>>>6&31,128|63&n):n<=65535?r+=String.fromCharCode(224|n>>>12&15,128|n>>>6&63,128|63&n):n<=2097151&&(r+=String.fromCharCode(240|n>>>18&7,128|n>>>12&63,128|n>>>6&63,128|63&n));return r}(e,"=0xAC10FD"))},Gt={applySizeClass:function(e,t,n){if(t&&"number"==typeof t){if(e.removeClass("w960 w640 w540 w480 w360 h720 h1080"),n&&"number"==typeof n){var i=n<=720?"h720":"h1080";e.addClass(i)}t<=360?e.addClass("w360"):t<=480?e.addClass("w480"):t<540?e.addClass("w540"):t<=640?e.addClass("w640"):e.addClass("w960")}},toLowerCase:function(e){return"string"==typeof e?e.toLowerCase():e},embedScript:function(e){var t=Y.Deferred(),n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,n.onload=function(){t.resolve()},n.onerror=function(e){t.reject(e)},document.head.appendChild(n),t.promise()},get:Vt,getCookie:jt,getCurrentDate:Ut,getCurrentTime:Ft,getExpiresDateInGMT:function(e){var t=new Date;return t.setTime(t.getTime()+24*e*60*60*1e3),t.toGMTString()},getHostname:function(){return location.hostname},getHostAndPathName:function(){var e=(location.pathname||"").split("/")||[];return location.hostname+(e.length>0?"/".concat(e[1]):"")},isNaN:function(e){return e!=e},iso8601TimezoneOffset:Ht,loadUrlAsImage:function(e){var t=new Image;return t.src=e,t},now:function(){return window.performance&&window.performance.now&&performance.now()||Date.now()},percent:function(e,t){return 0===e?e:e/t*100},toDurationString:function(e){var t,n=e/6e4,i=[0,1,2,3,4,5,7,10];for(t=0;t<i.length&&!(n<i[t]);t++);return t<i.length?"".concat(Mt(i[t-1],2),":0").concat(0===t?0:1," - ").concat(Mt(i[t],2),":00"):"10:01 +"},secondsToMillis:function(e){return 1e3*e>>0},copyToClipboard:function(e,t){if(t){var n=Y('<textarea style="opacity:0" class="copytextarea"/>');n.text(e),t.append(n[0]);var i=t.find(".copytextarea")[0],r=document.activeElement;i.focus(),i.select();var a=document.execCommand("copy");return n.remove(),r.focus(),a}},mergePlugins:function(e,t){var n=[];return e.concat(t).filter((function(e){if(!e)return!1;var t=e.prototype.name,i=-1===n.indexOf(t);return i&&n.push(t),i}))},hexGrf:function(e){return Bt(Kt(e))}},Wt={jsonp:function(e){var t=new Y.Deferred;e.callbackName=e.callbackName||"json_callback",e.timeout=e.timeout||15e3,window[e.callbackName]=function(e){Wt.isErrorObject(e)?t.reject(e):t.resolve(e)};var n=Y("head")[0],i=document.createElement("script");return i.setAttribute("src",e.url),i.setAttribute("async","async"),i.onload=i.onreadystatechange=function(t){i.readyState&&!/loaded|complete/.test(i.readyState)||(e.timeoutId&&window.clearTimeout(e.timeoutId),i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=void 0)},i.onerror=function(){t.reject({error:!0,message:"jsonp load error"})},n.insertBefore(i,n.firstChild),e.error&&(e.timeoutId=window.setTimeout(e.error,e.timeout)),t.promise()},isErrorObject:function(e){return e&&e.http_status_code&&200!==e.http_status_code}},zt={isFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement||e.webkitDisplayingFullscreen},requestFullscreen:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},cancelFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;e.exitFullscreen?e.exitFullscreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}},Yt=Q.isSmartTvEnvironment?["google","$YB"]:["google","google.ima.settings","google.ima.dai","$YB"],qt=function(){function e(){r(this,e),this.loadScriptsIntervalId=null,this.loadScriptsAttempts=5}return o(e,[{key:"ready",value:function(){return!Yt.filter((function(e){return void 0===Vt(window,e,void 0)})).length}},{key:"isAvailable",value:function(){var e=this,t=new Y.Deferred;return this.loadScriptsIntervalId=setInterval((function(){e.ready()?(clearInterval(e.loadScriptsIntervalId),t.resolve()):e.loadScriptsAttempts--,e.loadScriptsAttempts||(clearInterval(e.loadScriptsIntervalId),t.reject())}),200),t.promise()}}]),e}(),$t=window.WM&&window.WM.version||"legacy_api",Xt=function(e){return"object"===i(e.playerExperiments)},Qt=function(e,t){return e.playerExperiments&&e.playerExperiments[t]},Zt=function(){function e(){r(this,e)}return o(e,null,[{key:"keyspaceFor",value:function(e){return"wm.player.".concat(e)}},{key:"load",value:function(e,t){return this.loadRaw(this.keyspaceFor(e),t)}},{key:"loadRaw",value:function(e,t){if(Q.hasLocalstorage&&localStorage[e])return t?t(localStorage[e]):localStorage[e]}},{key:"store",value:function(e,t){return this.storeRaw(this.keyspaceFor(e),t)}},{key:"storeRaw",value:function(e,t){if(Q.hasLocalstorage)try{return localStorage[e]=t,!0}catch(e){return!1}return!1}}]),e}(),Jt={code:"default-error",clientCode:"default-error",description:"There was a problem trying to load the video.",reportAs:"ERROR",internalError:!0},en={DEFAULT_ERROR:Jt,AUTH_REQUIRED:n(n({},Jt),{},{code:"login-required",clientCode:"login-required",description:"Authentication required.",reportAs:"INFO"}),DEVICE_NOT_SUPPORTED:n(n({},Jt),{},{code:"player-type-not-supported",clientCode:"webmedia-service-error",description:"Device not supported",reportAs:"INFO"}),GEOFENCING:n(n({},Jt),{},{code:"geo-fencing",clientCode:"geo-fencing",description:"This video cannot be played in the current location.",reportAs:"INFO"}),GEO_BLOCKED:n(n({},Jt),{},{code:"geo-block",clientCode:"geo-block",description:"This video cannot be played in the current region.",reportAs:"INFO"}),PLAYER_NOT_RECOGNIZED:n(n({},Jt),{},{code:"PNR",clientCode:"PNR",description:"Player Not Recognized."}),RESOURCE_LOAD_ERROR:n(n({},Jt),{},{code:"resource-load-error",clientCode:"webmedia-service-error",description:"Error loading resource."}),LOCATION_UNAVAILABLE:n(n({},Jt),{},{code:"location-unavailable",clientCode:"location-unavailable",description:"Could not play content. Location is unavailable.",reportAs:"INFO"}),NOT_ALLOWED_DOMAIN:n(n({},Jt),{},{code:"not-allowed-domain",clientCode:"not-allowed-domain",description:"The video cannot be played on the current domain.",reportAs:"INFO"}),NOT_FOUND:n(n({},Jt),{},{code:"video-not-found",clientCode:"video-not-found",description:"Content not available.",reportAs:"INFO"}),PLAYLIST_LOAD_ERROR:n(n({},Jt),{},{code:"playlist-load-error",clientCode:"webmedia-service-error",description:"Error loading video resources."}),RESTRICTED_CONTENT:n(n({},Jt),{},{code:"restricted-content-error",clientCode:"restricted-content-error",description:"Restricted content.",reportAs:"INFO"}),SIMULTANEOUS_ACCESS:n(n({},Jt),{},{code:"simultaneous-access-exceeded",clientCode:"simultaneous-access-exceeded",description:"There are too much sessions currently active on the same account.",reportAs:"INFO"}),STREAMING_PAUSE_TIME_EXPIRED:n(n({},Jt),{},{code:"streaming-pause-time-expired",clientCode:"streaming-pause-time-expired",description:"The video was paused for a long time.",reportAs:"INFO"}),SUBSCRIBERS_ONLY:n(n({},Jt),{},{code:"user-not-authorized",clientCode:"user-not-authorized",description:"Exclusive content for subscribers.",reportAs:"INFO"}),UNSUPPORTED_BROWSER:n(n({},Jt),{},{code:"unsupported-browser",clientCode:"unsupported-browser",description:"Browser not supported.",reportAs:"INFO"}),UNSUPPORTED_MOBILE_DEVICE:n(n({},Jt),{},{code:"unsupported-mobile-device",clientCode:"unsupported-mobile-device",description:"Mobile device not supported.",reportAs:"INFO"}),TIMESTAMP_ERROR:n(n({},Jt),{},{code:"timestamp-error",clientCode:"webmedia-service-error",description:"Timestamp error.",reportAs:"INFO"})},tn=function(){function e(){r(this,e)}return o(e,null,[{key:"getLocation",value:function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){t(n({error:e},en.LOCATION_UNAVAILABLE))})):t(en.LOCATION_UNAVAILABLE)}))}}]),e}(),nn=function(){function e(){r(this,e)}return o(e,null,[{key:"params",get:function(){for(var e,t=/\+/g,n=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(t," "))},r=window.location.search.substring(1),a={};e=n.exec(r);)a[i(e[1]).toLowerCase()]=i(e[2]);return a}}]),e}(),rn=function(){var e=0,t=nn.params.s||"",n=t.match(/[0-9]+[hms]+/g)||[];if(n.length>0){var i={h:3600,m:60,s:1};n.forEach((function(t){if(t){var n=t[t.length-1],r=parseInt(t.slice(0,t.length-1),10);e+=r*i[n]}}))}else t&&(e=parseInt(t,10));return e},an=function(){function e(){r(this,e)}return o(e,null,[{key:"uid",get:function(){var e="user.uid",t=Zt.load(e);return t||(t=Ct.generate(),Zt.store(e,t)),t}},{key:"getProviderCookieName",value:function(e){return e?"WMPTOKEN_".concat(e):"GLBID"}},{key:"hasGlbId",value:function(){var e=jt("GLBID");return"string"==typeof e&&e.length>10}},{key:"hasTokenForProvider",value:function(e){if(!e)return this.hasGlbId();var t=this.getProviderCookieName(e);return!!t&&"string"==typeof jt(t)}},{key:"isExperimentEnabled",value:function(e,t){var n="experiment.".concat(e),i=Zt.load(n,parseFloat);return i||(i=Math.random(),Zt.store(n,i)),i<=t}}]),e}(),on={hasPlayerElement:function(e){if(e&&e.childNodes.length>0){var t=Array.prototype.slice.call(e.childNodes).find((function(e){return"DIV"===e.tagName&&-1!==e.id.indexOf("wp3-player-")}));return t&&!!document.getElementById(t.id)}return!1},hasChildElement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=e.id||"function"==typeof e.attr&&e.attr("id"),i="#".concat(n," ").concat(t),r=!!document.querySelectorAll(i).length;return r}},isIframe:function(){return window.top!==window}},sn=new(function(){function e(){r(this,e),this.sessions={}}return o(e,[{key:"startSession",value:function(e){if(e){var t=this.sessions[e]||{};this.sessions[e]=n(n({},t),{},{sessionId:Ct.generate()})}}},{key:"getVideoSessionId",value:function(e){if(this.sessions[e])return this.sessions[e].sessionId}},{key:"storeLockId",value:function(e,t){this.sessions[e]&&t&&(this.sessions[e].lockId=t)}},{key:"getLockId",value:function(e){if(this.sessions[e])return this.sessions[e].lockId}}]),e}()),ln="data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq";window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO=document.createElement("video"),window.WM_PLAYER_VIDEO_TAG_TEST_MUTE=document.createElement("video");var un=function(){function e(){r(this,e),this._deferred=new Y.Deferred,this.playerHasConsent=!1,this._setBrowserFlags()}return o(e,[{key:"canAutoPlayMuted",get:function(){return this.isAvailable(!0)}},{key:"canAutoPlayUnmuted",get:function(){return this.isAvailable(!1)}},{key:"isAutoPlayMutedAllowed",value:function(e){return this.isAvailable(!0)&&e.autoPlay}},{key:"allowAutoplay",value:function(e){return e.autoPlay&&this.canAutoPlayMuted||Q.isSmartTvEnvironment&&e.autoPlay||Q.isChromecast}},{key:"onAutoplayAvailable",value:function(e,t,n){var i=this;return this._deferred.then((function(){i.allowAutoplay(t)?e():null==n||n()}))}},{key:"isAvailable",value:function(e){return!Q.isCrawlerBot&&(Q.isSmartTvEnvironment||this.playerHasConsent||this.isAllowedWithAudio||e&&this.isAllowedWithoutAudio)}},{key:"consent",value:function(){this.playerHasConsent=!0}},{key:"_setBrowserFlags",value:function(){var e=this;if(Q.isSmartTvEnvironment||Q.isChromecast)this._deferred.resolve();else{var t=this._createVideoElement(ln,!1),n=this._createVideoElement(ln,!0);Q.isMobile?this.isAllowedWithAudio=!1:this._setFlag(t,"isAllowedWithAudio"),this._setFlag(n,"isAllowedWithoutAudio"),setTimeout((function(){return e._deferred.resolve()}),5e3)}}},{key:"_setFlag",value:function(e,t){var n=this,i=e.play();i?i.then((function(){n[t]=!0}),(function(){n[t]=!1})).then((function(){return n._resolve()})):(this[t]=!Q.isMobile,this._resolve())}},{key:"_resolve",value:function(){"isAllowedWithAudio"in this&&"isAllowedWithoutAudio"in this&&this._deferred.resolve()}},{key:"_createVideoElement",value:function(e,t){var n=t?window.WM_PLAYER_VIDEO_TAG_TEST_MUTE:window.WM_PLAYER_VIDEO_TAG_TEST_AUDIO;return n.src=e,n.muted=t,n.playsInline=!0,n}}]),e}(),cn=new un,dn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n[e]&&n[e](t)},hn=function(e,t){return t&&"function"==typeof t.getTime?Math.trunc(t.getTime()/1e3+e):NaN},pn=function(e){var t=e.getCurrentTime(),n=e.getProgramDateTime?new Date(e.getProgramDateTime()):null;return hn(t,n)},fn=function(e,t){return pn(e)-t},gn=function(e,t){return e.getCurrentTime()-fn(e,t)},mn=/^\d+$/,vn=Object.freeze({VIDEO_ID:"application/vnd.globo.videoid"}),yn=function(e,t){return mn.test(e)||t===vn.VIDEO_ID},bn=n(n({},Gt),{},{Ajax:Wt,getExperimentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Xt(e))return[];var t=Object.keys(e.playerExperiments)||[],n=t.map((function(t){var n=e.playerExperiments[t];return n&&n.alternative||""}))||[];return n=n.filter((function(e){return""!==e}))},getExperimentAlternative:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!Xt(e))return"";var n=Qt(e,t);return n&&n.alternative||""},Fullscreen:zt,getDeviceType:function(){return Q.isChromecast?"cast":Q.isSmartTvEnvironment?"tv":Q.isMobile?"mobile":"desktop"},getPlatformName:function(e){return"web-".concat(e)},isNaN:isNaN,LocalStorage:Zt,Location:tn,QueryString:nn,toQueryString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return e[t]||""===e[t]||0===e[t]},n=encodeURIComponent,i=Object.keys(e);return i.filter(t).map((function(t){return"".concat(n(t),"=").concat(n(e[t]))})).join("&")},seekStringToSeconds:rn,rstr2hex:Bt,rstr2b64:function(e){for(var t="",n=e.length,i=0;i<n;i+=3)for(var r=e.charCodeAt(i)<<16|(i+1<n?e.charCodeAt(i+1)<<8:0)|(i+2<n?e.charCodeAt(i+2):0),a=0;a<4;a++)8*i+6*a>8*e.length?t+="":t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(r>>>6*(3-a)&63);return t},zeroPad:Mt,User:an,Uid:Ct,registerGlobal:function(e){Yt.push(e)},GlobalsManager:qt,getUnixTimestamp:xt,truncateTimeSeconds:function(e){var t=new Date(1e3*e);return t.setSeconds(0,0),xt(t)},isTimestampOnHashNeeded:Lt,getTimeValues:function(e){return Rt(e,!0).split(":").map(Number)},getLiteralTimeValues:function(e,t,n){return{hoursText:e>0?" ".concat(e," ").concat(Dt("hora",e),","):"",minutesText:"".concat(t," ").concat(Dt("minuto",t)),secondsText:"".concat(n," ").concat(Dt("segundo",n))}},DOM:on,API_VERSION:$t,convertToString:It,pluralize:Dt,autoplayManager:cn,session:sn,checkRecoverableError:dn,getTimeFromPosition:hn,getCurrentTime:pn,getLiveDifferenceFromTime:fn,getPositionFromTime:gn,isVideoId:yn}),En={getStyleFrom:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{baseUrl:""},n=t||{},i=Ve(e.toString())(n);return n.playerId&&(i=i.replace(/\#wp3-player-0/g,"#wp3-player-".concat(n.playerId))),Y('<style class="clappr-style"></style>').html(i)}},Tn=o((function e(){r(this,e)}));Tn.WM_PLAY_REQUESTED="wm:play:requested",Tn.WM_USER_PLAY_REQUESTED="wm:user:play:requested",Tn.WM_PLAY_REQUESTED_READY="wm:play:requested:ready",Tn.CHROMECAST_SCRIPT_ERROR="chromecast:script:error",Tn.CHROMECAST_SCRIPT_LOADED="chromecast:script:loaded",Tn.CHROMECAST_API_ERROR="chromecast:api:error",Tn.CHROMECAST_API_READY="chromecast:api:ready",Tn.CHROMECAST_INITIALIZE_ERROR="chromecast:initialize:error",Tn.CHROMECAST_INITIALIZE_SUCCESS="chromecast:initialize:success",Tn.CHROMECAST_AVAILABLE="chromecast:available",Tn.CHROMECAST_UNAVAILABLE="chromecast:unavailable",Tn.CHROMECAST_LAUNCH_REQUEST="chromecast:launch:request",Tn.CHROMECAST_LAUNCH_ERROR="chromecast:launch:error",Tn.CHROMECAST_LAUNCH_SUCCESS="chromecast:launch:success",Tn.CHROMECAST_MEDIA_LOAD_ERROR="chromecast:mediaload:error",Tn.CHROMECAST_MEDIA_LOAD_SUCCESS="chromecast:mediaload:success",Tn.CHROMECAST_MEDIA_WATCHING="chromecast:media:watching",Tn.CHROMECAST_MEDIA_STOP_WATCHING="chromecast:mediastop:watching",Tn.DID_START_ADS_MANAGER="did:startads:manager",Tn.ADS_REQUEST_READY="ads:request:ready",Tn.ADS_REQUEST_ERROR="ads:request:error",Tn.DFP_MANAGER_LOADED="dfp:manager:loaded",Tn.DFP_ENABLE="dfp:enable",Tn.DFP_DISABLE="dfp:disable",Tn.DFP_AD_LOADED="dfp:ad:loaded",Tn.DFP_AD_CLOSED="dfp:ad:closed",Tn.DFP_AD_STARTED="dfp:ad:started",Tn.DFP_AD_RESUME="dfp:playback:resume",Tn.DFP_AD_PAUSE="dfp:playback:pause",Tn.DFP_AD_CLICKED="dfp:ad:clicked",Tn.DFP_AD_COMPLETED="dfp:ad:completed",Tn.DFP_AD_SKIPPED="dfp:ad:skipped",Tn.DFP_AD_NOTSERVED="dfp:ad:notserved",Tn.DFP_AD_ERROR="dfp:ad:error",Tn.DFP_AD_METADATA="dfp:metadata",Tn.DFP_ALL_ADS_COMPLETED="dfp:allads:completed",Tn.DFP_CONTENT_PAUSE="dfp:content:pause",Tn.DFP_CONTENT_RESUME="dfp:content:resume",Tn.DFP_CONTENT_STARTED="dfp:content:started",Tn.DFP_CONTENT_ENDED="dfp:content:ended",Tn.DFP_FINISHED="dfp:finished",Tn.DFP_AD_BREAK_READY="dfp:adbreak:ready",Tn.DFP_INVALID_AD="dfp:invalid:ad",Tn.DID_SET_AD_PLAYBACK="did:setad:playback",Tn.YOUBORA_TIMEMARK="youbora:timemark",Tn.DID_LOAD_CUEPOINTS="wm:didloadcuepoints",Tn.DID_REACH_CUEPOINT="wm:didreachcuepoint",Tn.DID_LOAD_EPG="wm:didloadepg",Tn.DID_CHANGE_CURRENT_PROGRAM="wm:didchangecurrentprogram",Tn.WM_STREAMING_DATA_LOADED="wm:streamingdata:loaded",Tn.WM_VIDEO_METADATA_REQUEST_COMPLETE="wm:videometadata:request:complete",Tn.WM_VIDEO_METADATA_LOADED="wm:videometadata:loaded",Tn.WM_VIDEO_METADATA_ERROR="wm:videometadata:error",Tn.WM_RESOURCE_LOADED="wm:resource:loaded",Tn.WM_RESOURCE_SELECTED="wm:resource:selected",Tn.WM_RESOURCE_REQUEST_STATS="wm:resource:request:stats",Tn.WM_AUTOPLAY_BLOCKED="wm:autoplay:blocked",Tn.WM_REQUEST_HASH="wm:request:hash",Tn.WM_HASH_RECEIVED="wm:hash:received",Tn.WM_RESOURCE_READY="wm:resource:ready",Tn.WM_RESOURCE_ERROR="wm:resource:error",Tn.WM_SETTINGS_SHOW="wm:settings:show",Tn.WM_VOLUME_SHOW="wm:volume:show",Tn.WM_VOLUME_HIDE="wm:volume:hide",Tn.WM_MUTED="wm:muted",Tn.WM_UNMUTED="wm:unmuted",Tn.WM_SHARE_SHOW="wm:share:show",Tn.WM_SHARE_HIDE="wm:share:hide",Tn.WM_SPINNER_START="wm:spinner:start",Tn.WM_SPINNER_STOP="wm:spinner:stop",Tn.WM_SETTINGS_HIDE="wm:settings:hide",Tn.WM_SETTINGS_OPTIONS_CHANGED="wm:settings:options:changed",Tn.WM_SETTINGS_LEVEL_SELECTED="wm:settings:level:selected",Tn.WM_LEVELSELECTOR_READY="wm:levelselector:ready",Tn.WM_AUDIOSELECTOR_READY="wm:audioselector:ready",Tn.STREAMSENSE_READY="streamsense:ready",Tn.WM_SUBTITLE_CHANGED="wm:subtitle:changed",Tn.WM_SUBTITLE_CONTENT_CHANGED="wm:subtitle:content:changed",Tn.WM_SUBTITLE_AVAILABLE="wm:subtitle:available",Tn.WM_AUDIO_CHANGED="wm:audio:changed",Tn.WM_AUDIO_AVAILABLE="wm:audio:available",Tn.WM_WROOM_WAITING="wm:waiting:wroom",Tn.WM_PLAYBACK_CAN_PLAY="wm:playback:canplay",Tn.WM_PLAYBACK_WILL_PLAY="wm:playback:willplay",Tn.WM_PLAYBACK_BUILT="wm:playback:built",Tn.WM_PIP_ADDED="wm:pip:added",Tn.WM_PIP_DISCARDED="wm:pip:discarded",Tn.WM_MASTER_ADDED="wm:master:added",Tn.WM_MASTER_CHANGED="wm:master:changed",Tn.WM_PIPTOMASTER="wm:piptomaster",Tn.WM_MASTERTOPIP="wm:mastertopip",Tn.WM_STATS_REPORTED="wm:stats:reported",Tn.WM_LOCATION_AVAILABLE="wm:location:available",Tn.WM_GA_UNTRACKED_EVENT="wm:ga:untracked:event",Tn.WILL_CHANGE_SOURCE="willChangeSource",Tn.WILL_SELECT_FALLBACK_SOURCE="will:select:fallback:source",Tn.FALLBACK_SOURCE_SELECTED="fallback:source:selected",Tn.WILL_RENEW_RESOURCE="willRenewResource",Tn.WM_BITRATE_CAP="wm:bitrate:cap",Tn.PLAYER_PIP_ADDED="player:pip:added",Tn.PLAYER_PIP_DISCARDED="player:pip:discarded",Tn.PLAYER_MASTER_ADDED="player:master:added",Tn.PLAYER_MASTER_CHANGED="player:master:changed",Tn.PLAYER_PIPTOMASTER="player:piptomaster",Tn.PLAYER_CAN_PLAY="player:canplay",Tn.WILL_SHOW_MODAL_ELEMENT="will:show:mediacontrol:element:modal",Tn.DID_HIDE_MODAL_ELEMENT="did:hide:mediacontrol:element:modal",Tn.MEDIACONTROL_MODAL_SHOW="mediacontrol:showmodal",Tn.MEDIACONTROL_MODAL_HIDE="mediacontrol:hidemodal",Tn.MEDIACONTROL_KEEPVISIBLE="mediacontrol:keepvisible",Tn.MEDIACONTROL_ITEMCLICKED="mediacontrol:itemclicked",Tn.MEDIACONTROL_DOUBLE_TAP="mediacontrol:doubletap",Tn.MEDIACONTROL_KEYDOWN="mediacontrol:keydown",Tn.WILL_QUICK_SEEK="will:quickseek",Tn.WILL_SHOW_QUICK_SEEK_HINT="will:show:quick:seek:hint",Tn.WILL_HIDE_QUICK_SEEK_HINT="will:hide:quick:seek:hint",Tn.PLAYER_MEDIACONTROL_SHOW="player:mediacontrol:show",Tn.PLAYER_MEDIACONTROL_HIDE="player:mediacontrol:hide",Tn.SKIP_BUTTON_SHOW="skip:button:show",Tn.SKIP_BUTTON_HIDE="skip:button:hide",Tn.SKIP_BUTTON_CLICKED="skip:button:clicked",Tn.STICKY_MODE_ENABLED="sticky:mode:enabled",Tn.STICKY_MODE_DISABLED="sticky:mode:disabled",Tn.BACK_BUTTON_CLICKED="back:button:clicked",Tn.TAP_TO_UNMUTE_CLICKED="taptounmute:clicked",Tn.TAP_TO_UNMUTE_SHOW="taptounmute:show",Tn.WILL_AUTO_SKIP_RECAP="will:auto:skip:recap",Tn.START_DRAGGING_SEEKBAR="start:dragging:seekbar",Tn.STOP_DRAGGING_SEEKBAR="stop:dragging:seekbar",Tn.SIMULCAST_PING="simulcastPing",Tn.SHOW_HEADER_REQUESTED="show:header:requested",Tn.WILL_SHOW_HEADER="will:show:header",Tn.DID_SHOW_HEADER="did:show:header",Tn.CLOSE_HEADER_REQUESTED="close:header:requested",Tn.WILL_CLOSE_HEADER="will:close:header",Tn.DID_CLOSE_HEADER="did:close:header",Tn.WILL_SHOW_DRAWER="will:show:drawer",Tn.DID_SHOW_DRAWER="did:show:drawer",Tn.DID_SHOW_DRAWER_HINT="did:show:drawer:hint",Tn.WILL_HIDE_DRAWER="will:hide:drawer",Tn.DID_HIDE_DRAWER="did:hide:drawer",Tn.DID_HIDE_DRAWER_HINT="did:hide:drawer:hint",Tn.HIDE_DRAWER_REQUESTED="hide:drawer:requested",Tn.SHOW_DRAWER_REQUESTED="show:drawer:requested",Tn.DRAWER_HAS_PLACEHOLDER="drawer:has:placeholder",Tn.SHOW_HEADER_REQUESTED="show:header:requested",Tn.SYNC_DRAWER_STATE_REQUEST="sync:drawer:state:request",Tn.SYNC_DRAWER_STATE_RESPONSE="sync:drawer:state:response",Tn.DID_SHOW_OVERLAY="did:show:overlay",Tn.DID_HIDE_OVERLAY="did:hide:overlay",Tn.WILL_RESTART_PLAYBACK="will:restart:playback",Tn.DID_RESTART_PLAYBACK="did:restart:playback",Tn.WATCH_SESSION_START="watchsession:start",Tn.WATCH_SESSION_END="watchsession:end",Tn.LANGUAGE_MENU_WILL_OPEN="language:menu:will:open",Tn.LANGUAGE_MENU_WILL_CLOSE="language:menu:will:close",Tn.WILL_SEND_ENVIRONMENT_REPORT="will:send:environment:report",Tn.DID_SEND_ENVIRONMENT_REPORT="did:send:environment:report",Tn.ENVIRONMENT_REPORT_ERROR="error:environment:report",Tn.ACTING_DRAWER_FOCUSED="acting:drawer:focused",Tn.ACTING_DRAWER_ENABLED="acting:drawer:enabled",Tn.ACTING_DRAWER_DISABLED="acting:drawer:disabled";var An=window.WM&&window.WM.Settings||{},kn={hlsMinimumDvrSize:120,playback:{controls:!0,preload:"none",playInline:!0,recycleVideo:Q.isMobile},allowLocation:!1,disableVideoTagContextMenu:!0,maxQualityLevel:"max",skipWaitingRoom:!1,playerExperiments:An.PlayerExperiments||{}},_n=bn.session,Sn=function(e){l(i,e);var t=p(i);function i(){return r(this,i),t.apply(this,arguments)}return o(i,[{key:"eventsMapping",get:function(){return Object.assign(g(u(i.prototype),"eventsMapping",this),{onCanPlay:Tn.PLAYER_CAN_PLAY})}},{key:"defaultOptions",get:function(){return kn}},{key:"_addContainerEventListeners",value:function(){g(u(i.prototype),"_addContainerEventListeners",this).call(this);var e=this.core.getCurrentPlayback();this.listenToOnce(e,Tn.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(e,Tn.WM_PLAYBACK_CAN_PLAY,this.onCanPlay)}},{key:"onCanPlay",value:function(){this.trigger(Tn.PLAYER_CAN_PLAY)}},{key:"onResourceReady",value:function(e){if(this.options.onAuthorized){var t=e&&e.selectedResource&&e.selectedResource.hashData;t&&this.options.onAuthorized(t)}}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.core.createError(e)}},{key:"_onError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.level===Ge.Levels.FATAL){var r=n(n({},t),{},{videoSessionId:_n.getVideoSessionId(this.options.playerId)});g(u(i.prototype),"_onError",this).call(this,r),this.options.onError&&this.options.onError(r),this.container&&setTimeout((function(){e.container.disableMediaControl(),e.container.stop(),e.container.destroy()}))}}},{key:"version",value:function(){return i.version}},{key:"allVersions",value:function(){return i.allVersions}},{key:"resize",value:function(e){Y(this.element).css({width:e.width,height:e.height}),this.core&&g(u(i.prototype),"resize",this).call(this,e)}}],[{key:"version",get:function(){return"1.38.1"}},{key:"allVersions",get:function(){return{Player:i.version,Clappr:St.version}}}]),i}(St.Player);if(!window.console){window.console={log:function(){}}}St.Log.setLevel(St.Log.LEVEL_WARN);var wn=window.WM&&window.WM.Settings||{},Cn=wn&&wn.Domains||[],In=bn.DOM.isIframe,Dn=function(e){l(i,e);var t=p(i);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,i);var a=n(n({},kn),e);a.env=Pt.get(a.env,a.httpOnly,a.customEnv),Ot.overrides=a.overrides||{};var o=!1,s=Pt.isLocalhost&&o,l=!Pt.isGloboDomain,u=Q.isSafari||Q.isiOS||Q.isSmartTvEnvironment,c=Q.isMobile&&(In()||a.isIFrame),d=window.location&&"https:"!==window.location.protocol;return Q.preventUsingCookies=(l||u||c||d)&&!s,t.call(this,a)}return o(i,[{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"attachTo",value:function(e){Y(e).html(""),this.element=e,this.options.parentElement=e,this.options.customStyle&&this._renderCustomStyles(e,this.options.customStyle),this.core&&this.core.destroy(),g(u(i.prototype),"attachTo",this).call(this,e),this.core.$el.attr("id","wp3-player-".concat(this.core.options.playerId)),this.core.$el.addClass("clappr-player")}},{key:"_renderCustomStyles",value:function(e,t){var n=this;Object.values(t).forEach((function(t){var i=En.getStyleFrom(t,{playerId:n.options.playerId});Y(e).append(i)}))}}]),i}(Sn);Q.supportsFakeLocation=/puffin/i.test(navigator.userAgent),Dn.isAllowedDomain=function(e){return!wn.Domains||Cn.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||St;var Rn="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function xn(){throw new Error("setTimeout has not been defined")}function Ln(){throw new Error("clearTimeout has not been defined")}var Pn=xn,On=Ln;function Mn(e){if(Pn===setTimeout)return setTimeout(e,0);if((Pn===xn||!Pn)&&setTimeout)return Pn=setTimeout,setTimeout(e,0);try{return Pn(e,0)}catch(t){try{return Pn.call(null,e,0)}catch(t){return Pn.call(this,e,0)}}}"function"==typeof Rn.setTimeout&&(Pn=setTimeout),"function"==typeof Rn.clearTimeout&&(On=clearTimeout);var Nn,Bn=[],Un=!1,Fn=-1;function Vn(){Un&&Nn&&(Un=!1,Nn.length?Bn=Nn.concat(Bn):Fn=-1,Bn.length&&Hn())}function Hn(){if(!Un){var e=Mn(Vn);Un=!0;for(var t=Bn.length;t;){for(Nn=Bn,Bn=[];++Fn<t;)Nn&&Nn[Fn].run();Fn=-1,t=Bn.length}Nn=null,Un=!1,function(e){if(On===clearTimeout)return clearTimeout(e);if((On===Ln||!On)&&clearTimeout)return On=clearTimeout,clearTimeout(e);try{On(e)}catch(t){try{return On.call(null,e)}catch(t){return On.call(this,e)}}}(e)}}function jn(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Bn.push(new Kn(e,t)),1!==Bn.length||Un||Mn(Hn)}function Kn(e,t){this.fun=e,this.array=t}Kn.prototype.run=function(){this.fun.apply(null,this.array)};var Gn=Rn.performance||{};Gn.now||Gn.mozNow||Gn.msNow||Gn.oNow||Gn.webkitNow,De.register("PLAYBACK_METADATA_TRACK_CUE_CHANGE");var Wn=function(e){l(n,e);var t=p(n);function n(){var e;r(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._minDvrSize=e.isValidMinimumDVRSizeConfig?e.minimumDVRSizeConfig:60,e.onAddTrack=e.onAddTrack.bind(d(e)),e}return o(n,[{key:"name",get:function(){return"html5"}},{key:"isLive",get:function(){return this.getPlaybackType()===qe.LIVE}},{key:"dvrEnabled",get:function(){return this.getDuration()>=this._minDvrSize&&this.isLive}},{key:"minimumDVRSizeConfig",get:function(){return this.options.playback&&this.options.playback.minimumDvrSize}},{key:"isValidMinimumDVRSizeConfig",get:function(){return void 0!==this.minimumDVRSizeConfig&&"number"==typeof this.minimumDVRSizeConfig}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"_updateDvr",value:function(e){this.trigger(De.PLAYBACK_DVR,e),this.trigger(De.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){var t=e;e<0&&(_e.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(e<this.getDuration()-3),t+=this.el.seekable.start(0),this.el.currentTime=t}},{key:"getDuration",value:function(){var e=this;if(this.isLive)try{return this.el.seekable.end(0)-this.el.seekable.start(0)}catch(t){setTimeout((function(){return e._updateSettings()}),1e3)}return this.el.duration}},{key:"_onTimeUpdate",value:function(){var e=this.isLive?this.getDuration():this.el.duration;this.trigger(De.PLAYBACK_TIMEUPDATE,{current:this.el.currentTime,total:e},this.name)}},{key:"onAddTrack",value:function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",(function(){var e,i=E(n.activeCues);try{for(i.s();!(e=i.n()).done;){var r=e.value,a=s({},r.value.key,r.value.data);t.trigger(De.Custom.PLAYBACK_METADATA_TRACK_CUE_CHANGE,a)}}catch(e){i.e(e)}finally{i.f()}})))}},{key:"destroy",value:function(){this.el.textTracks.removeEventListener("addtrack",this.onAddTrack),g(u(n.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return g(u(n.prototype),"render",this).call(this),this.el.textTracks.addEventListener("addtrack",this.onAddTrack),this}}]),n}(pt),zn=/{{deviceId}}/g,Yn=function(e,t){return(t?e.replace("https://","http://"):e).replace(zn,"ZDY4NDM5MDgtMzQ4Mi0zZGU5LThlZDQtYjRiNWM5ZjBmOWU5")},qn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.drm||{},i=e.selectedResource.contentProtection,r={};return r[n]=Yn(i.server,t),{shakaConfiguration:{drm:{servers:{"com.microsoft.playready":r.playready||"","com.widevine.alpha":r.widevine||""}}},fairplay:{server:r.fairplay||"",certificate:i&&i.cert},html5TvsPlayback:r.playready&&{drm:{licenseServerURL:r.playready}},licenseServer:r}},$n=function(e,t,n){return t.loader.playbackPlugins.find((function(t){return t.canPlay(e.toString(),"",n)}))},Xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=this,a=!Q.isChromecast&&t&&t.url,o=e||a||i,s=this.video&&this.video.encrypted,l=Q.isiOS&&!s&&Wn.canPlay(o.toString(),"",s),u=l?Wn:$n(o,r.options,s),c=t&&t.contentProtection,d=s&&c?qn(this.video,r.options.httpOnly):{},h=d.shakaConfiguration&&d.shakaConfiguration.drm||{},p=r.options.shakaConfiguration&&r.options.shakaConfiguration.drm||{},f={drm:n(n({},h),p)},g=n(n(n({},r.options),d),{},{shakaConfiguration:n(n(n({},r.options.shakaConfiguration||{}),d.shakaConfiguration||{}),f),autoPlay:!1,isLivePlayback:"live"===r.getPlaybackType(),src:o});return new u(g,r.i18n,r.playerError)},Qn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t.customErrors?t.customErrors:en,a="function"==typeof t.onUnauthorized;return e.code===r.NOT_FOUND.code||"Not found"===e.message?r.NOT_FOUND:e.code===r.SUBSCRIBERS_ONLY.code?(a&&i&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),i.rawData),r.SUBSCRIBERS_ONLY):e.code===r.AUTH_REQUIRED.code?(a&&i&&t.onUnauthorized(Object.assign(e,{fromPlayer3:!0}),i.rawData),r.AUTH_REQUIRED):e.code===r.GEO_BLOCKED.code?r.GEO_BLOCKED:e.code===r.SIMULTANEOUS_ACCESS.code?r.SIMULTANEOUS_ACCESS:e.code===r.DEVICE_NOT_SUPPORTED.code?r.DEVICE_NOT_SUPPORTED:e.code===r.GEOFENCING.code||400===e.http_status_code&&"SRF"===e.code?r.GEOFENCING:e.code===r.TIMESTAMP_ERROR.code?n(n({},r.TIMESTAMP_ERROR),{},{description:"".concat(r.TIMESTAMP_ERROR.description,", ts: ").concat(Math.trunc(Ft()/1e3))}):e.code===r.LOCATION_UNAVAILABLE.code?r.LOCATION_UNAVAILABLE:e.code===r.RESTRICTED_CONTENT.code?r.RESTRICTED_CONTENT:e.code===r.NOT_ALLOWED_DOMAIN.code?r.NOT_ALLOWED_DOMAIN:e.code===r.UNSUPPORTED_BROWSER.code?r.UNSUPPORTED_BROWSER:e.code===r.PLAYER_NOT_RECOGNIZED.code?r.PLAYER_NOT_RECOGNIZED:r.DEFAULT_ERROR},Zn=St.Log.getInstance();De.register("PLAYBACK_AUTHORIZED");var Jn=function(e){l(a,e);var t=p(a);function a(){var e;r(this,a);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._isReady=!1,e.bindEvents(),e.$el.css("height","100%"),e.settings=e.defaultSettings,e.options.swfBasePath=e.options.baseUrl,e.options.startFromBitrate=4e5,e.currentVolume=null,e.currentTime=0,e.duration=0,e.isRenewingResource=!1,e.skipWaitingGlobals=!1,e.actionsMetadata={},e.globalsManager=new qt,e.setupSession(),e}return o(a,[{key:"name",get:function(){return"id_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"attributes",get:function(){return{class:"id-playback","data-id-playback":""}}},{key:"srcUrl",get:function(){var e=this.playback&&this.playback.options&&this.playback.options.src,t=this.playback&&this.playback._src;return e||t||this.options.src}},{key:"blackResourceUrl",get:function(){return Q.isChromecast?this.options.env.blackVideoUrl:Q.isiOS||Q.isSafari||!this.video.encrypted?this.options.env.blackVideoStreamingUrl:this.options.env.blackDashUrl}},{key:"src",get:function(){return this.options.src}},{key:"selectedResource",get:function(){return this.video&&this.video.selectedResource}},{key:"isEncrypted",get:function(){return this.video&&this.video.encrypted}},{key:"isReady",get:function(){return this._isReady}},{key:"defaultSettings",get:function(){return{seekEnabled:!0}}},{key:"dvrEnabled",get:function(){return!!this.playback&&!!this.playback.dvrEnabled}},{key:"levels",get:function(){return this.playback.levels}},{key:"buffering",get:function(){return this.playback&&this.playback.buffering}},{key:"videoEl",get:function(){return this.playback&&this.playback.el}},{key:"innerPlaybackName",get:function(){return this.playback&&this.playback.name||""}},{key:"isLive",get:function(){return this.getPlaybackType()===qe.LIVE}},{key:"liveInitialPosition",get:function(){return gn(this.playback,this.options.liveStartTime)}},{key:"useSingleAudioUrls",get:function(){return Q.isSmartTvEnvironment}},{key:"audioTracks",get:function(){var e,t;return this.useSingleAudioUrls?(null===(e=this.selectedResource)||void 0===e||null===(t=e.audios)||void 0===t?void 0:t.audioTracksForSingleAudioUrls)||[]:this.playback&&this.playback.audioTracks||[]}},{key:"currentAudioTrack",get:function(){return this.currentAudio}},{key:"bandwidthEstimate",get:function(){return this.playback&&this.playback.bandwidthEstimate}},{key:"bindEvents",value:function(){this.on(Tn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.on(Tn.WM_VIDEO_METADATA_ERROR,this.onVideoMetadataError),this.on(Tn.WM_RESOURCE_READY,this.onResourceReady),this.on(Tn.WM_RESOURCE_ERROR,this.onResourceLoadError),this.on(Tn.WM_PLAYBACK_WILL_PLAY,this.onBeforePlay),this.on(Tn.DID_RESTART_PLAYBACK,this.onPlaybackRestarted),this.on(Tn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected)}},{key:"onPlaybackRestarted",value:function(){this.isRestarting=!1}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trigger(Tn.WM_PLAY_REQUESTED),this.actionsMetadata.playEvent=t,this.isRestarting&&this.trigger(Tn.DID_RESTART_PLAYBACK),this.canRequestPlay()?(this.loadingResource=!0,setTimeout((function(){return e.trigger(Tn.WM_PLAY_REQUESTED_READY,e.video)}))):this.checkingAutoplayPermission?this.isStopped?this.onBeforePlay():this.isPaused?this.playWhenReady():Zn.debug(this.name,"Call to play was ignored"):this.startAutoPlayCheck({autoPlay:!0})}},{key:"canRequestPlay",value:function(){var e=this.waitToPlay()||this.playbackError||this.isPlaying(),t=this.video&&!this._resourceReady&&!this.loadingResource,n=cn.isAvailable(this.options.mute)||this.mutedAutoplay||Q.isSmartTvEnvironment;return!e&&t&&n}},{key:"playWhenReady",value:function(){var e=this;this.isReady?setTimeout((function(){return e.playback.play()})):(this.listenToOnce(this,Tn.WM_PLAYBACK_WILL_PLAY,this.playWhenReady),this.prepareInnerPlaybackToPlay())}},{key:"onBeforePlay",value:function(){!this.isRestarting&&this.disablePlayWhenReady||this.playWhenReady()}},{key:"consent",value:function(){this.playback.consent(),cn.consent(),this.mutedAutoplay=!1}},{key:"waitToPlay",value:function(){var e=this,t=!0,n=!this.globalsManager.ready(),i=!(Q.isSmartTvEnvironment||this.video&&this.playback);return n&&!this.skipWaitingGlobals?(this.globalsManager.isAvailable().then((function(){return e.play()}),(function(){return e.play()})),this.skipWaitingGlobals=!0):i?this.listenToOnce(this,Tn.WM_VIDEO_METADATA_LOADED,this.play):t=!1,t}},{key:"isPlaying",value:function(){return!!this.playback&&this.playback.isPlaying()}},{key:"setInitialTime",value:function(e){var t=this;Q.isChromecast||Q.isiOS||!this.isPlaying()?this.listenToOnce(this.playback,De.PLAYBACK_PLAY,(function(){return t.seek(e)})):this.seek(e)}},{key:"getDuration",value:function(){return this.playback&&this.playback.getDuration()}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.stopEvent=e,this.stopAndClearPlayback(),this.playback&&this.trigger(De.PLAYBACK_STOP,this.name,this.actionsMetadata.stopEvent)}},{key:"stopAndClearPlayback",value:function(){this.playback&&(this.playback.stop(),this.currentTime=0)}},{key:"mute",value:function(){this.playback&&this.playback.mute()}},{key:"unmute",value:function(){this.playback&&this.playback.unmute()}},{key:"volume",value:function(e){var t=this;this.playback&&(this.playback.isReady?(this.playback.volume(e),this.currentVolume=e):this.listenToOnce(this.playback,De.PLAYBACK_READY,(function(){return t.volume(e)})))}},{key:"getVolume",value:function(){return this.currentVolume}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.actionsMetadata.pauseEvent=e,this.playback&&this.playback.pause()}},{key:"switchAudioTrack",value:function(e){if(this.useSingleAudioUrls){var t=this.audioTracks.find((function(t){return t.id===e}));if(!t||!this.currentAudioTrack||t.id===this.currentAudioTrack.id)return;this.currentAudio=t,this.load(t.url),this.trigger(De.PLAYBACK_AUDIO_CHANGED,t)}else this.playback&&this.playback.switchAudioTrack(e)}},{key:"getInitialAudioTrack",value:function(){var e=this.options.defaultAudio||{},t=e.language,n=e.role,i=this.findAudioTrack(t,n),r=this.findAudioTrack(t),a=this.findAudioTrack("por"),o=m(this.audioTracks,1)[0];return i||r||a||o}},{key:"findAudioTrack",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.audioTracks.find((function(n){return n.keys.includes(e)&&n.role===t}))}},{key:"seek",value:function(e){var t=this.playback&&this.playback.getCurrentTime(),n=Math.round(t)!==Math.round(e);this.playback&&n&&this.playback.seek(e)}},{key:"getLastProgramDate",value:function(){return"hls"===this.playback.name?this.playback.getLastProgramDate():-1}},{key:"getStartTimeOffset",value:function(){return this.playback&&"function"==typeof this.playback.getStartTimeOffset?this.playback.getStartTimeOffset():0}},{key:"isPip",value:function(e){this.onPip=e}},{key:"destroy",value:function(){this.playback&&(this.stopListening(this.playback),this.playback.stop(),this.playback.destroy(),this.playback=null),this.reportID&&clearInterval(this.reportID),this.$el.remove()}},{key:"onMetadataLoaded",value:function(e){if(this.video=e,this.validateRestrictedContent(),Q.isSmartTvEnvironment)return this.options.autoPlay&&this.startAutoPlayCheck();this.setPlaybackConfig(),this.initInnerPlayback()}},{key:"setPlaybackConfig",value:function(){var e,t,n,i;null===(e=this.options.playback)||void 0===e||null===(t=e.setHLSJSConfig)||void 0===t||t.call(e,this.options,this),null===(n=this.options.playback)||void 0===n||null===(i=n.setShakaConfig)||void 0===i||i.call(n,this.options,this)}},{key:"validateRestrictedContent",value:function(){this.video.adult&&!this.options.allowRestrictedContent&&this.onError(en.RESTRICTED_CONTENT)}},{key:"onPlaybackReady",value:function(){var e=this;this.playback.isReady?this.ready():this.playback.once(De.PLAYBACK_READY,(function(){return e.ready()}))}},{key:"onVideoMetadataError",value:function(e){this.onError(e,en.PLAYLIST_LOAD_ERROR)}},{key:"onResourceLoadError",value:function(e){var t=n(n({},en.RESOURCE_LOAD_ERROR),{},{description:"".concat(en.RESOURCE_LOAD_ERROR.description," ").concat(e.message||It(e)),raw:e});this.onError(e,t)}},{key:"onError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Zn.warn(this.name,"id playback error:",e),this.playbackError=Qn(e,this.options,this.video);var n=this.playbackError.code===en.DEFAULT_ERROR.code,i=n&&t;i&&(this.playbackError=t);var r={useCodePrefix:!1};this.trigger(De.PLAYBACK_ERROR,this.createError(this.playbackError,r))}},{key:"onResourceReady",value:function(e){this.video=e,this._resourceReady=!0,this.loadingResource=!1,Q.isSmartTvEnvironment&&(this.initInnerPlayback(),this.configureSmartTvResourceParams()),this.useSingleAudioUrls&&(this.currentAudio=this.getInitialAudioTrack(),this.trigger(De.PLAYBACK_AUDIO_AVAILABLE,this.audioTracks)),this.setupAuthorized()}},{key:"setupAuthorized",value:function(){!this.disableAuthorized&&this._resourceReady&&this.trigger(De.Custom.PLAYBACK_AUTHORIZED)}},{key:"setupVideoResource",value:function(e){this.setupPlayback(e),this.onPlaybackReady()}},{key:"configureSmartTvResourceParams",value:function(){var e=this.video&&this.video.encrypted,t=this.selectedResource&&this.selectedResource.contentProtection,i=e&&t?qn(this.video,this.options.httpOnly):{};this.playback&&this.playback.configure(n(n({contentProtection:t},i),{},{shakaConfiguration:n(n({},this.options.shakaConfiguration),i.shakaConfiguration)}))}},{key:"getPlaybackType",value:function(){if(this.video)return"Live"===this.video.type||this.video.isLive?"live":"vod"}},{key:"initInnerPlayback",value:function(e){if(this.playback=Xn.call(this,e,this.selectedResource,this.blackResourceUrl),"no_op"===this.playback.name)return this.onError(en.DEVICE_NOT_SUPPORTED);this.bindPlaybackEvents(),this.renderInnerPlayback(),this.onInnerPlaybackReady(),this.options.autoPlay&&this.startAutoPlayCheck()}},{key:"startAutoPlayCheck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoPlay,i=void 0===t?this.options.autoPlay:t;this.checkingAutoplayPermission=!0,cn.onAutoplayAvailable(this.onAutoplaySuccess.bind(this),n(n({},this.options),{},{autoPlay:i}),this.onAutoplayFail.bind(this))}},{key:"onAutoplaySuccess",value:function(){var e=this;cn.canAutoPlayUnmuted?jn((function(){return e.play()})):this.playMuted()}},{key:"onAutoplayFail",value:function(){this.trigger(Tn.WM_AUTOPLAY_BLOCKED)}},{key:"playMuted",value:function(){var e=this;this.mutedAutoplay=!0,this.playback&&(this.playback.volume(0),this.currentVolume=0),jn((function(){return e.play()}))}},{key:"setupPlayback",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedResource.url,n=this.useSingleAudioUrls&&(null===(e=this.currentAudioTrack)||void 0===e?void 0:e.url),i=n||t;if(this.trigger(De.PLAYBACK_STATS_ADD,{midia:this.options.src,url:i}),this.configureInnerPlaybackDRM(),this.updateSrc(i),this._playbackWasBuilt=!0,this.trigger(Tn.WM_PLAYBACK_BUILT),this.options.selectedLevel)try{this.play()}catch(e){Zn.warn(this.name,"play()",e)}else this.onPip&&this.playWhenReady()}},{key:"updateSrc",value:function(e){"function"==typeof this.playback.load&&this.playback.load(e),"object"===i(this.playback.options)&&(this.playback.options.src=e),"function"==typeof this.playback._setupSrc&&this.playback._setupSrc(e),"function"==typeof this.playback.setupSrc&&this.playback.setupSrc(e),this.isLive||this.prepareInnerPlaybackToPlay()}},{key:"prepareInnerPlaybackToPlay",value:function(){var e=this;this.playback&&"function"==typeof this.playback._setup&&!this._innerPlaybackSetupDone&&(this._playbackWasBuilt?this.playback._setup():this.listenToOnce(this,Tn.WM_PLAYBACK_BUILT,(function(){e.playback._setup()})),this._innerPlaybackSetupDone=!0)}},{key:"configureInnerPlaybackDRM",value:function(){if(this.isEncrypted){var e=qn(this.video,this.options.httpOnly);this.playback.options.fairplay=e.fairplay,"dash_shaka_playback"===this.playback.name&&(this.playback._options.shakaConfiguration.drm=n(n({},e.shakaConfiguration.drm),this.playback._options.shakaConfiguration.drm))}}},{key:"recreatePlayback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.playback)return this.initInnerPlayback(e),!0;var n=this.playback.constructor.canPlay(e,"",this.isEncrypted),i="flashls"===this.playback.name||"hls_fairplay_playback"===this.playback.name;return t||!n||i?(this.stopListening(this.playback),this.playback.destroy(),this.initInnerPlayback(e),!0):void 0}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,De.PLAYBACK_SETTINGSUPDATE,this.settingsupdate),this.listenTo(this.playback,De.PLAYBACK_LOADEDMETADATA,this.loadedmetadata),this.listenTo(this.playback,De.PLAYBACK_PLAYBACKSTATE,this.playbackstate),this.listenTo(this.playback,De.PLAYBACK_ERROR,this.onInnerPlaybackError),this.listenTo(this.playback,De.PLAYBACK_PROGRESS,this.progress),this.listenTo(this.playback,De.PLAYBACK_TIMEUPDATE,this.timeupdate),this.listenTo(this.playback,De.PLAYBACK_PLAY_INTENT,this.playintent),this.listenTo(this.playback,De.PLAYBACK_PLAY,this.playing),this.listenTo(this.playback,De.PLAYBACK_PAUSE,this.paused),this.listenTo(this.playback,De.PLAYBACK_SEEK,this.onSeek),this.listenTo(this.playback,De.PLAYBACK_SEEKED,this.onSeeked),this.listenTo(this.playback,De.PLAYBACK_STATS_ADD,this.statsAdd),this.listenTo(this.playback,De.PLAYBACK_DVR,this.onDvr),this.listenTo(this.playback,De.PLAYBACK_BITRATE,this.updateBitrate),this.listenTo(this.playback,De.PLAYBACK_BUFFERFULL,this.bufferfull),this.listenTo(this.playback,De.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.playback,De.PLAYBACK_STOP,this.stopped),this.listenTo(this.playback,De.PLAYBACK_ENDED,this.ended),this.listenTo(this.playback,De.PLAYBACK_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.playback,De.PLAYBACK_AUDIO_AVAILABLE,this.onAudioAvailable)}},{key:"playbackstate",value:function(e){this.trigger(De.PLAYBACK_PLAYBACKSTATE,e)}},{key:"updateBitrate",value:function(e){this.trigger(De.PLAYBACK_BITRATE,e)}},{key:"progress",value:function(e){this.trigger(De.PLAYBACK_PROGRESS,e)}},{key:"statsAdd",value:function(e){this.trigger(De.PLAYBACK_STATS_ADD,e)}},{key:"onDvr",value:function(e){this.trigger(De.PLAYBACK_DVR,e)}},{key:"timeupdate",value:function(e){e.current&&(this.currentTime=e.current,this.duration=e.total,this.trigger(De.PLAYBACK_TIMEUPDATE,n(n({},e),{},{playbackType:this.getPlaybackType()})))}},{key:"ready",value:function(){this._isReady=!0,this.settingsupdate(),this.trigger(Tn.WM_PLAYBACK_WILL_PLAY,this.name)}},{key:"onSeek",value:function(){this.trigger(De.PLAYBACK_SEEK,this.name)}},{key:"onSeeked",value:function(){this.trigger(De.PLAYBACK_SEEKED,this.name),this.isPaused&&this.trigger(De.PLAYBACK_PAUSE,this.name)}},{key:"onBuffering",value:function(){this.trigger(De.PLAYBACK_BUFFERING,this.name)}},{key:"bufferfull",value:function(){this.trigger(De.PLAYBACK_BUFFERFULL,this.name)}},{key:"settingsupdate",value:function(){var e=this.getPlaybackType();e&&("ad"===e?this.settings=this.playback.settings:(this.settings=n({},this.defaultSettings),"vod"!==e&&this.playback&&!this.playback.dvrEnabled&&(this.settings.seekEnabled=!1)),this.trigger(De.PLAYBACK_SETTINGSUPDATE))}},{key:"loadedmetadata",value:function(e){this.trigger(De.PLAYBACK_LOADEDMETADATA,e),this.checkInitialSeek()}},{key:"checkInitialSeek",value:function(){var e=this.isLive?this.options.liveStartTime&&this.liveInitialPosition:this.options.resumeAt||rn();e&&e>0&&this.setInitialTime(e)}},{key:"setupSession",value:function(){sn.startSession(this.options.playerId)}},{key:"stopped",value:function(){this.isStopped=!0}},{key:"ended",value:function(){var e=this;this.stopAndClearPlayback(),this.isStopped=!0,this.trigger(De.PLAYBACK_ENDED,this.name),jn((function(){return e.setupSession()}))}},{key:"onAudioChanged",value:function(e){this.useSingleAudioUrls||(this.currentAudio=e,this.trigger(De.PLAYBACK_AUDIO_CHANGED,e))}},{key:"onAudioAvailable",value:function(e){if(!this.useSingleAudioUrls){this.currentAudio=this.playback.currentAudioTrack,this.trigger(De.PLAYBACK_AUDIO_AVAILABLE,e);var t=this.getInitialAudioTrack();t&&this.playback.switchAudioTrack(t.id)}}},{key:"playintent",value:function(){this.trigger(De.PLAYBACK_PLAY_INTENT,this.name)}},{key:"playing",value:function(){this.isPaused=!1,this.isStopped=!1,this.trigger(De.PLAYBACK_PLAY,this.name,this.actionsMetadata.playEvent)}},{key:"paused",value:function(){this.isPaused=!0,this.trigger(De.PLAYBACK_PAUSE,this.name,this.actionsMetadata.pauseEvent)}},{key:"onInnerPlaybackError",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.selectedResource.hasFallbackSource(),i=null===(e=this.options.playback)||void 0===e?void 0:e.recoverableErros,r=Q.isSmartTvEnvironment||dn(this.playback.name,t,i);if(!this.isRenewingResource)return r&&n?this.useFallbackSource(t):this.renewResource(t);t.clientCode="playback-error",this.trigger(De.PLAYBACK_ERROR,t)}},{key:"useFallbackSource",value:function(e){var t=e.code,n=e.description;Zn.info(this.name,"Will select fallback source, previous: ".concat(this.srcUrl)),this.trigger(Tn.WILL_SELECT_FALLBACK_SOURCE,{recoveredError:JSON.stringify({code:t,description:n}),currentSrc:this.srcUrl}),this.selectedResource.nextFallbackSource(),this.trigger(Tn.WILL_CHANGE_SOURCE,{source:this.selectedResource.url,errorCode:t,errorMessage:n}),this.trigger(Tn.FALLBACK_SOURCE_SELECTED,{currentSrc:this.selectedResource.url}),Zn.info(this.name,"Fallback source selected: ".concat(this.srcUrl))}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc;this.load(t)}},{key:"renewResource",value:function(e){var t=e.code;this.initPlaybackRestart(),this.isRenewingResource=!0,this.trigger(Tn.WILL_RENEW_RESOURCE,{renewReason:t}),this.listenToOnce(this,De.PLAYBACK_PLAY,this.onResourceRenewed)}},{key:"onResourceRenewed",value:function(){this.isRenewingResource=!1}},{key:"onInnerPlaybackReady",value:function(){var e=this;this.trigger(De.PLAYBACK_READY,this.name),jn((function(){return e.trigger(Tn.WM_PLAYBACK_CAN_PLAY,e.name)}))}},{key:"load",value:function(e){this.initPlaybackRestart(),this.setupVideoResource(e)}},{key:"initPlaybackRestart",value:function(){this._isReady=!1,this._innerPlaybackSetupDone=!1,this._playbackWasBuilt=!1,this.resetOptions(),this.isRestarting=!0}},{key:"resetOptions",value:function(){var e={resumeAt:this.currentTime};this.currentAudio&&(e.defaultAudio={language:this.currentAudio.language,role:this.currentAudio.role}),this.currentSubtitle&&(e.defaultSubtitle={language:this.currentSubtitle.language,role:this.currentSubtitle.role}),this.playback&&this.playback.configure($.extend(this.options,e))}},{key:"renderInnerPlayback",value:function(){this.playback.render(),this.playback.el.id=this.cid,this.playback.el.controlsList="nodownload noremoteplayback",this.playback.el.removeAttribute("src"),this.$el.html(this.playback.el);var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=En.getStyleFrom(".clappr-player#wp3-player-0 .id-playback.cover-viewport video {\n  -o-object-fit: cover;\n     object-fit: cover; }\n".toString(),e);this.$el.append(t[0]);var n="cover-viewport";this.options.preventBlackBars?this.$el.addClass(n):this.$el.removeClass(n)}}]),a}(qe);Jn.canPlay=function(e){return yn(e.toString())};var ei=_e.getInstance(),ti=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).options.src&&yn(i.options.src)?(cn.onAutoplayAvailable(i.onAutoPlayAvailable.bind(d(i)),i.options,i.onAutoPlayDisabled.bind(d(i))),i):h(i)}return o(n,[{key:"name",get:function(){return"video_metadata"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"callbackPrefix",get:function(){return"wmPlayerPlaylistLoaded"}},{key:"playback",get:function(){return this.container.playback}},{key:"metadataOptions",get:function(){return{selectedLevel:this.options.selectedLevel,preferredLevel:this.options.preferredLevel,preferredCDN:this.options.cdn,env:this.options.env,profile:this.options.maxQualityLevel,getPlayerType:this.options.overrides&&this.options.overrides.getPlayerType}}},{key:"onAutoPlayAvailable",value:function(){this.listenToOnce(this.playback,Tn.WM_VIDEO_METADATA_REQUEST_COMPLETE,this.parseMetadataRequest)}},{key:"onAutoPlayDisabled",value:function(){var e=this;this.setRequestData(),this.load().then((function(t){return e.playback.trigger(Tn.WM_VIDEO_METADATA_LOADED,t)}),(function(t){return e.playback.trigger(Tn.WM_VIDEO_METADATA_ERROR,t)}))}},{key:"setRequestData",value:function(){var e=this.options.src,t=this.options.env;this.callback=this.callbackPrefix+this.options.playerId+e,this.url=t.playlistTemplate({videoId:e,callback:this.callback})}},{key:"load",value:function(){var e=this;return ei.info(this.name,"loading playlist from:",this.url),Wt.jsonp({callbackName:this.callback,url:this.url}).then((function(t){return e.parsePlaylist(t)}))}},{key:"parsePlaylist",value:function(e){var t=new Y.Deferred;if(this.isValidPlaylist(e)){var n=this.getMetadataModel(e.videos[0],this.metadataOptions);t.resolve(n)}else ei.warn(this.name,"error on playlist: ",e),t.reject(e);return t}},{key:"isValidPlaylist",value:function(e){return!!e&&!!e.videos&&e.videos.length>0}},{key:"getMetadataModel",value:function(e,t){var n=new Ot(e,t);return ei.info(this.name,"video:",n),n}},{key:"parseMetadataRequest",value:function(e){var t=e.metadata,n=this.getMetadataModel(t,this.metadataOptions);this.playback.trigger(Tn.WM_VIDEO_METADATA_LOADED,n)}}]),n}(ot),ni={d:function(e,t){for(var n in t)ni.o(t,n)&&!ni.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},ii={};ni.d(ii,{U:function(){return ri}});var ri=function(e){var t=e.action,n=e.maxAttempts,i=void 0===n?3:n,r=e.baseDelay,a=void 0===r?100:r,o=e.backOffFactor,s=void 0===o?2:o,l=e.retryableErrors,u=void 0===l?null:l,c=0,d=[];return function e(){return t&&"function"==typeof t?t().then((function(e){return{retryResponse:e,retryHistory:d}})).catch((function(t){if(u&&!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.includes(t)}(u,t.statusCode))return Promise.reject({retryError:t,retryHistory:d});var n,r,o;if(d.push((n={},o=t,(r="attempt_".concat(c))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n)),c===i)return Promise.reject({retryError:t,retryHistory:d});c++;var l=Math.pow(s,c-1)*a,h=l*function(e){return!e||Number.isNaN(e)?1:Math.random()+e}(.5);return console.log("Retrying...\nIf the retries fail we delay the next attempt in ".concat(l/1e3," seconds\n Fuzz factor for retry: ").concat(h)),new Promise((function(t){setTimeout((function(){t(e())}),h)}))})):Promise.reject({retryError:"Action must be defined and a function",retryHistory:d})}()},ai=ii.U,oi=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).options.src&&yn(n.options.src)?(cn.onAutoplayAvailable(n.onAutoPlayAvailable.bind(d(n)),n.options,n.onAutoPlayDisabled.bind(d(n))),n):h(n)}return o(i,[{key:"name",get:function(){return"cdn_router"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"playback",get:function(){return this.container.playback}},{key:"retryableErrors",get:function(){return[0,500,501,502,503,504]}},{key:"retrySettings",get:function(){var e=window.WM&&window.WM.Settings||{};return{maxAttempts:e.maxAttempts,baseDelay:e.baseDelay,backOffFactor:e.backOffFactor}}},{key:"onAutoPlayAvailable",value:function(){this.loadMetadataFromRequest=!0,this.loadResource()}},{key:"onAutoPlayDisabled",value:function(){this.loadMetadataFromRequest=!1,this.listenToOnce(this.playback,Tn.WM_PLAY_REQUESTED_READY,this.loadResource)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.playback,Tn.WILL_RENEW_RESOURCE,this.loadResource),this.listenToOnce(this.playback,Tn.WM_PLAY_REQUESTED_READY,(function(){return e.playRequestedReady=!0}))}},{key:"loadResource",value:function(){var e=this;return this.createPayload().then((function(t){return e.getResource(t)})).then((function(t){return e.onResourceLoaded(t)})).catch((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.mountAjaxErrorBody(t);try{i=n(n({},i),JSON.parse(t.xhr.response))}catch(e){}e.onResourceError(i)}))}},{key:"createPayload",value:function(){var e=this;return new Promise((function(t){var i={player_type:Ot.getPlayerType(),video_id:"".concat(e.options.src),quality:e.options.maxQualityLevel||"max",content_protection:Ot.getDRMProtocol(),vsid:sn.getVideoSessionId(e.options.playerId),tz:Ht()};"boolean"==typeof e.options.httpOnly&&(i.ho=e.options.httpOnly),Lt&&(i.ts=Math.trunc(Ft())),e.options.allowLocation?e.getLocation().then((function(e){t(n(n({},i),{},{lat:"".concat(e.latitude),long:"".concat(e.longitude)}))})).catch((function(){return t(i)})):t(i)}))}},{key:"getLocation",value:function(){var e=this;if(Pt.isGloboiDomain&&this.options.lat&&this.options.long){var t={latitude:this.options.lat,longitude:this.options.long};return this.container.trigger(Tn.WM_LOCATION_AVAILABLE,t),new Promise((function(e){return e(t)}))}return new Promise((function(t,n){tn.getLocation().then((function(n){var i={latitude:n.coords.latitude,longitude:n.coords.longitude};e.container.trigger(Tn.WM_LOCATION_AVAILABLE,i),t(i)})).catch((function(t){_e.warn(e.name,"Failed to get location. We make the request to /cdn without passing lat/long params",t),n(t)}))}))}},{key:"getResource",value:function(e){var t=this;return this.sendRequestWithRetry(this.options.env.CDNRouterHost,e).then((function(e){var n=e.retryResponse,i=e.retryHistory;return t.onResourceRequestFinished(i,i.length+1,!1),n})).catch((function(n){var i=n.retryError,r=n.retryHistory;return t.retryableErrors.includes(i.statusCode)?t.sendRequest(t.options.env.CDNRouterFallbackHost,e).then((function(e){return t.onResourceRequestFinished(r,r.length+1,!0),e})).catch((function(e){return t.onResourceRequestFinished([].concat(v(r),[i]),r.length+1,!0),Promise.reject(e)})):(t.onResourceRequestFinished(r,Math.max(r.length,1),!1),Promise.reject(i))}))}},{key:"sendRequest",value:function(e,t){var i=sn.getLockId(this.options.playerId),r={url:e,type:"POST",contentType:"application/json",xhrFields:{withCredentials:!0},data:JSON.stringify(t)},a=this.options.token||jt("GLBID");return a&&(r.headers={Authorization:"Bearer ".concat(a)}),i&&(r.headers=n(n({},r.headers),{},{"X-Session-ID":i})),this.executeAjaxRequest(r)}},{key:"sendRequestWithRetry",value:function(e,t){var n=this,i=this.retrySettings,r={action:function(){return n.sendRequest(e,t)},maxAttempts:i.maxAttempts,baseDelay:i.baseDelay,backOffFactor:i.backOffFactor,retryableErrors:this.retryableErrors};return ai(r)}},{key:"executeAjaxRequest",value:function(e){var t=this;return new Promise((function(i,r){Y.ajax(e).then((function(e,n,r){e.playback_api_version=t.getPlaybackApiVersion(r),i({resource:e})}),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=n({},t),o=a[0],s=a[1],l=a[2],u=o.status;r({xhr:o,status:s,error:l,statusCode:u})}))}))}},{key:"getPlaybackApiVersion",value:function(e){return e.getResponseHeader("x-app-version")}},{key:"mountAjaxErrorBody",value:function(e){var t=e.xhr,n=e.status,i=e.error;return{status:n,error:t&&t.statusText||i,url:t&&t.responseURL||this.options.env.CDNRouterHost,http_status_code:t&&t.status}}},{key:"onResourceLoaded",value:function(e){var t=this,n=e.resource,i=void 0===n?{}:n,r=i.session;r&&sn.storeLockId(this.options.playerId,r);var a=function(){return setTimeout((function(){return t.playback.trigger(Tn.WM_RESOURCE_LOADED,i)}))};this.loadMetadataFromRequest&&!this.playRequestedReady?(this.listenToOnce(this.playback,Tn.WM_PLAY_REQUESTED_READY,a),this.playback.trigger(Tn.WM_VIDEO_METADATA_REQUEST_COMPLETE,i)):a()}},{key:"onResourceError",value:function(e){if("CDN not available"===e.message)return this.playback.trigger(Tn.WM_WROOM_WAITING,e);this.playback.trigger(Tn.WM_RESOURCE_ERROR,e)}},{key:"onResourceRequestFinished",value:function(e,t,n){this.container.trigger(Tn.WM_RESOURCE_REQUEST_STATS,{retries:e,totalAttempts:t,usedFallback:n})}}]),i}(ot),si={por:{label:"Português",language:"pt",languageISO_639_2B:"por",keys:["pt","por"]},eng:{label:"Inglês",language:"en",languageISO_639_2B:"eng",keys:["en","eng"]},ger:{label:"Alemão",language:"de",languageISO_639_2B:"ger",keys:["de","ger"]},spa:{label:"Espanhol",language:"es",languageISO_639_2B:"spa",keys:["es","esp","spa"]},ron:{label:"Romeno",language:"ro",languageISO_639_2B:"ron",keys:["ro","ron"]},cat:{label:"Catalão",language:"ca",languageISO_639_2B:"cat",keys:["ca","cat"]},chi:{label:"Chinês",language:"zh",languageISO_639_2B:"chi",keys:["zh","chi"]},kor:{label:"Coreano",language:"ko",languageISO_639_2B:"kor",keys:["ko","kor"]},dan:{label:"Dinamarquês",language:"da",languageISO_639_2B:"dan",keys:["da","dan"]},fin:{label:"Finlandês",language:"fi",languageISO_639_2B:"fin",keys:["fi","fin"]},fre:{label:"Francês",language:"fr",languageISO_639_2B:"fre",keys:["fr","fre"]},wel:{label:"Galês",language:"cy",languageISO_639_2B:"wel",keys:["cy","wel"]},heb:{label:"Hebraico",language:"he",languageISO_639_2B:"heb",keys:["he","heb"]},dut:{label:"Holandês",language:"nl",languageISO_639_2B:"dut",keys:["nl","dut"]},hin:{label:"Hindi",language:"hi",languageISO_639_2B:"hin",keys:["hi","hin"]},hun:{label:"Húngaro",language:"hu",languageISO_639_2B:"hun",keys:["hu","hun"]},ind:{label:"Indonésio",language:"id",languageISO_639_2B:"ind",keys:["id","ind"]},ita:{label:"Italiano",language:"it",languageISO_639_2B:"ita",keys:["it","ita"]},jpn:{label:"Japonês",language:"ja",languageISO_639_2B:"jpn",keys:["ja","jpn"]},nor:{label:"Norueguês",language:"no",languageISO_639_2B:"nor",keys:["no","nor","nob","nb"]},per:{label:"Persa",language:"fa",languageISO_639_2B:"per",keys:["fa","per"]},rus:{label:"Russo",language:"ru",languageISO_639_2B:"rus",keys:["ru","rus"]},swe:{label:"Sueco",language:"sv",languageISO_639_2B:"swe",keys:["sv","swe"]},tha:{label:"Tailandês",language:"th",languageISO_639_2B:"tha",keys:["th","tha"]},tur:{label:"Turco",language:"tr",languageISO_639_2B:"tur",keys:["tr","tur"]},ara:{label:"Arábico",language:"ar",languageISO_639_2B:"ara",keys:["ar","ara"]},fil:{label:"Filipino",language:"fil",languageISO_639_2B:"fil",keys:["fil"]},ice:{label:"Islandês",language:"is",languageISO_639_2B:"ice",keys:["ice","isl","is"]},geo:{label:"Georgiano",language:"ka",languageISO_639_2B:"geo",keys:["geo","kat","ka"]},gre:{label:"Grego",language:"el",languageISO_639_2B:"gre",keys:["gre","ell","el","grc"]},pol:{label:"Polônes",language:"pl",languageISO_639_2B:"pol",keys:["pol","pl"]},srp:{label:"Sérvio",language:"sr",languageISO_639_2B:"srp",keys:["srp","scc","sr"]},yid:{label:"Iídiche",language:"yi",languageISO_639_2B:"yid",keys:["yid","yi"]}},li=function(){function e(){r(this,e)}return o(e,[{key:"_createResourceModel",value:function(e){var t=e.id,n=e.languageISO_639_2B,i=e.role,r=e.url,a=e.type,o=e.kind,s={id:t,role:i,url:r};return void 0!==a&&(s.type=a),void 0!==o&&(s.kind=o),this._formatLanguageResource(s,n)}},{key:"_formatLanguageResource",value:function(e,t){return n(si[t]?n({},si[t]):{label:t,language:t,languageISO_639_2B:t,keys:[t]},e)}}]),e}(),ui=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this)).audioTracks=[].concat(v(i._formatSingleAudioTracks(null==e?void 0:e.original)),v(i._formatSingleAudioTracks(null==e?void 0:e.description,!0))),i.audioTracksForSingleAudioUrls=i.audioTracks.map((function(e,t){var n=e.language,r=e.role,a=e.url;return i._createResourceModel({id:String(t),kind:r?"description":"main",languageISO_639_2B:n,role:r,url:a})})),i}return o(n,[{key:"_formatSingleAudioTracks",value:function(e,t){return e?Object.keys(e).map((function(n){return{language:n,url:e[n],role:t?"description":""}})):[]}}]),n}(li),ci=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),i=t.call(this),e?(i.sourceText=e||{},i.srt=i._buildSubtitles("srt"),i.webVTT=i._buildSubtitles("webvtt"),i):h(i,[])}return o(n,[{key:"_buildSubtitles",value:function(e){var t=this,n=this._formatSubtitlesCaptions(e),i=n.subtitles,r=n.captions;return[].concat(v(Object.values(i)),v(Object.values(r))).map((function(n,i){return t._createResourceModel({id:String(i),languageISO_639_2B:n.language,role:n.role,url:n.url,type:e})}))}},{key:"_formatSubtitlesCaptions",value:function(e){var t=this;return Object.keys(this.sourceText).reduce((function(n,i){var r,a,o=null===(r=t.sourceText[i].subtitle)||void 0===r?void 0:r[e];o&&(n.subtitles[i]=t._formatBaseResource(i,o,"subtitle"));var s=null===(a=t.sourceText[i].caption)||void 0===a?void 0:a[e];return s&&(n.captions[i]=t._formatBaseResource(i,s,"caption")),n}),{subtitles:{},captions:{}})}},{key:"_formatBaseResource",value:function(e,t,n){return{language:e,url:t,role:n}}}]),n}(li),di=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),t&&t.sources&&t.resource&&(this.options=n,this.sources=t.sources,this.contentProtection=t.resource.content_protection||{},this.signal=t.resource.signal,this.thumbUrl=t.thumbs_preview_base_url,this.session=t.session,this.rawData=t,this.playbackApiVersion=t.playback_api_version,this.daiEnabled=!1,this.options.forceDRMServer&&this.forceDRMServer(),this.setExpirationTime(),this.useSource(this.sources[0]))}return o(e,[{key:"cdn",get:function(){return this.resourceCDN}},{key:"isGloboCDN",get:function(){return"globo"===this.cdn}},{key:"url",get:function(){return this.shouldPlayWithDAI?this.signDAIUrl(this.daiURL):this.originalURL}},{key:"shouldPlayWithDAI",get:function(){return!!(this.dai&&this.daiURL&&this.daiEnabled)}},{key:"forceGloboCDN",get:function(){return Q.isiOS&&!Q.isSafari||Q.isSmartTvEnvironment}},{key:"useFlatURL",get:function(){return Q.preventUsingCookies&&this.isGloboCDN||this.dai}},{key:"subtitles",get:function(){return this.subtitleResource}},{key:"sourceIndex",get:function(){return this.sources.indexOf(this.source)}},{key:"fallbackSourceIndex",get:function(){return this.sourceIndex+1}},{key:"audios",get:function(){return this.audioResource}},{key:"setExpirationTime",value:function(){var e=(new Date).getTime();this.sources.forEach((function(t){t.expirationDate=t.expiration_time&&e+t.expiration_time}))}},{key:"hasFallbackSource",value:function(){if(this.fallbackSourceIndex>=this.sources.length)return!1;var e=(new Date).getTime(),t=this.sources[this.fallbackSourceIndex];return e<(null==t?void 0:t.expirationDate)}},{key:"nextFallbackSource",value:function(){var e=this.sources[this.fallbackSourceIndex];this.hasFallbackSource()&&this.useSource(e)}},{key:"useSource",value:function(e){this.source=e,this.originalURL=e.url,this.resourceCDN=e.cdn,this.resourcePOP=e.pop,this.dai=e.dai,this.assetKey=e.asset_key,this.token=e.token,this.audioResource=new ui(e.audio),this.subtitleResource=new ci(e.text)}},{key:"setDAIURL",value:function(e){this.daiURL=e}},{key:"enableDAI",value:function(){this.daiEnabled=!0}},{key:"disableDAI",value:function(){this.daiEnabled=!1}},{key:"signDAIUrl",value:function(e){var t=Ve.settings.interpolate;Ve.settings.interpolate=/\{\{(.+?)\}\}/g;var n=Ve("".concat(this.originalURL,"{{ queryString }}"))({queryString:{queryString:e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/)[6]||""}.queryString});return Ve.settings.interpolate=t,n}},{key:"forceDRMServer",value:function(){this.contentProtection.server=this.options.forceDRMServer}}]),e}(),hi=o((function e(t){r(this,e),this.id=t.transmission_id,this.affiliate={code:t.affiliate_code},this.signal=t.signal})),pi=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"resource"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"playback",get:function(){return this.container.playback}},{key:"isDAIAvailable",get:function(){return this.options.enableDAIResourceLoader}},{key:"bindEvents",value:function(){this.idPlayback=this.playback,this.listenTo(this.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.playback,Tn.WM_RESOURCE_LOADED,this.onResourceLoaded),this.listenTo(this.playback,Tn.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenTo(this.playback,De.Custom.PLAYBACK_AUTHORIZED,this.onPlaybackAuthorized),this.listenToOnce(this.container,De.Custom.DAI_RESOURCE_LOADED,this.onDAIResourceLoaded)}},{key:"onPlaybackAuthorized",value:function(){if(!this.idPlayback.isRestarting&&this.isDAIAvailable)return this.setupDAIResource();this.setupVideoResource()}},{key:"setupDAIResource",value:function(){if(_e.info(this.name,"Setting up DAI resource. Is DAI resource ready? ".concat(this.DAIResourceReady)),!this.DAIResourceReady)return this.listenToOnce(this.container,De.Custom.DAI_RESOURCE_LOADED,this.setupDAIResource),void this.listenToOnce(this.container,De.Custom.DAI_ERROR,this.onDAIError);this.video.selectedResource.setDAIURL(this.DAIUrlTemplate),this.video.selectedResource.enableDAI(),this.setupVideoResource()}},{key:"onDAIResourceLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;this.DAIResourceReady=!0,this.DAIUrlTemplate=t}},{key:"onDAIError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_e.warn(this.name,"Skipping DAI. Loading original resource. DAI Error: ",e),this.video.selectedResource.disableDAI(),this.setupVideoResource()}},{key:"setupVideoResource",value:function(){this.idPlayback.setupVideoResource(this.video.selectedResource.url)}},{key:"onMetadataLoaded",value:function(e){this.video=e}},{key:"onResourceLoaded",value:function(e){this.resource=new di(e,this.options),this.selectResource()}},{key:"selectResource",value:function(){this.video.selectedResource=this.resource,this.video.isLive&&(this.video.transmission=new hi(this.video.selectedResource.rawData.resource)),this.playback.trigger(Tn.WM_RESOURCE_SELECTED,this.video,this.resource)}},{key:"onResourceSelected",value:function(e){this.video=e,this.resource&&this.resource.cdn&&(this.video.cdn=this.resource.cdn),this.isResourceValid()&&this.playback.trigger(Tn.WM_RESOURCE_READY,this.video)}},{key:"isResourceValid",value:function(){return!Array.isArray(this.resource)||(this.trigger(De.PLAYBACK_ERROR,en.PLAYLIST_LOAD_ERROR),!1)}}]),n}(ot),fi={VideoMetadata:ti,CDNRouter:oi,Resource:pi};it.registerPlayback(Jn),Object.values(fi).forEach((function(e){return it.registerPlugin(e)}));var gi={Video:Ot},mi=function(e){l(n,e);var t=p(n);function n(e,a){var o;r(this,n);var s=(o=t.call(this,e)).core.options.adUnit,l=o.core.options.adCompanion;if(l&&a&&s){var u=("object"===i(l)&&Object.keys(l)||[])[0];o.unitcode="/".concat(a,"/").concat(s),o.companionWidth=+u.split("x")[0],o.companionHeight=+u.split("x")[1],o.companionDiv=l[u],o.embedScript(),o.setup(),o.show()}else o.disable();return o}return o(n,[{key:"name",get:function(){return"dfp_companion"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,Tn.DFP_CONTENT_RESUME,this.hide),this.listenTo(this.core.options.dfp,Tn.DFP_AD_ERROR,this.hide),this.listenTo(this.core.options.dfp,Tn.DFP_CONTENT_ENDED,this.hide)}},{key:"embedScript",value:function(){var e="//www.googletagservices.com/tag/js/gpt.js";if(0===Y('script[src="'.concat(e,'"]')).length){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",e),document.head.appendChild(t)}}},{key:"setup",value:function(){var e=this;window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],googletag.cmd.push((function(){googletag.defineSlot(e.unitcode,[e.companionWidth,e.companionHeight],e.companionDiv).addService(googletag.companionAds()).addService(googletag.pubads()).addService(googletag.content()),googletag.companionAds().setRefreshUnfilledSlots(!0),googletag.pubads().enableVideoAds(),googletag.enableServices()}))}},{key:"show",value:function(){var e=this;googletag.cmd.push((function(){googletag.display(e.companionDiv)}))}},{key:"hide",value:function(){Y("#".concat(this.companionDiv)).hide()}}]),n}(st),vi=function(){function e(){r(this,e)}return o(e,null,[{key:"Full",get:function(){return""}},{key:"Overlay",get:function(){return"dfp-ad-overlay--overlay-mode dfp-ad-overlay--over-media-control"}},{key:"Hidden",get:function(){return"dfp-ad-overlay--poster-mode"}},{key:"HiddenMobile",get:function(){return"dfp-ad-overlay--poster-mobile-mode"}}]),e}(),yi=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).setHiddenMode(),i.dfp||i.disable(),i}return o(n,[{key:"name",get:function(){return"dfp_ad_overlay"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"attributes",get:function(){return{class:"dfp-ad-overlay"}}},{key:"bindEvents",value:function(){this.dfp=this.core.options.dfp,this.listenTo(this.dfp,Tn.DFP_AD_STARTED,this.adStarted),this.listenTo(this.dfp,Tn.DFP_AD_CLOSED,this.setHiddenMode),this.listenTo(this.dfp,Tn.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.dfp,Tn.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.dfp,Tn.DFP_ALL_ADS_COMPLETED,this.adEnded),this.listenTo(this.dfp,Tn.DFP_CONTENT_STARTED,this.setHiddenMode),this.listenTo(this.dfp,Tn.DFP_CONTENT_ENDED,this.setHiddenMode),this.listenTo(this.core,De.CORE_RESIZE,this.updateSize),this.listenToOnce(this.core,De.CORE_READY,this.bindMediaControlPluginsEvents),this.bindMediaControlEvents()}},{key:"bindMediaControlEvents",value:function(){this.unbindMediaControlEvents(),this.listenTo(this.core,De.MEDIACONTROL_SHOW,this.mediaControlShow),this.listenTo(this.core,De.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.removeClass("dfp-ad-overlay--notransition")}},{key:"unbindMediaControlEvents",value:function(){this.stopListening(this.core,De.MEDIACONTROL_SHOW,this.mediaControlShow),this.stopListening(this.core,De.MEDIACONTROL_HIDE,this.mediaControlHide),this.$el.addClass("dfp-ad-overlay--notransition")}},{key:"bindMediaControlPluginsEvents",value:function(){this.listenTo(this.core.mediaControl,De.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,De.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.mediaControlInteractionEnd),this.listenTo(this.core.mediaControl,Tn.MEDIACONTROL_MODAL_SHOW,this.mediaControlModalShow),this.listenTo(this.core.mediaControl,Tn.MEDIACONTROL_MODAL_HIDE,this.mediaControlModalHide),this.listenTo(this.core.mediaControl,Tn.WM_VOLUME_SHOW,this.mediaControlInteractionStart),this.listenTo(this.core.mediaControl,Tn.WM_VOLUME_HIDE,this.mediaControlInteractionEnd)}},{key:"adStarted",value:function(e){var t=e.isLinear();this.setMode(t?vi.Full:vi.Overlay),t&&(this.unbindMediaControlEvents(),this.mediaControlHide()),Q.isMobile&&!t&&this.mediaControlShow()}},{key:"adEnded",value:function(e){this.setHiddenMode(),e&&this.bindMediaControlEvents()}},{key:"setHiddenMode",value:function(){this.setMode(Q.isMobile?vi.HiddenMobile:vi.Hidden)}},{key:"mediaControlShow",value:function(){this.$el.addClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlHide",value:function(){this.$el.removeClass("dfp-ad-overlay--media-control-show"),this.updateSize()}},{key:"mediaControlModalShow",value:function(){this._modalVisible=!0,this.mediaControlInteractionStart()}},{key:"mediaControlModalHide",value:function(){this._modalVisible=!1,this.mediaControlInteractionEnd()}},{key:"mediaControlInteractionStart",value:function(){this._mode==vi.Overlay&&this.$el.removeClass("dfp-ad-overlay--over-media-control")}},{key:"mediaControlInteractionEnd",value:function(){this._modalVisible||this._mode==vi.Overlay&&this.$el.addClass("dfp-ad-overlay--over-media-control")}},{key:"setMode",value:function(e){var t=this;this._mode=e,this.$el.removeClass(vi.Overlay),this.$el.removeClass(vi.Hidden),this.$el.removeClass(vi.HiddenMobile),e&&(this.$el.addClass(e),jn((function(){return t.updateSize()})))}},{key:"updateSize",value:function(){var e=this.$el.width(),t=this.$el.height();this.dfp.adsManager&&e&&t&&this.dfp.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)}},{key:"render",value:function(){return this.$el.append(En.getStyleFrom(".clappr-player#wp3-player-0 .dfp-ad-overlay {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 994;\n  transform: translateY(0);\n  transition: transform 0.3s ease; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--notransition {\n    transition: none !important; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mode {\n    visibility: hidden !important;\n    pointer-events: none; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--poster-mobile-mode {\n    display: none !important; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--overlay-mode {\n    transform: translateY(-20px);\n    height: 80px; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--over-media-control {\n    z-index: 998; }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay--media-control-show {\n    transform: translateY(-80px); }\n  .clappr-player#wp3-player-0 .dfp-ad-overlay video {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%; }\n",{playerId:this.core.options.playerId})[0]),this}}],[{key:"Mode",get:function(){return vi}}]),n}(ze),bi=function(e){l(n,e);var t=p(n);function n(e,i){var a;return r(this,n),(a=t.call(this,e)).dfp=i,a.settings=a.defaultSettings,a.bindEvents(),a}return o(n,[{key:"name",get:function(){return"dfp_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"tagName",get:function(){return"video"}},{key:"attributes",get:function(){return{"data-dfp-playback":""}}},{key:"adsManager",get:function(){return this.dfp&&this.dfp.adsManager}},{key:"defaultSettings",get:function(){return{seekEnabled:!1}}},{key:"ready",value:function(){this.trigger(De.PLAYBACK_READY,this.name)}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.dfp,Tn.DFP_AD_LOADED,(function(t){return e.duration=t&&t.getDuration()})),this.listenTo(this,De.PLAYBACK_PLAY,(function(){return e.playing=!0})),this.listenTo(this,De.PLAYBACK_PAUSE,(function(){return e.playing=!1}))}},{key:"render",value:function(){return this}},{key:"getPlaybackType",value:function(){return"ad"}},{key:"getDuration",value:function(){return this.duration}},{key:"getRemainingTime",value:function(){var e;return null===(e=this.adsManager)||void 0===e?void 0:e.getRemainingTime()}},{key:"getCurrentTime",value:function(){var e=this.getRemainingTime(),t=this.getDuration();return e>=0?t-e:0}},{key:"play",value:function(){this.adsManager&&(this.adsManager.resume(),!this.updateTimer&&this.startUpdateTimer())}},{key:"pause",value:function(){this.adsManager&&(this.adsManager.pause(),this.stopUpdateTimer())}},{key:"stop",value:function(){this.stopUpdateTimer(),g(u(n.prototype),"stop",this).call(this)}},{key:"startUpdateTimer",value:function(){var e=this;this.stopUpdateTimer(),this.updateTimer=setInterval((function(){e.trigger(De.PLAYBACK_TIMEUPDATE,{current:e.getCurrentTime(),total:e.duration,playbackType:e.getPlaybackType()})}),100)}},{key:"stopUpdateTimer",value:function(){clearInterval(this.updateTimer),delete this.updateTimer}},{key:"isPlaying",value:function(){return this.playing}},{key:"destroy",value:function(){this.stopUpdateTimer(),this.stopListening(),g(u(n.prototype),"destroy",this).call(this)}},{key:"volume",value:function(e){this.adsManager&&this.adsManager.setVolume(e/100)}},{key:"getVolume",value:function(){return this.adsManager?this.adsManager.getVolume():this.dfp.container.playback.getVolume()/100}}]),n}(qe),Ei=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).isServedAd=!1,n}return o(i,[{key:"name",get:function(){return"dfp_video_ad"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"videoElement",get:function(){var e=this.container.playback,t=e&&e.playback;return t&&t.el}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Tn.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_SELECTED,this.onResourceSelected),this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container,De.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,De.CONTAINER_ENDED,this.containerEnded),this.listenTo(this.container,De.CONTAINER_STOP,this.containerEnded),this.listenTo(this.container,De.CONTAINER_ERROR,this.containerError),this.listenTo(this.options.dfp,Tn.DFP_AD_LOADED,this.adLoaded),this.listenTo(this.options.dfp,Tn.DFP_CONTENT_PAUSE,this.adBreakStarted),this.listenTo(this.container,Tn.DFP_AD_STARTED,this.onAdStarted),this.listenTo(this.container,Tn.DFP_AD_RESUME,this.onDFPAdResume),this.listenTo(this.options.dfp,Tn.DFP_CONTENT_RESUME,this.adBreakEnded),this.listenTo(this.options.dfp,Tn.DFP_AD_ERROR,this.adError),this.listenTo(this.container,Tn.WM_MASTERTOPIP,this.onPip),this.listenTo(this.container,Tn.WATCH_SESSION_END,this.onSessionEnd)}},{key:"onDFPAdResume",value:function(){this.syncVolumeWithIdPlayback()}},{key:"onSessionEnd",value:function(){this.listenToOnce(this.container.playback,Tn.WM_PLAY_REQUESTED,this.containerPlay)}},{key:"onPlayRequestedReady",value:function(){this.container.playback.disablePlayWhenReady=!this.options.dfp.shouldSkipAd}},{key:"onPip",value:function(){this.stopListening(),this.listenTo(this.container,Tn.WM_PIPTOMASTER,this.bindEvents)}},{key:"onResourceSelected",value:function(){this.hasError=!1}},{key:"onResourceReady",value:function(){var e=this.container.playback.options;e.onPip||(this.adPlayback=new bi(e,this.options.dfp)),this.containerPlay(),this.options.dfp.contentStarted()}},{key:"containerPlay",value:function(){var e=this;this.containerPlaying=!0,this.hasError&&jn((function(){return e.adBreakEnded()}))}},{key:"containerEnded",value:function(){this.options.dfp.contentEnded(),this.stopListening(),this.bindEvents(),this.containerPlaying=!1,this.hasError&&this.adPlayback&&this.adPlayback.stop()}},{key:"containerError",value:function(){this.hasError=!0}},{key:"adError",value:function(){this.hasError=!0,this.adBreakEnded()}},{key:"adLoaded",value:function(e){var t=this,n=e.isLinear();this.options.dfp.podIndex=e.getAdPodInfo().getPodIndex();var i={"-1":function(){_e.info(t.name,"Post-roll loaded"),t.adPlayback&&(t.adPlayback.duration=e.getDuration()),t.postroll=!0},0:function(){return _e.info(t.name,"Pre-roll loaded")},midroll:function(){t.adPlayback&&(t.adPlayback.duration=e.getDuration()),_e.info(t.name,"Mid-roll loaded")}};n?(i[this.options.dfp.podIndex]||i.midroll)():_e.info(this.name,"Overlay loaded")}},{key:"adBreakStarted",value:function(e){this.isServedAd=!0,this.onBreak=!0,this.hasError?this.adBreakEnded():this.container.playback.isPlaying()?this.pauseMainContent(e):this.initAdPlayback(e)}},{key:"onAdStarted",value:function(){this.container.getPlugin("click_to_pause").disable(),this.adPlayback&&this.adPlayback.play(),this.container.settingsUpdate()}},{key:"pauseMainContent",value:function(e){this.listenToOnce(this.container.playback,De.PLAYBACK_PAUSE,this.initAdPlayback.bind(this,e)),this.container.pause()}},{key:"initAdPlayback",value:function(e){var t=this.container.playback.options;this.playback=this.container.playback,this.playback.stopListening(),this.container.stopListening(),this.adPlayback||(this.adPlayback=new bi(t,this.options.dfp),this.adPlayback.duration=e.getDuration()),this.syncVolumeWithIdPlayback(),this.container.trigger(Tn.WILL_SET_AD_PLAYBACK),this.container.playback=this.adPlayback,this.container.trigger(Tn.DID_SET_AD_PLAYBACK,this.container.playback),this.container.bindEvents(),this.adPlayback.ready()}},{key:"adBreakEnded",value:function(){var e=this;this.onBreak&&(this.container.stopListening(),this.playback.bindPlaybackEvents(),this.playback._options=n({},this.adPlayback._options),this.container.playback=this.playback,this.container.playback.volume(100*this.adPlayback.getVolume()),this.container.currentTime=this.playback.currentTime,0===this.options.dfp.podIndex&&this.playback.checkInitialSeek(),this.container.bindEvents()),this.adPlayback&&(this.adPlayback.stop(),this.adPlayback.destroy(),this.adPlayback=null),this.listenToOnce(this.container,De.CONTAINER_PLAY,(function(){return e.container.settingsUpdate()})),this.containerPlaying||this.hasError||this.options.dfp.shouldSkipAd?(!Q.supportsTouchEvents&&this.container.getPlugin("click_to_pause").enable(),jn((function(){return e.container.playback.playWhenReady()}))):this.container.getPlugin("poster").show(),this.onBreak=!1,this.hasError=!1,this.isServedAd=!1}},{key:"syncVolumeWithIdPlayback",value:function(){var e=this.playback.getVolume();null!==e&&this.adPlayback.volume(e)}},{key:"containerTimeUpdate",value:function(e){}}]),i}(ot),Ti=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).core=e,i.$el.on("click",(function(e){e.stopPropagation(),i.mediaControl.trigger(Tn.MEDIACONTROL_ITEMCLICKED)})),i.$el.addClass("media-control-element"),i}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return"center"}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"kibo",get:function(){return this.mediaControl.kibo}},{key:"isSticky",get:function(){return this.el.classList.contains("media-control-element--sticky")}},{key:"applyButtonStyle",value:function(e){this.buttonsColor&&e&&$(e).find("svg path").css("fill",this.buttonsColor)}},{key:"bindKeyAndShow",value:function(e,t){var n=this;this.kibo.down(e,(function(){return n.mediaControl.show(),t()}))}},{key:"triggerWillShowModalElement",value:function(){this.core.trigger(Tn.WILL_SHOW_MODAL_ELEMENT,{name:this.name})}},{key:"triggerDidHideModalElement",value:function(){this.core.trigger(Tn.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"setSticky",value:function(){this.core.trigger(Tn.STICKY_MODE_ENABLED),this.el.classList.add("media-control-element--sticky")}},{key:"resetSticky",value:function(){this.core.trigger(Tn.STICKY_MODE_DISABLED),this.el.classList.remove("media-control-element--sticky")}},{key:"destroy",value:function(){this._mediaControl=null,g(u(n.prototype),"destroy",this).call(this)}}]),n}(ze),Ai=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).core=e,i.message={"-1":"Este anúncio encerra em",0:"O seu vídeo começa em",midroll:"O seu vídeo continua em"},i}return o(n,[{key:"name",get:function(){return"dfp_countdown"}},{key:"template",get:function(){return Ve('<div class="dfp-countdown__text"><%= message %></div>\n<div class="dfp-countdown__time"><%= remainingTime %></div>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"attributes",get:function(){return{class:"dfp-countdown"}}},{key:"bindEvents",value:function(){this.listenTo(this.core.options.dfp,Tn.DFP_AD_STARTED,this.adStarted),this.listenTo(this.core.options.dfp,Tn.DFP_AD_COMPLETED,this.adEnded),this.listenTo(this.core.options.dfp,Tn.DFP_AD_SKIPPED,this.adEnded),this.listenTo(this.core.options.dfp,Tn.DFP_AD_ERROR,this.adEnded),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.adEnded),this.mediaControl&&this.listenTo(this.mediaControl,De.MEDIACONTROL_RENDERED,this.appendToMediaControl)}},{key:"adStarted",value:function(e){e.isLinear()&&(this.playback=this.core.activePlayback,this.renderCountdown(),this.listenTo(this.playback,De.PLAYBACK_TIMEUPDATE,this.updateCountdown),this.$el.removeClass("dfp-countdown--hidden"))}},{key:"adEnded",value:function(){this.stopListening(this.playback,De.PLAYBACK_TIMEUPDATE),this.$el.addClass("dfp-countdown--hidden")}},{key:"renderCountdown",value:function(){var e=En.getStyleFrom('.clappr-player#wp3-player-0 .dfp-countdown {\n  display: none;\n  position: relative;\n  z-index: 998;\n  pointer-events: none;\n  font-size: 13px;\n  line-height: 13px;\n  color: #e5e886;\n  transition: transform 0.3s ease-out; }\n  .clappr-player#wp3-player-0 .dfp-countdown.media-control-element {\n    padding-left: 0;\n    padding-right: 0; }\n  .clappr-player#wp3-player-0 .dfp-countdown__text {\n    display: inline-block;\n    font-family: "opensans-regular", sans-serif; }\n  .clappr-player#wp3-player-0 .dfp-countdown__time {\n    display: inline-block;\n    font-family: "opensans-bold", sans-serif; }\n  .clappr-player#wp3-player-0 .dfp-countdown--hidden {\n    display: none; }\n',{playerId:this.container.options.playerId}),t="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$el.html(this.template({message:this.message[this.core.options.dfp.podIndex]||this.message.midroll,remainingTime:ye.formatTime(t)})),this.$el.append(e[0]),this.$duration=this.$el.find(".dfp-countdown__time"),this.$message=this.$el.find(".dfp-countdown__text"),this.appendToMediaControl()}},{key:"appendToMediaControl",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__left");e[0]&&!this.isRendered&&(e.append(this.el),this.isRendered=!0)}},{key:"updateCountdown",value:function(){var e="function"==typeof this.playback.getRemainingTime?this.playback.getRemainingTime():0;this.$duration.text(ye.formatTime(e)),this.$message.text(this.message[this.core.options.dfp.podIndex]||this.message.midroll)}},{key:"destroy",value:function(){this.stopListening(),g(u(n.prototype),"destroy",this).call(this)}}]),n}(Ti);var ki=Function.prototype,_i=Object.prototype,Si=ki.toString,wi=_i.hasOwnProperty,Ci=Si.call(Object),Ii=_i.toString,Di=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var Ri=function(e){if(!function(e){return!!e&&"object"==typeof e}(e)||"[object Object]"!=Ii.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e))return!1;var t=Di(e);if(null===t)return!0;var n=wi.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Si.call(n)==Ci},xi=function(){function e(){r(this,e)}return o(e,null,[{key:"stringify",value:function(e){return Object.keys(e).reduce((function(t,n){var i=e[n],r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),"")}},{key:"parse",value:function(e){return e.split(/&/).reduce((function(e,t){var n=m(t.split(/=/),2),i=n[0],r=n[1];return e[i]=r,e}),{})}}]),e}(),Li=bn.LocalStorage;function Pi(e){return e?Ri(e)?e:xi.parse(e):{}}function Oi(){var e=Li.loadRaw("nvgpersona13574",JSON.parse),t={};return e&&(t.nvg_gender=e.gender,t.nvg_age=e.age,t.nvg_income=e.income),t}function Mi(){var e=Li.loadRaw("permutive-id"),t=Li.loadRaw("_pdfps",JSON.parse),n={};return e&&t&&(n["permutive-id"]=e,n.permutive=t),n}function Ni(e,t){return n(n({},Pi(e.adCustomData)),t)}var Bi=1/0,Ui=NaN,Fi=4294967295,Vi=/^\s+|\s+$/g,Hi=/^[-+]0x[0-9a-f]+$/i,ji=/^0b[01]+$/i,Ki=/^0o[0-7]+$/i,Gi=parseInt;var Wi=Object.prototype.toString,zi=Math.min;function Yi(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function qi(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==Wi.call(e)}(e))return Ui;if(Yi(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Yi(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Vi,"");var n=ji.test(e);return n||Ki.test(e)?Gi(e.slice(2),n?2:8):Hi.test(e)?Ui:+e}(e))===Bi||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function $i(e){return e}var Xi=function(e,t){if(e=function(e){var t=qi(e),n=t%1;return t==t?n?t-n:t:0}(e),e<1||e>9007199254740991)return[];var n=Fi,i=zi(e,Fi);e-=Fi;for(var r=function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(i,t="function"==typeof t?t:$i);++n<e;)t(n);return r},Qi=bn.embedScript,Zi=bn.DOM,Ji=_e.getInstance(),er=["video/mp4","video/webm","video/x-msvideo","video/x-motion-jpeg","video/mpeg2","video/x-ms-wmv","application/x-mpegURL","application/vnd.apple.mpegurl","video/MP2T"],tr=new Promise((function(e,t){var n,i;!(Q.isSmartTvEnvironment||null!==(n=window.google)&&void 0!==n&&null!==(i=n.ima)&&void 0!==i&&i.settings)?Qi("https://imasdk.googleapis.com/js/sdkloader/ima3.js").then(e,t):e()})),nr=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).isBootstrapReady=!1,n.isAllAdsCompleted=!1,n.isContainerEnded=!1,n.core.options.skipDFP&&Ji.info(n.name,"Ad Skipping is Enabled."),n.attachCorePlugins(),n}return o(i,[{key:"name",get:function(){return"dfp"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"attributes",get:function(){return{class:"dfp"}}},{key:"imaScript",get:function(){return tr}},{key:"dfpAdTagTemplate",get:function(){var e="".concat(this.options.env.protocol,"://pubads.g.doubleclick.net/gampad/ads?sz=1280x720&iu=/<%= adAccountId %>/<%= adUnit %>&cmsid=<%= adCmsId %>&vid=<%= videoId %>&cust_params=<%= customParams %>&ciu_szs=940x360&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=[referrer_url]&description_url=<%= descriptionUrl %>&correlator=[timestamp]");return this.adCreativeProfile&&(e+="&pp=<%= adCreativeProfile %>"),Ve(e)}},{key:"sizes",get:function(){return{playerWidth:this.core.el&&this.core.el.offsetWidth,defaultWidth:640,linearHeight:400,nonLinearHeight:150}}},{key:"shouldSkipAd",get:function(){var e,t,n=this.core.options.skipDFP,i=!(null!==(e=window.google)&&void 0!==e&&null!==(t=e.ima)&&void 0!==t&&t.settings),r=Zi.hasChildElement(this.core.el,".dfp-ad-overlay");return n||i||!this.adUnit||!r}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,De.CORE_OPTIONS_CHANGE,this.configure),this.listenTo(this.core,Tn.DFP_DISABLE,this.disable),this.listenTo(this.core,Tn.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"onTapToUnmuteClicked",value:function(){if(this.adsManager){var e=this.adsManager.getVolume();this.adsManager.setVolume(1),this.adsManager.setVolume(e)}}},{key:"enable",value:function(){this.enabled||(this.dfpAdOverlay&&this.dfpAdOverlay.enable(),this.dfpCountdown&&this.dfpCountdown.enable(),this.dfpVideoAd&&this.dfpVideoAd.enable(),this.adCompanion&&this.adCompanion.enable(),g(u(i.prototype),"enable",this).call(this),this.bindContainerEvents())}},{key:"disable",value:function(){this.enabled&&(this.dfpAdOverlay&&this.dfpAdOverlay.disable(),this.dfpCountdown&&this.dfpCountdown.disable(),this.dfpVideoAd&&this.dfpVideoAd.disable(),this.adCompanion&&this.adCompanion.disable(),g(u(i.prototype),"disable",this).call(this),this.listenToOnce(this.core,Tn.DFP_ENABLE,this.enable))}},{key:"attachCorePlugins",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0,this.core._options=Object.assign(this.core.options,{dfp:this}),this.dfpAdOverlay=new yi(this.core),this.dfpCountdown=new Ai(this.core),this.core.$el.append(this.dfpAdOverlay.el),this.core.addPlugin(this.dfpAdOverlay)}},{key:"attachContainerPlugins",value:function(){this.container&&(this.container._options=Object.assign(this.container.options,{dfp:this}),this.dfpVideoAd=new Ei(this.container),this.container.addPlugin(this.dfpVideoAd))}},{key:"configure",value:function(){this.watchedAds=this.core.options&&this.core.options.watchedAds||0;var e=this.core.getCurrentContainer().options;this.videoId=e&&e.src||e.sources&&e.sources[0],!1!==this.core.options.useStyledNonLinearAds&&(this.core.options.useStyledNonLinearAds=!0),this.container&&(this.stopListening(this.container.playback,Tn.WM_VIDEO_METADATA_LOADED),this.listenTo(this.container.playback,Tn.WM_VIDEO_METADATA_LOADED,this.init))}},{key:"init",value:function(e){var t=this,r=this.core.getCurrentContainer().options;this.adAccountId=r.adAccountId||e.adAccountId||i.DEFAULT_ACCOUNT_ID,this.adCmsId=r.adCmsId||e.adCmsId||i.DEFAULT_CMS_ID,this.descriptionUrl=e.urlForConsumption||i.DEFAULT_DESCRIPTION_URL,this.adCreativeProfile=r.adCreativeProfile,this.error=!1,this.adUnit=r.adUnit||e.adUnit,this.adUnit&&(this.adCustomData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Oi(),r=Mi(t.isSubscriberOnly),a=Pi(e.adCustomData),o=n(n(n({video_subscription:!!t.isSubscriberOnly},i),r),a);return e.adUnit||(o=Ni(t,o)),xi.stringify(o)}(r,e),this.setupCompanion(),this.imaScript.then((function(){return t.bootstrapApi()}),(function(){return t.onAdError({type:"imaLoadError",message:"google.ima not available"})})))}},{key:"triggerContentResume",value:function(){this.trigger(Tn.DFP_CONTENT_RESUME),this.container.trigger(Tn.DFP_CONTENT_RESUME)}},{key:"bootstrapApi",value:function(){this.error=!1,this.destroyIMA(),this.shouldSkipAd||(this.setupIMA(),this.requestAd(),this.isAllAdsCompleted=!1,this.isBootstrapReady=!0)}},{key:"setupIMA",value:function(){if(google.ima.settings.setLocale("pt-br"),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.options.adPublisherProvidedID&&google.ima.settings.setPpid(this.options.adPublisherProvidedID),this.adDisplayContainer||(this.adDisplayContainer=new google.ima.AdDisplayContainer(this.dfpAdOverlay.el,this.dfpVideoAd.videoElement)),this.adsLoader||(this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this),!1)),this.adsRenderingSettings||(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,Q.isChrome&&Q.isMobile&&(this.adsRenderingSettings.mimeTypes=er)),!this.adRequest){var e=Math.min(this.sizes.defaultWidth,this.sizes.playerWidth);this.adsRequest=new google.ima.AdsRequest,this.adsRequest.linearAdSlotWidth=e,this.adsRequest.linearAdSlotHeight=this.sizes.linearHeight,this.adsRequest.nonLinearAdSlotWidth=e,this.adsRequest.nonLinearAdSlotHeight=this.sizes.nonLinearHeight}}},{key:"setupCompanion",value:function(){Object.assign({},this.core.options,{adUnit:this.adUnit,adCustomData:this.adCustomData}),this.adCompanion&&this.adCompanion.stopListening(),this.adCompanion=new mi(this.core,this.adAccountId)}},{key:"destroyIMA",value:function(){this.adsManager&&this.adsManager.destroy(),this.adsLoader&&this.adsLoader.destroy(),this.isAllAdsCompleted||(this.adDisplayContainer&&this.adDisplayContainer.destroy(),this.adDisplayContainer=null),this.adsManager=null,this.adsLoader=null,this.isBootstrapReady=!1}},{key:"destroyVideoAd",value:function(){this.dfpVideoAd&&(this.dfpVideoAd.stopListening(),this.dfpVideoAd.destroy(),this.dfpVideoAd=null)}},{key:"onAdError",value:function(e){if(!this.error){var t=e&&this.getErrorData(e);Ji.warn(this.name,"dfp encountered an error, skipping -",t,e),this.error=!0,this.trigger(Tn.DFP_AD_ERROR,t),this.container.trigger(Tn.DFP_AD_ERROR,t)}}},{key:"getErrorData",value:function(e){var t="function"==typeof e.getError?e.getError():e;if(!t)return{};var n="function"==typeof t.getType?t.getType():t.type||t.o||t,i="function"==typeof t.getErrorCode?t.getErrorCode():"",r="function"==typeof t.getMessage?t.getMessage():t.message||t.l||t;return{type:"".concat(n).concat(i?"-"+i:""),message:r}}},{key:"onAdsManagerLoaded",value:function(e){var t=this;this.adsRenderingSettings.useStyledNonLinearAds=this.core.options.useStyledNonLinearAds,this.adsManager=e.getAdsManager(this.dfpVideoAd.videoElement,this.adsRenderingSettings),this.discardWatchedAds(this.watchedAds),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,(function(e){return t.onAdLog(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_METADATA,(function(e){return t.onAdMetadata(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(e){return t.onContentPauseRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(e){return t.onContentResumeRequested(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,(function(e){return t.onAdStarted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,(function(e){return t.onAdResumed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,(function(e){return t.onAdPaused(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,(function(e){return t.onAdSkipped(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,(function(e){return t.onAdLoaded(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,(function(e){return t.onAdClosed(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,(function(e){return t.onAdCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){return t.onAllAdsCompleted(e)})),this.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,(function(e){return t.onAdClicked(e)})),this.trigger(Tn.DFP_MANAGER_LOADED),this.container.trigger(Tn.DFP_MANAGER_LOADED)}},{key:"onResourceReady",value:function(){this.isContainerEnded=!1,this.shouldSkipAd?this.triggerContentResume():this.startAd()}},{key:"startAd",value:function(){if(this.adsManager)try{this.adsManager.init(this.dfpAdOverlay.$el.width(),this.dfpAdOverlay.$el.height(),google.ima.ViewMode.NORMAL),this.adsManager.start(),this.container.trigger(Tn.DID_START_ADS_MANAGER)}catch(e){this.onAdError({type:"adError",message:e&&e.message})}else this.listenToOnce(this,Tn.DFP_MANAGER_LOADED,this.startAd)}},{key:"discardWatchedAds",value:function(e){var t=this;Xi(e,(function(e){setTimeout((function(){return t.adsManager.discardAdBreak()}),500*e)}))}},{key:"onAdLog",value:function(e){var t=(e.getAdData()||{}).adError;t.getErrorCode()===google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE&&this.onAdError(t)}},{key:"onAdClicked",value:function(e){var t=e.getAd();this.container.trigger(Tn.DFP_AD_CLICKED,t)}},{key:"onAdMetadata",value:function(){this.container.trigger(Tn.DFP_AD_METADATA)}},{key:"onAdLoaded",value:function(e){this.error=!1;var t=e.getAd();this.trigger(Tn.DFP_AD_LOADED,t),this.container.trigger(Tn.DFP_AD_LOADED,t)}},{key:"onAdStarted",value:function(e){var t=e.getAd();this.watchedAds+=1,this.container.playback.trigger(De.PLAYBACK_PLAY),this.trigger(Tn.DFP_AD_STARTED,t),this.container.trigger(Tn.DFP_AD_STARTED,t)}},{key:"onAdResumed",value:function(e){var t=e.getAd();this.container.playback.trigger(De.PLAYBACK_PLAY),this.container.trigger(Tn.DFP_AD_RESUME,t.isLinear())}},{key:"onAdPaused",value:function(e){var t=e.getAd();this.container.playback.trigger(De.PLAYBACK_PAUSE),this.container.trigger(Tn.DFP_AD_PAUSE,t.isLinear())}},{key:"onAdClosed",value:function(e){var t=e.getAd();this.trigger(Tn.DFP_AD_CLOSED,t.isLinear()),this.container.trigger(Tn.DFP_AD_CLOSED,t.isLinear())}},{key:"onAdSkipped",value:function(e){var t=e.getAd();this.trigger(Tn.DFP_AD_SKIPPED,t.isLinear()),this.container.trigger(Tn.DFP_AD_SKIPPED,t.isLinear())}},{key:"onAdCompleted",value:function(e){var t=e.getAd();this.trigger(Tn.DFP_AD_COMPLETED,t.isLinear()),this.container.trigger(Tn.DFP_AD_COMPLETED,t.isLinear())}},{key:"onAllAdsCompleted",value:function(e){this.isAllAdsCompleted=!0;var t=e.getAd();this.trigger(Tn.DFP_ALL_ADS_COMPLETED,t.isLinear()),this.container.trigger(Tn.DFP_ALL_ADS_COMPLETED,t.isLinear()),this.watchedAds=0,this.triggerDfpFinished()}},{key:"onContentPauseRequested",value:function(e){var t=e.getAd();this.container.trigger(Tn.DFP_CONTENT_PAUSE,t),this.trigger(Tn.DFP_CONTENT_PAUSE,t),this.core.getCurrentContainer()||this.adsManager.stop()}},{key:"onContentResumeRequested",value:function(){this.error||(!this.dfpVideoAd.isServedAd&&this.container.trigger(Tn.DFP_AD_NOTSERVED),this.triggerContentResume())}},{key:"containerChanged",value:function(){this.stopListening(this,Tn.DFP_MANAGER_LOADED),this.destroyVideoAd(),this.destroyIMA(),this.container=this.core.activeContainer;var e=this.container.playback;e.options.onPip?this.listenToOnce(this.core.getCurrentContainer().playback,Tn.WM_RESOURCE_READY,(function(){return e.play()})):(this.attachContainerPlugins(),this.configure(),this.bindContainerEvents(),this.trigger(Tn.DFP_CONTENT_ENDED),this.container.trigger(Tn.DFP_CONTENT_ENDED)),this.listenTo(this.container,De.CONTAINER_ENDED,this.onContainerEnded),this.listenTo(this.container,De.CONTAINER_STOP,this.onContainerEnded)}},{key:"triggerDfpFinished",value:function(){var e=this.isContainerEnded&&this.isAllAdsCompleted,t=this.isContainerEnded&&this.error;(e||t)&&(this.trigger(Tn.DFP_FINISHED),this.container.trigger(Tn.DFP_FINISHED))}},{key:"onContainerEnded",value:function(){this.isContainerEnded=!0,this.bindContainerEvents(),this.triggerDfpFinished()}},{key:"bindContainerEvents",value:function(){this.stopListening(this.container,Tn.WATCH_SESSION_END),this.listenToOnce(this.container.playback,Tn.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(this.container,Tn.WATCH_SESSION_END,this.onSessionEnd)}},{key:"onSessionEnd",value:function(){this.listenToOnce(this.container.playback,Tn.WM_PLAY_REQUESTED,this.restartAd)}},{key:"restartAd",value:function(){this.bootstrapApi(),this.startAd()}},{key:"contentEnded",value:function(){this.trigger(Tn.DFP_CONTENT_ENDED),this.container.trigger(Tn.DFP_CONTENT_ENDED),this.adsLoader&&this.adsLoader.contentComplete()}},{key:"contentStarted",value:function(){this.trigger(Tn.DFP_CONTENT_STARTED),this.container.trigger(Tn.DFP_CONTENT_STARTED)}},{key:"onPlayRequestedReady",value:function(){!this.isBootstrapReady&&this.bootstrapApi(),this.adDisplayContainer&&this.adDisplayContainer.initialize()}},{key:"requestAd",value:function(){var e=this.unescapeHtml(this.adUnit),t=encodeURIComponent(this.descriptionUrl),n=encodeURIComponent(this.unescapeHtml(this.adCustomData)),i={adUnit:e,adAccountId:this.adAccountId,adCmsId:this.adCmsId,videoId:this.videoId,descriptionUrl:t,customParams:n};this.adCreativeProfile&&(i.adCreativeProfile=this.adCreativeProfile),this.adsRequest.adTagUrl=this.dfpAdTagTemplate(i),this.adsLoader&&this.adsLoader.requestAds(this.adsRequest)}},{key:"unescapeHtml",value:function(e){return Y("<div/>").html(e).text()}}],[{key:"DEFAULT_ACCOUNT_ID",get:function(){return 95377733}},{key:"DEFAULT_CMS_ID",get:function(){return 11413}},{key:"DEFAULT_DESCRIPTION_URL",get:function(){return"https://redeglobo.globo.com/"}}]),i}(st),ir=bn.embedScript,rr=new Promise((function(e,t){return ir("//imasdk.googleapis.com/js/sdkloader/ima3_dai.js").then(e,t)}));De.register("DAI_RESOURCE_LOADED"),De.register("DAI_ERROR"),De.register("DAI_AD_BREAK_STARTED"),De.register("DAI_AD_BREAK_ENDED");var ar="script-not-available",or="not-live-streaming",sr="not-dai-resource",lr="playback-not-supported",ur="dai-error",cr=["hls","html5"],dr=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).options.enableDAIResourceLoader=!0,i.onStreamEvent=i.onStreamEvent.bind(d(i)),i.render(),i}return o(n,[{key:"name",get:function(){return"dai"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"playback",get:function(){return this.container.playback}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"videoElement",get:function(){return this.playback.videoEl}},{key:"isPlaybackSupported",get:function(){return cr.includes(this.playback.innerPlaybackName)}},{key:"DAIScriptPromise",get:function(){return rr}},{key:"attributes",get:function(){return{class:"dai-ad-container dai-ad-container--hidden"}}},{key:"adUiElement",get:function(){return this.el}},{key:"render",value:function(){var e=En.getStyleFrom(".clappr-player#wp3-player-0 .dai-ad-container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 448; }\n  .clappr-player#wp3-player-0 .dai-ad-container--hidden {\n    display: none; }\n",{playerId:this.options.playerId});this.el.appendChild(e[0]),this.container.el.appendChild(this.el)}},{key:"bindEvents",value:function(){this.listenToOnce(this.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,Tn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenToOnce(this.playback,De.PLAYBACK_READY,this.onPlaybackReady),this.listenToOnce(this.playback,Tn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onMetadataLoaded",value:function(e){if(!e.isLive)return this.onError({errorCode:or})}},{key:"onFallbackSourceSelected",value:function(){this.resource&&!this.resource.shouldPlayWithDAI&&this.resetStreamManager()}},{key:"onPlaybackReady",value:function(){if(!this.isPlaybackSupported)return this.onError({errorCode:lr});switch(this.playback.innerPlaybackName){case"hls":this.listenTo(this.innerPlayback,De.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,this.onHLSFragParsingMetadata);break;case"html5":this.listenTo(this.innerPlayback,De.Custom.PLAYBACK_METADATA_TRACK_CUE_CHANGE,this.onHTML5MetadataCueChance)}}},{key:"onHTML5MetadataCueChance",value:function(e){this.streamManager&&e&&this.streamManager.onTimedMetadata(e)}},{key:"onHLSFragParsingMetadata",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;this.streamManager&&n&&n.samples.forEach((function(t){return e.streamManager.processMetadata("ID3",t.data,t.pts)}))}},{key:"onResourceReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.selectedResource;if(!n.dai)return this.onError({errorCode:sr});this.resource=n,this.DAIScriptPromise.then((function(){return e.onDAIScriptLoaded()}),(function(){return e.onError({errorCode:ar})}))}},{key:"onDAIScriptLoaded",value:function(){this.initStreamManager()}},{key:"initStreamManager",value:function(){this.streamManager=new google.ima.dai.api.StreamManager(this.videoElement,this.adUiElement),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_STARTED,google.ima.dai.api.StreamEvent.Type.AD_PERIOD_ENDED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent,!1),this.requestLiveStream(this.resource.assetKey)}},{key:"getAdTagParameters",value:function(){var e=this.options,t=e.daiCustomData,n=e.adPublisherProvidedID;if(t||n){var i={};return t&&(i.cust_params=this.parseCustomData(t)),n&&(i.ppid=n),i}}},{key:"requestLiveStream",value:function(e){this.streamRequest=new google.ima.dai.api.LiveStreamRequest,this.streamRequest.assetKey=e;var t=this.getAdTagParameters();t&&(this.streamRequest.adTagParameters=t),this.streamManager.requestStream(this.streamRequest)}},{key:"onStreamEvent",value:function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.onDaiLoaded(e);break;case google.ima.dai.api.StreamEvent.Type.ERROR:this.onDaiError(e);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.onAdBreakStarted(e);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.onAdBreakEnded(e);break;default:this.onDaiEvent(e)}}},{key:"onDaiLoaded",value:function(e){var t=e.getStreamData(),n=t.streamId,i=t.url;this.streamId=n,_e.info(this.name,"DAI loaded, streamId: ".concat(n)),this.onDAIResourceLoaded(i)}},{key:"onAdBreakStarted",value:function(){this.el.classList.remove("dai-ad-container--hidden"),this.container.trigger(De.Custom.DAI_AD_BREAK_STARTED)}},{key:"onAdBreakEnded",value:function(){this.el.classList.add("dai-ad-container--hidden"),this.container.trigger(De.Custom.DAI_AD_BREAK_ENDED)}},{key:"onDaiError",value:function(e){var t=e.getStreamData().errorMessage;_e.warn(this.name,"DAI Error. Error Message: ",t),this.onError({errorCode:ur,errorMessage:t,event:e,notifiable:!0})}},{key:"onDaiEvent",value:function(e){var t=e.type;try{var n=e.getStreamData(),i=e.getAd();_e.info(this.name,"DAI event type: ".concat(t,", data: "),{streamData:n,ad:i})}catch(e){_e.warn(this.name,"Error getting DAI event data. DAI event type: ".concat(t,". Error: "),e)}}},{key:"onDAIResourceLoaded",value:function(e){this.container.trigger(De.Custom.DAI_RESOURCE_LOADED,{url:e,streamId:this.streamId})}},{key:"parseCustomData",value:function(e){return Object.keys(e).reduce((function(t,n){var i=encodeURIComponent(e[n]),r="".concat(n,"=").concat(i);return t?t+="&".concat(r):r}),"")}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options.enableDAIResourceLoader=!1,this.container.trigger(De.Custom.DAI_ERROR,e),this.resetStreamManager(),this.stopListening()}},{key:"resetStreamManager",value:function(){this.streamManager&&this.streamManager.reset()}},{key:"destroy",value:function(){this.resetStreamManager(),g(u(n.prototype),"destroy",this).call(this)}}]),n}(lt);function hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fr(e,t,n){return t&&pr(e.prototype,t),n&&pr(e,n),e}function gr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vr(e,t)}function mr(e){return mr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mr(e)}function vr(e,t){return vr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},vr(e,t)}function yr(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function br(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=mr(e);if(t){var r=mr(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return yr(this,n)}}var Er=function(e){gr(n,e);var t=br(n);function n(e){return hr(this,n),t.call(this,e)}return fr(n,[{key:"name",get:function(){return"click_to_pause"}},{key:"supportedVersion",get:function(){return{min:"0.4.20"}}},{key:"config",get:function(){return this.container.options.clickToPauseConfig||{}}},{key:"bindEvents",value:function(){this.listenTo(this.container,De.CONTAINER_CLICK,this.click),this.listenTo(this.container,De.CONTAINER_SETTINGSUPDATE,this.settingsUpdate)}},{key:"click",value:function(){var e=this.config.onClickPayload;(this.container.getPlaybackType()!==qe.LIVE||this.container.isDvrEnabled())&&(this.container.isPlaying()?this.container.pause(e):this.container.play(e))}},{key:"settingsUpdate",value:function(){var e=this.container.getPlaybackType()!==qe.LIVE||this.container.isDvrEnabled();if(e!==this.pointerEnabled){var t=e?"addClass":"removeClass";this.container.$el[t]("pointer-enabled"),this.pointerEnabled=e}}}]),n}(ot);Y('link[rel="shortcut icon"]');var Tr=function(e){this.element=e||window.document,this.initialize()};Tr.KEY_NAMES_BY_CODE={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"caps_lock",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12"},Tr.KEY_CODES_BY_NAME={},function(){for(var e in Tr.KEY_NAMES_BY_CODE)Object.prototype.hasOwnProperty.call(Tr.KEY_NAMES_BY_CODE,e)&&(Tr.KEY_CODES_BY_NAME[Tr.KEY_NAMES_BY_CODE[e]]=+e)}(),Tr.MODIFIERS=["shift","ctrl","alt"],Tr.registerEvent=document.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:document.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,Tr.unregisterEvent=document.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:document.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,Tr.stringContains=function(e,t){return-1!==e.indexOf(t)},Tr.neatString=function(e){return e.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")},Tr.capitalize=function(e){return e.toLowerCase().replace(/^./,(function(e){return e.toUpperCase()}))},Tr.isString=function(e){return Tr.stringContains(Object.prototype.toString.call(e),"String")},Tr.arrayIncludes=Array.prototype.indexOf?function(e,t){return-1!==e.indexOf(t)}:function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},Tr.extractModifiers=function(e){var t,n;for(t=[],n=0;n<Tr.MODIFIERS.length;n++)Tr.stringContains(e,Tr.MODIFIERS[n])&&t.push(Tr.MODIFIERS[n]);return t},Tr.extractKey=function(e){var t,n;for(t=Tr.neatString(e).split(" "),n=0;n<t.length;n++)if(!Tr.arrayIncludes(Tr.MODIFIERS,t[n]))return t[n]},Tr.modifiersAndKey=function(e){var t,n;return Tr.stringContains(e,"any")?Tr.neatString(e).split(" ").slice(0,2).join(" "):(t=Tr.extractModifiers(e),(n=Tr.extractKey(e))&&!Tr.arrayIncludes(Tr.MODIFIERS,n)&&t.push(n),t.join(" "))},Tr.keyName=function(e){return Tr.KEY_NAMES_BY_CODE[e+""]},Tr.keyCode=function(e){return+Tr.KEY_CODES_BY_NAME[e]},Tr.prototype.initialize=function(){var e,t=this;for(this.lastKeyCode=-1,this.lastModifiers={},e=0;e<Tr.MODIFIERS.length;e++)this.lastModifiers[Tr.MODIFIERS[e]]=!1;this.keysDown={any:[]},this.keysUp={any:[]},this.downHandler=this.handler("down"),this.upHandler=this.handler("up"),Tr.registerEvent(this.element,"keydown",this.downHandler),Tr.registerEvent(this.element,"keyup",this.upHandler),Tr.registerEvent(window,"unload",(function e(){Tr.unregisterEvent(t.element,"keydown",t.downHandler),Tr.unregisterEvent(t.element,"keyup",t.upHandler),Tr.unregisterEvent(window,"unload",e)}))},Tr.prototype.handler=function(e){var t=this;return function(n){var i,r,a;for(n=n||window.event,t.lastKeyCode=n.keyCode,i=0;i<Tr.MODIFIERS.length;i++)t.lastModifiers[Tr.MODIFIERS[i]]=n[Tr.MODIFIERS[i]+"Key"];for(Tr.arrayIncludes(Tr.MODIFIERS,Tr.keyName(t.lastKeyCode))&&(t.lastModifiers[Tr.keyName(t.lastKeyCode)]=!0),r=t["keys"+Tr.capitalize(e)],i=0;i<r.any.length;i++)!1===r.any[i](n)&&n.preventDefault&&n.preventDefault();if(r[a=t.lastModifiersAndKey()])for(i=0;i<r[a].length;i++)!1===r[a][i](n)&&n.preventDefault&&n.preventDefault()}},Tr.prototype.registerKeys=function(e,t,n){var i,r,a=this["keys"+Tr.capitalize(e)];for(Tr.isString(t)&&(t=[t]),i=0;i<t.length;i++)r=t[i],a[r=Tr.modifiersAndKey(r+"")]?a[r].push(n):a[r]=[n];return this},Tr.prototype.unregisterKeys=function(e,t,n){var i,r,a,o=this["keys"+Tr.capitalize(e)];for(Tr.isString(t)&&(t=[t]),i=0;i<t.length;i++)if(a=t[i],a=Tr.modifiersAndKey(a+""),null===n)delete o[a];else if(o[a])for(r=0;r<o[a].length;r++)if(String(o[a][r])===String(n)){o[a].splice(r,1);break}return this},Tr.prototype.off=function(e){return this.unregisterKeys("down",e,null)},Tr.prototype.delegate=function(e,t,n){return null!==n||void 0!==n?this.registerKeys(e,t,n):this.unregisterKeys(e,t,n)},Tr.prototype.down=function(e,t){return this.delegate("down",e,t)},Tr.prototype.up=function(e,t){return this.delegate("up",e,t)},Tr.prototype.lastKey=function(e){return e?this.lastModifiers[e]:Tr.keyName(this.lastKeyCode)},Tr.prototype.lastModifiersAndKey=function(){var e,t;for(e=[],t=0;t<Tr.MODIFIERS.length;t++)this.lastKey(Tr.MODIFIERS[t])&&e.push(Tr.MODIFIERS[t]);return Tr.arrayIncludes(e,this.lastKey())||e.push(this.lastKey()),e.join(" ")};var Ar=Tr;ye.Config,ye.Fullscreen,ye.formatTime,ye.extend,ye.removeArrayItem;var kr=ye.formatTime,_r=function(e){gr(n,e);var t=br(n);function n(e){var i;return hr(this,n),(i=t.call(this,e)).hoveringOverSeekBar=!1,i.hoverPosition=null,i.duration=null,i.firstFragDateTime=null,i.actualLiveTime=!!i.mediaControl.options.actualLiveTime,i.actualLiveTime&&(i.mediaControl.options.actualLiveServerTime?i.actualLiveServerTimeDiff=(new Date).getTime()-new Date(i.mediaControl.options.actualLiveServerTime).getTime():i.actualLiveServerTimeDiff=0),i}return fr(n,[{key:"name",get:function(){return"seek_time"}},{key:"supportedVersion",get:function(){return{min:"0.4.20"}}},{key:"template",get:function(){return Ve("<span data-seek-time></span>\n<span data-duration></span>\n")}},{key:"attributes",get:function(){return{class:"seek-time","data-seek-time":""}}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"mediaControlContainer",get:function(){return this.mediaControl.container}},{key:"isLiveStreamWithDvr",get:function(){return this.mediaControlContainer&&this.mediaControlContainer.getPlaybackType()===qe.LIVE&&this.mediaControlContainer.isDvrEnabled()}},{key:"durationShown",get:function(){return this.isLiveStreamWithDvr&&!this.actualLiveTime}},{key:"useActualLiveTime",get:function(){return this.actualLiveTime&&this.isLiveStreamWithDvr}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,De.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.showTime),this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hideTime),this.listenTo(this.mediaControl,De.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged),this.mediaControlContainer&&(this.listenTo(this.mediaControlContainer,De.CONTAINER_PLAYBACKDVRSTATECHANGED,this.update),this.listenTo(this.mediaControlContainer,De.CONTAINER_TIMEUPDATE,this.updateDuration))}},{key:"onContainerChanged",value:function(){this.stopListening(),this.bindEvents()}},{key:"updateDuration",value:function(e){this.duration=e.total,this.firstFragDateTime=e.firstFragDateTime,this.update()}},{key:"showTime",value:function(e){this.hoveringOverSeekBar=!0,this.calculateHoverPosition(e),this.update()}},{key:"hideTime",value:function(){this.hoveringOverSeekBar=!1,this.update()}},{key:"calculateHoverPosition",value:function(e){var t=e.pageX-this.mediaControl.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(t/this.mediaControl.$seekBarContainer.width(),0))}},{key:"getSeekTime",value:function(){var e,t,n,i;return this.useActualLiveTime?(this.firstFragDateTime?(i=new Date(this.firstFragDateTime),(n=new Date(this.firstFragDateTime)).setHours(0,0,0,0),t=(i.getTime()-n.getTime())/1e3+this.duration):(n=new Date((new Date).getTime()-this.actualLiveServerTimeDiff),t=((i=new Date(n))-n.setHours(0,0,0,0))/1e3),(e=t-this.duration+this.hoverPosition*this.duration)<0&&(e+=86400)):e=this.hoverPosition*this.duration,{seekTime:e,secondsSinceMidnight:t}}},{key:"update",value:function(){if(this.rendered)if(this.shouldBeVisible()){var e=this.getSeekTime(),t=kr(e.seekTime,this.useActualLiveTime);if(t!==this.displayedSeekTime&&(this.$seekTimeEl.text(t),this.displayedSeekTime=t),this.durationShown){this.$durationEl.show();var n=kr(this.actualLiveTime?e.secondsSinceMidnight:this.duration,this.actualLiveTime);n!==this.displayedDuration&&(this.$durationEl.text(n),this.displayedDuration=n)}else this.$durationEl.hide();this.$el.show();var i=this.mediaControl.$seekBarContainer.width(),r=this.$el.width(),a=this.hoverPosition*i;a-=r/2,a=Math.max(0,Math.min(a,i-r)),this.$el.css("left",a)}else this.$el.hide(),this.$el.css("left","-100%")}},{key:"shouldBeVisible",value:function(){return this.mediaControlContainer&&this.mediaControlContainer.settings.seekEnabled&&this.hoveringOverSeekBar&&null!==this.hoverPosition&&null!==this.duration}},{key:"render",value:function(){var e=He.getStyleFor('.seek-time[data-seek-time] {\n  position: absolute;\n  white-space: nowrap;\n  height: 20px;\n  line-height: 20px;\n  font-size: 0;\n  left: -100%;\n  bottom: 55px;\n  background-color: rgba(2, 2, 2, 0.5);\n  z-index: 9999;\n  transition: opacity 0.1s ease; }\n  .seek-time[data-seek-time].hidden[data-seek-time] {\n    opacity: 0; }\n  .seek-time[data-seek-time] [data-seek-time] {\n    display: inline-block;\n    color: white;\n    font-size: 10px;\n    padding-left: 7px;\n    padding-right: 7px;\n    vertical-align: top; }\n  .seek-time[data-seek-time] [data-duration] {\n    display: inline-block;\n    color: rgba(255, 255, 255, 0.5);\n    font-size: 10px;\n    padding-right: 7px;\n    vertical-align: top; }\n    .seek-time[data-seek-time] [data-duration]:before {\n      content: "|";\n      margin-right: 7px; }\n',{baseUrl:this.options.baseUrl});this.rendered=!0,this.displayedDuration=null,this.displayedSeekTime=null,this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.mediaControl.$el.append(this.el),this.$seekTimeEl=this.$el.find("[data-seek-time]"),this.$durationEl=this.$el.find("[data-duration]"),this.$durationEl.hide(),this.update()}}]),n}(ze),Sr=bn.getHostname,wr=bn.applySizeClass,Cr=window.WM&&window.WM.Settings||{},Ir=Ar,Dr=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).core._mediaControl=d(n),n.keepVisible=!1,n.userDisabled=!1,n.userKeepVisible=!1,n.isRendered=!1,n.focusElement=n.core.el,n.lastChromelessValue=!!n.options.chromeless,n.lastChromelessValue&&n.updateChromelessState(),n.kibo=new Ir(n.focusElement),n}return o(i,[{key:"name",get:function(){return"globo_media_control"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"disabled",get:function(){return this.userDisabled||this.container&&this.container.getPlaybackType()===qe.NO_OP}},{key:"hasPlaceholder",get:function(){return this._hasPlaceholder},set:function(e){this._hasPlaceholder=e}},{key:"attributes",get:function(){return{class:"media-control".concat(Q.isMobile?" mobile":"").concat(Q.supportsTouchEvents?" touch":"")}}},{key:"styles",get:function(){return""}},{key:"events",get:function(){var e={click:"onTap"},t={"mouseenter [data-controls]":"setUserKeepVisible","mouseleave [data-controls]":"resetUserKeepVisible",focusin:"show"},i=n(n(n({},e),t),{},{touchend:this.resetUserKeepVisible});return Q.isHybridDevice?i:Q.isMobile?e:t}},{key:"getTapSide",value:function(e){var t=this.$el.width();return e-this.$el.offset().left<t/2?"left":"right"}},{key:"onTap",value:function(e){this.resetDoubleTapTimeout(),this.checkDoubleTap(e)?this.onDoubleTap(e):this.waitForDoubleTap()}},{key:"waitForDoubleTap",value:function(){var e=this;this.doubleTapWaitingTimeout=setTimeout((function(){e.onSingleTap()}),250)}},{key:"onSingleTap",value:function(){this.toggleMediaControl()}},{key:"onDoubleTap",value:function(e){var t=this.getTapSide(e.pageX);e.preventDefault(),this.core.trigger(Tn.MEDIACONTROL_DOUBLE_TAP,{event:e,tapSide:t})}},{key:"checkDoubleTap",value:function(e){var t=this.getTapSide(e.pageX),n=(new Date).getTime(),i=n-this.lastTapTime,r=i<250&&i>0&&this.lastTapPosition===t;return this.lastTapTime=n,this.lastTapPosition=t,r}},{key:"resetDoubleTapTimeout",value:function(){this.doubleTapWaitingTimeout&&clearTimeout(this.doubleTapWaitingTimeout),this.doubleTapWaitingTimeout=null}},{key:"toggleMediaControl",value:function(){this.isVisible()?this.hideDelayed(0,!0):this.show()}},{key:"template",get:function(){return Ve('<div class="media-control-panel">\n  <div class="media-control-panel__back-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__upper">\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n    <div class="media-control-position__center"></div>\n  </div>\n  <div class="media-control-panel__middle">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__between">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__lower" data-controls>\n    <div class="media-control-position__center"></div>\n    <div class="opposites-container">\n      <div class="media-control-position__left"></div>\n      <div class="media-control-position__between"></div>\n      <div class="media-control-position__right"></div>\n    </div>\n  </div>\n  <div class="media-control-panel__front-layer">\n    <div class="media-control-position__left"></div>\n    <div class="media-control-position__center"></div>\n    <div class="media-control-position__right"></div>\n  </div>\n  <div class="media-control-panel__modal"></div>\n</div>\n')}},{key:"getPanel",value:function(e){return this.$el.find(".media-control-panel__".concat(e))}},{key:"getExternalInterface",value:function(){return{showMediaControlPanel:this.showPanel,hideMediaControlPanel:this.hidePanel}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,De.CORE_RESIZE,this.playerResize),this.listenTo(this,Tn.MEDIACONTROL_MODAL_SHOW,this.showModal),this.listenTo(this,Tn.MEDIACONTROL_MODAL_HIDE,this.hideModal),this.listenTo(this,Tn.MEDIACONTROL_KEEPVISIBLE,(function(t){return t?e.setUserKeepVisible():e.resetUserKeepVisible()})),this.listenTo(this,Tn.MEDIACONTROL_ITEMCLICKED,this.show),this.listenTo(this.core,Tn.WILL_SHOW_MODAL_ELEMENT,this.onModalElementShow),this.listenTo(this.core,Tn.DID_HIDE_MODAL_ELEMENT,this.onModalElementHide),this.listenTo(this.core,De.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,Tn.WILL_SHOW_DRAWER,this.onStartExpandDrawer),this.listenTo(this.core,Tn.WILL_HIDE_DRAWER,this.onStartShrinkDrawer),this.listenTo(this.core,Tn.DRAWER_HAS_PLACEHOLDER,this.onPlaceholderRequested),this.listenTo(this.core,Tn.SYNC_DRAWER_STATE_RESPONSE,this.syncWithDrawerIsShownResponse)}},{key:"onStartExpandDrawer",value:function(){this.updatePanelsVisibility({hide:!0,opaque:!0}),this.$modal.addClass("modal--hide")}},{key:"onStartShrinkDrawer",value:function(){this.$modal&&0==this.$modal.contents().length?(this.updatePanelsVisibility({hide:!1,opaque:!1}),Q.isMobile&&this.show()):this.$modal.removeClass("modal--hide")}},{key:"bindContainerEvents",value:function(){this.container&&(this.container.trigger(De.CONTAINER_PLAYBACKDVRSTATECHANGED,this.container.isDvrInUse()),this.listenTo(this.container,De.CONTAINER_PLAY,this.updatePlaybackTypeClass),this.listenTo(this.container,De.CONTAINER_STATE_BUFFERING,this.updatePlaybackTypeClass),this.listenTo(this.container,De.CONTAINER_MEDIACONTROL_DISABLE,this.disable),this.listenTo(this.container,De.CONTAINER_MEDIACONTROL_ENABLE,this.enable),this.listenTo(this.container,Tn.DFP_AD_SKIPPED,this.resetFocus),this.listenTo(this.container,Tn.DFP_AD_CLICKED,this.resetFocus),this.listenTo(this.container,De.Custom.DAI_AD_BREAK_STARTED,this.onDAIAdBreakStarted),this.listenTo(this.container,De.Custom.DAI_AD_BREAK_ENDED,this.onDAIAdBreakEnded),Q.isMobile&&this.listenTo(this.container,Tn.WILL_QUICK_SEEK,this.hide),this.render(),this.container.mediaControlDisabled&&this.disable())}},{key:"onDAIAdBreakStarted",value:function(){this.$el.addClass("media-control--dai")}},{key:"onDAIAdBreakEnded",value:function(){this.$el.removeClass("media-control--dai")}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"updateChromelessState",value:function(){this.lastChromelessValue=this.options.chromeless,this.options.chromeless?(this.options.allowUserInteraction=!1,this.disable(),this.$el.hide()):(this.options.allowUserInteraction=!0,this.enable(),this.$el.show())}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,(this.container&&this.container.mediaControlDisabled||this.core.options.chromeless)&&this.disable(),this.bindContainerEvents(),this.updatePlaybackTypeClass(),this.trigger(De.MEDIACONTROL_CONTAINERCHANGED)}},{key:"createCachedElements",value:function(){this.$modal=this.$el.find(".media-control-panel__modal"),this.$lowerPanel=this.$el.find(".media-control-panel__lower"),this.$upperPanel=this.$el.find(".media-control-panel__upper")}},{key:"initMediaControlPlugins",value:function(){var e=this;this.core.plugins.filter((function(e){return e instanceof Ti})).forEach((function(t){return e.renderMediaControlPlugin(t)}))}},{key:"renderMediaControlPlugin",value:function(){throw new Error("renderMediaControlPlugin is not implemented")}},{key:"updatePlaybackTypeClass",value:function(){if(this.container){var e=this.container.getPlaybackType();this.$el.removeClass("vod live dvr ad dvr-disabled"),e&&this.$el.addClass(e),this.addDVRClass(e),"ad"===e&&this.core.$el.removeClass("nocursor")}}},{key:"addDVRClass",value:function(e){"live"===e&&(this.container.isDvrEnabled()?this.container.isDvrInUse()&&this.$el.addClass("dvr"):this.$el.addClass("dvr-disabled"))}},{key:"setKeepVisible",value:function(){this.keepVisible=!0}},{key:"resetKeepVisible",value:function(){this.keepVisible=!1}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0,this.trigger(Tn.MEDIACONTROL_KEEPVISIBLE,!0))}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1,this.trigger(Tn.MEDIACONTROL_KEEPVISIBLE,!1))}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=n({hide:!0},e),this.keepVisible=!1,this.userDisabled=!0,this.userKeepVisible=!1,e.hide&&this.hide(),this.updatePlaybackTypeClass()}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!this.isRendered&&this.render();var t=this.container.getPlaybackType(),i=Cr&&Cr.MediaControl||{},r=i.ShowOnStartList,a=(r||[]).find((function(e){return e.test(Sr())})),o=a||"ad"===t;e=n({show:o},e),this.options.chromeless||(this.userDisabled=!1,e.show&&this.show())}},{key:"isVisible",value:function(){return!this.$el.hasClass("media-control-hide")}},{key:"show",value:function(e){var t=this;if(!Q.isMobile||!e||"mousemove"!==e.type){clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),3e3),this.disabled||this.isVisible()||(this.trigger(De.MEDIACONTROL_SHOW),this.core.trigger(De.MEDIACONTROL_SHOW),this.container.trigger(De.CONTAINER_MEDIACONTROL_SHOW),this.$el.removeClass("media-control-hide"),this.updateCursorStyle(!0))}}},{key:"hideDelayed",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.container&&(this.isVisible()&&(!Q.supportsTouchEvents||this.container.isPlaying())||n)){var i=t||3e3;clearTimeout(this.hideId),(this.disabled||!1!==this.options.hideMediaControl)&&(!this.disabled&&(t||this.userKeepVisible||this.keepVisible)?this.hideId=setTimeout((function(){return e.hideDelayed()}),i):this.hide())}}},{key:"hide",value:function(){!this.container||this.keepVisible||this.userKeepVisible||(this.core.trigger(De.MEDIACONTROL_HIDE),this.trigger(De.MEDIACONTROL_HIDE),this.container.trigger(De.CONTAINER_MEDIACONTROL_HIDE),this.$el.addClass("media-control-hide"),this.hideModal(),this.updateCursorStyle(!1))}},{key:"updateCursorStyle",value:function(e){"ad"!==this.container.getPlaybackType()&&(e||this.disabled?this.core.$el.removeClass("nocursor"):this.core.$el.addClass("nocursor"))}},{key:"showPanel",value:function(e){var t=e.panel;this.getPanel(t).removeClass("panel--hide")}},{key:"hidePanel",value:function(e){var t=e.panel;this.getPanel(t).addClass("panel--hide")}},{key:"showModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.$modal.html(e),this.$modal.show().off("transitionend"),this.$modal.removeClass("modal--hide"),t.hidePanels&&this.updatePanelsVisibility({hide:!0}),this.updateClickToPausePlugin({enable:!1}),this.updateCastInfoVisibility({hidden:!0})}},{key:"hideModal",value:function(){var e=this,t=this.$modal&&this.$modal.contents();!t||t&&!t.length||(this.$modal.addClass("modal--hide").on("transitionend",(function(){e.$modal.hide().off("transitionend"),e.$modal.html("")})),this.syncWithDrawerIsShownRequest(),this.updatePanelsVisibility({hide:this.drawerOverModal}),this.updateClickToPausePlugin({enable:!0}),this.updateCastInfoVisibility({hidden:!1}))}},{key:"syncWithDrawerIsShownRequest",value:function(){this.core.trigger(Tn.SYNC_DRAWER_STATE_REQUEST)}},{key:"syncWithDrawerIsShownResponse",value:function(e){this.drawerOverModal=e}},{key:"onModalElementShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.addClass("".concat(t,"-modal--visible"))}},{key:"onModalElementHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this.$el.removeClass("".concat(t,"-modal--visible"))}},{key:"updateCastInfoVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hidden?"addClass":"removeClass";if(this.container&&this.container.$el[t]("chromecast-playback-overlay--hidden"),"boolean"==typeof e.opaque){var n=e.opaque?"addClass":"removeClass";this.$el[n]("media-control--panels-opaque")}}},{key:"onPlaceholderRequested",value:function(){this.hasPlaceholder=!0}},{key:"updateClickToPausePlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enable?"enable":"disable",n=this.container.getPlugin("click_to_pause");!Q.isMobile&&n&&n[t]()}},{key:"updatePanelsVisibility",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hide?"addClass":"removeClass";this.$el[t]("media-control--panels-hide")}},{key:"updateBackgroundType",value:function(){if(this.hasPlaceholder)this.$el.addClass("media-control--has-placeholder");else if(!(Q.isMobile||Q.isSmartTvEnvironment||this.disabled)){var e=this.$lowerPanel.position().top,t=this.$lowerPanel.height(),n=this.$lowerPanel.offsetParent().height(),i=Math.trunc(n-(e+t)),r=i>4;i!=this._bottomPanelPosition&&(this._bottomPanelPosition=i,r?this.$el.addClass("mobile"):this.$el.removeClass("mobile"));var a=this.$upperPanel.height();a!=this._upperPanelHeight&&(this._upperPanelHeight=a,r||0!=a?this.$el.removeClass("hide-top-background"):this.$el.addClass("hide-top-background"))}}},{key:"addResizeObserver",value:function(){var e=this;this.removeResizeObserver(),this._resizeInterval=setInterval((function(){return e.updateBackgroundType()}),500)}},{key:"removeResizeObserver",value:function(){this._resizeInterval&&clearInterval(this._resizeInterval)}},{key:"destroy",value:function(){this.removeResizeObserver(),g(u(i.prototype),"destroy",this).call(this)}},{key:"playerResize",value:function(e){wr(this.$el,e.width,e.height)}},{key:"resetFocus",value:function(){this.focusElement.focus()}},{key:"render",value:function(){if(!this.container||this.isRendered)return this;var e={baseUrl:this.options.baseUrl,playerId:this.options.playerId},t=En.getStyleFrom(this.styles.toString(),e);return this.$el.html(this.template()),this.$el.append(t[0]),this.core.$el.append(this.el),this.createCachedElements(),this.initMediaControlPlugins(),this.updatePlaybackTypeClass(),this.updateBackgroundType(),this.addResizeObserver(),this.disabled&&this.hide(),this.isRendered=!0,this.trigger(De.MEDIACONTROL_RENDERED),this}}]),i}(ze),Rr=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"styles",get:function(){return'.media-control-notransition {\n  transition: none !important; }\n\n.clappr-player#wp3-player-0 .media-control {\n  position: absolute;\n  border-radius: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin-left: auto;\n  margin-right: auto;\n  width: 100%;\n  height: 100%;\n  z-index: 997;\n  opacity: 1;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .media-control::before, .clappr-player#wp3-player-0 .media-control::after {\n    content: "";\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: 88px;\n    background: none;\n    z-index: -1;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control::before {\n    top: 0;\n    background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%);\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control::after {\n    bottom: 0;\n    background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%); }\n  .clappr-player#wp3-player-0 .media-control.hide-top-background::after {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.mobile::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::before {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0.6;\n    background: #000;\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::before, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::before {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    height: 88px;\n    background: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%); }\n  .clappr-player#wp3-player-0 .media-control.mobile.media-control--panels-opaque::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide.media-control--panels-opaque::after {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control.mobile::after, .clappr-player#wp3-player-0 .media-control.media-control--panels-hide::after {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-dragging {\n    pointer-events: auto;\n    cursor: -webkit-grabbing !important;\n    cursor: grabbing !important; }\n    .clappr-player#wp3-player-0 .media-control-dragging * {\n      cursor: -webkit-grabbing !important;\n      cursor: grabbing !important; }\n  .clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__middle.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__between.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__upper.panel--hide .media-control-button, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-element, .clappr-player#wp3-player-0 .media-control-panel__lower.panel--hide .media-control-button {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control-panel__upper {\n    position: relative; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer {\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-panel__modal {\n    opacity: 1;\n    will-change: opacity;\n    visibility: visible;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control-panel__modal.modal--hide {\n      opacity: 0;\n      visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control.media-control-hide {\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide.touch .media-control-button {\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-element, .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-button {\n      pointer-events: none;\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide::before, .clappr-player#wp3-player-0 .media-control.media-control-hide::after {\n      opacity: 0;\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .media-control.media-control-hide .media-control-panel__front-layer {\n      opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.media-control--no-background::before {\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control--panels-hide:before {\n    transition: none; }\n  .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__between, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control--panels-hide .media-control-panel__lower {\n    opacity: 0;\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control.media-control--has-placeholder::after {\n    height: 112px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__between {\n  pointer-events: auto; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle {\n  width: 100%;\n  height: 100%; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control.w360 .media-control-panel__between {\n  padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control .media-control-panel {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  vertical-align: middle;\n  pointer-events: none;\n  box-sizing: border-box;\n  display: flex;\n  flex-flow: column nowrap; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .modal-element {\n    z-index: 1000; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    position: relative; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel .opposites-container .media-control-position__between {\n      display: flex;\n      align-items: center;\n      justify-content: center; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__right {\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n    z-index: 300; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel .media-control-position__center {\n    display: flex;\n    justify-content: center;\n    align-items: center; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper .media-control-position__center {\n    flex-flow: column nowrap; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between, .clappr-player#wp3-player-0 .media-control .media-control-panel__upper {\n    position: relative; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .media-control-position__center {\n    flex-flow: column-reverse nowrap;\n    position: relative;\n    z-index: 200; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    display: flex;\n    flex: 1;\n    justify-content: space-between;\n    align-items: center;\n    position: absolute;\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n    display: flex;\n    flex: 1;\n    align-items: center;\n    justify-content: center;\n    height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n      flex-grow: 1; }\n    .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__left, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__center, .clappr-player#wp3-player-0 .media-control .media-control-panel__between .media-control-position__right {\n      height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__between {\n    padding: 0 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    padding-top: 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__middle {\n    padding-bottom: 4px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__upper,\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__middle > *, .clappr-player#wp3-player-0 .media-control .media-control-panel__lower, .clappr-player#wp3-player-0 .media-control .media-control-panel__modal {\n    pointer-events: auto; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-button[data-playpause] {\n  width: 48px;\n  height: 48px; }\n\n.clappr-player#wp3-player-0 .media-control-panel__lower .media-control-element {\n  padding-top: 4px; }\n\n.clappr-player#wp3-player-0 .media-control-element {\n  padding: 12px;\n  will-change: opacity;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-element--sticky {\n    opacity: 1 !important;\n    pointer-events: auto !important; }\n  .clappr-player#wp3-player-0 .media-control-element--hidden {\n    display: none; }\n\n.clappr-player#wp3-player-0 .media-control-button {\n  display: inline-block;\n  margin: 0;\n  border: 0;\n  cursor: pointer;\n  background-color: transparent;\n  text-align: center;\n  width: 24px;\n  height: 24px;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control-button svg {\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control-button:active, .clappr-player#wp3-player-0 .media-control-button:focus {\n    outline: 1; }\n  .clappr-player#wp3-player-0 .media-control-button--hidden {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control-button[data-chromecast] svg.player-cast-loading {\n    width: 24px;\n    height: 24px; }\n\n.clappr-player#wp3-player-0 .media-control.ad {\n  background: none;\n  visibility: visible;\n  opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control.ad.touch {\n    visibility: hidden !important;\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-button {\n      visibility: hidden !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__lower {\n      opacity: 1 !important;\n      visibility: visible !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel__modal {\n      pointer-events: auto !important; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .media-control-panel > * {\n      pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.ad.touch .dfp-countdown {\n      visibility: hidden;\n      pointer-events: none; }\n  .clappr-player#wp3-player-0 .media-control.ad:after, .clappr-player#wp3-player-0 .media-control.ad:before {\n    content: \'\';\n    left: 0;\n    height: 48px;\n    background: none;\n    opacity: 1;\n    position: absolute;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    width: 100%;\n    will-change: opacity;\n    z-index: -1; }\n  .clappr-player#wp3-player-0 .media-control.ad:before {\n    top: 0;\n    background-image: linear-gradient(180deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%); }\n  .clappr-player#wp3-player-0 .media-control.ad:after {\n    bottom: 0;\n    background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.8) 25%, rgba(0, 0, 0, 0.0001) 100%); }\n  .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__between,\n  .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__lower .opposites-container {\n    opacity: 1;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    will-change: opacity; }\n  .clappr-player#wp3-player-0 .media-control.ad .media-control-panel__upper {\n    pointer-events: none; }\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide:before, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide:after {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__upper, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__middle, .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__between,\n  .clappr-player#wp3-player-0 .media-control.ad.media-control-hide .media-control-panel__lower .opposites-container {\n    opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control.media-control--dai.media-control-hide {\n  pointer-events: auto; }\n  .clappr-player#wp3-player-0 .media-control.media-control--dai.media-control-hide .media-control-panel__upper {\n    pointer-events: none; }\n\n.clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control.ad.volume-modal--visible .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n    transform: scale(1); }\n\n.clappr-player#wp3-player-0 .media-control.ad .dfp-countdown {\n  display: block; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button svg path[fill], .clappr-player#wp3-player-0 .media-control.ad .media-control-element svg path[fill] {\n  fill: #ffff93 !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-button[data-share], .clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-settings], .clappr-player#wp3-player-0 .media-control.ad .media-control-element[data-share] {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.ad .time-indicator,\n.clappr-player#wp3-player-0 .media-control.ad .live-button,\n.clappr-player#wp3-player-0 .media-control.ad .chromecast-button {\n  display: none !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container {\n  padding: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-1[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n    background-color: #ffff93 !important; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-fill-2[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-fill-2[data-seekbar] {\n    background-color: #ffff93 !important; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-volume] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-seekbar] .bar-hover[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-background[data-volume] .bar-hover[data-volume] {\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-seekbar] {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-volume], .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n    background-color: #ffff93 !important; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container__placeholder {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] {\n  position: fixed;\n  width: 100%;\n  left: 50%;\n  transform: translate(-50%);\n  top: calc(100% - 4px);\n  height: 4px;\n  margin-bottom: 0;\n  overflow: hidden;\n  cursor: default;\n  opacity: 1;\n  transition: none; }\n  .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] {\n    margin: 0;\n    height: 100%;\n    border-radius: 0;\n    background-color: rgba(255, 255, 255, 0.4);\n    box-shadow: none;\n    transform: scaleY(1);\n    left: 0; }\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n      display: none; }\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n    .clappr-player#wp3-player-0 .media-control.ad .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      border-radius: 0; }\n\n.clappr-player#wp3-player-0 .media-control.live {\n  min-height: auto; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n    background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n    background-color: #fff;\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n    background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .media-control.live .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n    display: block; }\n  .clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] {\n    pointer-events: none; }\n    .clappr-player#wp3-player-0 .media-control.live.dvr-disabled .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: none; }\n  .clappr-player#wp3-player-0 .media-control.live .time-indicator {\n    display: none; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n  background-color: #fff; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  background-color: #ff0000; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  background-color: #fff; }\n\n.clappr-player#wp3-player-0 .media-control.dvr .media-control-panel .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n  display: block; }\n'}},{key:"bindEvents",value:function(){g(u(n.prototype),"bindEvents",this).call(this),this.listenTo(this.core,De.CORE_MOUSE_MOVE,this.show),this.listenTo(this.core,De.CORE_MOUSE_LEAVE,this.hideDelayed),this.listenTo(this.core,Tn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,Tn.STOP_DRAGGING_SEEKBAR,this.onStopDragginSeekbar)}},{key:"renderMediaControlPlugin",value:function(e){var t=e.panel,n=e.position,i=e.el,r=".media-control-panel__".concat(t," ").concat(n?".media-control-position__".concat(n):"");this.$el.find(r).append(i),e.render()}},{key:"onStartDraggingSeekbar",value:function(){this.hidePanel({panel:"upper"}),this.hidePanel({panel:"between"})}},{key:"onStopDragginSeekbar",value:function(){this.showPanel({panel:"upper"}),this.showPanel({panel:"between"})}}]),n}(Dr),xr=function(e){l(n,e);var t=p(n);function n(e){return r(this,n),t.call(this,e)}return o(n,[{key:"name",get:function(){return"play_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return Q.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return Q.supportsTouchEvents?"center":"left"}},{key:"attributes",get:function(){return{class:"media-control-button","data-playpause":""}}},{key:"events",get:function(){return{click:this.togglePlayPause}}},{key:"isPauseDisabled",get:function(){var e=this.container&&this.container.getPlaybackType()===qe.LIVE,t=this.container.playback&&!this.container.playback.dvrEnabled;return e&&t}},{key:"destroy",value:function(){this.unbindKeyEvents()}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,De.CONTAINER_PLAY,this.changeTogglePlay),this.listenTo(this.container,De.CONTAINER_PAUSE,this.changeTogglePlay),this.listenTo(this.container,De.CONTAINER_STOP,this.changeTogglePlay),this.listenTo(this.container,De.CONTAINER_ENDED,this.changeTogglePlay),this.listenTo(this.container,Tn.WM_SPINNER_START,this.hidePlayButton),this.listenTo(this.container,Tn.WM_SPINNER_STOP,this.showPlayButton))}},{key:"hidePlayButton",value:function(){Q.supportsTouchEvents&&this.$el.hide()}},{key:"showPlayButton",value:function(){Q.supportsTouchEvents&&this.$el.show()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("space",(function(){return e.togglePlayPause()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("space")}},{key:"onContainerChanged",value:function(){this.bindContainerEvents(),this.changeTogglePlay()}},{key:"changeTogglePlay",value:function(){this.$el.html(""),this.container&&this.container.isPlaying()?(this.isPauseDisabled?this.$el.hide():(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Pausar</span>'),this.$el.removeClass("play"),this.$el.addClass("pause"),this.$el.show()),this.trigger(De.MEDIACONTROL_PLAYING)):(this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8 5v14l11-7z"/>\n    </g>\n</svg>\n<span class="visually-hidden">Reproduzir</span>'),this.$el.removeClass("stop pause"),this.$el.addClass("play"),this.$el.show(),this.trigger(De.MEDIACONTROL_NOTPLAYING)),this.applyButtonStyle(this.$el)}},{key:"togglePlayPause",value:function(){if(!this.isPauseDisabled)return this.container.isPlaying()?this.container.pause({userInvoked:!0}):this.container.play({userInvoked:!0}),!1;!this.container.isPlaying()&&this.container.play({userInvoked:!0})}},{key:"render",value:function(){return this.bindKeyEvents(),this.changeTogglePlay(),this}}]),n}(Ti),Lr='<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n  <g fill="none" fill-rule="evenodd">\n    <path d="M0 0h24v24H0z"/>\n    <path fill="#FFF" d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"/>\n  </g>\n</svg>',Pr=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"back_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"backButtonEnabled",get:function(){return this.options.events&&"function"==typeof this.options.events.onBackButtonClicked}},{key:"attributes",get:function(){return{class:"media-control-button","data-controls":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_OPTIONS_CHANGE,this.onOptionsChange)}},{key:"onClick",value:function(){this.backButtonEnabled&&this.core.trigger(Tn.BACK_BUTTON_CLICKED)}},{key:"onOptionsChange",value:function(){this.lastBackButtonValue!==!!this.backButtonEnabled&&this.updateBackButtonState()}},{key:"updateBackButtonState",value:function(){this.backButtonEnabled?this.show():this.hide(),this.lastBackButtonValue=this.backButtonEnabled}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"render",value:function(){var e=Y("<span/>").addClass("visually-hidden").text("Sair do vídeo");return this.$el.html(""),this.$el.append(Lr),this.$el.append(e),this.updateBackButtonState(),this}}]),n}(Ti),Or=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).fullScreenOnVideoTagSupported=null,i}return o(n,[{key:"name",get:function(){return"fullscreen_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"playback",get:function(){var e;return null===(e=this.core)||void 0===e?void 0:e.activePlayback}},{key:"screenOrientationAvailable",get:function(){var e;return null===(e=screen)||void 0===e?void 0:e.orientation}},{key:"isIdle",get:function(){var e=this.container.getPlugin("poster");return e&&!e.$el.hasClass("poster--hidden")}},{key:"attributes",get:function(){return{class:"media-control-button","data-fullscreen":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"getExternalInterface",value:function(){return{toggleFullscreen:this.toggleFullscreen}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,De.CORE_RESIZE,this.changeToggleFullscreen),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e,t;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.fullScreenOnVideoTagSupported=null,this.container&&(this.bindKeyEvents(),this.listenTo(this.container,De.CONTAINER_DBLCLICK,this.toggleFullscreen),Q.isiOS&&this.listenTo(this.container,Tn.WILL_SET_AD_PLAYBACK,this.toggleFullscreenForiOSAdPlayback),"video"===(null===(e=this.playback)||void 0===e||null===(t=e.videoEl)||void 0===t?void 0:t.nodeName.toLowerCase())&&this.listenToOnce(this.container,De.CONTAINER_LOADEDMETADATA,this.onLoadedMetadataOnVideoTag),(Q.isIE&&!Q.isIE11||Q.supportsTouchEvents)&&this.stopListening(this.container,De.CONTAINER_DBLCLICK))}},{key:"toggleFullscreenForiOSAdPlayback",value:function(){this.core.isFullscreen()&&this.toggleFullscreen()}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("f",(function(){return e.toggleFullscreen()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("f")}},{key:"onLoadedMetadataOnVideoTag",value:function(){!ye.Fullscreen.fullscreenEnabled()&&this.playback.videoEl.webkitSupportsFullscreen&&(this.fullScreenOnVideoTagSupported=!0,this.render())}},{key:"changeToggleFullscreen",value:function(){this.$el.html(""),ye.Fullscreen.fullscreenElement()?this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M7 15h2v6H7v-4H3v-2h4zm10-8h4v2h-6V3h2v4zM7 9H3V7h4V3h2v6H7zm10 6h4v2h-4v4h-2v-6h2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Sair do modo tela cheia</span>'):this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M19 21h-4v-2h4v-4h2v6h-2zm0-18h2v6h-2V5h-4V3h4zM5 19h4v2H3v-6h2v4zM5 3h4v2H5v4H3V3h2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Tela cheia</span>'),this.applyButtonStyle(this.$el)}},{key:"onClick",value:function(){this.toggleFullscreen()}},{key:"toggleFullscreen",value:function(){this.container.fullscreen(),this.core.toggleFullscreen(),this.mediaControl.resetUserKeepVisible()}},{key:"render",value:function(){if(this.fullScreenOnVideoTagSupported||ye.Fullscreen.fullscreenEnabled())return this.changeToggleFullscreen(),this}}]),n}(Ti),Mr=function(e){l(n,e);var t=p(n);function n(e){return r(this,n),t.call(this,e)}return o(n,[{key:"name",get:function(){return"time_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"hasSizeChanged",get:function(){return this.lastSize===this.actualSize}},{key:"attributes",get:function(){return{class:"time-indicator"}}},{key:"events",get:function(){return{click:this.toggleTimeIndicator}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&(this.listenTo(this.container,De.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,Tn.WM_VIDEO_METADATA_LOADED,this.setDuration))}},{key:"setDuration",value:function(e){var t=ye.formatTime(e.duration/1e3);this.$duration.text(t),this.$rightContainer=this.mediaControl.$el.find(".media-control-panel__lower .media-control-position__right")}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&this.$rightContainer&&(this.actualSize=e,this.shouldCollapse=this.actualSize.width-this.$rightContainer.width()<130,this.shouldCollapse?(this.$el.addClass("time-indicator--collapse"),this.$duration.hide()):(this.$el.removeClass("time-indicator--collapse"),this.$duration.show()),this.$position.show(),this.updateTimeIndicator(),this.lastSize=this.actualSize)}},{key:"onTimeUpdate",value:function(e){"ad"!==e.playbackType&&(this.currentPositionValue=e.current<0?e.total:e.current,this.currentDurationValue=e.total,null!==this.currentPositionValue&&null!==this.currentDurationValue&&this.updateTimeIndicator())}},{key:"updateTimeIndicator",value:function(){this.updatePosition(),this.shouldCollapse?this.updateRemainingTime():this.updateDuration()}},{key:"updatePosition",value:function(){if(!this.hasSizeChanged||parseInt(this.currentPositionValue)!==parseInt(this.lastPositionValue)){var e=ye.formatTime(this.currentPositionValue);this.$position.text(e),this.lastPositionValue=this.currentPositionValue}}},{key:"updateRemainingTime",value:function(){var e=-1*(this.currentPositionValue-this.currentDurationValue);if(!this.hasSizeChanged||parseInt(e)!==parseInt(this.lastRemainingTime)){var t=e>1,n="";n=(t?"-":"")+(n=ye.formatTime(t?e:0)),this.lastRemainingTime=e,this.$duration.text(n)}}},{key:"updateDuration",value:function(){if(!this.hasSizeChanged||parseInt(this.currentDurationValue)!==parseInt(this.lastDurationValue)){var e=ye.formatTime(this.currentDurationValue);this.$duration.text(e),this.lastDurationValue=this.currentDurationValue}}},{key:"toggleTimeIndicator",value:function(e){e&&e.stopPropagation(),this.shouldCollapse&&(this.$position.is(":visible")?this.$position.hide():this.$position.show(),this.$duration.is(":visible")?this.$duration.hide():this.$duration.show())}},{key:"render",value:function(){this.$position=$("<span/>").attr("data-position","").html("00:00"),this.$separator=$("<span/>").addClass("separator").html("/"),this.$duration=$("<span/>").attr("data-duration","").html("00:00"),this.$el.empty();var e=En.getStyleFrom('.clappr-player#wp3-player-0 .time-indicator {\n  display: flex;\n  height: 24px;\n  box-sizing: content-box;\n  align-items: center;\n  cursor: default;\n  position: relative;\n  font-family: "opensans-regular", sans-serif;\n  font-size: 14px;\n  line-height: 16px;\n  color: #ffffff;\n  text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); }\n  .clappr-player#wp3-player-0 .time-indicator .separator {\n    display: inline;\n    margin: 0 5px;\n    opacity: 0.5; }\n  .clappr-player#wp3-player-0 .time-indicator--collapse {\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .time-indicator--collapse .separator, .clappr-player#wp3-player-0 .time-indicator--collapse [data-duration] {\n      display: none; }\n\n.clappr-player#wp3-player-0 .media-control:not(.mobile) .time-indicator {\n  padding-left: 0; }\n\n.clappr-player#wp3-player-0 [data-position],\n.clappr-player#wp3-player-0 [data-duration] {\n  display: inline; }\n',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$position[0]),this.$el.append(this.$separator[0]),this.$el.append(this.$duration[0]),this}}]),n}(Ti),Nr='<span class="skip-button__label"><%= label %></span>\n',Br='.clappr-player#wp3-player-0 .media-control .skip-button {\n  display: flex;\n  align-items: center;\n  position: absolute;\n  bottom: -8px;\n  right: 0;\n  width: auto;\n  height: auto;\n  border-radius: 4px;\n  background-color: #333;\n  margin: 0 12px;\n  pointer-events: auto;\n  z-index: 400;\n  will-change: opacity, transform;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control .skip-button__label {\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    font-weight: normal;\n    font-style: normal;\n    font-stretch: normal;\n    line-height: 1.14;\n    letter-spacing: normal;\n    color: #eeeeee; }\n  .clappr-player#wp3-player-0 .media-control .skip-button:hover, .clappr-player#wp3-player-0 .media-control .skip-button:focus {\n    background-color: #eeeeee;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5); }\n    .clappr-player#wp3-player-0 .media-control .skip-button:hover .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button:focus .skip-button__label {\n      color: #111111; }\n    .clappr-player#wp3-player-0 .media-control .skip-button:hover svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button:focus svg path[fill] {\n      fill: #111111 !important; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--left {\n    right: auto;\n    left: 0; }\n  .clappr-player#wp3-player-0 .media-control .skip-button svg {\n    width: 24px;\n    height: 24px; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--live_button, .clappr-player#wp3-player-0 .media-control .skip-button--start_over {\n    padding: 6px 12px;\n    background-color: #eee; }\n    .clappr-player#wp3-player-0 .media-control .skip-button--live_button svg, .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n      margin-top: 2px; }\n      .clappr-player#wp3-player-0 .media-control .skip-button--live_button svg path[fill], .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg path[fill] {\n        fill: #111111; }\n    .clappr-player#wp3-player-0 .media-control .skip-button--live_button .skip-button__label, .clappr-player#wp3-player-0 .media-control .skip-button--start_over .skip-button__label {\n      color: #111111; }\n    .clappr-player#wp3-player-0 .media-control .skip-button--live_button:hover, .clappr-player#wp3-player-0 .media-control .skip-button--live_button:focus, .clappr-player#wp3-player-0 .media-control .skip-button--start_over:hover, .clappr-player#wp3-player-0 .media-control .skip-button--start_over:focus {\n      background-color: #cecece; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--live_button svg {\n    transform: rotate(180deg);\n    margin-left: 5px; }\n  .clappr-player#wp3-player-0 .media-control .skip-button--start_over svg {\n    margin-right: 5px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--sticky {\n  transform: translateY(0px); }\n\n.clappr-player#wp3-player-0 .media-control.touch .skip-button--force-transform-animation {\n  transition: transform 0.3s ease; }\n\n.clappr-player#wp3-player-0 .media-control-hide .skip-button--sticky {\n  opacity: 1 !important;\n  pointer-events: auto !important; }\n\n.clappr-player#wp3-player-0 .media-control-hide.touch .skip-button--sticky {\n  transform: translateY(52px); }\n\n.clappr-player#wp3-player-0 .media-control-hide.touch.w360 .skip-button--sticky {\n  transform: translateY(60px); }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible.touch .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible.touch .skip-button {\n  opacity: 0.5; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .skip-button, .clappr-player#wp3-player-0 .media-control.thumb-preview-modal--visible .skip-button {\n  opacity: 0.5;\n  z-index: 100; }\n\n.clappr-player#wp3-player-0 .media-control.settings-modal--visible .skip-button {\n  visibility: hidden;\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control.ad .skip-button {\n  visibility: hidden;\n  opacity: 0; }\n',Ur=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"skip_button"}},{key:"type",get:function(){return""}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return Ve(Nr)}},{key:"label",get:function(){return""}},{key:"startCuepointType",get:function(){return""}},{key:"endCuepointType",get:function(){return""}},{key:"shouldActive",get:function(){return this.endCuepoint.time-this.startCuepoint.time>=10}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.type," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"isSticky",get:function(){return this.$el.hasClass("skip-button--sticky")}},{key:"onClick",value:function(){this.disableButton(),this.container.trigger(Tn.SKIP_BUTTON_CLICKED,{name:this.name}),this.seekToEndCuepoint()}},{key:"seekToEndCuepoint",value:function(){this.container.seek(this.endCuepoint.time),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,Tn.DID_LOAD_CUEPOINTS,this.onCuepointsLoaded),this.listenTo(this.container,Tn.DFP_AD_STARTED,this.onAdStarted))}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onCuepointsLoaded",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.startCuepoint=t.find((function(t){return t.type===e.startCuepointType})),this.endCuepoint=t.find((function(t){return t.type===e.endCuepointType})),this.startCuepoint&&this.endCuepoint&&this.shouldActive&&this.listenTo(this.container.playback,De.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"onTimeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.current,n=t>=this.startCuepoint.time&&t<this.endCuepoint.time,i=t>=this.startCuepoint.time&&t<this.startCuepoint.time+5;n!==this.isActive&&(n?this.enableButton():this.disableButton()),i!==this.isSticky&&(i?this.setSticky():this.resetSticky())}},{key:"enableButton",value:function(){this.container.trigger(Tn.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden"),this.bindKeyEvents(),this.isActive=!0}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden").removeClass("skip-button--sticky").off("transitionend"),this.isActive=!1}},{key:"setSticky",value:function(){var e=this;if(this.mediaControl.isVisible())return this.$el.addClass("skip-button--sticky skip-button--force-transform-animation");this.$el.addClass("skip-button--sticky").on("transitionend",(function(){e.$el.addClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetSticky",value:function(){var e=this;this.$el.removeClass("skip-button--sticky").on("transitionend",(function(){e.$el.removeClass("skip-button--force-transform-animation").off("transitionend")}))}},{key:"resetState",value:function(){this.isActive=!1}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),this.bindKeyAndShow("enter",(function(){e.isSticky&&e.onClick()})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&this.kibo.off("enter")}},{key:"render",value:function(){var e=this.template({label:this.label}),t=En.getStyleFrom(Br,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.append(t[0]),this}},{key:"destroy",value:function(){this.unbindKeyEvents(),g(u(n.prototype),"destroy",this).call(this)}}]),n}(Ti),Fr=bn.seekStringToSeconds,Vr=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"skip_recap"}},{key:"type",get:function(){return"recap"}},{key:"label",get:function(){return"Pular Resumo"}},{key:"startCuepointType",get:function(){return"recap_start"}},{key:"endCuepointType",get:function(){return"recap_end"}},{key:"autoSkipEnabled",get:function(){var e=this.options.resumeAt||Fr();return this.options.skipRecap&&this.endCuepoint&&!e}},{key:"onCuepointsLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(g(u(n.prototype),"onCuepointsLoaded",this).call(this,e),this.autoSkipEnabled){var t=this.endCuepoint.time;t&&(this.container.trigger(Tn.WILL_AUTO_SKIP_RECAP),this.container.playback.setInitialTime(t))}}}]),n}(Ur),Hr=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"skip_intro"}},{key:"type",get:function(){return"intro"}},{key:"label",get:function(){return"Pular Abertura"}},{key:"startCuepointType",get:function(){return"opening_start"}},{key:"endCuepointType",get:function(){return"opening_end"}}]),n}(Ur),jr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Kr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Gr(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}function Wr(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})})),t}var zr="Expected a function",Yr=/^\s+|\s+$/g,qr=/^[-+]0x[0-9a-f]+$/i,$r=/^0b[01]+$/i,Xr=/^0o[0-7]+$/i,Qr=parseInt,Zr="object"==typeof jr&&jr&&jr.Object===Object&&jr,Jr="object"==typeof self&&self&&self.Object===Object&&self,ea=Zr||Jr||Function("return this")(),ta=Object.prototype.toString,na=Math.max,ia=Math.min,ra=function(){return ea.Date.now()};function aa(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError(zr);function p(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function f(e){return u=e,s=setTimeout(m,t),c?p(e):o}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function m(){var e=ra();if(g(e))return v(e);s=setTimeout(m,function(e){var n=t-(e-l);return d?ia(n,a-(e-u)):n}(e))}function v(e){return s=void 0,h&&i?p(e):(i=r=void 0,o)}function y(){var e=ra(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return f(l);if(d)return s=setTimeout(m,t),p(l)}return void 0===s&&(s=setTimeout(m,t)),o}return t=sa(t)||0,oa(n)&&(c=!!n.leading,a=(d="maxWait"in n)?na(sa(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},y.flush=function(){return void 0===s?o:v(ra())},y}function oa(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function sa(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==ta.call(e)}(e))return NaN;if(oa(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=oa(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Yr,"");var n=$r.test(e);return n||Xr.test(e)?Qr(e.slice(2),n?2:8):qr.test(e)?NaN:+e}var la=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new TypeError(zr);return oa(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),aa(e,t,{leading:i,maxWait:t,trailing:r})},ua='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">\n     <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11.5 18V6L3 12l8.5 6zm.5-6l8.5 6V6L12 12z" fill="#FFF"/>\n    </g>\n</svg>',ca=bn.getHostname,da=bn.getCurrentTime,ha=bn.getTimeFromPosition,pa=window.WM&&window.WM.Settings||{},fa=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e))._throttledPositionUpdate=la((function(){var e;return(e=i).updateButtonState.apply(e,arguments)}),5e3,{trailing:!1}),i.currentProgram={},((pa&&pa.StartOver||{}).Blacklist||[]).find((function(e){return e.test(ca())}))&&i.destroy(),i}return o(n,[{key:"name",get:function(){return"start_over"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return Ve(Nr)}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"programStartPositionOffset",get:function(){return da(this.innerPlayback)-this.currentProgram.startTime}},{key:"programStartPosition",get:function(){return this.innerPlayback.getCurrentTime()-this.programStartPositionOffset}},{key:"label",get:function(){var e="Início",t="Assistir do ".concat(e.toLowerCase());return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--left skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}},{key:"events",get:function(){return{click:this.onClick}}},{key:"canSeekToProgramStart",get:function(){var e=this.innerPlayback.getCurrentTime()-this.programStartPositionOffset>=0;return this.programStartPositionOffset>5&&e}},{key:"onClick",value:function(){this.container.trigger(Tn.SKIP_BUTTON_CLICKED,{name:this.name}),this.canSeekToProgramStart&&(this.seekToProgramStart(),this.updateButtonState())}},{key:"seekToProgramStart",value:function(){this.container.seek(this.programStartPosition),!this.container.isPlaying()&&this.container.play()}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.container&&this.listenToOnce(this.container,Tn.DID_LOAD_EPG,this.onEPGLoaded)}},{key:"onContainerChanged",value:function(){this.disableButton(),this.resetState(),this.bindContainerEvents()}},{key:"onEPGLoaded",value:function(){this.listenTo(this.container,Tn.DID_CHANGE_CURRENT_PROGRAM,this.onProgramChange),this.listenTo(this.playback,De.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate)}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"getCurrentPositionTime",value:function(){var e=this.innerPlayback.getCurrentTime(),t=this.innerPlayback.getProgramDateTime(),n=new Date(t);return ha(e,n)}},{key:"onProgramChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program,n=void 0===t?{}:t;this.currentProgram=n||{},this.updateButtonState()}},{key:"updateButtonState",value:function(){this.isActive!==this.canSeekToProgramStart&&(this.isActive=this.canSeekToProgramStart,this.isActive?this.enableButton():this.disableButton())}},{key:"enableButton",value:function(){this.container.trigger(Tn.SKIP_BUTTON_SHOW,{name:this.name}),this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetState",value:function(){this.isActive=!1}},{key:"render",value:function(){var e=this.template({label:this.label}),t=En.getStyleFrom(Br,{playerId:this.core.options.playerId});return this.$el.html(e),this.$el.prepend(ua),this.$el.append(t[0]),this}}]),n}(Ti),ma=bn.getHostname,va=window.WM&&window.WM.Settings||{},ya=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),i=t.call(this,e),((va&&va.StartOver||{}).Blacklist||[]).find((function(e){return e.test(ma())}))&&i.destroy(),i}return o(n,[{key:"name",get:function(){return"live_button"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"between"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return Ve(Nr)}},{key:"events",get:function(){return{click:this.onClick}}},{key:"label",get:function(){var e=this.options&&this.options.isLiveContent?"ao vivo":"agora",t="Assistir ".concat(e);return this.playerSize&&this.playerSize.width<=421?e:t}},{key:"attributes",get:function(){return{class:"media-control-button skip-button skip-button--".concat(this.name," skip-button--hidden"),"data-skip-button":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,De.CONTAINER_PLAYBACKDVRSTATECHANGED,this.toggleButton),this.listenTo(this.container,De.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,De.CONTAINER_PAUSE,this.updateState)}},{key:"toggleButton",value:function(e){this.dvrInUse=e,this.dvrInUse?this.enableButton():this.disableButton()}},{key:"onPlayerResize",value:function(e){e.width&&"number"==typeof e.width&&(this.playerSize=e,this.updateLabel())}},{key:"onClick",value:function(){this.core.mediaControl.container.isPlaying()||this.core.mediaControl.container.play(),this.dvrInUse&&this.core.mediaControl.container.seek(this.core.mediaControl.container.getDuration())}},{key:"updateState",value:function(){this.dvrInUse?this.enableButton():this.disableButton()}},{key:"updateLabel",value:function(){this.$el.find(".skip-button__label").text(this.label)}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"enableButton",value:function(){this.$el.removeClass("skip-button--hidden")}},{key:"disableButton",value:function(){this.$el.addClass("skip-button--hidden")}},{key:"render",value:function(){var e=En.getStyleFrom(Br,{playerId:this.core.options.playerId});return this.$el.html(this.template({label:this.label})),this.$el.append(ua),this.$el.append(e[0]),this}}]),n}(Ti),ba='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3 8.77v6h4l5 5v-16l-5 5H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77 0-4.28-2.99-7.86-7-8.77z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Silenciar som</span>',Ea='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Ativar som</span>',Ta=bn.autoplayManager,Aa=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).persistConfig=i.core.options.persistConfig,i.isUserGesture=!1,i.stopDragHandler=function(e){return i.stopDrag(e)},i.updateDragHandler=function(e){return i.updateDrag(e)},$(document).bind("mouseup",i.stopDragHandler),$(document).bind("mousemove",i.updateDragHandler),i}return o(n,[{key:"name",get:function(){return"volume"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return Ve('<div class="drawer-icon-container" data-volume>\n  <button class="drawer-icon media-control-button media-control-element" data-volume></button>\n</div>\n\n<div class="bar-container" data-volume>\n  <div class="bar-background" data-volume>\n    <div class="bar-fill-1" data-volume></div>\n    <div class="bar-hover" data-volume></div>\n  </div>\n  <div class="bar-scrubber" data-volume>\n    <div class="bar-scrubber-icon" data-volume></div>\n  </div>\n</div>\n')}},{key:"volume",get:function(){return this.container.volume}},{key:"muted",get:function(){return 0===this.volume}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"attributes",get:function(){return{class:"drawer-container volume-hide","data-volume":""}}},{key:"events",get:function(){return{mouseenter:this.showVolumeBar,mouseleave:this.hideVolumeBar,"click .bar-container[data-volume]":"onVolumeClick","click .drawer-icon[data-volume]":"toggleMute","mousedown .bar-container[data-volume]":"startVolumeDrag"}}},{key:"mutedAutoplay",get:function(){return this.idPlayback.mutedAutoplay}},{key:"destroy",value:function(){g(u(n.prototype),"destroy",this).call(this),$(document).unbind("mouseup",this.stopDragHandler),$(document).unbind("mousemove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,Tn.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked)}},{key:"updateContainer",value:function(){this.unbindContainerEvents(),this.container=this.core.activeContainer,this.idPlayback=this.container&&this.container.playback,this.container&&this.bindContainerEvents()}},{key:"onContainerChanged",value:function(){this.updateContainer(),this.setInitialVolume()}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,De.CONTAINER_VOLUME,this.onContainerVolumeUpdate),this.listenToOnce(this.container,De.CONTAINER_PLAY,this.onContainerPlay),this.listenToOnce(this.idPlayback,Tn.WM_USER_PLAY_REQUESTED,this.setInitialVolume)}},{key:"onContainerPlay",value:function(){this.stopListening(this.idPlayback,Tn.WM_USER_PLAY_REQUESTED)}},{key:"unbindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.idPlayback&&this.stopListening(this.idPlayback)}},{key:"getInitialVolume",value:function(){var e=this.persistConfig?ye.Config.restore("volume"):100;return this.lastVolume=e,(this.core.options.mute||this.mutedAutoplay)&&(e=0),this.currentVolume=e,e}},{key:"setInitialVolume",value:function(){this.setVolume(this.getInitialVolume(),{initial:!0})}},{key:"onTapToUnmuteClicked",value:function(){this.isUserGesture=!0,this.setVolume(this.lastVolume||100),this.isAd&&this.idPlayback.volume(this.lastVolume||100),Ta.consent()}},{key:"toggleMute",value:function(e){e&&e.stopPropagation(),this.isUserGesture=!0,this.setVolume(this.muted?this.lastVolume||100:0)}},{key:"onContainerVolumeUpdate",value:function(e){e=void 0!==e&&e>=0?e:this.volume,this.updateVolumeUI(e),this.draggingVolumeBar||(this.currentVolume>0&&this.muted?this.container.trigger(Tn.WM_MUTED,this.lastVolume,this.isUserGesture):this.currentVolume<=0&&!this.muted&&this.container.trigger(Tn.WM_UNMUTED,this.lastVolume,this.isUserGesture),this.isUserGesture=!1,this.lastVolume=this.currentVolume!==e?this.currentVolume:this.lastVolume,this.currentVolume=e)}},{key:"updateVolumeUI",value:function(e){var t=this;this.container.isReady?this.$volumeBarContainer&&(this.updateVolumeBar(e),this.updateVolumeIcon(e)):this.listenToOnce(this.container,De.CONTAINER_READY,(function(){return t.updateVolumeUI(e)}))}},{key:"setVolume",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.initial;e=Math.min(100,Math.max(e,0)),this.persistConfig&&!i&&ye.Config.persist("volume",e);var r=function(){var n=function(e){t.container.setVolume(e),t.isAd&&t.idPlayback.volume(e)};t.stopListening(t.idPlayback,Tn.WM_PLAYBACK_WILL_PLAY),t.container.isReady?n(e):t.listenToOnce(t.idPlayback,Tn.WM_PLAYBACK_WILL_PLAY,(function(){n(t.getInitialVolume())}))};this.container?r():this.listenToOnce(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,(function(){r()}))}},{key:"onVolumeClick",value:function(e){this.setVolume(this.getVolumeFromUIEvent(e))}},{key:"getVolumeFromUIEvent",value:function(e){var t=100*(1-(e.pageY-this.$volumeBarContainer.offset().top)/this.$volumeBarContainer.height());return Math.min(100,Math.max(t,0))}},{key:"updateVolumeBar",value:function(e){var t=this.$volumeBarContainer.height(),n=this.$volumeBarBackground.height(),i=(t-n)/2,r=n*e/100-this.$volumeBarScrubber.height()/2+i;this.$volumeBarFill.css({height:e+"%"}),this.$volumeBarScrubber.css({bottom:r})}},{key:"updateVolumeIcon",value:function(e){this.$volumeIcon.html(""),e>0?this.$volumeIcon.append(ba):this.$volumeIcon.append(Ea)}},{key:"startVolumeDrag",value:function(e){this.draggingVolumeBar=!0,this.mediaControl.$el.addClass("media-control-dragging"),this.mediaControl.setKeepVisible(),e&&e.preventDefault()}},{key:"stopDrag",value:function(e){this.draggingVolumeBar&&(this.mediaControl.resetKeepVisible(),this.mediaControl.$el.removeClass("media-control-dragging"),this.draggingVolumeBar=!1,this.isUserGesture=!0,this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"updateDrag",value:function(e){this.draggingVolumeBar&&(e.preventDefault(),this.setVolume(this.getVolumeFromUIEvent(e)))}},{key:"showVolumeBar",value:function(){Q.supportsTouchEvents||(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.triggerWillShowModalElement(),this.$el.removeClass("volume-hide"),this.mediaControl&&this.mediaControl.trigger(Tn.WM_VOLUME_SHOW),this.isVolumeBarVisible=!0)}},{key:"hideVolumeBar",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isVolumeBarVisible&&this.$volumeBarContainer&&("number"!=typeof t.timeout&&(t.timeout=150),this.draggingVolumeBar?this.hideVolumeId=setTimeout((function(){return e.hideVolumeBar(t)}),t.timeout):(this.hideVolumeId&&clearTimeout(this.hideVolumeId),this.hideVolumeId=setTimeout((function(){e.$el.addClass("volume-hide"),e.mediaControl&&e.mediaControl.trigger(Tn.WM_VOLUME_HIDE),e.isVolumeBarVisible=!1,e.triggerDidHideModalElement()}),t.timeout)))}},{key:"createCachedElements",value:function(){this.hasCachedElements=!0,this.$volumeBarContainer=this.$el.find(".bar-container"),this.$volumeIcon=this.$el.find(".drawer-icon"),this.$volumeBarBackground=this.$el.find(".bar-background"),this.$volumeBarFill=this.$el.find(".bar-fill-1"),this.$volumeBarScrubber=this.$el.find(".bar-scrubber")}},{key:"render",value:function(){if(!this.hasCachedElements){this.$el.html(this.template());var e=En.getStyleFrom('.clappr-player#wp3-player-0 .drawer-container[data-volume] {\n  z-index: 300;\n  position: relative;\n  cursor: pointer; }\n  .clappr-player#wp3-player-0 .drawer-container[data-volume] .media-control-button {\n    padding: 0; }\n  .clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide {\n    z-index: auto; }\n    .clappr-player#wp3-player-0 .drawer-container[data-volume].volume-hide .bar-container[data-volume] {\n      opacity: 0;\n      visibility: hidden; }\n\n.clappr-player#wp3-player-0 .drawer-icon-container {\n  width: 24px;\n  height: 24px; }\n\n.clappr-player#wp3-player-0 .bar-container[data-volume] {\n  will-change: visibility, opacity;\n  position: absolute;\n  bottom: 42px;\n  width: 30px;\n  height: 115px;\n  left: 8px;\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.85);\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume]:after {\n    content: "";\n    width: 100%;\n    position: absolute;\n    height: 10px;\n    bottom: -10px;\n    left: 0; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] {\n    position: relative;\n    top: 15px;\n    width: 2px;\n    margin-left: 14px;\n    background: rgba(255, 255, 255, 0.2);\n    border-radius: 10px;\n    height: calc(100% - 30px);\n    overflow: hidden;\n    box-shadow: inset 0 0 2px 0 rgba(0, 0, 0, 0.5); }\n    .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-background[data-volume] .bar-fill-1[data-volume] {\n      position: absolute;\n      bottom: 0;\n      background: #fff;\n      width: 100%;\n      height: 0;\n      transition: height .2s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] {\n    position: absolute;\n    left: 9px;\n    width: 12px;\n    height: 12px;\n    bottom: 40%;\n    transition: bottom .2s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-volume] .bar-scrubber[data-volume] .bar-scrubber-icon[data-volume] {\n      width: 100%;\n      height: 100%;\n      border-radius: 6px;\n      background-color: #fff;\n      box-shadow: 0 0 1px black; }\n',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.createCachedElements(),this.$volumeIcon.html(ba),this}}}]),n}(Ti),ka=bn.getTimeValues,_a=bn.getLiteralTimeValues,Sa=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).stopDragHandler=function(e){return n.stopDrag(e)},n.updateDragHandler=function(e){return n.updateDrag(e)},Q.supportsTouchEvents&&(Y(document).bind("touchend",n.stopDragHandler),Y(document).bind("touchmove",n.updateDragHandler)),Q.supportsTouchEvents&&!Q.isHybridDevice||(Y(document).bind("mouseup",n.stopDragHandler),Y(document).bind("mousemove",n.updateDragHandler)),n}return o(i,[{key:"name",get:function(){return"seekbar"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"center"}},{key:"template",get:function(){return Ve('<div class="seekbar">\n  <div class="bar-background" data-seekbar tabindex="0">\n    <div class="bar-fill-1" data-seekbar></div>\n    <div class="bar-fill-2" data-seekbar></div>\n    <div class="bar-hover" data-seekbar></div>\n  </div>\n  <div class="bar-scrubber" data-seekbar role="slider" aria-valuemin="0" aria-valuemax="0" tabindex="-1" aria-valuenow="0" aria-valuetext="Ponto do vídeo, 0 minuto e 0 segundo.">\n    <div class="bar-scrubber-icon" data-seekbar></div>\n  </div>\n</div>\n<div id="seek-feedback" aria-live="polite" class="visually-hidden"></div>\n')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"isLivePlayback",get:function(){return this.container&&this.container.getPlaybackType()===qe.LIVE}},{key:"attributes",get:function(){return{class:"bar-container","data-seekbar":""}}},{key:"events",get:function(){var e={click:this.seek,touchmove:this.startActionOnSeekBar,touchend:this.leaveActionOnSeekBar,touchstart:this.startSeekDrag},t={click:this.seek,mousemove:this.startActionOnSeekBar,mouseleave:this.leaveActionOnSeekBar,"mousedown .bar-scrubber[data-seekbar]":"startSeekDrag"},i=n(n({},e),t);return Q.isHybridDevice?i:Q.supportsTouchEvents?e:t}},{key:"destroy",value:function(){g(u(i.prototype),"destroy",this).call(this),Y(document).unbind("mouseup",this.stopDragHandler),Y(document).unbind("touchend",this.stopDragHandler),Y(document).unbind("mousemove",this.updateDragHandler),Y(document).unbind("touchmove",this.updateDragHandler)}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container,De.CONTAINER_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.container,De.CONTAINER_PROGRESS,this.updateProgressBar),this.listenTo(this.container,De.CONTAINER_SEEKED,this.updateAriaLiveText),this.setSeekPercentage(0))}},{key:"createCachedElements",value:function(){this.$seekBarContainer=this.$el,this.$seekBarHover=this.$el.find(".bar-hover[data-seekbar]"),this.$seekBarLoaded=this.$el.find(".bar-fill-1[data-seekbar]"),this.$seekBarPosition=this.$el.find(".bar-fill-2[data-seekbar]"),this.$seekBarScrubber=this.$el.find(".bar-scrubber[data-seekbar]"),this.$seekBarScrubberIcon=this.$el.find(".bar-scrubber-icon[data-seekbar]"),this.$seekBarFeedback=this.$el.find("#seek-feedback"),Q.isMobile&&(this.$seekBarHover.addClass("bar-hover-disable"),this.$seekBarScrubber.addClass("bar-scrubber-mobile")),this.mediaControl.$seekBarContainer=this.$seekBarContainer}},{key:"onPlayerResize",value:function(){this.setSeekPercentage(this.currentSeekPercentage)}},{key:"setSeekPercentage",value:function(e){e=Math.min(e,100);var t=this.$seekBarContainer.width()*e/100-this.$seekBarScrubber.width()/2;t=Math.max(t,-(this.$seekBarScrubber.width()-this.$seekBarScrubberIcon.width())/2),t=Math.min(t,this.$seekBarContainer.width()-this.$seekBarScrubber.width()/2-this.$seekBarScrubberIcon.width()/2),this.currentSeekPercentage=e;var n=this.$seekBarScrubberIcon.width()/4;isNaN(n)||isNaN(e)||isNaN(t)||(this.$seekBarPosition.css({width:"calc(".concat(e,"% + ").concat(n,"px)")}),this.$seekBarScrubber.css({transform:"translateX(".concat(t,"px)")}))}},{key:"stopDrag",value:function(e){this.draggingSeekBar&&(this.draggingSeekBar&&this.seek(e),this.mediaControl.$el.removeClass("media-control-dragging"),this.$seekBarLoaded.removeClass("media-control-notransition"),this.$seekBarPosition.removeClass("media-control-notransition"),this.$seekBarScrubber.removeClass("media-control-notransition media-control-dragging"),this.core.trigger(Tn.STOP_DRAGGING_SEEKBAR),this.draggingSeekBar=!1,this.mediaControl.resetKeepVisible())}},{key:"lastTouchEvent",value:function(e){var t=e.originalEvent?e.originalEvent:e;return t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t.changedTouches&&t.changedTouches.length>0?t.changedTouches[t.changedTouches.length-1]:{}}},{key:"updateDrag",value:function(e){if(this.draggingSeekBar){e.preventDefault();var t=((e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;t=Math.min(100,Math.max(t,0)),this.setSeekPercentage(t)}}},{key:"startSeekDrag",value:function(e){this.settings.seekEnabled&&(this.core.trigger(Tn.START_DRAGGING_SEEKBAR),this.draggingSeekBar=!0,this.mediaControl.setKeepVisible(),this.mediaControl.$el.addClass("media-control-dragging"),this.$seekBarLoaded.addClass("media-control-notransition"),this.$seekBarPosition.addClass("media-control-notransition"),this.$seekBarScrubber.addClass("media-control-notransition"),Q.supportsTouchEvents&&e&&e.preventDefault())}},{key:"startActionOnSeekBar",value:function(e){if(this.settings.seekEnabled){var t=(e.pageX||this.lastTouchEvent(e).pageX)-this.$seekBarContainer.offset().left-this.$seekBarHover.width()/2;this.$seekBarHover.css({left:t})}this.mediaControl.trigger(De.MEDIACONTROL_MOUSEMOVE_SEEKBAR,e)}},{key:"leaveActionOnSeekBar",value:function(e){this.mediaControl.trigger(De.MEDIACONTROL_MOUSELEAVE_SEEKBAR,e)}},{key:"seek",value:function(e){if(this.settings.seekEnabled){var t=e.pageX||this.lastTouchEvent(e).pageX||0,n=Math.max(0,t-this.$seekBarContainer.offset().left)/this.$seekBarContainer.width()*100;return n=Math.min(100,Math.max(n,.01)),this.container.seekPercentage(n),this.setSeekPercentage(n),!1}}},{key:"updateAriaLiveText",value:function(){var e=this.container.playback.currentTime,t=this.getAriaValueText(e);this.$seekBarFeedback.text(t)}},{key:"updateAriaValues",value:function(e){var t=e.current,n=e.total,i=this.getAriaValueText(t);this.$seekBarScrubber.attr("aria-valuenow",Math.round(t)),this.$seekBarScrubber.attr("aria-valuemax",Math.round(n)),this.$seekBarScrubber.attr("aria-valuetext",i)}},{key:"getAriaValueText",value:function(e){var t=m(ka(e),3),n=t[0],i=t[1],r=t[2];return this.getVideoPositionText(n,i,r)}},{key:"getVideoPositionText",value:function(e,t,n){var i=_a(e,t,n),r=i.hoursText,a=i.minutesText,o=i.secondsText;return this.container.isDvrInUse()?"Há".concat(r," ").concat(a," e ").concat(o," da transmissão."):this.isLivePlayback?"Reproduzindo Agora na TV / Ao Vivo.":"Ponto do vídeo,".concat(r," ").concat(a," e ").concat(o,".")}},{key:"updateProgressBar",value:function(e){var t=e.start/e.total*100,n=e.current/e.total*100;this.$seekBarLoaded.css({left:"".concat(t,"%"),width:"".concat(n-t,"%")})}},{key:"onTimeUpdate",value:function(e){this.draggingSeekBar||(this.currentPositionValue=e.current<0?0:e.current,this.currentDurationValue=e.total,this.renderSeekBar(),this.updateAriaValues(e))}},{key:"renderSeekBar",value:function(){null!==this.currentPositionValue&&null!==this.currentDurationValue&&(this.currentSeekBarPercentage=this.isLivePlayback?100:0,this.isLivePlayback&&!this.container.isDvrInUse()||(this.currentSeekBarPercentage=this.currentPositionValue/this.currentDurationValue*100),this.setSeekPercentage(this.currentSeekBarPercentage))}},{key:"render",value:function(){this.$el.html(this.template());var e=En.getStyleFrom(".clappr-player#wp3-player-0 .media-control.volume-modal--visible .bar-container[data-seekbar] {\n  opacity: 0.5; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .thumb-preview {\n  display: none !important; }\n\n.clappr-player#wp3-player-0 .media-control-panel__lower .bar-container[data-seekbar] {\n  padding: 12px 0; }\n\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n  transform: translate(-50%, -50%); }\n\n.clappr-player#wp3-player-0 .media-control.touch .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: none; }\n\n.clappr-player#wp3-player-0 .media-control-dragging .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n  transform: scale(2) !important; }\n\n.clappr-player#wp3-player-0 .bar-container__placeholder {\n  height: 36px; }\n\n.clappr-player#wp3-player-0 .bar-container[data-seekbar] {\n  position: absolute;\n  display: flex;\n  align-items: center;\n  width: calc(100% - 24px);\n  height: 24px;\n  cursor: pointer;\n  box-sizing: content-box;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  touch-action: manipulation;\n  top: calc(50% + 6px);\n  left: 50%;\n  transform: translate(-50%, -50%); }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] {\n    position: absolute;\n    display: flex;\n    align-self: center;\n    width: 100%;\n    height: 2px;\n    background-color: rgba(255, 255, 255, 0.2);\n    overflow: hidden;\n    top: 50%;\n    left: 50%;\n    will-change: transform;\n    transform-origin: top;\n    transform: scaleY(1) translate(-50%, -50%);\n    transition: transform .2s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar],\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      position: absolute;\n      top: 0;\n      left: 0;\n      width: 0;\n      height: 100%; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-1[data-seekbar] {\n      background-color: rgba(255, 255, 255, 0.3);\n      transition: width .1s ease; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-fill-2[data-seekbar] {\n      background-color: #ffffff; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: none;\n      position: absolute;\n      width: 5px;\n      height: 100%;\n      background-color: #ff0000; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] {\n    transform: scaleY(2) translate(-50%, -50%); }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover[data-seekbar] {\n      display: block; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-background[data-seekbar] .bar-hover-disable[data-seekbar] {\n      display: none; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar]:hover .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n    transform: scale(1.5); }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar].seek-disabled {\n    cursor: default; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] {\n    position: relative;\n    display: flex;\n    align-self: center;\n    left: 0;\n    width: 8px;\n    height: 8px;\n    text-align: center;\n    z-index: 200; }\n    .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber[data-seekbar] .bar-scrubber-icon[data-seekbar] {\n      display: inline-block;\n      position: absolute;\n      left: 0;\n      background-color: #fff;\n      border-radius: 50%;\n      height: 100%;\n      width: 100%;\n      will-change: transform;\n      transform: scale(1);\n      transition: transform .2s ease; }\n  .clappr-player#wp3-player-0 .bar-container[data-seekbar] .bar-scrubber-mobile[data-seekbar] {\n    transition: unset; }\n",{playerId:this.core.options.playerId}),t=Y("<div>").addClass("bar-container__placeholder");return this.$el.append(e[0]),this.$el.parent().append(t),this.createCachedElements(),this}}]),i}(Ti),wa=10,Ca=["1","2","3","4","5","6","7","8","9","0"],Ia={left:-10,right:10,"shift left":-15,"shift right":15,"shift ctrl left":-20,"shift ctrl right":20},Da=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"quick_seek"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"middle"}},{key:"position",get:function(){return""}},{key:"template",get:function(){return Ve('<div class="quick-seek-container">\n  <div class="quick-seek-placeholder quick-seek-placeholder--left">\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--left"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= backwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label left"><%= currentSeekTime %></span>\n    </div>\n  </div>\n  <div class="quick-seek-placeholder quick-seek-placeholder--right">\n    <div class="quick-seek-placeholder-background quick-seek-placeholder-background--right"></div>\n    <div class="quick-seek-arrow-placeholder">\n      <figure class="quick-seek-arrow">\n        <%= forwardSeekArrow %>\n      </figure>\n      <span class="quick-seek-label"><%= currentSeekTime %></span>\n    </div>\n  </div>\n</div>')}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"willBackwardToVideoEnd",get:function(){return this.container.currentTime-3<0}},{key:"willForwardToVideoEnd",get:function(){return this.container.currentTime+wa>this.container.getDuration()}},{key:"currentSeekTime",get:function(){return this._currentSeekTime||wa},set:function(e){e<=990&&(this._currentSeekTime=e)}},{key:"attributes",get:function(){return{class:"quick-seek hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Tn.MEDIACONTROL_DOUBLE_TAP,this.onMediaControlDoubleTap),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.updateContainer),this.listenTo(this.mediaControl,De.MEDIACONTROL_SHOW,this.onMediaControlShow)}},{key:"bindContainerEvents",value:function(){this.listenToOnce(this.container,De.CONTAINER_PLAY,this.bindKeyEvents),this.listenTo(this.container,De.CONTAINER_ENDED,this.onContainerEnd)}},{key:"bindKeyEvents",value:function(){var e=this;this.kibo&&(this.unbindKeyEvents(),Object.keys(Ia).forEach((function(t){e.bindKeyAndShow(t,(function(){return e.onKeyPress(t)}))})),Ca.forEach((function(t){e.bindKeyAndShow(t,(function(){return e.canSeek&&e.container.seekPercentage(10*t+.1)}))})))}},{key:"unbindKeyEvents",value:function(){this.kibo&&(this.kibo.off(Object.keys(Ia)),this.kibo.off(Ca))}},{key:"updateContainer",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.bindContainerEvents()}},{key:"onContainerEnd",value:function(){this.unbindKeyEvents(),this.listenToOnce(this.container,De.CONTAINER_PLAY,this.bindKeyEvents)}},{key:"onKeyPress",value:function(e){this.canSeek&&(this.container.trigger(Tn.WILL_QUICK_SEEK),this.seekRelative(Ia[e]))}},{key:"seekRelative",value:function(e){var t=this.container.getCurrentTime(),n=this.container.getDuration(),i=Math.min(Math.max(t+e,0),n);i=Math.min(100*i/n+.01,100),this.container.seekPercentage(i)}},{key:"onMediaControlDoubleTap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide;!this.canSeek||"left"===t&&this.willBackwardToVideoEnd||"right"===t&&this.willForwardToVideoEnd||(this.container.trigger(Tn.WILL_QUICK_SEEK),"vibrate"in navigator&&window.navigator.vibrate(15),this.feedBackInProgress?this.lastTapSide===t?this.updateQuickSeekFeedback():(this.hideQuickSeekFeedback(),this.showQuickSeekFeedback(t)):this.showQuickSeekFeedback(t),this.container.seek(this.targetSeekValue(t)))}},{key:"targetSeekValue",value:function(e){var t="right"===e?wa:-10;return Math.min(this.container.getDuration()-1,Math.max(.1,this.container.currentTime+t))}},{key:"cacheAnimatedElements",value:function(e){this.background=this.$el.find(".quick-seek-placeholder-background--".concat(e)),this.arrow=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-arrow-placeholder .quick-seek-arrow")),this.label=this.$el.find(".quick-seek-placeholder--".concat(e," .quick-seek-label"))}},{key:"showQuickSeekFeedback",value:function(e){var t=this;this.lastTapSide=e,this.feedBackInProgress=!0,this.showPlugin(),this.cacheAnimatedElements(e),this.resetLabelClasses(),this.background[0].addEventListener("transitionend",(function(e){return t.onBackgroundShow(e)}),{once:!0}),setTimeout((function(){return t.background.addClass("background-show")})),this.displayArrow()}},{key:"onBackgroundShow",value:function(e){e.stopPropagation(),"opacity"!==e.propertyName&&this.background.addClass("opacity-transition")}},{key:"displayArrow",value:function(){var e=this;this.arrow[0].addEventListener("transitionend",(function(t){return e.onArrowShow(t)}),{once:!0}),setTimeout((function(){return e.arrow.addClass("visible")})),this.spinArrow()}},{key:"onArrowShow",value:function(e){e.stopPropagation(),this.displayLabel()}},{key:"spinArrow",value:function(){var e=this;"left"===this.lastTapSide?(!this.leftArrowDegrees&&(this.leftArrowDegrees=0),this.leftArrowDegrees-=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.leftArrowDegrees,"deg);")}))):(!this.rightArrowDegrees&&(this.rightArrowDegrees=0),this.rightArrowDegrees+=360,setTimeout((function(){return e.arrow[0].style.cssText="transform: rotate(".concat(e.rightArrowDegrees,"deg);")})))}},{key:"displayLabel",value:function(){var e=this;this.currentSeekTime>=100&&this.label.addClass("triple-digit"),this.label.text(this.currentSeekTime),this.label[0].addEventListener("transitionend",(function(t){return e.onLabelShow(t)}),{once:!0}),setTimeout((function(){return e.label.addClass("visible")}))}},{key:"onLabelShow",value:function(e){var t=this;e.stopPropagation(),this.timeoutId=setTimeout((function(){t.hideQuickSeekFeedback()}),400)}},{key:"updateQuickSeekFeedback",value:function(){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.spinArrow(),this.currentSeekTime+=wa,this.hideLabel(),990!==this.currentSeekTime&&setTimeout((function(){e.displayLabel()}),350)}},{key:"hideQuickSeekFeedback",value:function(){this.feedBackInProgress&&(clearTimeout(this.timeoutId),this.hideLabel(),this.hideArrow(),this.hideBackground(),this.currentSeekTime=wa,this.feedBackInProgress=!1,this.hidePlugin())}},{key:"onMediaControlShow",value:function(){this.hideQuickSeekFeedback()}},{key:"hideLabel",value:function(){this.label.removeClass("visible")}},{key:"resetLabelClasses",value:function(){this.label.removeClass("triple-digit")}},{key:"hideArrow",value:function(){this.arrow.removeClass("visible")}},{key:"hideBackground",value:function(){this.background.removeClass("background-show")}},{key:"showPlugin",value:function(){this.$el.removeClass("hidden")}},{key:"hidePlugin",value:function(){this.$el.addClass("hidden")}},{key:"destroy",value:function(){g(u(n.prototype),"destroy",this).call(this),this.unbindKeyEvents()}},{key:"render",value:function(){var e=En.getStyleFrom(".clappr-player#wp3-player-0 .media-control.h720 .quick-seek-label {\n  font-size: 8px;\n  margin-bottom: 5px; }\n  .clappr-player#wp3-player-0 .media-control.h720 .quick-seek-label.triple-digit {\n    font-size: 6px;\n    left: calc(50% - 6px); }\n\n.clappr-player#wp3-player-0 .media-control.h720 .quick-seek-arrow {\n  transform-origin: 16px 17px; }\n  .clappr-player#wp3-player-0 .media-control.h720 .quick-seek-arrow svg {\n    width: 32px;\n    height: 32px; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek.hidden {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-container {\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-label {\n    display: inline-block;\n    position: absolute;\n    font-weight: bold;\n    font-family: 'opensans-regular';\n    font-weight: 700;\n    letter-spacing: 0px;\n    font-size: 12px;\n    color: #eee;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n    margin-bottom: 8px;\n    top: 40%;\n    left: 36%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-label.triple-digit {\n      font-size: 10px;\n      left: calc(50% - 9px); }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-label.visible {\n      opacity: 1; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-arrow-placeholder {\n    position: relative;\n    display: flex; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-arrow {\n    display: inline-block;\n    justify-content: center;\n    opacity: 0;\n    transform-origin: 24px 26px;\n    transition: transform 0.6s ease, opacity 0.3s ease;\n    margin: 0; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-arrow.visible {\n      opacity: 1; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-arrow svg {\n      width: 48px;\n      height: 48px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    color: #eee;\n    width: 45%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background {\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      z-index: -1;\n      right: -50%;\n      bottom: 0px;\n      border-radius: 50%;\n      background: rgba(0, 0, 0, 0.3);\n      transform: scaleX(0.9) scaleY(1.4);\n      transform-origin: center center;\n      opacity: 0;\n      will-change: opacity, transform; }\n      .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background--left {\n        left: -50%; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder--left .quick-seek-arrow-placeholder {\n      flex-direction: row-reverse; }\n    .clappr-player#wp3-player-0 .media-control .quick-seek-placeholder-background.background-show {\n      opacity: 1;\n      transition: transform 0.6s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek.media-control-element {\n    padding: 0;\n    opacity: 1 !important; }\n",{playerId:this.core.options.playerId});return this.$el.html(this.template({backwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2L14 12l10 10v-8c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"/>\n    </g>\n</svg>',forwardSeekArrow:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n    <g fill="none" fill-rule="evenodd">\n        <path fill="#111" fill-opacity="0" d="M0 0H48V48H0z"/>\n        <path fill="#EEE" fill-rule="nonzero" d="M24 10V2l10 10-10 10v-8c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12h4c0 8.84-7.16 16-16 16S8 34.84 8 26s7.16-16 16-16z"/>\n    </g>\n</svg>',currentSeekTime:this.currentSeekTime})),this.$el.append(e[0]),this}}]),n}(Ti),Ra=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).mouseOverSeekbar=!1,i.draggingSeekbar=!1,i.isVisible=!1,i.waitingTimeoutToShow=!1,i.waitingTimeoutToHide=!1,i}return o(n,[{key:"name",get:function(){return"quick_seek_hint"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return Q.isMobile?"upper":"lower"}},{key:"position",get:function(){return Q.isMobile?"":"between"}},{key:"template",get:function(){return Ve('<span class="quick-seek-hint__label">\n  <% if (isMobile) { %>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= backward10 %></span>\n    Toque duplo para avançar\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= forward10 %></span>\n  <% } else { %>\n    Use as teclas\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--left"><%= arrow %></span>\n    <span class="quick-seek-hint__arrow quick-seek-hint__arrow--right"><%= arrow %></span>\n  para avançar\n  <% } %>\n</span>\n')}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"settings",get:function(){return this.container?this.container.settings:{}}},{key:"canSeek",get:function(){return this.settings.seekEnabled}},{key:"shouldDisable",get:function(){return this.currentWidth<=(Q.isMobile?361:600)}},{key:"attributes",get:function(){return{class:"quick-seek-hint hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize),this.bindSeekbarEvents()}},{key:"bindSeekbarEvents",value:function(){this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.listenTo(this.core,Tn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.listenTo(this.core,Tn.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!0}},{key:"unbindSeekbarEvents",value:function(){this.stopListening(this.mediaControl,De.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.onMousemoveSeekbar),this.stopListening(this.mediaControl,De.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeaveSeekbar),this.stopListening(this.core,Tn.START_DRAGGING_SEEKBAR,this.onStartDraggingSeekbar),this.stopListening(this.core,Tn.STOP_DRAGGING_SEEKBAR,this.onStopDraggingSeekbar),this.seekbarEventsActive=!1}},{key:"onStartDraggingSeekbar",value:function(){this.draggingSeekbar=!0}},{key:"onStopDraggingSeekbar",value:function(){this.draggingSeekbar=!1,this.waitingTimeoutToShow&&this.resetTimeoutToShow(),!this.waitingTimeoutToHide||!Q.isMobile&&this.mouseOverSeekbar||(this.resetTimeoutToHide(),this.hide())}},{key:"onMousemoveSeekbar",value:function(){var e=this;if(this.mouseOverSeekbar=!0,!(this.isVisible||this.waitingTimeoutToShow||this.draggingSeekbar&&!Q.isMobile||this.waitingMouseLeaveSeekbarAfterHide)){if(Q.isMobile)return this.show();this.waitingTimeoutToShow=!0,this.showTimeoutId=setTimeout((function(){e.showTimeoutId=null,e.waitingTimeoutToShow=!1,e.show()}),1e3)}}},{key:"onMouseLeaveSeekbar",value:function(){this.mouseOverSeekbar=!1,this.waitingMouseLeaveSeekbarAfterHide=!1,this.draggingSeekbar||(this.waitingTimeoutToHide&&this.resetTimeoutToHide(),this.waitingTimeoutToShow&&this.resetTimeoutToShow(),this.hide())}},{key:"resetTimeoutToHide",value:function(){clearTimeout(this.hideTimeoutId),this.waitingTimeoutToHide=!1,this.hideTimeoutId=null}},{key:"resetTimeoutToShow",value:function(){clearTimeout(this.showTimeoutId),this.waitingTimeoutToShow=!1,this.showTimeoutId=null}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?(this.unbindSeekbarEvents(),this.$el.addClass("quick-seek-hint--disabled")):(!this.seekbarEventsActive&&this.bindSeekbarEvents(),this.$el.removeClass("quick-seek-hint--disabled"))}},{key:"show",value:function(){this.isVisible||(this.isVisible=!0,this.core.trigger(Tn.WILL_SHOW_QUICK_SEEK_HINT),this.$el.removeClass("hidden"),Q.isMobile&&this.$el.addClass("media-control-element--sticky"),this.hideDelayed())}},{key:"hideDelayed",value:function(){var e=this;this.waitingTimeoutToHide=!0,this.hideTimeoutId=setTimeout((function(){e.hideTimeoutId=null,e.waitingTimeoutToHide=!1,e.hide()}),4e3)}},{key:"hide",value:function(){this.mouseOverSeekbar&&(this.waitingMouseLeaveSeekbarAfterHide=!0),this.isVisible&&(this.core.trigger(Tn.WILL_HIDE_QUICK_SEEK_HINT),this.$el.addClass("hidden"),Q.isMobile&&this.$el.removeClass("media-control-element--sticky"),this.isVisible=!1)}},{key:"render",value:function(){var e=En.getStyleFrom('.clappr-player#wp3-player-0 .media-control.ad .quick-seek-hint {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: flex;\n  width: 100%;\n  padding-right: 0;\n  padding-left: 0; }\n  .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__label {\n    margin: 0 auto; }\n  .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow {\n    width: 24px;\n    height: 24px; }\n    .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--left {\n      margin-left: 0;\n      margin-right: 8px; }\n    .clappr-player#wp3-player-0 .media-control.touch .quick-seek-hint__arrow--right {\n      margin-right: 0;\n      margin-left: 8px;\n      transform: rotate(0); }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint--disabled {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint.hidden {\n  opacity: 0;\n  visibility: hidden; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__container {\n  display: flex; }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow {\n  display: inline-block;\n  width: 20px;\n  height: 20px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow svg {\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--left {\n    margin-left: 8px;\n    margin-right: 4px; }\n  .clappr-player#wp3-player-0 .media-control .quick-seek-hint__arrow--right {\n    margin-right: 8px;\n    transform: rotate(180deg); }\n\n.clappr-player#wp3-player-0 .media-control .quick-seek-hint__label {\n  display: flex;\n  align-items: center;\n  opacity: 0.8;\n  font-family: "opensans-regular";\n  font-size: 14px;\n  font-weight: normal;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.14;\n  letter-spacing: normal;\n  color: #eeeeee; }\n',{playerId:this.core.options.playerId});return this.$el.html(this.template({isMobile:Q.isMobile,arrow:'<svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><rect stroke="#EEE" opacity=".3" x=".5" y=".5" width="19" height="19" rx="2"/><path d="M8 9h8v2H8v3l-4-4 4-4v3z" fill="#EEE"/></g></svg>',backward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 5V1L7 6l5 5V7c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6H4c0 4.4 3.6 8 8 8s8-3.6 8-8-3.6-8-8-8zm-1.1 11H10v-3.3L9 13v-.7l1.8-.6h.1V16zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.9-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>',forward10:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M4 13c0 4.4 3.6 8 8 8s8-3.6 8-8h-2c0 3.3-2.7 6-6 6s-6-2.7-6-6 2.7-6 6-6v4l5-5-5-5v4c-4.4 0-8 3.6-8 8zm6.8 3H10v-3.3L9 13v-.7l1.8-.6h.1V16h-.1zm4.3-1.8c0 .3 0 .6-.1.8l-.3.6s-.3.3-.5.3-.4.1-.6.1c-.2 0-.4 0-.6-.1-.2-.1-.3-.2-.5-.3-.2-.1-.2-.3-.3-.6-.1-.3-.1-.5-.1-.8v-.7c0-.3 0-.6.1-.8l.3-.6s.3-.3.5-.3.4-.1.6-.1c.2 0 .4 0 .6.1.2.1.3.2.5.3.2.1.2.3.3.6.1.3.1.5.1.8v.7zm-.8-.8v-.5s-.1-.2-.1-.3c0-.1-.1-.1-.2-.2s-.2-.1-.3-.1c-.1 0-.2 0-.3.1l-.2.2s-.1.2-.1.3v2s.1.2.1.3c0 .1.1.1.2.2s.2.1.3.1c.1 0 .2 0 .3-.1l.2-.2s.1-.2.1-.3v-1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'})),this.$el.append(e[0]),this}}]),n}(Ti);function xa(e,t){return encodeURIComponent(e+"?utm_source=".concat(t,"&utm_medium=share-player-desktop"))}function La(e,t){var n=500,i=window.screen.width/2-260,r=window.screen.height/2-300,a="height=".concat(n,",width=").concat(n,",left=").concat(i,",top=").concat(r,",screenX=").concat(i,",screenY=").concat(r,",\n               resizable=yes,status=no,toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");window.open(e,t,a)}var Pa='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n    </g>\n</svg>\n<span class="visually-hidden">Fechar</span>',Oa=bn.copyToClipboard,Ma=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).core=e,i.shouldRender=!1,i.$el.on("click",(function(){i.showShareBox()})),i.keyDownHandler=function(e){"Escape"===e.key&&(e.preventDefault(),i.hideModal())},i.options.share&&!1===i.options.share.enabled&&i.disable(),i}return o(n,[{key:"name",get:function(){return"share"}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return Ve('<div class="share__box" role="dialog" aria-modal="true">\n  <button class="share__close"></button>\n  <% for (var i = 0; i < shareItems.length; i++) { %>\n  <button class="share__button" data-share-item="<%= shareItems[i].name %>">\n    <%= shareItems[i].element %>\n  </button>\n  <% } %>\n  <h1 class="share__title">Link Copiado</h1>\n  <div class="share__item-copied-box">\n    <h2 class="share__subtitle"><%= videoUrl %></h2>\n  </div>\n</div>\n')}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"attributes",get:function(){return{class:"media-control-button","data-share":"","data-controls":""}}},{key:"bindEvents",value:function(){this.listenTo(this.mediaControl,Tn.WM_SHARE_SHOW,this.start),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"start",value:function(){var e=this,t=this.modal.find(".share__box"),n=this.modal.find(".share__close");t&&t.on("click",(function(t){t&&t.stopPropagation(),e.hideModal()})),n&&n.append(Pa),Y(document).on("keydown",this.keyDownHandler)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.playback&&this.stopListening(this.playback),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.listenTo(this.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,Tn.WM_RESOURCE_SELECTED,this.checkUrl),this.listenTo(this.container,De.CONTAINER_SETTINGSUPDATE,this.shouldHideModal)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.shareUrl=this.video.urlForConsumption.replace(/(^\w+:|^)\/\//,"");var t=this.core.options.share&&this.core.options.share.socialList;this.loadSocialList(t||[])}},{key:"checkUrl",value:function(){this.shouldRender=!0,this.render()}},{key:"shouldHideModal",value:function(){var e=this.playback&&this.playback.getPlaybackType();"vod"!==e&&"live"!==e&&this.hideModal()}},{key:"loadSocialList",value:function(e){e&&e.length>0?this.socialList=this.verifySocialList(e):this.socialList=this.getDefaultSocialList()}},{key:"verifySocialList",value:function(e){var t=this,n=[];return e.forEach((function(e){t.getDefaultSocialList().forEach((function(t){t.name===e&&n.push(t)}))})),n}},{key:"getDefaultSocialList",value:function(){var e=this;return[{name:"facebook",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M15.04 20v-6.196h2.08l.31-2.415h-2.39V9.848c0-.7.194-1.176 1.196-1.176h1.28v-2.16c-.222-.03-.981-.095-1.864-.095-1.844 0-3.106 1.125-3.106 3.192v1.78h-2.085v2.415h2.085V20H4.883C4.395 20 4 19.605 4 19.117V4.883C4 4.395 4.395 4 4.883 4h14.234c.488 0 .883.395.883.883v14.234c0 .488-.395.883-.883.883H15.04z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar no Facebook</span>',onClickAction:function(){var t,n,i,r;t=e.video.urlForConsumption,n=e.video.title,i=xa(t,"facebook"),r="?app_id=".concat("289255557788943","&display=popup&href=").concat(i),-1!=t.search("globoplay")&&(r+="&hashtag=".concat(encodeURIComponent("#GloboPlay"))),La("".concat("https://www.facebook.com/dialog/share").concat(r),n)}},{name:"twitter",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8.66 19.617c6.794 0 10.508-5.623 10.508-10.499 0-.16-.003-.319-.01-.477.72-.52 1.348-1.17 1.842-1.91-.662.293-1.374.491-2.12.58.762-.457 1.347-1.18 1.623-2.04-.713.422-1.504.729-2.345.895C17.484 5.449 16.525 5 15.462 5c-2.039 0-3.693 1.653-3.693 3.69 0 .29.033.57.096.841-3.07-.154-5.79-1.623-7.612-3.855-.318.545-.5 1.178-.5 1.854 0 1.28.652 2.41 1.643 3.072-.606-.019-1.175-.185-1.673-.462v.048c0 1.787 1.273 3.279 2.963 3.617-.31.084-.637.13-.974.13-.238 0-.47-.024-.694-.067.47 1.466 1.833 2.533 3.45 2.563-1.264.99-2.857 1.58-4.587 1.58-.298 0-.592-.017-.881-.051 1.634 1.046 3.575 1.657 5.661 1.657" fill="#FFF" fill-rule="nonzero"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar no Twitter</span>',onClickAction:function(){var t,n,i,r,a,o,s,l;t=e.video.urlForConsumption,n=e.video.title,i=e.video.program,r=function(e){return e?"#".concat(e.split(" ").map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("").replace(/[-:]/g,"")):""}(i),a=-1!=t.search("globoplay")?" pelo #GloboPlay":"",o=r&&a?"Assista ".concat(r):"".concat(n),s=xa(t,"twitter"),l=encodeURIComponent("".concat(o).concat(a)),La("https://twitter.com/intent/tweet"+"?text=".concat(l,"&url=").concat(s),n)}},{name:"link",element:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.71-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Copiar link do vídeo</span>',onClickAction:function(t){t.stopPropagation(),e.showLinkCopiedBox(),Oa(e.video.urlForConsumption,e.modal)}}]}},{key:"hideModal",value:function(){var e=this.modal&&this.modal.find(".share__box"),t=e&&e.contents();!t||t&&!t.length||(e.off("click"),this.mediaControl.trigger(Tn.WM_SHARE_HIDE),this.core.trigger(Tn.WM_SHARE_HIDE),this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.triggerDidHideModalElement(),this.hasPlayingBeforeModal&&this.playback.play(),Y(document).off("keydown",this.keyDownHandler))}},{key:"render",value:function(){if(this.shouldRender){this.shouldRender=!1,this.$el.html("");var e=En.getStyleFrom(".clappr-player#wp3-player-0 .media-control.w360 .share__box--link-copied .share__button[data-share-item='link'] {\n  transform: translate(-286%, 0px); }\n\n.clappr-player#wp3-player-0 .media-control.w360 .share__button {\n  width: 40px;\n  height: 40px;\n  padding: 4px;\n  margin-left: 32px; }\n  .clappr-player#wp3-player-0 .media-control.w360 .share__button:first-child {\n    margin-left: 0; }\n  .clappr-player#wp3-player-0 .media-control.w360 .share__button:nth-last-child(3) {\n    margin-right: 0; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .share__close {\n  box-sizing: content-box;\n  padding: 12px;\n  top: 0;\n  right: 0; }\n  .clappr-player#wp3-player-0 .media-control.w360 .share__close:active, .clappr-player#wp3-player-0 .media-control.w360 .share__close:focus {\n    outline: 1; }\n\n.clappr-player#wp3-player-0 .share__box {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__button {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__button[data-share-item='link'] {\n    visibility: visible;\n    transition: transform 0.3s ease;\n    transform: translate(-344%, 0px);\n    opacity: 1;\n    cursor: default; }\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__item-copied-box,\n  .clappr-player#wp3-player-0 .share__box--link-copied .share__title {\n    transition: visibility 0.7s ease, opacity 0.7s ease;\n    visibility: visible;\n    opacity: 1; }\n\n.clappr-player#wp3-player-0 .share__button {\n  padding: 0px;\n  background-color: transparent;\n  border: 0;\n  opacity: 0.6;\n  cursor: pointer;\n  transition: opacity 0.2s ease;\n  width: 48px;\n  height: 48px;\n  margin-left: 56px;\n  box-sizing: content-box; }\n  .clappr-player#wp3-player-0 .share__button:active, .clappr-player#wp3-player-0 .share__button:focus {\n    outline: 1; }\n  .clappr-player#wp3-player-0 .share__button:hover, .clappr-player#wp3-player-0 .share__button:focus {\n    opacity: 1; }\n  .clappr-player#wp3-player-0 .share__button svg {\n    width: 100%; }\n  .clappr-player#wp3-player-0 .share__button:first-child {\n    margin-left: 0; }\n  .clappr-player#wp3-player-0 .share__button:nth-last-child(3) {\n    margin-right: 0; }\n\n.clappr-player#wp3-player-0 .share__item-copied-box {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  position: absolute;\n  top: calc(50% + 22px);\n  left: 0;\n  opacity: 0;\n  visibility: hidden; }\n\n.clappr-player#wp3-player-0 .share__title {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  position: absolute;\n  font-family: 'opensans-regular', sans-serif;\n  font-size: 16px;\n  color: #ffffff;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  cursor: default;\n  visibility: hidden;\n  top: calc(50% - 13px);\n  left: calc(50% - 22px); }\n\n.clappr-player#wp3-player-0 .share__subtitle {\n  margin: 0;\n  border: 0;\n  padding: 0;\n  font: inherit;\n  padding: 0 35px;\n  max-width: 100%;\n  word-wrap: break-word;\n  font-family: 'opensans-regular', sans-serif;\n  font-size: 12px;\n  letter-spacing: -0.5px;\n  color: #ffffff;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n          user-select: text;\n  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);\n  margin: 0; }\n\n.clappr-player#wp3-player-0 .share__close {\n  background-color: transparent;\n  border: 0;\n  padding: 0;\n  transition: opacity 0.3s ease;\n  opacity: 0.6;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 24px;\n  height: 24px;\n  cursor: pointer; }\n  .clappr-player#wp3-player-0 .share__close:hover, .clappr-player#wp3-player-0 .share__close:focus {\n    opacity: 1; }\n  .clappr-player#wp3-player-0 .share__close svg {\n    width: 100%;\n    height: 100%; }\n  .clappr-player#wp3-player-0 .share__close:active, .clappr-player#wp3-player-0 .share__close:focus {\n    outline: 1; }\n",{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M17 16.08c-.76 0-1.44.3-1.96.77L7.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L7.04 9.81C6.5 9.31 5.79 9 5 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92 0-1.61-1.31-2.92-2.92-2.92z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Compartilhar vídeo</span>'),this}}},{key:"bindShareEvents",value:function(){var e=this;this.socialList.forEach((function(t){var n=e.modal.find(".share__button[data-share-item=".concat(t.name,"]"));"function"==typeof t.onClickAction&&n.on("click",t.onClickAction)}))}},{key:"showShareBox",value:function(e){var t=this;e&&e.stopPropagation(),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause();var n=this.template({shareItems:this.socialList,videoUrl:this.shareUrl});this.triggerWillShowModalElement(),this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_SHOW,n,{hidePanels:!0}),this.mediaControl.trigger(Tn.WM_SHARE_SHOW),this.core.trigger(Tn.WM_SHARE_SHOW),this.mediaControl.setKeepVisible(),this.bindShareEvents();var i=this.modal.find(".share__button, .share__item-copied-box, .share__title");i&&i.on("click",(function(e){return e.stopPropagation()})),setTimeout((function(){t.modal.find(".share__close").focus()}),500)}},{key:"showLinkCopiedBox",value:function(){var e=this.modal.find(".share__box");e&&e.addClass("share__box--link-copied")}}]),n}(Ti),Na='<div class="unmute-modal">\n  <div class="unmute-modal__button-box">\n    <button class="unmute-modal__button unmute-modal__button--on unmute-modal__button--hide" tabindex="0"><%= volumeOnIcon %></button>\n    <button class="unmute-modal__button unmute-modal__button--off" tabindex="0"><%= volumeOffIcon %></button>\n    <span class="unmute-modal__label">Ativar som</span>\n  </div>\n</div>\n',Ba=bn.autoplayManager,Ua=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"tap_to_unmute"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"template",get:function(){return Ve(Na)}},{key:"modal",get:function(){return this.mediaControl&&this.mediaControl.$modal}},{key:"mutedAutoplay",get:function(){return this.idPlayback&&this.idPlayback.mutedAutoplay}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents)}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.idPlayback=this.core.activePlayback,this.listenToOnce(this.container,De.CONTAINER_PLAY,this.showUnmuteModal),this.listenToOnce(this.container,Tn.WM_UNMUTED,this.hideUnmuteModal)}},{key:"bindUnmuteModalEvents",value:function(){this.modal&&this.modal.on("click",this.onUnmuteModalClick.bind(this))}},{key:"showUnmuteModal",value:function(){var e=this,t=this.options.chromeless&&!Q.isMobile,n=this.options.mute||this.mutedAutoplay&&!Ba.playerHasConsent;!t&&n&&(this.renderUnmuteModal(),this.isVisible=!0,setTimeout((function(){e.hideLabel()}),5e3))}},{key:"renderUnmuteModal",value:function(){var e=Ve(Na)({volumeOffIcon:Ea,volumeOnIcon:ba}),t=En.getStyleFrom('.clappr-player#wp3-player-0 .unmute-modal {\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  position: absolute;\n  pointer-events: auto;\n  right: 0px;\n  bottom: 0px;\n  z-index: 998;\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .unmute-modal__button-box {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 32px;\n    background-color: rgba(0, 0, 0, 0.8);\n    width: 118px;\n    transition: width .5s ease;\n    box-sizing: border-box;\n    margin: 12px;\n    border-radius: 8px; }\n    .clappr-player#wp3-player-0 .unmute-modal__button-box--no-label {\n      width: 40px; }\n  .clappr-player#wp3-player-0 .unmute-modal__button {\n    background-color: transparent;\n    border: 0;\n    opacity: 1;\n    cursor: pointer;\n    margin: 0;\n    padding: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .unmute-modal__button--hide {\n      display: none; }\n    .clappr-player#wp3-player-0 .unmute-modal__button:hover, .clappr-player#wp3-player-0 .unmute-modal__button:focus {\n      opacity: 1; }\n    .clappr-player#wp3-player-0 .unmute-modal__button:active, .clappr-player#wp3-player-0 .unmute-modal__button:focus {\n      outline: 1; }\n    .clappr-player#wp3-player-0 .unmute-modal__button svg {\n      height: 24px;\n      width: 24px; }\n  .clappr-player#wp3-player-0 .unmute-modal__label {\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    line-height: 1.14;\n    color: #ffffff;\n    width: 77px;\n    padding-left: 7px;\n    opacity: 1;\n    transition: width .5s ease;\n    margin-top: -2px; }\n    .clappr-player#wp3-player-0 .unmute-modal__label--hide {\n      width: 0;\n      opacity: 0;\n      padding: 0; }\n',{playerId:this.core.options.playerId});this.mediaControl&&this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_SHOW,e,{hidePanels:!0}),this.core.trigger(Tn.TAP_TO_UNMUTE_SHOW),this.modal&&this.modal.find(".unmute-modal").append(t[0]),this.mediaControl&&this.mediaControl.setKeepVisible(),this.bindUnmuteModalEvents(),this.mediaControl&&this.mediaControl.$el.addClass("media-control--no-background")}},{key:"onUnmuteModalClick",value:function(e){var t=this;e&&e.stopPropagation(),this.core.trigger(Tn.TAP_TO_UNMUTE_CLICKED),this.hideLabel(),this.toggleUnmuteButton(),setTimeout((function(){t.hideUnmuteModal()}),1e3)}},{key:"hideUnmuteModal",value:function(){this.isVisible&&(this.modal.off("click"),this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_HIDE),this.isVisible=!1,this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--no-background"))}},{key:"toggleUnmuteButton",value:function(){this.modal&&(this.modal.find(".unmute-modal__button--off").addClass("unmute-modal__button--hide"),this.modal.find(".unmute-modal__button--on").removeClass("unmute-modal__button--hide"))}},{key:"hideLabel",value:function(){this.modal&&(this.modal.find(".unmute-modal__label").addClass("unmute-modal__label--hide"),this.modal.find(".unmute-modal__button-box").addClass("unmute-modal__button-box--no-label"))}},{key:"render",value:function(){return this.$el.html(""),this}},{key:"destroy",value:function(){this._mediaControl=null,g(u(n.prototype),"destroy",this).call(this)}}]),n}(ze),Fa=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"live_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"left"}},{key:"label",get:function(){return this.options&&this.options.isLiveContent?"AO VIVO":"AGORA"}},{key:"isLive",get:function(){return this.container&&this.container.getPlaybackType()===qe.LIVE}},{key:"attributes",get:function(){return{class:"live-indicator live-indicator--hide","aria-hidden":"true"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.resetDvrState(),this.updateState(),this.listenTo(this.container,De.CONTAINER_PLAYBACKDVRSTATECHANGED,this.onDVRUpdated),this.listenTo(this.container,De.CONTAINER_PLAY,this.updateState),this.listenTo(this.container,De.CONTAINER_PAUSE,this.updateState)}},{key:"onDVRUpdated",value:function(e){this.dvrInUse=e,this.updateState()}},{key:"updateState",value:function(){if(!this.isLive)return this.hide();this.dvrInUse?this.hide():this.show(),this.$el["".concat(this.container.isDvrEnabled()?"remove":"add","Class")]("live-indicator--first-element"),Q.supportsTouchEvents&&this.$el.addClass("live-indicator--first-element")}},{key:"resetDvrState",value:function(){this.dvrInUse=!1}},{key:"show",value:function(){this.$el.removeClass("live-indicator--hide")}},{key:"hide",value:function(){this.$el.addClass("live-indicator--hide")}},{key:"render",value:function(){this.$el.empty(),this.$indicator=$("<span/>").attr("data-live-indicator","").html(this.label);var e=En.getStyleFrom('.clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator {\n  display: flex;\n  align-self: flex-start;\n  margin-top: 5px;\n  border-radius: 2px;\n  background-color: red;\n  padding: 3px 6px; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--hide {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control .media-control-panel__lower .live-indicator--first-element {\n    margin-left: 12px; }\n\n.clappr-player#wp3-player-0 [data-live-indicator] {\n  color: #ffffff;\n  font-family: "opensans-bold", sans-serif;\n  font-size: 11px;\n  line-height: 1.45;\n  letter-spacing: -0.5px; }\n',{playerId:this.core.options.playerId});return this.$el.append(e[0]),this.$el.append(this.$indicator[0]),this}}]),n}(Ti),Va=function(e){l(n,e);var t=p(n);function n(e){var i;r(this,n),(i=t.call(this,e)).core=e,i.allowPipToMaster=!!i.core.options.allowPipToMaster;var a=En.getStyleFrom(".clappr-player#wp3-player-0 .pip-transition[data-pip] {\n  transition: all 0.3s ease-out; }\n\n.clappr-player#wp3-player-0.nocursor .container[data-container].master-container[data-pip], .clappr-player#wp3-player-0.nocursor .container[data-container].pip-container[data-pip] {\n  cursor: none; }\n  .clappr-player#wp3-player-0.nocursor .container[data-container].master-container[data-pip].pointer-enabled, .clappr-player#wp3-player-0.nocursor .container[data-container].pip-container[data-pip].pointer-enabled {\n    cursor: none; }\n\n.clappr-player#wp3-player-0 .container[data-container].master-container[data-pip] {\n  cursor: default;\n  width: 100%;\n  height: 100%;\n  font-size: 100%;\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  padding: 0;\n  margin: 0;\n  border: none; }\n  .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pointer-enabled {\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pointer-enabled.chromeless {\n      cursor: default; }\n  .clappr-player#wp3-player-0 .container[data-container].master-container[data-pip].pip-transition {\n    z-index: 1000; }\n\n.clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip] {\n  cursor: default;\n  width: 24%;\n  height: 24%;\n  min-width: 0;\n  font-size: 24%;\n  z-index: 1000;\n  position: absolute;\n  padding: 0;\n  margin: 0;\n  right: 23px;\n  bottom: 23px;\n  border-width: 2px;\n  border-radius: 3px;\n  border-style: solid;\n  border-color: rgba(255, 255, 255, 0.25);\n  background-clip: padding-box;\n  -webkit-background-clip: padding-box; }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].pointer-enabled {\n    cursor: pointer; }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].over-media-control {\n    transform: translateY(-43px); }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].mouse-over {\n    border-color: rgba(255, 255, 255, 0.5); }\n  .clappr-player#wp3-player-0 .container[data-container].pip-container[data-pip].unobtrusive-mode {\n    opacity: .3;\n    z-index: 993; }\n",{playerId:i.core.options.playerId});return i.core.$el.append(a[0]),i.setupContainers(),i.addListeners(),i}return o(n,[{key:"name",get:function(){return"pip"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"mediaControl",get:function(){return this.core.getPlugin("globo_media_control")}},{key:"getExternalInterface",value:function(){return{addPip:this.addPip,discardPip:this.discardPip,addMaster:this.addMaster,changeMaster:this.changeMaster,getPipSource:this.getPipSource,pipToMaster:this.pipToMaster,hasPip:this.hasPip}}},{key:"addListeners",value:function(){var e=this;this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.mediaControlContainerChanged),this.listenTo(this.mediaControl,De.MEDIACONTROL_SHOW,this.onMediaControlShow),this.listenTo(this.mediaControl,De.MEDIACONTROL_HIDE,this.onMediaControlHide),this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSEMOVE_SEEKBAR,(function(t){return e.onMouseMove(t)})),this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.onMouseLeave),this.listenTo(this.mediaControl,Tn.WM_SETTINGS_SHOW,this.setSettingsUnobtrusiveMode),this.listenTo(this.mediaControl,Tn.WM_SETTINGS_HIDE,this.removeSettingsUnobtrusiveMode),this.listenTo(this.mediaControl,Tn.WM_VOLUME_SHOW,this.setVolumeUnobtrusiveMode),this.listenTo(this.mediaControl,Tn.WM_VOLUME_HIDE,this.removeVolumeUnobtrusiveMode),this.listenTo(this.mediaControl,Tn.WM_SHARE_SHOW,this.setUnobtrusiveMode),this.listenTo(this.mediaControl,Tn.WM_SHARE_HIDE,this.removeUnobtrusiveMode)}},{key:"mediaControlContainerChanged",value:function(){this.core.options.dfp&&(this.stopListening(this.core.options.dfp),this.listenTo(this.core.options.dfp,Tn.DFP_AD_STARTED,this.setUnobtrusiveMode),this.listenTo(this.core.options.dfp,Tn.DFP_AD_COMPLETED,this.removeUnobtrusiveMode),this.listenTo(this.core.options.dfp,Tn.DFP_AD_CLOSED,this.removeUnobtrusiveMode),this.listenTo(this.core.options.dfp,Tn.DFP_AD_SKIPPED,this.removeUnobtrusiveMode)),this.masterContainer=this.core.activeContainer,this.setMasterStyle(this.masterContainer,!1)}},{key:"setupContainers",value:function(){this.core.containers.length>0&&(this.masterContainer=this.core.containers[0],this.setMasterStyle(this.masterContainer,!1),2===this.core.containers.length&&(this.pipContainer=this.core.containers[1],this.setPipStyle(this.pipContainer,!1),this.masterContainer.playback&&this.masterContainer.playback.playWhenReady()||this.masterContainer.play(),this.pipContainer.playback&&this.pipContainer.playback.playWhenReady()||this.pipContainer.play(),this.pipContainer.setVolume(0),this.pipContainer.playback.isPip(!0),this.listenToPipClick()))}},{key:"onMouseMove",value:function(e){this.isOnUnobtrusiveMode||((!e||this.mediaControl.container.playback.settings.seekEnabled&&!["thumb","thumb-position"].includes(e.target.className))&&this.pipContainer?this.pipContainer.$el.addClass("unobtrusive-mode"):this.onMouseLeave())}},{key:"onMouseLeave",value:function(){this.isOnUnobtrusiveMode||this.pipContainer&&this.pipContainer.$el.removeClass("unobtrusive-mode")}},{key:"hasPip",value:function(){return!!this.pipContainer}},{key:"getPipSource",value:function(){return this.pipContainer.playback.src}},{key:"canAddMaster",value:function(){return this.masterContainer&&"ad"!==this.masterContainer.getPlaybackType()}},{key:"addPip",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=this.core.getCurrentPlayback(),i=this.core.getCurrentContainer(),r=!!n.getPlaybackType()&&"ad"!==n.getPlaybackType();r&&n.isPlaying()?(this.discardPip(),this.pipContainer=this.core.createContainer(t,{onPip:!0}),this.addPipCallback()):i.once(De.CONTAINER_PLAY,(function(){return e.addPip(t)}))}},{key:"addPipCallback",value:function(){var e=this,t=this.pipContainer.playback;t.once(Tn.WM_PLAYBACK_WILL_PLAY,(function(){return e.pipContainer.setVolume(0)})),this.setPipStyle(this.pipContainer),t&&t.playWhenReady()||this.pipContainer.play(),this.stopListening(this.pipContainer),this.listenToPipClick(),this.listenTo(this.pipContainer,De.CONTAINER_ENDED,this.discardPip),this.listenTo(this.pipContainer,De.CONTAINER_MOUSE_ENTER,this.mouseEnterPip),this.listenTo(this.pipContainer,De.CONTAINER_MOUSE_LEAVE,this.mouseLeavePip),this.listenTo(this.masterContainer,De.CONTAINER_ENDED,this.pipToMaster),t.isPip(!0),this.core.trigger(Tn.WM_PIP_ADDED)}},{key:"mouseEnterPip",value:function(){this.pipContainer.$el.addClass("mouse-over"),this.pipContainer.setVolume(this.masterContainer.volume),this.masterContainer.setVolume(0)}},{key:"mouseLeavePip",value:function(){this.pipContainer.$el.removeClass("mouse-over"),this.masterContainer.setVolume(this.pipContainer.volume),this.pipContainer.setVolume(0)}},{key:"discardPip",value:function(){this.pipContainer&&(this.mouseLeavePip(),this.stopListening(this.pipContainer),this.discardContainer(this.pipContainer),this.pipContainer=void 0,this.core.trigger(Tn.WM_PIP_DISCARDED))}},{key:"discardMaster",value:function(){this.masterContainer&&(this.stopListening(this.masterContainer),this.discardContainer(this.masterContainer),this.masterContainer=void 0)}},{key:"setMasterContainer",value:function(e){this.discardMaster(),this.masterContainer=e,this.setMasterStyle(this.masterContainer),this.listenTo(this.masterContainer,De.CONTAINER_ENDED,this.pipToMaster),this.masterContainer.playback&&this.masterContainer.playback.playWhenReady()||this.masterContainer.play()}},{key:"addMaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.canAddMaster()&&this.masterContainer){this.stopListening(this.masterContainer),this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition");var t=this.core.createContainer(e.toString(),{onMaster:!0});this.addMasterCallback(t)}}},{key:"addMasterContainer",value:function(e){this.masterContainer&&(this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition"),this.addMasterCallback(e))}},{key:"addMasterCallback",value:function(e){var t=Math.max(this.masterContainer.volume,this.pipContainer&&this.pipContainer.volume||0);this.tmpContainer.setVolume(0),this.masterContainer=e,this.pipContainer&&this.discardPip(),this.pipContainer=this.tmpContainer,this.setPipStyle(this.pipContainer),this.setMasterStyle(this.masterContainer);var n=this.masterContainer.playback,i=n&&n.playWhenReady.bind(n)||this.masterContainer.play.bind(this.masterContainer);this.masterContainer.isReady?i():this.listenToOnce(n,Tn.WM_PLAYBACK_WILL_PLAY,(function(){return i()})),this.animateMasterToPip(),this.listenTo(this.pipContainer,De.CONTAINER_MOUSE_ENTER,this.mouseEnterPip),this.listenTo(this.pipContainer,De.CONTAINER_MOUSE_LEAVE,this.mouseLeavePip),this.tmpContainer=void 0,this.masterContainer.setVolume(t),this.pipContainer.trigger(Tn.WM_MASTERTOPIP),this.core.trigger(Tn.WM_MASTER_ADDED)}},{key:"animateMasterToPip",value:function(){this.listenTo(this.masterContainer,De.CONTAINER_ENDED,this.pipToMaster),this.pipContainer.playback.isPip(!0),this.setPipStyle(this.pipContainer),this.core.activeContainer=this.masterContainer,this.listenToPipClick()}},{key:"changeMaster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.masterContainer){this.stopListening(this.masterContainer),this.tmpContainer=this.masterContainer,this.tmpContainer.$el.addClass("pip-transition");var t=this.core.createContainer(e.toString(),{onMaster:!0});this.changeMasterCallback(t)}}},{key:"changeMasterCallback",value:function(e){this.masterContainer.destroy(),this.masterContainer=e,this.tmpContainer=void 0,this.setMasterStyle(this.masterContainer),this.listenTo(this.masterContainer,De.CONTAINER_ENDED,this.pipToMaster);var t=this.masterContainer.playback,n=t&&t.playWhenReady.bind(t)||this.masterContainer.play.bind(this.masterContainer);this.masterContainer.isReady?n():this.listenToOnce(this.masterContainer.playback,Tn.WM_PLAYBACK_WILL_PLAY,(function(){return n()})),this.core.activeContainer=this.masterContainer,this.core.trigger(Tn.WM_MASTER_CHANGED)}},{key:"listenToPipClick",value:function(){this.pipContainer&&this.allowPipToMaster&&(this.stopListening(this.pipContainer),this.listenTo(this.pipContainer,De.CONTAINER_CLICK,this.pipToMaster.bind(this)))}},{key:"discardContainer",value:function(e){e.destroy()}},{key:"pipToMaster",value:function(){var e=this;return this.stopListening(this.masterContainer),this.stopListening(this.pipContainer),this.pipContainer&&(this.pipContainer.$el.addClass("pip-transition"),this.setMasterStyle(this.pipContainer),this.pipContainer.$el.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){e.pipContainer.$el.off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),e.pipToMasterCallback()}))),this}},{key:"pipToMasterCallback",value:function(){var e=Math.max(this.masterContainer.volume,this.pipContainer.volume);this.discardMaster(),this.pipContainer.playback.isPip(!1),this.masterContainer=this.pipContainer,this.pipContainer=void 0,this.core.activeContainer=this.masterContainer,this.mediaControl.updatePlaybackTypeClass(),this.mediaControl.enable(),this.masterContainer.setVolume(e),this.masterContainer.trigger(Tn.WM_PIPTOMASTER)}},{key:"onMediaControlShow",value:function(){this.mediaControl.disabled||this.pipContainer&&this.pipContainer.$el.addClass("pip-transition over-media-control")}},{key:"onMediaControlHide",value:function(){this.mediaControl.keepVisible||(this.masterContainer&&this.masterContainer.$el.removeClass("over-media-control"),this.pipContainer&&(this.pipContainer.$el.addClass("pip-transition"),this.pipContainer.$el.removeClass("over-media-control")))}},{key:"setAnimatedTransition",value:function(e,t){t?e.$el.addClass("pip-transition"):e.$el.removeClass("pip-transition")}},{key:"setPipStyle",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setAnimatedTransition(e,t),e.$el.attr("data-pip",""),e.$el.addClass("pip-container"),e.$el.removeClass("over-media-control master-container"),e.hasPlugin("click_to_pause")&&(e.getPlugin("click_to_pause").disable(),e.getPlugin("click_to_pause").settingsUpdate()),this.mediaControl.isVisible()&&this.onMediaControlShow()}},{key:"setMasterStyle",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setAnimatedTransition(e,t),e.$el.attr("data-pip",""),e.$el.addClass("master-container"),e.$el.removeClass("over-media-control pip-container"),e.hasPlugin("click_to_pause")&&(!Q.supportsTouchEvents&&e.getPlugin("click_to_pause").enable(),e.getPlugin("click_to_pause").settingsUpdate())}},{key:"setUnobtrusiveMode",value:function(){this.isOnUnobtrusiveMode=!0,this.pipContainer&&this.pipContainer.$el.addClass("unobtrusive-mode")}},{key:"removeUnobtrusiveMode",value:function(){this.volumeUnobtrusive||this.settingsUnobtrusive||(this.isOnUnobtrusiveMode=!1,this.pipContainer&&this.pipContainer.$el.removeClass("unobtrusive-mode"))}},{key:"setVolumeUnobtrusiveMode",value:function(){this.volumeUnobtrusive=!0,this.setUnobtrusiveMode()}},{key:"removeVolumeUnobtrusiveMode",value:function(){this.volumeUnobtrusive=!1,this.removeUnobtrusiveMode()}},{key:"setSettingsUnobtrusiveMode",value:function(){this.settingsUnobtrusive=!0,this.setUnobtrusiveMode()}},{key:"removeSettingsUnobtrusiveMode",value:function(){this.settingsUnobtrusive=!1,this.removeUnobtrusiveMode()}}]),n}(st),Ha='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" fill-rule="nonzero" d="M8 16.59L12.58 12 8 7.41 9.41 6l6 6-6 6z"/>\n    </g>\n</svg>',ja='<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#FFF" d="M8.59 15.58l-4.17-4.17L3 12.82l5.59 5.59 12-12L19.18 5z"/>\n    </g>\n</svg>',Ka=function(e){l(i,e);var t=p(i);function i(){return r(this,i),t.apply(this,arguments)}return o(i,[{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Ve('<div role="menu" class="settings__options-menu">\n  <% for (var i = 0; i < options.length; i++) { %>\n    <button role="menuitem" data-option-id="<%= options[i].id %>" type="button" class="settings__options-item <% if (options[i].selected) { %>settings__options-item--active<% } %>">\n      <% if (options[i].selected) { %><span class="settings__options-active-icon"><%= activeIcon %></span><% } %>\n      <div class="settings__options-item-label">\n        <span class="settings__options-item-label-language" data-option-id="<%= options[i].id %>"><%= options[i].label %></span>\n        <span class="settings__options-item-label-role" data-option-id="<%= options[i].id %>"><%= options[i].sublabel %></span>\n      </div>\n    </button>\n  <% } %>\n</div>\n')}},{key:"options",get:function(){return this.availableOptions||[]},set:function(e){this.availableOptions=this.options.map((function(t){return n(n({},t),{},{selected:t.id.toString()===e.toString()})}))}},{key:"selected",get:function(){var e=this.options.find((function(e){return e.selected})),t=e||this.options.length&&this.options[0];return t&&{language:t.label,role:t.sublabel}}},{key:"events",get:function(){return{"click .settings__options-item":"clickOption"}}},{key:"shouldRender",value:function(){return this.options&&this.options.length>1}},{key:"clickOption",value:function(e){e.stopPropagation();var t=Y(e.target).closest(".settings__options-item").data("option-id"),n=parseInt(t);this.selectOption(isNaN(n)?t:n)}},{key:"selectOption",value:function(e){this.playbackUpdate(e),this.interfaceUpdate(e),this.trigger(Tn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"interfaceUpdate",value:function(e){var t=".settings__options-menu .settings__options-item",n="settings__options-item--active";this.options=e,this.$(t).find(".settings__options-active-icon").remove(),this.$(t).removeClass(n);var i=Y("<span>").addClass("settings__options-active-icon").append(ja);this.$('.settings__options-item[data-option-id="'.concat(e,'"]')).addClass(n).prepend(i)}},{key:"render",value:function(){return this.shouldRender()&&(this.$el.html(this.template({options:this.options||[],title:this.title,activeIcon:ja,arrowIcon:Ha})),this.$el.addClass("settings__options-wrapper")),this}}]),i}(ze),Ga={pt_br:{label:"Português",language:"pt",languageISO_639_2B:"por",keys:["pt","por"]},pt_pt:{label:"Português (Portugal)",language:"pt-pt",languageISO_639_2B:"",keys:["pt-pt"]},eng:{label:"Inglês",language:"en",languageISO_639_2B:"eng",keys:["en","eng"]},ger:{label:"Alemão",language:"de",languageISO_639_2B:"ger",keys:["de","ger"]},spa:{label:"Espanhol",language:"es",languageISO_639_2B:"spa",keys:["es","esp","spa"]},ron:{label:"Romeno",language:"ro",languageISO_639_2B:"ron",keys:["ro","ron"]},cat:{label:"Catalão",language:"ca",languageISO_639_2B:"cat",keys:["ca","cat"]},chi:{label:"Chinês",language:"zh",languageISO_639_2B:"chi",keys:["zh","chi"]},kor:{label:"Coreano",language:"ko",languageISO_639_2B:"kor",keys:["ko","kor"]},dan:{label:"Dinamarquês",language:"da",languageISO_639_2B:"dan",keys:["da","dan"]},fin:{label:"Finlandês",language:"fi",languageISO_639_2B:"fin",keys:["fi","fin"]},fre:{label:"Francês",language:"fr",languageISO_639_2B:"fre",keys:["fr","fre"]},wel:{label:"Galês",language:"cy",languageISO_639_2B:"wel",keys:["cy","wel"]},heb:{label:"Hebraico",language:"he",languageISO_639_2B:"heb",keys:["he","heb"]},dut:{label:"Holandês",language:"nl",languageISO_639_2B:"dut",keys:["nl","dut"]},hin:{label:"Hindi",language:"hi",languageISO_639_2B:"hin",keys:["hi","hin"]},hun:{label:"Húngaro",language:"hu",languageISO_639_2B:"hun",keys:["hu","hun"]},ind:{label:"Indonésio",language:"id",languageISO_639_2B:"ind",keys:["id","ind"]},ita:{label:"Italiano",language:"it",languageISO_639_2B:"ita",keys:["it","ita"]},jpn:{label:"Japonês",language:"ja",languageISO_639_2B:"jpn",keys:["ja","jpn"]},nor:{label:"Norueguês",language:"no",languageISO_639_2B:"nor",keys:["no","nor","nob","nb"]},per:{label:"Persa",language:"fa",languageISO_639_2B:"per",keys:["fa","per"]},rus:{label:"Russo",language:"ru",languageISO_639_2B:"rus",keys:["ru","rus"]},swe:{label:"Sueco",language:"sv",languageISO_639_2B:"swe",keys:["sv","swe"]},tha:{label:"Tailandês",language:"th",languageISO_639_2B:"tha",keys:["th","tha"]},tur:{label:"Turco",language:"tr",languageISO_639_2B:"tur",keys:["tr","tur"]},ara:{label:"Arábico",language:"ar",languageISO_639_2B:"ara",keys:["ar","ara"]},fil:{label:"Filipino",language:"fil",languageISO_639_2B:"fil",keys:["fil"]},ice:{label:"Islandês",language:"is",languageISO_639_2B:"ice",keys:["ice","isl","is"]},geo:{label:"Georgiano",language:"ka",languageISO_639_2B:"geo",keys:["geo","kat","ka"]},gre:{label:"Grego",language:"el",languageISO_639_2B:"gre",keys:["gre","ell","el","grc"]},pol:{label:"Polônes",language:"pl",languageISO_639_2B:"pol",keys:["pol","pl"]},srp:{label:"Sérvio",language:"sr",languageISO_639_2B:"srp",keys:["srp","scc","sr"]},yid:{label:"Iídiche",language:"yi",languageISO_639_2B:"yid",keys:["yid","yi"]}},Wa={language:"off",role:"subtitle"},za=n(n({},Ga),{},{off:{label:"Desativada",language:"off",keys:["off"]}}),Ya=[],qa=0;for(var $a in za)Ya.push(n({id:qa},za[$a])),qa++;var Xa=function(e,t){var n;return(null==e?void 0:e.language)===t||(null==e||null===(n=e.keys)||void 0===n?void 0:n.includes(t))},Qa=function(e,t){return e.role===t},Za=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).core=e,n.setInitialValues(),n.onAddTrack=n.onAddTrack.bind(d(n)),n.onChangeTrack=n.onChangeTrack.bind(d(n)),n}return o(i,[{key:"name",get:function(){return"subtitle_selector"}},{key:"optionName",get:function(){return"subtitle"}},{key:"title",get:function(){return"Legenda"}},{key:"isReady",get:function(){return this.video&&this.playback.innerPlaybackName}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Opções de legenda</span>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"initialSubtitleOption",get:function(){return this.core.options.defaultSubtitle}},{key:"defaultOption",get:function(){return this.initialSubtitleOption||Wa}},{key:"resourceSubtitles",get:function(){return this.video.selectedResource&&this.video.selectedResource.subtitles}},{key:"subtitleTrackAutoHandled",get:function(){return Q.isiOS||Q.isSafari&&"hls_fairplay_playback"===this.playback.innerPlaybackName}},{key:"tagVideo",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.videoEl}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&(this.listenTo(this.playback,Tn.WM_VIDEO_METADATA_LOADED,(function(t){return e.video=t})),this.listenToOnce(this.playback,Tn.WM_RESOURCE_READY,this.setup),this.listenToOnce(this.container,De.CONTAINER_DESTROYED,this.removeTextTrackEvents))}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"stopListening",value:function(){this.removeTextTrackEvents(),g(u(i.prototype),"stopListening",this).call(this)}},{key:"removeTextTrackEvents",value:function(){this.tagVideo&&this.subtitleTrackAutoHandled&&(this.tagVideo.textTracks.removeEventListener("addtrack",this.onAddTrack),this.tagVideo.textTracks.removeEventListener("change",this.onChangeTrack))}},{key:"setInitialValues",value:function(){this.availableOptions=[],this.availableContents=[],this.currentSubtitleId=null}},{key:"setup",value:function(){this.setInitialValues();var e=this.getSubtitleResource();this.isReady&&0!==e.length&&(this.onSubtitleLoaded("off","subtitle",""),this.subtitleTrackAutoHandled?this.setupTextTracks():this.loadSubtitles(e))}},{key:"getSubtitleResource",value:function(){var e,t,n=null===(e=this.video.selectedResource.subtitleResource)||void 0===e?void 0:e.srt,i=null===(t=this.video.selectedResource.subtitleResource)||void 0===t?void 0:t.webVTT;return!!this.core.options.shouldDeviceUseWebVTT&&i.length>0&&i||n}},{key:"setupTextTracks",value:function(){this.tagVideo.textTracks.addEventListener("addtrack",this.onAddTrack),this.tagVideo.textTracks.addEventListener("change",this.onChangeTrack)}},{key:"onAddTrack",value:function(e){var t=this.tagVideo.textTracks;this.onSubtitleLoaded(e.track.language,e.track.kind,""),this.availableOptions.length-1===t.length&&this.onAllSubtitlesLoaded()}},{key:"onChangeTrack",value:function(){var e=this.tagVideo.textTracks,t=Array.from(e).find((function(e){return"showing"==e.mode}))||{language:"off",kind:"subtitle"},n=this.findSubtitleOption({language:t.language,role:t.kind});n&&this.updateSubtitleSelector(n.id,!1)}},{key:"loadSubtitles",value:function(e){var t=this,n=e.map((function(e){return t.fetchSubtitle(e)}));Promise.all(n).then((function(){return t.onAllSubtitlesLoaded()}))}},{key:"fetchSubtitle",value:function(e){var t=this,n=e.url,i=e.language,r=e.role,a=e.type;return new Promise((function(e){Y.ajax({url:n,timeout:3e3,success:function(n){t.onSubtitleLoaded(i,r,n,a),e()},error:function(n){t.onSubtitleLoadError(n),e()}})}))}},{key:"onSubtitleLoadError",value:function(e){_e.error(this.name,e)}},{key:"onSubtitleLoaded",value:function(e,t,i,r){var a=Object.values(za).find((function(t){return t.keys.includes(e)}));a&&(a=n(n({},a),{},{id:this.availableOptions.length,label:this.getSubtitleLabel(a,t),role:t}),r&&(a.type=r),this.availableOptions.push(n({},a)),this.availableContents.push(i))}},{key:"getSubtitleLabel",value:function(e,t){var n=e.label;return t.match(/caption/)?n+" - CC":n}},{key:"onAllSubtitlesLoaded",value:function(){1!==this.availableOptions.length&&this.onSubtitlesReady()}},{key:"onSubtitlesReady",value:function(){this.setInitialSubtitle(),this.container.trigger(Tn.WM_SUBTITLE_AVAILABLE,this.availableOptions,this.availableContents),this.trigger(Tn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"findSubtitleOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.role,i=this.availableOptions.find((function(e){return Xa(e,t)&&Qa(e,n)})),r=this.availableOptions.find((function(e){return Xa(e,t)}));return i||r}},{key:"setInitialSubtitle",value:function(){if(this.availableOptions.length){var e=this.findSubtitleOption(this.initialSubtitleOption),t=this.findSubtitleOption(Wa),n=e||t;this.updateSubtitleSelector(n.id,!1)}}},{key:"playbackUpdate",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.currentSubtitleId!==e&&(this.selectedSubtitle=this.availableOptions[e],this.selectedSubtitle.selected=!0,this.currentSubtitleId=e,this.playback.currentSubtitle=this.selectedSubtitle,t&&this.container.trigger(Tn.WM_SUBTITLE_CHANGED,this.selectedSubtitle))}},{key:"updateSubtitleSelector",value:function(e,t){this.playbackUpdate(e,t),this.interfaceUpdate(e)}},{key:"getCurrentOption",value:function(){return this.selectedSubtitle}}]),i}(Ka),Ja={language:"pt",languageISO_639_2B:"por"},eo=[],to=0;for(var no in Ga)eo.push(n({id:to},Ga[no])),to++;var io=function(e,t){return e.keys.includes(t)},ro=function(e,t){return e.role===t},ao=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e.options)).idPlayback=e,n.ready=!1,n.availableOptions=[],n.selectedAudio=null,n.currentAudioId=null,n}return o(i,[{key:"initialAudioOption",get:function(){return this.idPlayback.currentAudio||this.options.defaultAudio}},{key:"playback",get:function(){return this.idPlayback.playback}},{key:"audioTracks",get:function(){return[]}},{key:"onReady",value:function(){this.ready=!0,this.onAudioAvailable(),this.trigger(Tn.WM_AUDIOSELECTOR_READY)}},{key:"onAudioAvailable",value:function(){this.trigger(Tn.WM_AUDIO_AVAILABLE,this.availableOptions),this.playback.trigger(De.PLAYBACK_AUDIO_AVAILABLE,this.availableOptions)}},{key:"setup",value:function(){}},{key:"parseAudioTracks",value:function(){}},{key:"updateAudioPlayback",value:function(){}},{key:"getAudioInfo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("string"==typeof e&&""!==e&&"audio"!==e){var r=this.findAudioData(e);if(r)return n(n({},r),{},{sublabel:this.getAudioSublabel(i),role:i,id:t})}}},{key:"findAudioData",value:function(e){return eo.find((function(t){return io(t,e)}))}},{key:"getAudioSublabel",value:function(e){return e.match(/description/)?"audiodescrição":""}},{key:"findAudioOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.role,i=this.availableOptions.find((function(e){return io(e,t)&&ro(e,n)})),r=this.availableOptions.find((function(e){return io(e,t)}));return i||r}},{key:"setInitialAudio",value:function(){if(this.availableOptions.length){var e=this.findAudioOption(this.initialAudioOption),t=this.findAudioOption(Ja),n=m(this.availableOptions,1)[0],i=e||t||n;this.audioSwitch(i.id,!0)}}},{key:"getSelectedOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(void 0!==e||void 0!==t)return this.availableOptions.find((function(n){return n.id.toString()===e.toString()||n.language.toString()===t.toString()||n.keys.includes(t)}))}},{key:"audioSwitch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(this.currentAudioId!==e||t)&&(this.selectedAudio=this.getSelectedOption(e),this.selectedAudio&&(this.idPlayback.currentAudio=this.selectedAudio,this.selectedAudio.selected=!0,this.currentAudioId=e,this.updateAudioPlayback(),!t&&this.trigger(Tn.WM_AUDIO_CHANGED,this.selectedAudio)))}},{key:"getCurrentOption",value:function(){return this.selectedAudio}}]),i}(xe),oo=["alternate","description"],so=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"shakaPlayerInstance",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e._player}},{key:"shakaPlayerLanguages",get:function(){var e;return null===(e=this.shakaPlayerInstance)||void 0===e?void 0:e.getAudioLanguages()}},{key:"shakaPlayerTracks",get:function(){var e;return null===(e=this.shakaPlayerInstance)||void 0===e?void 0:e.getAudioLanguagesAndRoles()}},{key:"audioTracks",get:function(){return this.shakaPlayerTracks&&this.parseShakaTracks()||[]}},{key:"setup",value:function(){this.parseAudioTracks(),this.setInitialAudio()}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[];var t=0;this.audioTracks.forEach((function(n){var i=e.getAudioRole(n),r=e.getAudioInfo(n.language,t,i);r&&e.availableOptions.push(r),t++})),this.onReady()}},{key:"parseShakaTracks",value:function(){var e=this,t=function(e,t){return e.find((function(e){return e.role===t}))},n=[];return this.shakaPlayerLanguages.forEach((function(i){var r=e.shakaPlayerTracks.filter((function(e){return e.language===i})),a=t(r,"alternate"),o=t(r,"description");a&&o&&(r=r.filter((function(e){return"description"!==e.role}))),n.push.apply(n,v(r))})),n}},{key:"getAudioRole",value:function(e){var t=e.role;return oo.includes(t)?"description":""}},{key:"updateAudioPlayback",value:function(){var e,t=this.selectedAudio,n=t.language,i=t.role,r=oo.includes(i)?"alternate":"main";null===(e=this.shakaPlayerInstance)||void 0===e||e.selectAudioLanguage(n,r)}}]),n}(ao),lo=Gr((function(e,t){var n;"undefined"!=typeof window&&(n=()=>(()=>{var e={"./src/config.ts":
/*!***********************!*\
    !*** ./src/config.ts ***!
    \***********************/(e,t,n)=>{n.r(t),n.d(t,{enableStreamingMode:()=>S,hlsDefaultConfig:()=>k,mergeConfig:()=>_});var i=n(/*! ./controller/abr-controller */"./src/controller/abr-controller.ts"),r=n(/*! ./controller/audio-stream-controller */"./src/controller/audio-stream-controller.ts"),a=n(/*! ./controller/audio-track-controller */"./src/controller/audio-track-controller.ts"),o=n(/*! ./controller/subtitle-stream-controller */"./src/controller/subtitle-stream-controller.ts"),s=n(/*! ./controller/subtitle-track-controller */"./src/controller/subtitle-track-controller.ts"),l=n(/*! ./controller/buffer-controller */"./src/controller/buffer-controller.ts"),u=n(/*! ./controller/timeline-controller */"./src/controller/timeline-controller.ts"),c=n(/*! ./controller/cap-level-controller */"./src/controller/cap-level-controller.ts"),d=n(/*! ./controller/fps-controller */"./src/controller/fps-controller.ts"),h=n(/*! ./controller/eme-controller */"./src/controller/eme-controller.ts"),p=n(/*! ./controller/cmcd-controller */"./src/controller/cmcd-controller.ts"),f=n(/*! ./utils/xhr-loader */"./src/utils/xhr-loader.ts"),g=n(/*! ./utils/fetch-loader */"./src/utils/fetch-loader.ts"),m=n(/*! ./utils/cues */"./src/utils/cues.ts"),v=n(/*! ./utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts"),y=n(/*! ./utils/logger */"./src/utils/logger.ts");function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b.apply(this,arguments)}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=T(T({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:f.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:i.default,bufferController:l.default,capLevelController:c.default,fpsController:d.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:v.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},{cueHandler:m.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:o.SubtitleStreamController,subtitleTrackController:s.default,timelineController:u.TimelineController,audioStreamController:r.default,audioTrackController:a.default,emeController:h.default,cmcdController:p.default});function _(e,t){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==t.liveMaxLatencyDurationCount&&(void 0===t.liveSyncDurationCount||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(void 0===t.liveSyncDuration||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return b({},e,t)}function S(e){var t=e.loader;t!==g.default&&t!==f.default?(y.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),e.progressive=!1):(0,g.fetchSupported)()&&(e.loader=g.default,e.progressive=!0,e.enableSoftwareAES=!0,y.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}},"./src/controller/abr-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/abr-controller.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../utils/ewma-bandwidth-estimator */"./src/utils/ewma-bandwidth-estimator.ts"),a=n(/*! ../events */"./src/events.ts"),o=n(/*! ../errors */"./src/errors.ts"),s=n(/*! ../types/loader */"./src/types/loader.ts"),l=n(/*! ../utils/logger */"./src/utils/logger.ts");function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var c=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;var t=e.config;this.bwEstimator=new r.default(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t,n,c,d=e.prototype;return d.registerListeners=function(){var e=this.hls;e.on(a.Events.FRAG_LOADING,this.onFragLoading,this),e.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var e=this.hls;e.off(a.Events.FRAG_LOADING,this.onFragLoading,this),e.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.ERROR,this.onError,this)},d.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},d.onFragLoading=function(e,t){var n,i=t.frag;i.type===s.PlaylistLevelType.MAIN&&(this.timer||(this.fragCurrent=i,this.partCurrent=null!=(n=t.part)?n:null,this.timer=self.setInterval(this.onCheck,100)))},d.onLevelLoaded=function(e,t){var n=this.hls.config;t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)},d._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,r=n.autoLevelEnabled,o=n.media;if(e&&o){var s=t?t.stats:e.stats,u=t?t.duration:e.duration;if(s.aborted||s.loaded&&s.loaded===s.total||0===e.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(r&&!o.paused&&o.playbackRate&&o.readyState){var c=n.mainForwardBufferInfo;if(null!==c){var d=performance.now()-s.loading.start,h=Math.abs(o.playbackRate);if(!(d<=500*u/h)){var p=s.loaded&&s.loading.first,f=this.bwEstimator.getEstimate(),g=n.levels,m=n.minAutoLevel,v=g[e.level],y=s.total||Math.max(s.loaded,Math.round(u*v.maxBitrate/8)),b=p?1e3*s.loaded/d:0,E=b?(y-s.loaded)/b:8*y/f,T=c.len/h;if(!(E<=T)){var A,k=Number.POSITIVE_INFINITY;for(A=e.level-1;A>m;A--){var _=g[A].maxBitrate;if((k=b?u*_/(6.4*b):u*_/f)<T)break}k>=E||(l.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+A+"\n      Current BW estimate: "+((0,i.isFiniteNumber)(f)?(f/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+E.toFixed(3)+" s\n      Estimated load time for the next fragment: "+k.toFixed(3)+" s\n      Time to underbuffer: "+T.toFixed(3)+" s"),n.nextLoadLevel=A,p&&this.bwEstimator.sample(d,s.loaded),this.clearTimer(),(e.loader||e.keyLoader)&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),n.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:s}))}}}}}},d.onFragLoaded=function(e,t){var n=t.frag,r=t.part;if(n.type===s.PlaylistLevelType.MAIN&&(0,i.isFiniteNumber)(n.sn)){var o=r?r.stats:n.stats,l=r?r.duration:n.duration;if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var u=this.hls.levels[n.level],c=(u.loaded?u.loaded.bytes:0)+o.loaded,d=(u.loaded?u.loaded.duration:0)+l;u.loaded={bytes:c,duration:d},u.realBitrate=Math.round(8*c/d)}if(n.bitrateTest){var h={stats:o,frag:n,part:r,id:n.type};this.onFragBuffered(a.Events.FRAG_BUFFERED,h)}}},d.onFragBuffered=function(e,t){var n=t.frag,i=t.part,r=i?i.stats:n.stats;if(!r.aborted&&n.type===s.PlaylistLevelType.MAIN&&"initSegment"!==n.sn){var a=r.parsing.end-r.loading.start;this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},d.onError=function(e,t){var n;if((null===(n=t.frag)||void 0===n?void 0:n.type)===s.PlaylistLevelType.MAIN){if(t.type===o.ErrorTypes.KEY_SYSTEM_ERROR)return void this.clearTimer();switch(t.details){case o.ErrorDetails.FRAG_LOAD_ERROR:case o.ErrorDetails.FRAG_LOAD_TIMEOUT:case o.ErrorDetails.KEY_LOAD_ERROR:case o.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer()}}},d.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},d.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,n=this.hls,i=n.maxAutoLevel,r=n.config,a=n.minAutoLevel,o=n.media,s=t?t.duration:e?e.duration:0,u=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,d=n.mainForwardBufferInfo,h=(d?d.len:0)/u,p=this.findBestLevel(c,a,i,h,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(p>=0)return p;l.logger.trace((h?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var f=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,g=r.abrBandWidthFactor,m=r.abrBandWidthUpFactor;if(!h){var v=this.bitrateTestDelay;v&&(f=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-v,l.logger.trace("bitrate test took "+Math.round(1e3*v)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),g=m=1)}return p=this.findBestLevel(c,a,i,h+f,g,m),Math.max(p,0)},d.findBestLevel=function(e,t,n,r,a,o){for(var s,u=this.fragCurrent,c=this.partCurrent,d=this.lastLoadedFragLevel,h=this.hls.levels,p=h[d],f=!(null==p||null===(s=p.details)||void 0===s||!s.live),g=null==p?void 0:p.codecSet,m=c?c.duration:u?u.duration:0,v=n;v>=t;v--){var y=h[v];if(y&&(!g||y.codecSet===g)){var b=y.details,E=(c?null==b?void 0:b.partTarget:null==b?void 0:b.averagetargetduration)||m,T=void 0;T=v<=d?a*e:o*e;var A=h[v].maxBitrate,k=A*E/T;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+v+"/"+Math.round(T)+"/"+A+"/"+E+"/"+r+"/"+k),T>A&&(0===k||!(0,i.isFiniteNumber)(k)||f&&!this.bitrateTestDelay||k<r))return v}}return-1},t=e,(n=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&!t.canEstimate())return e;var n=this.getNextABRAutoLevel();return-1!==e&&this.hls.levels[n].loadError?e:(-1!==e&&(n=Math.min(e,n)),n)},set:function(e){this._nextAutoLevel=e}}])&&u(t.prototype,n),c&&u(t,c),Object.defineProperty(t,"prototype",{writable:!1}),e}();const d=c},"./src/controller/audio-stream-controller.ts":
/*!***************************************************!*\
    !*** ./src/controller/audio-stream-controller.ts ***!
    \***************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>E});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),a=n(/*! ../events */"./src/events.ts"),o=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),s=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),l=n(/*! ../types/level */"./src/types/level.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),d=n(/*! ../demux/chunk-cache */"./src/demux/chunk-cache.ts"),h=n(/*! ../demux/transmuxer-interface */"./src/demux/transmuxer-interface.ts"),p=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),f=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),g=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),m=n(/*! ../errors */"./src/errors.ts");function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v.apply(this,arguments)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}var b=function(e){var t,n;function b(t,n,i){var r;return(r=e.call(this,t,n,i,"[audio-stream-controller]")||this).videoBuffer=null,r.videoTrackCC=-1,r.waitingVideoCC=-1,r.audioSwitch=!1,r.trackId=-1,r.waitingData=null,r.mainDetails=null,r.bufferFlushed=!1,r.cachedTrackLoadedData=null,r._registerListeners(),r}n=e,(t=b).prototype=Object.create(n.prototype),t.prototype.constructor=t,y(t,n);var E=b.prototype;return E.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},E._registerListeners=function(){var e=this.hls;e.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(a.Events.ERROR,this.onError,this),e.on(a.Events.BUFFER_RESET,this.onBufferReset,this),e.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E._unregisterListeners=function(){var e=this.hls;e.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(a.Events.ERROR,this.onError,this),e.off(a.Events.BUFFER_RESET,this.onBufferReset,this),e.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},E.onInitPtsFound=function(e,t){var n=t.frag,i=t.id,a=t.initPTS;if("main"===i){var o=n.cc;this.initPTS[n.cc]=a,this.log("InitPTS for cc: "+o+" found from main: "+a),this.videoTrackCC=o,this.state===r.State.WAITING_INIT_PTS&&this.tick()}},E.startLoad=function(e){if(!this.levels)return this.startPosition=e,void(this.state=r.State.STOPPED);var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t,this.state=r.State.IDLE):(this.loadedmetadata=!1,this.state=r.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},E.doTick=function(){switch(this.state){case r.State.IDLE:this.doTickIdle();break;case r.State.WAITING_TRACK:var t,n=this.levels,i=this.trackId,a=null==n||null===(t=n[i])||void 0===t?void 0:t.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=r.State.WAITING_INIT_PTS}break;case r.State.FRAG_LOADING_WAITING_RETRY:var s,l=performance.now(),u=this.retryDate;(!u||l>=u||null!==(s=this.media)&&void 0!==s&&s.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=r.State.IDLE);break;case r.State.WAITING_INIT_PTS:var c=this.waitingData;if(c){var d=c.frag,h=c.part,p=c.cache,g=c.complete;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=r.State.FRAG_LOADING;var m={frag:d,part:h,payload:p.flush(),networkDetails:null};this._handleFragmentLoadProgress(m),g&&e.prototype._handleFragmentLoadComplete.call(this,m)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+d.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var v=this.getLoadPosition(),y=o.BufferHelper.bufferInfo(this.mediaBuffer,v,this.config.maxBufferHole);(0,f.fragmentWithinToleranceTest)(y.end,this.config.maxFragLookUpTolerance,d)<0&&(this.log("Waiting fragment cc ("+d.cc+") @ "+d.start+" cancelled because another fragment at "+y.end+" is needed"),this.clearWaitingFragment())}}else this.state=r.State.IDLE}this.onTickEnd()},E.clearWaitingFragment=function(){var e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=r.State.IDLE)},E.resetLoadingState=function(){this.clearWaitingFragment(),e.prototype.resetLoadingState.call(this)},E.onTickEnd=function(){var e=this.media;e&&e.readyState&&(this.lastCurrentTime=e.currentTime)},E.doTickIdle=function(){var e=this.hls,t=this.levels,n=this.media,i=this.trackId,o=e.config;if(t&&t[i]&&(n||!this.startFragRequested&&o.startFragPrefetch)){var s=t[i].details;if(!s||s.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(s))this.state=r.State.WAITING_TRACK;else{var l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,c.ElementaryStreamTypes.AUDIO,u.PlaylistLevelType.AUDIO));var d=this.getFwdBufferInfo(l,u.PlaylistLevelType.AUDIO);if(null!==d){var h=this.audioSwitch;if(!h&&this._streamEnded(d,s))return e.trigger(a.Events.BUFFER_EOS,{type:"audio"}),void(this.state=r.State.ENDED);var p=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,u.PlaylistLevelType.MAIN);if(!(d.len>=this.getMaxBufferLength(null==p?void 0:p.len))||h){var f=s.fragments[0].start,g=d.end;if(h&&n){var m=this.getLoadPosition();g=m,s.PTSKnown&&m<f&&(d.end>f||d.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=f+.05)}if(!(p&&g>p.end+s.targetduration)&&(p&&p.len||!d.len)){var v=this.getNextFragment(g,s);v?this.loadFragment(v,s,g):this.bufferFlushed=!0}}}}}},E.getMaxBufferLength=function(t){var n=e.prototype.getMaxBufferLength.call(this);return t?Math.max(n,t):n},E.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},E.onAudioTracksUpdated=function(e,t){var n=t.audioTracks;this.resetTransmuxer(),this.levels=n.map((function(e){return new l.Level(e)}))},E.onAudioTrackSwitching=function(e,t){var n=!!t.url;this.trackId=t.id;var i=this.fragCurrent;i&&i.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),n?this.setInterval(100):this.resetTransmuxer(),n?(this.audioSwitch=!0,this.state=r.State.IDLE):this.state=r.State.STOPPED,this.tick()},E.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},E.onLevelLoaded=function(e,t){this.mainDetails=t.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(a.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},E.onAudioTrackLoaded=function(e,t){var n;if(null!=this.mainDetails){var i=this.levels,a=t.details,o=t.id;if(i){this.log("Track "+o+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var s=i[o],l=0;if(a.live||null!==(n=s.details)&&void 0!==n&&n.live){var u=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!u)return;!s.details&&a.hasProgramDateTime&&u.hasProgramDateTime?((0,g.alignMediaPlaylistByPDT)(a,u),l=a.fragments[0].start):l=this.alignPlaylists(a,s.details)}s.details=a,this.levelLastLoaded=o,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(s.details,l),this.state!==r.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=r.State.IDLE),this.tick()}else this.warn("Audio tracks were reset while loading level "+o)}else this.cachedTrackLoadedData=t},E._handleFragmentLoadProgress=function(e){var t,n=e.frag,i=e.part,a=e.payload,o=this.config,s=this.trackId,l=this.levels;if(l){var c=l[s];console.assert(c,"Audio track is defined on fragment load progress");var f=c.details;console.assert(f,"Audio track details are defined on fragment load progress");var g=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2",m=this.transmuxer;m||(m=this.transmuxer=new h.default(this.hls,u.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var v=this.initPTS[n.cc],y=null===(t=n.initSegment)||void 0===t?void 0:t.data;if(void 0!==v){var b=i?i.index:-1,E=-1!==b,T=new p.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,a.byteLength,b,E);m.push(a,y,g,"",n,i,f.totalduration,!1,T,v)}else this.log("Unknown video PTS for cc "+n.cc+", waiting for video PTS before demuxing audio frag "+n.sn+" of ["+f.startSN+" ,"+f.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:n,part:i,cache:new d.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=r.State.WAITING_INIT_PTS}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},E._handleFragmentLoadComplete=function(t){this.waitingData?this.waitingData.complete=!0:e.prototype._handleFragmentLoadComplete.call(this,t)},E.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},E.onBufferCreated=function(e,t){var n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)},E.onFragBuffered=function(e,t){var n,i=t.frag,r=t.part;i.type===u.PlaylistLevelType.AUDIO?this.fragContextChanged(i)?this.warn("Fragment "+i.sn+(r?" p: "+r.index:"")+" of level "+i.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch):("initSegment"!==i.sn&&(this.fragPrevious=i,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(i,r)):this.loadedmetadata||i.type!==u.PlaylistLevelType.MAIN||null!==(n=this.videoBuffer||this.media)&&void 0!==n&&n.buffered.length&&(this.loadedmetadata=!0)},E.onError=function(t,n){if(n.type!==m.ErrorTypes.KEY_SYSTEM_ERROR)switch(n.details){case m.ErrorDetails.FRAG_LOAD_ERROR:case m.ErrorDetails.FRAG_LOAD_TIMEOUT:case m.ErrorDetails.FRAG_PARSING_ERROR:case m.ErrorDetails.KEY_LOAD_ERROR:case m.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.AUDIO,n);break;case m.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case m.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==r.State.ERROR&&this.state!==r.State.STOPPED&&(this.state=n.fatal?r.State.ERROR:r.State.IDLE,this.warn(n.details+" while loading frag, switching to "+this.state+" state"));break;case m.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===n.parent&&(this.state===r.State.PARSING||this.state===r.State.PARSED)){var i=!0,a=this.getFwdBufferInfo(this.mediaBuffer,u.PlaylistLevelType.AUDIO);a&&a.len>.5&&(i=!this.reduceMaxBufferLength(a.len)),i&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(u.PlaylistLevelType.AUDIO,n)},E.onBufferFlushed=function(e,t){t.type===c.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===r.State.ENDED&&(this.state=r.State.IDLE))},E._handleTransmuxComplete=function(e){var t,n="audio",i=this.hls,o=e.remuxResult,s=e.chunkMeta,l=this.getCurrentContext(s);if(!l)return this.warn("The loading context changed while buffering fragment "+s.sn+" of level "+s.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(s.level);var u=l.frag,d=l.part,h=l.level.details,p=o.audio,f=o.text,g=o.id3,m=o.initSegment;if(!this.fragContextChanged(u)&&h){if(this.state=r.State.PARSING,this.audioSwitch&&p&&this.completeAudioSwitch(),null!=m&&m.tracks&&(this._bufferInitSegment(m.tracks,u,s),i.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:n,tracks:m.tracks})),p){var y=p.startPTS,b=p.endPTS,E=p.startDTS,T=p.endDTS;d&&(d.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:y,endPTS:b,startDTS:E,endDTS:T}),u.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,y,b,E,T),this.bufferFragmentData(p,u,d,s)}if(null!=g&&null!==(t=g.samples)&&void 0!==t&&t.length){var A=v({id:n,frag:u,details:h},g);i.trigger(a.Events.FRAG_PARSING_METADATA,A)}if(f){var k=v({id:n,frag:u,details:h},f);i.trigger(a.Events.FRAG_PARSING_USERDATA,k)}}},E._bufferInitSegment=function(e,t,n){if(this.state===r.State.PARSING){e.video&&delete e.video;var i=e.audio;if(i){i.levelCodec=i.codec,i.id="audio",this.log("Init audio buffer, container:"+i.container+", codecs[parsed]=["+i.codec+"]"),this.hls.trigger(a.Events.BUFFER_CODECS,e);var o=i.initSegment;if(null!=o&&o.byteLength){var s={type:"audio",frag:t,part:null,chunkMeta:n,parent:t.type,data:o};this.hls.trigger(a.Events.BUFFER_APPENDING,s)}this.tick()}}},E.loadFragment=function(t,n,a){var o=this.fragmentTracker.getState(t);this.fragCurrent=t,(this.audioSwitch||o===s.FragmentState.NOT_LOADED||o===s.FragmentState.PARTIAL)&&("initSegment"===t.sn?this._loadInitSegment(t,n):n.live&&!(0,i.isFiniteNumber)(this.initPTS[t.cc])?(this.log("Waiting for video PTS in continuity counter "+t.cc+" of live stream before loading audio fragment "+t.sn+" of level "+this.trackId),this.state=r.State.WAITING_INIT_PTS):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,a)))},E.completeAudioSwitch=function(){var t=this.hls,n=this.media,i=this.trackId;n&&(this.log("Switching audio track : flushing all audio"),e.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,t.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:i})},b}(r.default);const E=b},"./src/controller/audio-track-controller.ts":
/*!**************************************************!*\
    !*** ./src/controller/audio-track-controller.ts ***!
    \**************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),o=n(/*! ../types/loader */"./src/types/loader.ts");function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){var t,n;function a(t){var n;return(n=e.call(this,t,"[audio-track-controller]")||this).tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.trackName="",n.selectDefaultTrack=!0,n.registerListeners(),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var u,c,d,h=a.prototype;return h.registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(i.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(i.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(i.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(i.Events.ERROR,this.onError,this)},h.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,e.prototype.destroy.call(this)},h.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},h.onManifestParsed=function(e,t){this.tracks=t.audioTracks||[]},h.onAudioTrackLoaded=function(e,t){var n=t.id,i=t.details,r=this.tracksInGroup[n];if(r){var a=r.details;r.details=t.details,this.log("audioTrack "+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,a))}else this.warn("Invalid audio track id "+n)},h.onLevelLoading=function(e,t){this.switchLevel(t.level)},h.onLevelSwitching=function(e,t){this.switchLevel(t.level)},h.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.audioGroupIds){var n=t.audioGroupIds[t.urlId];if(this.groupId!==n){this.groupId=n;var r=this.tracks.filter((function(e){return!n||e.groupId===n}));this.selectDefaultTrack&&!r.some((function(e){return e.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=r;var a={audioTracks:r};this.log("Updating audio tracks, "+r.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(i.Events.AUDIO_TRACKS_UPDATED,a),this.selectInitialTrack()}}},h.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===o.PlaylistContextType.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},h.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var n=t[this.trackId];this.log("Now switching to audio-track index "+e);var r=t[e],a=r.id,o=r.groupId,s=void 0===o?"":o,l=r.name,u=r.type,c=r.url;if(this.trackId=e,this.trackName=l,this.selectDefaultTrack=!1,this.hls.trigger(i.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:s,name:l,type:u,url:c}),!r.details||r.details.live){var d=this.switchParams(r.url,null==n?void 0:n.details);this.loadPlaylist(d)}}},h.selectInitialTrack=function(){var e=this.tracksInGroup;console.assert(e.length,"Initial audio track should be selected when tracks are known");var t=this.trackName,n=this.findTrackId(t)||this.findTrackId();-1!==n?this.setAudioTrack(n):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(i.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},h.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},h.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var n=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(n)){var r=n.id,a=n.groupId,o=n.url;if(t)try{o=t.addDirectives(o)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("loading audio-track playlist for id: "+r),this.clearTimer(),this.hls.trigger(i.Events.AUDIO_TRACK_LOADING,{url:o,id:r,groupId:a,deliveryDirectives:t||null})}},u=a,(c=[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}}])&&s(u.prototype,c),d&&s(u,d),Object.defineProperty(u,"prototype",{writable:!1}),a}(a.default);const c=u},"./src/controller/base-playlist-controller.ts":
/*!****************************************************!*\
    !*** ./src/controller/base-playlist-controller.ts ***!
    \****************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var i=n(/*! ../types/level */"./src/types/level.ts"),r=n(/*! ./level-helper */"./src/controller/level-helper.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../errors */"./src/errors.ts"),s=function(){function e(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=a.logger.log.bind(a.logger,t+":"),this.warn=a.logger.warn.bind(a.logger,t+":"),this.hls=e}var t=e.prototype;return t.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},t.onError=function(e,t){!t.fatal||t.type!==o.ErrorTypes.NETWORK_ERROR&&t.type!==o.ErrorTypes.KEY_SYSTEM_ERROR||this.stopLoad()},t.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},t.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},t.stopLoad=function(){this.canLoad=!1,this.clearTimer()},t.switchParams=function(e,t){var n=null==t?void 0:t.renditionReports;if(n)for(var r=0;r<n.length;r++){var o=n[r],s=void 0;try{s=new self.URL(o.URI,t.url).href}catch(e){a.logger.warn("Could not construct new URL for Rendition Report: "+e),s=o.URI||""}if(s===e.slice(-s.length)){var l=parseInt(o["LAST-MSN"])||(null==t?void 0:t.lastPartSn),u=parseInt(o["LAST-PART"])||(null==t?void 0:t.lastPartIndex);if(this.hls.config.lowLatencyMode){var c=Math.min(t.age-t.partTarget,t.targetduration);u>=0&&c>t.partTarget&&(u+=1)}return new i.HlsUrlParameters(l,u>=0?u:void 0,i.HlsSkip.No)}}},t.loadPlaylist=function(e){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},t.shouldLoadTrack=function(e){return this.canLoad&&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,n){var i=this,a=t.details,o=t.stats,s=self.performance.now(),l=o.loading.first?Math.max(0,s-o.loading.first):0;if(a.advancedDateTime=Date.now()-l,a.live||null!=n&&n.live){if(a.reloaded(n),n&&this.log("live playlist "+e+" "+(a.advanced?"REFRESHED "+a.lastPartSn+"-"+a.lastPartIndex:"MISSED")),n&&a.fragments.length>0&&(0,r.mergeDetails)(n,a),!this.canLoad||!a.live)return;var u,c=void 0,d=void 0;if(a.canBlockReload&&a.endSN&&a.advanced){var h=this.hls.config.lowLatencyMode,p=a.lastPartSn,f=a.endSN,g=a.lastPartIndex,m=p===f;-1!==g?(c=m?f+1:p,d=m?h?0:g:g+1):c=f+1;var v=a.age,y=v+a.ageHeader,b=Math.min(y-a.partTarget,1.5*a.targetduration);if(b>0){if(n&&b>n.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+n.tuneInGoal+" to: "+b+" with playlist age: "+a.age),b=0;else{var E=Math.floor(b/a.targetduration);c+=E,void 0!==d&&(d+=Math.round(b%a.targetduration/a.partTarget)),this.log("CDN Tune-in age: "+a.ageHeader+"s last advanced "+v.toFixed(2)+"s goal: "+b+" skip sn "+E+" to part "+d)}a.tuneInGoal=b}if(u=this.getDeliveryDirectives(a,t.deliveryDirectives,c,d),h||!m)return void this.loadPlaylist(u)}else u=this.getDeliveryDirectives(a,t.deliveryDirectives,c,d);var T=this.hls.mainForwardBufferInfo,A=T?T.end-T.len:0,k=1e3*(a.edge-A),_=(0,r.computeReloadInterval)(a,k);a.updated?s>this.requestScheduled+_&&(this.requestScheduled=o.loading.start):this.requestScheduled=-1,void 0!==c&&a.canBlockReload?this.requestScheduled=o.loading.first+_-(1e3*a.partTarget||1e3):this.requestScheduled=(-1===this.requestScheduled?s:this.requestScheduled)+_;var S=this.requestScheduled-s;S=Math.max(0,S),this.log("reload live playlist "+e+" in "+Math.round(S)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(u)}),S)}else this.clearTimer()},t.getDeliveryDirectives=function(e,t,n,r){var a=(0,i.getSkipValue)(e,n);return null!=t&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,r=t.part,a=i.HlsSkip.No),new i.HlsUrlParameters(n,r,a)},t.retryLoadingOrFail=function(e){var t,n=this,i=this.hls.config,r=this.retryCount<i.levelLoadingMaxRetry;if(r)if(this.requestScheduled=-1,this.retryCount++,e.details.indexOf("LoadTimeOut")>-1&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*i.levelLoadingRetryDelay,i.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout((function(){return n.loadPlaylist()}),a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return r},e}()},"./src/controller/base-stream-controller.ts":
/*!**************************************************!*\
    !*** ./src/controller/base-stream-controller.ts ***!
    \**************************************************/(e,t,n)=>{n.r(t),n.d(t,{State:()=>T,default:()=>A});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../task-loop */"./src/task-loop.ts"),a=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),o=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),l=n(/*! ../events */"./src/events.ts"),u=n(/*! ../errors */"./src/errors.ts"),c=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),d=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),h=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),p=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),f=n(/*! ./level-helper */"./src/controller/level-helper.ts"),g=n(/*! ../loader/fragment-loader */"./src/loader/fragment-loader.ts"),m=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),v=n(/*! ../utils/time-ranges */"./src/utils/time-ranges.ts"),y=n(/*! ../types/loader */"./src/types/loader.ts");function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}var T={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},A=function(e){var t,n;function r(t,n,i,r){var a;return(a=e.call(this)||this).hls=void 0,a.fragPrevious=null,a.fragCurrent=null,a.fragmentTracker=void 0,a.transmuxer=null,a._state=T.STOPPED,a.media=null,a.mediaBuffer=null,a.config=void 0,a.bitrateTest=!1,a.lastCurrentTime=0,a.nextLoadPosition=0,a.startPosition=0,a.loadedmetadata=!1,a.fragLoadError=0,a.retryDate=0,a.levels=null,a.fragmentLoader=void 0,a.keyLoader=void 0,a.levelLastLoaded=null,a.startFragRequested=!1,a.decrypter=void 0,a.initPTS=[],a.onvseeking=null,a.onvended=null,a.logPrefix="",a.log=void 0,a.warn=void 0,a.logPrefix=r,a.log=s.logger.log.bind(s.logger,r+":"),a.warn=s.logger.warn.bind(s.logger,r+":"),a.hls=t,a.fragmentLoader=new g.default(t.config),a.keyLoader=i,a.fragmentTracker=n,a.config=t.config,a.decrypter=new m.default(t.config),t.on(l.Events.LEVEL_SWITCHING,a.onLevelSwitching,function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a)),a}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,E(t,n);var A,k,_,S=r.prototype;return S.doTick=function(){this.onTickEnd()},S.onTickEnd=function(){},S.startLoad=function(e){},S.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var e=this.fragCurrent;e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=T.STOPPED},S._streamEnded=function(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;var n=t.partList;if(null!=n&&n.length){var i=n[n.length-1];return o.BufferHelper.isBuffered(this.media,i.start+i.duration/2)}var r=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(r)},S.getLevelDetails=function(){var e;if(this.levels&&null!==this.levelLastLoaded)return null===(e=this.levels[this.levelLastLoaded])||void 0===e?void 0:e.details},S.onMediaAttached=function(e,t){var n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===T.STOPPED&&this.startLoad(i.startPosition)},S.onMediaDetaching=function(){var e=this.media;null!=e&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},S.onMediaSeeking=function(){var e=this.config,t=this.fragCurrent,n=this.media,r=this.mediaBuffer,a=this.state,s=n?n.currentTime:0,l=o.BufferHelper.bufferInfo(r||n,s,e.maxBufferHole);if(this.log("media seeking to "+((0,i.isFiniteNumber)(s)?s.toFixed(3):s)+", state: "+a),this.state===T.ENDED)this.resetLoadingState();else if(t){var u=e.maxFragLookUpTolerance,c=t.start-u,d=t.start+t.duration+u;if(!l.len||d<l.start||c>l.end){var h=s>d;(s<c||h)&&(h&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests()),this.resetLoadingState())}}n&&(this.lastCurrentTime=s),this.loadedmetadata||l.len||(this.nextLoadPosition=this.startPosition=s),this.tickImmediate()},S.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},S.onLevelSwitching=function(e,t){this.fragLoadError=0},S.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},S.onHandlerDestroyed=function(){this.state=T.STOPPED,this.hls.off(l.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,e.prototype.onHandlerDestroyed.call(this)},S.loadFragment=function(e,t,n){this._loadFragForPlayback(e,t,n)},S._loadFragForPlayback=function(e,t,n){var i=this;this._doFragLoad(e,t,n,(function(t){if(i.fragContextChanged(e))return i.warn("Fragment "+e.sn+(t.part?" p: "+t.part.index:"")+" of level "+e.level+" was dropped during download."),void i.fragmentTracker.removeFragment(e);e.stats.chunkCount++,i._handleFragmentLoadProgress(t)})).then((function(t){if(t){i.fragLoadError=0;var n=i.state;i.fragContextChanged(e)?(n===T.FRAG_LOADING||!i.fragCurrent&&n===T.PARSING)&&(i.fragmentTracker.removeFragment(e),i.state=T.IDLE):("payload"in t&&(i.log("Loaded fragment "+e.sn+" of level "+e.level),i.hls.trigger(l.Events.FRAG_LOADED,t)),i._handleFragmentLoadComplete(t))}})).catch((function(t){i.state!==T.STOPPED&&i.state!==T.ERROR&&(i.warn(t),i.resetFragmentLoading(e))}))},S.flushMainBuffer=function(e,t,n){if(void 0===n&&(n=null),e-t){var i={startOffset:e,endOffset:t,type:n};this.fragLoadError=0,this.hls.trigger(l.Events.BUFFER_FLUSHING,i)}},S._loadInitSegment=function(e,t){var n=this;this._doFragLoad(e,t).then((function(t){if(!t||n.fragContextChanged(e)||!n.levels)throw new Error("init load aborted");return t})).then((function(t){var i=n.hls,r=t.payload,a=e.decryptdata;if(r&&r.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var o=self.performance.now();return n.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).then((function(n){var r=self.performance.now();return i.trigger(l.Events.FRAG_DECRYPTED,{frag:e,payload:n,stats:{tstart:o,tdecrypt:r}}),t.payload=n,t}))}return t})).then((function(t){var i=n.fragCurrent,r=n.hls,a=n.levels;if(!a)throw new Error("init load aborted, missing levels");var o=a[e.level].details;console.assert(o,"Level details are defined when init segment is loaded");var s=e.stats;n.state=T.IDLE,n.fragLoadError=0,e.data=new Uint8Array(t.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),t.frag===i&&r.trigger(l.Events.FRAG_BUFFERED,{stats:s,frag:i,part:null,id:e.type}),n.tick()})).catch((function(t){n.state!==T.STOPPED&&n.state!==T.ERROR&&(n.warn(t),n.resetFragmentLoading(e))}))},S.fragContextChanged=function(e){var t=this.fragCurrent;return!e||!t||e.level!==t.level||e.sn!==t.sn||e.urlId!==t.urlId},S.fragBufferedComplete=function(e,t){var n,i,r,a,s=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+e.type+" sn: "+e.sn+(t?" part: "+t.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level+" (frag:["+(null!=(n=e.startPTS)?n:NaN).toFixed(3)+"-"+(null!=(i=e.endPTS)?i:NaN).toFixed(3)+"] > buffer:"+(s?v.default.toString(o.BufferHelper.getBuffered(s)):"(detached)")+")"),this.state=T.IDLE,s&&(!this.loadedmetadata&&e.type==y.PlaylistLevelType.MAIN&&s.buffered.length&&(null===(r=this.fragCurrent)||void 0===r?void 0:r.sn)===(null===(a=this.fragPrevious)||void 0===a?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},S.seekToStartPos=function(){},S._handleFragmentLoadComplete=function(e){var t=this.transmuxer;if(t){var n=e.frag,i=e.part,r=e.partsLoaded,a=!r||0===r.length||r.some((function(e){return!e})),o=new c.ChunkMetadata(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}},S._handleFragmentLoadProgress=function(e){},S._doFragLoad=function(e,t,n,r){var a,o=this;if(void 0===n&&(n=null),!this.levels)throw new Error("frag load aborted, missing levels");var s=null;if(!e.encrypted||null!==(a=e.decryptdata)&&void 0!==a&&a.key?!e.encrypted&&t.encryptedFragments.length&&this.keyLoader.loadClear(e,t.encryptedFragments):(this.log("Loading key for "+e.sn+" of ["+t.startSN+"-"+t.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+e.level),this.state=T.KEY_LOADING,this.fragCurrent=e,s=this.keyLoader.load(e).then((function(e){if(!o.fragContextChanged(e.frag))return o.hls.trigger(l.Events.KEY_LOADED,e),o.state===T.KEY_LOADING&&(o.state=T.IDLE),e})),this.hls.trigger(l.Events.KEY_LOADING,{frag:e}),this.throwIfFragContextChanged("KEY_LOADING")),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&t){var u=t.partList;if(u&&r){n>e.end&&t.fragmentHint&&(e=t.fragmentHint);var c=this.getNextPart(u,e,n);if(c>-1){var d=u[c];return this.log("Loading part sn: "+e.sn+" p: "+d.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+c+"-"+(u.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),this.nextLoadPosition=d.start+d.duration,this.state=T.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:e,part:u[c],targetBufferTime:n}),this.throwIfFragContextChanged("FRAG_LOADING parts"),s?s.then((function(t){return!t||o.fragContextChanged(t.frag)?null:o.doFragPartsLoad(e,u,c,r)})).catch((function(e){return o.handleFragLoadError(e)})):this.doFragPartsLoad(e,u,c,r).catch((function(e){return o.handleFragLoadError(e)}))}if(!e.url||this.loadedEndOfParts(u,n))return Promise.resolve(null)}}this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(n.toFixed(3))),(0,i.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=T.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.throwIfFragContextChanged("FRAG_LOADING");var h=this.config.progressive;return h&&s?s.then((function(t){return!t||o.fragContextChanged(null==t?void 0:t.frag)?null:o.fragmentLoader.load(e,r)})).catch((function(e){return o.handleFragLoadError(e)})):Promise.all([this.fragmentLoader.load(e,h?r:void 0),s]).then((function(e){var t=e[0];return!h&&t&&r&&r(t),t})).catch((function(e){return o.handleFragLoadError(e)}))},S.throwIfFragContextChanged=function(e){if(null===this.fragCurrent)throw new Error("frag load aborted, context changed in "+e)},S.doFragPartsLoad=function(e,t,n,i){var r=this;return new Promise((function(a,o){var s=[];!function n(u){var c=t[u];r.fragmentLoader.loadPart(e,c,i).then((function(i){s[c.index]=i;var o=i.part;r.hls.trigger(l.Events.FRAG_LOADED,i);var d=t[u+1];if(!d||d.fragment!==e)return a({frag:e,part:o,partsLoaded:s});n(u+1)})).catch(o)}(n)}))},S.handleFragLoadError=function(e){if("data"in e){var t=e.data;e.data&&t.details===u.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(l.Events.ERROR,t)}else this.hls.trigger(l.Events.ERROR,{type:u.ErrorTypes.OTHER_ERROR,details:u.ErrorDetails.INTERNAL_EXCEPTION,err:e,fatal:!0});return null},S._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(t&&this.state===T.PARSING){var n=t.frag,i=t.part,r=t.level,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(n,i,r,e.partial)}else this.fragCurrent||this.state===T.STOPPED||this.state===T.ERROR||(this.state=T.IDLE)},S.getCurrentContext=function(e){var t=this.levels,n=e.level,i=e.sn,r=e.part;if(!t||!t[n])return this.warn("Levels object was unset while buffering fragment "+i+" of level "+n+". The current chunk will not be buffered."),null;var a=t[n],o=r>-1?(0,f.getPartWith)(a,i,r):null,s=o?o.fragment:(0,f.getFragmentWithSN)(a,i,this.fragCurrent);return s?{frag:s,part:o,level:a}:null},S.bufferFragmentData=function(e,t,n,i){if(e&&this.state===T.PARSING){var r=e.data1,a=e.data2,o=r;if(r&&a&&(o=(0,d.appendUint8Array)(r,a)),o&&o.length){var s={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:o};this.hls.trigger(l.Events.BUFFER_APPENDING,s),e.dropped&&e.independent&&!n&&this.flushBufferGap(t)}}},S.flushBufferGap=function(e){var t=this.media;if(t)if(o.BufferHelper.isBuffered(t,t.currentTime)){var n=t.currentTime,i=o.BufferHelper.bufferInfo(t,n,0),r=e.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*r),s=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-s>a&&this.flushMainBuffer(s,e.start)}else this.flushMainBuffer(0,e.start)},S.getFwdBufferInfo=function(e,t){var n=this.config,r=this.getLoadPosition();if(!(0,i.isFiniteNumber)(r))return null;var a=o.BufferHelper.bufferInfo(e,r,n.maxBufferHole);if(0===a.len&&void 0!==a.nextStart){var s=this.fragmentTracker.getBufferedFrag(r,t);if(s&&a.nextStart<s.end)return o.BufferHelper.bufferInfo(e,r,Math.max(a.nextStart,n.maxBufferHole))}return a},S.getMaxBufferLength=function(e){var t,n=this.config;return t=e?Math.max(8*n.maxBufferSize/e,n.maxBufferLength):n.maxBufferLength,Math.min(t,n.maxMaxBufferLength)},S.reduceMaxBufferLength=function(e){var t=this.config,n=e||t.maxBufferLength;return t.maxMaxBufferLength>=n&&(t.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},S.getNextFragment=function(e,t){var n=t.fragments,i=n.length;if(!i)return null;var r,a=this.config,o=n[0].start;if(t.live){var s=a.initialLiveManifestSize;if(i<s)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+s+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,n),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=o&&(r=n[0]);if(!r){var l=a.lowLatencyMode?t.partEnd:t.fragmentEnd;r=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(r)},S.mapToInitFragWhenRequired=function(e){return null==e||!e.initSegment||null!=e&&e.initSegment.data||this.bitrateTest?e:e.initSegment},S.getNextPart=function(e,t,n){for(var i=-1,r=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o];if(a=a&&!l.independent,i>-1&&n<l.start)break;var u=l.loaded;u?i=-1:(r||l.independent||a)&&l.fragment===t&&(i=o),r=u}return i},S.loadedEndOfParts=function(e,t){var n=e[e.length-1];return n&&t>n.start&&n.loaded},S.getInitialLiveFragment=function(e,t){var n=this.fragPrevious,i=null;if(n){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+n.programDateTime),i=(0,p.findFragmentByPDT)(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var r=n.sn+1;if(r>=e.startSN&&r<=e.endSN){var a=t[r-e.startSN];n.cc===a.cc&&(i=a,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(i=(0,p.findFragWithCC)(t,n.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i},S.getFragmentAtPosition=function(e,t,n){var i,r=this.config,o=this.fragPrevious,s=n.fragments,l=n.endSN,u=n.fragmentHint,c=r.maxFragLookUpTolerance,d=!!(r.lowLatencyMode&&n.partList&&u);if(d&&u&&!this.bitrateTest&&(s=s.concat(u),l=u.sn),e<t){var h=e>t-c?0:c;i=(0,p.findFragmentByPTS)(o,s,e,h)}else i=s[s.length-1];if(i){var f=i.sn-n.startSN;if(this.fragmentTracker.getState(i)===a.FragmentState.OK&&(o=i),o&&i.sn===o.sn&&!d&&o&&i.level===o.level){var g=s[f+1];i.sn<l&&this.fragmentTracker.getState(g)!==a.FragmentState.OK?(this.log("SN "+i.sn+" just loaded, load next one: "+g.sn),i=g):i=null}}return i},S.synchronizeToLiveEdge=function(e){var t=this.config,n=this.media;if(n){var i=this.hls.liveSyncPosition,r=n.currentTime,a=e.fragments[0].start,o=e.edge,s=r>=a-t.maxFragLookUpTolerance&&r<=o;if(null!==i&&n.duration>i&&(r<i||!s)){var l=void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!s&&n.readyState<4||r<o-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn("Playback: "+r.toFixed(3)+" is located too far from the end of live sliding playlist: "+o+", reset currentTime to : "+i.toFixed(3)),n.currentTime=i))}}},S.alignPlaylists=function(e,t){var n=this.levels,r=this.levelLastLoaded,a=this.fragPrevious,o=null!==r?n[r]:null,s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;var l=e.fragments[0].start,u=!t,c=e.alignedSliding&&(0,i.isFiniteNumber)(l);if(u||!c&&!l){(0,h.alignStream)(a,o,e);var d=e.fragments[0].start;return this.log("Live playlist sliding: "+d.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(a?a.sn:"na")+" fragments: "+s),d}return l},S.waitForCdnTuneIn=function(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,3*e.partTarget)},S.setStartPosition=function(e,t){var n=this.startPosition;if(n<t&&(n=-1),-1===n||-1===this.lastCurrentTime){var r=e.startTimeOffset;(0,i.isFiniteNumber)(r)?(n=t+r,r<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log("Start time offset "+r+" found in playlist, adjust startPosition to "+n),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n},S.getLoadPosition=function(){var e=this.media,t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t},S.handleFragLoadAborted=function(e,t){this.transmuxer&&"initSegment"!==e.sn&&e.stats.aborted&&(this.warn("Fragment "+e.sn+(t?" part"+t.index:"")+" of level "+e.level+" was aborted"),this.resetFragmentLoading(e))},S.resetFragmentLoading=function(e){this.fragCurrent&&(this.fragContextChanged(e)||this.state===T.FRAG_LOADING_WAITING_RETRY)||(this.state=T.IDLE)},S.onFragmentOrKeyLoadError=function(e,t){if(t.fatal)return this.stopLoad(),void(this.state=T.ERROR);var n=this.config;if(t.chunkMeta){var i=this.getCurrentContext(t.chunkMeta);i&&(t.frag=i.frag,t.levelRetry=!0,this.fragLoadError=n.fragLoadingMaxRetry)}var r=t.frag;if(r&&r.type===e){var a=this.fragCurrent;if(console.assert(a&&r.sn===a.sn&&r.level===a.level&&r.urlId===a.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=n.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var o=Math.min(Math.pow(2,this.fragLoadError)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+e+" "+r.level+" failed to load, retrying in "+o+"ms"),this.retryDate=self.performance.now()+o,this.fragLoadError++,this.state=T.FRAG_LOADING_WAITING_RETRY}else t.levelRetry?(e===y.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=T.IDLE):(s.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=T.ERROR)}},S.afterBufferFlushed=function(e,t,n){if(e){var i=o.BufferHelper.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===T.ENDED&&this.resetLoadingState()}},S.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=T.IDLE},S.resetStartWhenNotLoaded=function(e){if(!this.loadedmetadata){this.startFragRequested=!1;var t=this.levels?this.levels[e].details:null;null!=t&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},S.updateLevelTiming=function(e,t,n,i){var r=this,a=n.details;console.assert(!!a,"level.details must be defined");var o=Object.keys(e.elementaryStreams).reduce((function(t,o){var s=e.elementaryStreams[o];if(s){var u=s.endPTS-s.startPTS;if(u<=0)return r.warn("Could not parse fragment "+e.sn+" "+o+" duration reliably ("+u+")"),t||!1;var c=i?0:(0,f.updateFragPTSDTS)(a,e,s.startPTS,s.endPTS,s.startDTS,s.endDTS);return r.hls.trigger(l.Events.LEVEL_PTS_UPDATED,{details:a,level:n,drift:c,type:o,frag:e,start:s.startPTS,end:s.endPTS}),!0}return t}),!1);o||(this.warn("Found no media in fragment "+e.sn+" of level "+n.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=T.PARSED,this.hls.trigger(l.Events.FRAG_PARSED,{frag:e,part:t})},S.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},A=r,(k=[{key:"state",get:function(){return this._state},set:function(e){var t=this._state;t!==e&&(this._state=e,this.log(t+"->"+e))}}])&&b(A.prototype,k),_&&b(A,_),Object.defineProperty(A,"prototype",{writable:!1}),r}(r.default)},"./src/controller/buffer-controller.ts":
/*!*********************************************!*\
    !*** ./src/controller/buffer-controller.ts ***!
    \*********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../errors */"./src/errors.ts"),s=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),l=n(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.ts"),u=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),c=n(/*! ./buffer-operation-queue */"./src/controller/buffer-operation-queue.ts"),d=(0,l.getMediaSource)(),h=/([ha]vc.)(?:\.[^.,]+)+/,p=function(){function e(e){var t=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var e=t.media,n=t.mediaSource;a.logger.log("[buffer-controller]: Media source opened"),e&&(e.removeEventListener("emptied",t._onMediaEmptied),t.updateMediaElementDuration(),t.hls.trigger(r.Events.MEDIA_ATTACHED,{media:e})),n&&n.removeEventListener("sourceopen",t._onMediaSourceOpen),t.checkPendingTracks()},this._onMediaSourceClose=function(){a.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){a.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var e=t.media,n=t._objectUrl;e&&e.src!==n&&a.logger.error("Media element src was set while attaching MediaSource ("+n+" > "+e.src+")")},this.hls=e,this._initSourceBuffer(),this.registerListeners()}var t=e.prototype;return t.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},t.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},t.registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(r.Events.BUFFER_RESET,this.onBufferReset,this),e.on(r.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(r.Events.BUFFER_EOS,this.onBufferEos,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(r.Events.FRAG_PARSED,this.onFragParsed,this),e.on(r.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(r.Events.BUFFER_RESET,this.onBufferReset,this),e.off(r.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.off(r.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(r.Events.BUFFER_EOS,this.onBufferEos,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(r.Events.FRAG_PARSED,this.onFragParsed,this),e.off(r.Events.FRAG_CHANGED,this.onFragChanged,this)},t._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new c.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},t.onManifestParsed=function(e,t){var n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.details=null,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},t.onMediaAttaching=function(e,t){var n=this.media=t.media;if(n&&d){var i=this.mediaSource=new d;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),n.src=self.URL.createObjectURL(i),this._objectUrl=n.src,n.addEventListener("emptied",this._onMediaEmptied)}},t.onMediaDetaching=function(){var e=this.media,t=this.mediaSource,n=this._objectUrl;if(t){if(a.logger.log("[buffer-controller]: media source detaching"),"open"===t.readyState)try{t.endOfStream()}catch(e){a.logger.warn("[buffer-controller]: onMediaDetaching: "+e.message+" while calling endOfStream")}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),e.src===n?(e.removeAttribute("src"),e.load()):a.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(r.Events.MEDIA_DETACHED,void 0)},t.onBufferReset=function(){var e=this;this.getSourceBufferTypes().forEach((function(t){var n=e.sourceBuffer[t];try{n&&(e.removeBufferListeners(t),e.mediaSource&&e.mediaSource.removeSourceBuffer(n),e.sourceBuffer[t]=void 0)}catch(e){a.logger.warn("[buffer-controller]: Failed to reset the "+t+" buffer",e)}})),this._initSourceBuffer()},t.onBufferCodecs=function(e,t){var n=this,i=this.getSourceBufferTypes().length;Object.keys(t).forEach((function(e){if(i){var r=n.tracks[e];if(r&&"function"==typeof r.buffer.changeType){var o=t[e],s=o.id,l=o.codec,u=o.levelCodec,c=o.container,d=o.metadata,p=(r.levelCodec||r.codec).replace(h,"$1"),f=(u||l).replace(h,"$1");if(p!==f){var g=c+";codecs="+(u||l);n.appendChangeType(e,g),a.logger.log("[buffer-controller]: switching codec "+p+" to "+f),n.tracks[e]={buffer:r.buffer,codec:l,container:c,levelCodec:u,metadata:d,id:s}}}}else n.pendingTracks[e]=t[e]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=function(e,t){var n=this,i=this.operationQueue,r={execute:function(){var r=n.sourceBuffer[e];r&&(a.logger.log("[buffer-controller]: changing "+e+" sourceBuffer type to "+t),r.changeType(t)),i.shiftAndExecuteNext(e)},onStart:function(){},onComplete:function(){},onError:function(t){a.logger.warn("[buffer-controller]: Failed to change "+e+" SourceBuffer type",t)}};i.append(r,e)},t.onBufferAppending=function(e,t){var n=this,i=this.hls,l=this.operationQueue,u=this.tracks,c=t.data,d=t.type,h=t.frag,p=t.part,f=t.chunkMeta,g=f.buffering[d],m=self.performance.now();g.start=m;var v=h.stats.buffering,y=p?p.stats.buffering:null;0===v.start&&(v.start=m),y&&0===y.start&&(y.start=m);var b=u.audio,E=!1;"audio"===d&&"audio/mpeg"===(null==b?void 0:b.container)&&(E=!this.lastMpegAudioChunk||1===f.id||this.lastMpegAudioChunk.sn!==f.sn,this.lastMpegAudioChunk=f);var T=h.start,A={execute:function(){if(g.executeStart=self.performance.now(),E){var e=n.sourceBuffer[d];if(e){var t=T-e.timestampOffset;Math.abs(t)>=.1&&(a.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+T+" (delta: "+t+") sn: "+h.sn+")"),e.timestampOffset=T)}}n.appendExecutor(c,d)},onStart:function(){},onComplete:function(){var e=self.performance.now();g.executeEnd=g.end=e,0===v.first&&(v.first=e),y&&0===y.first&&(y.first=e);var t=n.sourceBuffer,i={};for(var a in t)i[a]=s.BufferHelper.getBuffered(t[a]);n.appendError=0,n.hls.trigger(r.Events.BUFFER_APPENDED,{type:d,frag:h,part:p,chunkMeta:f,parent:h.type,timeRanges:i})},onError:function(e){a.logger.error("[buffer-controller]: Error encountered while trying to append to the "+d+" SourceBuffer",e);var t={type:o.ErrorTypes.MEDIA_ERROR,parent:h.type,details:o.ErrorDetails.BUFFER_APPEND_ERROR,err:e,fatal:!1};e.code===DOMException.QUOTA_EXCEEDED_ERR?t.details=o.ErrorDetails.BUFFER_FULL_ERROR:(n.appendError++,t.details=o.ErrorDetails.BUFFER_APPEND_ERROR,n.appendError>i.config.appendErrorMaxRetry&&(a.logger.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),t.fatal=!0,i.stopLoad())),i.trigger(r.Events.ERROR,t)}};l.append(A,d)},t.onBufferFlushing=function(e,t){var n=this,i=this.operationQueue,o=function(e){return{execute:n.removeExecutor.bind(n,e,t.startOffset,t.endOffset),onStart:function(){},onComplete:function(){n.hls.trigger(r.Events.BUFFER_FLUSHED,{type:e})},onError:function(t){a.logger.warn("[buffer-controller]: Failed to remove from "+e+" SourceBuffer",t)}}};t.type?i.append(o(t.type),t.type):this.getSourceBufferTypes().forEach((function(e){i.append(o(e),e)}))},t.onFragParsed=function(e,t){var n=this,i=t.frag,o=t.part,s=[],l=o?o.elementaryStreams:i.elementaryStreams;l[u.ElementaryStreamTypes.AUDIOVIDEO]?s.push("audiovideo"):(l[u.ElementaryStreamTypes.AUDIO]&&s.push("audio"),l[u.ElementaryStreamTypes.VIDEO]&&s.push("video")),0===s.length&&a.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var e=self.performance.now();i.stats.buffering.end=e,o&&(o.stats.buffering.end=e);var t=o?o.stats:i.stats;n.hls.trigger(r.Events.FRAG_BUFFERED,{frag:i,part:o,stats:t,id:i.type})}),s)},t.onFragChanged=function(e,t){this.flushBackBuffer()},t.onBufferEos=function(e,t){var n=this,i=this.getSourceBufferTypes().reduce((function(e,i){var r=n.sourceBuffer[i];return!r||t.type&&t.type!==i||(r.ending=!0,r.ended||(r.ended=!0,a.logger.log("[buffer-controller]: "+i+" sourceBuffer now EOS"))),e&&!(r&&!r.ended)}),!0);i&&(a.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){n.getSourceBufferTypes().forEach((function(e){var t=n.sourceBuffer[e];t&&(t.ending=!1)}));var e=n.mediaSource;e&&"open"===e.readyState?(a.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),e.endOfStream()):e&&a.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+e.readyState)})))},t.onLevelUpdated=function(e,t){var n=t.details;n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var e=this.hls,t=this.details,n=this.media,o=this.sourceBuffer;if(n&&null!==t){var l=this.getSourceBufferTypes();if(l.length){var u=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if((0,i.isFiniteNumber)(u)&&!(u<0)){var c=n.currentTime,d=t.levelTargetDuration,h=Math.max(u,d),p=Math.floor(c/d)*d-h;l.forEach((function(n){var i=o[n];if(i){var l=s.BufferHelper.getBuffered(i);if(l.length>0&&p>l.start(0)){if(e.trigger(r.Events.BACK_BUFFER_REACHED,{bufferEnd:p}),t.live)e.trigger(r.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:p});else if(i.ended&&l.end(l.length-1)-c<2*d)return void a.logger.info("[buffer-controller]: Cannot flush "+n+" back buffer while SourceBuffer is in ended state");e.trigger(r.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:p,type:n})}}}))}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,n=this.media,r=this.mediaSource,o=e.fragments[0].start+e.totalduration,s=n.duration,l=(0,i.isFiniteNumber)(r.duration)?r.duration:0;e.live&&t.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),r.duration=1/0,this.updateSeekableRange(e)):(o>l&&o>s||!(0,i.isFiniteNumber)(s))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+o.toFixed(3)),r.duration=o)}},t.updateSeekableRange=function(e){var t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&null!=t&&t.setLiveSeekableRange){var i=Math.max(0,n[0].start),r=Math.max(i,i+e.totalduration);t.setLiveSeekableRange(i,r)}},t.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.operationQueue,n=this.pendingTracks,i=Object.keys(n).length;if(i&&!e||2===i){this.createSourceBuffers(n),this.pendingTracks={};var a=this.getSourceBufferTypes();if(0===a.length)return void this.hls.trigger(r.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});a.forEach((function(e){t.executeNext(e)}))}},t.createSourceBuffers=function(e){var t=this.sourceBuffer,n=this.mediaSource;if(!n)throw Error("createSourceBuffers called when mediaSource was null");var i=0;for(var s in e)if(!t[s]){var l=e[s];if(!l)throw Error("source buffer exists for track "+s+", however track does not");var u=l.levelCodec||l.codec,c=l.container+";codecs="+u;a.logger.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=t[s]=n.addSourceBuffer(c),h=s;this.addBufferListener(h,"updatestart",this._onSBUpdateStart),this.addBufferListener(h,"updateend",this._onSBUpdateEnd),this.addBufferListener(h,"error",this._onSBUpdateError),this.tracks[s]={buffer:d,codec:u,container:l.container,levelCodec:l.levelCodec,metadata:l.metadata,id:l.id},i++}catch(e){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(r.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:c})}}i&&this.hls.trigger(r.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=function(e){this.operationQueue.current(e).onStart()},t._onSBUpdateEnd=function(e){var t=this.operationQueue;t.current(e).onComplete(),t.shiftAndExecuteNext(e)},t._onSBUpdateError=function(e,t){a.logger.error("[buffer-controller]: "+e+" SourceBuffer error",t),this.hls.trigger(r.Events.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var n=this.operationQueue.current(e);n&&n.onError(t)},t.removeExecutor=function(e,t,n){var r=this.media,o=this.mediaSource,s=this.operationQueue,l=this.sourceBuffer[e];if(!r||!o||!l)return a.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void s.shiftAndExecuteNext(e);var u=(0,i.isFiniteNumber)(r.duration)?r.duration:1/0,c=(0,i.isFiniteNumber)(o.duration)?o.duration:1/0,d=Math.max(0,t),h=Math.min(n,u,c);h>d&&!l.ending?(l.ended=!1,a.logger.log("[buffer-controller]: Removing ["+d+","+h+"] from the "+e+" SourceBuffer"),console.assert(!l.updating,e+" sourceBuffer must not be updating"),l.remove(d,h)):s.shiftAndExecuteNext(e)},t.appendExecutor=function(e,t){var n=this.operationQueue,i=this.sourceBuffer[t];if(!i)return a.logger.warn("[buffer-controller]: Attempting to append to the "+t+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(t);i.ended=!1,console.assert(!i.updating,t+" sourceBuffer must not be updating"),i.appendBuffer(e)},t.blockBuffers=function(e,t){var n=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length)return a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(e);var i=this.operationQueue,r=t.map((function(e){return i.appendBlocker(e)}));Promise.all(r).then((function(){e(),t.forEach((function(e){var t=n.sourceBuffer[e];t&&t.updating||i.shiftAndExecuteNext(e)}))}))},t.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},t.addBufferListener=function(e,t,n){var i=this.sourceBuffer[e];if(i){var r=n.bind(this,e);this.listeners[e].push({event:t,listener:r}),i.addEventListener(t,r)}},t.removeBufferListeners=function(e){var t=this.sourceBuffer[e];t&&this.listeners[e].forEach((function(e){t.removeEventListener(e.event,e.listener)}))},e}()},"./src/controller/buffer-operation-queue.ts":
/*!**************************************************!*\
    !*** ./src/controller/buffer-operation-queue.ts ***!
    \**************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var i=n(/*! ../utils/logger */"./src/utils/logger.ts"),r=function(){function e(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}var t=e.prototype;return t.append=function(e,t){var n=this.queues[t];n.push(e),1===n.length&&this.buffers[t]&&this.executeNext(t)},t.insertAbort=function(e,t){this.queues[t].unshift(e),this.executeNext(t)},t.appendBlocker=function(e){var t,n=new Promise((function(e){t=e})),i={execute:t,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,e),n},t.executeNext=function(e){var t=this.buffers,n=this.queues,r=t[e],a=n[e];if(a.length){var o=a[0];try{o.execute()}catch(t){i.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),o.onError(t),r&&r.updating||(a.shift(),this.executeNext(e))}}},t.shiftAndExecuteNext=function(e){this.queues[e].shift(),this.executeNext(e)},t.current=function(e){return this.queues[e][0]},e}()},"./src/controller/cap-level-controller.ts":
/*!************************************************!*\
    !*** ./src/controller/cap-level-controller.ts ***!
    \************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(/*! ../events */"./src/events.ts");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var a=function(){function e(e){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var t,n,a,o=e.prototype;return o.setStreamController=function(e){this.streamController=e},o.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},o.registerListeners=function(){var e=this.hls;e.on(i.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.unregisterListener=function(){var e=this.hls;e.off(i.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},o.onFpsDropLevelCapping=function(t,n){e.isLevelAllowed(n.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(n.droppedLevel)},o.onMediaAttaching=function(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null},o.onManifestParsed=function(e,t){var n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onBufferCodecs=function(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()},o.onMediaDetaching=function(){this.stopCapping()},o.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var e=this.hls.levels;if(e.length){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e.length-1),t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},o.getMaxLevel=function(t){var n=this,i=this.hls.levels;if(!i.length)return-1;var r=i.filter((function(i,r){return e.isLevelAllowed(r,n.restrictedLevels)&&r<=t}));return this.clientRect=null,e.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},o.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},o.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},o.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,t.width||t.height||(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t},e.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},e.getMaxLevelByMediaSize=function(e,t,n){if(!e||!e.length)return-1;for(var i,r,a=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=n)&&(i=s,!(r=e[o+1])||i.width!==r.width||i.height!==r.height)){a=o;break}}return a},t=e,(n=[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch(e){}return e}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();const o=a},"./src/controller/cmcd-controller.ts":
/*!*******************************************!*\
    !*** ./src/controller/cmcd-controller.ts ***!
    \*******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../types/cmcd */"./src/types/cmcd.ts"),a=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts");function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}var h=function(){function e(t){var n=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){n.initialized&&(n.starved=!0),n.buffering=!0},this.onPlaying=function(){n.initialized||(n.initialized=!0),n.buffering=!1},this.applyPlaylistData=function(e){try{n.apply(e,{ot:r.CMCDObjectType.MANIFEST,su:!n.initialized})}catch(e){o.logger.warn("Could not generate manifest CMCD data.",e)}},this.applyFragmentData=function(e){try{var t=e.frag,i=n.hls.levels[t.level],a=n.getObjectType(t),s={d:1e3*t.duration,ot:a};a!==r.CMCDObjectType.VIDEO&&a!==r.CMCDObjectType.AUDIO&&a!=r.CMCDObjectType.MUXED||(s.br=i.bitrate/1e3,s.tb=n.getTopBandwidth(a)/1e3,s.bl=n.getBufferLength(a)),n.apply(e,s)}catch(e){o.logger.warn("Could not generate segment CMCD data.",e)}},this.hls=t;var i=this.config=t.config,a=i.cmcd;null!=a&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=a.sessionId||e.uuid(),this.cid=a.contentId,this.useHeaders=!0===a.useHeaders,this.registerListeners())}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(i.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.off(i.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},t.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},t.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},t.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},t.onBufferCreated=function(e,t){var n,i;this.audioBuffer=null===(n=t.tracks.audio)||void 0===n?void 0:n.buffer,this.videoBuffer=null===(i=t.tracks.video)||void 0===i?void 0:i.buffer},t.createData=function(){var e;return{v:r.CMCDVersion,sf:r.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:null===(e=this.media)||void 0===e?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},t.apply=function(t,n){void 0===n&&(n={}),d(n,this.createData());var i=n.ot===r.CMCDObjectType.INIT||n.ot===r.CMCDObjectType.VIDEO||n.ot===r.CMCDObjectType.MUXED;if(this.starved&&i&&(n.bs=!0,n.su=!0,this.starved=!1),null==n.su&&(n.su=this.buffering),this.useHeaders){var a=e.toHeaders(n);if(!Object.keys(a).length)return;t.headers||(t.headers={}),d(t.headers,a)}else{var o=e.toQuery(n);if(!o)return;t.url=e.appendQueryToUri(t.url,o)}},t.getObjectType=function(e){var t=e.type;return"subtitle"===t?r.CMCDObjectType.TIMED_TEXT:"initSegment"===e.sn?r.CMCDObjectType.INIT:"audio"===t?r.CMCDObjectType.AUDIO:"main"===t?this.hls.audioTracks.length?r.CMCDObjectType.VIDEO:r.CMCDObjectType.MUXED:void 0},t.getTopBandwidth=function(e){var t,n=0,i=this.hls;if(e===r.CMCDObjectType.AUDIO)t=i.audioTracks;else{var a=i.maxAutoLevel,o=a>-1?a+1:i.levels.length;t=i.levels.slice(0,o)}for(var s,l=u(t);!(s=l()).done;){var c=s.value;c.bitrate>n&&(n=c.bitrate)}return n>0?n:NaN},t.getBufferLength=function(e){var t=this.hls.media,n=e===r.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;return n&&t?1e3*a.BufferHelper.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len:NaN},t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,n,i){t(e),this.loader.load(e,n,i)},l(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=function(){var e=this.config.fLoader,t=this.applyFragmentData,n=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new n(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,n,i){t(e),this.loader.load(e,n,i)},l(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},e.uuid=function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)},e.serialize=function(e){for(var t,n=[],i=function(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e},r=function(e){return Math.round(e)},a=function(e){return 100*r(e/100)},o={br:r,d:r,bl:a,dl:a,mtp:a,nor:function(e){return encodeURIComponent(e)},rtp:a,tb:r},s=u(Object.keys(e||{}).sort());!(t=s()).done;){var l=t.value,c=e[l];if(i(c)&&!("v"===l&&1===c||"pr"==l&&1===c)){var d=o[l];d&&(c=d(c));var h=typeof c,p=void 0;p="ot"===l||"sf"===l||"st"===l?l+"="+c:"boolean"===h?l:"number"===h?l+"="+c:l+"="+JSON.stringify(c),n.push(p)}}return n.join(",")},e.toHeaders=function(t){for(var n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=0,s=Object.keys(t);o<s.length;o++){var l=s[o];r[null!=a[l]?a[l]:1][l]=t[l]}for(var u=0;u<r.length;u++){var c=e.serialize(r[u]);c&&(n["CMCD-"+i[u]]=c)}return n},e.toQuery=function(t){return"CMCD="+encodeURIComponent(e.serialize(t))},e.appendQueryToUri=function(e,t){if(!t)return e;var n=e.includes("?")?"&":"?";return""+e+n+t},e}()},"./src/controller/eme-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/eme-controller.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>A});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts"),s=n(/*! ../utils/keysystem-util */"./src/utils/keysystem-util.ts"),l=n(/*! ../utils/numeric-encoding-utils */"./src/utils/numeric-encoding-utils.ts"),u=n(/*! ../loader/level-key */"./src/loader/level-key.ts"),c=n(/*! ../utils/hex */"./src/utils/hex.ts"),d=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),h=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),p=n.n(h);function f(e){var t="function"==typeof Map?new Map:void 0;return f=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return g(e,arguments,y(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),v(i,e)},f(e)}function g(e,t,n){return g=m()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&v(r,n.prototype),r},g.apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var b="[eme]",E=function(){function e(t){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=e.CDMCleanupPromise?[e.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=a.logger.debug.bind(a.logger,b),this.log=a.logger.log.bind(a.logger,b),this.warn=a.logger.warn.bind(a.logger,b),this.error=a.logger.error.bind(a.logger,b),this.hls=t,this.config=t.config,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},t.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},t.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(i.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},t.getLicenseServerUrl=function(e){var t=this.config,n=t.drmSystems,i=t.widevineLicenseUrl,r=n[e];if(r)return r.licenseUrl;if(e===o.KeySystems.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+e+'"')},t.getServerCertificateUrl=function(e){var t=this.config.drmSystems[e];if(t)return t.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+e+'"]')},t.attemptKeySystemAccess=function(e){var t=this,n=this.hls.levels,i=function(e,t,n){return!!e&&n.indexOf(e)===t},a=n.map((function(e){return e.audioCodec})).filter(i),o=n.map((function(e){return e.videoCodec})).filter(i);return a.length+o.length===0&&o.push("avc1.42e01e"),new Promise((function(n,i){!function e(s){var l=s.shift();t.getMediaKeysPromise(l,a,o).then((function(e){return n({keySystem:l,mediaKeys:e})})).catch((function(t){s.length?e(s):i(t instanceof T?t:new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:t,fatal:!0},t.message))}))}(e)}))},t.requestMediaKeySystemAccess=function(e,t){var n=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof n){var i="Configured requestMediaKeySystemAccess is not a function "+n;return null===o.requestMediaKeySystemAccess&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i))}return n(e,t)},t.getMediaKeysPromise=function(e,t,n){var i=this,r=(0,o.getSupportedMediaKeySystemConfigurations)(e,t,n,this.config.drmSystemOptions),a=this.keySystemAccessPromises[e],s=null==a?void 0:a.keySystemAccess;if(!s){this.log('Requesting encrypted media "'+e+'" key-system access with config: '+JSON.stringify(r)),s=this.requestMediaKeySystemAccess(e,r);var l=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch((function(t){i.log('Failed to obtain access to key-system "'+e+'": '+t)})),s.then((function(t){i.log('Access for key-system "'+t.keySystem+'" obtained');var n=i.fetchServerCertificate(e);return i.log('Create media-keys for "'+e+'"'),l.mediaKeys=t.createMediaKeys().then((function(t){return i.log('Media-keys created for "'+e+'"'),n.then((function(n){return n?i.setMediaKeysServerCertificate(t,e,n):t}))})),l.mediaKeys.catch((function(t){i.error('Failed to create media-keys for "'+e+'"}: '+t)})),l.mediaKeys}))}return s.then((function(){return a.mediaKeys}))},t.createMediaKeySessionContext=function(e){var t=e.decryptdata,n=e.keySystem,i=e.mediaKeys;console.assert(!!i,"mediaKeys is defined"),this.log('Creating key-system session "'+n+'" keyId: '+c.default.hexDump(t.keyId||[]));var r=i.createSession(),a={decryptdata:t,keySystem:n,mediaKeys:i,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},t.renewKeySession=function(e){var t=e.decryptdata;if(t.pssh){var n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t);this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,"cenc",t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)},t.getKeyIdString=function(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(null===e.keyId)throw new Error("keyId is null");return c.default.hexDump(e.keyId)},t.updateKeySession=function(e,t){var n,i=e.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+c.default.hexDump((null===(n=e.decryptdata)||void 0===n?void 0:n.keyId)||[])+"\n      } (data length: "+(t?t.byteLength:t)+")"),i.update(t)},t.selectKeySystemFormat=function(e){var t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+e.sn+" "+e.type+": "+e.level+") key formats "+t.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise},t.getKeyFormatPromise=function(e){var t=this;return new Promise((function(n,i){var r=(0,o.getKeySystemsForConfig)(t.config),a=e.map(o.keySystemFormatToKeySystemDomain).filter((function(e){return!!e&&-1!==r.indexOf(e)}));return t.getKeySystemSelectionPromise(a).then((function(e){var t=e.keySystem,r=(0,o.keySystemDomainToKeySystemFormat)(t);r?n(r):i(new Error('Unable to find format for key-system "'+t+'"'))})).catch(i)}))},t.loadKey=function(e){var t=this,n=e.keyInfo.decryptdata,i=this.getKeyIdString(n),r="(keyId: "+i+' format: "'+n.keyFormat+'" method: '+n.method+" uri: "+n.uri+")";this.log("Starting session for key "+r);var a=this.keyIdToKeySessionPromise[i];return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(n).then((function(i){var a=i.keySystem,o=i.mediaKeys;return t.throwIfDestroyed(),t.log("Handle encrypted media sn: "+e.frag.sn+" "+e.frag.type+": "+e.frag.level+" using key "+r),t.attemptSetMediaKeys(a,o).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:n});return t.generateRequestWithPreferredKeySession(e,"cenc",n.pssh,"playlist-key")}))}))).catch((function(e){return t.handleError(e)})),a},t.throwIfDestroyed=function(e){if(!this.hls)throw new Error("invalid state")},t.handleError=function(e){this.hls&&(this.error(e.message),e instanceof T?this.hls.trigger(i.Events.ERROR,e.data):this.hls.trigger(i.Events.ERROR,{type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))},t.getKeySystemForKeyPromise=function(e){var t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){var i=(0,o.keySystemFormatToKeySystemDomain)(e.keyFormat),r=i?[i]:(0,o.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(r)}return n},t.getKeySystemSelectionPromise=function(e){if(e.length||(e=(0,o.getKeySystemsForConfig)(this.config)),0===e.length)throw new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(e)},t._onMediaEncrypted=function(e){var t=this,n=e.initDataType,i=e.initData;if(this.debug('"'+e.type+'" event: init data type: "'+n+'"'),null!==i){var r,a;if("sinf"===n&&this.config.drmSystems[o.KeySystems.FAIRPLAY]){var s=(0,d.bin2str)(new Uint8Array(i));try{var h=(0,l.base64Decode)(JSON.parse(s).sinf),p=(0,d.parseSinf)(new Uint8Array(h));if(!p)return;r=p.subarray(8,24),a=o.KeySystems.FAIRPLAY}catch(e){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var f=(0,d.parsePssh)(i);if(null===f)return;0===f.version&&f.systemId===o.KeySystemIds.WIDEVINE&&f.data&&(r=f.data.subarray(8,24)),a=(0,o.keySystemIdToKeySystemDomain)(f.systemId)}if(a&&r){for(var g=c.default.hexDump(r),m=this.keyIdToKeySessionPromise,v=this.mediaKeySessions,y=m[g],b=function(e){var a=v[e],o=a.decryptdata;if(o.pssh||!o.keyId)return"continue";var s=c.default.hexDump(o.keyId);return g===s||-1!==o.uri.replace(/-/g,"").indexOf(g)?(y=m[s],delete m[s],o.pssh=new Uint8Array(i),o.keyId=r,y=m[g]=y.then((function(){return t.generateRequestWithPreferredKeySession(a,n,i,"encrypted-event-key-match")})),"break"):void 0},E=0;E<v.length;E++){var T=b(E);if("continue"!==T&&"break"===T)break}y||(y=m[g]=this.getKeySystemSelectionPromise([a]).then((function(e){var a,s=e.keySystem,l=e.mediaKeys;t.throwIfDestroyed();var c=new u.LevelKey("ISO-23001-7",g,null!=(a=(0,o.keySystemDomainToKeySystemFormat)(s))?a:"");return c.pssh=new Uint8Array(i),c.keyId=r,t.attemptSetMediaKeys(s,l).then((function(){t.throwIfDestroyed();var e=t.createMediaKeySessionContext({decryptdata:c,keySystem:s,mediaKeys:l});return t.generateRequestWithPreferredKeySession(e,n,i,"encrypted-event-no-match")}))}))),y.catch((function(e){return t.handleError(e)}))}}},t._onWaitingForKey=function(e){this.log('"'+e.type+'" event')},t.attemptSetMediaKeys=function(e,t){var n=this,i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+e+'"');var r=Promise.all(i).then((function(){if(!n.media)throw new Error("Attempted to set mediaKeys without media element attached");return n.media.setMediaKeys(t)}));return this.setMediaKeysQueue.push(r),r.then((function(){n.log('Media-keys set for "'+e+'"'),i.push(r),n.setMediaKeysQueue=n.setMediaKeysQueue.filter((function(e){return-1===i.indexOf(e)}))}))},t.generateRequestWithPreferredKeySession=function(e,t,n,i){var a,l,u=this,c=null===(a=this.config.drmSystems)||void 0===a||null===(l=a[e.keySystem])||void 0===l?void 0:l.generateRequest;if(c)try{var d=c.call(this.hls,t,n,e);if(!d)throw new Error("Invalid response from configured generateRequest filter");t=d.initDataType,n=e.decryptdata.pssh=d.initData?new Uint8Array(d.initData):null}catch(e){var h;if(this.warn(e.message),null!==(h=this.hls)&&void 0!==h&&h.config.debug)throw e}if(null===n)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(e);var f=this.getKeyIdString(e.decryptdata);this.log('Generating key-session request for "'+i+'": '+f+" (init data type: "+t+" length: "+(n?n.byteLength:null)+")");var g=new(p());e.mediaKeysSession.onmessage=function(t){var n=e.mediaKeysSession;if(n){var i=t.messageType,r=t.message;u.log('"'+i+'" message event for session "'+n.sessionId+'" message size: '+r.byteLength),"license-request"===i||"license-renewal"===i?u.renewLicense(e,r).catch((function(e){u.handleError(e),g.emit("error",e)})):"license-release"===i?e.keySystem===o.KeySystems.FAIRPLAY&&(u.updateKeySession(e,(0,s.strToUtf8array)("acknowledged")),u.removeSession(e)):u.warn('unhandled media key message type "'+i+'"')}else g.emit("error",new Error("invalid state"))},e.mediaKeysSession.onkeystatuseschange=function(t){if(e.mediaKeysSession){u.onKeyStatusChange(e);var n=e.keyStatus;g.emit("keyStatus",n),"expired"===n&&(u.warn(e.keySystem+" expired for key "+f),u.renewKeySession(e))}else g.emit("error",new Error("invalid state"))};var m=new Promise((function(e,t){g.on("error",t),g.on("keyStatus",(function(n){n.startsWith("usable")?e():"output-restricted"===n?t(new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===n?t(new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+n+'"')):"expired"===n?t(new Error("key expired while generating request")):u.warn('unhandled key status change "'+n+'"')}))}));return e.mediaKeysSession.generateRequest(t,n).then((function(){var t;u.log('Request generated for key-session "'+(null===(t=e.mediaKeysSession)||void 0===t?void 0:t.sessionId)+'" keyId: '+f)})).catch((function(e){throw new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:e,fatal:!1},"Error generating key-session request: "+e)})).then((function(){return m})).catch((function(t){throw g.removeAllListeners(),u.removeSession(e),t})).then((function(){return g.removeAllListeners(),e}))},t.onKeyStatusChange=function(e){var t=this;e.mediaKeysSession.keyStatuses.forEach((function(n,i){t.log('key status change "'+n+'" for keyStatuses keyId: '+c.default.hexDump("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+c.default.hexDump(new Uint8Array(e.decryptdata.keyId||[]))+" uri: "+e.decryptdata.uri),e.keyStatus=n}))},t.fetchServerCertificate=function(e){var t=this;return new Promise((function(n,i){var a=t.getServerCertificateUrl(e);if(!a)return n();t.log('Fetching serverCertificate for "'+e+'"');var o=new XMLHttpRequest;o.open("GET",a,!0),o.responseType="arraybuffer",o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&(200===o.status?n(o.response):i(new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:o},'"'+e+'" certificate request XHR failed ('+a+"). Status: "+o.status+" ("+o.statusText+")")))},o.send()}))},t.setMediaKeysServerCertificate=function(e,t,n){var i=this;return new Promise((function(a,o){e.setServerCertificate(n).then((function(r){i.log("setServerCertificate "+(r?"success":"not supported by CDM")+" ("+(null==n?void 0:n.byteLength)+') on "'+t+'"'),a(e)})).catch((function(e){o(new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:e,fatal:!0},e.message))}))}))},t.renewLicense=function(e,t){var n=this;return this.requestLicense(e,new Uint8Array(t)).then((function(t){return n.updateKeySession(e,new Uint8Array(t)).catch((function(e){throw new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:e,fatal:!0},e.message)}))}))},t.setupLicenseXHR=function(e,t,n,i){var r=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(!n.decryptdata)throw new Error("Key removed");return a.call(r.hls,e,t,n,i)})).catch((function(o){if(!n.decryptdata)throw o;return e.open("POST",t,!0),a.call(r.hls,e,t,n,i)})).then((function(n){return e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:n||i}})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))},t.requestLicense=function(e,t){var n=this;return new Promise((function(i,a){var o=n.getLicenseServerUrl(e.keySystem);n.log("Sending license request to URL: "+o);var s=new XMLHttpRequest;s.responseType="arraybuffer",s.onreadystatechange=function(){if(!n.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(4===s.readyState)if(200===s.status){n._requestLicenseFailureCount=0;var l=s.response;n.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l));var u=n.config.licenseResponseCallback;if(u)try{l=u.call(n.hls,s,o,e)}catch(e){n.error(e)}i(l)}else if(n._requestLicenseFailureCount++,n._requestLicenseFailureCount>3||s.status>=400&&s.status<500)a(new T({type:r.ErrorTypes.KEY_SYSTEM_ERROR,details:r.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:s},"License Request XHR failed ("+o+"). Status: "+s.status+" ("+s.statusText+")"));else{var c=3-n._requestLicenseFailureCount+1;n.warn("Retrying license request, "+c+" attempts left"),n.requestLicense(e,t).then(i,a)}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=s,n.setupLicenseXHR(s,o,e,t).then((function(e){var t=e.xhr,n=e.licenseChallenge;t.send(n)}))}))},t.onMediaAttached=function(e,t){if(this.config.emeEnabled){var n=t.media;this.media=n,n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}},t.onMediaDetached=function(){var t=this,n=this.media,i=this.mediaKeySessions;n&&(n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},u.LevelKey.clearKeyUriToKeyIdMap();var r=i.length;e.CDMCleanupPromise=Promise.all(i.map((function(e){return t.removeSession(e)})).concat(null==n?void 0:n.setMediaKeys(null).catch((function(e){t.log("Could not clear media keys: "+e+". media.src: "+(null==n?void 0:n.src))})))).then((function(){r&&(t.log("finished closing key sessions and clearing media keys"),i.length=0)})).catch((function(e){t.log("Could not close sessions and clear media keys: "+e+". media.src: "+(null==n?void 0:n.src))}))},t.onManifestLoaded=function(e,t){var n=t.sessionKeys;if(n&&this.config.emeEnabled&&!this.keyFormatPromise){var i=n.reduce((function(e,t){return-1===e.indexOf(t.keyFormat)&&e.push(t.keyFormat),e}),[]);this.log("Selecting key-system from session-keys "+i.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(i)}},t.removeSession=function(e){var t=this,n=e.mediaKeysSession,i=e.licenseXhr;if(n){this.log("Remove licenses and keys and close session "+n.sessionId),n.onmessage=null,n.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;var r=this.mediaKeySessions.indexOf(e);return r>-1&&this.mediaKeySessions.splice(r,1),n.remove().catch((function(e){t.log("Could not remove session: "+e)})).then((function(){return n.close()})).catch((function(e){t.log("Could not close session: "+e)}))}},e}();E.CDMCleanupPromise=void 0;var T=function(e){var t,n;function i(t,n){var i;return(i=e.call(this,n)||this).data=void 0,i.data=t,t.err=t.error,i}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,v(t,n),i}(f(Error));const A=E},"./src/controller/fps-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/fps-controller.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../utils/logger */"./src/utils/logger.ts"),a=function(){function e(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching)},t.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var n=this.hls.config;if(n.capLevelOnFPSDrop){var i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,n){var a=performance.now();if(t){if(this.lastTime){var o=a-this.lastTime,s=n-this.lastDroppedFrames,l=t-this.lastDecodedFrames,u=1e3*s/o,c=this.hls;if(c.trigger(i.Events.FPS_DROP,{currentDropped:s,currentDecoded:l,totalDroppedFrames:n}),u>0&&s>c.config.fpsDroppedMonitoringThreshold*l){var d=c.currentLevel;r.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=d)&&(d-=1,c.trigger(i.Events.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:c.currentLevel}),c.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=a,this.lastDroppedFrames=n,this.lastDecodedFrames=t}},t.checkFPSInterval=function(){var e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},e}();const o=a},"./src/controller/fragment-finders.ts":
/*!********************************************!*\
    !*** ./src/controller/fragment-finders.ts ***!
    \********************************************/(e,t,n)=>{n.r(t),n.d(t,{findFragWithCC:()=>u,findFragmentByPDT:()=>a,findFragmentByPTS:()=>o,fragmentWithinToleranceTest:()=>s,pdtWithinToleranceTest:()=>l});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../utils/binary-search */"./src/utils/binary-search.ts");function a(e,t,n){if(null===t||!Array.isArray(e)||!e.length||!(0,i.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;n=n||0;for(var r=0;r<e.length;++r){var a=e[r];if(l(t,n,a))return a}return null}function o(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var a=null;if(e?a=t[e.sn-t[0].sn+1]||null:0===n&&0===t[0].start&&(a=t[0]),a&&0===s(n,i,a))return a;var o=r.default.search(t,s.bind(null,n,i));return!o||o===e&&a?a:o}function s(e,t,n){if(void 0===e&&(e=0),void 0===t&&(t=0),n.start<=e&&n.start+n.duration>e)return 0;var i=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-i<=e?1:n.start-i>e&&n.start?-1:0}function l(e,t,n){var i=1e3*Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return(n.endProgramDateTime||0)-i>e}function u(e,t){return r.default.search(e,(function(e){return e.cc<t?1:e.cc>t?-1:0}))}},"./src/controller/fragment-tracker.ts":
/*!********************************************!*\
    !*** ./src/controller/fragment-tracker.ts ***!
    \********************************************/(e,t,n)=>{n.r(t),n.d(t,{FragmentState:()=>i,FragmentTracker:()=>o});var i,r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../types/loader */"./src/types/loader.ts");!function(e){e.NOT_LOADED="NOT_LOADED",e.APPENDING="APPENDING",e.PARTIAL="PARTIAL",e.OK="OK"}(i||(i={}));var o=function(){function e(e){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(r.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(r.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(r.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=function(){var e=this.hls;e.off(r.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.off(r.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(r.Events.FRAG_LOADED,this.onFragLoaded,this)},t.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},t.getAppendedFrag=function(e,t){if(t===a.PlaylistLevelType.MAIN){var n=this.activeFragment,i=this.activeParts;if(!n)return null;if(i)for(var r=i.length;r--;){var o=i[r],s=o?o.end:n.appendedPTS;if(o.start<=e&&void 0!==s&&e<=s)return r>9&&(this.activeParts=i.slice(r-9)),o}else if(n.start<=e&&void 0!==n.appendedPTS&&e<=n.appendedPTS)return n}return this.getBufferedFrag(e,t)},t.getBufferedFrag=function(e,t){for(var n=this.fragments,i=Object.keys(n),r=i.length;r--;){var a=n[i[r]];if((null==a?void 0:a.body.type)===t&&a.buffered){var o=a.body;if(o.start<=e&&e<=o.end)return o}}return null},t.detectEvictedFragments=function(e,t,n){var i=this;this.timeRanges&&(this.timeRanges[e]=t),Object.keys(this.fragments).forEach((function(r){var a=i.fragments[r];if(a)if(a.buffered||a.loaded){var o=a.range[e];o&&o.time.some((function(e){var n=!i.isTimeBuffered(e.startPTS,e.endPTS,t);return n&&i.removeFragment(a.body),n}))}else a.body.type===n&&i.removeFragment(a.body)}))},t.detectPartialFragments=function(e){var t=this,n=this.timeRanges,i=e.frag,r=e.part;if(n&&"initSegment"!==i.sn){var a=l(i),o=this.fragments[a];o&&(Object.keys(n).forEach((function(e){var a=i.elementaryStreams[e];if(a){var s=n[e],l=null!==r||!0===a.partial;o.range[e]=t.getBufferedTimes(i,r,l,s)}})),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,o.body.endList&&(this.endListFragments[o.body.type]=o)):this.removeFragment(o.body))}},t.fragBuffered=function(e){var t=l(e),n=this.fragments[t];n&&(n.loaded=null,n.buffered=!0)},t.getBufferedTimes=function(e,t,n,i){for(var r={time:[],partial:n},a=t?t.start:e.start,o=t?t.end:e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,u=0;u<i.length;u++){var c=i.start(u)-this.bufferPadding,d=i.end(u)+this.bufferPadding;if(l>=c&&s<=d){r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});break}if(a<d&&o>c)r.partial=!0,r.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});else if(o<=c)break}return r},t.getPartialFragment=function(e){var t,n,i,r=null,a=0,o=this.bufferPadding,l=this.fragments;return Object.keys(l).forEach((function(u){var c=l[u];c&&s(c)&&(n=c.body.start-o,i=c.body.end+o,e>=n&&e<=i&&(t=Math.min(e-n,i-e),a<=t&&(r=c.body,a=t)))})),r},t.isEndListAppended=function(e){var t=this.endListFragments[e];return void 0!==t&&(t.buffered||s(t))},t.getState=function(e){var t=l(e),n=this.fragments[t];return n?n.buffered?s(n)?i.PARTIAL:i.OK:i.APPENDING:i.NOT_LOADED},t.isTimeBuffered=function(e,t,n){for(var i,r,a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,r=n.end(a)+this.bufferPadding,e>=i&&t<=r)return!0;if(t<=i)return!1}return!1},t.onFragLoaded=function(e,t){var n=t.frag,i=t.part;if("initSegment"!==n.sn&&!n.bitrateTest&&!i){var r=l(n);this.fragments[r]={body:n,loaded:t,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,i=t.frag,r=t.part,o=t.timeRanges;if(i.type===a.PlaylistLevelType.MAIN)if(this.activeFragment!==i&&(this.activeFragment=i,i.appendedPTS=void 0),r){var s=this.activeParts;s||(this.activeParts=s=[]),s.push(r)}else this.activeParts=null;this.timeRanges=o,Object.keys(o).forEach((function(e){var t=o[e];if(n.detectEvictedFragments(e,t),!r&&i.type===a.PlaylistLevelType.MAIN){var s=i.elementaryStreams[e];if(!s)return;for(var l=0;l<t.length;l++){var u=t.end(l);u<=s.endPTS&&u>s.startPTS?i.appendedPTS=Math.max(u,i.appendedPTS||0):i.appendedPTS=s.endPTS}}}))},t.onFragBuffered=function(e,t){this.detectPartialFragments(t)},t.hasFragment=function(e){var t=l(e);return!!this.fragments[t]},t.removeFragmentsInRange=function(e,t,n){var i=this;Object.keys(this.fragments).forEach((function(r){var a=i.fragments[r];if(a&&a.buffered){var o=a.body;o.type===n&&o.start<t&&o.end>e&&i.removeFragment(o)}}))},t.removeFragment=function(e){var t=l(e);e.stats.loaded=0,e.clearElementaryStreamInfo(),e.appendedPTS=void 0,delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]},t.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},e}();function s(e){var t,n;return e.buffered&&((null===(t=e.range.video)||void 0===t?void 0:t.partial)||(null===(n=e.range.audio)||void 0===n?void 0:n.partial))}function l(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn}},"./src/controller/gap-controller.ts":
/*!******************************************!*\
    !*** ./src/controller/gap-controller.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{MAX_START_GAP_JUMP:()=>l,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>u,SKIP_BUFFER_RANGE_START:()=>c,STALL_MINIMUM_DURATION_MS:()=>s,default:()=>d});var i=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),r=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../events */"./src/events.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=250,l=2,u=.1,c=.05,d=function(){function e(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}var t=e.prototype;return t.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},t.poll=function(e,t){var n=this.config,r=this.media,a=this.stalled;if(null!==r){var u=r.currentTime,c=r.seeking,d=this.seeking&&!c,h=!this.seeking&&c;if(this.seeking=c,u===e){if((h||d)&&(this.stalled=null),!(r.paused&&!c||r.ended||0===r.playbackRate)&&i.BufferHelper.getBuffered(r).length){var p=i.BufferHelper.bufferInfo(r,u,0),f=p.len>0,g=p.nextStart||0;if(f||g){if(c){var m=p.len>l,v=!g||t&&t.start<=u||g-u>l&&!this.fragmentTracker.getPartialFragment(u);if(m||v)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var y,b=Math.max(g,p.start||0)-u,E=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,T=(null==E||null===(y=E.details)||void 0===y?void 0:y.live)?2*E.details.targetduration:l;if(b>0&&b<=T)return void this._trySkipBufferHole(null)}var A=self.performance.now();if(null!==a){var k=A-a;if(c||!(k>=s)||(this._reportStall(p),this.media)){var _=i.BufferHelper.bufferInfo(r,u,n.maxBufferHole);this._tryFixBufferStall(_,k)}}else this.stalled=A}}}else if(this.moved=!0,null!==a){if(this.stallReported){var S=self.performance.now()-a;o.logger.warn("playback not stuck anymore @"+u+", after "+Math.round(S)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},t._tryFixBufferStall=function(e,t){var n=this.config,i=this.fragmentTracker,r=this.media;if(null!==r){var a=r.currentTime,s=i.getPartialFragment(a);if(s&&(this._trySkipBufferHole(s)||!this.media))return;e.len>n.maxBufferHole&&t>1e3*n.highBufferWatchdogPeriod&&(o.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},t._reportStall=function(e){var t=this.hls,n=this.media;!this.stallReported&&n&&(this.stallReported=!0,o.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer ("+JSON.stringify(e)+")"),t.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e.len}))},t._trySkipBufferHole=function(e){var t=this.config,n=this.hls,s=this.media;if(null===s)return 0;for(var l=s.currentTime,d=0,h=i.BufferHelper.getBuffered(s),p=0;p<h.length;p++){var f=h.start(p);if(l+t.maxBufferHole>=d&&l<f){var g=Math.max(f+c,s.currentTime+u);return o.logger.warn("skipping hole, adjusting currentTime from "+l+" to "+g),this.moved=!0,this.stalled=null,s.currentTime=g,e&&n.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+l+" to "+g,frag:e}),g}d=h.end(p)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,n=this.media,i=this.nudgeRetry;if(null!==n){var s=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){var l=s+(i+1)*e.nudgeOffset;o.logger.warn("Nudging 'currentTime' from "+s+" to "+l),n.currentTime=l,t.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else o.logger.error("Playhead still not moving while enough data buffered @"+s+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},e}()},"./src/controller/id3-track-controller.ts":
/*!************************************************!*\
    !*** ./src/controller/id3-track-controller.ts ***!
    \************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),o=n(/*! ../demux/id3 */"./src/demux/id3.ts"),s=n(/*! ../loader/date-range */"./src/loader/date-range.ts"),l=n(/*! ../types/demuxer */"./src/types/demuxer.ts");function u(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var c=function(){var e=u();try{new e(0,Number.POSITIVE_INFINITY,"")}catch(e){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function d(e,t){return e.getTime()/1e3-t}var h=function(){function e(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}var t=e.prototype;return t.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},t._registerListeners=function(){var e=this.hls;e.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t._unregisterListeners=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},t.onMediaAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&((0,a.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},t.onManifestLoading=function(){this.dateRangeCuesAppended={}},t.createTrack=function(e){var t=this.getID3Track(e.textTracks);return t.mode="hidden",t},t.getID3Track=function(e){if(this.media){for(var t=0;t<e.length;t++){var n=e[t];if("metadata"===n.kind&&"id3"===n.label)return(0,a.sendAddTrackEvent)(n,this.media),n}return this.media.addTextTrack("metadata","id3")}},t.onFragParsingMetadata=function(e,t){if(this.media){var n=this.hls.config,i=n.enableEmsgMetadataCues,r=n.enableID3MetadataCues;if(i||r){var a=t.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var s=u(),d=0;d<a.length;d++){var h=a[d].type;if((h!==l.MetadataSchema.emsg||i)&&r){var p=o.getID3Frames(a[d].data);if(p){var f=a[d].pts,g=f+a[d].duration;g>c&&(g=c),g-f<=0&&(g=f+.25);for(var m=0;m<p.length;m++){var v=p[m];if(!o.isTimeStampFrame(v)){this.updateId3CueEnds(f);var y=new s(f,g,"");y.value=v,h&&(y.type=h),this.id3Track.addCue(y)}}}}}}}},t.updateId3CueEnds=function(e){var t,n=null===(t=this.id3Track)||void 0===t?void 0:t.cues;if(n)for(var i=n.length;i--;){var r=n[i];r.startTime<e&&r.endTime===c&&(r.endTime=e)}},t.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset,r=t.type,o=this.id3Track,s=this.hls;if(s){var u,c=s.config,d=c.enableEmsgMetadataCues,h=c.enableID3MetadataCues;o&&(d||h)&&(u="audio"===r?function(e){return e.type===l.MetadataSchema.audioId3&&h}:"video"===r?function(e){return e.type===l.MetadataSchema.emsg&&d}:function(e){return e.type===l.MetadataSchema.audioId3&&h||e.type===l.MetadataSchema.emsg&&d},(0,a.removeCuesInRange)(o,n,i,u))}},t.onLevelUpdated=function(e,t){var n=this,r=t.details;if(this.media&&r.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var a=this.dateRangeCuesAppended,o=this.id3Track,h=r.dateRanges,p=Object.keys(h);if(o)for(var f=Object.keys(a).filter((function(e){return!p.includes(e)})),g=function(e){var t=f[e];Object.keys(a[t].cues).forEach((function(e){o.removeCue(a[t].cues[e])})),delete a[t]},m=f.length;m--;)g(m);var v=r.fragments[r.fragments.length-1];if(0!==p.length&&(0,i.isFiniteNumber)(null==v?void 0:v.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var y=v.programDateTime/1e3-v.start,b=u(),E=function(e){var t=p[e],i=h[t],r=a[t],o=(null==r?void 0:r.cues)||{},u=(null==r?void 0:r.durationKnown)||!1,f=d(i.startDate,y),g=c,m=i.endDate;if(m)g=d(m,y),u=!0;else if(i.endOnNext&&!u){var v=p.reduce((function(e,t){var n=h[t];return n.class===i.class&&n.id!==t&&n.startDate>i.startDate&&e.push(n),e}),[]).sort((function(e,t){return e.startDate.getTime()-t.startDate.getTime()}))[0];v&&(g=d(v.startDate,y),u=!0)}for(var E,T=Object.keys(i.attr),A=0;A<T.length;A++){var k=T[A];if(k!==s.DateRangeAttribute.ID&&k!==s.DateRangeAttribute.CLASS&&k!==s.DateRangeAttribute.START_DATE&&k!==s.DateRangeAttribute.DURATION&&k!==s.DateRangeAttribute.END_DATE&&k!==s.DateRangeAttribute.END_ON_NEXT){var _=o[k];if(_)u&&!r.durationKnown&&(_.endTime=g);else{var S=i.attr[k];_=new b(f,g,""),k!==s.DateRangeAttribute.SCTE35_OUT&&k!==s.DateRangeAttribute.SCTE35_IN||(E=S,S=Uint8Array.from(E.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),_.value={key:k,data:S},_.type=l.MetadataSchema.dateRange,n.id3Track.addCue(_),o[k]=_}}}a[t]={cues:o,dateRange:i,durationKnown:u}},T=0;T<p.length;T++)E(T)}}},e}();const p=h},"./src/controller/latency-controller.ts":
/*!**********************************************!*\
    !*** ./src/controller/latency-controller.ts ***!
    \**********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var i=n(/*! ../errors */"./src/errors.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts");function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var s=function(){function e(e){var t=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return t.timeupdate()},this.hls=e,this.config=e.config,this.registerListeners()}var t,n,s,l=e.prototype;return l.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},l.registerListeners=function(){this.hls.on(r.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(r.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(r.Events.ERROR,this.onError,this)},l.unregisterListeners=function(){this.hls.off(r.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(r.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(r.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(r.Events.ERROR,this.onError)},l.onMediaAttached=function(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},l.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},l.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},l.onLevelUpdated=function(e,t){var n=t.details;this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},l.onError=function(e,t){t.details===i.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,a.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},l.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var n=this.computeLatency();if(null!==n){this._latency=n;var i=this.config,r=i.lowLatencyMode,a=i.maxLiveSyncPlaybackRate;if(r&&1!==a){var o=this.targetLatency;if(null!==o){var s=n-o,l=s<Math.min(this.maxLatency,o+t.targetduration);if(t.live&&l&&s>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,a)),c=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,c))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},l.estimateLiveEdge=function(){var e=this.levelDetails;return null===e?null:e.edge+e.age},l.computeLatency=function(){var e=this.estimateLiveEdge();return null===e?null:e-this.currentTime},t=e,(n=[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var e=this.config,t=this.levelDetails;return void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}},{key:"targetLatency",get:function(){var e=this.levelDetails;if(null===e)return null;var t=e.holdBack,n=e.partHoldBack,i=e.targetduration,r=this.config,a=r.liveSyncDuration,o=r.liveSyncDurationCount,s=r.lowLatencyMode,l=this.hls.userConfig,u=s&&n||t;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:o*i);var c=i;return u+Math.min(1*this.stallCount,c)}},{key:"liveSyncPosition",get:function(){var e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(null===e||null===t||null===n)return null;var i=n.edge,r=e-t-this.edgeStalled,a=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,r),o)}},{key:"drift",get:function(){var e=this.levelDetails;return null===e?1:e.drift}},{key:"edgeStalled",get:function(){var e=this.levelDetails;if(null===e)return 0;var t=3*(this.config.lowLatencyMode&&e.partTarget||e.targetduration);return Math.max(e.age-t,0)}},{key:"forwardBufferLength",get:function(){var e=this.media,t=this.levelDetails;if(!e||!t)return 0;var n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}}])&&o(t.prototype,n),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/controller/level-controller.ts":
/*!********************************************!*\
    !*** ./src/controller/level-controller.ts ***!
    \********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var i=n(/*! ../types/level */"./src/types/level.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),o=n(/*! ../utils/codecs */"./src/utils/codecs.ts"),s=n(/*! ./level-helper */"./src/controller/level-helper.ts"),l=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}var p=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),f=function(e){var t,n;function l(t){var n;return(n=e.call(this,t,"[level-controller]")||this)._levels=[],n._firstLevel=-1,n._startLevel=void 0,n.currentLevelIndex=-1,n.manualLevelIndex=-1,n.onParsedComplete=void 0,n._registerListeners(),n}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,h(t,n);var f,g,m,v=l.prototype;return v._registerListeners=function(){var e=this.hls;e.on(r.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(r.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(r.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(r.Events.ERROR,this.onError,this)},v._unregisterListeners=function(){var e=this.hls;e.off(r.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(r.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(r.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(r.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(r.Events.ERROR,this.onError,this)},v.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,e.prototype.destroy.call(this)},v.startLoad=function(){this._levels.forEach((function(e){e.loadError=0})),e.prototype.startLoad.call(this)},v.onManifestLoaded=function(e,t){var n,l,u=[],c=[],d=[],h={},f=!1,g=!1,m=!1;if(t.levels.forEach((function(e){var t=e.attrs;f=f||!(!e.width||!e.height),g=g||!!e.videoCodec,m=m||!!e.audioCodec,p&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var n=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(l=h[n])?l.url.push(e.url):(l=new i.Level(e),h[n]=l,u.push(l)),t&&(t.AUDIO&&(0,s.addGroupId)(l,"audio",t.AUDIO),t.SUBTITLES&&(0,s.addGroupId)(l,"text",t.SUBTITLES))})),(f||g)&&m&&(u=u.filter((function(e){var t=e.videoCodec,n=e.width,i=e.height;return!!t||!(!n||!i)}))),u=u.filter((function(e){var t=e.audioCodec,n=e.videoCodec;return(!t||(0,o.isCodecSupportedInMp4)(t,"audio"))&&(!n||(0,o.isCodecSupportedInMp4)(n,"video"))})),t.audioTracks&&(c=t.audioTracks.filter((function(e){return!e.audioCodec||(0,o.isCodecSupportedInMp4)(e.audioCodec,"audio")})),(0,s.assignTrackIdsByGroup)(c)),t.subtitles&&(d=t.subtitles,(0,s.assignTrackIdsByGroup)(d)),u.length>0){n=u[0].bitrate,u.sort((function(e,t){return e.attrs["HDCP-LEVEL"]!==t.attrs["HDCP-LEVEL"]?(e.attrs["HDCP-LEVEL"]||"")>(t.attrs["HDCP-LEVEL"]||"")?1:-1:e.bitrate!==t.bitrate?e.bitrate-t.bitrate:e.attrs.SCORE!==t.attrs.SCORE?e.attrs.decimalFloatingPoint("SCORE")-t.attrs.decimalFloatingPoint("SCORE"):f&&e.height!==t.height?e.height-t.height:0})),this._levels=u;for(var v=0;v<u.length;v++)if(u[v].bitrate===n){this._firstLevel=v,this.log("manifest loaded, "+u.length+" level(s) found, first bitrate: "+n);break}var y=m&&!g,b={levels:u,audioTracks:c,subtitleTracks:d,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:m,video:g,altAudio:!y&&c.some((function(e){return!!e.url}))};this.hls.trigger(r.Events.MANIFEST_PARSED,b),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(r.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},v.onError=function(t,n){var r,o;if(e.prototype.onError.call(this,t,n),!n.fatal){var s=n.context,l=this._levels[this.currentLevelIndex];if(s&&(s.type===u.PlaylistContextType.AUDIO_TRACK&&l.audioGroupIds&&s.groupId===l.audioGroupIds[l.urlId]||s.type===u.PlaylistContextType.SUBTITLE_TRACK&&l.textGroupIds&&s.groupId===l.textGroupIds[l.urlId]))this.redundantFailover(this.currentLevelIndex);else{var c,d=!1,h=!0;switch(n.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(n.frag){var p=n.frag.type===u.PlaylistLevelType.MAIN?n.frag.level:this.currentLevelIndex,f=this._levels[p];f?(f.fragmentError++,f.fragmentError>this.hls.config.fragLoadingMaxRetry&&(c=p)):c=p}break;case a.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var g=l.attrs["HDCP-LEVEL"];g&&(this.hls.maxHdcpLevel=i.HdcpLevels[i.HdcpLevels.indexOf(g)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'));case a.ErrorDetails.FRAG_PARSING_ERROR:case a.ErrorDetails.KEY_SYSTEM_NO_SESSION:c=(null===(r=n.frag)||void 0===r?void 0:r.type)===u.PlaylistLevelType.MAIN?n.frag.level:this.currentLevelIndex,n.levelRetry=!1;break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:s&&(s.deliveryDirectives&&(h=!1),c=s.level),d=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:c=null!=(o=n.level)?o:this.currentLevelIndex,d=!0}void 0!==c&&this.recoverLevel(n,c,d,h)}}},v.recoverLevel=function(e,t,n,i){var r=e.details,a=this._levels[t];if(a.loadError++,n){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(i){var o=a.url.length;if(o>1&&a.loadError<o)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){for(var s=-1,l=this._levels,u=l.length;u--;){var c=(u+this.currentLevelIndex)%l.length;if(c!==this.currentLevelIndex&&0===l[c].loadError){s=c;break}}s>-1&&this.currentLevelIndex!==s?(this.warn(r+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s):!1===e.levelRetry&&(e.fatal=!0)}}},v.redundantFailover=function(e){var t=this._levels[e],n=t.url.length;if(n>1){var i=(t.urlId+1)%n;this.warn("Switching to redundant URL-id "+i),this._levels.forEach((function(e){e.urlId=i})),this.level=e}},v.onFragLoaded=function(e,t){var n=t.frag;if(void 0!==n&&n.type===u.PlaylistLevelType.MAIN){var i=this._levels[n.level];void 0!==i&&(i.fragmentError=0,i.loadError=0)}},v.onLevelLoaded=function(e,t){var n,i,r=t.level,a=t.details,o=this._levels[r];if(!o)return this.warn("Invalid level index "+r),void(null!==(i=t.deliveryDirectives)&&void 0!==i&&i.skip&&(a.deltaUpdateFailed=!0));r===this.currentLevelIndex?(0===o.fragmentError&&(o.loadError=0,this.retryCount=0),this.playlistLoaded(r,t,o.details)):null!==(n=t.deliveryDirectives)&&void 0!==n&&n.skip&&(a.deltaUpdateFailed=!0)},v.onAudioTrackSwitched=function(e,t){var n=this.hls.levels[this.currentLevelIndex];if(n&&n.audioGroupIds){for(var i=-1,r=this.hls.audioTracks[t.id].groupId,a=0;a<n.audioGroupIds.length;a++)if(n.audioGroupIds[a]===r){i=a;break}i!==n.urlId&&(n.urlId=i,this.startLoad())}},v.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var n=this.currentLevelIndex,i=this._levels[n];if(this.canLoad&&i&&i.url.length>0){var a=i.urlId,o=i.url[a];if(t)try{o=t.addDirectives(o)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Attempt loading level index "+n+(void 0!==(null==t?void 0:t.msn)?" at sn "+t.msn+" part "+t.part:"")+" with URL-id "+a+" "+o),this.clearTimer(),this.hls.trigger(r.Events.LEVEL_LOADING,{url:o,level:n,id:a,deliveryDirectives:t||null})}},v.removeLevel=function(e,t){var n=function(e,n){return n!==t},i=this._levels.filter((function(i,r){return r!==e||i.url.length>1&&void 0!==t&&(i.url=i.url.filter(n),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(n)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(n)),i.urlId=0,!0)})).map((function(e,t){var n=e.details;return null!=n&&n.fragments&&n.fragments.forEach((function(e){e.level=t})),e}));this._levels=i,this.hls.trigger(r.Events.LEVELS_UPDATED,{levels:i})},f=l,(g=[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,n=this._levels;if(0!==n.length&&(this.currentLevelIndex!==e||null===(t=n[e])||void 0===t||!t.details)){if(e<0||e>=n.length){var i=e<0;if(this.hls.trigger(r.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:i,reason:"invalid level idx"}),i)return;e=Math.min(e,n.length-1)}this.clearTimer();var o=this.currentLevelIndex,s=n[o],l=n[e];this.log("switching to level "+e+" from "+o),this.currentLevelIndex=e;var u=c({},l,{level:e,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete u._urlId,this.hls.trigger(r.Events.LEVEL_SWITCHING,u);var d=l.details;if(!d||d.live){var h=this.switchParams(l.uri,null==s?void 0:s.details);this.loadPlaylist(h)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&d(f.prototype,g),m&&d(f,m),Object.defineProperty(f,"prototype",{writable:!1}),l}(l.default)},"./src/controller/level-helper.ts":
/*!****************************************!*\
    !*** ./src/controller/level-helper.ts ***!
    \****************************************/(e,t,n)=>{n.r(t),n.d(t,{addGroupId:()=>s,addSliding:()=>m,adjustSliding:()=>g,assignTrackIdsByGroup:()=>l,computeReloadInterval:()=>v,getFragmentWithSN:()=>y,getPartWith:()=>b,mapFragmentIntersection:()=>f,mapPartIntersection:()=>p,mergeDetails:()=>h,updateFragPTSDTS:()=>d,updatePTS:()=>u});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../utils/logger */"./src/utils/logger.ts"),a=n(/*! ../loader/date-range */"./src/loader/date-range.ts");function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}function s(e,t,n){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(n);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(n)}}function l(e){var t={};e.forEach((function(e){var n=e.groupId||"";e.id=t[n]=t[n]||0,t[n]++}))}function u(e,t,n){c(e[t],e[n])}function c(e,t){var n=t.startPTS;if((0,i.isFiniteNumber)(n)){var r,a=0;t.sn>e.sn?(a=n-e.start,r=e):(a=e.start-n,r=t),r.duration!==a&&(r.duration=a)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function d(e,t,n,a,o,s){a-n<=0&&(r.logger.warn("Fragment should have a positive duration",t),a=n+t.duration,s=o+t.duration);var l=n,u=a,d=t.startPTS,h=t.endPTS;if((0,i.isFiniteNumber)(d)){var p=Math.abs(d-n);(0,i.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(p,t.deltaPTS):t.deltaPTS=p,l=Math.max(n,d),n=Math.min(n,d),o=Math.min(o,t.startDTS),u=Math.min(a,h),a=Math.max(a,h),s=Math.max(s,t.endDTS)}t.duration=a-n;var f=n-t.start;t.start=t.startPTS=n,t.maxStartPTS=l,t.startDTS=o,t.endPTS=a,t.minEndPTS=u,t.endDTS=s;var g,m=t.sn;if(!e||m<e.startSN||m>e.endSN)return 0;var v=m-e.startSN,y=e.fragments;for(y[v]=t,g=v;g>0;g--)c(y[g],y[g-1]);for(g=v;g<y.length-1;g++)c(y[g],y[g+1]);return e.fragmentHint&&c(y[y.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,f}function h(e,t){for(var n=null,s=e.fragments,l=s.length-1;l>=0;l--){var u=s[l].initSegment;if(u){n=u;break}}e.fragmentHint&&delete e.fragmentHint.endPTS;var c,h,m,v,y,b=0;if(f(e,t,(function(e,r){e.relurl&&(b=e.cc-r.cc),(0,i.isFiniteNumber)(e.startPTS)&&(0,i.isFiniteNumber)(e.endPTS)&&(r.start=r.startPTS=e.startPTS,r.startDTS=e.startDTS,r.appendedPTS=e.appendedPTS,r.maxStartPTS=e.maxStartPTS,r.endPTS=e.endPTS,r.endDTS=e.endDTS,r.minEndPTS=e.minEndPTS,r.duration=e.endPTS-e.startPTS,r.duration&&(c=r),t.PTSKnown=t.alignedSliding=!0),r.elementaryStreams=e.elementaryStreams,r.loader=e.loader,r.stats=e.stats,r.urlId=e.urlId,e.initSegment&&(r.initSegment=e.initSegment,n=e.initSegment)})),n&&(t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments).forEach((function(e){var t;e.initSegment&&e.initSegment.relurl!==(null===(t=n)||void 0===t?void 0:t.relurl)||(e.initSegment=n)})),t.skippedSegments)if(t.deltaUpdateFailed=t.fragments.some((function(e){return!e})),t.deltaUpdateFailed){r.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var E=t.skippedSegments;E--;)t.fragments.shift();t.startSN=t.fragments[0].sn,t.startCC=t.fragments[0].cc}else t.canSkipDateRanges&&(t.dateRanges=(h=e.dateRanges,m=t.dateRanges,v=t.recentlyRemovedDateranges,y=o({},h),v&&v.forEach((function(e){delete y[e]})),Object.keys(m).forEach((function(e){var t=new a.DateRange(m[e].attr,y[e]);t.isValid?y[e]=t:r.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(m[e].attr)+'"')})),y));var T=t.fragments;if(b){r.logger.warn("discontinuity sliding from playlist, take drift into account");for(var A=0;A<T.length;A++)T[A].cc+=b}t.skippedSegments&&(t.startCC=t.fragments[0].cc),p(e.partList,t.partList,(function(e,t){t.elementaryStreams=e.elementaryStreams,t.stats=e.stats})),c?d(t,c,c.startPTS,c.endPTS,c.startDTS,c.endDTS):g(e,t),T.length&&(t.totalduration=t.edge-T[0].start),t.driftStartTime=e.driftStartTime,t.driftStart=e.driftStart;var k=t.advancedDateTime;if(t.advanced&&k){var _=t.edge;t.driftStart||(t.driftStartTime=k,t.driftStart=_),t.driftEndTime=k,t.driftEnd=_}else t.driftEndTime=e.driftEndTime,t.driftEnd=e.driftEnd,t.advancedDateTime=e.advancedDateTime}function p(e,t,n){if(e&&t)for(var i=0,r=0,a=e.length;r<=a;r++){var o=e[r],s=t[r+i];o&&s&&o.index===s.index&&o.fragment.sn===s.fragment.sn?n(o,s):i--}}function f(e,t,n){for(var i=t.skippedSegments,r=Math.max(e.startSN,t.startSN)-t.startSN,a=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,o=t.startSN-e.startSN,s=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,l=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,u=r;u<=a;u++){var c=l[o+u],d=s[u];i&&!d&&u<i&&(d=t.fragments[u]=c),c&&d&&n(c,d)}}function g(e,t){var n=t.startSN+t.skippedSegments-e.startSN,i=e.fragments;n<0||n>=i.length||m(t,i[n].start)}function m(e,t){if(t){for(var n=e.fragments,i=e.skippedSegments;i<n.length;i++)n[i].start+=t;e.fragmentHint&&(e.fragmentHint.start+=t)}}function v(e,t){void 0===t&&(t=1/0);var n=1e3*e.targetduration;if(e.updated){var i=e.fragments;if(i.length&&4*n>t){var r=1e3*i[i.length-1].duration;r<n&&(n=r)}}else n/=2;return Math.round(n)}function y(e,t,n){if(!e||!e.details)return null;var i=e.details,r=i.fragments[t-i.startSN];return r||((r=i.fragmentHint)&&r.sn===t?r:t<i.startSN&&n&&n.sn===t?n:null)}function b(e,t,n){if(!e||!e.details)return null;var i=e.details.partList;if(i)for(var r=i.length;r--;){var a=i[r];if(a.index===n&&a.fragment.sn===t)return a}return null}},"./src/controller/stream-controller.ts":
/*!*********************************************!*\
    !*** ./src/controller/stream-controller.ts ***!
    \*********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),a=n(/*! ../is-supported */"./src/is-supported.ts"),o=n(/*! ../events */"./src/events.ts"),s=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),l=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),d=n(/*! ../demux/transmuxer-interface */"./src/demux/transmuxer-interface.ts"),h=n(/*! ../types/transmuxer */"./src/types/transmuxer.ts"),p=n(/*! ./gap-controller */"./src/controller/gap-controller.ts"),f=n(/*! ../errors */"./src/errors.ts");function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}var v=function(e){var t,n;function v(t,n,i){var r;return(r=e.call(this,t,n,i,"[stream-controller]")||this).audioCodecSwap=!1,r.gapController=null,r.level=-1,r._forceStartLoad=!1,r.altAudio=!1,r.audioOnly=!1,r.fragPlaying=null,r.onvplaying=null,r.onvseeked=null,r.fragLastKbps=0,r.couldBacktrack=!1,r.backtrackFragment=null,r.audioCodecSwitch=!1,r.videoBuffer=null,r._registerListeners(),r}n=e,(t=v).prototype=Object.create(n.prototype),t.prototype.constructor=t,m(t,n);var y,b,E,T=v.prototype;return T._registerListeners=function(){var e=this.hls;e.on(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(o.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(o.Events.ERROR,this.onError,this),e.on(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(o.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},T._unregisterListeners=function(){var e=this.hls;e.off(o.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(o.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(o.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(o.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(o.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(o.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(o.Events.ERROR,this.onError,this),e.off(o.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(o.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(o.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(o.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(o.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(o.Events.FRAG_BUFFERED,this.onFragBuffered,this)},T.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},T.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,n=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var i=n.startLevel;-1===i&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.nextAutoLevel),this.level=n.nextLoadLevel=i,this.loadedmetadata=!1}t>0&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=r.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=r.State.STOPPED},T.stopLoad=function(){this._forceStartLoad=!1,e.prototype.stopLoad.call(this)},T.doTick=function(){switch(this.state){case r.State.IDLE:this.doTickIdle();break;case r.State.WAITING_LEVEL:var e,t=this.levels,n=this.level,i=null==t||null===(e=t[n])||void 0===e?void 0:e.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=r.State.IDLE;break}break;case r.State.FRAG_LOADING_WAITING_RETRY:var a,o=self.performance.now(),s=this.retryDate;(!s||o>=s||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=r.State.IDLE)}this.onTickEnd()},T.onTickEnd=function(){e.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},T.doTickIdle=function(){var e=this.hls,t=this.levelLastLoaded,n=this.levels,i=this.media,a=e.config,s=e.nextLoadLevel;if(null!==t&&(i||!this.startFragRequested&&a.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&n&&n[s]){var d=n[s],h=this.getMainFwdBufferInfo();if(null!==h){var p=this.getLevelDetails();if(p&&this._streamEnded(h,p)){var f={};return this.altAudio&&(f.type="video"),this.hls.trigger(o.Events.BUFFER_EOS,f),void(this.state=r.State.ENDED)}this.level=e.nextLoadLevel=s;var g=d.details;if(!g||this.state===r.State.WAITING_LEVEL||g.live&&this.levelLastLoaded!==s)return this.level=s,void(this.state=r.State.WAITING_LEVEL);if(!(h.len>=this.getMaxBufferLength(d.maxBitrate))){this.backtrackFragment&&this.backtrackFragment.start>h.end&&(this.backtrackFragment=null);var m=this.backtrackFragment?this.backtrackFragment.start:h.end,v=this.getNextFragment(m,g);if(this.couldBacktrack&&!this.fragPrevious&&v&&"initSegment"!==v.sn&&this.fragmentTracker.getState(v)!==l.FragmentState.OK){var y,b=(null!=(y=this.backtrackFragment)?y:v).sn-g.startSN,E=g.fragments[b-1];E&&v.cc===E.cc&&(v=E,this.fragmentTracker.removeFragment(E))}else this.backtrackFragment&&h.len&&(this.backtrackFragment=null);if(v&&this.fragmentTracker.getState(v)===l.FragmentState.OK&&this.nextLoadPosition>m){var T=this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO,A=(T===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;A&&this.afterBufferFlushed(A,T,u.PlaylistLevelType.MAIN),v=this.getNextFragment(this.nextLoadPosition,g)}v&&(!v.initSegment||v.initSegment.data||this.bitrateTest||(v=v.initSegment),this.loadFragment(v,g,m))}}}},T.loadFragment=function(t,n,i){var r,a=this.fragmentTracker.getState(t);this.fragCurrent=t,a===l.FragmentState.NOT_LOADED?"initSegment"===t.sn?this._loadInitSegment(t,n):this.bitrateTest?(this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t,n)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i)):a===l.FragmentState.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):0===(null===(r=this.media)||void 0===r?void 0:r.buffered.length)&&this.fragmentTracker.removeAllFragments()},T.getAppendedFrag=function(e){var t=this.fragmentTracker.getAppendedFrag(e,u.PlaylistLevelType.MAIN);return t&&"fragment"in t?t.fragment:t},T.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,u.PlaylistLevelType.MAIN)},T.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.end+.5):null},T.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},T.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var n,i=this.getAppendedFrag(t.currentTime);if(i&&i.start>1&&this.flushMainBuffer(0,i.start-1),!t.paused&&e){var r=e[this.hls.nextLoadLevel],a=this.fragLastKbps;n=a&&this.fragCurrent?this.fragCurrent.duration*r.maxBitrate/(1e3*a)+1:0}else n=0;var o=this.getBufferedFrag(t.currentTime+n);if(o){var s=this.followingBufferedFrag(o);if(s){this.abortCurrentFrag();var l=s.maxStartPTS?s.maxStartPTS:s.start,u=s.duration,c=Math.max(o.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}},T.abortCurrentFrag=function(){var e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&e.abortRequests(),this.state){case r.State.KEY_LOADING:case r.State.FRAG_LOADING:case r.State.FRAG_LOADING_WAITING_RETRY:case r.State.PARSING:case r.State.PARSED:this.state=r.State.IDLE}this.nextLoadPosition=this.getLoadPosition()},T.flushMainBuffer=function(t,n){e.prototype.flushMainBuffer.call(this,t,n,this.altAudio?"video":null)},T.onMediaAttached=function(t,n){e.prototype.onMediaAttached.call(this,t,n);var i=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new p.default(this.config,i,this.fragmentTracker,this.hls)},T.onMediaDetaching=function(){var t=this.media;t&&this.onvplaying&&this.onvseeked&&(t.removeEventListener("playing",this.onvplaying),t.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),e.prototype.onMediaDetaching.call(this)},T.onMediaPlaying=function(){this.tick()},T.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:null;(0,i.isFiniteNumber)(t)&&this.log("Media seeked to "+t.toFixed(3)),this.tick()},T.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(o.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},T.onManifestParsed=function(e,t){var n,i=!1,r=!1;t.levels.forEach((function(e){(n=e.audioCodec)&&(-1!==n.indexOf("mp4a.40.2")&&(i=!0),-1!==n.indexOf("mp4a.40.5")&&(r=!0))})),this.audioCodecSwitch=i&&r&&!(0,a.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1},T.onLevelLoading=function(e,t){var n=this.levels;if(n&&this.state===r.State.IDLE){var i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=r.State.WAITING_LEVEL)}},T.onLevelLoaded=function(e,t){var n,i=this.levels,a=t.level,s=t.details,l=s.totalduration;if(i){this.log("Level "+a+" loaded ["+s.startSN+","+s.endSN+"], cc ["+s.startCC+", "+s.endCC+"] duration:"+l);var u=this.fragCurrent;!u||this.state!==r.State.FRAG_LOADING&&this.state!==r.State.FRAG_LOADING_WAITING_RETRY||u.level!==t.level&&u.loader&&(this.state=r.State.IDLE,this.backtrackFragment=null,u.abortRequests());var c=i[a],d=0;if(s.live||null!==(n=c.details)&&void 0!==n&&n.live){if(s.fragments[0]||(s.deltaUpdateFailed=!0),s.deltaUpdateFailed)return;d=this.alignPlaylists(s,c.details)}if(c.details=s,this.levelLastLoaded=a,this.hls.trigger(o.Events.LEVEL_UPDATED,{details:s,level:a}),this.state===r.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(s))return;this.state=r.State.IDLE}this.startFragRequested?s.live&&this.synchronizeToLiveEdge(s):this.setStartPosition(s,d),this.tick()}else this.warn("Levels were reset while loading level "+a)},T._handleFragmentLoadProgress=function(e){var t,n=e.frag,i=e.part,r=e.payload,a=this.levels;if(a){var o=a[n.level],s=o.details;if(s){var l=o.videoCodec,c=s.PTSKnown||!s.live,p=null===(t=n.initSegment)||void 0===t?void 0:t.data,f=this._getAudioCodec(o),g=this.transmuxer=this.transmuxer||new d.default(this.hls,u.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=i?i.index:-1,v=-1!==m,y=new h.ChunkMetadata(n.level,n.sn,n.stats.chunkCount,r.byteLength,m,v),b=this.initPTS[n.cc];g.push(r,p,f,l,n,i,s.totalduration,c,y,b)}else this.warn("Dropping fragment "+n.sn+" of level "+n.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+n.sn+" of level "+n.level+" will not be buffered")},T.onAudioTrackSwitching=function(e,t){var n=this.altAudio,i=!!t.url,r=t.id;if(!i){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var s=this.hls;n&&s.trigger(o.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),s.trigger(o.Events.AUDIO_TRACK_SWITCHED,{id:r})}},T.onAudioTrackSwitched=function(e,t){var n=t.id,i=!!this.hls.audioTracks[n].url;if(i){var r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=i,this.tick()},T.onBufferCreated=function(e,t){var n,i,r=t.tracks,a=!1;for(var o in r){var s=r[o];if("main"===s.id){if(i=o,n=s,"video"===o){var l=r[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&n?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},T.onFragBuffered=function(e,t){var n=t.frag,i=t.part;if(!n||n.type===u.PlaylistLevelType.MAIN){if(this.fragContextChanged(n))return this.warn("Fragment "+n.sn+(i?" p: "+i.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===r.State.PARSED&&(this.state=r.State.IDLE));var a=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==n.sn&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}},T.onError=function(e,t){if(t.type!==f.ErrorTypes.KEY_SYSTEM_ERROR)switch(t.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.FRAG_PARSING_ERROR:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.MAIN,t);break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==r.State.ERROR&&(t.fatal?(this.warn(""+t.details),this.state=r.State.ERROR):t.levelRetry||this.state!==r.State.WAITING_LEVEL||(this.state=r.State.IDLE));break;case f.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===r.State.PARSING||this.state===r.State.PARSED)){var n=!0,i=this.getFwdBufferInfo(this.media,u.PlaylistLevelType.MAIN);i&&i.len>.5&&(n=!this.reduceMaxBufferLength(i.len)),n&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}else this.onFragmentOrKeyLoadError(u.PlaylistLevelType.MAIN,t)},T.checkBuffer=function(){var e=this.media,t=this.gapController;if(e&&t&&e.readyState){if(this.loadedmetadata||!s.BufferHelper.getBuffered(e).length){var n=this.state!==r.State.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}},T.onFragLoadEmergencyAborted=function(){this.state=r.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},T.onBufferFlushed=function(e,t){var n=t.type;if(n!==c.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var i=(n===c.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,n,u.PlaylistLevelType.MAIN)}},T.onLevelsUpdated=function(e,t){this.levels=t.levels},T.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},T.seekToStartPos=function(){var e=this.media;if(e){var t=e.currentTime,n=this.startPosition;if(n>=0&&t<n){if(e.seeking)return void this.log("could not seek to "+n+", already seeking at "+t);var i=s.BufferHelper.getBuffered(e),r=(i.length?i.start(0):0)-n;r>0&&(r<this.config.maxBufferHole||r<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+r+" to match buffer start"),n+=r,this.startPosition=n),this.log("seek to target start position "+n+" from current time "+t),e.currentTime=n}}},T._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),t},T._loadBitrateTestFrag=function(e,t){var n=this;e.bitrateTest=!0,this._doFragLoad(e,t).then((function(t){var i=n.hls;if(t&&!n.fragContextChanged(e)){n.fragLoadError=0,n.state=r.State.IDLE,n.startFragRequested=!1,n.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(o.Events.FRAG_LOADED,t),e.bitrateTest=!1}}))},T._handleTransmuxComplete=function(e){var t,n="main",a=this.hls,s=e.remuxResult,l=e.chunkMeta,u=this.getCurrentContext(l);if(!u)return this.warn("The loading context changed while buffering fragment "+l.sn+" of level "+l.level+". This chunk will not be buffered."),void this.resetStartWhenNotLoaded(l.level);var d=u.frag,h=u.part,p=u.level,f=s.video,g=s.text,m=s.id3,v=s.initSegment,y=p.details,b=this.altAudio?void 0:s.audio;if(!this.fragContextChanged(d)){if(this.state=r.State.PARSING,v){v.tracks&&(this._bufferInitSegment(p,v.tracks,d,l),a.trigger(o.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:n,tracks:v.tracks}));var E=v.initPTS,T=v.timescale;(0,i.isFiniteNumber)(E)&&(this.initPTS[d.cc]=E,a.trigger(o.Events.INIT_PTS_FOUND,{frag:d,id:n,initPTS:E,timescale:T}))}if(f&&!1!==s.independent){if(y){var A=f.startPTS,k=f.endPTS,_=f.startDTS,S=f.endDTS;if(h)h.elementaryStreams[f.type]={startPTS:A,endPTS:k,startDTS:_,endDTS:S};else if(f.firstKeyFrame&&f.independent&&1===l.id&&(this.couldBacktrack=!0),f.dropped&&f.independent){var w=this.getMainFwdBufferInfo();if((w?w.end:this.getLoadPosition())+this.config.maxBufferHole<(f.firstKeyFramePTS?f.firstKeyFramePTS:A)-this.config.maxBufferHole)return void this.backtrack(d);d.setElementaryStreamInfo(f.type,d.start,k,d.start,S,!0)}d.setElementaryStreamInfo(f.type,A,k,_,S),this.backtrackFragment&&(this.backtrackFragment=d),this.bufferFragmentData(f,d,h,l)}}else if(!1===s.independent)return void this.backtrack(d);if(b){var C=b.startPTS,I=b.endPTS,D=b.startDTS,R=b.endDTS;h&&(h.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:C,endPTS:I,startDTS:D,endDTS:R}),d.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,C,I,D,R),this.bufferFragmentData(b,d,h,l)}if(y&&null!=m&&null!==(t=m.samples)&&void 0!==t&&t.length){var x={id:n,frag:d,details:y,samples:m.samples};a.trigger(o.Events.FRAG_PARSING_METADATA,x)}if(y&&g){var L={id:n,frag:d,details:y,samples:g.samples};a.trigger(o.Events.FRAG_PARSING_USERDATA,L)}}},T._bufferInitSegment=function(e,t,n,i){var a=this;if(this.state===r.State.PARSING){this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;var s=t.audio,l=t.video,u=t.audiovideo;if(s){var c=e.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(c&&(c=-1!==c.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==s.metadata.channelCount&&-1===d.indexOf("firefox")&&(c="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==s.container&&(c="mp4a.40.2",this.log("Android: force audio codec to "+c)),e.audioCodec&&e.audioCodec!==c&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+c+'"'),s.levelCodec=c,s.id="main",this.log("Init audio buffer, container:"+s.container+", codecs[selected/level/parsed]=["+(c||"")+"/"+(e.audioCodec||"")+"/"+s.codec+"]")}l&&(l.levelCodec=e.videoCodec,l.id="main",this.log("Init video buffer, container:"+l.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+l.codec+"]")),u&&this.log("Init audiovideo buffer, container:"+u.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+u.codec+"]"),this.hls.trigger(o.Events.BUFFER_CODECS,t),Object.keys(t).forEach((function(e){var r=t[e].initSegment;null!=r&&r.byteLength&&a.hls.trigger(o.Events.BUFFER_APPENDING,{type:e,data:r,frag:n,part:null,chunkMeta:i,parent:n.type})})),this.tick()}},T.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,u.PlaylistLevelType.MAIN)},T.backtrack=function(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=r.State.IDLE},T.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&e.readyState>1&&!1===e.seeking){var n=e.currentTime;if(s.BufferHelper.isBuffered(e,n)?t=this.getAppendedFrag(n):s.BufferHelper.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;var i=this.fragPlaying,r=t.level;i&&t.sn===i.sn&&i.level===r&&t.urlId===i.urlId||(this.fragPlaying=t,this.hls.trigger(o.Events.FRAG_CHANGED,{frag:t}),i&&i.level===r||this.hls.trigger(o.Events.LEVEL_SWITCHED,{level:r}))}}},y=v,(b=[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentFrag",get:function(){var e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}},{key:"currentProgramDateTime",get:function(){var e=this.media;if(e){var t=e.currentTime,n=this.currentFrag;if(n&&(0,i.isFiniteNumber)(t)&&(0,i.isFiniteNumber)(n.programDateTime)){var r=n.programDateTime+1e3*(t-n.start);return new Date(r)}}return null}},{key:"currentLevel",get:function(){var e=this.currentFrag;return e?e.level:-1}},{key:"nextBufferedFrag",get:function(){var e=this.currentFrag;return e?this.followingBufferedFrag(e):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}])&&g(y.prototype,b),E&&g(y,E),Object.defineProperty(y,"prototype",{writable:!1}),v}(r.default)},"./src/controller/subtitle-stream-controller.ts":
/*!******************************************************!*\
    !*** ./src/controller/subtitle-stream-controller.ts ***!
    \******************************************************/(e,t,n)=>{n.r(t),n.d(t,{SubtitleStreamController:()=>f});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../utils/buffer-helper */"./src/utils/buffer-helper.ts"),a=n(/*! ./fragment-finders */"./src/controller/fragment-finders.ts"),o=n(/*! ../utils/discontinuities */"./src/utils/discontinuities.ts"),s=n(/*! ./level-helper */"./src/controller/level-helper.ts"),l=n(/*! ./fragment-tracker */"./src/controller/fragment-tracker.ts"),u=n(/*! ./base-stream-controller */"./src/controller/base-stream-controller.ts"),c=n(/*! ../types/loader */"./src/types/loader.ts"),d=n(/*! ../types/level */"./src/types/level.ts");function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var f=function(e){var t,n;function f(t,n,i){var r;return(r=e.call(this,t,n,i,"[subtitle-stream-controller]")||this).levels=[],r.currentTrackId=-1,r.tracksBuffered=[],r.mainDetails=null,r._registerListeners(),r}n=e,(t=f).prototype=Object.create(n.prototype),t.prototype.constructor=t,p(t,n);var m,v,y,b=f.prototype;return b.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},b._registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(i.Events.ERROR,this.onError,this),e.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(i.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(i.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(i.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b._unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(i.Events.ERROR,this.onError,this),e.off(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(i.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(i.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(i.Events.FRAG_BUFFERED,this.onFragBuffered,this)},b.startLoad=function(e){this.stopLoad(),this.state=u.State.IDLE,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},b.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},b.onLevelLoaded=function(e,t){this.mainDetails=t.details},b.onSubtitleFragProcessed=function(e,t){var n=t.frag,i=t.success;if(this.fragPrevious=n,this.state=u.State.IDLE,i){var r=this.tracksBuffered[this.currentTrackId];if(r){for(var a,o=n.start,s=0;s<r.length;s++)if(o>=r[s].start&&o<=r[s].end){a=r[s];break}var l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},r.push(a)),this.fragmentTracker.fragBuffered(n)}}},b.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset;if(0===n&&i!==Number.POSITIVE_INFINITY){var r=this.currentTrackId,a=this.levels;if(!a.length||!a[r]||!a[r].details)return;var o=i-a[r].details.targetduration;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach((function(e){for(var t=0;t<e.length;)if(e[t].end<=o)e.shift();else{if(!(e[t].start<o))break;e[t].start=o,t++}})),this.fragmentTracker.removeFragmentsInRange(n,o,c.PlaylistLevelType.SUBTITLE)}},b.onFragBuffered=function(e,t){var n;this.loadedmetadata||t.frag.type!==c.PlaylistLevelType.MAIN||null!==(n=this.media)&&void 0!==n&&n.buffered.length&&(this.loadedmetadata=!0)},b.onError=function(e,t){var n=t.frag;n&&n.type===c.PlaylistLevelType.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=u.State.IDLE)},b.onSubtitleTracksUpdated=function(e,t){var n=this,i=t.subtitleTracks;this.tracksBuffered=[],this.levels=i.map((function(e){return new d.Level(e)})),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach((function(e){n.tracksBuffered[e.id]=[]})),this.mediaBuffer=null},b.onSubtitleTrackSwitch=function(e,t){if(this.currentTrackId=t.id,this.levels.length&&-1!==this.currentTrackId){var n=this.levels[this.currentTrackId];null!=n&&n.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,n&&this.setInterval(500)}else this.clearInterval()},b.onSubtitleTrackLoaded=function(e,t){var n,i=t.details,r=t.id,l=this.currentTrackId,c=this.levels;if(c.length){var d=c[l];if(!(r>=c.length||r!==l)&&d){this.mediaBuffer=this.mediaBufferTimeRanges;var h=0;if(i.live||null!==(n=d.details)&&void 0!==n&&n.live){var p=this.mainDetails;if(i.deltaUpdateFailed||!p)return;var f=p.fragments[0];d.details?0===(h=this.alignPlaylists(i,d.details))&&f&&(h=f.start,(0,s.addSliding)(i,h)):i.hasProgramDateTime&&p.hasProgramDateTime?((0,o.alignMediaPlaylistByPDT)(i,p),h=i.fragments[0].start):f&&(h=f.start,(0,s.addSliding)(i,h))}d.details=i,this.levelLastLoaded=r,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(d.details,h),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===u.State.IDLE&&((0,a.findFragmentByPTS)(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0))}}},b._handleFragmentLoadComplete=function(e){var t=this,n=e.frag,r=e.payload,a=n.decryptdata,o=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var s=performance.now();this.decrypter.decrypt(new Uint8Array(r),a.key.buffer,a.iv.buffer).then((function(e){var t=performance.now();o.trigger(i.Events.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:s,tdecrypt:t}})})).catch((function(e){t.warn(e.name+": "+e.message),t.state=u.State.IDLE}))}},b.doTick=function(){if(this.media){if(this.state===u.State.IDLE){var e=this.currentTrackId,t=this.levels;if(!t.length||!t[e]||!t[e].details)return;var n=t[e].details,i=n.targetduration,o=this.config,s=this.getLoadPosition(),d=r.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s-i,o.maxBufferHole),h=d.end,p=d.len,f=this.getFwdBufferInfo(this.media,c.PlaylistLevelType.MAIN);if(p>this.getMaxBufferLength(null==f?void 0:f.len)+i)return;console.assert(n,"Subtitle track details are defined on idle subtitle stream controller tick");var g=n.fragments,m=g.length,v=n.edge,y=null,b=this.fragPrevious;if(h<v){var E=o.maxFragLookUpTolerance;!(y=(0,a.findFragmentByPTS)(b,g,Math.max(g[0].start,h),E))&&b&&b.start<g[0].start&&(y=g[0])}else y=g[m-1];if(!y)return;y=this.mapToInitFragWhenRequired(y),this.fragmentTracker.getState(y)===l.FragmentState.NOT_LOADED&&this.loadFragment(y,n,h)}}else this.state=u.State.IDLE},b.getMaxBufferLength=function(t){var n=e.prototype.getMaxBufferLength.call(this);return t?Math.max(n,t):n},b.loadFragment=function(t,n,i){this.fragCurrent=t,"initSegment"===t.sn?this._loadInitSegment(t,n):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,n,i))},m=f,(v=[{key:"mediaBufferTimeRanges",get:function(){return new g(this.tracksBuffered[this.currentTrackId]||[])}}])&&h(m.prototype,v),y&&h(m,y),Object.defineProperty(m,"prototype",{writable:!1}),f}(u.default),g=function(e){this.buffered=void 0;var t=function(t,n,i){if((n>>>=0)>i-1)throw new DOMException("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+n+") is greater than the maximum bound ("+i+")");return e[n][t]};this.buffered={get length(){return e.length},end:function(n){return t("end",n,e.length)},start:function(n){return t("start",n,e.length)}}}},"./src/controller/subtitle-track-controller.ts":
/*!*****************************************************!*\
    !*** ./src/controller/subtitle-track-controller.ts ***!
    \*****************************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(/*! ../events */"./src/events.ts"),r=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),a=n(/*! ./base-playlist-controller */"./src/controller/base-playlist-controller.ts"),o=n(/*! ../types/loader */"./src/types/loader.ts");function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}var u=function(e){var t,n;function a(t){var n;return(n=e.call(this,t,"[subtitle-track-controller]")||this).media=null,n.tracks=[],n.groupId=null,n.tracksInGroup=[],n.trackId=-1,n.selectDefaultTrack=!0,n.queuedDefaultTrack=-1,n.trackChangeListener=function(){return n.onTextTracksChanged()},n.asyncPollTrackChange=function(){return n.pollTrackChange(0)},n.useTextTrackPolling=!1,n.subtitlePollingInterval=-1,n._subtitleDisplay=!0,n.registerListeners(),n}n=e,(t=a).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n);var u,d,h,p=a.prototype;return p.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,e.prototype.destroy.call(this)},p.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(i.Events.ERROR,this.onError,this)},p.unregisterListeners=function(){var e=this.hls;e.off(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(i.Events.ERROR,this.onError,this)},p.onMediaAttached=function(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},p.pollTrackChange=function(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)},p.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),c(this.media.textTracks).forEach((function(e){(0,r.clearCurrentCues)(e)})),this.subtitleTrack=-1,this.media=null)},p.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},p.onManifestParsed=function(e,t){this.tracks=t.subtitleTracks},p.onSubtitleTrackLoaded=function(e,t){var n=t.id,i=t.details,r=this.trackId,a=this.tracksInGroup[r];if(a){var o=a.details;a.details=t.details,this.log("subtitle track "+n+" loaded ["+i.startSN+"-"+i.endSN+"]"),n===this.trackId&&(this.retryCount=0,this.playlistLoaded(n,t,o))}else this.warn("Invalid subtitle track id "+n)},p.onLevelLoading=function(e,t){this.switchLevel(t.level)},p.onLevelSwitching=function(e,t){this.switchLevel(t.level)},p.switchLevel=function(e){var t=this.hls.levels[e];if(null!=t&&t.textGroupIds){var n=t.textGroupIds[t.urlId];if(this.groupId!==n){var r=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,a=this.tracks.filter((function(e){return!n||e.groupId===n}));this.tracksInGroup=a;var o=this.findTrackId(null==r?void 0:r.name)||this.findTrackId();this.groupId=n;var s={subtitleTracks:a};this.log("Updating subtitle tracks, "+a.length+' track(s) found in "'+n+'" group-id'),this.hls.trigger(i.Events.SUBTITLE_TRACKS_UPDATED,s),-1!==o&&this.setSubtitleTrack(o,r)}}},p.findTrackId=function(e){for(var t=this.tracksInGroup,n=0;n<t.length;n++){var i=t[n];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return-1},p.onError=function(t,n){e.prototype.onError.call(this,t,n),!n.fatal&&n.context&&n.context.type===o.PlaylistContextType.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.retryLoadingOrFail(n)},p.loadPlaylist=function(t){e.prototype.loadPlaylist.call(this);var n=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(n)){var r=n.id,a=n.groupId,o=n.url;if(t)try{o=t.addDirectives(o)}catch(e){this.warn("Could not construct new URL with HLS Delivery Directives: "+e)}this.log("Loading subtitle playlist for id "+r),this.hls.trigger(i.Events.SUBTITLE_TRACK_LOADING,{url:o,id:r,groupId:a,deliveryDirectives:t||null})}},p.toggleTrackModes=function(e){var t=this,n=this.media,i=this.trackId;if(n){var r=c(n.textTracks),a=r.filter((function(e){return e.groupId===t.groupId}));if(-1===e)[].slice.call(r).forEach((function(e){e.mode="disabled"}));else{var o=a[i];o&&(o.mode="disabled")}var s=a[e];s&&(s.mode=this.subtitleDisplay?"showing":"hidden")}},p.setSubtitleTrack=function(e,t){var n,r=this.tracksInGroup;if(this.media){if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(n=r[e])&&void 0!==n&&n.details)||e<-1||e>=r.length)){this.clearTimer();var a=r[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,a){var o=a.id,s=a.groupId,l=void 0===s?"":s,u=a.name,c=a.type,d=a.url;this.hls.trigger(i.Events.SUBTITLE_TRACK_SWITCH,{id:o,groupId:l,name:u,type:c,url:d});var h=this.switchParams(a.url,null==t?void 0:t.details);this.loadPlaylist(h)}else this.hls.trigger(i.Events.SUBTITLE_TRACK_SWITCH,{id:e})}}else this.queuedDefaultTrack=e},p.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var e=-1,t=c(this.media.textTracks),n=0;n<t.length;n++)if("hidden"===t[n].mode)e=n;else if("showing"===t[n].mode){e=n;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},u=a,(d=[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.selectDefaultTrack=!1;var t=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,t)}}])&&s(u.prototype,d),h&&s(u,h),Object.defineProperty(u,"prototype",{writable:!1}),a}(a.default);function c(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"subtitles"===i.kind&&i.label&&t.push(e[n])}return t}const d=u},"./src/controller/timeline-controller.ts":
/*!***********************************************!*\
    !*** ./src/controller/timeline-controller.ts ***!
    \***********************************************/(e,t,n)=>{n.r(t),n.d(t,{TimelineController:()=>p});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/cea-608-parser */"./src/utils/cea-608-parser.ts"),o=n(/*! ../utils/output-filter */"./src/utils/output-filter.ts"),s=n(/*! ../utils/webvtt-parser */"./src/utils/webvtt-parser.ts"),l=n(/*! ../utils/texttrack-utils */"./src/utils/texttrack-utils.ts"),u=n(/*! ../utils/imsc1-ttml-parser */"./src/utils/imsc1-ttml-parser.ts"),c=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),d=n(/*! ../types/loader */"./src/types/loader.ts"),h=n(/*! ../utils/logger */"./src/utils/logger.ts"),p=function(){function e(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var t=new o.default(this,"textTrack1"),n=new o.default(this,"textTrack2"),i=new o.default(this,"textTrack3"),s=new o.default(this,"textTrack4");this.cea608Parser1=new a.default(1,t,n),this.cea608Parser2=new a.default(3,i,s)}e.on(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(r.Events.FRAG_LOADING,this.onFragLoading,this),e.on(r.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(r.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(r.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(r.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(r.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var t=e.prototype;return t.destroy=function(){var e=this.hls;e.off(r.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(r.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(r.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(r.Events.FRAG_LOADING,this.onFragLoading,this),e.off(r.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(r.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(r.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(r.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(r.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(r.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},t.addCues=function(e,t,n,i,a){for(var o,s,l,u,c=!1,d=a.length;d--;){var h=a[d],p=(o=h[0],s=h[1],l=t,u=n,Math.min(s,u)-Math.max(o,l));if(p>=0&&(h[0]=Math.min(h[0],t),h[1]=Math.max(h[1],n),c=!0,p/(n-t)>.5))return}if(c||a.push([t,n]),this.config.renderTextTracksNatively){var f=this.captionsTracks[e];this.Cues.newCue(f,t,n,i)}else{var g=this.Cues.newCue(null,t,n,i);this.hls.trigger(r.Events.CUES_PARSED,{type:"captions",cues:g,track:e})}},t.onInitPtsFound=function(e,t){var n=this,i=t.frag,a=t.id,o=t.initPTS,s=t.timescale,l=this.unparsedVttFrags;"main"===a&&(this.initPTS[i.cc]=o,this.timescale[i.cc]=s),l.length&&(this.unparsedVttFrags=[],l.forEach((function(e){n.onFragLoaded(r.Events.FRAG_LOADED,e)})))},t.getExistingTrack=function(e){var t=this.media;if(t)for(var n=0;n<t.textTracks.length;n++){var i=t.textTracks[n];if(i[e])return i}return null},t.createCaptionsTrack=function(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)},t.createNativeTrack=function(e){if(!this.captionsTracks[e]){var t=this.captionsProperties,n=this.captionsTracks,i=this.media,r=t[e],a=r.label,o=r.languageCode,s=this.getExistingTrack(e);if(s)n[e]=s,(0,l.clearCurrentCues)(n[e]),(0,l.sendAddTrackEvent)(n[e],i);else{var u=this.createTextTrack("captions",a,o);u&&(u[e]=!0,n[e]=u)}}},t.createNonNativeTrack=function(e){if(!this.nonNativeCaptionsTracks[e]){var t=this.captionsProperties[e];if(t){var n={_id:e,label:t.label,kind:"captions",default:!!t.media&&!!t.media.default,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=n,this.hls.trigger(r.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[n]})}}},t.createTextTrack=function(e,t,n){var i=this.media;if(i)return i.addTextTrack(e,t,n)},t.onMediaAttaching=function(e,t){this.media=t.media,this._cleanTracks()},t.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach((function(t){(0,l.clearCurrentCues)(e[t]),delete e[t]})),this.nonNativeCaptionsTracks={}},t.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},t._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var n=0;n<t.length;n++)(0,l.clearCurrentCues)(t[n])}},t.onSubtitleTracksUpdated=function(e,t){var n=this;this.textTracks=[];var i=t.subtitleTracks||[],a=i.some((function(e){return e.textCodec===u.IMSC1_CODEC}));if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var o=this.tracks&&i&&this.tracks.length===i.length;if(this.tracks=i||[],this.config.renderTextTracksNatively){var s=this.media?this.media.textTracks:[];this.tracks.forEach((function(e,t){var i;if(t<s.length){for(var r=null,a=0;a<s.length;a++)if(f(s[a],e)){r=s[a];break}r&&(i=r)}if(i)(0,l.clearCurrentCues)(i);else{var o=n._captionsOrSubtitlesFromCharacteristics(e);(i=n.createTextTrack(o,e.name,e.lang))&&(i.mode="disabled")}i&&(i.groupId=e.groupId,n.textTracks.push(i))}))}else if(!o&&this.tracks&&this.tracks.length){var c=this.tracks.map((function(e){return{label:e.name,kind:e.type.toLowerCase(),default:e.default,subtitleTrack:e}}));this.hls.trigger(r.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},t._captionsOrSubtitlesFromCharacteristics=function(e){var t;if(null!==(t=e.attrs)&&void 0!==t&&t.CHARACTERISTICS){var n=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),i=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(n&&i)return"captions"}return"subtitles"},t.onManifestLoaded=function(e,t){var n=this;this.config.enableCEA708Captions&&t.captions&&t.captions.forEach((function(e){var t=/(?:CC|SERVICE)([1-4])/.exec(e.instreamId);if(t){var i="textTrack"+t[1],r=n.captionsProperties[i];r&&(r.label=e.name,e.lang&&(r.languageCode=e.lang),r.media=e)}}))},t.closedCaptionsForLevel=function(e){var t=this.hls.levels[e.level];return null==t?void 0:t.attrs["CLOSED-CAPTIONS"]},t.onFragLoading=function(e,t){var n=this.cea608Parser1,i=this.cea608Parser2,r=this.lastSn,a=this.lastPartIndex;if(this.enabled&&n&&i&&t.frag.type===d.PlaylistLevelType.MAIN){var o,s,l=t.frag.sn,u=null!=(o=null==t||null===(s=t.part)||void 0===s?void 0:s.index)?o:-1;l===r+1||l===r&&u===a+1||(n.reset(),i.reset()),this.lastSn=l,this.lastPartIndex=u}},t.onFragLoaded=function(e,t){var n=t.frag,a=t.payload,o=this.initPTS,s=this.unparsedVttFrags;if(n.type===d.PlaylistLevelType.SUBTITLE)if(a.byteLength){if(!(0,i.isFiniteNumber)(o[n.cc]))return s.push(t),void(o.length&&this.hls.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Missing initial subtitle PTS")}));var l=n.decryptdata,c="stats"in t;if(null==l||!l.encrypted||c){var h=this.tracks[n.level],p=this.vttCCs;p[n.cc]||(p[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),h&&h.textCodec===u.IMSC1_CODEC?this._parseIMSC1(n,a):this._parseVTTs(n,a,p)}}else this.hls.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})},t._parseIMSC1=function(e,t){var n=this,i=this.hls;(0,u.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(t){n._appendCues(t,e.level),i.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(t){h.logger.log("Failed to parse IMSC1: "+t),i.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:t})}))},t._parseVTTs=function(e,t,n){var i,a=this,o=this.hls,l=null!==(i=e.initSegment)&&void 0!==i&&i.data?(0,c.appendUint8Array)(e.initSegment.data,new Uint8Array(t)):t;(0,s.parseWebVTT)(l,this.initPTS[e.cc],this.timescale[e.cc],n,e.cc,e.start,(function(t){a._appendCues(t,e.level),o.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})}),(function(n){a._fallbackToIMSC1(e,t),h.logger.log("Failed to parse VTT cue: "+n),o.trigger(r.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:n})}))},t._fallbackToIMSC1=function(e,t){var n=this,i=this.tracks[e.level];i.textCodec||(0,u.parseIMSC1)(t,this.initPTS[e.cc],this.timescale[e.cc],(function(){i.textCodec=u.IMSC1_CODEC,n._parseIMSC1(e,t)}),(function(){i.textCodec="wvtt"}))},t._appendCues=function(e,t){var n=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[t];if(!i||"disabled"===i.mode)return;e.forEach((function(e){return(0,l.addCueToTrack)(i,e)}))}else{var a=this.tracks[t];if(!a)return;var o=a.default?"default":"subtitles"+t;n.trigger(r.Events.CUES_PARSED,{type:"subtitles",cues:e,track:o})}},t.onFragDecrypted=function(e,t){var n=t.frag;if(n.type===d.PlaylistLevelType.SUBTITLE){if(!(0,i.isFiniteNumber)(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this.onFragLoaded(r.Events.FRAG_LOADED,t)}},t.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},t.onFragParsingUserdata=function(e,t){var n=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&n&&i){var r=t.frag,a=t.samples;if(r.type!==d.PlaylistLevelType.MAIN||"NONE"!==this.closedCaptionsForLevel(r))for(var o=0;o<a.length;o++){var s=a[o].bytes;if(s){var l=this.extractCea608Data(s);n.addData(a[o].pts,l[0]),i.addData(a[o].pts,l[1])}}}},t.onBufferFlushing=function(e,t){var n=t.startOffset,i=t.endOffset,r=t.endOffsetSubtitles,a=t.type,o=this.media;if(o&&!(o.currentTime<i)){if(!a||"video"===a){var s=this.captionsTracks;Object.keys(s).forEach((function(e){return(0,l.removeCuesInRange)(s[e],n,i)}))}if(this.config.renderTextTracksNatively&&0===n&&void 0!==r){var u=this.textTracks;Object.keys(u).forEach((function(e){return(0,l.removeCuesInRange)(u[e],n,r)}))}}},t.extractCea608Data=function(e){for(var t=[[],[]],n=31&e[0],i=2,r=0;r<n;r++){var a=e[i++],o=127&e[i++],s=127&e[i++];if((0!==o||0!==s)&&0!=(4&a)){var l=3&a;0!==l&&1!==l||(t[l].push(o),t[l].push(s))}}return t},e}();function f(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}},"./src/crypt/aes-crypto.ts":
/*!*********************************!*\
    !*** ./src/crypt/aes-crypto.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}()},"./src/crypt/aes-decryptor.ts":
/*!************************************!*\
    !*** ./src/crypt/aes-decryptor.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a,removePadding:()=>r});var i=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts");function r(e){var t=e.byteLength,n=t&&new DataView(e.buffer).getUint8(t-1);return n?(0,i.sliceUint8)(e,0,t-n):e}var a=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),n=new Uint32Array(4),i=0;i<4;i++)n[i]=t.getUint32(4*i);return n},t.initTable=function(){var e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],r=n[1],a=n[2],o=n[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],h=new Uint32Array(256),p=0,f=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var m=f^f<<1^f<<2^f<<3^f<<4;m=m>>>8^255&m^99,e[p]=m,t[m]=p;var v=h[p],y=h[v],b=h[y],E=257*h[m]^16843008*m;i[p]=E<<24|E>>>8,r[p]=E<<16|E>>>16,a[p]=E<<8|E>>>24,o[p]=E,E=16843009*b^65537*y^257*v^16843008*p,l[m]=E<<24|E>>>8,u[m]=E<<16|E>>>16,c[m]=E<<8|E>>>24,d[m]=E,p?(p=v^h[h[h[b^v]]],f^=h[h[f]]):p=f=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),n=!0,i=0;i<t.length&&n;)n=t[i]===this.key[i],i++;if(!n){this.key=t;var r=this.keySize=t.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);var a,o,s,l,u=this.ksRows=4*(r+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,p=this.rcon,f=this.invSubMix,g=f[0],m=f[1],v=f[2],y=f[3];for(a=0;a<u;a++)a<r?s=c[a]=t[a]:(l=s,a%r==0?(l=h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l],l^=p[a/r|0]<<24):r>6&&a%r==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=s=(c[a-r]^l)>>>0);for(o=0;o<u;o++)a=u-o,l=3&o?c[a]:c[a-4],d[o]=o<4||a<=4?l:g[h[l>>>24]]^m[h[l>>>16&255]]^v[h[l>>>8&255]]^y[h[255&l]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,n){for(var i,r,a,o,s,l,u,c,d,h,p,f,g,m,v=this.keySize+6,y=this.invKeySchedule,b=this.invSBox,E=this.invSubMix,T=E[0],A=E[1],k=E[2],_=E[3],S=this.uint8ArrayToUint32Array_(n),w=S[0],C=S[1],I=S[2],D=S[3],R=new Int32Array(e),x=new Int32Array(R.length),L=this.networkToHostOrderSwap;t<R.length;){for(d=L(R[t]),h=L(R[t+1]),p=L(R[t+2]),f=L(R[t+3]),s=d^y[0],l=f^y[1],u=p^y[2],c=h^y[3],g=4,m=1;m<v;m++)i=T[s>>>24]^A[l>>16&255]^k[u>>8&255]^_[255&c]^y[g],r=T[l>>>24]^A[u>>16&255]^k[c>>8&255]^_[255&s]^y[g+1],a=T[u>>>24]^A[c>>16&255]^k[s>>8&255]^_[255&l]^y[g+2],o=T[c>>>24]^A[s>>16&255]^k[l>>8&255]^_[255&u]^y[g+3],s=i,l=r,u=a,c=o,g+=4;i=b[s>>>24]<<24^b[l>>16&255]<<16^b[u>>8&255]<<8^b[255&c]^y[g],r=b[l>>>24]<<24^b[u>>16&255]<<16^b[c>>8&255]<<8^b[255&s]^y[g+1],a=b[u>>>24]<<24^b[c>>16&255]<<16^b[s>>8&255]<<8^b[255&l]^y[g+2],o=b[c>>>24]<<24^b[s>>16&255]<<16^b[l>>8&255]<<8^b[255&u]^y[g+3],x[t]=L(i^w),x[t+1]=L(o^C),x[t+2]=L(a^I),x[t+3]=L(r^D),w=d,C=h,I=p,D=f,t+=4}return x.buffer},e}()},"./src/crypt/decrypter.ts":
/*!********************************!*\
    !*** ./src/crypt/decrypter.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(/*! ./aes-crypto */"./src/crypt/aes-crypto.ts"),r=n(/*! ./fast-aes-key */"./src/crypt/fast-aes-key.ts"),a=n(/*! ./aes-decryptor */"./src/crypt/aes-decryptor.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),l=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts"),u=function(){function e(e,t){var n=(void 0===t?{}:t).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=i,i)try{var r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch(e){}null===this.subtle&&(this.useSoftware=!0)}var t=e.prototype;return t.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},t.isSync=function(){return this.useSoftware},t.flush=function(){var e=this.currentResult,t=this.remainderData;if(!e||t)return this.reset(),null;var n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?(0,a.removePadding)(n):n},t.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},t.decrypt=function(e,t,n){var i=this;return this.useSoftware?new Promise((function(r,a){i.softwareDecrypt(new Uint8Array(e),t,n);var o=i.flush();o?r(o.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(e),t,n)},t.softwareDecrypt=function(e,t,n){var i=this.currentIV,r=this.currentResult,o=this.remainderData;this.logOnce("JS AES decrypt"),o&&(e=(0,s.appendUint8Array)(o,e),this.remainderData=null);var u=this.getValidChunk(e);if(!u.length)return null;i&&(n=i);var c=this.softwareDecrypter;c||(c=this.softwareDecrypter=new a.default),c.expandKey(t);var d=r;return this.currentResult=c.decrypt(u.buffer,0,n),this.currentIV=(0,l.sliceUint8)(u,-16).buffer,d||null},t.webCryptoDecrypt=function(e,t,n){var a=this,s=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new r.default(s,t)),this.fastAesKey.expandKey().then((function(t){return s?(a.logOnce("WebCrypto AES decrypt"),new i.default(s,new Uint8Array(n)).decrypt(e.buffer,t)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(i){return o.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+i.name+": "+i.message),a.onWebCryptoError(e,t,n)}))},t.onWebCryptoError=function(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);var i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},t.getValidChunk=function(e){var t=e,n=e.length-e.length%16;return n!==e.length&&(t=(0,l.sliceUint8)(e,0,n),this.remainderData=(0,l.sliceUint8)(e,n)),t},t.logOnce=function(e){this.logEnabled&&(o.logger.log("[decrypter]: "+e),this.logEnabled=!1)},e}()},"./src/crypt/fast-aes-key.ts":
/*!***********************************!*\
    !*** ./src/crypt/fast-aes-key.ts ***!
    \***********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}()},"./src/demux/aacdemuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/aacdemuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(/*! ./base-audio-demuxer */"./src/demux/base-audio-demuxer.ts"),r=n(/*! ./adts */"./src/demux/adts.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ../demux/id3 */"./src/demux/id3.ts");function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}const l=function(e){var t,n;function i(t,n){var i;return(i=e.call(this)||this).observer=void 0,i.config=void 0,i.observer=t,i.config=n,i}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var l=i.prototype;return l.resetInitSegment=function(t,n,i,r){e.prototype.resetInitSegment.call(this,t,n,i,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(o.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(r.probe(e,t))return a.logger.log("ADTS sync word found !"),!0;return!1},l.canParse=function(e,t){return r.canParse(e,t)},l.appendFrame=function(e,t,n){r.initTrackConfig(e,this.observer,t,n,e.manifestCodec);var i=r.appendFrame(e,t,n,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i},i}(i.default)},"./src/demux/adts.ts":
/*!***************************!*\
    !*** ./src/demux/adts.ts ***!
    \***************************/(e,t,n)=>{n.r(t),n.d(t,{appendFrame:()=>v,canGetFrameLength:()=>c,canParse:()=>h,getAudioConfig:()=>o,getFrameDuration:()=>g,getFullFrameLength:()=>u,getHeaderLength:()=>l,initTrackConfig:()=>f,isHeader:()=>d,isHeaderPattern:()=>s,parseFrameHeader:()=>m,probe:()=>p});var i=n(/*! ../utils/logger */"./src/utils/logger.ts"),r=n(/*! ../errors */"./src/errors.ts"),a=n(/*! ../events */"./src/events.ts");function o(e,t,n,o){var s,l,u,c,d=navigator.userAgent.toLowerCase(),h=o,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=1+((192&t[n+2])>>>6);var f=(60&t[n+2])>>>2;if(!(f>p.length-1))return u=(1&t[n+2])<<2,u|=(192&t[n+3])>>>6,i.logger.log("manifest codec:"+o+", ADTS type:"+s+", samplingIndex:"+f),/firefox/i.test(d)?f>=6?(s=5,c=new Array(4),l=f-3):(s=2,c=new Array(2),l=f):-1!==d.indexOf("android")?(s=2,c=new Array(2),l=f):(s=5,c=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&f>=6?l=f-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(f>=6&&1===u||/vivaldi/i.test(d))||!o&&1===u)&&(s=2,c=new Array(2)),l=f)),c[0]=s<<3,c[0]|=(14&f)>>1,c[1]|=(1&f)<<7,c[1]|=u<<3,5===s&&(c[1]|=(14&l)>>1,c[2]=(1&l)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:p[f],channelCount:u,codec:"mp4a.40."+s,manifestCodec:h};e.trigger(a.Events.ERROR,{type:r.ErrorTypes.MEDIA_ERROR,details:r.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+f})}function s(e,t){return 255===e[t]&&240==(246&e[t+1])}function l(e,t){return 1&e[t+1]?7:9}function u(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function c(e,t){return t+5<e.length}function d(e,t){return t+1<e.length&&s(e,t)}function h(e,t){return c(e,t)&&s(e,t)&&u(e,t)<=e.length-t}function p(e,t){if(d(e,t)){var n=l(e,t);if(t+n>=e.length)return!1;var i=u(e,t);if(i<=n)return!1;var r=t+i;return r===e.length||d(e,r)}return!1}function f(e,t,n,r,a){if(!e.samplerate){var s=o(t,n,r,a);if(!s)return;e.config=s.config,e.samplerate=s.samplerate,e.channelCount=s.channelCount,e.codec=s.codec,e.manifestCodec=s.manifestCodec,i.logger.log("parsed codec:"+e.codec+", rate:"+s.samplerate+", channels:"+s.channelCount)}}function g(e){return 9216e4/e}function m(e,t){var n=l(e,t);if(t+n<=e.length){var i=u(e,t)-n;if(i>0)return{headerLength:n,frameLength:i}}}function v(e,t,n,i,r){var a,o=i+r*g(e.samplerate),s=m(t,n);if(s){var l=s.frameLength,u=s.headerLength,c=u+l,d=Math.max(0,n+c-t.length);d?(a=new Uint8Array(c-u)).set(t.subarray(n+u,t.length),0):a=t.subarray(n+u,n+c);var h={unit:a,pts:o};return d||e.samples.push(h),{sample:h,length:c,missing:d}}var p=t.length-n;return(a=new Uint8Array(p)).set(t.subarray(n,t.length),0),{sample:{unit:a,pts:o},length:p,missing:-1}}},"./src/demux/base-audio-demuxer.ts":
/*!*****************************************!*\
    !*** ./src/demux/base-audio-demuxer.ts ***!
    \*****************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d,initPTSFn:()=>c});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../demux/id3 */"./src/demux/id3.ts"),a=n(/*! ../types/demuxer */"./src/types/demuxer.ts"),o=n(/*! ./dummy-demuxed-track */"./src/demux/dummy-demuxed-track.ts"),s=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),l=n(/*! ../utils/typed-array */"./src/utils/typed-array.ts"),u=function(){function e(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var t=e.prototype;return t.resetInitSegment=function(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(e){this.initPTS=e,this.resetContiguity()},t.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},t.canParse=function(e,t){return!1},t.appendFrame=function(e,t,n){},t.demux=function(e,t){this.cachedData&&(e=(0,s.appendUint8Array)(this.cachedData,e),this.cachedData=null);var n,u=r.getID3Data(e,0),d=u?u.length:0,h=this._audioTrack,p=this._id3Track,f=u?r.getTimeStamp(u):void 0,g=e.length;for((null===this.basePTS||0===this.frameIndex&&(0,i.isFiniteNumber)(f))&&(this.basePTS=c(f,t,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),u&&u.length>0&&p.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:a.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});d<g;){if(this.canParse(e,d)){var m=this.appendFrame(h,e,d);m?(this.frameIndex++,this.lastPTS=m.sample.pts,n=d+=m.length):d=g}else r.canParse(e,d)?(u=r.getID3Data(e,d),p.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:u,type:a.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),n=d+=u.length):d++;if(d===g&&n!==g){var v=(0,l.sliceUint8)(e,n);this.cachedData?this.cachedData=(0,s.appendUint8Array)(this.cachedData,v):this.cachedData=v}}return{audioTrack:h,videoTrack:(0,o.dummyTrack)(),id3Track:p,textTrack:(0,o.dummyTrack)()}},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},t.flush=function(e){var t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:(0,o.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,o.dummyTrack)()}},t.destroy=function(){},e}(),c=function(e,t,n){return(0,i.isFiniteNumber)(e)?90*e:9e4*t+(n||0)};const d=u},"./src/demux/chunk-cache.ts":
/*!**********************************!*\
    !*** ./src/demux/chunk-cache.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(){this.chunks=[],this.dataLength=0}var t=e.prototype;return t.push=function(e){this.chunks.push(e),this.dataLength+=e.length},t.flush=function(){var e,t=this.chunks,n=this.dataLength;return t.length?(e=1===t.length?t[0]:function(e,t){for(var n=new Uint8Array(t),i=0,r=0;r<e.length;r++){var a=e[r];n.set(a,i),i+=a.length}return n}(t,n),this.reset(),e):new Uint8Array(0)},t.reset=function(){this.chunks.length=0,this.dataLength=0},e}()},"./src/demux/dummy-demuxed-track.ts":
/*!******************************************!*\
    !*** ./src/demux/dummy-demuxed-track.ts ***!
    \******************************************/(e,t,n)=>{function i(e,t){return void 0===e&&(e=""),void 0===t&&(t=9e4),{type:e,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}n.r(t),n.d(t,{dummyTrack:()=>i})},"./src/demux/exp-golomb.ts":
/*!*********************************!*\
    !*** ./src/demux/exp-golomb.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(/*! ../utils/logger */"./src/utils/logger.ts"),r=function(){function e(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),r=Math.min(4,t);if(0===r)throw new Error("no bytes available");i.set(e.subarray(n,n+r)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*r,this.bytesAvailable-=r},t.skipBits=function(e){var t;e=Math.min(e,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),n=this.word>>>32-t;if(e>32&&i.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(t=e-t)>0&&this.bitsAvailable?n<<t|this.readBits(t):n},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){for(var t=8,n=8,i=0;i<e;i++)0!==n&&(n=(t+this.readEG()+256)%256),t=0===n?t:n},t.readSPS=function(){var e,t,n,i=0,r=0,a=0,o=0,s=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),f=this.skipScalingList.bind(this);s();var g=s();if(l(5),d(3),s(),p(),100===g||110===g||122===g||244===g||44===g||83===g||86===g||118===g||128===g){var m=u();if(3===m&&d(1),p(),p(),d(1),c())for(t=3!==m?8:12,n=0;n<t;n++)c()&&f(n<6?16:64)}p();var v=u();if(0===v)u();else if(1===v)for(d(1),h(),h(),e=u(),n=0;n<e;n++)h();p(),d(1);var y=u(),b=u(),E=l(1);0===E&&d(1),d(1),c()&&(i=u(),r=u(),a=u(),o=u());var T=[1,1];if(c()&&c())switch(s()){case 1:T=[1,1];break;case 2:T=[12,11];break;case 3:T=[10,11];break;case 4:T=[16,11];break;case 5:T=[40,33];break;case 6:T=[24,11];break;case 7:T=[20,11];break;case 8:T=[32,11];break;case 9:T=[80,33];break;case 10:T=[18,11];break;case 11:T=[15,11];break;case 12:T=[64,33];break;case 13:T=[160,99];break;case 14:T=[4,3];break;case 15:T=[3,2];break;case 16:T=[2,1];break;case 255:T=[s()<<8|s(),s()<<8|s()]}return{width:Math.ceil(16*(y+1)-2*i-2*r),height:(2-E)*(b+1)*16-(E?2:4)*(a+o),pixelRatio:T}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();const a=r},"./src/demux/id3.ts":
/*!**************************!*\
    !*** ./src/demux/id3.ts ***!
    \**************************/(e,t,n)=>{n.r(t),n.d(t,{canParse:()=>l,decodeFrame:()=>p,getID3Data:()=>o,getID3Frames:()=>h,getTimeStamp:()=>u,isFooter:()=>a,isHeader:()=>r,isTimeStampFrame:()=>c,testables:()=>b,utf8ArrayToStr:()=>y});var i,r=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},o=function(e,t){for(var n=t,i=0;r(e,t);)i+=10,i+=s(e,t+6),a(e,t+10)&&(i+=10),t+=i;if(i>0)return e.subarray(n,n+i)},s=function(e,t){var n=0;return n=(127&e[t])<<21,n|=(127&e[t+1])<<14,n|=(127&e[t+2])<<7,n|=127&e[t+3]},l=function(e,t){return r(e,t)&&s(e,t+6)+10<=e.length-t},u=function(e){for(var t=h(e),n=0;n<t.length;n++){var i=t[n];if(c(i))return v(i)}},c=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},d=function(e){var t=String.fromCharCode(e[0],e[1],e[2],e[3]),n=s(e,4);return{type:t,size:n,data:e.subarray(10,10+n)}},h=function(e){for(var t=0,n=[];r(e,t);){for(var i=s(e,t+6),o=(t+=10)+i;t+8<o;){var l=d(e.subarray(t)),u=p(l);u&&n.push(u),t+=l.size+10}a(e,t)&&(t+=10)}return n},p=function(e){return"PRIV"===e.type?f(e):"W"===e.type[0]?m(e):g(e)},f=function(e){if(!(e.size<2)){var t=y(e.data,!0),n=new Uint8Array(e.data.subarray(t.length+1));return{key:e.type,info:t,data:n.buffer}}},g=function(e){if(!(e.size<2)){if("TXXX"===e.type){var t=1,n=y(e.data.subarray(t),!0);t+=n.length+1;var i=y(e.data.subarray(t));return{key:e.type,info:n,data:i}}var r=y(e.data.subarray(1));return{key:e.type,data:r}}},m=function(e){if("WXXX"===e.type){if(e.size<2)return;var t=1,n=y(e.data.subarray(t),!0);t+=n.length+1;var i=y(e.data.subarray(t));return{key:e.type,info:n,data:i}}var r=y(e.data);return{key:e.type,data:r}},v=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),n=1&t[3],i=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return i/=45,n&&(i+=47721858.84),Math.round(i)}},y=function(e,t){void 0===t&&(t=!1);var n=E();if(n){var i=n.decode(e);if(t){var r=i.indexOf("\0");return-1!==r?i.substring(0,r):i}return i.replace(/\0/g,"")}for(var a,o,s,l=e.length,u="",c=0;c<l;){if(0===(a=e[c++])&&t)return u;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(a);break;case 12:case 13:o=e[c++],u+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[c++],s=e[c++],u+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&s)<<0)}}return u},b={decodeTextFrame:g};function E(){return i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i}},"./src/demux/mp3demuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/mp3demuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var i=n(/*! ./base-audio-demuxer */"./src/demux/base-audio-demuxer.ts"),r=n(/*! ../demux/id3 */"./src/demux/id3.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! ./mpegaudio */"./src/demux/mpegaudio.ts");function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}var l=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,s(t,n);var l=i.prototype;return l.resetInitSegment=function(t,n,i,r){e.prototype.resetInitSegment.call(this,t,n,i,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:r,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(r.getID3Data(e,0)||[]).length,n=e.length;t<n;t++)if(o.probe(e,t))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},l.canParse=function(e,t){return o.canParse(e,t)},l.appendFrame=function(e,t,n){if(null!==this.basePTS)return o.appendFrame(e,t,n,this.basePTS,this.frameIndex)},i}(i.default);const u=l},"./src/demux/mp4demuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/mp4demuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../types/demuxer */"./src/types/demuxer.ts"),a=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),o=n(/*! ./dummy-demuxed-track */"./src/demux/dummy-demuxed-track.ts"),s=/\/emsg[-/]ID3/i;const l=function(){function e(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(e,t,n,i){var r=this.videoTrack=(0,o.dummyTrack)("video",1),s=this.audioTrack=(0,o.dummyTrack)("audio",1),l=this.txtTrack=(0,o.dummyTrack)("text",1);if(this.id3Track=(0,o.dummyTrack)("id3",1),this.timeOffset=0,e&&e.byteLength){var u=(0,a.parseInitSegment)(e);if(u.video){var c=u.video,d=c.id,h=c.timescale,p=c.codec;r.id=d,r.timescale=l.timescale=h,r.codec=p}if(u.audio){var f=u.audio,g=f.id,m=f.timescale,v=f.codec;s.id=g,s.timescale=m,s.codec=v}l.id=a.RemuxerTrackIdConfig.text,r.sampleDuration=0,r.duration=s.duration=i}},t.resetContiguity=function(){},e.probe=function(e){return e=e.length>16384?e.subarray(0,16384):e,(0,a.findBox)(e,["moof"]).length>0},t.demux=function(e,t){this.timeOffset=t;var n=e,i=this.videoTrack,r=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=(0,a.appendUint8Array)(this.remainderData,e));var o=(0,a.segmentValidRange)(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;var s=this.extractID3Track(i,t);return r.samples=(0,a.parseSamples)(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}},t.flush=function(){var e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;var i=this.extractID3Track(t,this.timeOffset);return n.samples=(0,a.parseSamples)(e,t),{videoTrack:t,audioTrack:(0,o.dummyTrack)(),id3Track:i,textTrack:(0,o.dummyTrack)()}},t.extractID3Track=function(e,t){var n=this.id3Track;if(e.samples.length){var o=(0,a.findBox)(e.samples,["emsg"]);o&&o.forEach((function(e){var o=(0,a.parseEmsg)(e);if(s.test(o.schemeIdUri)){var l=(0,i.isFiniteNumber)(o.presentationTime)?o.presentationTime/o.timeScale:t+o.presentationTimeDelta/o.timeScale,u=4294967295===o.eventDuration?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;u<=.001&&(u=Number.POSITIVE_INFINITY);var c=o.payload;n.samples.push({data:c,len:c.byteLength,dts:l,pts:l,type:r.MetadataSchema.emsg,duration:u})}}))}return n},t.demuxSampleAes=function(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}()},"./src/demux/mpegaudio.ts":
/*!********************************!*\
    !*** ./src/demux/mpegaudio.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{appendFrame:()=>l,canParse:()=>h,isHeader:()=>d,isHeaderPattern:()=>c,parseHeader:()=>u,probe:()=>p});var i=null,r=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],o=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],s=[0,1,1,4];function l(e,t,n,i,r){if(!(n+24>t.length)){var a=u(t,n);if(a&&n+a.frameLength<=t.length){var o=i+r*(9e4*a.samplesPerFrame/a.sampleRate),s={unit:t.subarray(n,n+a.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(s),{sample:s,length:a.frameLength,missing:0}}}}function u(e,t){var n=e[t+1]>>3&3,l=e[t+1]>>1&3,u=e[t+2]>>4&15,c=e[t+2]>>2&3;if(1!==n&&0!==u&&15!==u&&3!==c){var d=e[t+2]>>1&1,h=e[t+3]>>6,p=1e3*r[14*(3===n?3-l:3===l?3:4)+u-1],f=a[3*(3===n?0:2===n?1:2)+c],g=3===h?1:2,m=o[n][l],v=s[l],y=8*m*v,b=Math.floor(m*p/f+d)*v;if(null===i){var E=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);i=E?parseInt(E[1]):0}return!!i&&i<=87&&2===l&&p>=224e3&&0===h&&(e[t+3]=128|e[t+3]),{sampleRate:f,channelCount:g,frameLength:b,samplesPerFrame:y}}}function c(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])}function d(e,t){return t+1<e.length&&c(e,t)}function h(e,t){return c(e,t)&&4<=e.length-t}function p(e,t){if(t+1<e.length&&c(e,t)){var n=u(e,t),i=4;null!=n&&n.frameLength&&(i=n.frameLength);var r=t+i;return r===e.length||d(e,r)}return!1}},"./src/demux/sample-aes.ts":
/*!*********************************!*\
    !*** ./src/demux/sample-aes.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),r=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts");const a=function(){function e(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new i.default(t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)},t.decryptAacSample=function(e,t,n){var i=this,r=e[t].unit;if(!(r.length<=16)){var a=r.subarray(16,r.length-r.length%16),o=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(o).then((function(a){var o=new Uint8Array(a);r.set(o,16),i.decrypter.isSync()||i.decryptAacSamples(e,t+1,n)}))}},t.decryptAacSamples=function(e,t,n){for(;;t++){if(t>=e.length)return void n();if(!(e[t].unit.length<32||(this.decryptAacSample(e,t,n),this.decrypter.isSync())))return}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,n=new Int8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)n.set(e.subarray(r,r+16),i);return n},t.getAvcDecryptedUnit=function(e,t){for(var n=new Uint8Array(t),i=0,r=32;r<e.length-16;r+=160,i+=16)e.set(n.subarray(i,i+16),r);return e},t.decryptAvcSample=function(e,t,n,i,a){var o=this,s=(0,r.discardEPB)(a.data),l=this.getAvcEncryptedData(s);this.decryptBuffer(l.buffer).then((function(r){a.data=o.getAvcDecryptedUnit(s,r),o.decrypter.isSync()||o.decryptAvcSamples(e,t,n+1,i)}))},t.decryptAvcSamples=function(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length)return void i();for(var r=e[t].units;!(n>=r.length);n++){var a=r[n];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(e,t,n,i,a),this.decrypter.isSync())))return}}},e}()},"./src/demux/transmuxer-interface.ts":
/*!*******************************************!*\
    !*** ./src/demux/transmuxer-interface.ts ***!
    \*******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=n(/*! ./webworkify-webpack */"./src/demux/webworkify-webpack.js"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../demux/transmuxer */"./src/demux/transmuxer.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../errors */"./src/errors.ts"),l=n(/*! ../utils/mediasource-helper */"./src/utils/mediasource-helper.ts"),u=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),c=(0,l.getMediaSource)()||{isTypeSupported:function(){return!1}},d=function(){function e(e,t,n,l){var d=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var h=e.config;this.hls=e,this.id=t,this.useWorker=!!h.enableWorker,this.onTransmuxComplete=n,this.onFlush=l;var p=function(e,t){(t=t||{}).frag=d.frag,t.id=d.id,d.hls.trigger(e,t)};this.observer=new u.EventEmitter,this.observer.on(r.Events.FRAG_DECRYPTED,p),this.observer.on(r.Events.ERROR,p);var f={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(this.useWorker&&"undefined"!=typeof Worker){var m;o.logger.log("demuxing in webworker");try{m=this.worker=(0,i.default)(/*! ../demux/transmuxer-worker.ts */"./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),m.addEventListener("message",this.onwmsg),m.onerror=function(e){d.useWorker=!1,o.logger.warn("Exception in webworker, fallback to inline"),d.hls.trigger(r.Events.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(e.message+"  ("+e.filename+":"+e.lineno+")")})},m.postMessage({cmd:"init",typeSupported:f,vendor:g,id:t,config:JSON.stringify(h)})}catch(e){o.logger.warn("Error in worker:",e),o.logger.error("Error while initializing DemuxerWorker, fallback to inline"),m&&self.URL.revokeObjectURL(m.objectURL),this.transmuxer=new a.default(this.observer,f,h,g,t),this.worker=null}}else this.transmuxer=new a.default(this.observer,f,h,g,t)}var t=e.prototype;return t.destroy=function(){var e=this.worker;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.worker=null,this.onwmsg=void 0;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var n=this.observer;n&&n.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},t.push=function(e,t,n,i,r,s,l,u,c,d){var h,p,f=this;c.transmuxing.start=self.performance.now();var g=this.transmuxer,m=this.worker,v=s?s.start:r.start,y=r.decryptdata,b=this.frag,E=!(b&&r.cc===b.cc),T=!(b&&c.level===b.level),A=b?c.sn-b.sn:-1,k=this.part?c.part-this.part.index:-1,_=0===A&&c.id>1&&c.id===(null==b?void 0:b.stats.chunkCount),S=!T&&(1===A||0===A&&(1===k||_&&k<=0)),w=self.performance.now();(T||A||0===r.stats.parsing.start)&&(r.stats.parsing.start=w),!s||!k&&S||(s.stats.parsing.start=w);var C=!(b&&(null===(h=r.initSegment)||void 0===h?void 0:h.url)===(null===(p=b.initSegment)||void 0===p?void 0:p.url)),I=new a.TransmuxState(E,S,u,T,v,C);if(!S||E||C){o.logger.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+"\n        discontinuity: "+E+"\n        trackSwitch: "+T+"\n        contiguous: "+S+"\n        accurateTimeOffset: "+u+"\n        timeOffset: "+v+"\n        initSegmentChange: "+C);var D=new a.TransmuxConfig(n,i,t,l,d);this.configureTransmuxer(D)}if(this.frag=r,this.part=s,m)m.postMessage({cmd:"demux",data:e,decryptdata:y,chunkMeta:c,state:I},e instanceof ArrayBuffer?[e]:[]);else if(g){var R=g.push(e,y,c,I);(0,a.isPromise)(R)?(g.async=!0,R.then((function(e){f.handleTransmuxComplete(e)})).catch((function(e){f.transmuxerError(e,c,"transmuxer-interface push error")}))):(g.async=!1,this.handleTransmuxComplete(R))}},t.flush=function(e){var t=this;e.transmuxing.start=self.performance.now();var n=this.transmuxer,i=this.worker;if(i)i.postMessage({cmd:"flush",chunkMeta:e});else if(n){var r=n.flush(e);(0,a.isPromise)(r)||n.async?((0,a.isPromise)(r)||(r=Promise.resolve(r)),r.then((function(n){t.handleFlushResult(n,e)})).catch((function(n){t.transmuxerError(n,e,"transmuxer-interface flush error")}))):this.handleFlushResult(r,e)}},t.transmuxerError=function(e,t,n){this.hls&&this.hls.trigger(r.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:t,fatal:!1,error:e,err:e,reason:n})},t.handleFlushResult=function(e,t){var n=this;e.forEach((function(e){n.handleTransmuxComplete(e)})),this.onFlush(t)},t.onWorkerMessage=function(e){var t=e.data,n=this.hls;switch(t.event){case"init":self.URL.revokeObjectURL(this.worker.objectURL);break;case"transmuxComplete":this.handleTransmuxComplete(t.data);break;case"flush":this.onFlush(t.data);break;case"workerLog":o.logger[t.data.logType]&&o.logger[t.data.logType](t.data.message);break;default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data)}},t.configureTransmuxer=function(e){var t=this.worker,n=this.transmuxer;t?t.postMessage({cmd:"configure",config:e}):n&&n.configure(e)},t.handleTransmuxComplete=function(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)},e}()},"./src/demux/transmuxer-worker.ts":
/*!****************************************!*\
    !*** ./src/demux/transmuxer-worker.ts ***!
    \****************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(/*! ../demux/transmuxer */"./src/demux/transmuxer.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../utils/logger */"./src/utils/logger.ts"),o=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),s=n(/*! ../errors */"./src/errors.ts");function l(e){var t=new o.EventEmitter,n=function(t,n){e.postMessage({event:t,data:n})};t.on(r.Events.FRAG_DECRYPTED,n),t.on(r.Events.ERROR,n),e.addEventListener("message",(function(o){var l=o.data;switch(l.cmd){case"init":var c=JSON.parse(l.config);e.transmuxer=new i.default(t,l.typeSupported,c,l.vendor,l.id),(0,a.enableLogs)(c.debug,l.id),function(){var e=function(e){a.logger[e]=function(t){n("workerLog",{logType:e,message:t})}};for(var t in a.logger)e(t)}(),n("init",null);break;case"configure":e.transmuxer.configure(l.config);break;case"demux":var h=e.transmuxer.push(l.data,l.decryptdata,l.chunkMeta,l.state);(0,i.isPromise)(h)?(e.transmuxer.async=!0,h.then((function(t){u(e,t)})).catch((function(e){n(r.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:l.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker push error"})}))):(e.transmuxer.async=!1,u(e,h));break;case"flush":var p=l.chunkMeta,f=e.transmuxer.flush(p);(0,i.isPromise)(f)||e.transmuxer.async?((0,i.isPromise)(f)||(f=Promise.resolve(f)),f.then((function(t){d(e,t,p)})).catch((function(e){n(r.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:l.chunkMeta,fatal:!1,error:e,err:e,reason:"transmuxer-worker flush error"})}))):d(e,f,p)}}))}function u(e,t){if(!((n=t.remuxResult).audio||n.video||n.text||n.id3||n.initSegment))return!1;var n,i=[],r=t.remuxResult,a=r.audio,o=r.video;return a&&c(i,a),o&&c(i,o),e.postMessage({event:"transmuxComplete",data:t},i),!0}function c(e,t){t.data1&&e.push(t.data1.buffer),t.data2&&e.push(t.data2.buffer)}function d(e,t,n){t.reduce((function(t,n){return u(e,n)||t}),!1)||e.postMessage({event:"transmuxComplete",data:t[0]}),e.postMessage({event:"flush",data:n})}},"./src/demux/transmuxer.ts":
/*!*********************************!*\
    !*** ./src/demux/transmuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{TransmuxConfig:()=>y,TransmuxState:()=>b,default:()=>g,isPromise:()=>v});var i,r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),o=n(/*! ../crypt/decrypter */"./src/crypt/decrypter.ts"),s=n(/*! ../demux/aacdemuxer */"./src/demux/aacdemuxer.ts"),l=n(/*! ../demux/mp4demuxer */"./src/demux/mp4demuxer.ts"),u=n(/*! ../demux/tsdemuxer */"./src/demux/tsdemuxer.ts"),c=n(/*! ../demux/mp3demuxer */"./src/demux/mp3demuxer.ts"),d=n(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.ts"),h=n(/*! ../remux/passthrough-remuxer */"./src/remux/passthrough-remuxer.ts"),p=n(/*! ../utils/logger */"./src/utils/logger.ts");try{i=self.performance.now.bind(self.performance)}catch(e){p.logger.debug("Unable to use Performance API on this environment"),i=self.Date.now}var f=[{demux:l.default,remux:h.default},{demux:u.default,remux:d.default},{demux:s.default,remux:d.default},{demux:c.default,remux:d.default}],g=function(){function e(e,t,n,i,r){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=r}var t=e.prototype;return t.configure=function(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,n,r){var a=this,o=n.transmuxing;o.executeStart=i();var s=new Uint8Array(e),l=this.currentTransmuxState,u=this.transmuxConfig;r&&(this.currentTransmuxState=r);var c=r||l,d=c.contiguous,h=c.discontinuity,p=c.trackSwitch,f=c.accurateTimeOffset,g=c.timeOffset,v=c.initSegmentChange,y=u.audioCodec,b=u.videoCodec,E=u.defaultInitPts,T=u.duration,A=u.initSegmentData,k=function(e,t){var n=null;return e.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(n=t),n}(s,t);if(k&&"AES-128"===k.method){var _=this.getDecrypter();if(!_.isSync())return this.decryptionPromise=_.webCryptoDecrypt(s,k.key.buffer,k.iv.buffer).then((function(e){var t=a.push(e,null,n);return a.decryptionPromise=null,t})),this.decryptionPromise;var S=_.softwareDecrypt(s,k.key.buffer,k.iv.buffer);if(n.part>-1&&(S=_.flush()),!S)return o.executeEnd=i(),m(n);s=new Uint8Array(S)}var w=this.needsProbing(h,p);w&&this.configureTransmuxer(s),(h||p||v||w)&&this.resetInitSegment(A,y,b,T,t),(h||v||w)&&this.resetInitialTimestamp(E),d||this.resetContiguity();var C=this.transmux(s,k,g,f,n),I=this.currentTransmuxState;return I.contiguous=!0,I.discontinuity=!1,I.trackSwitch=!1,o.executeEnd=i(),C},t.flush=function(e){var t=this,n=e.transmuxing;n.executeStart=i();var o=this.decrypter,s=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then((function(){return t.flush(e)}));var u=[],c=s.timeOffset;if(o){var d=o.flush();d&&u.push(this.push(d,null,e))}var h=this.demuxer,p=this.remuxer;if(!h||!p)return this.observer.emit(r.Events.ERROR,r.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),n.executeEnd=i(),[m(e)];var f=h.flush(c);return v(f)?f.then((function(n){return t.flushRemux(u,n,e),u})):(this.flushRemux(u,f,e),u)},t.flushRemux=function(e,t,n){var r=t.audioTrack,a=t.videoTrack,o=t.id3Track,s=t.textTrack,l=this.currentTransmuxState,u=l.accurateTimeOffset,c=l.timeOffset;p.logger.log("[transmuxer.ts]: Flushed fragment "+n.sn+(n.part>-1?" p: "+n.part:"")+" of level "+n.level);var d=this.remuxer.remux(r,a,o,s,c,u,!0,this.id);e.push({remuxResult:d,chunkMeta:n}),n.transmuxing.executeEnd=i()},t.resetInitialTimestamp=function(e){var t=this.demuxer,n=this.remuxer;t&&n&&(t.resetTimeStamp(e),n.resetTimeStamp(e))},t.resetContiguity=function(){var e=this.demuxer,t=this.remuxer;e&&t&&(e.resetContiguity(),t.resetNextTimestamp())},t.resetInitSegment=function(e,t,n,i,r){var a=this.demuxer,o=this.remuxer;a&&o&&(a.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,r))},t.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},t.transmux=function(e,t,n,i,r){return t&&"SAMPLE-AES"===t.method?this.transmuxSampleAes(e,t,n,i,r):this.transmuxUnencrypted(e,n,i,r)},t.transmuxUnencrypted=function(e,t,n,i){var r=this.demuxer.demux(e,t,!1,!this.config.progressive),a=r.audioTrack,o=r.videoTrack,s=r.id3Track,l=r.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,l,t,n,!1,this.id),chunkMeta:i}},t.transmuxSampleAes=function(e,t,n,i,r){var a=this;return this.demuxer.demuxSampleAes(e,t,n).then((function(e){return{remuxResult:a.remuxer.remux(e.audioTrack,e.videoTrack,e.id3Track,e.textTrack,n,i,!1,a.id),chunkMeta:r}}))},t.configureTransmuxer=function(e){for(var t,n=this.config,i=this.observer,r=this.typeSupported,a=this.vendor,o=0,s=f.length;o<s;o++)if(f[o].demux.probe(e)){t=f[o];break}t||(p.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),t={demux:l.default,remux:h.default});var u=this.demuxer,c=this.remuxer,d=t.remux,g=t.demux;c&&c instanceof d||(this.remuxer=new d(i,n,r,a)),u&&u instanceof g||(this.demuxer=new g(i,n,r),this.probe=g.probe)},t.needsProbing=function(e,t){return!this.demuxer||!this.remuxer||e||t},t.getDecrypter=function(){var e=this.decrypter;return e||(e=this.decrypter=new o.default(this.config)),e},e}(),m=function(e){return{remuxResult:{},chunkMeta:e}};function v(e){return"then"in e&&e.then instanceof Function}var y=function(e,t,n,i,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=r},b=function(e,t,n,i,r,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=r,this.initSegmentChange=a}},"./src/demux/tsdemuxer.ts":
/*!********************************!*\
    !*** ./src/demux/tsdemuxer.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>T});var i=n(/*! ./adts */"./src/demux/adts.ts"),r=n(/*! ./mpegaudio */"./src/demux/mpegaudio.ts"),a=n(/*! ./exp-golomb */"./src/demux/exp-golomb.ts"),o=n(/*! ./sample-aes */"./src/demux/sample-aes.ts"),s=n(/*! ../events */"./src/events.ts"),l=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),u=n(/*! ../utils/logger */"./src/utils/logger.ts"),c=n(/*! ../errors */"./src/errors.ts"),d=n(/*! ../types/demuxer */"./src/types/demuxer.ts");function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}var p=188,f=function(){function e(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=t,this.typeSupported=n}e.probe=function(t){var n=e.syncOffset(t);return n>0&&u.logger.warn("MPEG2-TS detected but first sync word found @ offset "+n),-1!==n},e.syncOffset=function(e){for(var t=e.length,n=Math.min(940,e.length-p)+1,i=0;i<n;){for(var r=!1,a=i;a<t&&71===e[a];a+=p)if(r||0!==m(e,a)||(r=!0),r&&a+p>n)return i;i++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:l.RemuxerTrackIdConfig[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===e?t:void 0}};var t=e.prototype;return t.resetInitSegment=function(t,n,i,r){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video"),this._audioTrack=e.createTrack("audio",r),this._id3Track=e.createTrack("id3"),this._txtTrack=e.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=i,this._duration=r},t.resetTimeStamp=function(){},t.resetContiguity=function(){var e=this._audioTrack,t=this._avcTrack,n=this._id3Track;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},t.demux=function(t,n,i,r){var a;void 0===i&&(i=!1),void 0===r&&(r=!1),i||(this.sampleAes=null);var o=this._avcTrack,d=this._audioTrack,h=this._id3Track,f=this._txtTrack,g=o.pid,E=o.pesData,T=d.pid,A=h.pid,k=d.pesData,_=h.pesData,S=null,w=this.pmtParsed,C=this._pmtId,I=t.length;if(this.remainderData&&(I=(t=(0,l.appendUint8Array)(this.remainderData,t)).length,this.remainderData=null),I<p&&!r)return this.remainderData=t,{audioTrack:d,videoTrack:o,id3Track:h,textTrack:f};var D=Math.max(0,e.syncOffset(t));(I-=(I-D)%p)<t.byteLength&&!r&&(this.remainderData=new Uint8Array(t.buffer,I,t.buffer.byteLength-I));for(var R=0,x=D;x<I;x+=p)if(71===t[x]){var L=!!(64&t[x+1]),P=m(t,x),O=void 0;if((48&t[x+3])>>4>1){if((O=x+5+t[x+4])===x+p)continue}else O=x+4;switch(P){case g:L&&(E&&(a=b(E))&&this.parseAVCPES(o,f,a,!1),E={data:[],size:0}),E&&(E.data.push(t.subarray(O,x+p)),E.size+=x+p-O);break;case T:if(L){if(k&&(a=b(k)))switch(d.segmentCodec){case"aac":this.parseAACPES(d,a);break;case"mp3":this.parseMPEGPES(d,a)}k={data:[],size:0}}k&&(k.data.push(t.subarray(O,x+p)),k.size+=x+p-O);break;case A:L&&(_&&(a=b(_))&&this.parseID3PES(h,a),_={data:[],size:0}),_&&(_.data.push(t.subarray(O,x+p)),_.size+=x+p-O);break;case 0:L&&(O+=t[O]+1),C=this._pmtId=v(t,O);break;case C:L&&(O+=t[O]+1);var M=y(t,O,this.typeSupported,i);(g=M.avc)>0&&(o.pid=g),(T=M.audio)>0&&(d.pid=T,d.segmentCodec=M.segmentCodec),(A=M.id3)>0&&(h.pid=A),null===S||w||(u.logger.warn("MPEG-TS PMT found at "+x+" after unknown PID '"+S+"'. Backtracking to sync byte @"+D+" to parse all TS packets."),S=null,x=D-188),w=this.pmtParsed=!0;break;case 17:case 8191:break;default:S=P}}else R++;R>0&&this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+R+" TS packet/s that do not start with 0x47"}),o.pesData=E,d.pesData=k,h.pesData=_;var N={audioTrack:d,videoTrack:o,id3Track:h,textTrack:f};return r&&this.extractRemainingSamples(N),N},t.flush=function(){var e,t=this.remainderData;return this.remainderData=null,e=t?this.demux(t,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(e),this.sampleAes?this.decrypt(e,this.sampleAes):e},t.extractRemainingSamples=function(e){var t,n=e.audioTrack,i=e.videoTrack,r=e.id3Track,a=e.textTrack,o=i.pesData,s=n.pesData,l=r.pesData;if(o&&(t=b(o))?(this.parseAVCPES(i,a,t,!0),i.pesData=null):i.pesData=o,s&&(t=b(s))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,t);break;case"mp3":this.parseMPEGPES(n,t)}n.pesData=null}else null!=s&&s.size&&u.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=s;l&&(t=b(l))?(this.parseID3PES(r,t),r.pesData=null):r.pesData=l},t.demuxSampleAes=function(e,t,n){var i=this.demux(e,n,!0,!this.config.progressive),r=this.sampleAes=new o.default(this.observer,this.config,t);return this.decrypt(i,r)},t.decrypt=function(e,t){return new Promise((function(n){var i=e.audioTrack,r=e.videoTrack;i.samples&&"aac"===i.segmentCodec?t.decryptAacSamples(i.samples,0,(function(){r.samples?t.decryptAvcSamples(r.samples,0,0,(function(){n(e)})):n(e)})):r.samples&&t.decryptAvcSamples(r.samples,0,0,(function(){n(e)}))}))},t.destroy=function(){this._duration=0},t.parseAVCPES=function(e,t,n,i){var r,o=this,s=this.parseAVCNALu(e,n.data),u=this.avcSample,c=!1;n.data=null,u&&s.length&&!e.audFound&&(E(u,e),u=this.avcSample=g(!1,n.pts,n.dts,"")),s.forEach((function(i){switch(i.type){case 1:r=!0,u||(u=o.avcSample=g(!0,n.pts,n.dts,"")),u.frame=!0;var s=i.data;if(c&&s.length>4){var d=new a.default(s).readSliceType();2!==d&&4!==d&&7!==d&&9!==d||(u.key=!0)}break;case 5:r=!0,u||(u=o.avcSample=g(!0,n.pts,n.dts,"")),u.key=!0,u.frame=!0;break;case 6:r=!0,(0,l.parseSEIMessageFromNALu)(i.data,1,n.pts,t.samples);break;case 7:if(r=!0,c=!0,!e.sps){var h=new a.default(i.data).readSPS();e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.sps=[i.data],e.duration=o._duration;for(var p=i.data.subarray(1,4),f="avc1.",m=0;m<3;m++){var v=p[m].toString(16);v.length<2&&(v="0"+v),f+=v}e.codec=f}break;case 8:r=!0,e.pps||(e.pps=[i.data]);break;case 9:r=!1,e.audFound=!0,u&&E(u,e),u=o.avcSample=g(!1,n.pts,n.dts,"");break;case 12:r=!0;break;default:r=!1,u&&(u.debug+="unknown NAL "+i.type+" ")}u&&r&&u.units.push(i)})),i&&u&&(E(u,e),this.avcSample=null)},t.getLastNalUnit=function(e){var t,n,i=this.avcSample;if(i&&0!==i.units.length||(i=e[e.length-1]),null!==(t=i)&&void 0!==t&&t.units){var r=i.units;n=r[r.length-1]}return n},t.parseAVCNALu=function(e,t){var n,i,r=t.byteLength,a=e.naluState||0,o=a,s=[],l=0,u=-1,c=0;for(-1===a&&(u=0,c=31&t[0],a=0,l=1);l<r;)if(n=t[l++],a)if(1!==a)if(n)if(1===n){if(u>=0){var d={data:t.subarray(u,l-a-1),type:c};s.push(d)}else{var h=this.getLastNalUnit(e.samples);if(h&&(o&&l<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),(i=l-a-1)>0)){var p=new Uint8Array(h.data.byteLength+i);p.set(h.data,0),p.set(t.subarray(0,i),h.data.byteLength),h.data=p,h.state=0}}l<r?(u=l,c=31&t[l],a=0):a=-1}else a=0;else a=3;else a=n?0:2;else a=n?0:1;if(u>=0&&a>=0){var f={data:t.subarray(u,r),type:c,state:a};s.push(f)}if(0===s.length){var g=this.getLastNalUnit(e.samples);if(g){var m=new Uint8Array(g.data.byteLength+t.byteLength);m.set(g.data,0),m.set(t,g.data.byteLength),g.data=m}}return e.naluState=a,s},t.parseAACPES=function(e,t){var n,r,a,o,l,d=0,h=this.aacOverFlow,p=t.data;if(h){this.aacOverFlow=null;var f=h.missing,g=h.sample.unit.byteLength;if(-1===f){var m=new Uint8Array(g+p.byteLength);m.set(h.sample.unit,0),m.set(p,g),p=m}else{var v=g-f;h.sample.unit.set(p.subarray(0,f),v),e.samples.push(h.sample),d=h.missing}}for(n=d,r=p.length;n<r-1&&!i.isHeader(p,n);n++);if(n===d||(n<r-1?(a="AAC PES did not start with ADTS header,offset:"+n,o=!1):(a="no ADTS header found in AAC PES",o=!0),u.logger.warn("parsing error:"+a),this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:o,reason:a}),!o)){if(i.initTrackConfig(e,this.observer,p,n,this.audioCodec),void 0!==t.pts)l=t.pts;else{if(!h)return void u.logger.warn("[tsdemuxer]: AAC PES unknown PTS");var y=i.getFrameDuration(e.samplerate);l=h.sample.pts+y}for(var b,E=0;n<r;){if(n+=(b=i.appendFrame(e,p,n,l,E)).length,b.missing){this.aacOverFlow=b;break}for(E++;n<r-1&&!i.isHeader(p,n);n++);}}},t.parseMPEGPES=function(e,t){var n=t.data,i=n.length,a=0,o=0,s=t.pts;if(void 0!==s)for(;o<i;)if(r.isHeader(n,o)){var l=r.appendFrame(e,n,o,s,a);if(!l)break;o+=l.length,a++}else o++;else u.logger.warn("[tsdemuxer]: MPEG PES unknown PTS")},t.parseID3PES=function(e,t){if(void 0!==t.pts){var n=h({},t,{type:this._avcTrack?d.MetadataSchema.emsg:d.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}else u.logger.warn("[tsdemuxer]: ID3 PES unknown PTS")},e}();function g(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}function m(e,t){return((31&e[t+1])<<8)+e[t+2]}function v(e,t){return(31&e[t+10])<<8|e[t+11]}function y(e,t,n,i){var r={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=t+3+((15&e[t+1])<<8|e[t+2])-4;for(t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){var o=m(e,t);switch(e[t]){case 207:if(!i){u.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===r.audio&&(r.audio=o);break;case 21:-1===r.id3&&(r.id3=o);break;case 219:if(!i){u.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===r.avc&&(r.avc=o);break;case 3:case 4:!0!==n.mpeg&&!0!==n.mp3?u.logger.log("MPEG audio found, not supported in this browser"):-1===r.audio&&(r.audio=o,r.segmentCodec="mp3");break;case 36:u.logger.warn("Unsupported HEVC stream type found")}t+=5+((15&e[t+3])<<8|e[t+4])}return r}function b(e){var t,n,i,r,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&s.length>1;){var l=new Uint8Array(s[0].length+s[1].length);l.set(s[0]),l.set(s[1],s[0].length),s[0]=l,s.splice(1,1)}if(1===((t=s[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;var c=t[7];192&c&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&c?r-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>54e5&&(u.logger.warn(Math.round((r-a)/9e4)+"s delta between PTS and DTS, align them"),r=a):a=r);var d=(i=t[8])+9;if(e.size<=d)return null;e.size-=d;for(var h=new Uint8Array(e.size),p=0,f=s.length;p<f;p++){var g=(t=s[p]).byteLength;if(d){if(d>g){d-=g;continue}t=t.subarray(d),g-=d,d=0}h.set(t,o),o+=g}return n&&(n-=i+3),{data:h,pts:r,dts:a,len:n}}return null}function E(e,t){if(e.units.length&&e.frame){if(void 0===e.pts){var n=t.samples,i=n.length;if(!i)return void t.dropped++;var r=n[i-1];e.pts=r.pts,e.dts=r.dts}t.samples.push(e)}e.debug.length&&u.logger.log(e.pts+"/"+e.dts+":"+e.debug)}const T=f},"./src/demux/webworkify-webpack.js":
/*!*****************************************!*\
    !*** ./src/demux/webworkify-webpack.js ***!
    \*****************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var i=function(){var e=ENTRY_MODULE,t={},n=function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports};n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=n(ENTRY_MODULE);return i.default||i}.toString().split("ENTRY_MODULE"),r="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+r+").*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e){return!isNaN(1*e)}function l(e,t,i){var l={};l[i]=[];var u=t.toString().replace(/^"[^"]+"/,"function"),c=u.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||u.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!c)return l;for(var d,h=c[1],p=new RegExp("(\\\\n|\\W)"+o(h)+a,"g");d=p.exec(u);)"dll-reference"!==d[3]&&l[i].push(d[3]);for(p=new RegExp("\\("+o(h)+'\\("(dll-reference\\s('+r+'))"\\)\\)'+a,"g");d=p.exec(u);)e[d[2]]||(l[i].push(d[1]),e[d[2]]=n(d[1]).m),l[d[2]]=l[d[2]]||[],l[d[2]].push(d[4]);for(var f=Object.keys(l),g=0;g<f.length;g++)for(var m=0;m<l[f[g]].length;m++)s(l[f[g]][m])&&(l[f[g]][m]=1*l[f[g]][m]);return l}function u(e){return Object.keys(e).reduce((function(t,n){return t||e[n].length>0}),!1)}function c(e,t,n,r){var a=e[r].map((function(e){return'"'+e+'": '+t[r][e].toString().replace(/^"[^"]+"/,"function")})).join(",");return i[0]+"{"+a+"}"+i[1]+'"'+n+'"'+i[2]}function d(e,t){t=t||{};var i={main:n.m},r=t.all?{main:Object.keys(i.main)}:function(e,t){for(var n={main:[t]},i={main:[]},r={main:{}};u(n);)for(var a=Object.keys(n),o=0;o<a.length;o++){var s=a[o],c=n[s].pop();if(r[s]=r[s]||{},!r[s][c]&&e[s][c]){r[s][c]=!0,i[s]=i[s]||[],i[s].push(c);for(var d=l(e,e[s][c],s),h=Object.keys(d),p=0;p<h.length;p++)n[h[p]]=n[h[p]]||[],n[h[p]]=n[h[p]].concat(d[h[p]])}}return i}(i,e),a="";Object.keys(r).filter((function(e){return"main"!==e})).forEach((function(e){for(var t=0;r[e][t];)t++;r[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+c(r,i,t,modules)+")();\n"})),a=a+"new (("+c(r,i,e,"main")+")())(self);";var o=new window.Blob([a],{type:"text/javascript"}),s=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(o),d=new window.Worker(s);return d.objectURL=s,d}},"./src/errors.ts":
/*!***********************!*\
    !*** ./src/errors.ts ***!
    \***********************/(e,t,n)=>{var i,r;n.r(t),n.d(t,{ErrorDetails:()=>r,ErrorTypes:()=>i}),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(i||(i={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",e.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",e.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",e.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",e.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_EMPTY_ERROR="levelEmptyError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",e.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException",e.INTERNAL_ABORTED="aborted",e.UNKNOWN="unknown"}(r||(r={}))},"./src/events.ts":
/*!***********************!*\
    !*** ./src/events.ts ***!
    \***********************/(e,t,n)=>{var i;n.r(t),n.d(t,{Events:()=>i}),function(e){e.MEDIA_ATTACHING="hlsMediaAttaching",e.MEDIA_ATTACHED="hlsMediaAttached",e.MEDIA_DETACHING="hlsMediaDetaching",e.MEDIA_DETACHED="hlsMediaDetached",e.BUFFER_RESET="hlsBufferReset",e.BUFFER_CODECS="hlsBufferCodecs",e.BUFFER_CREATED="hlsBufferCreated",e.BUFFER_APPENDING="hlsBufferAppending",e.BUFFER_APPENDED="hlsBufferAppended",e.BUFFER_EOS="hlsBufferEos",e.BUFFER_FLUSHING="hlsBufferFlushing",e.BUFFER_FLUSHED="hlsBufferFlushed",e.MANIFEST_LOADING="hlsManifestLoading",e.MANIFEST_LOADED="hlsManifestLoaded",e.MANIFEST_PARSED="hlsManifestParsed",e.LEVEL_SWITCHING="hlsLevelSwitching",e.LEVEL_SWITCHED="hlsLevelSwitched",e.LEVEL_LOADING="hlsLevelLoading",e.LEVEL_LOADED="hlsLevelLoaded",e.LEVEL_UPDATED="hlsLevelUpdated",e.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",e.LEVELS_UPDATED="hlsLevelsUpdated",e.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",e.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",e.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",e.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",e.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",e.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",e.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",e.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",e.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",e.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",e.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",e.CUES_PARSED="hlsCuesParsed",e.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",e.INIT_PTS_FOUND="hlsInitPtsFound",e.FRAG_LOADING="hlsFragLoading",e.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",e.FRAG_LOADED="hlsFragLoaded",e.FRAG_DECRYPTED="hlsFragDecrypted",e.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",e.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",e.FRAG_PARSING_METADATA="hlsFragParsingMetadata",e.FRAG_PARSED="hlsFragParsed",e.FRAG_BUFFERED="hlsFragBuffered",e.FRAG_CHANGED="hlsFragChanged",e.FPS_DROP="hlsFpsDrop",e.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",e.ERROR="hlsError",e.DESTROYING="hlsDestroying",e.KEY_LOADING="hlsKeyLoading",e.KEY_LOADED="hlsKeyLoaded",e.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",e.BACK_BUFFER_REACHED="hlsBackBufferReached"}(i||(i={}))},"./src/hls.ts":
/*!********************!*\
    !*** ./src/hls.ts ***!
    \********************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var i=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),r=n(/*! ./loader/playlist-loader */"./src/loader/playlist-loader.ts"),a=n(/*! ./controller/id3-track-controller */"./src/controller/id3-track-controller.ts"),o=n(/*! ./controller/latency-controller */"./src/controller/latency-controller.ts"),s=n(/*! ./controller/level-controller */"./src/controller/level-controller.ts"),l=n(/*! ./controller/fragment-tracker */"./src/controller/fragment-tracker.ts"),u=n(/*! ./loader/key-loader */"./src/loader/key-loader.ts"),c=n(/*! ./controller/stream-controller */"./src/controller/stream-controller.ts"),d=n(/*! ./is-supported */"./src/is-supported.ts"),h=n(/*! ./utils/logger */"./src/utils/logger.ts"),p=n(/*! ./config */"./src/config.ts"),f=n(/*! eventemitter3 */"./node_modules/eventemitter3/index.js"),g=n(/*! ./events */"./src/events.ts"),m=n(/*! ./errors */"./src/errors.ts"),v=n(/*! ./types/level */"./src/types/level.ts");function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var b=function(){function e(t){void 0===t&&(t={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new f.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var n=this.config=(0,p.mergeConfig)(e.DefaultConfig,t);this.userConfig=t,(0,h.enableLogs)(n.debug,"Hls instance"),this._autoLevelCapping=-1,n.progressive&&(0,p.enableStreamingMode)(n);var i=n.abrController,d=n.bufferController,g=n.capLevelController,m=n.fpsController,v=this.abrController=new i(this),y=this.bufferController=new d(this),b=this.capLevelController=new g(this),E=new m(this),T=new r.default(this),A=new a.default(this),k=this.levelController=new s.default(this),_=new l.FragmentTracker(this),S=new u.default(this.config),w=this.streamController=new c.default(this,_,S);b.setStreamController(w),E.setStreamController(w);var C=[T,k,w];this.networkControllers=C;var I=[v,y,b,E,A,_];this.audioTrackController=this.createController(n.audioTrackController,C);var D=n.audioStreamController;D&&C.push(new D(this,_,S)),this.subtitleTrackController=this.createController(n.subtitleTrackController,C);var R=n.subtitleStreamController;R&&C.push(new R(this,_,S)),this.createController(n.timelineController,I),S.emeController=this.emeController=this.createController(n.emeController,I),this.cmcdController=this.createController(n.cmcdController,I),this.latencyController=this.createController(o.default,I),this.coreComponents=I}e.isSupported=function(){return(0,d.isSupported)()};var t,n,b,E=e.prototype;return E.createController=function(e,t){if(e){var n=new e(this);return t&&t.push(n),n}return null},E.on=function(e,t,n){void 0===n&&(n=this),this._emitter.on(e,t,n)},E.once=function(e,t,n){void 0===n&&(n=this),this._emitter.once(e,t,n)},E.removeAllListeners=function(e){this._emitter.removeAllListeners(e)},E.off=function(e,t,n,i){void 0===n&&(n=this),this._emitter.off(e,t,n,i)},E.listeners=function(e){return this._emitter.listeners(e)},E.emit=function(e,t,n){return this._emitter.emit(e,t,n)},E.trigger=function(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(t){h.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.trigger(g.Events.ERROR,{type:m.ErrorTypes.OTHER_ERROR,details:m.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,error:t})}return!1},E.listenerCount=function(e){return this._emitter.listenerCount(e)},E.destroy=function(){h.logger.log("destroy"),this.trigger(g.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(e){return e.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(e){return e.destroy()})),this.coreComponents.length=0},E.attachMedia=function(e){h.logger.log("attachMedia"),this._media=e,this.trigger(g.Events.MEDIA_ATTACHING,{media:e})},E.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(g.Events.MEDIA_DETACHING,void 0),this._media=null},E.loadSource=function(e){this.stopLoad();var t=this.media,n=this.url,r=this.url=i.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});h.logger.log("loadSource:"+r),t&&n&&n!==r&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(t)),this.trigger(g.Events.MANIFEST_LOADING,{url:e})},E.startLoad=function(e){void 0===e&&(e=-1),h.logger.log("startLoad("+e+")"),this.networkControllers.forEach((function(t){t.startLoad(e)}))},E.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach((function(e){e.stopLoad()}))},E.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},E.recoverMediaError=function(){h.logger.log("recoverMediaError");var e=this._media;this.detachMedia(),e&&this.attachMedia(e)},E.removeLevel=function(e,t){void 0===t&&(t=0),this.levelController.removeLevel(e,t)},t=e,n=[{key:"levels",get:function(){var e=this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){h.logger.log("set currentLevel:"+e),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){h.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){h.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){h.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){h.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){this._autoLevelCapping!==e&&(h.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e)}},{key:"bandwidthEstimate",get:function(){var e=this.abrController.bwEstimator;return e?e.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(e){v.HdcpLevels.indexOf(e)>-1&&(this._maxHdcpLevel=e)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var e=this.levels,t=this.config.minAutoBitrate;if(!e)return 0;for(var n=e.length,i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}},{key:"maxAutoLevel",get:function(){var e,t=this.levels,n=this.autoLevelCapping,i=this.maxHdcpLevel;if(e=-1===n&&t&&t.length?t.length-1:n,i)for(var r=e;r--;){var a=t[r].attrs["HDCP-LEVEL"];if(a&&a<=i)return r}return e}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],b=[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return g.Events}},{key:"ErrorTypes",get:function(){return m.ErrorTypes}},{key:"ErrorDetails",get:function(){return m.ErrorDetails}},{key:"DefaultConfig",get:function(){return e.defaultConfig?e.defaultConfig:p.hlsDefaultConfig},set:function(t){e.defaultConfig=t}}],n&&y(t.prototype,n),b&&y(t,b),Object.defineProperty(t,"prototype",{writable:!1}),e}();b.defaultConfig=void 0},"./src/is-supported.ts":
/*!*****************************!*\
    !*** ./src/is-supported.ts ***!
    \*****************************/(e,t,n)=>{n.r(t),n.d(t,{changeTypeSupported:()=>o,isSupported:()=>a});var i=n(/*! ./utils/mediasource-helper */"./src/utils/mediasource-helper.ts");function r(){return self.SourceBuffer||self.WebKitSourceBuffer}function a(){var e=(0,i.getMediaSource)();if(!e)return!1;var t=r(),n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),a=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!a}function o(){var e,t=r();return"function"==typeof(null==t||null===(e=t.prototype)||void 0===e?void 0:e.changeType)}},"./src/loader/date-range.ts":
/*!**********************************!*\
    !*** ./src/loader/date-range.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{DateRange:()=>u,DateRangeAttribute:()=>i});var i,r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),a=n(/*! ../utils/attr-list */"./src/utils/attr-list.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts");function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}!function(e){e.ID="ID",e.CLASS="CLASS",e.START_DATE="START-DATE",e.DURATION="DURATION",e.END_DATE="END-DATE",e.END_ON_NEXT="END-ON-NEXT",e.PLANNED_DURATION="PLANNED-DURATION",e.SCTE35_OUT="SCTE35-OUT",e.SCTE35_IN="SCTE35-IN"}(i||(i={}));var u=function(){function e(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){var n=t.attr;for(var l in n)if(Object.prototype.hasOwnProperty.call(e,l)&&e[l]!==n[l]){o.logger.warn('DATERANGE tag attribute: "'+l+'" does not match for tags with ID: "'+e.ID+'"'),this._badValueForSameId=l;break}e=s(new a.AttrList({}),n,e)}if(this.attr=e,this._startDate=new Date(e[i.START_DATE]),i.END_DATE in this.attr){var u=new Date(this.attr[i.END_DATE]);(0,r.isFiniteNumber)(u.getTime())&&(this._endDate=u)}}var t,n,u;return t=e,(n=[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var e=this.duration;return null!==e?new Date(this._startDate.getTime()+1e3*e):null}},{key:"duration",get:function(){if(i.DURATION in this.attr){var e=this.attr.decimalFloatingPoint(i.DURATION);if((0,r.isFiniteNumber)(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return i.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(i.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(i.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,r.isFiniteNumber)(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}])&&l(t.prototype,n),u&&l(t,u),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/loader/fragment-loader.ts":
/*!***************************************!*\
    !*** ./src/loader/fragment-loader.ts ***!
    \***************************************/(e,t,n)=>{n.r(t),n.d(t,{LoadError:()=>p,default:()=>d});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../errors */"./src/errors.ts");function a(e){var t="function"==typeof Map?new Map:void 0;return a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return o(e,arguments,u(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),l(i,e)},a(e)}function o(e,t,n){return o=s()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&l(r,n.prototype),r},o.apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var c=Math.pow(2,17),d=function(){function e(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}var t=e.prototype;return t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.abort=function(){this.loader&&this.loader.abort()},t.load=function(e,t){var n=this,i=e.url;if(!i)return Promise.reject(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(i,l){n.loader&&n.loader.destroy();var u=n.loader=e.loader=o?new o(a):new s(a),d=h(e),f={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:"initSegment"===e.sn?1/0:c};e.stats=u.stats,u.load(d,f,{onSuccess:function(t,r,a,o){n.resetLoader(e,u);var s=t.data;a.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),i({frag:e,part:null,payload:s,networkDetails:o})},onError:function(t,i,a){n.resetLoader(e,u),l(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:a}))},onAbort:function(t,i,a){n.resetLoader(e,u),l(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:a}))},onTimeout:function(t,i,a){n.resetLoader(e,u),l(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,networkDetails:a}))},onProgress:function(n,i,r,a){t&&t({frag:e,part:null,payload:r,networkDetails:a})}})}))},t.loadPart=function(e,t,n){var i=this;this.abort();var a=this.config,o=a.fLoader,s=a.loader;return new Promise((function(l,u){i.loader&&i.loader.destroy();var d=i.loader=e.loader=o?new o(a):new s(a),f=h(e,t),g={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:c};t.stats=d.stats,d.load(f,g,{onSuccess:function(r,a,o,s){i.resetLoader(e,d),i.updateStatsFromPart(e,t);var u={frag:e,part:t,payload:r.data,networkDetails:s};n(u),l(u)},onError:function(n,a,o){i.resetLoader(e,d),u(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:n,networkDetails:o}))},onAbort:function(n,a,o){e.stats.aborted=t.stats.aborted,i.resetLoader(e,d),u(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,networkDetails:o}))},onTimeout:function(n,a,o){i.resetLoader(e,d),u(new p({type:r.ErrorTypes.NETWORK_ERROR,details:r.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,networkDetails:o}))}})}))},t.updateStatsFromPart=function(e,t){var n=e.stats,i=t.stats,r=i.total;if(n.loaded+=i.loaded,r){var a=Math.round(e.duration/t.duration),o=Math.min(Math.round(n.loaded/r),a),s=(a-o)*Math.round(n.loaded/o);n.total=n.loaded+s}else n.total=Math.max(n.loaded,n.total);var l=n.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},t.resetLoader=function(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()},e}();function h(e,t){void 0===t&&(t=null);var n=t||e,r={frag:e,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},a=n.byteRangeStartOffset,o=n.byteRangeEndOffset;if((0,i.isFiniteNumber)(a)&&(0,i.isFiniteNumber)(o)){var s,l=a,u=o;if("initSegment"===e.sn&&"AES-128"===(null===(s=e.decryptdata)||void 0===s?void 0:s.method)){var c=o-a;c%16&&(u=o+(16-c%16)),0!==a&&(r.resetIV=!0,l=a-16)}r.rangeStart=l,r.rangeEnd=u}return r}var p=function(e){var t,n;function i(t){for(var n,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).data=void 0,n.data=t,n}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,l(t,n),i}(a(Error))},"./src/loader/fragment.ts":
/*!********************************!*\
    !*** ./src/loader/fragment.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{BaseSegment:()=>d,ElementaryStreamTypes:()=>i,Fragment:()=>h,Part:()=>p});var i,r=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),a=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),o=n(/*! ./load-stats */"./src/loader/load-stats.ts");function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,l(e,t)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(e){e.AUDIO="audio",e.VIDEO="video",e.AUDIOVIDEO="audiovideo"}(i||(i={}));var d=function(){function e(e){var t;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((t={})[i.AUDIO]=null,t[i.VIDEO]=null,t[i.AUDIOVIDEO]=null,t),this.baseurl=e}return e.prototype.setByteRange=function(e,t){var n=e.split("@",2),i=[];1===n.length?i[0]=t?t.byteRangeEndOffset:0:i[0]=parseInt(n[1]),i[1]=parseInt(n[0])+i[0],this._byteRange=i},c(e,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,a.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(e){this._url=e}}]),e}(),h=function(e){function t(t,n){var i;return(i=e.call(this,n)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.appendedPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new o.LoadStats,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.type=t,i}s(t,e);var n=t.prototype;return n.setKeyFormat=function(e){if(this.levelkeys){var t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}},n.abortRequests=function(){var e,t;null===(e=this.loader)||void 0===e||e.abort(),null===(t=this.keyLoader)||void 0===t||t.abort()},n.setElementaryStreamInfo=function(e,t,n,i,r,a){void 0===a&&(a=!1);var o=this.elementaryStreams,s=o[e];s?(s.startPTS=Math.min(s.startPTS,t),s.endPTS=Math.max(s.endPTS,n),s.startDTS=Math.min(s.startDTS,i),s.endDTS=Math.max(s.endDTS,r)):o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:r,partial:a}},n.clearElementaryStreamInfo=function(){var e=this.elementaryStreams;e[i.AUDIO]=null,e[i.VIDEO]=null,e[i.AUDIOVIDEO]=null},c(t,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var e=this.levelkeys.identity;if(e)this._decryptdata=e.getDecryptData(this.sn);else{var t=Object.keys(this.levelkeys);if(1===t.length)return this._decryptdata=this.levelkeys[t[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!(0,r.isFiniteNumber)(this.programDateTime))return null;var e=(0,r.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){var e;if(null!==(e=this._decryptdata)&&void 0!==e&&e.encrypted)return!0;if(this.levelkeys){var t=Object.keys(this.levelkeys),n=t.length;if(n>1||1===n&&this.levelkeys[t[0]].encrypted)return!0}return!1}}]),t}(d),p=function(e){function t(t,n,i,r,a){var s;(s=e.call(this,i)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new o.LoadStats,s.duration=t.decimalFloatingPoint("DURATION"),s.gap=t.bool("GAP"),s.independent=t.bool("INDEPENDENT"),s.relurl=t.enumeratedString("URI"),s.fragment=n,s.index=r;var l=t.enumeratedString("BYTERANGE");return l&&s.setByteRange(l,a),a&&(s.fragOffset=a.fragOffset+a.duration),s}return s(t,e),c(t,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var e=this.elementaryStreams;return!!(e.audio||e.video||e.audiovideo)}}]),t}(d)},"./src/loader/key-loader.ts":
/*!**********************************!*\
    !*** ./src/loader/key-loader.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=n(/*! ../errors */"./src/errors.ts"),r=n(/*! ./fragment-loader */"./src/loader/fragment-loader.ts"),a=function(){function e(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}var t=e.prototype;return t.abort=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.abort()}},t.detach=function(){for(var e in this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}},t.destroy=function(){for(var e in this.detach(),this.keyUriToKeyInfo){var t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}},t.createKeyLoadError=function(e,t,n,a){return void 0===t&&(t=i.ErrorDetails.KEY_LOAD_ERROR),new r.LoadError({type:i.ErrorTypes.NETWORK_ERROR,details:t,fatal:!1,frag:e,networkDetails:n})},t.loadClear=function(e,t){var n=this;if(this.emeController&&this.config.emeEnabled)for(var i=e.sn,r=e.cc,a=function(e){var a=t[e];if(r<=a.cc&&("initSegment"===i||i<a.sn))return n.emeController.selectKeySystemFormat(a).then((function(e){a.setKeyFormat(e)})),"break"},o=0;o<t.length&&"break"!==a(o);o++);},t.load=function(e){var t=this;return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then((function(n){return t.loadInternal(e,n)})):this.loadInternal(e)},t.loadInternal=function(e,t){var n,r;t&&e.setKeyFormat(t);var a=e.decryptdata;if(!a){var o=t?"Expected frag.decryptdata to be defined after setting format "+t:"Missing decryption data on fragment in onKeyLoading";return Promise.reject(this.createKeyLoadError(e,i.ErrorDetails.KEY_LOAD_ERROR,null,o))}var s=a.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,i.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+s+'"'));var l,u=this.keyUriToKeyInfo[s];if(null!==(n=u)&&void 0!==n&&n.decryptdata.key)return a.key=u.decryptdata.key,Promise.resolve({frag:e,keyInfo:u});if(null!==(r=u)&&void 0!==r&&r.keyLoadPromise)switch(null===(l=u.mediaKeySessionContext)||void 0===l?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return u.keyLoadPromise.then((function(t){return a.key=t.keyInfo.decryptdata.key,{frag:e,keyInfo:u}}))}switch(u=this.keyUriToKeyInfo[s]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===a.keyFormat?this.loadKeyHTTP(u,e):this.loadKeyEME(u,e);case"AES-128":return this.loadKeyHTTP(u,e);default:return Promise.reject(this.createKeyLoadError(e,i.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+a.method+'"'))}},t.loadKeyEME=function(e,t){var n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then((function(t){return e.mediaKeySessionContext=t,n}))).catch((function(t){throw e.keyLoadPromise=null,t}))}return Promise.resolve(n)},t.loadKeyHTTP=function(e,t){var n=this,r=this.config,a=new(0,r.loader)(r);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((function(o,s){var l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},u={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:r.fragLoadingRetryDelay,maxRetryDelay:r.fragLoadingMaxRetryTimeout,highWaterMark:0},c={onSuccess:function(e,t,r,a){var l=r.frag,u=r.keyInfo,c=r.url;if(!l.decryptdata||u!==n.keyUriToKeyInfo[c])return s(n.createKeyLoadError(l,i.ErrorDetails.KEY_LOAD_ERROR,a,"after key load, decryptdata unset or changed"));u.decryptdata.key=l.decryptdata.key=new Uint8Array(e.data),l.keyLoader=null,u.loader=null,o({frag:l,keyInfo:u})},onError:function(e,r,a){n.resetLoader(r),s(n.createKeyLoadError(t,i.ErrorDetails.KEY_LOAD_ERROR,a))},onTimeout:function(e,r,a){n.resetLoader(r),s(n.createKeyLoadError(t,i.ErrorDetails.KEY_LOAD_TIMEOUT,a))},onAbort:function(e,r,a){n.resetLoader(r),s(n.createKeyLoadError(t,i.ErrorDetails.INTERNAL_ABORTED,a))}};a.load(l,u,c)}))},t.resetLoader=function(e){var t=e.frag,n=e.keyInfo,i=e.url,r=n.loader;t.keyLoader===r&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],r&&r.destroy()},e}()},"./src/loader/level-details.ts":
/*!*************************************!*\
    !*** ./src/loader/level-details.ts ***!
    \*************************************/(e,t,n)=>{n.r(t),n.d(t,{LevelDetails:()=>a});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts");function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}var a=function(){function e(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}var t,n,a;return e.prototype.reloaded=function(e){if(!e)return this.advanced=!0,void(this.updated=!0);var t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t,this.advanced=this.endSN>e.endSN||t>0||0===t&&n>0,this.updated||this.advanced?this.misses=Math.floor(.6*e.misses):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay},t=e,(n=[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&(0,i.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var e=this.driftEndTime-this.driftStartTime;return e>0?1e3*(this.driftEnd-this.driftStart)/e:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var e;return null!==(e=this.fragments)&&void 0!==e&&e.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var e;return null!==(e=this.partList)&&void 0!==e&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}])&&r(t.prototype,n),a&&r(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/loader/level-key.ts":
/*!*********************************!*\
    !*** ./src/loader/level-key.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{LevelKey:()=>u});var i=n(/*! ../utils/keysystem-util */"./src/utils/keysystem-util.ts"),r=n(/*! ../utils/mediakeys-helper */"./src/utils/mediakeys-helper.ts"),a=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ../utils/numeric-encoding-utils */"./src/utils/numeric-encoding-utils.ts"),l={},u=function(){function e(e,t,n,i,r){void 0===i&&(i=[1]),void 0===r&&(r=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=r,this.encrypted=!!e&&"NONE"!==e,this.isCommonEncryption=this.encrypted&&"AES-128"!==e}e.clearKeyUriToKeyIdMap=function(){l={}};var t=e.prototype;return t.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;switch(this.keyFormat){case"identity":return"SAMPLE-AES"===this.method;case r.KeySystemFormats.FAIRPLAY:case r.KeySystemFormats.WIDEVINE:case r.KeySystemFormats.PLAYREADY:case r.KeySystemFormats.CLEARKEY:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},t.getDecryptData=function(t){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof t&&("AES-128"!==this.method||this.iv||o.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),t=0);var n=function(e){for(var t=new Uint8Array(16),n=12;n<16;n++)t[n]=e>>8*(15-n)&255;return t}(t);return new e(this.method,this.uri,"identity",this.keyFormatVersions,n)}var u=(0,i.convertDataUriToArrayBytes)(this.uri);if(u)switch(this.keyFormat){case r.KeySystemFormats.WIDEVINE:this.pssh=u,u.length>=22&&(this.keyId=u.subarray(u.length-22,u.length-6));break;case r.KeySystemFormats.PLAYREADY:var c=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,a.mp4pssh)(c,null,u);var d=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/2),h=String.fromCharCode.apply(null,Array.from(d)),p=h.substring(h.indexOf("<"),h.length),f=(new DOMParser).parseFromString(p,"text/xml").getElementsByTagName("KID")[0];if(f){var g=f.childNodes[0]?f.childNodes[0].nodeValue:f.getAttribute("VALUE");if(g){var m=(0,s.base64Decode)(g).subarray(0,16);(0,i.changeEndianness)(m),this.keyId=m}}break;default:var v=u.subarray(0,16);if(16!==v.length){var y=new Uint8Array(16);y.set(v,16-v.length),v=y}this.keyId=v}if(!this.keyId||16!==this.keyId.byteLength){var b=l[this.uri];if(!b){var E=Object.keys(l).length%Number.MAX_SAFE_INTEGER;b=new Uint8Array(16),new DataView(b.buffer,12,4).setUint32(0,E),l[this.uri]=b}this.keyId=b}return this},e}()},"./src/loader/load-stats.ts":
/*!**********************************!*\
    !*** ./src/loader/load-stats.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{LoadStats:()=>i});var i=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":
/*!***********************************!*\
    !*** ./src/loader/m3u8-parser.ts ***!
    \***********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! url-toolkit */"./node_modules/url-toolkit/src/url-toolkit.js"),a=n(/*! ./date-range */"./src/loader/date-range.ts"),o=n(/*! ./fragment */"./src/loader/fragment.ts"),s=n(/*! ./level-details */"./src/loader/level-details.ts"),l=n(/*! ./level-key */"./src/loader/level-key.ts"),u=n(/*! ../utils/attr-list */"./src/utils/attr-list.ts"),c=n(/*! ../utils/logger */"./src/utils/logger.ts"),d=n(/*! ../utils/codecs */"./src/utils/codecs.ts");function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h.apply(this,arguments)}var p=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,f=/#EXT-X-MEDIA:(.*)/g,g=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),m=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),v=function(){function e(){}return e.findGroup=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(i.id===t)return i}},e.convertAVC1ToAVCOTI=function(e){var t=e.split(".");if(t.length>2){var n=t.shift()+".";return n+=parseInt(t.shift()).toString(16),n+=("000"+parseInt(t.shift()).toString(16)).slice(-4)}return e},e.resolve=function(e,t){return(0,r.buildAbsoluteURL)(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,n){var i,r=[],a=[],o={},s=[],l=!1;for(p.lastIndex=0;null!=(i=p.exec(t));)if(i[1]){var d,h=new u.AttrList(i[1]),f={attrs:h,bitrate:h.decimalInteger("AVERAGE-BANDWIDTH")||h.decimalInteger("BANDWIDTH"),name:h.NAME,url:e.resolve(i[2],n)},g=h.decimalResolution("RESOLUTION");g&&(f.width=g.width,f.height=g.height),b((h.CODECS||"").split(/[ ,]+/).filter((function(e){return e})),f),f.videoCodec&&-1!==f.videoCodec.indexOf("avc1")&&(f.videoCodec=e.convertAVC1ToAVCOTI(f.videoCodec)),null!==(d=f.unknownCodecs)&&void 0!==d&&d.length||a.push(f),r.push(f)}else if(i[3]){var m=new u.AttrList(i[3]);m["DATA-ID"]&&(l=!0,o[m["DATA-ID"]]=m)}else if(i[4]){var v=i[4],E=y(v,n);E.encrypted&&E.isSupported()?s.push(E):c.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+v+'"')}return{levels:a.length>0&&a.length<r.length?a:r,sessionData:l?o:null,sessionKeys:s.length?s:null}},e.parseMasterPlaylistMedia=function(t,n,i,r){var a;void 0===r&&(r=[]);var o=[],s=0;for(f.lastIndex=0;null!==(a=f.exec(t));){var l=new u.AttrList(a[1]);if(l.TYPE===i){var c={attrs:l,bitrate:0,id:s++,groupId:l["GROUP-ID"],instreamId:l["INSTREAM-ID"],name:l.NAME||l.LANGUAGE||"",type:i,default:l.bool("DEFAULT"),autoselect:l.bool("AUTOSELECT"),forced:l.bool("FORCED"),lang:l.LANGUAGE,url:l.URI?e.resolve(l.URI,n):""};if(r.length){var d=e.findGroup(r,c.groupId)||r[0];E(c,d,"audioCodec"),E(c,d,"textCodec")}o.push(c)}}return o},e.parseLevelPlaylist=function(e,t,n,r,l){var d,p,f,v=new s.LevelDetails(t),b=v.fragments,E=null,_=0,S=0,w=0,C=0,I=null,D=new o.Fragment(r,t),R=-1,x=!1;for(g.lastIndex=0,v.m3u8=e;null!==(d=g.exec(e));){x&&(x=!1,(D=new o.Fragment(r,t)).start=w,D.sn=_,D.cc=C,D.level=n,E&&(D.initSegment=E,D.rawProgramDateTime=E.rawProgramDateTime,E.rawProgramDateTime=null));var L=d[1];if(L){D.duration=parseFloat(L);var P=(" "+d[2]).slice(1);D.title=P||null,D.tagList.push(P?["INF",L,P]:["INF",L])}else if(d[3])(0,i.isFiniteNumber)(D.duration)&&(D.start=w,f&&k(D,f,v),D.sn=_,D.level=n,D.cc=C,D.urlId=l,b.push(D),D.relurl=(" "+d[3]).slice(1),T(D,I),I=D,w+=D.duration,_++,S=0,x=!0);else if(d[4]){var O=(" "+d[4]).slice(1);I?D.setByteRange(O,I):D.setByteRange(O)}else if(d[5])D.rawProgramDateTime=(" "+d[5]).slice(1),D.tagList.push(["PROGRAM-DATE-TIME",D.rawProgramDateTime]),-1===R&&(R=b.length);else{if(!(d=d[0].match(m))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(p=1;p<d.length&&void 0===d[p];p++);var M=(" "+d[p]).slice(1),N=(" "+d[p+1]).slice(1),B=d[p+2]?(" "+d[p+2]).slice(1):"";switch(M){case"PLAYLIST-TYPE":v.type=N.toUpperCase();break;case"MEDIA-SEQUENCE":_=v.startSN=parseInt(N);break;case"SKIP":var U=new u.AttrList(N),F=U.decimalInteger("SKIPPED-SEGMENTS");if((0,i.isFiniteNumber)(F)){v.skippedSegments=F;for(var V=F;V--;)b.unshift(null);_+=F}var H=U.enumeratedString("RECENTLY-REMOVED-DATERANGES");H&&(v.recentlyRemovedDateranges=H.split("\t"));break;case"TARGETDURATION":v.targetduration=parseFloat(N);break;case"VERSION":v.version=parseInt(N);break;case"EXTM3U":break;case"ENDLIST":v.live=!1;break;case"#":(N||B)&&D.tagList.push(B?[N,B]:[N]);break;case"DISCONTINUITY":C++,D.tagList.push(["DIS"]);break;case"GAP":D.tagList.push([M]);break;case"BITRATE":D.tagList.push([M,N]);break;case"DATERANGE":var j=new u.AttrList(N),K=new a.DateRange(j,v.dateRanges[j.ID]);K.isValid||v.skippedSegments?v.dateRanges[K.id]=K:c.logger.warn('Ignoring invalid DATERANGE tag: "'+N+'"'),D.tagList.push(["EXT-X-DATERANGE",N]);break;case"DISCONTINUITY-SEQUENCE":C=parseInt(N);break;case"KEY":var G=y(N,t);if(G.isSupported()){if("NONE"===G.method){f=void 0;break}f||(f={}),f[G.keyFormat]&&(f=h({},f)),f[G.keyFormat]=G}else c.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+N+'"');break;case"START":var W=new u.AttrList(N).decimalFloatingPoint("TIME-OFFSET");(0,i.isFiniteNumber)(W)&&(v.startTimeOffset=W);break;case"MAP":var z=new u.AttrList(N);if(D.duration){var Y=new o.Fragment(r,t);A(Y,z,n,f),E=Y,D.initSegment=E,E.rawProgramDateTime&&!D.rawProgramDateTime&&(D.rawProgramDateTime=E.rawProgramDateTime)}else A(D,z,n,f),E=D,x=!0;break;case"SERVER-CONTROL":var q=new u.AttrList(N);v.canBlockReload=q.bool("CAN-BLOCK-RELOAD"),v.canSkipUntil=q.optionalFloat("CAN-SKIP-UNTIL",0),v.canSkipDateRanges=v.canSkipUntil>0&&q.bool("CAN-SKIP-DATERANGES"),v.partHoldBack=q.optionalFloat("PART-HOLD-BACK",0),v.holdBack=q.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var $=new u.AttrList(N);v.partTarget=$.decimalFloatingPoint("PART-TARGET");break;case"PART":var X=v.partList;X||(X=v.partList=[]);var Q=S>0?X[X.length-1]:void 0,Z=S++,J=new o.Part(new u.AttrList(N),D,t,Z,Q);X.push(J),D.duration+=J.duration;break;case"PRELOAD-HINT":var ee=new u.AttrList(N);v.preloadHint=ee;break;case"RENDITION-REPORT":var te=new u.AttrList(N);v.renditionReports=v.renditionReports||[],v.renditionReports.push(te);break;default:c.logger.warn("line parsed but not handled: "+d)}}}I&&!I.relurl?(b.pop(),w-=I.duration,v.partList&&(v.fragmentHint=I)):v.partList&&(T(D,I),D.cc=C,v.fragmentHint=D,f&&k(D,f,v));var ne=b.length,ie=b[0],re=b[ne-1];if((w+=v.skippedSegments*v.targetduration)>0&&ne&&re){v.averagetargetduration=w/ne;var ae=re.sn;v.endSN="initSegment"!==ae?ae:0,v.live||(re.endList=!0),ie&&(v.startCC=ie.cc)}else v.endSN=0,v.startCC=0;return v.fragmentHint&&(w+=v.fragmentHint.duration),v.totalduration=w,v.endCC=C,R>0&&function(e,t){for(var n=e[t],i=t;i--;){var r=e[i];if(!r)return;r.programDateTime=n.programDateTime-1e3*r.duration,n=r}}(b,R),v},e}();function y(e,t){var n,i,r=new u.AttrList(e),a=null!=(n=r.enumeratedString("METHOD"))?n:"",o=r.URI,s=r.hexadecimalInteger("IV"),d=r.enumeratedString("KEYFORMATVERSIONS"),h=null!=(i=r.enumeratedString("KEYFORMAT"))?i:"identity";o&&r.IV&&!s&&c.logger.error("Invalid IV: "+r.IV);var p=o?v.resolve(o,t):"",f=(d||"1").split("/").map(Number).filter(Number.isFinite);return new l.LevelKey(a,p,h,f,s)}function b(e,t){["video","audio","text"].forEach((function(n){var i=e.filter((function(e){return(0,d.isCodecType)(e,n)}));if(i.length){var r=i.filter((function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)}));t[n+"Codec"]=r.length>0?r[0]:i[0],e=e.filter((function(e){return-1===i.indexOf(e)}))}})),t.unknownCodecs=e}function E(e,t,n){var i=t[n];i&&(e[n]=i)}function T(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):null!=t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),(0,i.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}function A(e,t,n,i){e.relurl=t.URI,t.BYTERANGE&&e.setByteRange(t.BYTERANGE),e.level=n,e.sn="initSegment",i&&(e.levelkeys=i),e.initSegment=null}function k(e,t,n){e.levelkeys=t;var i=n.encryptedFragments;i.length&&i[i.length-1].levelkeys===t||!Object.keys(t).some((function(e){return t[e].isCommonEncryption}))||i.push(e)}},"./src/loader/playlist-loader.ts":
/*!***************************************!*\
    !*** ./src/loader/playlist-loader.ts ***!
    \***************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../events */"./src/events.ts"),a=n(/*! ../errors */"./src/errors.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ./m3u8-parser */"./src/loader/m3u8-parser.ts"),l=n(/*! ../types/loader */"./src/types/loader.ts"),u=n(/*! ../utils/attr-list */"./src/utils/attr-list.ts");function c(e,t){var n=e.url;return void 0!==n&&0!==n.indexOf("data:")||(n=t.url),n}var d=function(){function e(e){this.hls=void 0,this.loaders=Object.create(null),this.hls=e,this.registerListeners()}var t=e.prototype;return t.startLoad=function(e){},t.stopLoad=function(){this.destroyInternalLoaders()},t.registerListeners=function(){var e=this.hls;e.on(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(r.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(r.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(r.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(r.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(r.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(r.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=function(e){var t=this.hls.config,n=t.pLoader,i=t.loader,r=new(n||i)(t);return e.loader=r,this.loaders[e.type]=r,r},t.getInternalLoader=function(e){return this.loaders[e.type]},t.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},t.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var n=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:l.PlaylistContextType.MANIFEST,url:n,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var n=t.id,i=t.level,r=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:null,level:i,responseType:"text",type:l.PlaylistContextType.LEVEL,url:r,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:l.PlaylistContextType.AUDIO_TRACK,url:r,deliveryDirectives:a})},t.onSubtitleTrackLoading=function(e,t){var n=t.id,i=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:n,groupId:i,level:null,responseType:"text",type:l.PlaylistContextType.SUBTITLE_TRACK,url:r,deliveryDirectives:a})},t.load=function(e){var t,n,i,r,a,s,u=this.hls.config,c=this.getInternalLoader(e);if(c){var d=c.context;if(d&&d.url===e.url)return void o.logger.trace("[playlist-loader]: playlist request ongoing");o.logger.log("[playlist-loader]: aborting previous loader for type: "+e.type),c.abort()}switch(e.type){case l.PlaylistContextType.MANIFEST:n=u.manifestLoadingMaxRetry,i=u.manifestLoadingTimeOut,r=u.manifestLoadingRetryDelay,a=u.manifestLoadingMaxRetryTimeout;break;case l.PlaylistContextType.LEVEL:case l.PlaylistContextType.AUDIO_TRACK:case l.PlaylistContextType.SUBTITLE_TRACK:n=0,i=u.levelLoadingTimeOut;break;default:n=u.levelLoadingMaxRetry,i=u.levelLoadingTimeOut,r=u.levelLoadingRetryDelay,a=u.levelLoadingMaxRetryTimeout}if(c=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===l.PlaylistContextType.LEVEL&&null!==e.level?s=this.hls.levels[e.level].details:e.type===l.PlaylistContextType.AUDIO_TRACK&&null!==e.id?s=this.hls.audioTracks[e.id].details:e.type===l.PlaylistContextType.SUBTITLE_TRACK&&null!==e.id&&(s=this.hls.subtitleTracks[e.id].details),s)){var h=s.partTarget,p=s.targetduration;h&&p&&(i=Math.min(1e3*Math.max(3*h,.8*p),i))}var f={timeout:i,maxRetry:n,retryDelay:r,maxRetryDelay:a,highWaterMark:0},g={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load(e,f,g)},t.loadsuccess=function(e,t,n,i){void 0===i&&(i=null),this.resetInternalLoader(n.type);var r=e.data;0===r.indexOf("#EXTM3U")?(t.parsing.start=performance.now(),r.indexOf("#EXTINF:")>0||r.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,n,i):this.handleMasterPlaylist(e,t,n,i)):this.handleManifestParsingError(e,n,"no EXTM3U delimiter",i)},t.loaderror=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!1,e)},t.loadtimeout=function(e,t,n){void 0===n&&(n=null),this.handleNetworkError(t,n,!0)},t.handleMasterPlaylist=function(e,t,n,i){var a=this.hls,l=e.data,d=c(e,n),h=s.default.parseMasterPlaylist(l,d),p=h.levels,f=h.sessionData,g=h.sessionKeys;if(p.length){var m=p.map((function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}})),v=p.map((function(e){return{id:e.attrs.SUBTITLES,textCodec:e.textCodec}})),y=s.default.parseMasterPlaylistMedia(l,d,"AUDIO",m),b=s.default.parseMasterPlaylistMedia(l,d,"SUBTITLES",v),E=s.default.parseMasterPlaylistMedia(l,d,"CLOSED-CAPTIONS");y.length&&(y.some((function(e){return!e.url}))||!p[0].audioCodec||p[0].attrs.AUDIO||(o.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),y.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new u.AttrList({}),bitrate:0,url:""}))),a.trigger(r.Events.MANIFEST_LOADED,{levels:p,audioTracks:y,subtitles:b,captions:E,url:d,stats:t,networkDetails:i,sessionData:f,sessionKeys:g})}else this.handleManifestParsingError(e,n,"no level found in manifest",i)},t.handleTrackOrLevelPlaylist=function(e,t,n,o){var d=this.hls,h=n.id,p=n.level,f=n.type,g=c(e,n),m=(0,i.isFiniteNumber)(h)?h:0,v=(0,i.isFiniteNumber)(p)?p:m,y=function(e){switch(e.type){case l.PlaylistContextType.AUDIO_TRACK:return l.PlaylistLevelType.AUDIO;case l.PlaylistContextType.SUBTITLE_TRACK:return l.PlaylistLevelType.SUBTITLE;default:return l.PlaylistLevelType.MAIN}}(n),b=s.default.parseLevelPlaylist(e.data,g,v,y,m);if(b.fragments.length){if(f===l.PlaylistContextType.MANIFEST){var E={attrs:new u.AttrList({}),bitrate:0,details:b,name:"",url:g};d.trigger(r.Events.MANIFEST_LOADED,{levels:[E],audioTracks:[],url:g,stats:t,networkDetails:o,sessionData:null,sessionKeys:null})}t.parsing.end=performance.now(),n.levelDetails=b,this.handlePlaylistLoaded(e,t,n,o)}else d.trigger(r.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:g,reason:"no fragments found in level",level:"number"==typeof n.level?n.level:void 0})},t.handleManifestParsingError=function(e,t,n,i){this.hls.trigger(r.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:t.type===l.PlaylistContextType.MANIFEST,url:e.url,reason:n,response:e,context:t,networkDetails:i})},t.handleNetworkError=function(e,t,n,i){void 0===n&&(n=!1),o.logger.warn("[playlist-loader]: A network "+(n?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var s=a.ErrorDetails.UNKNOWN,u=!1,c=this.getInternalLoader(e);switch(e.type){case l.PlaylistContextType.MANIFEST:s=n?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,u=!0;break;case l.PlaylistContextType.LEVEL:s=n?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.AUDIO_TRACK:s=n?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case l.PlaylistContextType.SUBTITLE_TRACK:s=n?a.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:a.ErrorDetails.SUBTITLE_LOAD_ERROR,u=!1}c&&this.resetInternalLoader(e.type);var d={type:a.ErrorTypes.NETWORK_ERROR,details:s,fatal:u,url:e.url,loader:c,context:e,networkDetails:t};i&&(d.response=i),this.hls.trigger(r.Events.ERROR,d)},t.handlePlaylistLoaded=function(e,t,n,i){var a=n.type,o=n.level,s=n.id,u=n.groupId,c=n.loader,d=n.levelDetails,h=n.deliveryDirectives;if(null!=d&&d.targetduration){if(c)switch(d.live&&(c.getCacheAge&&(d.ageHeader=c.getCacheAge()||0),c.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),a){case l.PlaylistContextType.MANIFEST:case l.PlaylistContextType.LEVEL:this.hls.trigger(r.Events.LEVEL_LOADED,{details:d,level:o||0,id:s||0,stats:t,networkDetails:i,deliveryDirectives:h});break;case l.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(r.Events.AUDIO_TRACK_LOADED,{details:d,id:s||0,groupId:u||"",stats:t,networkDetails:i,deliveryDirectives:h});break;case l.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(r.Events.SUBTITLE_TRACK_LOADED,{details:d,id:s||0,groupId:u||"",stats:t,networkDetails:i,deliveryDirectives:h})}}else this.handleManifestParsingError(e,n,"invalid target duration",i)},e}();const h=d},"./src/polyfills/number.ts":
/*!*********************************!*\
    !*** ./src/polyfills/number.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{MAX_SAFE_INTEGER:()=>r,isFiniteNumber:()=>i});var i=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},r=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":
/*!*********************************!*\
    !*** ./src/remux/aac-helper.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}()},"./src/remux/mp4-generator.ts":
/*!************************************!*\
    !*** ./src/remux/mp4-generator.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var i=Math.pow(2,32)-1,r=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:i};var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,r))},e.box=function(e){for(var t=8,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=i.length,o=a;a--;)t+=i[a].byteLength;var s=new Uint8Array(t);for(s[0]=t>>24&255,s[1]=t>>16&255,s[2]=t>>8&255,s[3]=255&t,s.set(e,4),a=0,t=8;a<o;a++)s.set(i[a],t),t+=i[a].byteLength;return s},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,n){n*=t;var r=Math.floor(n/(i+1)),a=Math.floor(n%(i+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,n,i){return e.box(e.types.moof,e.mfhd(t),e.traf(i,n))},e.moov=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trak(t[n]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(i).concat(e.mvex(t)))},e.mvex=function(t){for(var n=t.length,i=[];n--;)i[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(i))},e.mvhd=function(t,n){n*=t;var r=Math.floor(n/(i+1)),a=Math.floor(n%(i+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)},e.sdtp=function(t){var n,i,r=t.samples||[],a=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i=r[n].flags,a[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return e.box(e.types.sdtp,a)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var n,i,r,a=[],o=[];for(n=0;n<t.sps.length;n++)r=(i=t.sps[n]).byteLength,a.push(r>>>8&255),a.push(255&r),a=a.concat(Array.prototype.slice.call(i));for(n=0;n<t.pps.length;n++)r=(i=t.pps[n]).byteLength,o.push(r>>>8&255),o.push(255&r),o=o.concat(Array.prototype.slice.call(i));var s=e.box(e.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|t.sps.length].concat(a).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var n=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var n=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))},e.stsd=function(t){return"audio"===t.type?"mp3"===t.segmentCodec&&"mp3"===t.codec?e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var n=t.id,r=t.duration*t.timescale,a=t.width,o=t.height,s=Math.floor(r/(i+1)),l=Math.floor(r%(i+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))},e.traf=function(t,n){var r=e.sdtp(t),a=t.id,o=Math.floor(n/(i+1)),s=Math.floor(n%(i+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,r.length+16+20+8+16+8+8),r)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,n){var i,r,a,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,h=new Uint8Array(d);for(n+=8+d,h.set(["video"===t.type?1:0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),i=0;i<c;i++)a=(r=u[i]).duration,o=r.size,s=r.flags,l=r.cts,h.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return e.box(e.types.trun,h)},e.initSegment=function(t){e.types||e.init();var n=e.moov(t),i=new Uint8Array(e.FTYP.byteLength+n.byteLength);return i.set(e.FTYP),i.set(n,e.FTYP.byteLength),i},e}();r.types=void 0,r.HDLR_TYPES=void 0,r.STTS=void 0,r.STSC=void 0,r.STCO=void 0,r.STSZ=void 0,r.VMHD=void 0,r.SMHD=void 0,r.STSD=void 0,r.FTYP=void 0,r.DINF=void 0;const a=r},"./src/remux/mp4-remuxer.ts":
/*!**********************************!*\
    !*** ./src/remux/mp4-remuxer.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>f,flushTextTrackMetadataCueSamples:()=>m,flushTextTrackUserdataCueSamples:()=>v,normalizePts:()=>g});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./aac-helper */"./src/remux/aac-helper.ts"),a=n(/*! ./mp4-generator */"./src/remux/mp4-generator.ts"),o=n(/*! ../events */"./src/events.ts"),s=n(/*! ../errors */"./src/errors.ts"),l=n(/*! ../utils/logger */"./src/utils/logger.ts"),u=n(/*! ../types/loader */"./src/types/loader.ts"),c=n(/*! ../utils/timescale-conversion */"./src/utils/timescale-conversion.ts");function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}var h=null,p=null,f=function(){function e(e,t,n,i){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,null===h){var r=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);h=r?parseInt(r[1]):0}if(null===p){var a=navigator.userAgent.match(/Safari\/(\d+)/i);p=a?parseInt(a[1]):0}}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){l.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e},t.resetNextTimestamp=function(){l.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},t.resetInitSegment=function(){l.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},t.getVideoStartPts=function(e){var t=!1,n=e.reduce((function(e,n){var i=n.pts-e;return i<-4294967296?(t=!0,g(e,n.pts)):i>0?e:n.pts}),e[0].pts);return t&&l.logger.debug("PTS rollover detected"),n},t.remux=function(e,t,n,i,r,a,o,s){var c,d,h,p,f,y,b=r,E=r,T=e.pid>-1,A=t.pid>-1,k=t.samples.length,_=e.samples.length>0,S=o&&k>0||k>1;if((!T||_)&&(!A||S)||this.ISGenerated||o){this.ISGenerated||(h=this.generateIS(e,t,r));var w,C=this.isVideoContiguous,I=-1;if(S&&(I=function(e){for(var t=0;t<e.length;t++)if(e[t].key)return t;return-1}(t.samples),!C&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,I>0){l.logger.warn("[mp4-remuxer]: Dropped "+I+" out of "+k+" video samples due to a missing keyframe");var D=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(I),t.dropped+=I,w=E+=(t.samples[0].pts-D)/t.inputTimeScale}else-1===I&&(l.logger.warn("[mp4-remuxer]: No keyframe found out of "+k+" video samples"),y=!1);if(this.ISGenerated){if(_&&S){var R=this.getVideoStartPts(t.samples),x=(g(e.samples[0].pts,R)-R)/t.inputTimeScale;b+=Math.max(0,x),E+=Math.max(0,-x)}if(_){if(e.samplerate||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(e,t,r)),d=this.remuxAudio(e,b,this.isAudioContiguous,a,A||S||s===u.PlaylistLevelType.AUDIO?E:void 0),S){var L=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(e,t,r)),c=this.remuxVideo(t,E,C,L)}}else S&&(c=this.remuxVideo(t,E,C,0));c&&(c.firstKeyFrame=I,c.independent=-1!==I,c.firstKeyFramePTS=w)}}return this.ISGenerated&&(n.samples.length&&(f=m(n,r,this._initPTS,this._initDTS)),i.samples.length&&(p=v(i,r,this._initPTS))),{audio:d,video:c,initSegment:h,independent:y,text:p,id3:f}},t.generateIS=function(e,t,n){var r,o,s,l=e.samples,u=t.samples,c=this.typeSupported,d={},h=!(0,i.isFiniteNumber)(this._initPTS),p="audio/mp4";if(h&&(r=o=1/0),e.config&&l.length&&(e.timescale=e.samplerate,"mp3"===e.segmentCodec&&(c.mpeg?(p="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3")),d.audio={id:"audio",container:p,codec:e.codec,initSegment:"mp3"===e.segmentCodec&&c.mpeg?new Uint8Array(0):a.default.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(s=e.inputTimeScale,r=o=l[0].pts-Math.round(s*n))),t.sps&&t.pps&&u.length&&(t.timescale=t.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:a.default.initSegment([t]),metadata:{width:t.width,height:t.height}},h)){s=t.inputTimeScale;var f=this.getVideoStartPts(u),m=Math.round(s*n);o=Math.min(o,g(u[0].dts,f)-m),r=Math.min(r,f-m)}if(Object.keys(d).length)return this.ISGenerated=!0,h&&(this._initPTS=r,this._initDTS=o),{tracks:d,initPTS:r,timescale:s}},t.remuxVideo=function(e,t,n,i){var r,u,f=e.inputTimeScale,m=e.samples,v=[],b=m.length,E=this._initPTS,T=this.nextAvcDts,A=8,k=this.videoSampleDuration,_=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,w=!1;n&&null!==T||(T=t*f-(m[0].pts-g(m[0].dts,m[0].pts)));for(var C=0;C<b;C++){var I=m[C];I.pts=g(I.pts-E,T),I.dts=g(I.dts-E,T),I.dts<m[C>0?C-1:C].dts&&(w=!0)}w&&m.sort((function(e,t){var n=e.dts-t.dts,i=e.pts-t.pts;return n||i})),r=m[0].dts;var D=(u=m[m.length-1].dts)-r,R=D?Math.round(D/(b-1)):k||e.inputTimeScale/30;if(n){var x=r-T,L=x>R,P=x<-1;if((L||P)&&(L?l.logger.warn("AVC: "+(0,c.toMsFromMpegTsClock)(x,!0)+" ms ("+x+"dts) hole between fragments detected, filling it"):l.logger.warn("AVC: "+(0,c.toMsFromMpegTsClock)(-x,!0)+" ms ("+x+"dts) overlapping between fragments detected"),!P||T>m[0].pts)){r=T;var O=m[0].pts-x;m[0].dts=r,m[0].pts=O,l.logger.log("Video: First PTS/DTS adjusted: "+(0,c.toMsFromMpegTsClock)(O,!0)+"/"+(0,c.toMsFromMpegTsClock)(r,!0)+", delta: "+(0,c.toMsFromMpegTsClock)(x,!0)+" ms")}}r=Math.max(0,r);for(var M=0,N=0,B=0;B<b;B++){for(var U=m[B],F=U.units,V=F.length,H=0,j=0;j<V;j++)H+=F[j].data.length;N+=H,M+=V,U.length=H,U.dts=Math.max(U.dts,r),_=Math.min(U.pts,_),S=Math.max(U.pts,S)}u=m[b-1].dts;var K,G=N+4*M+8;try{K=new Uint8Array(G)}catch(e){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating video mdat "+G})}var W=new DataView(K.buffer);W.setUint32(0,G),K.set(a.default.types.mdat,4);for(var z=!1,Y=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,$=Number.NEGATIVE_INFINITY,X=Number.NEGATIVE_INFINITY,Q=0;Q<b;Q++){for(var Z=m[Q],J=Z.units,ee=0,te=0,ne=J.length;te<ne;te++){var ie=J[te],re=ie.data,ae=ie.data.byteLength;W.setUint32(A,ae),A+=4,K.set(re,A),A+=ae,ee+=4+ae}var oe=void 0;if(Q<b-1)k=m[Q+1].dts-Z.dts,oe=m[Q+1].pts-Z.pts;else{var se=this.config,le=Q>0?Z.dts-m[Q-1].dts:R;if(oe=Q>0?Z.pts-m[Q-1].pts:R,se.stretchShortVideoTrack&&null!==this.nextAudioPts){var ue=Math.floor(se.maxBufferHole*f),ce=(i?_+i*f:this.nextAudioPts)-Z.pts;ce>ue?((k=ce-le)<0?k=le:z=!0,l.logger.log("[mp4-remuxer]: It is approximately "+ce/90+" ms to the next segment; using duration "+k/90+" ms for the last video frame.")):k=le}else k=le}var de=Math.round(Z.pts-Z.dts);Y=Math.min(Y,k),$=Math.max($,k),q=Math.min(q,oe),X=Math.max(X,oe),v.push(new y(Z.key,k,ee,de))}if(v.length)if(h){if(h<70){var he=v[0].flags;he.dependsOn=2,he.isNonSync=0}}else if(p&&X-q<$-Y&&R/$<.025&&0===v[0].cts){l.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var pe=r,fe=0,ge=v.length;fe<ge;fe++){var me=pe+v[fe].duration,ve=pe+v[fe].cts;if(fe<ge-1){var ye=me+v[fe+1].cts;v[fe].duration=ye-ve}else v[fe].duration=fe?v[fe-1].duration:R;v[fe].cts=0,pe=me}}console.assert(null!==k,"mp4SampleDuration must be computed"),k=z||!k?R:k,this.nextAvcDts=T=u+k,this.videoSampleDuration=k,this.isVideoContiguous=!0;var be={data1:a.default.moof(e.sequenceNumber++,r,d({},e,{samples:v})),data2:K,startPTS:_/f,endPTS:(S+k)/f,startDTS:r/f,endDTS:T/f,type:"video",hasAudio:!1,hasVideo:!0,nb:v.length,dropped:e.dropped};return e.samples=[],e.dropped=0,console.assert(K.length,"MDAT length must not be zero"),be},t.remuxAudio=function(e,t,n,i,u){var c=e.inputTimeScale,h=c/(e.samplerate?e.samplerate:c),p="aac"===e.segmentCodec?1024:1152,f=p*h,m=this._initPTS,v="mp3"===e.segmentCodec&&this.typeSupported.mpeg,b=[],E=void 0!==u,T=e.samples,A=v?0:8,k=this.nextAudioPts||-1,_=t*c;if(this.isAudioContiguous=n=n||T.length&&k>0&&(i&&Math.abs(_-k)<9e3||Math.abs(g(T[0].pts-m,_)-k)<20*f),T.forEach((function(e){e.pts=g(e.pts-m,_)})),!n||k<0){if(T=T.filter((function(e){return e.pts>=0})),!T.length)return;k=0===u?0:i&&!E?Math.max(0,_):T[0].pts}if("aac"===e.segmentCodec)for(var S=this.config.maxAudioFramesDrift,w=0,C=k;w<T.length;w++){var I=T[w],D=I.pts,R=D-C,x=Math.abs(1e3*R/c);if(R<=-S*f&&E)0===w&&(l.logger.warn("Audio frame @ "+(D/c).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/c)+" ms."),this.nextAudioPts=k=C=D);else if(R>=S*f&&x<1e4&&E){var L=Math.round(R/f);(C=D-L*f)<0&&(L--,C+=f),0===w&&(this.nextAudioPts=k=C),l.logger.warn("[mp4-remuxer]: Injecting "+L+" audio frame @ "+(C/c).toFixed(3)+"s due to "+Math.round(1e3*R/c)+" ms gap.");for(var P=0;P<L;P++){var O=Math.max(C,0),M=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);M||(l.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),M=I.unit.subarray()),T.splice(w,0,{unit:M,pts:O}),C+=f,w++}}I.pts=C,C+=f}for(var N,B=null,U=null,F=0,V=T.length;V--;)F+=T[V].unit.byteLength;for(var H=0,j=T.length;H<j;H++){var K=T[H],G=K.unit,W=K.pts;if(null!==U)b[H-1].duration=Math.round((W-U)/h);else{if(n&&"aac"===e.segmentCodec&&(W=k),B=W,!(F>0))return;F+=A;try{N=new Uint8Array(F)}catch(e){return void this.observer.emit(o.Events.ERROR,o.Events.ERROR,{type:s.ErrorTypes.MUX_ERROR,details:s.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating audio mdat "+F})}v||(new DataView(N.buffer).setUint32(0,F),N.set(a.default.types.mdat,4))}N.set(G,A);var z=G.byteLength;A+=z,b.push(new y(!0,p,z,0)),U=W}var Y=b.length;if(Y){var q=b[b.length-1];this.nextAudioPts=k=U+h*q.duration;var $=v?new Uint8Array(0):a.default.moof(e.sequenceNumber++,B/h,d({},e,{samples:b}));e.samples=[];var X=B/c,Q=k/c,Z={data1:$,data2:N,startPTS:X,endPTS:Q,startDTS:X,endDTS:Q,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.isAudioContiguous=!0,console.assert(N.length,"MDAT length must not be zero"),Z}},t.remuxEmptyAudio=function(e,t,n,i){var a=e.inputTimeScale,o=a/(e.samplerate?e.samplerate:a),s=this.nextAudioPts,u=(null!==s?s:i.startDTS*a)+this._initDTS,c=i.endDTS*a+this._initDTS,d=1024*o,h=Math.ceil((c-u)/d),p=r.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(l.logger.warn("[mp4-remuxer]: remux empty Audio"),p){for(var f=[],g=0;g<h;g++){var m=u+g*d;f.push({unit:p,pts:m,dts:m})}return e.samples=f,this.remuxAudio(e,t,n,!1)}l.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},e}();function g(e,t){var n;if(null===t)return e;for(n=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=n;return e}function m(e,t,n,i){var r=e.samples.length;if(r){for(var a=e.inputTimeScale,o=0;o<r;o++){var s=e.samples[o];s.pts=g(s.pts-n,t*a)/a,s.dts=g(s.dts-i,t*a)/a}var l=e.samples;return e.samples=[],{samples:l}}}function v(e,t,n){var i=e.samples.length;if(i){for(var r=e.inputTimeScale,a=0;a<i;a++){var o=e.samples[a];o.pts=g(o.pts-n,t*r)/r}e.samples.sort((function(e,t){return e.pts-t.pts}));var s=e.samples;return e.samples=[],{samples:s}}}var y=function(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags=new b(e)},b=function(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}},"./src/remux/passthrough-remuxer.ts":
/*!******************************************!*\
    !*** ./src/remux/passthrough-remuxer.ts ***!
    \******************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>c});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./mp4-remuxer */"./src/remux/mp4-remuxer.ts"),a=n(/*! ../utils/mp4-tools */"./src/utils/mp4-tools.ts"),o=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),s=n(/*! ../utils/logger */"./src/utils/logger.ts"),l=function(){function e(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this.initPTS=e,this.lastEndTime=null},t.resetNextTimestamp=function(){this.lastEndTime=null},t.resetInitSegment=function(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment((0,a.patchEncyptionData)(e,i)),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,n=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=(0,a.parseInitSegment)(e);t||(t=u(i.audio,o.ElementaryStreamTypes.AUDIO)),n||(n=u(i.video,o.ElementaryStreamTypes.VIDEO));var r={};i.audio&&i.video?r.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?r.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:s.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},t.remux=function(e,t,n,o,l){var u,c=this.initPTS,d=this.lastEndTime,h={audio:void 0,video:void 0,text:o,id3:n,initSegment:void 0};(0,i.isFiniteNumber)(d)||(d=this.lastEndTime=l||0);var p=t.samples;if(!p||!p.length)return h;var f={initPTS:void 0,timescale:1},g=this.initData;if(g&&g.length||(this.generateInitSegment(p),g=this.initData),!g||!g.length)return s.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);var m=(0,a.getStartDTS)(g,p);(0,i.isFiniteNumber)(c)||(this.initPTS=f.initPTS=c=m-l);var v=(0,a.getDuration)(p,g),y=e?m-c:d,b=y+v;(0,a.offsetStartDTS)(g,p,c),v>0?this.lastEndTime=b:(s.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var E=!!g.audio,T=!!g.video,A="";E&&(A+="audio"),T&&(A+="video");var k={data1:p,startPTS:y,startDTS:y,endPTS:b,endDTS:b,type:A,hasAudio:E,hasVideo:T,nb:1,dropped:0};h.audio="audio"===k.type?k:void 0,h.video="audio"!==k.type?k:void 0,h.initSegment=f;var _=null!=(u=this.initPTS)?u:0;return h.id3=(0,r.flushTextTrackMetadataCueSamples)(n,l,_,_),o.samples.length&&(h.text=(0,r.flushTextTrackUserdataCueSamples)(o,l,_)),h},e}();function u(e,t){var n=null==e?void 0:e.codec;return n&&n.length>4?n:"hvc1"===n||"hev1"===n?"hvc1.1.c.L120.90":"av01"===n?"av01.0.04M.08":"avc1"===n||t===o.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const c=l},"./src/task-loop.ts":
/*!**************************!*\
    !*** ./src/task-loop.ts ***!
    \**************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.onHandlerDestroyed=function(){},t.hasInterval=function(){return!!this._tickInterval},t.hasNextTick=function(){return!!this._tickTimer},t.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},t.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},t.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},t.doTick=function(){},e}()},"./src/types/cmcd.ts":
/*!***************************!*\
    !*** ./src/types/cmcd.ts ***!
    \***************************/(e,t,n)=>{n.r(t),n.d(t,{CMCDObjectType:()=>i,CMCDStreamType:()=>a,CMCDStreamingFormat:()=>r,CMCDVersion:()=>o});var i,r,a,o=1;!function(e){e.MANIFEST="m",e.AUDIO="a",e.VIDEO="v",e.MUXED="av",e.INIT="i",e.CAPTION="c",e.TIMED_TEXT="tt",e.KEY="k",e.OTHER="o"}(i||(i={})),function(e){e.DASH="d",e.HLS="h",e.SMOOTH="s",e.OTHER="o"}(r||(r={})),function(e){e.VOD="v",e.LIVE="l"}(a||(a={}))},"./src/types/demuxer.ts":
/*!******************************!*\
    !*** ./src/types/demuxer.ts ***!
    \******************************/(e,t,n)=>{var i;n.r(t),n.d(t,{MetadataSchema:()=>i}),function(e){e.audioId3="org.id3",e.dateRange="com.apple.quicktime.HLS",e.emsg="https://aomedia.org/emsg/ID3"}(i||(i={}))},"./src/types/level.ts":
/*!****************************!*\
    !*** ./src/types/level.ts ***!
    \****************************/(e,t,n)=>{function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(r=i.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(r,"string"))?a:String(a)),i)}var r,a}n.r(t),n.d(t,{HdcpLevels:()=>a,HlsSkip:()=>r,HlsUrlParameters:()=>s,Level:()=>l,getSkipValue:()=>o});var r,a=["NONE","TYPE-0","TYPE-1","TYPE-2",null];function o(e,t){var n=e.canSkipUntil,i=e.canSkipDateRanges,a=e.endSN;return n&&(void 0!==t?t-a:0)<n?i?r.v2:r.Yes:r.No}!function(e){e.No="",e.Yes="YES",e.v2="v2"}(r||(r={}));var s=function(){function e(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}return e.prototype.addDirectives=function(e){var t=new self.URL(e);return void 0!==this.msn&&t.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href},e}(),l=function(){function e(e){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this.attrs=e.attrs,this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter((function(e){return e})).join(",").replace(/\.[^.,]+/g,"")}var t,n,r;return t=e,(n=[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(e){var t=e%this.url.length;this._urlId!==t&&(this.details=void 0,this._urlId=t)}}])&&i(t.prototype,n),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},"./src/types/loader.ts":
/*!*****************************!*\
    !*** ./src/types/loader.ts ***!
    \*****************************/(e,t,n)=>{var i,r;n.r(t),n.d(t,{PlaylistContextType:()=>i,PlaylistLevelType:()=>r}),function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(i||(i={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(r||(r={}))},"./src/types/transmuxer.ts":
/*!*********************************!*\
    !*** ./src/types/transmuxer.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{ChunkMetadata:()=>i});var i=function(e,t,n,i,r,a){void 0===i&&(i=0),void 0===r&&(r=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=r,this.partial=a}},"./src/utils/attr-list.ts":
/*!********************************!*\
    !*** ./src/utils/attr-list.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{AttrList:()=>a});var i=/^(\d+)x(\d+)$/,r=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(){function e(t){for(var n in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(n)&&(this[n]=t[n])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var n=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(2*i,2*i+2),16);return n}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.optionalFloat=function(e,t){var n=this[e];return n?parseFloat(n):t},t.enumeratedString=function(e){return this[e]},t.bool=function(e){return"YES"===this[e]},t.decimalResolution=function(e){var t=i.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,n={};for(r.lastIndex=0;null!==(t=r.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),n[t[1]]=i}return n},e}()},"./src/utils/binary-search.ts":
/*!************************************!*\
    !*** ./src/utils/binary-search.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i={search:function(e,t){for(var n=0,i=e.length-1,r=null,a=null;n<=i;){var o=t(a=e[r=(n+i)/2|0]);if(o>0)n=r+1;else{if(!(o<0))return a;i=r-1}}return null}}},"./src/utils/buffer-helper.ts":
/*!************************************!*\
    !*** ./src/utils/buffer-helper.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{BufferHelper:()=>a});var i=n(/*! ./logger */"./src/utils/logger.ts"),r={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function e(){}return e.isBuffered=function(t,n){try{if(t)for(var i=e.getBuffered(t),r=0;r<i.length;r++)if(n>=i.start(r)&&n<=i.end(r))return!0}catch(e){}return!1},e.bufferInfo=function(t,n,i){try{if(t){var r,a=e.getBuffered(t),o=[];for(r=0;r<a.length;r++)o.push({start:a.start(r),end:a.end(r)});return this.bufferedInfo(o,n,i)}}catch(e){}return{len:0,start:n,end:n,nextStart:void 0}},e.bufferedInfo=function(e,t,n){t=Math.max(0,t),e.sort((function(e,t){var n=e.start-t.start;return n||t.end-e.end}));var i=[];if(n)for(var r=0;r<e.length;r++){var a=i.length;if(a){var o=i[a-1].end;e[r].start-o<n?e[r].end>o&&(i[a-1].end=e[r].end):i.push(e[r])}else i.push(e[r])}else i=e;for(var s,l=0,u=t,c=t,d=0;d<i.length;d++){var h=i[d].start,p=i[d].end;if(t+n>=h&&t<p)u=h,l=(c=p)-t;else if(t+n<h){s=h;break}}return{len:l,start:u||0,end:c||0,nextStart:s}},e.getBuffered=function(e){try{return e.buffered}catch(e){return i.logger.log("failed to get media.buffered",e),r}},e}()},"./src/utils/cea-608-parser.ts":
/*!*************************************!*\
    !*** ./src/utils/cea-608-parser.ts ***!
    \*************************************/(e,t,n)=>{n.r(t),n.d(t,{CaptionScreen:()=>b,Row:()=>y,default:()=>_});var i,r=n(/*! ../utils/logger */"./src/utils/logger.ts"),a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=function(e){var t=e;return a.hasOwnProperty(e)&&(t=a[e]),String.fromCharCode(t)},s=15,l=100,u={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},c={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},h={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(i||(i={}));var f=function(){function e(){this.time=null,this.verboseLevel=i.ERROR}return e.prototype.log=function(e,t){if(this.verboseLevel>=e){var n="function"==typeof t?t():t;r.logger.log(this.time+" ["+e+"] "+n)}},e}(),g=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},m=function(){function e(e,t,n,i,r){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=i||"black",this.flash=r||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),v=function(){function e(e,t,n,i,r,a){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new m(t,n,i,r,a)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),y=function(){function e(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var t=0;t<l;t++)this.chars.push(new v);this.logger=e,this.pos=0,this.currPenState=new m}var t=e.prototype;return t.equals=function(e){for(var t=!0,n=0;n<l;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<l;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<l;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(i.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>l&&(this.logger.log(i.DEBUG,"Too large cursor position "+this.pos),this.pos=l)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){var t=this;e>=144&&this.backSpace();var n=o(e);this.pos>=l?this.logger.log(i.ERROR,(function(){return"Cannot insert "+e.toString(16)+" ("+n+") at position "+t.pos+". Skipping it!"})):(this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<l;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,n=0;n<l;n++){var i=this.chars[n].uchar;" "!==i&&(t=!1),e.push(i)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),b=function(){function e(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var t=0;t<s;t++)this.rows.push(new y(e));this.logger=e,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<s;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,n=0;n<s;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<s;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<s;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){this.logger.log(i.INFO,"setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){this.logger.log(i.INFO,(function(){return"pacData = "+JSON.stringify(e)}));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var n=0;n<s;n++)this.rows[n].clear();var r=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var o=a.rows[r].cueStartTime,l=this.logger.time;if(o&&null!==l&&o<l)for(var u=0;u<this.nrRollUpRows;u++)this.rows[t-this.nrRollUpRows+u+1].copy(a.rows[r+u])}}this.currRow=t;var c=this.rows[this.currRow];if(null!==e.indent){var d=e.indent,h=Math.max(d-1,0);c.setCursor(e.indent),e.color=c.chars[h].penState.foreground}var p={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(p)},t.setBkgData=function(e){this.logger.log(i.INFO,(function(){return"bkgData = "+JSON.stringify(e)})),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){var e=this;if(null!==this.nrRollUpRows){this.logger.log(i.TEXT,(function(){return e.getDisplayText()}));var t=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(t,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(i.INFO,"Rolling up")}else this.logger.log(i.DEBUG,"roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],n="",i=-1,r=0;r<s;r++){var a=this.rows[r].getTextString();a&&(i=r+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},t.getTextAndFormat=function(){return this.rows},e}(),E=function(){function e(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new b(n),this.nonDisplayedMemory=new b(n),this.lastOutputScreen=new b(n),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,this.logger.log(i.INFO,(function(){return"MODE="+e})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=this,n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(i.INFO,(function(){return r+": "+t.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(i.TEXT,(function(){return"DISPLAYED: "+t.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(i.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){this.logger.log(i.INFO,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){this.logger.log(i.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){this.logger.log(i.INFO,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){this.logger.log(i.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){this.logger.log(i.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(i.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){this.logger.log(i.INFO,"RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){this.logger.log(i.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){this.logger.log(i.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){this.logger.log(i.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){var e=this;if(this.logger.log(i.INFO,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(i.TEXT,(function(){return"DISP: "+e.displayedMemory.getDisplayText()}))}this.outputDataUpdate(!0)},t.ccTO=function(e){this.logger.log(i.INFO,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}this.logger.log(i.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=this.logger.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),T=function(){function e(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new f;this.channels=[null,new E(e,t,i),new E(e+1,n,i)],this.cmdHistory={a:null,b:null},this.logger=i}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var n,r,a,o=!1;this.logger.time=e;for(var s=0;s<t.length;s+=2)if(r=127&t[s],a=127&t[s+1],0!==r||0!==a){if(this.logger.log(i.DATA,"["+g([t[s],t[s+1]])+"] -> ("+g([r,a])+")"),(n=this.parseCmd(r,a))||(n=this.parseMidrow(r,a)),n||(n=this.parsePAC(r,a)),n||(n=this.parseBackgroundAttributes(r,a)),!n&&(o=this.parseChars(r,a))){var l=this.currentChannel;l&&l>0?this.channels[l].insertChars(o):this.logger.log(i.WARNING,"No channel found yet. TEXT-MODE?")}n||o||this.logger.log(i.WARNING,"Couldn't parse cleaned data "+g([r,a])+" orig: "+g([t[s],t[s+1]]))}},t.parseCmd=function(e,t){var n=this.cmdHistory;if(!((20===e||28===e||21===e||29===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(k(e,t,n))return A(null,null,n),this.logger.log(i.DEBUG,"Repeated command ("+g([e,t])+") is dropped"),!0;var r=20===e||21===e||23===e?1:2,a=this.channels[r];return 20===e||21===e||28===e||29===e?32===t?a.ccRCL():33===t?a.ccBS():34===t?a.ccAOF():35===t?a.ccAON():36===t?a.ccDER():37===t?a.ccRU(2):38===t?a.ccRU(3):39===t?a.ccRU(4):40===t?a.ccFON():41===t?a.ccRDC():42===t?a.ccTR():43===t?a.ccRTD():44===t?a.ccEDM():45===t?a.ccCR():46===t?a.ccENM():47===t&&a.ccEOC():a.ccTO(t-32),A(e,t,n),this.currentChannel=r,!0},t.parseMidrow=function(e,t){var n=0;if((17===e||25===e)&&t>=32&&t<=47){if((n=17===e?1:2)!==this.currentChannel)return this.logger.log(i.ERROR,"Mismatch channel in midrow parsing"),!1;var r=this.channels[n];return!!r&&(r.ccMIDROW(t),this.logger.log(i.DEBUG,"MIDROW ("+g([e,t])+")"),!0)}return!1},t.parsePAC=function(e,t){var n,i=this.cmdHistory;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(k(e,t,i))return A(null,null,i),!0;var r=e<=23?1:2;n=t>=64&&t<=95?1===r?u[e]:d[e]:1===r?c[e]:h[e];var a=this.channels[r];return!!a&&(a.setPAC(this.interpretPAC(n,t)),A(e,t,i),this.currentChannel=r,!0)},t.interpretPAC=function(e,t){var n,i={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,i.underline=1==(1&n),n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((n-16)/2),i},t.parseChars=function(e,t){var n,r,a=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19?(r=17===s?t+80:18===s?t+112:t+144,this.logger.log(i.INFO,"Special char '"+o(r)+"' in channel "+n),a=[r]):e>=32&&e<=127&&(a=0===t?[e]:[e,t]),a){var l=g(a);this.logger.log(i.DEBUG,"Char codes =  "+l.join(",")),A(e,t,this.cmdHistory)}return a},t.parseBackgroundAttributes=function(e,t){var n;if(!((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47))return!1;var i={};16===e||24===e?(n=Math.floor((t-32)/2),i.background=p[n],t%2==1&&(i.background=i.background+"_semi")):45===t?i.background="transparent":(i.foreground="black",47===t&&(i.underline=!0));var r=e<=23?1:2;return this.channels[r].setBkgData(i),A(e,t,this.cmdHistory),!0},t.reset=function(){for(var e=0;e<Object.keys(this.channels).length;e++){var t=this.channels[e];t&&t.reset()}this.cmdHistory={a:null,b:null}},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++){var n=this.channels[t];n&&n.cueSplitAtTime(e)}},e}();function A(e,t,n){n.a=e,n.b=t}function k(e,t,n){return n.a===e&&n.b===t}const _=T},"./src/utils/codecs.ts":
/*!*****************************!*\
    !*** ./src/utils/codecs.ts ***!
    \*****************************/(e,t,n)=>{n.r(t),n.d(t,{isCodecSupportedInMp4:()=>a,isCodecType:()=>r});var i={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function r(e,t){var n=i[t];return!!n&&!0===n[e.slice(0,4)]}function a(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}},"./src/utils/cues.ts":
/*!***************************!*\
    !*** ./src/utils/cues.ts ***!
    \***************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var i=n(/*! ./vttparser */"./src/utils/vttparser.ts"),r=n(/*! ./webvtt-parser */"./src/utils/webvtt-parser.ts"),a=n(/*! ./texttrack-utils */"./src/utils/texttrack-utils.ts"),o=/\s/,s={newCue:function(e,t,n,s){for(var l,u,c,d,h,p=[],f=self.VTTCue||self.TextTrackCue,g=0;g<s.rows.length;g++)if(c=!0,d=0,h="",!(l=s.rows[g]).isEmpty()){for(var m=0;m<l.chars.length;m++)o.test(l.chars[m].uchar)&&c?d++:(h+=l.chars[m].uchar,c=!1);l.cueStartTime=t,t===n&&(n+=1e-4),d>=16?d--:d++;var v=(0,i.fixLineBreaks)(h.trim()),y=(0,r.generateCueId)(t,n,v);e&&e.cues&&e.cues.getCueById(y)||((u=new f(t,n,v)).id=y,u.line=g+1,u.align="left",u.position=10+Math.min(80,10*Math.floor(8*d/32)),p.push(u))}return e&&p.length&&(p.sort((function(e,t){return"auto"===e.line||"auto"===t.line?0:e.line>8&&t.line>8?t.line-e.line:e.line-t.line})),p.forEach((function(t){return(0,a.addCueToTrack)(e,t)}))),p}};const l=s},"./src/utils/discontinuities.ts":
/*!**************************************!*\
    !*** ./src/utils/discontinuities.ts ***!
    \**************************************/(e,t,n)=>{n.r(t),n.d(t,{adjustSlidingStart:()=>c,alignMediaPlaylistByPDT:()=>p,alignPDT:()=>h,alignStream:()=>d,findDiscontinuousReferenceFrag:()=>l,findFirstFragWithCC:()=>o,shouldAlignOnDiscontinuities:()=>s});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./logger */"./src/utils/logger.ts"),a=n(/*! ../controller/level-helper */"./src/controller/level-helper.ts");function o(e,t){for(var n=null,i=0,r=e.length;i<r;i++){var a=e[i];if(a&&a.cc===t){n=a;break}}return n}function s(e,t,n){return!(!t.details||!(n.endCC>n.startCC||e&&e.cc<n.startCC))}function l(e,t,n){var i=e.fragments,a=t.fragments;if(a.length&&i.length){var s=o(i,a[0].cc);if(s&&(!s||s.startPTS))return s;r.logger.log("No frag in previous level to align on")}else r.logger.log("No fragments to align")}function u(e,t){if(e){var n=e.start+t;e.start=e.startPTS=n,e.endPTS=n+e.duration}}function c(e,t){for(var n=t.fragments,i=0,r=n.length;i<r;i++)u(n[i],e);t.fragmentHint&&u(t.fragmentHint,e),t.alignedSliding=!0}function d(e,t,n){t&&(function(e,t,n){if(s(e,n,t)){var a=l(n.details,t);a&&(0,i.isFiniteNumber)(a.start)&&(r.logger.log("Adjusting PTS using last level due to CC increase within current level "+t.url),c(a.start,t))}}(e,n,t),!n.alignedSliding&&t.details&&h(n,t.details),n.alignedSliding||!t.details||n.skippedSegments||(0,a.adjustSliding)(t.details,n))}function h(e,t){if(t.fragments.length&&e.hasProgramDateTime&&t.hasProgramDateTime){var n=t.fragments[0].programDateTime,a=e.fragments[0].programDateTime,o=(a-n)/1e3+t.fragments[0].start;o&&(0,i.isFiniteNumber)(o)&&(r.logger.log("Adjusting PTS using programDateTime delta "+(a-n)+"ms, sliding:"+o.toFixed(3)+" "+e.url+" "),c(o,e))}}function p(e,t){if(e.hasProgramDateTime&&t.hasProgramDateTime){var n=e.fragments,i=t.fragments;if(n.length&&i.length){var r=i[Math.round(i.length/2)-1],a=o(n,r.cc)||n[Math.round(n.length/2)-1],s=r.programDateTime,l=a.programDateTime;null!==s&&null!==l&&c((l-s)/1e3-(a.start-r.start),e)}}}},"./src/utils/ewma-bandwidth-estimator.ts":
/*!***********************************************!*\
    !*** ./src/utils/ewma-bandwidth-estimator.ts ***!
    \***********************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var i=n(/*! ../utils/ewma */"./src/utils/ewma.ts");const r=function(){function e(e,t,n){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new i.default(e),this.fast_=new i.default(t)}var t=e.prototype;return t.update=function(e,t){var n=this.slow_,r=this.fast_;this.slow_.halfLife!==e&&(this.slow_=new i.default(e,n.getEstimate(),n.getTotalWeight())),this.fast_.halfLife!==t&&(this.fast_=new i.default(t,r.getEstimate(),r.getTotalWeight()))},t.sample=function(e,t){var n=(e=Math.max(e,this.minDelayMs_))/1e3,i=8*t/n;this.fast_.sample(n,i),this.slow_.sample(n,i)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}()},"./src/utils/ewma.ts":
/*!***************************!*\
    !*** ./src/utils/ewma.ts ***!
    \***************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}var t=e.prototype;return t.sample=function(e,t){var n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_},e}()},"./src/utils/fetch-loader.ts":
/*!***********************************!*\
    !*** ./src/utils/fetch-loader.ts ***!
    \***********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>m,fetchSupported:()=>h});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ../loader/load-stats */"./src/loader/load-stats.ts"),a=n(/*! ../demux/chunk-cache */"./src/demux/chunk-cache.ts");function o(e){var t="function"==typeof Map?new Map:void 0;return o=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return s(e,arguments,c(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u(i,e)},o(e)}function s(e,t,n){return s=l()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&u(r,n.prototype),r},s.apply(null,arguments)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},d.apply(this,arguments)}function h(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(e){}return!1}var p=function(){function e(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||f,this.controller=new self.AbortController,this.stats=new r.LoadStats}var t=e.prototype;return t.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},t.abortInternal=function(){var e=this.response;e&&e.ok||(this.stats.aborted=!0,this.controller.abort())},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,n){var r=this,a=this.stats;if(a.loading.start)throw new Error("Loader can only be used once.");a.loading.start=self.performance.now();var o=function(e,t){var n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(d({},e.headers))};return e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),n}(e,this.controller.signal),s=n.onProgress,l="arraybuffer"===e.responseType,u=l?"byteLength":"length";this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout((function(){r.abortInternal(),n.onTimeout(a,e,r.response)}),t.timeout),self.fetch(this.request).then((function(n){if(r.response=r.loader=n,!n.ok){var o=n.status,u=n.statusText;throw new g(u||"fetch, bad network response",o,n)}return a.loading.first=Math.max(self.performance.now(),a.loading.start),a.total=parseInt(n.headers.get("Content-Length")||"0"),s&&(0,i.isFiniteNumber)(t.highWaterMark)?r.loadProgressively(n,a,e,t.highWaterMark,s):l?n.arrayBuffer():n.text()})).then((function(o){var l=r.response;self.clearTimeout(r.requestTimeout),a.loading.end=Math.max(self.performance.now(),a.loading.first);var c=o[u];c&&(a.loaded=a.total=c);var d={url:l.url,data:o};s&&!(0,i.isFiniteNumber)(t.highWaterMark)&&s(a,e,o,l),n.onSuccess(d,a,e,l)})).catch((function(t){if(self.clearTimeout(r.requestTimeout),!a.aborted){var i=t&&t.code||0,o=t?t.message:null;n.onError({code:i,text:o},e,t?t.details:null)}}))},t.getCacheAge=function(){var e=null;if(this.response){var t=this.response.headers.get("age");e=t?parseFloat(t):null}return e},t.loadProgressively=function(e,t,n,i,r){void 0===i&&(i=0);var o=new a.default,s=e.body.getReader();return function a(){return s.read().then((function(s){if(s.done)return o.dataLength&&r(t,n,o.flush(),e),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return t.loaded+=u,u<i||o.dataLength?(o.push(l),o.dataLength>=i&&r(t,n,o.flush(),e)):r(t,n,l,e),a()})).catch((function(){return Promise.reject()}))}()},e}();function f(e,t){return new self.Request(e.url,t)}var g=function(e){var t,n;function i(t,n,i){var r;return(r=e.call(this,t)||this).code=void 0,r.details=void 0,r.code=n,r.details=i,r}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n),i}(o(Error));const m=p},"./src/utils/hex.ts":
/*!**************************!*\
    !*** ./src/utils/hex.ts ***!
    \**************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i={hexDump:function(e){for(var t="",n=0;n<e.length;n++){var i=e[n].toString(16);i.length<2&&(i="0"+i),t+=i}return t}}},"./src/utils/imsc1-ttml-parser.ts":
/*!****************************************!*\
    !*** ./src/utils/imsc1-ttml-parser.ts ***!
    \****************************************/(e,t,n)=>{n.r(t),n.d(t,{IMSC1_CODEC:()=>c,parseIMSC1:()=>f});var i=n(/*! ./mp4-tools */"./src/utils/mp4-tools.ts"),r=n(/*! ./vttparser */"./src/utils/vttparser.ts"),a=n(/*! ./vttcue */"./src/utils/vttcue.ts"),o=n(/*! ../demux/id3 */"./src/demux/id3.ts"),s=n(/*! ./timescale-conversion */"./src/utils/timescale-conversion.ts"),l=n(/*! ./webvtt-parser */"./src/utils/webvtt-parser.ts");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}var c="stpp.ttml.im1t",d=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,h=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,p={left:"start",center:"center",right:"end",start:"start",end:"end"};function f(e,t,n,r,c){var d=(0,i.findBox)(new Uint8Array(e),["mdat"]);if(0!==d.length){var h=d.map((function(e){return(0,o.utf8ArrayToStr)(e)})),f=(0,s.toTimescaleFromScale)(t,1,n);try{h.forEach((function(e){return r(function(e,t){var n=new DOMParser,i=n.parseFromString(e,"text/xml"),r=i.getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(o).reduce((function(e,t){return e[t]=r.getAttribute("ttp:"+t)||o[t],e}),{}),c="preserve"!==r.getAttribute("xml:space"),d=m(g(r,"styling","style")),h=m(g(r,"layout","region")),f=g(r,"body","[begin]");return[].map.call(f,(function(e){var n=v(e,c);if(!n||!e.hasAttribute("begin"))return null;var i=E(e.getAttribute("begin"),s),r=E(e.getAttribute("dur"),s),o=E(e.getAttribute("end"),s);if(null===i)throw b(e);if(null===o){if(null===r)throw b(e);o=i+r}var f=new a.default(i-t,o-t,n);f.id=(0,l.generateCueId)(f.startTime,f.endTime,f.text);var g=function(e,t,n){var i="http://www.w3.org/ns/ttml#styling",r=null,a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=null!=e&&e.hasAttribute("style")?e.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(r=n[o]),a.reduce((function(n,a){var o=y(t,i,a)||y(e,i,a)||y(r,i,a);return o&&(n[a]=o),n}),{})}(h[e.getAttribute("region")],d[e.getAttribute("style")],d),m=g.textAlign;if(m){var T=p[m];T&&(f.lineAlign=T),f.align=m}return u(f,g),f})).filter((function(e){return null!==e}))}(e,f))}))}catch(e){c(e)}}else c(new Error("Could not parse IMSC1 mdat"))}function g(e,t,n){var i=e.getElementsByTagName(t)[0];return i?[].slice.call(i.querySelectorAll(n)):[]}function m(e){return e.reduce((function(e,t){var n=t.getAttribute("xml:id");return n&&(e[n]=t),e}),{})}function v(e,t){return[].slice.call(e.childNodes).reduce((function(e,n,i){var r;return"br"===n.nodeName&&i?e+"\n":null!==(r=n.childNodes)&&void 0!==r&&r.length?v(n,t):t?e+n.textContent.trim().replace(/\s+/g," "):e+n.textContent}),"")}function y(e,t,n){return e&&e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function b(e){return new Error("Could not parse ttml timestamp "+e)}function E(e,t){if(!e)return null;var n=(0,r.parseTimeStamp)(e);return null===n&&(d.test(e)?n=function(e,t){var n=d.exec(e),i=(0|n[4])+(0|n[5])/t.subFrameRate;return 3600*(0|n[1])+60*(0|n[2])+(0|n[3])+i/t.frameRate}(e,t):h.test(e)&&(n=function(e,t){var n=h.exec(e),i=Number(n[1]);switch(n[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/t.frameRate;case"t":return i/t.tickRate}return i}(e,t))),n}},"./src/utils/keysystem-util.ts":
/*!*************************************!*\
    !*** ./src/utils/keysystem-util.ts ***!
    \*************************************/(e,t,n)=>{n.r(t),n.d(t,{changeEndianness:()=>r,convertDataUriToArrayBytes:()=>a,strToUtf8array:()=>o});var i=n(/*! ./numeric-encoding-utils */"./src/utils/numeric-encoding-utils.ts");function r(e){var t=function(e,t,n){var i=e[t];e[t]=e[n],e[n]=i};t(e,0,3),t(e,1,2),t(e,4,5),t(e,6,7)}function a(e){var t,n,r=e.split(":"),a=null;if("data"===r[0]&&2===r.length){var s=r[1].split(";"),l=s[s.length-1].split(",");if(2===l.length){var u="base64"===l[0],c=l[1];u?(s.splice(-1,1),a=(0,i.base64Decode)(c)):(t=o(c).subarray(0,16),(n=new Uint8Array(16)).set(t,16-t.length),a=n)}}return a}function o(e){return Uint8Array.from(unescape(encodeURIComponent(e)),(function(e){return e.charCodeAt(0)}))}},"./src/utils/logger.ts":
/*!*****************************!*\
    !*** ./src/utils/logger.ts ***!
    \*****************************/(e,t,n)=>{n.r(t),n.d(t,{enableLogs:()=>s,logger:()=>l});var i=function(){},r={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=r;function o(e){var t=self.console[e];return t?t.bind(self.console,"["+e+"] >"):i}function s(e,t){if(self.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((function(t){a[t]=e[t]?e[t].bind(e):o(t)}))}(e,"debug","log","info","warn","error");try{a.log('Debug logs enabled for "'+t+'"')}catch(e){a=r}}else a=r}var l=r},"./src/utils/mediakeys-helper.ts":
/*!***************************************!*\
    !*** ./src/utils/mediakeys-helper.ts ***!
    \***************************************/(e,t,n)=>{var i,r,a;function o(e){switch(e){case r.FAIRPLAY:return i.FAIRPLAY;case r.PLAYREADY:return i.PLAYREADY;case r.WIDEVINE:return i.WIDEVINE;case r.CLEARKEY:return i.CLEARKEY}}function s(e){if(e===a.WIDEVINE)return i.WIDEVINE}function l(e){switch(e){case i.FAIRPLAY:return r.FAIRPLAY;case i.PLAYREADY:return r.PLAYREADY;case i.WIDEVINE:return r.WIDEVINE;case i.CLEARKEY:return r.CLEARKEY}}function u(e){var t=e.drmSystems,n=e.widevineLicenseUrl,r=t?[i.FAIRPLAY,i.WIDEVINE,i.PLAYREADY,i.CLEARKEY].filter((function(e){return!!t[e]})):[];return!r[i.WIDEVINE]&&n&&r.push(i.WIDEVINE),r}n.r(t),n.d(t,{KeySystemFormats:()=>r,KeySystemIds:()=>a,KeySystems:()=>i,getKeySystemsForConfig:()=>u,getSupportedMediaKeySystemConfigurations:()=>d,keySystemDomainToKeySystemFormat:()=>l,keySystemFormatToKeySystemDomain:()=>o,keySystemIdToKeySystemDomain:()=>s,requestMediaKeySystemAccess:()=>c}),function(e){e.CLEARKEY="org.w3.clearkey",e.FAIRPLAY="com.apple.fps",e.PLAYREADY="com.microsoft.playready",e.WIDEVINE="com.widevine.alpha"}(i||(i={})),function(e){e.CLEARKEY="org.w3.clearkey",e.FAIRPLAY="com.apple.streamingkeydelivery",e.PLAYREADY="com.microsoft.playready",e.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"}(r||(r={})),function(e){e.WIDEVINE="edef8ba979d64acea3c827dcd51d21ed"}(a||(a={}));var c="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function d(e,t,n,r){var a;switch(e){case i.FAIRPLAY:a=["cenc","sinf"];break;case i.WIDEVINE:case i.PLAYREADY:a=["cenc"];break;case i.CLEARKEY:a=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+e)}return function(e,t,n,i){var r={initDataTypes:e,persistentState:i.persistentState||"not-allowed",distinctiveIdentifier:i.distinctiveIdentifier||"not-allowed",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:t.map((function(e){return{contentType:'audio/mp4; codecs="'+e+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}})),videoCapabilities:n.map((function(e){return{contentType:'video/mp4; codecs="'+e+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}}))};return[r]}(a,t,n,r)}},"./src/utils/mediasource-helper.ts":
/*!*****************************************!*\
    !*** ./src/utils/mediasource-helper.ts ***!
    \*****************************************/(e,t,n)=>{function i(){return self.MediaSource||self.WebKitMediaSource}n.r(t),n.d(t,{getMediaSource:()=>i})},"./src/utils/mp4-tools.ts":
/*!********************************!*\
    !*** ./src/utils/mp4-tools.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{RemuxerTrackIdConfig:()=>c,appendUint8Array:()=>w,bin2str:()=>d,computeRawDurationFromSamples:()=>k,discardEPB:()=>R,findBox:()=>m,getDuration:()=>A,getStartDTS:()=>T,mp4Box:()=>L,mp4pssh:()=>P,offsetStartDTS:()=>_,parseEmsg:()=>x,parseInitSegment:()=>y,parsePssh:()=>O,parseSEIMessageFromNALu:()=>D,parseSamples:()=>C,parseSegmentIndex:()=>v,parseSinf:()=>E,patchEncyptionData:()=>b,readSint32:()=>f,readUint16:()=>h,readUint32:()=>p,segmentValidRange:()=>S,writeUint32:()=>g});var i=n(/*! ../loader/fragment */"./src/loader/fragment.ts"),r=n(/*! ./typed-array */"./src/utils/typed-array.ts"),a=n(/*! ../demux/id3 */"./src/demux/id3.ts"),o=n(/*! ../utils/logger */"./src/utils/logger.ts"),s=n(/*! ./hex */"./src/utils/hex.ts"),l=Math.pow(2,32)-1,u=[].push,c={video:1,audio:2,id3:3,text:4};function d(e){return String.fromCharCode.apply(null,e)}function h(e,t){var n=e[t]<<8|e[t+1];return n<0?65536+n:n}function p(e,t){var n=f(e,t);return n<0?4294967296+n:n}function f(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function g(e,t,n){e[t]=n>>24,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function m(e,t){var n=[];if(!t.length)return n;for(var i=e.byteLength,r=0;r<i;){var a=p(e,r),o=a>1?r+a:i;if(d(e.subarray(r+4,r+8))===t[0])if(1===t.length)n.push(e.subarray(r+8,o));else{var s=m(e.subarray(r+8,o),t.slice(1));s.length&&u.apply(n,s)}r=o}return n}function v(e){var t=[],n=e[0],i=8,r=p(e,i);i+=4,i+=0===n?8:16,i+=2;var a=e.length+0,o=h(e,i);i+=2;for(var s=0;s<o;s++){var l=i,u=p(e,l);l+=4;var c=2147483647&u;if(1==(2147483648&u)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var d=p(e,l);l+=4,t.push({referenceSize:c,subsegmentDuration:d,info:{duration:d/r,start:a,end:a+c-1}}),a+=c,i=l+=4}return{earliestPresentationTime:0,timescale:r,version:n,referencesCount:o,references:t}}function y(e){for(var t=[],n=m(e,["moov","trak"]),r=0;r<n.length;r++){var a=n[r],o=m(a,["tkhd"])[0];if(o){var s=o[0],l=0===s?12:20,u=p(o,l),c=m(a,["mdia","mdhd"])[0];if(c){var h=p(c,l=0===(s=c[0])?12:20),f=m(a,["mdia","hdlr"])[0];if(f){var g=d(f.subarray(8,12)),v={soun:i.ElementaryStreamTypes.AUDIO,vide:i.ElementaryStreamTypes.VIDEO}[g];if(v){var y=m(a,["mdia","minf","stbl","stsd"])[0],b=void 0;y&&(b=d(y.subarray(12,16))),t[u]={timescale:h,type:v},t[v]={timescale:h,id:u,codec:b}}}}}}return m(e,["moov","mvex","trex"]).forEach((function(e){var n=p(e,4),i=t[n];i&&(i.default={duration:p(e,12),flags:p(e,20)})})),t}function b(e,t){if(!e||!t)return e;var n=t.keyId;return n&&t.isCommonEncryption&&m(e,["moov","trak"]).forEach((function(e){var t=m(e,["mdia","minf","stbl","stsd"])[0].subarray(8),i=m(t,["enca"]),r=i.length>0;r||(i=m(t,["encv"])),i.forEach((function(e){m(r?e.subarray(28):e.subarray(78),["sinf"]).forEach((function(e){var t=E(e);if(t){var i=t.subarray(8,24);i.some((function(e){return 0!==e}))||(o.logger.log("[eme] Patching keyId in 'enc"+(r?"a":"v")+">sinf>>tenc' box: "+s.default.hexDump(i)+" -> "+s.default.hexDump(n)),t.set(n,8))}}))}))})),e}function E(e){var t=m(e,["schm"])[0];if(t){var n=d(t.subarray(4,8));if("cbcs"===n||"cenc"===n)return m(e,["schi","tenc"])[0]}return o.logger.error("[eme] missing 'schm' box"),null}function T(e,t){return m(t,["moof","traf"]).reduce((function(t,n){var i=m(n,["tfdt"])[0],r=i[0],a=m(n,["tfhd"]).reduce((function(t,n){var a=p(n,4),o=e[a];if(o){var s=p(i,4);1===r&&(s*=Math.pow(2,32),s+=p(i,8));var l=s/(o.timescale||9e4);if(isFinite(l)&&(null===t||l<t))return l}return t}),null);return null!==a&&isFinite(a)&&(null===t||a<t)?a:t}),null)||0}function A(e,t){for(var n=0,r=0,a=0,o=m(e,["moof","traf"]),s=0;s<o.length;s++){var l=o[s],u=m(l,["tfhd"])[0],c=t[p(u,4)];if(c){var d=c.default,h=p(u,0)|(null==d?void 0:d.flags),f=null==d?void 0:d.duration;8&h&&(f=p(u,2&h?12:8));for(var g=c.timescale||9e4,y=m(l,["trun"]),b=0;b<y.length;b++)!(n=k(y[b]))&&f&&(n=f*p(y[b],4)),c.type===i.ElementaryStreamTypes.VIDEO?r+=n/g:c.type===i.ElementaryStreamTypes.AUDIO&&(a+=n/g)}}if(0===r&&0===a){for(var E=0,T=m(e,["sidx"]),A=0;A<T.length;A++){var _=v(T[A]);null!=_&&_.references&&(E+=_.references.reduce((function(e,t){return e+t.info.duration||0}),0))}return E}return r||a}function k(e){var t=p(e,0),n=8;1&t&&(n+=4),4&t&&(n+=4);for(var i=0,r=p(e,4),a=0;a<r;a++)256&t&&(i+=p(e,n),n+=4),512&t&&(n+=4),1024&t&&(n+=4),2048&t&&(n+=4);return i}function _(e,t,n){m(t,["moof","traf"]).forEach((function(t){m(t,["tfhd"]).forEach((function(i){var r=p(i,4),a=e[r];if(a){var o=a.timescale||9e4;m(t,["tfdt"]).forEach((function(e){var t=e[0],i=p(e,4);if(0===t)i-=n*o,g(e,4,i=Math.max(i,0));else{i*=Math.pow(2,32),i+=p(e,8),i-=n*o,i=Math.max(i,0);var r=Math.floor(i/(l+1)),a=Math.floor(i%(l+1));g(e,4,r),g(e,8,a)}}))}}))}))}function S(e){var t={valid:null,remainder:null},n=m(e,["moof"]);if(!n)return t;if(n.length<2)return t.remainder=e,t;var i=n[n.length-1];return t.valid=(0,r.sliceUint8)(e,0,i.byteOffset-8),t.remainder=(0,r.sliceUint8)(e,i.byteOffset-8),t}function w(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function C(e,t){var n=[],r=t.samples,a=t.timescale,o=t.id,s=!1;return m(r,["moof"]).map((function(l){var u=l.byteOffset-8;m(l,["traf"]).map((function(l){var c=m(l,["tfdt"]).map((function(e){var t=e[0],n=p(e,4);return 1===t&&(n*=Math.pow(2,32),n+=p(e,8)),n/a}))[0];return void 0!==c&&(e=c),m(l,["tfhd"]).map((function(c){var d=p(c,4),h=16777215&p(c,0),g=0,v=0!=(16&h),y=0,b=0!=(32&h),E=8;d===o&&(0!=(1&h)&&(E+=8),0!=(2&h)&&(E+=4),0!=(8&h)&&(g=p(c,E),E+=4),v&&(y=p(c,E),E+=4),b&&(E+=4),"video"===t.type&&(s=function(e){if(!e)return!1;var t=e.indexOf("."),n=t<0?e:e.substring(0,t);return"hvc1"===n||"hev1"===n||"dvh1"===n||"dvhe"===n}(t.codec)),m(l,["trun"]).map((function(o){var l=o[0],c=16777215&p(o,0),d=0!=(1&c),h=0,m=0!=(4&c),v=0!=(256&c),b=0,E=0!=(512&c),T=0,A=0!=(1024&c),k=0!=(2048&c),_=0,S=p(o,4),w=8;d&&(h=p(o,w),w+=4),m&&(w+=4);for(var C=h+u,R=0;R<S;R++){if(v?(b=p(o,w),w+=4):b=g,E?(T=p(o,w),w+=4):T=y,A&&(w+=4),k&&(_=0===l?p(o,w):f(o,w),w+=4),t.type===i.ElementaryStreamTypes.VIDEO)for(var x=0;x<T;){var L=p(r,C);I(s,r[C+=4])&&D(r.subarray(C,C+L),s?2:1,e+_/a,n),C+=L,x+=L+4}e+=b/a}})))}))}))})),n}function I(e,t){if(e){var n=t>>1&63;return 39===n||40===n}return 6==(31&t)}function D(e,t,n,i){var r=R(e),o=0;o+=t;for(var s=0,l=0,u=!1,c=0;o<r.length;){s=0;do{if(o>=r.length)break;s+=c=r[o++]}while(255===c);l=0;do{if(o>=r.length)break;l+=c=r[o++]}while(255===c);var d=r.length-o;if(!u&&4===s&&o<r.length){if(u=!0,181===r[o++]){var f=h(r,o);if(o+=2,49===f){var g=p(r,o);if(o+=4,1195456820===g){var m=r[o++];if(3===m){var v=r[o++],y=64&v,b=y?2+3*(31&v):0,E=new Uint8Array(b);if(y){E[0]=v;for(var T=1;T<b;T++)E[T]=r[o++]}i.push({type:m,payloadType:s,pts:n,bytes:E})}}}}}else if(5===s&&l<d){if(u=!0,l>16){for(var A=[],k=0;k<16;k++){var _=r[o++].toString(16);A.push(1==_.length?"0"+_:_),3!==k&&5!==k&&7!==k&&9!==k||A.push("-")}for(var S=l-16,w=new Uint8Array(S),C=0;C<S;C++)w[C]=r[o++];i.push({payloadType:s,pts:n,uuid:A.join(""),userData:(0,a.utf8ArrayToStr)(w),userDataBytes:w})}}else if(l<d)o+=l;else if(l>d)break}}function R(e){for(var t=e.byteLength,n=[],i=1;i<t-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(n.push(i+2),i+=2):i++;if(0===n.length)return e;var r=t-n.length,a=new Uint8Array(r),o=0;for(i=0;i<r;o++,i++)o===n[0]&&(o++,n.shift()),a[i]=e[o];return a}function x(e){var t=e[0],n="",i="",r=0,a=0,o=0,s=0,l=0,u=0;if(0===t){for(;"\0"!==d(e.subarray(u,u+1));)n+=d(e.subarray(u,u+1)),u+=1;for(n+=d(e.subarray(u,u+1)),u+=1;"\0"!==d(e.subarray(u,u+1));)i+=d(e.subarray(u,u+1)),u+=1;i+=d(e.subarray(u,u+1)),u+=1,r=p(e,12),a=p(e,16),s=p(e,20),l=p(e,24),u=28}else if(1===t){r=p(e,u+=4);var c=p(e,u+=4),h=p(e,u+=4);for(u+=4,o=Math.pow(2,32)*c+h,Number.isSafeInteger(o)||(o=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),s=p(e,u),l=p(e,u+=4),u+=4;"\0"!==d(e.subarray(u,u+1));)n+=d(e.subarray(u,u+1)),u+=1;for(n+=d(e.subarray(u,u+1)),u+=1;"\0"!==d(e.subarray(u,u+1));)i+=d(e.subarray(u,u+1)),u+=1;i+=d(e.subarray(u,u+1)),u+=1}return{schemeIdUri:n,value:i,timeScale:r,presentationTime:o,presentationTimeDelta:a,eventDuration:s,id:l,payload:e.subarray(u,e.byteLength)}}function L(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=n.length,a=8,o=r;o--;)a+=n[o].byteLength;var s=new Uint8Array(a);for(s[0]=a>>24&255,s[1]=a>>16&255,s[2]=a>>8&255,s[3]=255&a,s.set(e,4),o=0,a=8;o<r;o++)s.set(n[o],a),a+=n[o].byteLength;return s}function P(e,t,n){if(16!==e.byteLength)throw new RangeError("Invalid system id");var i,r,a;if(t){i=1,r=new Uint8Array(16*t.length);for(var o=0;o<t.length;o++){var s=t[o];if(16!==s.byteLength)throw new RangeError("Invalid key");r.set(s,16*o)}}else i=0,r=new Uint8Array;i>0?(a=new Uint8Array(4),t.length>0&&new DataView(a.buffer).setUint32(0,t.length,!1)):a=new Uint8Array;var l=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(l.buffer).setUint32(0,n.byteLength,!1),L([112,115,115,104],new Uint8Array([i,0,0,0]),e,a,r,l,n||new Uint8Array)}function O(e){if(!(e instanceof ArrayBuffer)||e.byteLength<32)return null;var t={version:0,systemId:"",kids:null,data:null},n=new DataView(e),i=n.getUint32(0);if(e.byteLength!==i&&i>44)return null;if(1886614376!==n.getUint32(4))return null;if(t.version=n.getUint32(8)>>>24,t.version>1)return null;t.systemId=s.default.hexDump(new Uint8Array(e,12,16));var r=n.getUint32(28);if(0===t.version){if(i-32<r)return null;t.data=new Uint8Array(e,32,r)}else if(1===t.version){t.kids=[];for(var a=0;a<r;a++)t.kids.push(new Uint8Array(e,32+16*a,16))}return t}},"./src/utils/numeric-encoding-utils.ts":
/*!*********************************************!*\
    !*** ./src/utils/numeric-encoding-utils.ts ***!
    \*********************************************/(e,t,n)=>{function i(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function r(e){return btoa(e)}function a(e){return atob(e)}function o(e){return btoa(String.fromCharCode.apply(String,e))}function s(e){return i(o(e))}function l(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}n.r(t),n.d(t,{base64Decode:()=>l,base64DecodeToStr:()=>a,base64Encode:()=>o,base64ToBase64Url:()=>i,base64UrlEncode:()=>s,strToBase64Encode:()=>r})},"./src/utils/output-filter.ts":
/*!************************************!*\
    !*** ./src/utils/output-filter.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var i=function(){function e(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},t.newCue=function(e,t,n){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)},t.reset=function(){this.cueRanges=[],this.startTime=null},e}()},"./src/utils/texttrack-utils.ts":
/*!**************************************!*\
    !*** ./src/utils/texttrack-utils.ts ***!
    \**************************************/(e,t,n)=>{n.r(t),n.d(t,{addCueToTrack:()=>a,clearCurrentCues:()=>o,getCuesInRange:()=>l,removeCuesInRange:()=>s,sendAddTrackEvent:()=>r});var i=n(/*! ./logger */"./src/utils/logger.ts");function r(e,t){var n;try{n=new Event("addtrack")}catch(e){(n=document.createEvent("Event")).initEvent("addtrack",!1,!1)}n.track=e,t.dispatchEvent(n)}function a(e,t){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&!e.cues.getCueById(t.id))try{if(e.addCue(t),!e.cues.getCueById(t.id))throw new Error("addCue is failed for: "+t)}catch(n){i.logger.debug("[texttrack-utils]: "+n);var r=new self.TextTrackCue(t.startTime,t.endTime,t.text);r.id=t.id,e.addCue(r)}"disabled"===n&&(e.mode=n)}function o(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues)for(var n=e.cues.length;n--;)e.removeCue(e.cues[n]);"disabled"===t&&(e.mode=t)}function s(e,t,n,i){var r=e.mode;if("disabled"===r&&(e.mode="hidden"),e.cues&&e.cues.length>0)for(var a=l(e.cues,t,n),o=0;o<a.length;o++)i&&!i(a[o])||e.removeCue(a[o]);"disabled"===r&&(e.mode=r)}function l(e,t,n){var i=[],r=function(e,t){if(t<e[0].startTime)return 0;var n=e.length-1;if(t>e[n].endTime)return-1;for(var i=0,r=n;i<=r;){var a=Math.floor((r+i)/2);if(t<e[a].startTime)r=a-1;else{if(!(t>e[a].startTime&&i<n))return a;i=a+1}}return e[i].startTime-t<t-e[r].startTime?i:r}(e,t);if(r>-1)for(var a=r,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=n)i.push(s);else if(s.startTime>n)return i}return i}},"./src/utils/time-ranges.ts":
/*!**********************************!*\
    !*** ./src/utils/time-ranges.ts ***!
    \**********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i={toString:function(e){for(var t="",n=e.length,i=0;i<n;i++)t+="["+e.start(i).toFixed(3)+"-"+e.end(i).toFixed(3)+"]";return t}}},"./src/utils/timescale-conversion.ts":
/*!*******************************************!*\
    !*** ./src/utils/timescale-conversion.ts ***!
    \*******************************************/(e,t,n)=>{function i(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=!1);var r=e*t*n;return i?Math.round(r):r}function r(e,t,n,r){return void 0===n&&(n=1),void 0===r&&(r=!1),i(e,t,1/n,r)}function a(e,t){return void 0===t&&(t=!1),i(e,1e3,1/9e4,t)}function o(e,t){return void 0===t&&(t=1),i(e,9e4,1/t)}n.r(t),n.d(t,{toMpegTsClockFromTimescale:()=>o,toMsFromMpegTsClock:()=>a,toTimescaleFromBase:()=>i,toTimescaleFromScale:()=>r})},"./src/utils/typed-array.ts":
/*!**********************************!*\
    !*** ./src/utils/typed-array.ts ***!
    \**********************************/(e,t,n)=>{function i(e,t,n){return Uint8Array.prototype.slice?e.slice(t,n):new Uint8Array(Array.prototype.slice.call(e,t,n))}n.r(t),n.d(t,{sliceUint8:()=>i})},"./src/utils/vttcue.ts":
/*!*****************************!*\
    !*** ./src/utils/vttcue.ts ***!
    \*****************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});const i=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var e=["","lr","rl"],t=["start","middle","end","left","right"];function n(e,t){if("string"!=typeof t)return!1;if(!Array.isArray(e))return!1;var n=t.toLowerCase();return!!~e.indexOf(n)&&n}function i(e){return n(t,e)}function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var o in a)e[o]=a[o]}return e}function a(t,a,o){var s=this,l={enumerable:!0};s.hasBeenReset=!1;var u="",c=!1,d=t,h=a,p=o,f=null,g="",m=!0,v="auto",y="start",b=50,E="middle",T=50,A="middle";Object.defineProperty(s,"id",r({},l,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},l,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",r({},l,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},l,{get:function(){return h},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");h=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},l,{get:function(){return p},set:function(e){p=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},l,{get:function(){return f},set:function(e){f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},l,{get:function(){return g},set:function(t){var i=function(t){return n(e,t)}(t);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");g=i,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},l,{get:function(){return m},set:function(e){m=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},l,{get:function(){return v},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},l,{get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},l,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},l,{get:function(){return E},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},l,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},l,{get:function(){return A},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");A=t,this.hasBeenReset=!0}})),s.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}()},"./src/utils/vttparser.ts":
/*!********************************!*\
    !*** ./src/utils/vttparser.ts ***!
    \********************************/(e,t,n)=>{n.r(t),n.d(t,{VTTParser:()=>h,fixLineBreaks:()=>d,parseTimeStamp:()=>a});var i=n(/*! ./vttcue */"./src/utils/vttcue.ts"),r=function(){function e(){}return e.prototype.decode=function(e,t){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))},e}();function a(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+parseFloat(i||0)}var n=e.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}var o=function(){function e(){this.values=Object.create(null)}var t=e.prototype;return t.set=function(e,t){this.get(e)||""===t||(this.values[e]=t)},t.get=function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},t.has=function(e){return e in this.values},t.alt=function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},t.integer=function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},t.percent=function(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){var n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1},e}();function s(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);2===o.length&&t(o[0],o[1])}}var l=new i.default(0,0,""),u="middle"===l.align?"middle":"center";function c(e,t,n){var i=e;function r(){var t=a(e);if(null===t)throw new Error("Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function c(){e=e.replace(/^\s+/,"")}if(c(),t.startTime=r(),c(),"--\x3e"!==e.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.slice(3),c(),t.endTime=r(),c(),function(e,t){var i=new o;s(e,(function(e,t){var r;switch(e){case"region":for(var a=n.length-1;a>=0;a--)if(n[a].id===t){i.set(e,n[a].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":r=t.split(","),i.integer(e,r[0]),i.percent(e,r[0])&&i.set("snapToLines",!1),i.alt(e,r[0],["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",u,"end"]);break;case"position":r=t.split(","),i.percent(e,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",u,"end","line-left","line-right","auto"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start",u,"end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");var r=i.get("line","auto");"auto"===r&&-1===l.line&&(r=-1),t.line=r,t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100),t.align=i.get("align",u);var a=i.get("position","auto");"auto"===a&&50===l.position&&(a="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=a}(e,t)}function d(e){return e.replace(/<br(?: \/)?>/gi,"\n")}var h=function(){function e(){this.state="INITIAL",this.buffer="",this.decoder=new r,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var t=e.prototype;return t.parse=function(e){var t=this;function n(){var e=t.buffer,n=0;for(e=d(e);n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.slice(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.slice(n),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=n()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:r=n(),t.state){case"HEADER":/:/.test(r)?s(r,(function(e,t){}),/:/):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;if(t.cue=new i.default(0,0,""),t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{c(r,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var l=-1!==r.indexOf("--\x3e");if(!r||l&&(o=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r;continue;case"BADCUE":r||(t.state="ID")}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){var e=this;try{if((e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state||"BADWEBVTT"===e.state)throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this},e}()},"./src/utils/webvtt-parser.ts":
/*!************************************!*\
    !*** ./src/utils/webvtt-parser.ts ***!
    \************************************/(e,t,n)=>{n.r(t),n.d(t,{generateCueId:()=>d,parseWebVTT:()=>h});var i=n(/*! ./src/polyfills/number */"./src/polyfills/number.ts"),r=n(/*! ./vttparser */"./src/utils/vttparser.ts"),a=n(/*! ../demux/id3 */"./src/demux/id3.ts"),o=n(/*! ./timescale-conversion */"./src/utils/timescale-conversion.ts"),s=n(/*! ../remux/mp4-remuxer */"./src/remux/mp4-remuxer.ts"),l=/\r\n|\n\r|\n|\r/g,u=function(e,t,n){return void 0===n&&(n=0),e.slice(n,n+t.length)===t},c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()};function d(e,t,n){return c(e.toString())+c(t.toString())+c(n)}function h(e,t,n,c,h,p,f,g){var m,v=new r.VTTParser,y=(0,a.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(l,"\n").split("\n"),b=[],E=(0,o.toMpegTsClockFromTimescale)(t,n),T="00:00.000",A=0,k=0,_=!0;v.oncue=function(e){var t=c[h],n=c.ccOffset,i=(A-E)/9e4;null!=t&&t.new&&(void 0!==k?n=c.ccOffset=t.start:function(e,t,n){var i=e[t],r=e[i.prevCC];if(!r||!r.new&&i.new)return e.ccOffset=e.presentationOffset=i.start,void(i.new=!1);for(;null!==(a=r)&&void 0!==a&&a.new;){var a;e.ccOffset+=i.start-r.start,i.new=!1,r=e[(i=r).prevCC]}e.presentationOffset=n}(c,h,i)),i&&(n=i-c.presentationOffset);var r=e.endTime-e.startTime,a=(0,s.normalizePts)(9e4*(e.startTime+n-k),9e4*p)/9e4;e.startTime=Math.max(a,0),e.endTime=Math.max(a+r,0);var o=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(o)),e.id||(e.id=d(e.startTime,e.endTime,o)),e.endTime>0&&b.push(e)},v.onparsingerror=function(e){m=e},v.onflush=function(){m?g(m):f(b)},y.forEach((function(e){if(_){if(u(e,"X-TIMESTAMP-MAP=")){_=!1,e.slice(16).split(",").forEach((function(e){u(e,"LOCAL:")?T=e.slice(6):u(e,"MPEGTS:")&&(A=parseInt(e.slice(7)))}));try{k=function(e){var t=parseInt(e.slice(-3)),n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!((0,i.isFiniteNumber)(t)&&(0,i.isFiniteNumber)(n)&&(0,i.isFiniteNumber)(r)&&(0,i.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*n,(t+=6e4*r)+36e5*a}(T)/1e3}catch(e){m=e}return}""===e&&(_=!1)}v.parse(e+"\n")})),v.flush()}},"./src/utils/xhr-loader.ts":
/*!*********************************!*\
    !*** ./src/utils/xhr-loader.ts ***!
    \*********************************/(e,t,n)=>{n.r(t),n.d(t,{default:()=>s});var i=n(/*! ../utils/logger */"./src/utils/logger.ts"),r=n(/*! ../loader/load-stats */"./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m,o=function(){function e(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e?e.xhrSetup:null,this.stats=new r.LoadStats,this.retryDelay=0}var t=e.prototype;return t.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},t.abortInternal=function(){var e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,4!==e.readyState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},t.load=function(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e=this.config,t=this.context;if(e){var n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0;var r=this.xhrSetup;try{if(r)try{r(n,t.url)}catch(e){n.open("GET",t.url,!0),r(n,t.url)}n.readyState||n.open("GET",t.url,!0);var a=this.context.headers;if(a)for(var o in a)n.setRequestHeader(o,a[o])}catch(e){return void this.callbacks.onError({code:n.status,text:e.message},t,n)}t.rangeEnd&&n.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),n.onreadystatechange=this.readystatechange.bind(this),n.onprogress=this.loadprogress.bind(this),n.responseType=t.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),e.timeout),n.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,n=this.stats;if(e&&t){var r=t.readyState,a=this.config;if(!n.aborted&&r>=2)if(self.clearTimeout(this.requestTimeout),0===n.loading.first&&(n.loading.first=Math.max(self.performance.now(),n.loading.start)),4===r){t.onreadystatechange=null,t.onprogress=null;var o=t.status,s="arraybuffer"===t.responseType;if(o>=200&&o<300&&(s&&t.response||null!==t.responseText)){var l,u;if(n.loading.end=Math.max(self.performance.now(),n.loading.first),u=s?(l=t.response).byteLength:(l=t.responseText).length,n.loaded=n.total=u,!this.callbacks)return;var c=this.callbacks.onProgress;if(c&&c(n,e,l,t),!this.callbacks)return;var d={url:t.responseURL,data:l};this.callbacks.onSuccess(d,n,e,t)}else n.retry>=a.maxRetry||o>=400&&o<499?(i.logger.error(o+" while loading "+e.url),this.callbacks.onError({code:o,text:t.statusText},e,t)):(i.logger.warn(o+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),n.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}},t.loadtimeout=function(){i.logger.warn("timeout while loading "+this.context.url);var e=this.callbacks;e&&(this.abortInternal(),e.onTimeout(this.stats,this.context,this.loader))},t.loadprogress=function(e){var t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)},t.getCacheAge=function(){var e=null;if(this.loader&&a.test(this.loader.getAllResponseHeaders())){var t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e},e}();const s=o},"./node_modules/eventemitter3/index.js":
/*!*********************************************!*\
    !*** ./node_modules/eventemitter3/index.js ***!
    \*********************************************/e=>{var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,i,a,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new r(i,a||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,a=i.length,o=new Array(a);r<a;r++)o[r]=i[r].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,r,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,r),!0;case 5:return c.fn.call(c.context,t,i,r,a),!0;case 6:return c.fn.call(c.context,t,i,r,a,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,i);break;case 4:c[u].fn.call(c[u].context,t,i,r);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,i,r){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||o(this,a);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||r&&!s[l].once||i&&s[l].context!==i)&&u.push(s[l]);u.length?this._events[a]=1===u.length?u[0]:u:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},"./node_modules/url-toolkit/src/url-toolkit.js":
/*!*****************************************************!*\
    !*** ./node_modules/url-toolkit/src/url-toolkit.js ***!
    \*****************************************************/function(e){var t,n,i,r,a;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return i.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(u.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+o.path;u.path=a.normalizePath(d)}else u.path=s.path,o.params||(u.params=s.params,o.query||(u.query=s.query));return null===u.path&&(u.path=i.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(u)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i=n("./src/hls.ts");return i=i.default})(),e.exports=n())})),uo=Kr(lo),co=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"audioTracks",get:function(){return this.playback._hls.audioTracks||[]}},{key:"setup",value:function(){if(this.playback._hls){if(0===this.audioTracks.length)return this.bindPlaybackEvents();this.parseAudioTracks(),this.setInitialAudio()}}},{key:"bindPlaybackEvents",value:function(){var e=this;this.playback._hls.once(uo.Events.AUDIO_TRACKS_UPDATED,(function(){return e.setup()}))}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.lang||t.name||"").toLowerCase(),i=e.getAudioRole(t),r=e.getAudioInfo(n,t.id,i);r&&e.availableOptions.push(r)})),this.onReady()}},{key:"getAudioRole",value:function(e){return this.checkIfAudioTrackDescriptive(e)?"description":""}},{key:"checkIfAudioTrackDescriptive",value:function(e){var t,n;return null===(t=e.attrs)||void 0===t||null===(n=t.CHARACTERISTICS)||void 0===n?void 0:n.includes("public.accessibility.describes-video")}},{key:"updateAudioPlayback",value:function(){this.playback&&this.playback._hls&&(this.playback._hls.audioTrack=this.selectedAudio.id)}}]),n}(ao),ho=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"html5PlayerElement",get:function(){var e;return null===(e=this.playback)||void 0===e?void 0:e.el}},{key:"audioTracks",get:function(){var e,t=null===(e=this.html5PlayerElement)||void 0===e?void 0:e.audioTracks;return"object"===i(t)&&(t=Object.keys(t).map((function(e){return t[e]}))),t||[]}},{key:"setup",value:function(){if(this.html5PlayerElement){if(0===this.audioTracks.length)return this.bindPlaybackEvents();this.parseAudioTracks(),this.setInitialAudio()}}},{key:"bindPlaybackEvents",value:function(){var e=this;this.html5PlayerElement.audioTracks.addEventListener("addtrack",(function(){return e.setup()}),{once:!0})}},{key:"parseAudioTracks",value:function(){var e=this;this.availableOptions=[],this.audioTracks.forEach((function(t){var n=(t.language||t.label||"").toLowerCase(),i=e.getAudioRole(t),r=e.getAudioInfo(n,t.id,i);r&&e.availableOptions.push(r)})),this.onReady()}},{key:"getAudioRole",value:function(e){var t=e.kind;return"description"===t?t:""}},{key:"updateAudioPlayback",value:function(){var e=this;this.audioTracks.forEach((function(t){t.enabled=t.id.toString()===e.selectedAudio.id.toString()}))}}]),n}(ao),po=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"audio_selector"}},{key:"optionName",get:function(){return"audio"}},{key:"title",get:function(){return"&Aacute;udio"}},{key:"icon",get:function(){return'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Opções de áudio</span>'}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"defaultOption",get:function(){return this.core.options.defaultAudio||Ja}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.playback&&this.listenToOnce(this.playback,De.PLAYBACK_READY,this.onPlaybackReady)}},{key:"onPlaybackReady",value:function(){this.listenToOnce(this.playback.playback,De.PLAYBACK_LOADEDMETADATA,this.setup)}},{key:"containerChanged",value:function(){this.stopListening(),this.playback=this.core.activePlayback,this.bindEvents()}},{key:"setup",value:function(){var e=this;this.availableOptions=[];var t=this.playback.innerPlaybackName;if(t){if(this.selector&&this.stopListening(this.selector),"dash_shaka_playback"===t)this.selector=new so(this.playback);else if("hls"===t)this.selector=new co(this.playback);else{if(!["html5","html5_video","hls_fairplay_playback"].includes(t))return void _e.info(this.name,"could not setup audio selector");this.selector=new ho(this.playback)}this.listenTo(this.selector,Tn.WM_AUDIOSELECTOR_READY,this.onSelectorReady),this.listenTo(this.selector,Tn.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.selector,Tn.WM_AUDIO_AVAILABLE,(function(t){e.container.trigger(Tn.WM_AUDIO_AVAILABLE,t)})),this.selector.setup()}else _e.info(this.name,"should not setup audio selector")}},{key:"onSelectorReady",value:function(){this.availableOptions=this.selector.availableOptions,this.orderAudioTracks(),this.trigger(Tn.WM_SETTINGS_OPTIONS_CHANGED)}},{key:"orderAudioTracks",value:function(){var e=this.availableOptions.filter((function(e){return e.keys.includes("por")})),t=this.availableOptions.filter((function(e){return!e.keys.includes("por")}));e=e.sort((function(e,t){return e.role.localeCompare(t.role)})),t=t.sort((function(e,t){return e.label.localeCompare(t.label)})),this.availableOptions=[].concat(v(e),v(t))}},{key:"playbackUpdate",value:function(e){this.selector.audioSwitch(e)}},{key:"onAudioChanged",value:function(e){this.container.trigger(Tn.WM_AUDIO_CHANGED,e)}},{key:"getCurrentOption",value:function(){return this.selector.getCurrentOption()}}]),n}(Ka),fo=".settings__menu",go=".settings__options",mo=".settings__back-button",vo=".settings__header",yo=".settings__back-button__title",bo="settings__title-option",Eo="settings__box--options-rendered",To=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).hideSettingsBoxHandler=function(e){e instanceof KeyboardEvent&&"Escape"!==e.key||i.hideSettingsBox()},i}return o(n,[{key:"name",get:function(){return"settings"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"template",get:function(){return Ve('<div role="menu" class="settings__box settings__box--hidden" data-controls>\n  <button type="button" class="settings__back-button settings__back-button--hidden">\n    <span class="settings__back-icon">\n      <%= backIcon %>\n      <span class="visually-hidden">Voltar para Seleção de Áudio e Legenda</span>\n    </span>\n    <span class="settings__back-button__title settings__title"></span>\n  </button>\n  <div class="settings__header">\n    <span class="settings__title">Configurações</span>\n    <button type="button" class="settings__close settings__close--hidden"><%= closeIcon %></button>\n  </div>\n  <div class="settings__body">\n    <div class="settings__menu">\n      <% for (var i = 0; i < selectors.length; i++) { %>\n        <button type="button" class="settings__menu-item" data-selector-name="<%= selectors[i].name %>" role="menuitem" aria-expanded="false">\n          <span class="settings__menu-item-option">\n            <span class="settings__menu-item-icon" aria-hidden="true"><%= selectors[i].icon %></span>\n            <span class="settings__menu-item-title"><%= selectors[i].title %></span>\n          </span>\n          <span class="settings__menu-item-selected">\n            <div class="settings__menu-item-label">\n              <span class="settings__menu-item-label-language"><%= selectors[i].selected.language %></span>\n              <span class="settings__menu-item-label-role"><%= selectors[i].selected.role %></span>\n            </div>\n            <span class="settings__menu-item-arrow-icon"><%= arrowIcon %></span>\n          </span>\n        </button>\n      <% } %>\n    </div>\n    <div class="settings__options settings__options--hidden"></div>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"settings","data-settings":""}}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"events",get:function(){return{click:"toggleSettingsBox"}}},{key:"selectors",get:function(){return this._selectors=this._selectors||[new po(this.core),new Za(this.core)],this._selectors}},{key:"availableSelectors",get:function(){return this.selectors.filter((function(e){return e.shouldRender()}))}},{key:"getExternalInterface",value:function(){return{getSelectedSettings:this.getSelectedSettings,getDefaultSettings:this.getDefaultSettings}}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onContainerChanged),this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.mediaControl,De.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.mediaControl,De.MEDIACONTROL_HIDE,this.onMediaControlhide),this.selectors.forEach((function(t){e.listenTo(t,Tn.WM_SETTINGS_OPTIONS_CHANGED,e.render)}))}},{key:"onMediaControlhide",value:function(){if(!this.mediaControl.keepVisible&&this.isSettingsBoxVisible){this.$settingsBox.remove();var e=this.mediaControl.$modal;e&&e.removeClass("settings__modal"),this.resetSettings(),this.triggerDidHideModalElement()}}},{key:"bindMenuClickEvents",value:function(){this.unbindMenuClickEvents(),this.$settingsMenuitem=this.$settingsBox.find(".settings__menu-item"),this.$settingsMenuitem.on("click",this.clickMenu.bind(this))}},{key:"unbindMenuClickEvents",value:function(){this.$settingsMenuitem&&this.$settingsMenuitem.off("click")}},{key:"bindSettingsEvents",value:function(){var e=this;this.unbindSettingsEvents(),this.$settingsOptionsTitle=this.$settingsBox.find(".settings__options-title"),this.$settingsBox.on("click",(function(e){return e.stopPropagation()})),this.bindMenuClickEvents(),jn((function(){Y(document).one("click",e.hideSettingsBoxHandler),Y(document).on("keyup",e.hideSettingsBoxHandler),e.listenTo(e.mediaControl,Tn.MEDIACONTROL_ITEMCLICKED,e.hideSettingsBoxHandler)}))}},{key:"unbindSettingsEvents",value:function(){this.$settingsOptionsTitle&&this.$settingsOptionsTitle.off("click"),this.$settingsClose&&this.$settingsClose.off("click"),Y(document).off("click",this.hideSettingsBoxHandler),Y(document).off("keyup",this.hideSettingsBoxHandler),this.stopListening(this.mediaControl,Tn.MEDIACONTROL_ITEMCLICKED,this.hideSettingsBoxHandler)}},{key:"onContainerChanged",value:function(){this.resetSettings(),this.render()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(this.settingsFullScreenEnabled))}},{key:"updateSettingsFullScreenState",value:function(e){this.settingsFullScreenEnabled=this.currentWidth<540,this.isSettingsBoxVisible&&e!==this.settingsFullScreenEnabled&&(this.settingsFullScreenEnabled?this.showSettingsFullScreen():this.hideSettingsFullScreen())}},{key:"getPanelBetweenHeight",value:function(){var e=this.mediaControl.$el.find(".media-control-panel__between");return e&&e.height()}},{key:"getSettingBoxHeaderHeight",value:function(){var e=this.mediaControl.$modal.find(".settings__back-button");return e&&e.height()}},{key:"updateSettingsBoxMaxHeight",value:function(){if(this.isSettingsBoxVisible){var e=this.getPanelBetweenHeight(),t=this.getSettingBoxHeaderHeight();if(e>=0&&t>=0){var n=e-t;this.mediaControl.$modal.find(".settings__body").css({maxHeight:n})}}}},{key:"clickMenu",value:function(e){e.stopPropagation();var t=Y(e.target).data("selector-name"),n=this.selectors.find((function(e){return e.name===t}));this.fromMenuToOptions(),this.renderOptions(n),this.isKeyboardAction(e)&&n.$el.find(".settings__options-item--active").focus()}},{key:"renderOptions",value:function(e){this.$settingsBox.find(go).html(e.render().el),this.$settingsBox.find(yo).html(e.title).attr("aria-hidden",!0).addClass(bo),this.$settingsBox.find(".settings__back-button").on("click",this.fromOptionsToMenu.bind(this))}},{key:"fromMenuToOptions",value:function(){this.$settingsBox.addClass(Eo),this.$settingsBox.find(fo).addClass("settings__menu--hidden"),this.$settingsBox.find(vo).addClass("settings__header--hidden"),this.$settingsBox.find(go).removeClass("settings__options--hidden"),this.$settingsBox.find(mo).removeClass("settings__back-button--hidden"),this.updateSettingsBoxMaxHeight()}},{key:"fromOptionsToMenu",value:function(e){e&&e.stopPropagation(),this.$settingsBox.removeClass(Eo),this.$settingsBox.find(fo).removeClass("settings__menu--hidden"),this.$settingsBox.find(vo).removeClass("settings__header--hidden"),this.$settingsBox.find(go).addClass("settings__options--hidden"),this.$settingsBox.find(mo).addClass("settings__back-button--hidden"),this.$settingsBox.find(yo).html("Configurações").attr("aria-hidden",!1).removeClass(bo),this.updateSettingsBoxMaxHeight(),this.updateAllSelectors()}},{key:"updateButtonAttrs",value:function(e){this.$el.find(".settings__button").attr("aria-expanded",e)}},{key:"isKeyboardAction",value:function(e){return 0===(null==e?void 0:e.detail)}},{key:"toggleSettingsBox",value:function(e){e.stopPropagation(),this.isSettingsBoxVisible?this.hideSettingsBox():this.showSettingsBox(e)}},{key:"showSettingsBox",value:function(e){var t=this,n=this.template({selectors:this.availableSelectors,arrowIcon:Ha,backIcon:Lr,closeIcon:Pa});this.triggerWillShowModalElement(),this.settingsFullScreenEnabled||(this.$settingsBox=Y(n),this.$el.append(this.$settingsBox),this.updateButtonAttrs(!0),jn((function(){return t.$settingsBox.removeClass("settings__box--hidden")}))),this.mediaControl.$modal.addClass("settings__modal"),this.mediaControl.trigger(Tn.WM_SETTINGS_SHOW),this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_SHOW,"<div/>"),this.isSettingsBoxVisible=!0,this.updateSettingsBoxMaxHeight(),this.updateSettingsFullScreenState(!1),this.bindSettingsEvents(),this.mediaControl.setKeepVisible(),this.isKeyboardAction(e)&&this.el.querySelector(".settings__menu-item").focus()}},{key:"updateAllSelectors",value:function(){var e=this;this.availableSelectors.forEach((function(t){e.updateSelectorValue(t)}))}},{key:"updateSelectorValue",value:function(e){var t,n,i="[data-selector-name=".concat(e.name,"] .settings__menu-item-label-language"),r="[data-selector-name=".concat(e.name,"] .settings__menu-item-label-role"),a=null===(t=this.$settingsBox)||void 0===t?void 0:t.find(i),o=null===(n=this.$settingsBox)||void 0===n?void 0:n.find(r);null==a||a.html(e.selected.language),null==o||o.html(e.selected.role),this.bindMenuClickEvents()}},{key:"showSettingsFullScreen",value:function(){var e=this;if(this.isSettingsBoxVisible){this.$settingsBox&&this.$settingsBox.remove();var t=this.template({selectors:this.availableSelectors,arrowIcon:Ha,backIcon:Lr,closeIcon:Pa});this.mediaControl.updatePanelsVisibility({hide:!0}),this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_SHOW,t),this.hasPlayingBeforeModal=this.playback.isPlaying(),this.hasPlayingBeforeModal&&this.playback.pause(),this.$settingsBox=this.mediaControl.$modal.find(".settings__box"),this.$settingsBox.addClass("settings__fullscreen"),this.bindSettingsEvents(),jn((function(){e.$settingsBox.removeClass("settings__box--hidden"),e.$settingsClose=e.$settingsBox.find(".settings__close"),e.$settingsClose&&e.$settingsClose.removeClass("settings__close--hidden"),e.$settingsClose&&e.$settingsClose.on("click",e.hideSettingsBox.bind(e))}))}}},{key:"hideSettingsBox",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isSettingsBoxVisible&&(this.$settingsBox.addClass("settings__box--hidden"),this.updateButtonAttrs(!1),this.$settingsBox.one("transitionend",(function(){return e.$settingsBox.remove()})),this.unbindSettingsEvents(),this.resetSettings(),this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_HIDE,t),this.mediaControl.trigger(Tn.WM_SETTINGS_HIDE),this.mediaControl.resetKeepVisible(),this.triggerDidHideModalElement(),this.resetSettings(),this.hasPlayingBeforeModal&&this.playback.play())}},{key:"hideSettingsFullScreen",value:function(){this.mediaControl.updatePanelsVisibility({hide:!1}),this.showSettingsBox()}},{key:"resetSettings",value:function(){this.isSettingsBoxVisible=!1}},{key:"getSelectedSettings",value:function(){var e={};return this.availableSelectors.forEach((function(t){e[t.optionName]=t.getCurrentOption()})),e}},{key:"getDefaultSettings",value:function(){var e={};return this.selectors.forEach((function(t){e[t.optionName]=t.defaultOption})),e}},{key:"shouldRender",value:function(){return this.availableSelectors.length>0&&"ad"!==this.core.getPlaybackType()}},{key:"render",value:function(){if(!this.isSettingsBoxVisible){this.$el.html("");var e=En.getStyleFrom('.clappr-player#wp3-player-0 .media-control.volume-modal--visible .settings__box {\n  opacity: 0.3; }\n\n.clappr-player#wp3-player-0 .media-control.volume-modal--visible .media-control-panel__modal {\n  z-index: -1; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-option, .clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__menu-item-selected {\n  padding-top: 8px;\n  padding-bottom: 8px; }\n\n.clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item {\n  padding: 8px 32px 8px 60px; }\n  .clappr-player#wp3-player-0 .media-control.touch .media-control-panel__modal .settings__options-item--active {\n    padding-left: 4px; }\n\n.clappr-player#wp3-player-0 .media-control .media-control-panel .settings .settings__box--hidden {\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel__modal.settings__modal {\n  z-index: 998; }\n\n.clappr-player#wp3-player-0 .media-control.w360 .settings__box, .clappr-player#wp3-player-0 .media-control.w480 .settings__box, .clappr-player#wp3-player-0 .media-control.w540 .settings__box {\n  background-color: transparent; }\n\n.clappr-player#wp3-player-0 .settings {\n  position: relative;\n  cursor: pointer;\n  line-height: 100%; }\n  .clappr-player#wp3-player-0 .settings__button {\n    width: 100%;\n    height: 100%;\n    padding: 0; }\n  .clappr-player#wp3-player-0 .settings__box {\n    position: absolute;\n    right: 12px;\n    bottom: 64px;\n    cursor: default;\n    border-radius: 8px;\n    background-color: rgba(0, 0, 0, 0.8);\n    z-index: 998;\n    box-sizing: content-box;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    will-change: opacity; }\n    .clappr-player#wp3-player-0 .settings__box--options-rendered .settings__title {\n      padding-right: 32px; }\n  .clappr-player#wp3-player-0 .settings__header {\n    display: none; }\n  .clappr-player#wp3-player-0 .settings__back-button {\n    display: flex;\n    margin: 0;\n    padding: 0;\n    border: 0;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n    background: none;\n    align-items: center;\n    flex-shrink: 0;\n    cursor: pointer;\n    width: 100%; }\n    .clappr-player#wp3-player-0 .settings__back-button--hidden {\n      display: none; }\n  .clappr-player#wp3-player-0 .settings__body {\n    flex-grow: 2;\n    box-sizing: content-box;\n    padding: 12px 0;\n    align-items: center;\n    max-height: 91px;\n    overflow: auto; }\n  .clappr-player#wp3-player-0 .settings__menu, .clappr-player#wp3-player-0 .settings__options, .clappr-player#wp3-player-0 .settings__options-wrapper, .clappr-player#wp3-player-0 .settings__options-menu {\n    max-height: inherit; }\n  .clappr-player#wp3-player-0 .settings__title {\n    display: flex;\n    padding: 12px;\n    align-items: center;\n    opacity: 0.5;\n    font-family: "opensans-regular";\n    letter-spacing: -0.5;\n    font-size: 15px;\n    line-height: 1;\n    color: #FFFFFF;\n    text-transform: capitalize; }\n    .clappr-player#wp3-player-0 .settings__title-option {\n      padding-left: 0; }\n  .clappr-player#wp3-player-0 .settings__close {\n    display: none;\n    box-sizing: content-box;\n    width: 24px;\n    height: 24px;\n    padding: 12px;\n    cursor: pointer;\n    border: 0;\n    background: none; }\n    .clappr-player#wp3-player-0 .settings__close svg {\n      width: 100%;\n      height: 100%; }\n  .clappr-player#wp3-player-0 .settings__separator {\n    display: block;\n    width: 100%;\n    height: 1px;\n    border: 0;\n    background-color: #666;\n    opacity: .4;\n    margin: 12px 0; }\n  .clappr-player#wp3-player-0 .settings__menu {\n    list-style-type: none;\n    background: none;\n    padding: 0;\n    margin: 0;\n    height: auto;\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .settings__menu > li {\n      width: 100%; }\n    .clappr-player#wp3-player-0 .settings__menu-item {\n      display: flex;\n      flex-shrink: 0;\n      align-items: center;\n      justify-content: space-between;\n      align-self: stretch;\n      position: static;\n      line-height: 1.14;\n      padding: 0;\n      margin: 0;\n      background: none;\n      border: 0;\n      width: 100%; }\n      .clappr-player#wp3-player-0 .settings__menu-item-label {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start; }\n        .clappr-player#wp3-player-0 .settings__menu-item-label-language, .clappr-player#wp3-player-0 .settings__menu-item-label-role {\n          display: inline-block;\n          font-family: "opensans-regular", sans-serif;\n          text-overflow: ellipsis;\n          white-space: nowrap;\n          color: #888A89; }\n        .clappr-player#wp3-player-0 .settings__menu-item-label-language {\n          font-size: 14px; }\n        .clappr-player#wp3-player-0 .settings__menu-item-label-role {\n          font-size: 13px; }\n      .clappr-player#wp3-player-0 .settings__menu-item-option {\n        padding: 4px 0 4px 16px; }\n      .clappr-player#wp3-player-0 .settings__menu-item-selected {\n        padding: 4px 16px 4px 16px; }\n      .clappr-player#wp3-player-0 .settings__menu-item:hover {\n        cursor: pointer; }\n      .clappr-player#wp3-player-0 .settings__menu-item-option {\n        display: flex;\n        align-items: center;\n        pointer-events: none; }\n      .clappr-player#wp3-player-0 .settings__menu-item-icon {\n        width: 16px;\n        height: 16px;\n        margin-right: 8px; }\n        .clappr-player#wp3-player-0 .settings__menu-item-icon svg {\n          width: 100%;\n          height: 100%; }\n      .clappr-player#wp3-player-0 .settings__menu-item-title {\n        display: inline;\n        pointer-events: none;\n        font-family: "opensans-regular", sans-serif;\n        text-transform: capitalize;\n        font-size: 14px;\n        line-height: 1.14;\n        color: #FFFFFF;\n        opacity: 1; }\n      .clappr-player#wp3-player-0 .settings__menu-item-selected {\n        display: flex;\n        align-items: center;\n        pointer-events: none; }\n      .clappr-player#wp3-player-0 .settings__menu-item-arrow-icon {\n        width: 24px;\n        height: 24px;\n        margin-left: 8px; }\n        .clappr-player#wp3-player-0 .settings__menu-item-arrow-icon svg {\n          width: 100%;\n          height: 100%; }\n      .clappr-player#wp3-player-0 .settings__menu-item-value {\n        font-family: "opensans-regular", sans-serif;\n        font-size: 14px;\n        color: #FFFFFF;\n        opacity: 0.5;\n        cursor: pointer; }\n      .clappr-player#wp3-player-0 .settings__menu-item-title, .clappr-player#wp3-player-0 .settings__menu-item-value {\n        height: 16px; }\n    .clappr-player#wp3-player-0 .settings__menu--hidden {\n      display: none !important; }\n  .clappr-player#wp3-player-0 .settings__back-icon {\n    display: flex;\n    cursor: pointer;\n    width: 24px;\n    height: 24px;\n    padding: 12px;\n    margin-right: 4px;\n    box-sizing: content-box;\n    border: 0;\n    background: none; }\n    .clappr-player#wp3-player-0 .settings__back-icon svg {\n      width: 100%;\n      height: 100%; }\n  .clappr-player#wp3-player-0 .settings__options {\n    display: flex;\n    cursor: pointer;\n    width: 100%; }\n    .clappr-player#wp3-player-0 .settings__options-wrapper {\n      margin: 0 auto;\n      width: 100%; }\n    .clappr-player#wp3-player-0 .settings__options-header {\n      display: flex;\n      align-items: center; }\n    .clappr-player#wp3-player-0 .settings__options-title {\n      display: flex;\n      cursor: pointer;\n      opacity: 0.7;\n      font-family: "opensans-regular", sans-serif;\n      color: #FFFFFF;\n      text-transform: capitalize;\n      text-align: left;\n      font-size: 14px; }\n    .clappr-player#wp3-player-0 .settings__options-menu {\n      list-style-type: none;\n      background: none;\n      padding: 0;\n      margin: 0; }\n    .clappr-player#wp3-player-0 .settings__options-item {\n      display: flex;\n      align-items: center;\n      box-sizing: content-box;\n      height: 24px;\n      padding: 6px 32px 6px 56px;\n      background: none;\n      font-family: "opensans-regular", sans-serif;\n      font-weight: 400;\n      line-height: 1.14;\n      color: #FFFFFF;\n      opacity: 1;\n      border: 0; }\n      .clappr-player#wp3-player-0 .settings__options-item::before {\n        content: ""; }\n      .clappr-player#wp3-player-0 .settings__options-item-label {\n        display: flex;\n        flex-direction: column;\n        align-items: flex-start; }\n        .clappr-player#wp3-player-0 .settings__options-item-label-language, .clappr-player#wp3-player-0 .settings__options-item-label-role {\n          display: inline-block;\n          text-overflow: ellipsis;\n          white-space: nowrap; }\n        .clappr-player#wp3-player-0 .settings__options-item-label-language {\n          font-size: 15px; }\n        .clappr-player#wp3-player-0 .settings__options-item-label-role {\n          font-size: 13px; }\n      .clappr-player#wp3-player-0 .settings__options-item--active {\n        margin-left: 0;\n        font-weight: 700;\n        font-family: "opensans-regular", sans-serif;\n        opacity: 1;\n        padding-left: 0; }\n    .clappr-player#wp3-player-0 .settings__options-active-icon {\n      display: inline-block;\n      width: 24px;\n      height: 24px;\n      padding: 0 16px;\n      box-sizing: content-box; }\n      .clappr-player#wp3-player-0 .settings__options-active-icon svg {\n        width: 100%;\n        height: 100%; }\n    .clappr-player#wp3-player-0 .settings__options--hidden {\n      display: none !important; }\n',{playerId:this.core.options.playerId}),t=En.getStyleFrom(".clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  border-radius: 0;\n  right: 0;\n  bottom: 0;\n  padding: 0; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header {\n    display: flex;\n    width: 100%;\n    justify-content: space-between;\n    margin-bottom: 8px;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__header--hidden {\n      display: none; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__body {\n    max-height: calc(100% - 57px) !important;\n    max-width: 336px;\n    padding: 0; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    justify-content: center;\n    box-sizing: border-box;\n    flex-direction: column;\n    max-height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-title {\n      align-self: center; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__menu-item-value {\n      line-height: 1.14; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options {\n    max-height: 100%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-wrapper {\n      margin-left: 20%; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-title {\n      height: 24px;\n      align-items: center; }\n    .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__options-item {\n      padding-right: 88px; }\n  .clappr-player#wp3-player-0 .media-control .settings__box.settings__fullscreen .settings__close {\n    display: flex; }\n",{playerId:this.core.options.playerId});if(this.$el.append(e[0]).append(t[0]),this.shouldRender()){this.$el.removeClass("media-control-element--hidden"),this.$el.attr("style","");var n=Y('<button type="button" aria-haspopup="true" aria-expanded="false" class="settings__button media-control-button"></button>');n.append('<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.26892 3H20.2689C21.3689 3 22.2589 3.9 22.2589 5L22.2689 23L18.2689 19H4.26892C3.16892 19 2.26892 18.1 2.26892 17V5C2.26892 3.9 3.16892 3 4.26892 3ZM20.2689 11H16.2689V13H20.2689V11ZM20.2689 17H10.2689V15H20.2689V17ZM4.26892 17H8.26892V15H4.26892V17ZM14.2689 13H4.26892V11H14.2689V13Z" fill="#EEEEEE"/>\n<mask id="mask0_6_301" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="2" y="3" width="21" height="20">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M4.26892 3H20.2689C21.3689 3 22.2589 3.9 22.2589 5L22.2689 23L18.2689 19H4.26892C3.16892 19 2.26892 18.1 2.26892 17V5C2.26892 3.9 3.16892 3 4.26892 3ZM20.2689 11H16.2689V13H20.2689V11ZM20.2689 17H10.2689V15H20.2689V17ZM4.26892 17H8.26892V15H4.26892V17ZM14.2689 13H4.26892V11H14.2689V13Z" fill="white"/>\n</mask>\n<g mask="url(#mask0_6_301)">\n</g>\n</svg>\n<span class="visually-hidden">Opções de áudio e legenda</span>'),this.$el.append(n)}else this.$el.addClass("media-control-element--hidden");return this}}}]),n}(Ti),Ao=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).supportedTypes={vod:{thumb:function(e){return i.updateThumbForVod(e)},text:function(e){return i.thumbTextForVod(e)}},live:{thumb:function(e){return i.updateThumbForLive(e)},text:function(e){return i.thumbTextForLive(e)}}},i}return o(n,[{key:"name",get:function(){return"thumb-preview"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"mediaControl",get:function(){return this._mediaControl||(this._mediaControl=this.core.getPlugin("globo_media_control"))}},{key:"seekbar",get:function(){return this._seekbar||(this._seekbar=this.core.getPlugin("seekbar"))}},{key:"template",get:function(){return Ve('<div class="thumb-preview__thumb"></div>\n<div class="thumb-preview__position"></div>\n')}},{key:"attributes",get:function(){return{class:"thumb-preview"}}},{key:"thumbHost",get:function(){return this.options.env.name,"".concat(this.options.env.protocol,"://live-thumbs.video.globo.com/")}},{key:"bindEvents",value:function(){this.mediaControl&&(this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.show),this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSEMOVE_SEEKBAR,this.calculatePosition),this.listenTo(this.mediaControl,De.MEDIACONTROL_MOUSELEAVE_SEEKBAR,this.hide),this.listenTo(this.mediaControl,De.MEDIACONTROL_HIDE,this.hide),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.listenTo(this.core,De.CORE_RESIZE,this.checkOutline),this.trigger("plugin:thumbpreview:ready"),this.bindContainerEvents())}},{key:"bindContainerEvents",value:function(){this.mediaControl.container&&(this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.container.playback&&this.stopListening(this.container.playback),this.listenTo(this.container,De.CONTAINER_SETTINGSUPDATE,this.settingsUpdate),this.listenTo(this.container.playback,Tn.WM_RESOURCE_SELECTED,this.onResourceSelected))}},{key:"checkOutline",value:function(){ye.Fullscreen.fullscreenElement()&&Q.isIE11?this.$el.find(".thumb-preview__thumb").addClass("thumb-preview__thumb--no-outline"):this.$el.find(".thumb-preview__thumb").removeClass("thumb-preview__thumb--no-outline")}},{key:"onResourceSelected",value:function(e){this.thumbUrl=e.selectedResource&&e.selectedResource.thumbUrl}},{key:"updateThumbForVod",value:function(e){if(this.lastTimestamp!==e)if(this.lastTimestamp=e,this.thumbUrl){var t=Math.floor(e/60),n=Math.floor(e%60/5),i="".concat(this.thumbUrl,"/x96/tile/").concat(t,".jpg");this.$el.css({height:this.thumbSize.height,width:this.thumbSize.width}),this.$el.find(".thumb-preview__thumb").css({"background-image":"url(".concat(i,")"),"background-position":"center ".concat(n*-this.thumbSize.height,"px")}),this.mediaControl.$el.removeClass("thumb-preview-basic")}else this.mediaControl.$el.addClass("thumb-preview-basic")}},{key:"thumbTextForVod",value:function(e){return e.formattedTime}},{key:"updateThumbForLive",value:function(e){var t=this;this.throttledUpdateThumb||(this.throttledUpdateThumb=la((function(e){var n=Math.floor(Date.now()/1e3),i=t.mediaControl.container.playback.getDuration(),r=10*Math.floor((n-(i-e))/10),a=t.core.getCurrentPlayback().video.transmission.signal,o=t.thumbHost+a+"/snapshot/172/97/?utc="+r;t.$el.css({height:t.thumbSize.height,width:t.thumbSize.width}),t.$el.find(".thumb-preview__thumb").css({"background-image":"url("+o+")","background-size":"cover"})}),500,!0)),this.mediaControl.container.playback.dvrEnabled&&this.throttledUpdateThumb(e)}},{key:"thumbTextForLive",value:function(e){if(100===this.mediaControl.currentSeekPercentage){var t=this.mediaControl.container.playback.getDuration()-e.timestamp;return"Voltar "+this.formatTimeInterval(t)}return e.formattedTime}},{key:"show",value:function(e){this.$el.removeClass("thumb-preview--hidden"),this.canShow(e)?(this.core.trigger(Tn.WILL_SHOW_MODAL_ELEMENT,{name:this.name}),this.$el.css({"z-index":997}),this.$el.removeClass("thumb-preview--hidden")):this.hide()}},{key:"canShow",value:function(){return this.mediaControl.container.playback.settings.seekEnabled&&Object.keys(this.supportedTypes).includes(this.playbackType)}},{key:"hide",value:function(){this.$el.addClass("thumb-preview--hidden"),this.core.trigger(Tn.DID_HIDE_MODAL_ELEMENT,{name:this.name})}},{key:"settingsUpdate",value:function(){this.playbackType=this.mediaControl.container.getPlaybackType(),this.thumbSize={width:170,height:96}}},{key:"containerChanged",value:function(){var e=this,t=this.core.getPlugin("seek_time");t.render=function(){return e.render()},t.stopListening(this.mediaControl.container,De.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),t.update=function(t){return e.update(t)},t.listenTo(this.mediaControl.container,De.CONTAINER_PLAYBACKDVRSTATECHANGED,t.update),this.bindContainerEvents(),this.settingsUpdate(),this.trigger("plugin:thumbpreview:ready")}},{key:"render",value:function(){var e=this.core.getPlugin("seek_time");if(this.mediaControl&&e){this.$el.html(this.template());var t=En.getStyleFrom('.clappr-player#wp3-player-0 .media-control.settings-modal--visible .thumb-preview {\n  display: none; }\n\n.clappr-player#wp3-player-0 .media-control.touch .thumb-preview {\n  bottom: 52px; }\n\n.clappr-player#wp3-player-0 .thumb-preview {\n  opacity: 1;\n  visibility: visible;\n  transition: visibility 0.3s ease, opacity 0.3s ease;\n  position: absolute;\n  bottom: 44px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .thumb-preview--hidden {\n    opacity: 0;\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .thumb-preview__thumb {\n    position: absolute;\n    background-color: rgba(0, 0, 0, 0.75);\n    border-radius: 2px;\n    outline: 1px solid transparent;\n    background-repeat: no-repeat;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height: 100%; }\n    .clappr-player#wp3-player-0 .thumb-preview__thumb--no-outline {\n      outline: 0 !important; }\n  .clappr-player#wp3-player-0 .thumb-preview__position {\n    padding: 2px 8px 3px;\n    font-family: "opensans-regular", sans-serif;\n    font-size: 14px;\n    color: #fff;\n    text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n    border-radius: 2px;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    background-color: rgba(0, 0, 0, 0.5);\n    display: flex;\n    z-index: 100;\n    align-self: flex-end; }\n\n.clappr-player#wp3-player-0 .w425 .thumb-preview, .clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview {\n  border-radius: 3px;\n  background-color: rgba(0, 0, 0, 0.5);\n  width: auto;\n  height: 16px; }\n  .clappr-player#wp3-player-0 .w425 .thumb-preview__position, .clappr-player#wp3-player-0 .thumb-preview-basic .thumb-preview__position {\n    display: inline-block;\n    overflow: hidden;\n    position: initial;\n    padding: 0 6px;\n    width: auto;\n    height: auto;\n    font-size: 10px;\n    line-height: 16px; }\n',{playerId:this.core.options.playerId});this.$el.append(t[0]),e.setElement(this.el),this.seekbar.$seekBarContainer.append(this.el),this.$el.addClass("thumb-preview--hidden")}else this.listenToOnce(this,"plugin:thumbpreview:ready",this.render);this.checkOutline()}},{key:"calculatePosition",value:function(e){var t=e.touches&&e.touches.length>0&&e.touches[e.touches.length-1]||{},n=(e.pageX||t.pageX)-this.seekbar.$seekBarContainer.offset().left;this.hoverPosition=Math.min(1,Math.max(n/this.mediaControl.$seekBarContainer.width(),0))}},{key:"update",value:function(){var e=this.core.getPlugin("seek_time");if(this.hoverPosition&&e.hoveringOverSeekBar){var t=this.hoverPosition*this.core.getCurrentContainer().getDuration(),n=ye.formatTime(t),i=this.seekbar.$seekBarContainer;if(!i.length)return;if(isNaN(t))return;if(Object.keys(this.supportedTypes).includes(this.playbackType)){var r=this.supportedTypes[this.playbackType].thumb,a=this.supportedTypes[this.playbackType].text,o=i.width(),s=this.$el.width()/2,l=this.hoverPosition*o-s,u=o-this.$el.width();l=Math.max(0,Math.min(l,u)),this.$el.css("left",l),this.$el.find(".thumb-preview__position").text(a({timestamp:t,formattedTime:n})),this.core.mediaControl.$el.hasClass("w425")||r(t)}}}},{key:"formatTimeInterval",value:function(e){var t=!1;e*=1e3;var n=(e=parseInt(e/1e3,10))%60,i=(e=parseInt(e/60,10))%60,r=(e=parseInt(e/60,10))%24,a="";return r&&r>0&&(a+=r.toString().slice(-2)+"h",t=!0),i&&i>0&&(a+=i.toString().slice(-2)+"m"),t||(a+=("0"+n).slice(-2)+"s"),a.trim()}},{key:"destroy",value:function(){this._mediaControl=null,g(u(n.prototype),"destroy",this).call(this)}}]),n}(ze),ko={default:{10:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#0095DA"/>\n  <g opacity="0.3">\n    <path d="M20.5925 38.7763H15.2603V24.1773C15.2603 23.7746 15.266 23.2799 15.2775 22.6932C15.289 22.095 15.3063 21.4853 15.3293 20.864C15.3523 20.2313 15.3753 19.6618 15.3983 19.1556C15.2718 19.3052 15.0129 19.5641 14.6218 19.9322C14.2421 20.2888 13.8855 20.6109 13.5519 20.8986L10.6528 23.2282L8.08157 20.0185L16.2094 13.5473H20.5925V38.7763Z" fill="#111111"/>\n    <path d="M41.9184 26.1618C41.9184 28.198 41.7573 30.0157 41.4352 31.6148C41.1246 33.2139 40.6184 34.5714 39.9167 35.6874C39.2264 36.8033 38.3176 37.6546 37.1901 38.2413C36.0627 38.828 34.6937 39.1214 33.0831 39.1214C31.0583 39.1214 29.396 38.6095 28.096 37.5856C26.796 36.5502 25.8354 35.0661 25.2141 33.1334C24.5929 31.1892 24.2823 28.8653 24.2823 26.1618C24.2823 23.4353 24.5641 21.1056 25.1278 19.1729C25.7031 17.2287 26.6349 15.7389 27.9234 14.7035C29.2119 13.6681 30.9318 13.1504 33.0831 13.1504C35.0963 13.1504 36.753 13.6681 38.053 14.7035C39.3645 15.7274 40.3366 17.2114 40.9693 19.1556C41.602 21.0884 41.9184 23.4238 41.9184 26.1618ZM29.58 26.1618C29.58 28.083 29.6836 29.6879 29.8906 30.9763C30.1092 32.2533 30.4716 33.2139 30.9778 33.8582C31.484 34.5024 32.1858 34.8245 33.0831 34.8245C33.9689 34.8245 34.6649 34.5082 35.1711 33.8754C35.6888 33.2312 36.057 32.2706 36.2755 30.9936C36.4941 29.7051 36.6034 28.0945 36.6034 26.1618C36.6034 24.2406 36.4941 22.6357 36.2755 21.3472C36.057 20.0587 35.6888 19.0924 35.1711 18.4481C34.6649 17.7924 33.9689 17.4645 33.0831 17.4645C32.1858 17.4645 31.484 17.7924 30.9778 18.4481C30.4716 19.0924 30.1092 20.0587 29.8906 21.3472C29.6836 22.6357 29.58 24.2406 29.58 26.1618Z" fill="#111111"/>\n  </g>\n  <path d="M18.5925 36.7763H13.2603V22.1773C13.2603 21.7746 13.266 21.2799 13.2775 20.6932C13.289 20.095 13.3063 19.4853 13.3293 18.864C13.3523 18.2313 13.3753 17.6618 13.3983 17.1556C13.2718 17.3052 13.0129 17.5641 12.6218 17.9322C12.2421 18.2888 11.8855 18.6109 11.5519 18.8986L8.65279 21.2282L6.08157 18.0185L14.2094 11.5473H18.5925V36.7763Z" fill="#EEEEEE"/>\n  <path d="M39.9184 24.1618C39.9184 26.198 39.7573 28.0157 39.4352 29.6148C39.1246 31.2139 38.6184 32.5714 37.9167 33.6874C37.2264 34.8033 36.3176 35.6546 35.1901 36.2413C34.0627 36.828 32.6937 37.1214 31.0831 37.1214C29.0583 37.1214 27.396 36.6095 26.096 35.5856C24.796 34.5502 23.8354 33.0661 23.2141 31.1334C22.5929 29.1892 22.2823 26.8653 22.2823 24.1618C22.2823 21.4353 22.5641 19.1056 23.1278 17.1729C23.7031 15.2287 24.6349 13.7389 25.9234 12.7035C27.2119 11.6681 28.9318 11.1504 31.0831 11.1504C33.0963 11.1504 34.753 11.6681 36.053 12.7035C37.3644 13.7274 38.3366 15.2114 38.9693 17.1556C39.602 19.0884 39.9184 21.4238 39.9184 24.1618ZM27.58 24.1618C27.58 26.083 27.6836 27.6879 27.8906 28.9763C28.1092 30.2533 28.4716 31.2139 28.9778 31.8582C29.484 32.5024 30.1857 32.8245 31.0831 32.8245C31.9689 32.8245 32.6649 32.5082 33.1711 31.8754C33.6888 31.2312 34.057 30.2706 34.2755 28.9936C34.4941 27.7051 34.6034 26.0945 34.6034 24.1618C34.6034 22.2406 34.4941 20.6357 34.2755 19.3472C34.057 18.0587 33.6888 17.0924 33.1711 16.4481C32.6649 15.7924 31.9689 15.4645 31.0831 15.4645C30.1857 15.4645 29.484 15.7924 28.9778 16.4481C28.4716 17.0924 28.1092 18.0587 27.8906 19.3472C27.6836 20.6357 27.58 22.2406 27.58 24.1618Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',12:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#FBC115"/>\n  <g opacity="0.3">\n    <path d="M20.452 39.1504H15.0346V24.3183C15.0346 23.9092 15.0405 23.4066 15.0522 22.8105C15.0638 22.2028 15.0814 21.5833 15.1048 20.9521C15.1281 20.3093 15.1515 19.7307 15.1749 19.2165C15.0463 19.3684 14.7833 19.6314 14.3859 20.0054C14.0002 20.3677 13.6379 20.695 13.299 20.9872L10.3536 23.354L7.7413 20.0931L15.9989 13.5186H20.452V39.1504Z" fill="#111111"/>\n    <path d="M42.2587 39.1504H24.3409V35.381L30.7752 28.8766C32.0726 27.5442 33.1128 26.4338 33.8959 25.5455C34.6907 24.6456 35.2634 23.8274 35.614 23.0911C35.9764 22.3547 36.1575 21.5658 36.1575 20.7242C36.1575 19.7074 35.8712 18.9476 35.2985 18.4451C34.7374 17.9308 33.9836 17.6737 33.0368 17.6737C32.0434 17.6737 31.0791 17.9016 30.144 18.3574C29.209 18.8132 28.2331 19.4619 27.2162 20.3035L24.2708 16.8146C25.0072 16.1834 25.7844 15.5873 26.6026 15.0263C27.4324 14.4653 28.3908 14.0153 29.4778 13.6764C30.5765 13.3257 31.8914 13.1504 33.4225 13.1504C35.1056 13.1504 36.5491 13.4543 37.753 14.0621C38.9685 14.6698 39.9035 15.4997 40.5581 16.5516C41.2126 17.5918 41.5399 18.7723 41.5399 20.0931C41.5399 21.5073 41.2594 22.7989 40.6983 23.9677C40.1373 25.1365 39.3191 26.2936 38.2438 27.439C37.1802 28.5844 35.8946 29.8526 34.3868 31.2434L31.0908 34.3466V34.5921H42.2587V39.1504Z" fill="#111111"/>\n  </g>\n  <path d="M18.452 37.1504H13.0346V22.3183C13.0346 21.9092 13.0405 21.4066 13.0522 20.8105C13.0638 20.2028 13.0814 19.5833 13.1048 18.9521C13.1281 18.3093 13.1515 17.7307 13.1749 17.2165C13.0463 17.3684 12.7833 17.6314 12.3859 18.0054C12.0002 18.3677 11.6379 18.695 11.299 18.9872L8.35358 21.354L5.7413 18.0931L13.9989 11.5186H18.452V37.1504Z" fill="#EEEEEE"/>\n  <path d="M40.2587 37.1504H22.3409V33.381L28.7752 26.8766C30.0726 25.5442 31.1128 24.4338 31.8959 23.5455C32.6907 22.6456 33.2634 21.8274 33.614 21.0911C33.9764 20.3547 34.1575 19.5658 34.1575 18.7242C34.1575 17.7074 33.8712 16.9476 33.2985 16.4451C32.7374 15.9308 31.9836 15.6737 31.0368 15.6737C30.0434 15.6737 29.0791 15.9016 28.144 16.3574C27.209 16.8132 26.2331 17.4619 25.2162 18.3035L22.2708 14.8146C23.0072 14.1834 23.7844 13.5873 24.6026 13.0263C25.4324 12.4653 26.3908 12.0153 27.4778 11.6764C28.5765 11.3257 29.8914 11.1504 31.4225 11.1504C33.1056 11.1504 34.5491 11.4543 35.753 12.0621C36.9685 12.6698 37.9035 13.4997 38.5581 14.5516C39.2126 15.5918 39.5399 16.7723 39.5399 18.0931C39.5399 19.5073 39.2594 20.7989 38.6983 21.9677C38.1373 23.1365 37.3191 24.2936 36.2438 25.439C35.1802 26.5844 33.8946 27.8526 32.3868 29.2434L29.0908 32.3466V32.5921H40.2587V37.1504Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',14:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#F58220"/>\n  <g opacity="0.3">\n    <path d="M20.15 38.8496H14.7184V23.9785C14.7184 23.5684 14.7243 23.0645 14.736 22.4668C14.7477 21.8574 14.7653 21.2363 14.7887 20.6035C14.8121 19.959 14.8356 19.3789 14.859 18.8633C14.7301 19.0156 14.4664 19.2793 14.068 19.6543C13.6813 20.0176 13.318 20.3457 12.9782 20.6387L10.025 23.0117L7.4059 19.7422L15.6852 13.1504H20.15V38.8496Z" fill="#111111"/>\n    <path d="M42.5941 33.5234H39.5004V38.8496H34.1918V33.5234H23.223V29.7441L34.4906 13.1504H39.5004V29.3047H42.5941V33.5234ZM34.1918 29.3047V24.9453C34.1918 24.5352 34.1976 24.0488 34.2093 23.4863C34.2328 22.9238 34.2562 22.3613 34.2797 21.7988C34.3031 21.2363 34.3265 20.7383 34.35 20.3047C34.3851 19.8594 34.4086 19.5488 34.4203 19.373H34.2797C34.057 19.8535 33.8226 20.3223 33.5765 20.7793C33.3304 21.2246 33.0433 21.6934 32.7152 22.1855L28.0043 29.3047H34.1918Z" fill="#111111"/>\n  </g>\n  <path d="M18.15 36.8496H12.7184V21.9785C12.7184 21.5684 12.7243 21.0645 12.736 20.4668C12.7477 19.8574 12.7653 19.2363 12.7887 18.6035C12.8121 17.959 12.8356 17.3789 12.859 16.8633C12.7301 17.0156 12.4664 17.2793 12.068 17.6543C11.6813 18.0176 11.318 18.3457 10.9782 18.6387L8.02504 21.0117L5.4059 17.7422L13.6852 11.1504H18.15V36.8496Z" fill="#EEEEEE"/>\n  <path d="M40.5941 31.5234H37.5004V36.8496H32.1918V31.5234H21.223V27.7441L32.4906 11.1504H37.5004V27.3047H40.5941V31.5234ZM32.1918 27.3047V22.9453C32.1918 22.5352 32.1976 22.0488 32.2093 21.4863C32.2328 20.9238 32.2562 20.3613 32.2797 19.7988C32.3031 19.2363 32.3265 18.7383 32.35 18.3047C32.3851 17.8594 32.4086 17.5488 32.4203 17.373H32.2797C32.057 17.8535 31.8226 18.3223 31.5765 18.7793C31.3304 19.2246 31.0433 19.6934 30.7152 20.1855L26.0043 27.3047H32.1918Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',16:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#EC1D25"/>\n  <g opacity="0.3">\n    <path d="M20.4401 39.1484H15.0084V24.2773C15.0084 23.8672 15.0143 23.3633 15.026 22.7656C15.0377 22.1562 15.0553 21.5352 15.0788 20.9023C15.1022 20.2578 15.1256 19.6777 15.1491 19.1621C15.0202 19.3145 14.7565 19.5781 14.358 19.9531C13.9713 20.3164 13.608 20.6445 13.2682 20.9375L10.3151 23.3105L7.69594 20.041L15.9752 13.4492H20.4401V39.1484Z" fill="#111111"/>\n    <path d="M24.1634 28.2324C24.1634 26.7559 24.2689 25.2969 24.4799 23.8555C24.7025 22.4023 25.0834 21.0371 25.6224 19.7598C26.1615 18.4707 26.9174 17.334 27.89 16.3496C28.8627 15.3535 30.099 14.5742 31.599 14.0117C33.099 13.4375 34.9154 13.1504 37.0482 13.1504C37.5521 13.1504 38.1381 13.1738 38.806 13.2207C39.4857 13.2559 40.0482 13.3203 40.4935 13.4141V17.7559C40.0248 17.6504 39.5209 17.5684 38.9818 17.5098C38.4545 17.4395 37.9271 17.4043 37.3998 17.4043C35.267 17.4043 33.6146 17.7441 32.4427 18.4238C31.2826 19.1035 30.4623 20.0469 29.9818 21.2539C29.5131 22.4492 29.2377 23.8438 29.1556 25.4375H29.3841C29.7123 24.8633 30.1224 24.3535 30.6146 23.9082C31.1185 23.4629 31.7279 23.1113 32.4427 22.8535C33.1576 22.584 33.9955 22.4492 34.9564 22.4492C36.4564 22.4492 37.7572 22.7715 38.8588 23.416C39.9603 24.0488 40.8099 24.9688 41.4076 26.1758C42.0052 27.3828 42.3041 28.8535 42.3041 30.5879C42.3041 32.4395 41.9466 34.0332 41.2318 35.3691C40.517 36.7051 39.5033 37.7305 38.1908 38.4453C36.89 39.1484 35.3431 39.5 33.5502 39.5C32.2377 39.5 31.0131 39.2773 29.8763 38.832C28.7396 38.375 27.7435 37.6836 26.8881 36.7578C26.0326 35.832 25.3646 34.666 24.8841 33.2598C24.4037 31.8418 24.1634 30.166 24.1634 28.2324ZM33.4447 35.1582C34.5111 35.1582 35.3783 34.7949 36.0463 34.0684C36.7142 33.3418 37.0482 32.2051 37.0482 30.6582C37.0482 29.4043 36.7552 28.4199 36.1693 27.7051C35.5951 26.9785 34.722 26.6152 33.5502 26.6152C32.7533 26.6152 32.0502 26.7969 31.4408 27.1602C30.8431 27.5117 30.3802 27.9629 30.0521 28.5137C29.724 29.0527 29.5599 29.6094 29.5599 30.1836C29.5599 30.7812 29.642 31.373 29.806 31.959C29.9701 32.5449 30.2162 33.0781 30.5443 33.5586C30.8724 34.0391 31.2767 34.4258 31.7572 34.7188C32.2494 35.0117 32.8119 35.1582 33.4447 35.1582Z" fill="#111111"/>\n  </g>\n  <path d="M18.4401 37.1484H13.0084V22.2773C13.0084 21.8672 13.0143 21.3633 13.026 20.7656C13.0377 20.1562 13.0553 19.5352 13.0788 18.9023C13.1022 18.2578 13.1256 17.6777 13.1491 17.1621C13.0202 17.3145 12.7565 17.5781 12.358 17.9531C11.9713 18.3164 11.608 18.6445 11.2682 18.9375L8.31508 21.3105L5.69594 18.041L13.9752 11.4492H18.4401V37.1484Z" fill="#EEEEEE"/>\n  <path d="M22.1634 26.2324C22.1634 24.7559 22.2689 23.2969 22.4799 21.8555C22.7025 20.4023 23.0834 19.0371 23.6224 17.7598C24.1615 16.4707 24.9174 15.334 25.89 14.3496C26.8627 13.3535 28.099 12.5742 29.599 12.0117C31.099 11.4375 32.9154 11.1504 35.0482 11.1504C35.5521 11.1504 36.1381 11.1738 36.806 11.2207C37.4857 11.2559 38.0482 11.3203 38.4935 11.4141V15.7559C38.0248 15.6504 37.5209 15.5684 36.9818 15.5098C36.4545 15.4395 35.9271 15.4043 35.3998 15.4043C33.267 15.4043 31.6146 15.7441 30.4427 16.4238C29.2826 17.1035 28.4623 18.0469 27.9818 19.2539C27.5131 20.4492 27.2377 21.8438 27.1556 23.4375H27.3841C27.7123 22.8633 28.1224 22.3535 28.6146 21.9082C29.1185 21.4629 29.7279 21.1113 30.4427 20.8535C31.1576 20.584 31.9955 20.4492 32.9564 20.4492C34.4564 20.4492 35.7572 20.7715 36.8588 21.416C37.9603 22.0488 38.8099 22.9688 39.4076 24.1758C40.0052 25.3828 40.3041 26.8535 40.3041 28.5879C40.3041 30.4395 39.9466 32.0332 39.2318 33.3691C38.517 34.7051 37.5033 35.7305 36.1908 36.4453C34.89 37.1484 33.3431 37.5 31.5502 37.5C30.2377 37.5 29.0131 37.2773 27.8763 36.832C26.7396 36.375 25.7435 35.6836 24.8881 34.7578C24.0326 33.832 23.3646 32.666 22.8841 31.2598C22.4037 29.8418 22.1634 28.166 22.1634 26.2324ZM31.4447 33.1582C32.5111 33.1582 33.3783 32.7949 34.0463 32.0684C34.7142 31.3418 35.0482 30.2051 35.0482 28.6582C35.0482 27.4043 34.7552 26.4199 34.1693 25.7051C33.5951 24.9785 32.722 24.6152 31.5502 24.6152C30.7533 24.6152 30.0502 24.7969 29.4408 25.1602C28.8431 25.5117 28.3802 25.9629 28.0521 26.5137C27.724 27.0527 27.5599 27.6094 27.5599 28.1836C27.5599 28.7812 27.642 29.373 27.806 29.959C27.9701 30.5449 28.2162 31.0781 28.5443 31.5586C28.8724 32.0391 29.2767 32.4258 29.7572 32.7188C30.2494 33.0117 30.8119 33.1582 31.4447 33.1582Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',18:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="black"/>\n  <path d="M19.4928 37.1836H14.0612V22.3125C14.0612 21.9023 14.067 21.3984 14.0787 20.8008C14.0905 20.1914 14.108 19.5703 14.1315 18.9375C14.1549 18.293 14.1784 17.7129 14.2018 17.1973C14.0729 17.3496 13.8092 17.6133 13.4108 17.9883C13.0241 18.3516 12.6608 18.6797 12.3209 18.9727L9.36781 21.3457L6.74867 18.0762L15.028 11.4844H19.4928V37.1836Z" fill="#EEEEEE"/>\n  <path d="M32.2513 11.1504C33.7279 11.1504 35.0873 11.3789 36.3295 11.8359C37.5834 12.293 38.5853 12.9844 39.3353 13.9102C40.0853 14.8242 40.4603 15.9727 40.4603 17.3555C40.4603 18.3867 40.2552 19.2891 39.8451 20.0625C39.4466 20.8359 38.9017 21.5156 38.2103 22.1016C37.5189 22.6758 36.7338 23.1797 35.8548 23.6133C36.7689 24.0938 37.6361 24.6562 38.4564 25.3008C39.2767 25.9336 39.9447 26.6777 40.4603 27.5332C40.9877 28.3887 41.2513 29.3848 41.2513 30.5215C41.2513 31.9512 40.8705 33.1934 40.1088 34.248C39.347 35.291 38.2923 36.0996 36.9447 36.6738C35.597 37.248 34.0326 37.5352 32.2513 37.5352C30.3295 37.5352 28.6947 37.2598 27.347 36.709C25.9994 36.1582 24.974 35.373 24.2709 34.3535C23.5677 33.3223 23.2162 32.0918 23.2162 30.6621C23.2162 29.4902 23.433 28.4707 23.8666 27.6035C24.3119 26.7363 24.9095 25.9922 25.6595 25.3711C26.4095 24.7383 27.2357 24.1992 28.1381 23.7539C27.3763 23.2734 26.6791 22.7285 26.0463 22.1191C25.4252 21.5098 24.9271 20.8125 24.5521 20.0273C24.1888 19.2422 24.0072 18.3398 24.0072 17.3203C24.0072 15.9609 24.3881 14.8242 25.1498 13.9102C25.9232 12.9961 26.9369 12.3105 28.1908 11.8535C29.4447 11.3848 30.7982 11.1504 32.2513 11.1504ZM28.2435 30.3457C28.2435 31.2715 28.5716 32.0391 29.2279 32.6484C29.8959 33.2461 30.8802 33.5449 32.181 33.5449C33.5287 33.5449 34.5365 33.2578 35.2045 32.6836C35.8724 32.0977 36.2064 31.3301 36.2064 30.3809C36.2064 29.7246 36.0131 29.1504 35.6263 28.6582C35.2513 28.166 34.7767 27.7266 34.2025 27.3398C33.6283 26.9414 33.0482 26.5723 32.4623 26.2324L31.9877 25.9863C31.2377 26.3262 30.5814 26.707 30.0189 27.1289C29.4681 27.5508 29.0345 28.0254 28.7181 28.5527C28.4017 29.0801 28.2435 29.6777 28.2435 30.3457ZM32.2162 15.123C31.3256 15.123 30.5873 15.3516 30.0013 15.8086C29.4154 16.2656 29.1224 16.9102 29.1224 17.7422C29.1224 18.3281 29.2631 18.8438 29.5443 19.2891C29.8373 19.7227 30.2181 20.1035 30.6869 20.4316C31.1673 20.7598 31.6888 21.0645 32.2513 21.3457C32.7904 21.0879 33.2943 20.8008 33.7631 20.4844C34.2318 20.168 34.6127 19.7871 34.9056 19.3418C35.1986 18.8965 35.3451 18.3633 35.3451 17.7422C35.3451 16.9102 35.0463 16.2656 34.4486 15.8086C33.8627 15.3516 33.1185 15.123 32.2162 15.123Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>',L:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#00A651"/>\n  <path opacity="0.3" d="M17 39.1504V13.1504H22.4928V34.5977H33V39.1504H17Z" fill="#111111"/>\n  <path d="M15 37.1504V11.1504H20.4928V32.5977H31V37.1504H15Z" fill="#EEEEEE"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n</svg>'},self_rated:{10:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#0095DA"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M15.8517 36.2529L15.077 32.2574H9.96604L9.16981 36.2529H4.5L9.63248 14.8462H15.303L20.5 36.2529H15.8517ZM14.1947 27.5327L13.5168 24.033C13.359 23.2553 13.1653 22.2491 12.9358 21.0145C12.7134 19.7798 12.5664 18.8952 12.4946 18.3605C12.4301 18.8563 12.3009 19.6729 12.1073 20.8103C11.9208 21.9477 11.5011 24.1885 10.8484 27.5327H14.1947Z" fill="#111111"/>\n    <path d="M28.9971 36.2529H24.4707V23.8604L24.5146 21.8242L24.5879 19.5977C23.8359 20.3496 23.3135 20.8428 23.0205 21.0771L20.5596 23.0547L18.377 20.3301L25.2764 14.8369H28.9971V36.2529Z" fill="#111111"/>\n    <path d="M45.7979 25.5449C45.7979 29.2852 45.1826 32.0537 43.9521 33.8506C42.7314 35.6475 40.8467 36.5459 38.2979 36.5459C35.8271 36.5459 33.9619 35.6182 32.7021 33.7627C31.4521 31.9072 30.8271 29.168 30.8271 25.5449C30.8271 21.7656 31.4375 18.9824 32.6582 17.1953C33.8789 15.3984 35.7588 14.5 38.2979 14.5C40.7686 14.5 42.6338 15.4375 43.8936 17.3125C45.1631 19.1875 45.7979 21.9316 45.7979 25.5449ZM35.3242 25.5449C35.3242 28.1719 35.5488 30.0566 35.998 31.1992C36.457 32.332 37.2236 32.8984 38.2979 32.8984C39.3525 32.8984 40.1143 32.3223 40.583 31.1699C41.0518 30.0176 41.2861 28.1426 41.2861 25.5449C41.2861 22.918 41.0469 21.0332 40.5684 19.8906C40.0996 18.7383 39.3428 18.1621 38.2979 18.1621C37.2334 18.1621 36.4717 18.7383 36.0127 19.8906C35.5537 21.0332 35.3242 22.918 35.3242 25.5449Z" fill="#111111"/>\n  </g>\n  <path d="M14.3517 34.7529L13.577 30.7574H8.46604L7.66981 34.7529H3L8.13248 13.3462H13.803L19 34.7529H14.3517ZM12.6947 26.0327L12.0168 22.533C11.859 21.7553 11.6653 20.7491 11.4358 19.5145C11.2134 18.2798 11.0664 17.3952 10.9946 16.8605C10.9301 17.3563 10.8009 18.1729 10.6073 19.3103C10.4208 20.4477 10.0011 22.6885 9.34835 26.0327H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.498 34.7529H22.9717V22.3604L23.0156 20.3242L23.0889 18.0977C22.3369 18.8496 21.8145 19.3428 21.5215 19.5771L19.0605 21.5547L16.8779 18.8301L23.7773 13.3369H27.498V34.7529Z" fill="#EEEEEE"/>\n  <path d="M44.2988 24.0449C44.2988 27.7852 43.6836 30.5537 42.4531 32.3506C41.2324 34.1475 39.3477 35.0459 36.7988 35.0459C34.3281 35.0459 32.4629 34.1182 31.2031 32.2627C29.9531 30.4072 29.3281 27.668 29.3281 24.0449C29.3281 20.2656 29.9385 17.4824 31.1592 15.6953C32.3799 13.8984 34.2598 13 36.7988 13C39.2695 13 41.1348 13.9375 42.3945 15.8125C43.6641 17.6875 44.2988 20.4316 44.2988 24.0449ZM33.8252 24.0449C33.8252 26.6719 34.0498 28.5566 34.499 29.6992C34.958 30.832 35.7246 31.3984 36.7988 31.3984C37.8535 31.3984 38.6152 30.8223 39.084 29.6699C39.5527 28.5176 39.7871 26.6426 39.7871 24.0449C39.7871 21.418 39.5479 19.5332 39.0693 18.3906C38.6006 17.2383 37.8438 16.6621 36.7988 16.6621C35.7344 16.6621 34.9727 17.2383 34.5137 18.3906C34.0547 19.5332 33.8252 21.418 33.8252 24.0449Z" fill="#EEEEEE"/>\n</svg>',12:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#FBC115"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M15.8517 36.2236L15.077 32.2281H9.96604L9.16981 36.2236H4.5L9.63248 14.8169H15.303L20.5 36.2236H15.8517ZM14.1947 27.5034L13.5168 24.0037C13.359 23.226 13.1653 22.2198 12.9358 20.9852C12.7134 19.7505 12.5664 18.8659 12.4946 18.3312C12.4301 18.827 12.3009 19.6436 12.1073 20.781C11.9208 21.9184 11.5011 24.1592 10.8484 27.5034H14.1947Z" fill="#111111"/>\n    <path d="M28.9697 36.2236H24.4434V23.8311C24.4434 23.4893 24.4482 23.0693 24.458 22.5713C24.4678 22.0635 24.4824 21.5459 24.502 21.0186C24.5215 20.4814 24.541 19.998 24.5605 19.5684C24.4531 19.6953 24.2334 19.915 23.9014 20.2275C23.5791 20.5303 23.2764 20.8037 22.9932 21.0479L20.5322 23.0254L18.3496 20.3008L25.249 14.8076H28.9697V36.2236Z" fill="#111111"/>\n    <path d="M45.917 36.2236H30.9463V33.0742L36.3223 27.6396C37.4062 26.5264 38.2754 25.5986 38.9297 24.8564C39.5938 24.1045 40.0723 23.4209 40.3652 22.8057C40.668 22.1904 40.8193 21.5312 40.8193 20.8281C40.8193 19.9785 40.5801 19.3438 40.1016 18.9238C39.6328 18.4941 39.0029 18.2793 38.2119 18.2793C37.3818 18.2793 36.5762 18.4697 35.7949 18.8506C35.0137 19.2314 34.1982 19.7734 33.3486 20.4766L30.8877 17.5615C31.5029 17.0342 32.1523 16.5361 32.8359 16.0674C33.5293 15.5986 34.3301 15.2227 35.2383 14.9395C36.1562 14.6465 37.2549 14.5 38.5342 14.5C39.9404 14.5 41.1465 14.7539 42.1523 15.2617C43.168 15.7695 43.9492 16.4629 44.4961 17.3418C45.043 18.2109 45.3164 19.1973 45.3164 20.3008C45.3164 21.4824 45.082 22.5615 44.6133 23.5381C44.1445 24.5146 43.4609 25.4814 42.5625 26.4385C41.6738 27.3955 40.5996 28.4551 39.3398 29.6172L36.5859 32.21V32.415H45.917V36.2236Z" fill="#111111"/>\n  </g>\n  <path d="M14.3517 34.7236L13.577 30.7281H8.46604L7.66981 34.7236H3L8.13248 13.3169H13.803L19 34.7236H14.3517ZM12.6947 26.0034L12.0168 22.5037C11.859 21.726 11.6653 20.7198 11.4358 19.4852C11.2134 18.2505 11.0664 17.3659 10.9946 16.8312C10.9301 17.327 10.8009 18.1436 10.6073 19.281C10.4208 20.4184 10.0011 22.6592 9.34835 26.0034H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.4697 34.7236H22.9434V22.3311C22.9434 21.9893 22.9482 21.5693 22.958 21.0713C22.9678 20.5635 22.9824 20.0459 23.002 19.5186C23.0215 18.9814 23.041 18.498 23.0605 18.0684C22.9531 18.1953 22.7334 18.415 22.4014 18.7275C22.0791 19.0303 21.7764 19.3037 21.4932 19.5479L19.0322 21.5254L16.8496 18.8008L23.749 13.3076H27.4697V34.7236Z" fill="#EEEEEE"/>\n  <path d="M44.417 34.7236H29.4463V31.5742L34.8223 26.1396C35.9062 25.0264 36.7754 24.0986 37.4297 23.3564C38.0938 22.6045 38.5723 21.9209 38.8652 21.3057C39.168 20.6904 39.3193 20.0312 39.3193 19.3281C39.3193 18.4785 39.0801 17.8438 38.6016 17.4238C38.1328 16.9941 37.5029 16.7793 36.7119 16.7793C35.8818 16.7793 35.0762 16.9697 34.2949 17.3506C33.5137 17.7314 32.6982 18.2734 31.8486 18.9766L29.3877 16.0615C30.0029 15.5342 30.6523 15.0361 31.3359 14.5674C32.0293 14.0986 32.8301 13.7227 33.7383 13.4395C34.6562 13.1465 35.7549 13 37.0342 13C38.4404 13 39.6465 13.2539 40.6523 13.7617C41.668 14.2695 42.4492 14.9629 42.9961 15.8418C43.543 16.7109 43.8164 17.6973 43.8164 18.8008C43.8164 19.9824 43.582 21.0615 43.1133 22.0381C42.6445 23.0146 41.9609 23.9814 41.0625 24.9385C40.1738 25.8955 39.0996 26.9551 37.8398 28.1172L35.0859 30.71V30.915H44.417V34.7236Z" fill="#EEEEEE"/>\n</svg>',14:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#F58220"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M15.8517 35.916L15.077 31.9204H9.96604L9.16981 35.916H4.5L9.63248 14.5093H15.303L20.5 35.916H15.8517ZM14.1947 27.1958L13.5168 23.6961C13.359 22.9184 13.1653 21.9122 12.9358 20.6776C12.7134 19.4429 12.5664 18.5583 12.4946 18.0236C12.4301 18.5194 12.3009 19.336 12.1073 20.4734C11.9208 21.6108 11.5011 23.8516 10.8484 27.1958H14.1947Z" fill="#111111"/>\n    <path d="M28.9971 35.916H24.4707V23.5234L24.5146 21.4873L24.5879 19.2607C23.8359 20.0127 23.3135 20.5059 23.0205 20.7402L20.5596 22.7178L18.377 19.9932L25.2764 14.5H28.9971V35.916Z" fill="#111111"/>\n    <path d="M46.3984 31.4775H43.8203V35.916H39.3965V31.4775H30.2559V28.3281L39.6455 14.5H43.8203V27.9619H46.3984V31.4775ZM39.3965 27.9619V24.3291C39.3965 23.7236 39.4209 22.8447 39.4697 21.6924C39.5186 20.54 39.5576 19.8711 39.5869 19.6855H39.4697C39.1084 20.4863 38.6738 21.2676 38.166 22.0293L34.2402 27.9619H39.3965Z" fill="#111111"/>\n  </g>\n  <path d="M14.3517 34.416L13.577 30.4204H8.46604L7.66981 34.416H3L8.13248 13.0093H13.803L19 34.416H14.3517ZM12.6947 25.6958L12.0168 22.1961C11.859 21.4184 11.6653 20.4122 11.4358 19.1776C11.2134 17.9429 11.0664 17.0583 10.9946 16.5236C10.9301 17.0194 10.8009 17.836 10.6073 18.9734C10.4208 20.1108 10.0011 22.3516 9.34835 25.6958H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.498 34.416H22.9717V22.0234L23.0156 19.9873L23.0889 17.7607C22.3369 18.5127 21.8145 19.0059 21.5215 19.2402L19.0605 21.2178L16.8779 18.4932L23.7773 13H27.498V34.416Z" fill="#EEEEEE"/>\n  <path d="M44.8994 29.9775H42.3213V34.416H37.8975V29.9775H28.7568V26.8281L38.1465 13H42.3213V26.4619H44.8994V29.9775ZM37.8975 26.4619V22.8291C37.8975 22.2236 37.9219 21.3447 37.9707 20.1924C38.0195 19.04 38.0586 18.3711 38.0879 18.1855H37.9707C37.6094 18.9863 37.1748 19.7676 36.667 20.5293L32.7412 26.4619H37.8975Z" fill="#EEEEEE"/>\n</svg>',16:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#EC1D25"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M15.8517 36.165L15.077 32.1695H9.96604L9.16981 36.165H4.5L9.63248 14.7583H15.303L20.5 36.165H15.8517ZM14.1947 27.4448L13.5168 23.9451C13.359 23.1674 13.1653 22.1612 12.9358 20.9266C12.7134 19.6919 12.5664 18.8073 12.4946 18.2726C12.4301 18.7684 12.3009 19.585 12.1073 20.7224C11.9208 21.8598 11.5011 24.1006 10.8484 27.4448H14.1947Z" fill="#111111"/>\n    <path d="M28.9971 36.165H24.4707V23.7725L24.5146 21.7363L24.5879 19.5098C23.8359 20.2617 23.3135 20.7549 23.0205 20.9893L20.5596 22.9668L18.377 20.2422L25.2764 14.749H28.9971V36.165Z" fill="#111111"/>\n    <path d="M30.7979 27.0684C30.7979 22.8301 31.6914 19.6758 33.4785 17.6055C35.2754 15.5352 37.9609 14.5 41.5352 14.5C42.7559 14.5 43.7129 14.5732 44.4062 14.7197V18.3379C43.5371 18.1426 42.6777 18.0449 41.8281 18.0449C40.2754 18.0449 39.0059 18.2793 38.0195 18.748C37.043 19.2168 36.3105 19.9102 35.8223 20.8281C35.334 21.7461 35.0459 23.0498 34.958 24.7393H35.1484C36.1152 23.0791 37.6631 22.249 39.792 22.249C41.7061 22.249 43.2051 22.8496 44.2891 24.0508C45.373 25.252 45.915 26.9121 45.915 29.0312C45.915 31.3164 45.2705 33.1279 43.9814 34.4658C42.6924 35.7939 40.9053 36.458 38.6201 36.458C37.0381 36.458 35.6562 36.0918 34.4746 35.3594C33.3027 34.627 32.3945 33.5576 31.75 32.1514C31.1152 30.7451 30.7979 29.0508 30.7979 27.0684ZM38.5322 32.8398C39.499 32.8398 40.2412 32.5176 40.7588 31.873C41.2764 31.2188 41.5352 30.291 41.5352 29.0898C41.5352 28.0449 41.291 27.2246 40.8027 26.6289C40.3242 26.0234 39.5967 25.7207 38.6201 25.7207C37.7021 25.7207 36.916 26.0186 36.2617 26.6143C35.6172 27.21 35.2949 27.9033 35.2949 28.6943C35.2949 29.8564 35.5977 30.8379 36.2031 31.6387C36.8184 32.4395 37.5947 32.8398 38.5322 32.8398Z" fill="#111111"/>\n  </g>\n  <path d="M14.3517 34.665L13.577 30.6695H8.46604L7.66981 34.665H3L8.13248 13.2583H13.803L19 34.665H14.3517ZM12.6947 25.9448L12.0168 22.4451C11.859 21.6674 11.6653 20.6612 11.4358 19.4266C11.2134 18.1919 11.0664 17.3073 10.9946 16.7726C10.9301 17.2684 10.8009 18.085 10.6073 19.2224C10.4208 20.3598 10.0011 22.6006 9.34835 25.9448H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.498 34.665H22.9717V22.2725L23.0156 20.2363L23.0889 18.0098C22.3369 18.7617 21.8145 19.2549 21.5215 19.4893L19.0605 21.4668L16.8779 18.7422L23.7773 13.249H27.498V34.665Z" fill="#EEEEEE"/>\n  <path d="M29.2988 25.5684C29.2988 21.3301 30.1924 18.1758 31.9795 16.1055C33.7764 14.0352 36.4619 13 40.0361 13C41.2568 13 42.2139 13.0732 42.9072 13.2197V16.8379C42.0381 16.6426 41.1787 16.5449 40.3291 16.5449C38.7764 16.5449 37.5068 16.7793 36.5205 17.248C35.5439 17.7168 34.8115 18.4102 34.3232 19.3281C33.835 20.2461 33.5469 21.5498 33.459 23.2393H33.6494C34.6162 21.5791 36.1641 20.749 38.293 20.749C40.207 20.749 41.7061 21.3496 42.79 22.5508C43.874 23.752 44.416 25.4121 44.416 27.5312C44.416 29.8164 43.7715 31.6279 42.4824 32.9658C41.1934 34.2939 39.4062 34.958 37.1211 34.958C35.5391 34.958 34.1572 34.5918 32.9756 33.8594C31.8037 33.127 30.8955 32.0576 30.251 30.6514C29.6162 29.2451 29.2988 27.5508 29.2988 25.5684ZM37.0332 31.3398C38 31.3398 38.7422 31.0176 39.2598 30.373C39.7773 29.7188 40.0361 28.791 40.0361 27.5898C40.0361 26.5449 39.792 25.7246 39.3037 25.1289C38.8252 24.5234 38.0977 24.2207 37.1211 24.2207C36.2031 24.2207 35.417 24.5186 34.7627 25.1143C34.1182 25.71 33.7959 26.4033 33.7959 27.1943C33.7959 28.3564 34.0986 29.3379 34.7041 30.1387C35.3193 30.9395 36.0957 31.3398 37.0332 31.3398Z" fill="#EEEEEE"/>\n</svg>',18:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="black"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <path d="M14.3517 34.6943L13.577 30.6988H8.46604L7.66981 34.6943H3L8.13248 13.2876H13.803L19 34.6943H14.3517ZM12.6947 25.9741L12.0168 22.4744C11.859 21.6967 11.6653 20.6905 11.4358 19.4559C11.2134 18.2212 11.0664 17.3366 10.9946 16.8019C10.9301 17.2977 10.8009 18.1143 10.6073 19.2517C10.4208 20.3891 10.0011 22.6299 9.34835 25.9741H12.6947Z" fill="#EEEEEE"/>\n  <path d="M27.498 34.6943H22.9717V22.3018L23.0156 20.2656L23.0889 18.0391C22.3369 18.791 21.8145 19.2842 21.5215 19.5186L19.0605 21.4961L16.8779 18.7715L23.7773 13.2783H27.498V34.6943Z" fill="#EEEEEE"/>\n  <path d="M36.8281 13C38.8789 13 40.5293 13.4688 41.7793 14.4062C43.0391 15.334 43.6689 16.5889 43.6689 18.1709C43.6689 19.2646 43.3662 20.2412 42.7607 21.1006C42.1553 21.9502 41.1787 22.7119 39.8311 23.3857C41.4326 24.2451 42.5801 25.1436 43.2734 26.0811C43.9766 27.0088 44.3281 28.0293 44.3281 29.1426C44.3281 30.9004 43.6396 32.3164 42.2627 33.3906C40.8857 34.4551 39.0742 34.9873 36.8281 34.9873C34.4844 34.9873 32.6436 34.4893 31.3057 33.4932C29.9678 32.4971 29.2988 31.0859 29.2988 29.2598C29.2988 28.0391 29.6211 26.9551 30.2656 26.0078C30.9199 25.0605 31.9648 24.2256 33.4004 23.5029C32.1797 22.7314 31.3008 21.9062 30.7637 21.0273C30.2266 20.1484 29.958 19.1865 29.958 18.1416C29.958 16.6084 30.5928 15.3682 31.8623 14.4209C33.1318 13.4736 34.7871 13 36.8281 13ZM33.4883 28.9961C33.4883 29.8359 33.7812 30.4902 34.3672 30.959C34.9531 31.4277 35.7539 31.6621 36.7695 31.6621C37.8926 31.6621 38.7324 31.4229 39.2891 30.9443C39.8457 30.4561 40.124 29.8164 40.124 29.0254C40.124 28.3711 39.8457 27.7607 39.2891 27.1943C38.7422 26.6182 37.8486 26.0078 36.6084 25.3633C34.5283 26.3203 33.4883 27.5312 33.4883 28.9961ZM36.7988 16.3105C36.0273 16.3105 35.4023 16.5107 34.9238 16.9111C34.4551 17.3018 34.2207 17.8291 34.2207 18.4932C34.2207 19.0791 34.4062 19.6064 34.7773 20.0752C35.1582 20.5342 35.8418 21.0078 36.8281 21.4961C37.7852 21.0469 38.4541 20.5879 38.835 20.1191C39.2158 19.6504 39.4062 19.1084 39.4062 18.4932C39.4062 17.8193 39.1621 17.2871 38.6738 16.8965C38.1855 16.5059 37.5605 16.3105 36.7988 16.3105Z" fill="#EEEEEE"/>\n</svg>',L:'<svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <rect width="48" height="48" rx="3" fill="#00A651"/>\n  <rect x="0.5" y="0.5" width="47" height="47" rx="2.5" stroke="#EEEEEE" stroke-opacity="0.6"/>\n  <g opacity="0.3">\n    <path d="M21.8517 36.916L21.077 32.9204H15.966L15.1698 36.916H10.5L15.6325 15.5093H21.303L26.5 36.916H21.8517ZM20.1947 28.1958L19.5168 24.6961C19.359 23.9184 19.1653 22.9122 18.9358 21.6776C18.7134 20.4429 18.5664 19.5583 18.4946 19.0236C18.4301 19.5194 18.3009 20.336 18.1073 21.4734C17.9208 22.6108 17.5011 24.8516 16.8484 28.1958H20.1947Z" fill="#111111"/>\n    <path d="M28.7383 36.916V15.5H33.2793V33.166H41.9658V36.916H28.7383Z" fill="#111111"/>\n  </g>\n  <path d="M20.3517 35.416L19.577 31.4204H14.466L13.6698 35.416H9L14.1325 14.0093H19.803L25 35.416H20.3517ZM18.6947 26.6958L18.0168 23.1961C17.859 22.4184 17.6653 21.4122 17.4358 20.1776C17.2134 18.9429 17.0664 18.0583 16.9946 17.5236C16.9301 18.0194 16.8009 18.836 16.6073 19.9734C16.4208 21.1108 16.0011 23.3516 15.3484 26.6958H18.6947Z" fill="#EEEEEE"/>\n  <path d="M27.2374 35.416V14H31.7784V31.666H40.4649V35.416H27.2374Z" fill="#EEEEEE"/>\n</svg>'}},_o="VERIFIQUE A CLASSIFICAÇÃO INDICATIVA";var So=function(){function e(t){var n=t.videoInfo,i=t.metadata;r(this,e),this.videoInfo=n,this.metadata=i}return o(e,[{key:"title",get:function(){var e,t,n;return null!==(e=null===(t=this.videoInfo)||void 0===t?void 0:t.title)&&void 0!==e?e:null===(n=this.metadata)||void 0===n?void 0:n.title}},{key:"secondaryText",get:function(){var e,t,n;return null!==(e=null===(t=this.videoInfo)||void 0===t?void 0:t.secondaryText)&&void 0!==e?e:null===(n=this.metadata)||void 0===n?void 0:n.program}},{key:"secondaryTextWithVerifyContentRating",get:function(){var e;return null!==(e=this.metadata)&&void 0!==e&&e.verifyContentRating?_o:this.secondaryText}},{key:"raw",get:function(){return{title:this.title,secondaryText:this.secondaryText,secondaryTextWithVerifyContentRating:this.secondaryTextWithVerifyContentRating,rating:this.rating,ratingLabel:this.ratingLabel}}},{key:"videoRating",get:function(){var e;return null===(e=this.metadata)||void 0===e?void 0:e.contentRating}},{key:"videoRatingDescription",get:function(){return e=this.metadata.contentRatingCriteria,this.metadata.verifyContentRating?_o:e?e.join(", ").split(/\s+/).map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" "):"";var e}},{key:"videoRatingType",get:function(){var e;return null!==(e=this.metadata)&&void 0!==e&&e.isSelfRated?"self_rated":"default"}},{key:"rating",get:function(){var e;return function(e,t,n){if(e&&!n)return ko[t][e]}(this.videoRating,this.videoRatingType,null===(e=this.metadata)||void 0===e?void 0:e.verifyContentRating)}},{key:"ratingLabel",get:function(){var e;return function(e,t,n){if(n)return _o;if(e){var i="self_rated"===t?"Autoclassificação":"Classificação",r="L"!==e?"".concat(e," anos"):"Livre";return"".concat(i," etária: ").concat(r)}}(this.videoRating,this.videoRatingType,null===(e=this.metadata)||void 0===e?void 0:e.verifyContentRating)}}]),e}(),wo=function(e){l(i,e);var t=p(i);function i(){return r(this,i),t.apply(this,arguments)}return o(i,[{key:"name",get:function(){return"video_info"}},{key:"panel",get:function(){return"upper"}},{key:"position",get:function(){return"left"}},{key:"videoInfoHTMLData",get:function(){return this.videoData=new So({videoInfo:this.options.videoInfo,metadata:this.metadata}),this.videoData.raw}},{key:"template",get:function(){return Ve('<% if (modalMode === true) { %>\n  <div class="video-info__mobile-container">\n    <div class="video-info__mobile-header">\n      <button class="video-info__close"></button>\n    </div>\n<% } %>\n  <div class="video-info__data">\n    <div class="video-info__data-title">\n      <span class="visually-hidden">Título: </span>\n      <%= title %>\n    </div>\n    <div class="video-info__data-subtitle">\n      <div class="video-info__data-subtitle-rating"><%= rating %></div>\n      <div class="video-info__data-subtitle-program">\n        <span class="visually-hidden">Subtítulo: </span>\n        <%= secondaryTextWithVerifyContentRating %>\n      </div>\n      <span class="visually-hidden"><%= ratingLabel %></span></div>\n    </div>\n  </div>\n  <div class="video-info__status"></div>\n<% if (modalMode === true) { %>\n\n<% } %>\n')}},{key:"buttonTemplate",get:function(){return Ve('<button class="drawer-info-icon media-control-button" data-video-info></button>\n')}},{key:"shouldUseInfoButton",get:function(){return this.playerSize&&this.playerSize.width<=480}},{key:"modal",get:function(){return this.mediaControl.$modal}},{key:"allStates",get:function(){return"video-info--chromecast video-info--full video-info--inline video-info--ad video-info--live video-info--dvr"}},{key:"displayInlineMode",get:function(){return this.options.videoInfo.inlineEnabled&&this.$el.hasClass("video-info--inline")}},{key:"displayFullScreenMode",get:function(){return this.options.videoInfo.fullscreenEnabled&&this.$el.hasClass("video-info--full")}},{key:"currentState",get:function(){if(!this.container)return null;var e=Q.isChromecast?"chromecast":bn.Fullscreen.isFullscreen()?"full":"inline";this.status=[];var t=this.container.getPlaybackType();return"live"===t&&this.status.push("video-info--live"),this.container.isDvrInUse()&&this.status.push("video-info--dvr"),"ad"===t&&this.status.push("video-info--ad"),"".concat(e," ").concat(this.status.join(" "))}},{key:"events",get:function(){return{"click .drawer-info-icon[data-video-info]":"showModalvideoInfo"}}},{key:"attributes",get:function(){return{class:"video-info","data-video-info":""}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container&&this.container.playback&&this.stopListening(this.container.playback),this.container=this.core.activeContainer,this.container&&(this.listenTo(this.container.playback,Tn.WM_VIDEO_METADATA_LOADED,this.initialize),this.listenTo(this.container,Tn.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,Tn.DFP_AD_STARTED,this.updateState),this.listenTo(this.container,Tn.WM_MASTERTOPIP,(function(){return e.$el.addClass("video-info--hidden")})),this.listenTo(this.container.playback,De.PLAYBACK_PLAY_INTENT,this.updateState),this.container.options.chromeless&&this.disable())}},{key:"initialize",value:function(e){this.metadata=e,this.render()}},{key:"onPlayerResize",value:function(e){this.playerSize=e,this.render()}},{key:"updateState",value:function(){(this.currentState!==this.renderedState||Q.isMobile)&&(this.$el.removeClass(this.allStates),this.$el.addClass("video-info--".concat(this.currentState)),this.displayInlineMode||this.displayFullScreenMode||"ad"===this.container.getPlaybackType()?this.$el.removeClass("video-info--hidden"):this.$el.addClass("video-info--hidden"),this.renderedState=this.currentState)}},{key:"render",value:function(){if(this.container){Q.isChromecast&&(this.$el.remove(),this.container.$el.append(this.el)),this.updateState();var e=n(n({},this.videoInfoHTMLData),{},{modalMode:!1});return!this.currentState.includes("video-info--ad")&&this.$el.html(this.shouldUseInfoButton?this.buttonTemplate():this.template(e)),this.$el.append(En.getStyleFrom('.clappr-player#wp3-player-0 .media-control--keep-video-info .media-control-panel__upper {\n  opacity: 1 !important;\n  transform: translateY(0) !important; }\n\n.clappr-player#wp3-player-0 .media-control--keep-video-info .video-info {\n  display: block; }\n\n.clappr-player#wp3-player-0 .media-control.w320 .video-info, .clappr-player#wp3-player-0 .media-control.w360 .video-info, .clappr-player#wp3-player-0 .media-control.w480 .video-info {\n  height: 48px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full {\n    pointer-events: auto; }\n    .clappr-player#wp3-player-0 .media-control.w320 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w320 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w360 .video-info--full .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--inline .drawer-info-icon, .clappr-player#wp3-player-0 .media-control.w480 .video-info--full .drawer-info-icon {\n      cursor: pointer;\n      padding: 0px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-container, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-container {\n    display: flex;\n    flex-flow: column;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    right: 0px;\n    bottom: 0px;\n    z-index: 998;\n    height: 100%;\n    width: 100%;\n    background-color: rgba(0, 0, 0, 0.6); }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w360 .video-info__mobile-header, .clappr-player#wp3-player-0 .media-control.w480 .video-info__mobile-header {\n    height: 36px;\n    width: 100%; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__data, .clappr-player#wp3-player-0 .media-control.w360 .video-info__data, .clappr-player#wp3-player-0 .media-control.w480 .video-info__data {\n    display: flex;\n    flex-flow: column;\n    flex-grow: 1;\n    justify-content: center;\n    margin: 0;\n    padding: 0 12px 12px; }\n  .clappr-player#wp3-player-0 .media-control.w320 .video-info__close, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close {\n    background-color: transparent;\n    border: 0;\n    box-sizing: content-box;\n    padding: 12px;\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    position: absolute;\n    right: 0;\n    width: 24px;\n    height: 24px;\n    outline: none;\n    cursor: pointer; }\n    .clappr-player#wp3-player-0 .media-control.w320 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w360 .video-info__close svg, .clappr-player#wp3-player-0 .media-control.w480 .video-info__close svg {\n      width: 100%;\n      height: 100%; }\n\n.clappr-player#wp3-player-0 .video-info {\n  box-sizing: border-box;\n  color: white;\n  pointer-events: none;\n  text-shadow: none;\n  z-index: 996; }\n  .clappr-player#wp3-player-0 .video-info__data {\n    height: 24px;\n    text-align: left; }\n    .clappr-player#wp3-player-0 .video-info__data-title {\n      margin-bottom: 5px;\n      font-size: 18px;\n      line-height: 24px; }\n    .clappr-player#wp3-player-0 .video-info__data-subtitle {\n      display: flex;\n      flex-direction: row;\n      align-items: center; }\n      .clappr-player#wp3-player-0 .video-info__data-subtitle-rating {\n        display: flex;\n        margin-right: 8px; }\n        .clappr-player#wp3-player-0 .video-info__data-subtitle-rating svg {\n          height: 16px;\n          width: 16px; }\n        .clappr-player#wp3-player-0 .video-info__data-subtitle-rating:empty {\n          margin-right: 0px; }\n      .clappr-player#wp3-player-0 .video-info__data-subtitle-program {\n        font-size: 14px;\n        line-height: 18px; }\n    .clappr-player#wp3-player-0 .video-info__data-title, .clappr-player#wp3-player-0 .video-info__data-subtitle-program {\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      font-family: "opensans-regular";\n      letter-spacing: 0;\n      color: #ffffff;\n      text-shadow: 0 0 2px rgba(0, 0, 0, 0.5); }\n  .clappr-player#wp3-player-0 .video-info__status {\n    text-align: left;\n    font-family: "opensans-regular";\n    font-size: 16px;\n    line-height: 16px; }\n  .clappr-player#wp3-player-0 .video-info__data, .clappr-player#wp3-player-0 .video-info__status {\n    transition: all ease .2s; }\n  .clappr-player#wp3-player-0 .video-info--chromecast {\n    position: absolute;\n    top: 0;\n    background-color: transparent;\n    transition: opacity ease-in .2s; }\n    .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data {\n      margin: 5vw 0 0 5vw; }\n      .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-title {\n        font-size: 3.4vh;\n        line-height: 4.4vh;\n        margin-bottom: 8px; }\n      .clappr-player#wp3-player-0 .video-info--chromecast .video-info__data-subtitle-program {\n        font-size: 2.4vh;\n        line-height: 2.6vh; }\n  .clappr-player#wp3-player-0 .video-info--ad .video-info__data {\n    display: none !important; }\n  .clappr-player#wp3-player-0 .video-info--ad .video-info__status {\n    font-size: 14px;\n    line-height: normal;\n    color: #ffff93; }\n    .clappr-player#wp3-player-0 .video-info--ad .video-info__status:after {\n      content: "Publicidade"; }\n  .clappr-player#wp3-player-0 .video-info--hidden {\n    display: none; }\n',{playerId:this.options.playerId})[0]),this.shouldUseInfoButton&&this.$el.find(".drawer-info-icon").html('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M11 17h2v-6h-2v6zm1-15C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zM11 9h2V7h-2v2z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Informações da mídia</span>'),this}}},{key:"showModalvideoInfo",value:function(e){var t=this,i=n(n({},this.videoInfoHTMLData),{},{modalMode:!0});e&&e.stopPropagation(),this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_SHOW,this.template(i),{hidePanels:!0}),this.mediaControl.$el.addClass("media-control--keep-video-info");var r=this.modal.find(".video-info__mobile-container"),a=this.modal.find(".video-info__close");r&&r.on("click",(function(e){e&&e.stopPropagation(),t.hideModal()})),a&&a.append(Pa),this.mediaControl.setKeepVisible()}},{key:"hideModal",value:function(){this.modal&&this.modal.find(".video-info__mobile-container").off("click"),this.mediaControl.trigger(Tn.MEDIACONTROL_MODAL_HIDE),this.mediaControl.resetKeepVisible(),this.mediaControl.resetFocus(),this.mediaControl.$el.removeClass("media-control--keep-video-info")}}]),i}(Ti),Co=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).src=e.src,i.currentMedia=e.currentMedia,i.mediaControl=e.mediaControl,i.currentMedia.addUpdateListener((function(){return i.onMediaStatusUpdate()})),i.settings=e.settings,i}return o(n,[{key:"name",get:function(){return"chromecast_playback"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Ve('<div class="chromecast-playback-background"></div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-playback"}}},{key:"isReady",get:function(){return!0}},{key:"render",value:function(){var e=this.template();this.$el.html(e),this.options.poster?this.$(".chromecast-playback-background").css("background-image","url("+this.options.poster+")"):this.$(".chromecast-playback-background").css("background-color","#666")}},{key:"configure",value:function(e){var t=this;_e.debug(this.name,"configure",e),g(u(n.prototype),"configure",this).call(this,e),e.currentMedia&&(this.currentMedia=e.currentMedia,this.previousMediaState=void 0,this.currentMedia.addUpdateListener((function(){return t.onMediaStatusUpdate()})),clearTimeout(this.idleTimeout),this.onMediaStatusUpdate())}},{key:"play",value:function(){this.currentMedia.play()}},{key:"pause",value:function(){this.stopTimer(),this.currentMedia.pause()}},{key:"stop",value:function(){this.stopTimer(),this.currentMedia.stop()}},{key:"volume",value:function(e){var t=this,n=e/100,i=new chrome.cast.Volume(n,!1),r=new chrome.cast.media.VolumeRequest(i);this.currentMedia.setVolume(r,(function(){return _e.info(t.name,"volume set")}),(function(e){return _e.warn(t.name,e)}))}},{key:"seek",value:function(e){var t=this;this.stopTimer();var n=new chrome.cast.media.SeekRequest;n.currentTime=e,this.currentMedia.seek(n,(function(){return t.startTimer()}),(function(){return _e.warn(t.name,"seek failed")}))}},{key:"getVolume",value:function(){}},{key:"seekPercentage",value:function(e){if(e>=0&&e<=100){var t=this.getDuration();this.seek(e*t/100)}}},{key:"startTimer",value:function(){var e=this;this.timer=setInterval((function(){return e.updateMediaControl()}),100)}},{key:"stopTimer",value:function(){clearInterval(this.timer),this.timer=null}},{key:"getDuration",value:function(){return this.currentMedia.media.duration}},{key:"isPlaying",value:function(){return"PLAYING"===this.currentMedia.playerState||"BUFFERING"===this.currentMedia.playerState}},{key:"getPlaybackType",value:function(){return"LIVE"==this.currentMedia.streamType?qe.LIVE:qe.VOD}},{key:"onMediaStatusUpdate",value:function(){var e=this,t=this.currentMedia.loadingItemId||this.currentMedia.preloadedItemId;_e.debug(this.name,"onMediaStatusUpdate",this.currentMedia.playerState,t),this.isPlaying()&&!this.timer&&this.startTimer(),this.updateBufferState(),this.idleTimeout&&"IDLE"!==this.currentMedia.playerState&&clearTimeout(this.idleTimeout),"PLAYING"===this.currentMedia.playerState?(this.trigger(De.PLAYBACK_PLAY,this.name),this.trigger(De.PLAYBACK_MEDIACONTROL_ENABLE,this.name)):t||"IDLE"!==this.currentMedia.playerState||"PLAYING"!==this.previousMediaState||"FINISHED"!==this.currentMedia.idleReason?"IDLE"===this.currentMedia.playerState&&"FINISHED"===this.currentMedia.idleReason&&this.trigger(De.PLAYBACK_MEDIACONTROL_DISABLE,this.name):this.idleTimeout=setTimeout((function(){return e.trigger(De.PLAYBACK_ENDED,e.name)}),1e3),this.previousMediaState=this.currentMedia.playerState}},{key:"updateBufferState",value:function(){"BUFFERING"===this.currentMedia.playerState?(this.isBuffering=!0,this.trigger(De.PLAYBACK_BUFFERING,this.name)):this.isBuffering&&(this.isBuffering=!1,this.trigger(De.PLAYBACK_BUFFERFULL,this.name))}},{key:"updateMediaControl",value:function(){if(this.currentMedia.media){var e=this.currentMedia.getEstimatedTime(),t=this.currentMedia.media.duration;this.trigger(De.PLAYBACK_TIMEUPDATE,{current:e,total:t},this.name)}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}}]),n}(qe),Io="urn:x-cast:wm.player",Do=0,Ro=1,xo={mp4:"video/mp4",ogg:"video/ogg","3gpp":"video/3gpp",webm:"video/webm",mkv:"video/x-matroska",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ogv:"video/ogg","3gp":"video/3gpp"},Lo=bn.getCookie,Po=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).contentType="application/video-id",!Q.isiOS&&Q.isChrome&&n.options.appId?(n.appId=n.options.appId,n.deviceState=Do,n.embedScript()):n.disable(),n.subtitlesAvailable=[],n.audiosAvailable=[],n}return o(i,[{key:"version",get:function(){return VERSION}},{key:"name",get:function(){return"chromecast"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"tagName",get:function(){return"button"}},{key:"panel",get:function(){return"lower"}},{key:"position",get:function(){return"right"}},{key:"attributes",get:function(){return{class:"chromecast-button media-control-button","data-chromecast":""}}},{key:"events",get:function(){return{click:"click"}}},{key:"options",get:function(){return this.core.options.chromecast||(this.core.options.chromecast={})}},{key:"hasCastLib",get:function(){return window.chrome&&window.chrome.cast}},{key:"isCastAvailable",get:function(){return this.hasCastLib&&window.chrome.cast.isAvailable}},{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,De.MEDIACONTROL_RENDERED,this.render),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.containerChanged),this.container&&(this.listenTo(this.container,De.CONTAINER_TIMEUPDATE,this.containerTimeUpdate),this.listenTo(this.container,De.CONTAINER_PLAY,this.containerPlay),this.listenTo(this.container,De.CONTAINER_ENDED,this.sessionStopped),this.listenTo(this.container,De.CONTAINER_VOLUME,this.onVolumeChanged),this.listenTo(this.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container,Tn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Tn.WM_AUDIO_CHANGED,this.onAudioChanged))}},{key:"onMetadataLoaded",value:function(e){this.providerId=e.providerId}},{key:"onVolumeChanged",value:function(e){var t=this;if(this.session){var n=e/100;this.session.setReceiverVolumeLevel(n,(function(){return _e.info(t.name,"volume set")}),(function(e){return _e.error(t.name,e)}))}}},{key:"onSubtitleChanged",value:function(e){if(this.session){var t={action:"SUBTITLE_CHANGED",payload:this.subtitlesAvailable.find((function(t){return e.keys.includes(t.language)||t.role===e.role}))};this.sendMessage(t)}}},{key:"onAudioChanged",value:function(e){if(this.session){var t={action:"AUDIO_CHANGED",payload:this.audiosAvailable.find((function(t){return e.keys.includes(t.language)&&t.role===e.role}))};this.sendMessage(t)}}},{key:"enable",value:function(){g(u(i.prototype),"enable",this).call(this),this.render(),this.embedScript()}},{key:"embedScript",value:function(){var e=this;if(this.isCastAvailable)jn((function(){return e.bootstrapCastApi()}));else{var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src","https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"),t.onload=function(){e.core.trigger(Tn.CHROMECAST_SCRIPT_LOADED),e.bootstrapCastApi()},t.onerror=function(){e.core.trigger(Tn.CHROMECAST_SCRIPT_ERROR,{code:"chromecast-script-error",description:"Chromecast script error.",level:"INFO"})},document.body.appendChild(t)}}},{key:"bootstrapCastApi",value:function(){var e=this;this.isCastAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(t,n){t?(e.core.trigger(Tn.CHROMECAST_API_READY),e.initializeCastApi()):(_e.warn(e.name,"GCastApi error",n),e.core.trigger(Tn.CHROMECAST_API_ERROR,{code:"chromecast-api-error",description:n,level:"INFO"}),e.disable())}}},{key:"initializeCastApi",value:function(){var e=this,t=chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED,n=new chrome.cast.SessionRequest(this.appId),i=new chrome.cast.ApiConfig(n,(function(t){return e.sessionListener(t)}),(function(t){return e.receiverListener(t)}),t);chrome.cast.initialize(i,(function(){e.core.trigger(Tn.CHROMECAST_INITIALIZE_SUCCESS),_e.debug(e.name,"init success")}),(function(){e.core.trigger(Tn.CHROMECAST_INITIALIZE_ERROR,{code:"chromecast-init-error",description:"Chromecast initialize error.",level:"INFO"}),_e.warn(e.name,"init error")}))}},{key:"sessionListener",value:function(e){_e.debug(this.name,"new session id:"+e.sessionId),this.newSession(e)}},{key:"sessionUpdateListener",value:function(){this.session&&(_e.debug(this.name,this.session.status),this.session.status===chrome.cast.SessionStatus.STOPPED&&(this.sessionStopped(),this.session=null))}},{key:"mediaListener",value:function(){if(_e.debug(this.name,"mediaListener",this.session.media),this.session.media){var e=this.session.media[this.session.media.length-1];this.mediaSession=e,this.playbackProxy&&this.playbackProxy.configure({currentMedia:e})}}},{key:"receiverListener",value:function(e){e===chrome.cast.ReceiverAvailability.AVAILABLE?(this.core.trigger(Tn.CHROMECAST_AVAILABLE),_e.debug(this.name,"receiver found"),this.show()):(this.core.trigger(Tn.CHROMECAST_UNAVAILABLE),_e.debug(this.name,"receiver list empty"),this.hide())}},{key:"launchSuccess",value:function(e){clearInterval(this.connectAnimInterval),this.core.trigger(Tn.CHROMECAST_LAUNCH_SUCCESS),_e.debug(this.name,"launch success - session: "+e.sessionId),this.newSession(e)}},{key:"launchError",value:function(e){var t=this.mediaSession&&this.mediaSession.playerState!==chrome.cast.media.PlayerState.IDLE,n=this.mediaSession&&this.mediaSession.playerState===chrome.cast.media.PlayerState.PLAYING,i=e.code===chrome.cast.ErrorCode.CANCEL;this.core.trigger(Tn.CHROMECAST_LAUNCH_ERROR,e),t&&i||(_e.debug(this.name,"error on launch",e),this.renderDisconnected(),clearInterval(this.connectAnimInterval),(this.isPlayingBeforeConnect||n)&&(this.container.play(),this.container.seek(this.currentTime)))}},{key:"loadMediaSuccess",value:function(e,t){this.core.trigger(Tn.CHROMECAST_MEDIA_LOAD_SUCCESS),_e.debug(this.name,"new media session",t,"(".concat(e,")")),this.originalPlayback=this.core.getCurrentPlayback();var n=Object.assign({},this.originalPlayback.options,{currentMedia:t,mediaControl:this.core.mediaControl,poster:this.container.options.poster,settings:this.originalPlayback.settings});this.src=this.originalPlayback.src,this.playbackProxy=new Co(n),this.playbackProxy.render(),this.mediaSession=t,this.originalPlayback.$el.hide();var i=this.core.getCurrentContainer();i.$el.append(this.playbackProxy.el),i.stopListening(),i.playback=this.playbackProxy,i.bindEvents(),i.settingsUpdate()}},{key:"loadMediaError",value:function(e){this.core.trigger(Tn.CHROMECAST_MEDIA_LOAD_ERROR,e),_e.warn(this.name,"media error",e)}},{key:"newSession",value:function(e){var t=this;this.session=e,this.deviceState=Ro,this.renderConnected(),this.core.trigger(Tn.DFP_DISABLE),e.addUpdateListener((function(){return t.sessionUpdateListener()})),e.addMediaListener((function(){return t.mediaListener()})),e.addMessageListener(Io,(function(e,n){return t.wmpMessageListener(e,n)})),this.containerPlay()}},{key:"sessionStopped",value:function(){this.renderDisconnected();var e=this.core.getCurrentContainer(),t=void 0;this.mediaSession&&(t=this.mediaSession.playerState,this.mediaSession=null,this.playbackProxy.$el&&this.playbackProxy.$el.remove(),this.originalPlayback.$el&&this.originalPlayback.$el.show(),e.stopListening(),e.playback=this.originalPlayback,e.bindEvents(),e.settingsUpdate(),this.core.trigger(Tn.DFP_ENABLE)),this.playbackProxy&&((this.playbackProxy.isPlaying()||"PLAYING"===t)&&(e.play(),e.seek(this.currentTime)),this.playbackProxy.stop(),this.playbackProxy=null)}},{key:"sendMessage",value:function(e){var t=this;this.session.sendMessage(Io,e,(function(e){return t.onMessageSuccess(e)}),(function(e){return t.onMessageFailure(e)}))}},{key:"onMessageSuccess",value:function(e){_e.info(this.name,"message bus: send message success",e)}},{key:"onMessageFailure",value:function(e){_e.error(this.name,"message bus: send message error",e)}},{key:"loadMedia",value:function(){var e=this;if(!this.playback||this.playback.isReady){this.container.pause();var t=this.container.options.src;_e.debug(this.name,"loading... "+t);var n=this.createMediaInfo(t),i=new chrome.cast.media.LoadRequest(n);i.autoplay=!0,i.currentTime="ad"==this.core.getPlaybackType()?0:this.currentTime||0,this.session.loadMedia(i,(function(t){return e.loadMediaSuccess("loadMedia",t)}),(function(t){return e.loadMediaError(t)}))}else this.listenToOnce(this.playback,De.PLAYBACK_READY,this.loadMedia)}},{key:"createMediaInfo",value:function(e){var t=i.mimeTypeFor(e),r=this.core.options,a=r.dfp,o=this.getSelectedSettings(),s=a.watchedAds;"ad"===this.core.getPlaybackType()&&(s+=1);var l={token:r.token||this.getTokenFromCookie(),adUnit:a.adUnit,adCustomData:a.adCustomData,adAccountId:a.adAccountId,adCmsId:a.adCmsId,daiCustomData:r.daiCustomData,adPublisherProvidedID:r.adPublisherProvidedID,watchedAds:s,ga:r.ga,defaultSubtitle:o.subtitle,defaultAudio:o.audio,videoInfo:r.videoInfo,enableBingeWatch:r.enableBingeWatch||!1,upa:r.upa,globoId:r.globoId||void 0,horizon:r.horizon||{},jarvis:n({platformId:"web",clientVersion:"1.0.0"},r.jarvis)},u=new chrome.cast.media.MediaInfo(e);return u.contentType=this.contentType||t,u.customData=l,u.metadata=this.createMediaMetadata(),u}},{key:"getSelectedSettings",value:function(){var e=this.core.getPlugin("settings"),t=e.getSelectedSettings()||{},i=t.audio,r=t.subtitle;return n(n({},e.getDefaultSettings()||{}),{},{audio:i,subtitle:r})}},{key:"getTokenFromCookie",value:function(){var e=this.providerId?"WMPTOKEN_".concat(this.providerId):"GLBID";return Lo(e)}},{key:"createMediaMetadata",value:function(){this.options.media||(this.options.media={});var e=this.options.media.type,t=this.createCastMediaMetadata(e);return t.title=this.options.media.title,t.subtitle=this.options.media.subtitle,t.releaseDate=this.options.media.releaseDate,e===i.TvShow?(t.episode=this.options.media.episode,t.originalAirdate=this.options.media.originalAirdate,t.season=this.options.media.season,t.seriesTitle=this.options.media.seriesTitle):e===i.Movie&&(t.studio=this.options.media.studio),this.options.media.images&&(t.images=this.options.media.images.map((function(e){return new chrome.cast.Image(e)}))),!t.images&&this.core.options.poster&&(t.images=[new chrome.cast.Image(this.core.options.poster)]),t}},{key:"createCastMediaMetadata",value:function(e){switch(e){case i.Movie:return new chrome.cast.media.MovieMediaMetadata;case i.TvShow:return new chrome.cast.media.TvShowMediaMetadata;default:return new chrome.cast.media.GenericMediaMetadata}}},{key:"show",value:function(){this.$el.show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"click",value:function(){var e=this;if(this.core.trigger(Tn.CHROMECAST_LAUNCH_REQUEST),chrome.cast.requestSession((function(t){return e.launchSuccess(t)}),(function(t){return e.launchError(t)})),!this.session){this.isPlayingBeforeConnect=this.container.isPlaying(),this.container.pause();var t=0;clearInterval(this.connectAnimInterval),this.connectAnimInterval=setInterval((function(){e.renderConnecting(t),t=(t+1)%3}),600)}}},{key:"containerChanged",value:function(){this.stopListening(),this.container=this.core.activeContainer,this.playback=this.core.activePlayback,this.bindEvents(),this.currentTime=0,this.session&&(this.originalPlayback=this.playback)&&this.sessionStopped()}},{key:"containerTimeUpdate",value:function(e){this.currentTime=e.current}},{key:"containerPlay",value:function(){!this.session||this.mediaSession&&"IDLE"!==this.mediaSession.playerStatus||(_e.debug(this.name,"load media"),this.currentTime=this.currentTime||0,this.loadMedia())}},{key:"wmpMessageListener",value:function(e,t){if(this.session){var n=JSON.parse(t);this.handleAdBreak(n),this.handleMediaTracks(n)}}},{key:"handleAdBreak",value:function(e){"adBreakStarted"===e.name?(_e.debug(this.name,"ad break started"),this.playbackProxy&&(this.playbackProxy.settings.seekEnabled=!1,this.playbackProxy.trigger(De.PLAYBACK_SETTINGSUPDATE))):"adBreakEnded"===e.name&&(_e.debug(this.name,"ad break ended"),this.playbackProxy&&(this.playbackProxy.settings.seekEnabled=!0,this.playbackProxy.trigger(De.PLAYBACK_SETTINGSUPDATE)))}},{key:"handleMediaTracks",value:function(e){switch(e.action){case"SUBTITLE_AVAILABLE":this.subtitlesAvailable=e.payload;break;case"AUDIO_AVAILABLE":this.audiosAvailable=e.payload}}},{key:"createCachedElements",value:function(){this.$mediaControl=this.mediaControl&&this.mediaControl.$el,this.$settingsButton=this.$mediaControl.find(".media-control-button[data-settings]")}},{key:"renderOverlay",value:function(){if(this.removeOverlay(),this.createCachedElements(),this.session){var e=this.session&&this.session.receiver&&this.session.receiver.friendlyName;this.core.trigger(Tn.CHROMECAST_MEDIA_WATCHING,e)}}},{key:"renderConnecting",value:function(e){var t=['<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast0_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-240.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast1_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-272.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>','<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg class="player-cast-loading" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="ic_cast2_black_24dp" sketch:type="MSArtboardGroup">\n            <g id="ic_remove_circle_white_24dp" sketch:type="MSLayerGroup">\n                <path d="M1,18 L1,21 L4,21 C4,19.34 2.66,18 1,18 L1,18 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,14 L1,16 C3.76,16 6,18.24 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z" id="Path" opacity="0.3" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M1,10 L1,12 C5.97,12 10,16.03 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z" id="Path" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <path d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z" id="cast" fill="#000000" sketch:type="MSShapeGroup"></path>\n                <rect id="bounds" sketch:type="MSShapeGroup" x="0" y="0" width="24" height="24"></rect>\n            </g>\n        </g>\n        <g id="assets" sketch:type="MSLayerGroup" transform="translate(-304.000000, -106.000000)">\n            <g id="64px" transform="translate(0.000000, 114.000000)"></g>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhando para outro dispositivo</span>'];this.$el.html(t[e]),this.container&&this.container.$el.addClass("cast-connecting"),this.$mediaControl.addClass("media-control-disabled media-control--no-background"),this.mediaControl.setKeepVisible(),this.renderStyle()}},{key:"removeOverlay",value:function(){this.core.trigger(Tn.CHROMECAST_MEDIA_STOP_WATCHING)}},{key:"renderConnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" id="cast-on-a"/>\n        <path id="cast-on-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-on-b" fill="#fff">\n            <use xlink:href="#cast-on-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-on-a"/>\n        <g mask="url(#cast-on-b)">\n            <use fill="#FFF" xlink:href="#cast-on-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Parar de espelhar</span>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.setKeepVisible(),this.container.$el.removeClass("cast-connecting"),this.container.$el.addClass("cast-enabled"),this.renderStyle(),this.renderOverlay()}},{key:"renderDisconnected",value:function(){this.$el.html('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <defs>\n        <path d="M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z" id="cast-off-a"/>\n        <path id="cast-off-c" d="M0 0h24v24H0z"/>\n    </defs>\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <mask id="cast-off-b" fill="#fff">\n            <use xlink:href="#cast-off-a"/>\n        </mask>\n        <use fill="#FFF" xlink:href="#cast-off-a"/>\n        <g mask="url(#cast-off-b)">\n            <use fill="#FFF" xlink:href="#cast-off-c"/>\n            <path stroke="#E5E5E5" d="M.5.5h23v23H.5z"/>\n        </g>\n    </g>\n</svg>\n<span class="visually-hidden">Espelhar em outro dispositivo</span>'),this.$mediaControl.removeClass("media-control-disabled"),this.mediaControl.resetKeepVisible(),this.container&&this.container.$el.removeClass("cast-enabled cast-connecting"),this.$mediaControl.removeClass("media-control--no-background"),this.renderStyle(),this.removeOverlay()}},{key:"renderStyle",value:function(){var e=En.getStyleFrom(".clappr-player#wp3-player-0 svg #cast, .clappr-player#wp3-player-0 svg #cast-on, .clappr-player#wp3-player-0 svg #Path {\n  fill: #fff; }\n\n.clappr-player#wp3-player-0 .chromecast-playback {\n  height: 100%;\n  width: 100%; }\n  .clappr-player#wp3-player-0 .chromecast-playback .chromecast-playback-background {\n    background-size: cover; }\n\n.clappr-player#wp3-player-0 .chromecast-playback-background,\n.clappr-player#wp3-player-0 .chromecast-playback-overlay {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0;\n  left: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator.media-control-element {\n  padding-bottom: 0;\n  padding-top: 0; }\n",{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"render",value:function(){return this.createCachedElements(),this.session?this.renderConnected():this.renderDisconnected(),this.appendToMediaControl(),this}},{key:"appendToMediaControl",value:function(){var e=this.$mediaControl&&this.$mediaControl.find(".media-control-button[data-fullscreen]");e.length>0?Y(this.el).insertBefore(e):this.$mediaControl.find(".media-control-center-panel").append(this.el)}}],[{key:"Movie",get:function(){return"movie"}},{key:"TvShow",get:function(){return"tv_show"}},{key:"Generic",get:function(){return"none"}},{key:"version",get:function(){return VERSION}},{key:"mimeTypeFor",value:function(e){var t=(e.split("?")[0].match(/.*\.(.*)$/)||[])[1];return xo[t]?xo[t]:e.indexOf(".ism")>-1?"application/vnd.ms-sstr+xml":void 0}}]),i}(Ti),Oo=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).$el.hide(),i}return o(n,[{key:"name",get:function(){return"chromecast_sender_indicator"}},{key:"tagName",get:function(){return"div"}},{key:"panel",get:function(){return Q.supportsTouchEvents?"between":"lower"}},{key:"position",get:function(){return"center"}},{key:"overlayTemplate",get:function(){return Ve('<div class="chromecast-playback-overlay">\n  <div class="chromecast-status">\n    <span class="label-watching">Assistindo em</span>\n    <span class="label-device"></span>\n  </div>\n</div>\n')}},{key:"attributes",get:function(){return{class:"chromecast-sender-indicator"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Tn.CHROMECAST_MEDIA_WATCHING,this.renderTemplate),this.listenTo(this.core,Tn.CHROMECAST_MEDIA_STOP_WATCHING,this.hideRender)}},{key:"hideRender",value:function(){this.$el.empty(),this.$el.hide()}},{key:"renderStyle",value:function(){var e=En.getStyleFrom('.clappr-player#wp3-player-0 .thumb-preview-modal--visible .chromecast-sender-indicator {\n  opacity: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-sender-indicator {\n  padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay {\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n  pointer-events: none;\n  flex-direction: row;\n  align-items: center; }\n  .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status {\n    position: relative;\n    top: -16px; }\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-watching,\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n      font-family: "opensans-regular", sans-serif;\n      font-size: 14px;\n      color: #fff; }\n    .clappr-player#wp3-player-0 .media-control-panel .chromecast-playback-overlay .chromecast-status .label-device {\n      font-weight: bold; }\n\n.clappr-player#wp3-player-0 .media-control-panel__between .chromecast-playback-overlay .chromecast-status {\n  top: -36px; }\n',{playerId:this.core.options.playerId});this.$el.append(e[0])}},{key:"renderTemplate",value:function(e){this.hideRender(),this.renderStyle(),this.$el.append(this.overlayTemplate()),this.$el.show(),e&&this.$el.find(".label-device").html(e)}}]),n}(Ti),Mo='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector">\r\n\t<path d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921c-0.722,0-1.351,0.367-1.707,0.916l0,0\r\n\t\tc-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999c0,1.07,0.898,1.939,2.015,1.939\r\n\t\tc0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004c1.113,0,2.016-0.869,2.016-1.939\r\n\t\tC45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',No='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_">\r\n\t<path d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136c-1.004-0.994-1.004-2.599,0-3.589\r\n\t\tc1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g>\r\n\t\t<path d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',Bo='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903c0,1.795,1.141,3.498,2.969,3.498h26.474\r\n\t\tc1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z M23.446,35.267\r\n\t\tc-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>',Uo='<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.7px" height="45.8px" viewBox="0 0 45.7 45.8" enable-background="new 0 0 45.7 45.8" xml:space="preserve">\r\n<g id="Layer_1_1_" display="none">\r\n\t<g id="vector" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M45.3,38.3L45.3,38.3L24.7,5.2l0,0c-0.4-0.6-1-0.9-1.7-0.9c-0.7,0-1.4,0.4-1.7,0.9l0,0\r\n\t\t\tC16,13.6,0.6,38.3,0.6,38.3v0c-0.2,0.3-0.3,0.6-0.3,1c0,1.1,0.9,1.9,2,1.9c0,0,0.1,0,0.1,0l0,0h41.1v0c0,0,0,0,0,0\r\n\t\t\tc1.1,0,2-0.9,2-1.9C45.6,38.9,45.5,38.6,45.3,38.3z M24.2,13.7c1.5,0.5,2.4,1.9,2.2,3.6c-0.2,1.7-0.6,3.4-0.8,5.1\r\n\t\t\tc-0.3,2-0.6,4.1-1,6.2c-1.1,0-2.1,0-3.2,0c-0.3-2.2-0.7-4.3-1-6.4c-0.2-1.4-0.5-2.8-0.8-4.3C19.1,15,21.4,12.8,24.2,13.7z\r\n\t\t\t M23,37.2c-1.9,0-3.5-1.5-3.4-3.3c0-0.7,0.3-1.4,0.7-1.9c0.6-0.8,1.7-1.3,2.8-1.3c1.9,0,3.5,1.5,3.4,3.3\r\n\t\t\tC26.4,35.7,24.9,37.2,23,37.2z"/>\r\n\t</g>\r\n\t<g id="vector_2_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.9,44.7c-1,1-2.7,1-3.7,0L1,4.5c-1-1-1-2.7,0-3.7c1-1,2.7-1,3.7,0L44.9,41C45.9,42,45.9,43.7,44.9,44.7\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M24.3,6.4c0.8,0,1.6,0.4,1.6,1.2c0,1.5,0,3,0,6c1.2,0,1.6,0,4.6,0c0-3,0-5.6,0-7.5c0-2.5-1.5-3.3-3.9-3.3\r\n\t\t\t\tc-4.1,0-8.5,0-12.6,0l3.6,3.6C19.8,6.4,22,6.4,24.3,6.4z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M30.4,15.5C30.4,15.5,30.4,15.5,30.4,15.5c0,0,0.6,0,1.4,0c0.8,0,0.8,0.3,0.8,1.1c0,1.7-0.1,3.3-0.1,5\r\n\t\t\t\tl3.6,3.6c0-3.3,0-6.7,0-10c0-2.5-0.7-3.3-3.1-3.3c-1.3,0-2.6,0-3.5,0l0,0c-1.4,0-2.7,0-4.1,0c-0.7,0-1.6,0-2.6,0.1l3.7,3.5\r\n\t\t\t\tC27.8,15.4,28.4,15.5,30.4,15.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M29.1,37.3c-0.9,0-1.8,0-2.7,0c-1.6,0-2.9,0-4.6,0c-1.7,0-1.7-0.8-1.7-0.8c0-5,0.2-4.5,0.2-6.6l-3.9-4.7\r\n\t\t\t\tc0,1.2,0.1,2.1,0.1,3.3c-0.8,0-1.8,0.1-2.3,0.1c-0.8,0-1-0.6-1-1.4c0-1.9,0-3.9,0-5.8L9.7,18c0,0.5,0,0.8,0,0.8\r\n\t\t\t\tc0,3.8,0,7.8,0,11.9c0,2.5,0.5,3.1,3,3.1c0.9,0,2.8-0.1,3.9-0.1c0.1,2.6,0.1,4.7,0.1,5.9c0,2.2,0.6,3,2.4,3.2c0.3,0,0.5,0,0.9,0\r\n\t\t\t\tc4.3,0,8.7,0,13,0c0.5,0,1-0.1,1.4-0.2L29.1,37.3z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="vector_4_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M40.3,3.6H8.4c-2.3,0-5-0.3-5,2.1v30.2c0,2.4,2.7,6.7,5,6.7h31.9c2.3,0,1.1-4.4,1.1-6.7V5.7\r\n\t\t\tC41.4,3.3,42.6,3.6,40.3,3.6z M32.4,12.6c0,0,0.7,0.1,0.4,0.1c-1.4,0.2-1.9,0.7-2.9,1.8c-0.9,1-1.5,5.1-1.5,5.1c1.3,0,3,0,3,0\r\n\t\t\ts0,1.9,0,3.4c0,0.3,0.5,0.3,0.2,0.3c-1.9,0-3.5,0-5.3,0c-0.2,0-2,4.2-3.3,6c-1.6,2.3-3.8,3.7-6.5,4.3c-1,0.2-1.9,0.3-2.9,0.3\r\n\t\t\tc-0.2,0-0.2,0-0.2-0.2c0-1.6,0-3.1,0-4.7c0-0.2-0.6-0.3-0.3-0.3c-0.1,0-0.8,0-0.8,0c0,0,0,0,0,0.1c0,0,0.8,0,1,0\r\n\t\t\tc1.6-0.1,3.3-0.7,4.4-1.8c0.4-0.4,1.8-2.3,2.1-2.8c0.2-0.3,1.6-3.4,1.9-4.1c0.3-0.8,0.6-1.6,0.9-2.4c0.1-0.3,0.8-1.8,0.9-2\r\n\t\t\tc0.4-0.8,0.8-1.5,1.2-2.3c0.2-0.4,0.5-0.8,0.8-1.2c1.6-2.2,3.4-3.7,5.9-4.4c0.9-0.2,0.8-0.6,0.8-0.6C32.4,10.5,32.4,11,32.4,12.6z\r\n\t\t\t"/>\r\n\t</g>\r\n\t<g id="vector_5_" display="inline">\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path fill="#CCCBCB" d="M23,5.2c-6.9,0-12.5,4.2-12.5,13.3v11.2c0,5.5,4.3,8.7,9.3,9.7c-2.8-1.6-5-5.1-5-10.2v-7.4\r\n\t\t\t\t\tc0-6.8,3.7-12.2,8.2-12.2c4.5,0,8.2,5.5,8.2,12.2v7.4c0,5.1-1.7,8.4-3.9,10c4.5-1.2,8.2-4.3,8.2-9.4V18.5\r\n\t\t\t\t\tC35.4,9.3,29.8,5.2,23,5.2z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path fill="#CCCBCB" d="M36.6,14.6H10.1c-1.8,0-3-0.7-3,1.1v11.9c0,1.8,1.1,3.5,3,3.5h26.5c1.8,0,2.2-1.7,2.2-3.5V15.7\r\n\t\t\tC38.8,13.9,38.4,14.6,36.6,14.6z M23.4,26.3c-2.2,0-4-1.8-4-4c0-2.2,1.8-4,4-4c2.2,0,4,1.8,4,4C27.5,24.5,25.7,26.3,23.4,26.3z"/>\r\n\t</g>\r\n\t<g id="vector_3_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M34.1,35.6c-0.3,0-0.6,0-0.9,0c-0.3-2.5,0.4-5-0.6-7.4c-1-2.3-2.6-4.1-4.3-5.8c1.7-1.7,3.3-3.4,4.3-5.7\r\n\t\t\tc1-2.3,0.4-4.8,0.7-7.3c0.3,0,0.6,0,0.9,0c0.8-0.1,1.3-0.6,1.4-1.4c0-0.8-0.5-1.3-1.4-1.3c-0.1,0-22.1,0-22.3,0\r\n\t\t\tc-0.8,0.1-1.2,0.6-1.2,1.4c0,0.8,0.5,1.3,1.3,1.4c0.4,0,0.8,0,1.3,0c0,1.4,0,2.7,0,4.1c0,1.9,0.5,3.6,1.5,5.1c1,1.4,2.1,2.6,3.2,4\r\n\t\t\tc-1.6,1.6-3.2,3.4-4.1,5.6c-1,2.3-0.3,4.8-0.6,7.3c-0.5,0-0.9-0.1-1.4,0c-0.7,0.1-1.1,0.6-1.1,1.3c0,0.8,0.4,1.6,1.1,1.8\r\n\t\t\tc0.2,0,22.4,0,22.5,0c0.8-0.1,1.3-0.8,1.3-1.6C35.4,36.4,34.9,35.7,34.1,35.6z M17,10.4c4,0,7.9,0,11.9,0c0.2,0,0.1,3.7-0.5,4.5\r\n\t\t\tc-1.5,2.2-3.5,4.4-5.5,6.2c-2-1.7-3.9-4.2-5.3-6.4C16.9,13.8,16.8,10.4,17,10.4z M28.9,34.5c-4,0-7.9,0-11.9,0\r\n\t\t\tc-0.2,0-0.1-3.4,0.5-4.2c1.5-2.2,3.5-3.8,5.5-5.6c2,1.7,3.9,3.5,5.3,5.7C29,31.3,29.1,34.5,28.9,34.5z"/>\r\n\t</g>\r\n\t<g id="vector_1_" display="inline">\r\n\t\t<path fill="#CCCBCB" d="M44.5,44c-1,1-2.6,1-3.6,0L1.4,5.1c-1-1-1-2.6,0-3.6c1-1,2.6-1,3.6,0l39.4,38.8C45.5,41.4,45.5,43,44.5,44\r\n\t\t\tz"/>\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M16.5,34.5c-1,0-1.3-0.3-1.3-1.3c0-3.2,0-5.8,0-8.3L11.4,21c0,1.5,0,3,0,4.2c0,0-0.2,9.9-0.2,14.8\r\n\t\t\t\tc0,3,0.8,4.1,3.8,4.1c5.3,0,10.4,0.1,15.7,0.1c1.5,0,2.5-0.3,3-1l-8.8-8.7C22.1,34.5,19.3,34.5,16.5,34.5z"/>\r\n\t\t\t<path fill="#CCCBCB" d="M28.7,11.7c1,0,1.3,0.3,1.3,1.3c0,2.4,0,4.8,0,7.2l4.4,4.4c0-4.4,0-8.8,0-13.2c0-3-1-3.9-4-3.9\r\n\t\t\t\tc-4.5,0-9,0-13.5,0l4.4,4.3C23.8,11.7,26.2,11.7,28.7,11.7z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g id="Layer_7" display="inline">\r\n\t</g>\r\n</g>\r\n<g id="Layer_2">\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<path d="M28.5,25.6l0.1-2c0-5.9,4.2-7.6,8.7-7.6c1.1,0,2.2,0.2,3.2,0.5c-0.9-2.9-2.5-5.5-4.9-7.8c-3.9-3.9-8.5-5.8-14-5.8\r\n\t\t\t\tc-5.3,0-9.9,1.9-13.7,5.6c1.3,0.4,3,1,5.1,1.9c0.2,0.1-0.1,0.4-0.1,0.6c0,0.6,0.5,0.9,1.1,0.7c0.6-0.2,1.1-0.6,1.6-0.9\r\n\t\t\t\tc0.8-0.4,1.6-0.7,2.5-0.6c0.5,0.1,0.9,0.4,0.8,0.9c0,0.4-0.2,0.8-0.3,1.3c-0.2,0.5-0.4,0.9-0.5,1.3c-0.1,0.5,0.1,0.7,0.6,0.5\r\n\t\t\t\tc0.4-0.2,0.7-0.4,1.1-0.6c0.7-0.4,1.3-0.1,1.6,0.6c0.1,0.4,0.1,0.8-0.2,1.1c-0.3,0.4-0.6,0.8-0.9,1.2c-0.6,0.7-1.1,1.4-1.3,2.3\r\n\t\t\t\tc-0.1,0.5-0.3,1.3-0.5,1.7c-0.1,0.2-0.2,0.8-0.3,0.8c0,0-0.1,0-0.1,0c-0.1,0-0.2-0.9-0.3-1.2c-0.3-0.9-0.7-1.4-1.6-1.5\r\n\t\t\t\tc-0.3,0-0.6-0.1-0.8-0.1c-1,0.1-1.7,0.6-1.8,1.5c-0.2,1.3,0.8,2.8,2,3.1c0.7,0.1,1.3,0.1,2,0.1c0.6,0,1.3-0.1,1.9,0\r\n\t\t\t\tc1.3,0,2.3,0.6,2.9,1.8c0.6,1.1,0.8,2.3,0.7,3.5c-0.1,1.3-0.6,2.3-1.7,3c-0.4,0.2-0.7,0.5-1,0.8c-0.5,0.4-0.8,1-0.9,1.7\r\n\t\t\t\tc-0.2,1.3-0.9,2.4-1.8,3.4c0,0.1-0.1,0.1-0.2,0.1c-0.2,0.1-0.4,0.1-0.6-0.1c-0.1-0.1-0.3-0.3-0.4-0.4c-0.7-0.5-1.1-1.1-1.3-1.9\r\n\t\t\t\tc-0.2-1-0.4-2.1-0.5-3.2c-0.2-1.4-0.7-2.7-1.9-3.6c-0.2-0.1-0.3-0.3-0.5-0.4c-1-0.9-1-2.2-0.1-3.2c0.2-0.3,0.5-0.5,0.7-0.8\r\n\t\t\t\tc0.4-0.5,0.4-1.1,0-1.6c-0.3-0.4-0.7-0.8-1.1-1c-1.2-0.7-2.5-1.4-4-0.7c-0.3,0.1-0.5,0-0.6-0.3c-0.2-0.4-0.3-0.8-0.4-1.2\r\n\t\t\t\tc-0.1-0.7,0-1.4,0-2c0-0.9-0.1-1.8-0.5-2.7c-0.1-0.2-0.8-1-1.5-2c-1.9,3.1-2.9,6.5-2.9,10.4c0,5.5,1.9,10.1,5.8,14\r\n\t\t\t\tc3.9,3.9,8.5,6.4,14,6.4c4.8,0,9-0.9,12.6-3.9h-5.7c-1.2,0-1.7-2.2-1.7-3.4v-7.8C26.9,26.8,27.3,27.3,28.5,25.6z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<g>\r\n\t\t<g>\r\n\t\t\t<g>\r\n\t\t\t\t<path d="M37.2,19.6c-3.2,0-5.7,1.9-5.7,6.1v5.1c0,6.1,11.4,6.1,11.4,0v-5.1C42.9,21.5,40.4,19.6,37.2,19.6z M40.5,29.7\r\n\t\t\t\t\tc0,6.3-6.5,5.5-6.5,0v-2.9c0-2.7,1.4-4.8,3.3-4.8c1.8,0,3.2,2.2,3.2,4.8V29.7z"/>\r\n\t\t\t</g>\r\n\t\t</g>\r\n\t\t<path d="M43.2,28.1H31.1c-0.8,0-1.3-0.2-1.3,0.7v5.4c0,0.8,0.5,1.9,1.3,1.9h12.1c0.8,0,0.6-1.1,0.6-1.9v-5.4\r\n\t\t\tC43.9,27.9,44.1,28.1,43.2,28.1z M37.3,33.6c-0.9,0-1.6-0.7-1.6-1.6c0-0.9,0.7-1.6,1.6-1.6c0.9,0,1.6,0.7,1.6,1.6\r\n\t\t\tS38.2,33.6,37.3,33.6z"/>\r\n\t</g>\r\n</g>\r\n</svg>',Fo={DEFAULT_ERROR:n(n({},en.DEFAULT_ERROR),{},{UI:{title:"N&#227;o foi poss&#237;vel exibir o v&#237;deo.",message:'Ocorreu um problema ao tentar carregar o v&#237;deo. <a class="player-error__link"  href="" onclick="window.location.reload(); return false;">Atualize</a> a sua p&#225;gina para tentar novamente.',className:"default-error",icon:Mo}})},Vo=Fo=n(n({},Fo),{},{AUTH_REQUIRED:n(n(n({},Fo.DEFAULT_ERROR),en.AUTH_REQUIRED),{},{UI:{title:"Faça seu login para assistir aos conteúdos exclusivos.",message:"Alguns vídeos podem ser restritos a assinantes.",className:"auth-required",icon:Bo}}),DEVICE_NOT_AUTHORIZED:n(n(n({},Fo.DEFAULT_ERROR),en.DEVICE_NOT_AUTHORIZED),{},{UI:{title:"Dispositivo n&#227;o autorizado.",message:"Voc&#234; precisa cadastrar seu dispositivo para ter acesso ao conte&#250;do exclusivo.",className:"unsupported-device",icon:No}}),DEVICE_NOT_SUPPORTED:n(n(n({},Fo.DEFAULT_ERROR),en.DEVICE_NOT_SUPPORTED),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:No}}),GEOFENCING:n(n(n({},Fo.DEFAULT_ERROR),en.GEOFENCING),{},{UI:n(n({},Fo.DEFAULT_ERROR.UI),{},{title:"O vídeo não está disponível nesta localidade",icon:Uo})}),GEO_BLOCKED:n(n(n({},Fo.DEFAULT_ERROR),en.GEO_BLOCKED),{},{UI:{title:"V&#237;deo indispon&#237;vel nessa regi&#227;o",message:"Este v&#237;deo n&#227;o est&#225; dispon&#237;vel para ser exibido na sua regi&#227;o. Desculpe-nos pelo inconveniente.",className:"geoblocking",icon:Uo}}),HASH_LOAD_ERROR:n(n({},Fo.DEFAULT_ERROR),en.HASH_LOAD_ERROR),PLAYER_NOT_RECOGNIZED:n(n({},Fo.DEFAULT_ERROR),en.PLAYER_NOT_RECOGNIZED),RESOURCE_LOAD_ERROR:n(n({},Fo.DEFAULT_ERROR),en.RESOURCE_LOAD_ERROR),LOCATION_UNAVAILABLE:n(n(n({},Fo.DEFAULT_ERROR),en.LOCATION_UNAVAILABLE),{},{UI:n(n({},Fo.DEFAULT_ERROR.UI),{},{title:"Conteúdo disponível apenas com informação de localização.",icon:Uo})}),NOT_ALLOWED_DOMAIN:n(n({},Fo.DEFAULT_ERROR),en.NOT_ALLOWED_DOMAIN),NOT_FOUND:n(n(n({},Fo.DEFAULT_ERROR),en.NOT_FOUND),{},{UI:{title:"Conte&#250;do n&#227;o dispon&#237;vel.",message:"Infelizmente este v&#237;deo n&#227;o est&#225; mais dispon&#237;vel. Desculpe-nos pelo inconveniente.",className:"default-error",icon:Mo}}),PLAYLIST_LOAD_ERROR:n(n(n({},Fo.DEFAULT_ERROR),en.PLAYLIST_LOAD_ERROR),{},{UI:n(n({},Fo.DEFAULT_ERROR.UI),{},{title:"Erro ao carregar o recurso de v&#237;deo."})}),RESTRICTED_CONTENT:n(n(n({},Fo.DEFAULT_ERROR),en.RESTRICTED_CONTENT),{},{UI:{title:"Conteúdo restrito.",message:"O vídeo não está autorizado a ser exibido.",className:"default-error",icon:Mo}}),SIMULTANEOUS_ACCESS:n(n(n({},Fo.DEFAULT_ERROR),en.SIMULTANEOUS_ACCESS),{},{UI:{title:"Acesso Simult&#226;neo.",message:"Existem muitas sess&#245;es ativas utilizando esta conta. Por favor, pare de assistir em algum dispositivo para continuar.",className:"simultaneous-access",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_">\r\n\t<path d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526c-1.026-1.021-1.026-2.685,0-3.707\r\n\t\tc1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g>\r\n\t\t<path d="M23.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013c1.215,0,1.561,0,4.561,0\r\n\t\t\tc0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC18.776,6.412,21.035,6.409,23.341,6.386z"/>\r\n\t\t<path d="M29.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC26.836,15.403,27.434,15.464,29.434,15.457z"/>\r\n\t\t<path d="M28.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L28.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M38.618,3.387H6.309c-1.657,0-3,1.343-3,3v33.008c0,1.658,1.343,3,3,3h32.311\r\n\t\tc1.656,0,3-1.342,3-3V6.387C41.618,4.73,40.275,3.387,38.618,3.387z M32.371,13.745c0,0.032-1.535,0.748-2.529,1.801\r\n\t\tc-0.908,0.965-1.46,5.07-1.471,5.07c1.317,0,3.062,0,3.062,0s0,2.001,0,3.507c0,0.279-3.292,0.285-5.146,0.275\r\n\t\tc-0.186,0-2.037,4.171-3.279,5.973c-1.604,2.322-3.759,3.744-6.474,4.349c-0.958,0.211-1.916,0.294-2.889,0.335\r\n\t\tc-0.165,0.01-1.338-0.17-1.334-0.342c0.005-1.561,0.039-3.123,0.034-4.688c0-0.164,0.089-0.103,0.089-0.092\r\n\t\tc0,0.017,0,0.036,0,0.052c1,0.104,4.33-0.785,5.325-1.809c0.364-0.37,1.775-2.266,2.091-2.805c0.19-0.332,1.627-3.421,1.9-4.141\r\n\t\tc0.303-0.795,0.618-1.602,0.918-2.397c0.116-0.309,0.831-1.83,0.906-1.97c0.408-0.755,0.814-1.517,1.243-2.267\r\n\t\tc0.239-0.421,0.509-0.83,0.798-1.216c1.606-2.158,3.36-3.726,5.94-4.406c0.938-0.249,0.938-0.249,0.938-0.249\r\n\t\tC32.493,11.876,32.371,12.061,32.371,13.745z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,4.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V17.462C35.431,8.332,29.842,4.179,22.957,4.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,23.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V24.679C38.782,22.882,38.381,23.558,36.555,23.558z\r\n\t\t M23.446,35.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.018,4.017-4.018c2.218,0,4.016,1.799,4.016,4.018\r\n\t\tC27.461,33.469,25.664,35.267,23.446,35.267z"/>\r\n</g>\r\n<g id="vector_3_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'}}),STREAMING_PAUSE_TIME_EXPIRED:n(n(n({},Fo.DEFAULT_ERROR),en.STREAMING_PAUSE_TIME_EXPIRED),{},{UI:{title:"Sess&#227;o expirada.",message:'O v&#237;deo ficou pausado por muito tempo. Para voltar a assistir, <a class="player-error__link" href="" onclick="window.location.reload(); return false;">atualize</a> a p&#225;gina.',className:"time-expired",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="45.695px" height="45.782px" viewBox="0 0 45.695 45.782" enable-background="new 0 0 45.695 45.782" xml:space="preserve">\r\n<g id="vector" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M45.272,38.282L45.272,38.282L24.659,5.224l0,0c-0.356-0.55-0.987-0.921-1.716-0.921\r\n\t\tc-0.722,0-1.351,0.367-1.707,0.916l0,0c-5.22,8.377-20.606,33.05-20.606,33.05v0.004c-0.186,0.289-0.294,0.634-0.294,0.999\r\n\t\tc0,1.07,0.898,1.939,2.015,1.939c0.027,0,0.054-0.008,0.082-0.008l0.004,0.008h41.085v-0.004c0.011,0,0.02,0.004,0.021,0.004\r\n\t\tc1.113,0,2.016-0.869,2.016-1.939C45.559,38.911,45.452,38.572,45.272,38.282z M24.174,13.673c1.476,0.464,2.424,1.896,2.221,3.591\r\n\t\tc-0.203,1.723-0.555,3.428-0.826,5.145c-0.323,2.036-0.624,4.071-0.951,6.185c-1.11,0-2.138,0-3.177,0\r\n\t\tc-0.347-2.168-0.673-4.303-1.031-6.431c-0.239-1.422-0.524-2.838-0.791-4.257C19.066,14.951,21.386,12.789,24.174,13.673z\r\n\t\t M22.98,37.174c-1.914,0-3.455-1.479-3.448-3.324c0.005-0.702,0.259-1.352,0.678-1.883c0.632-0.811,1.655-1.344,2.78-1.344\r\n\t\tc1.913-0.004,3.452,1.487,3.438,3.332C26.416,35.736,24.886,37.167,22.98,37.174z"/>\r\n</g>\r\n<g id="vector_2_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.886,44.697c-1.023,1.025-2.684,1.025-3.71,0L1.009,4.526\r\n\t\tc-1.026-1.021-1.026-2.685,0-3.707c1.023-1.028,2.684-1.028,3.709,0l40.168,40.168C45.912,42.013,45.912,43.67,44.886,44.697z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M24.341,6.386c0.821-0.008,1.574,0.409,1.568,1.217c-0.016,1.454-0.036,3.013-0.036,6.013\r\n\t\t\tc1.215,0,1.561,0,4.561,0c0-3,0-5.613,0-7.525c0-2.509-1.47-3.31-3.948-3.314c-4.139-0.012-8.458-0.012-12.601-0.017l3.582,3.64\r\n\t\t\tC19.776,6.412,22.035,6.409,24.341,6.386z"/>\r\n\t\t<path fill="#CCCBCB" d="M30.434,15.457c0,0,0,0,0,0.003c0-0.008,0.646-0.008,1.427-0.014c0.804-0.003,0.849,0.274,0.845,1.075\r\n\t\t\tc-0.02,1.672-0.08,3.349-0.094,5.021l3.6,3.628c0.022-3.341,0.037-6.678,0.037-10.02c0-2.507-0.671-3.314-3.149-3.317\r\n\t\t\tc-1.263-0.004-2.558-0.001-3.539-0.004l0,0c-1.379-0.002-2.719-0.005-4.094-0.005c-0.688,0-1.641,0.028-2.569,0.061l3.726,3.494\r\n\t\t\tC27.836,15.403,28.434,15.464,30.434,15.457z"/>\r\n\t\t<path fill="#CCCBCB" d="M29.083,37.331c-0.903-0.008-1.809-0.02-2.708-0.02c-1.645,0-2.94,0.029-4.583,0.025\r\n\t\t\tc-1.747-0.004-1.738-0.754-1.738-0.754c0.004-5,0.155-4.457,0.155-6.563l-3.886-4.667c0.027,1.189,0.095,2.059,0.122,3.268\r\n\t\t\tc-0.804,0.006-1.816,0.084-2.274,0.088c-0.792,0.013-1.008-0.559-1.002-1.401c0.008-1.923,0.022-3.892,0.034-5.81l-3.516-3.538\r\n\t\t\tc-0.019,0.509-0.026,0.797-0.026,0.797c0,3.753-0.001,7.828,0.004,11.912c0,2.504,0.535,3.131,3.02,3.138\r\n\t\t\tc0.865,0.003,2.8-0.075,3.925-0.124c0.058,2.576,0.097,4.729,0.098,5.886c0,2.192,0.6,2.985,2.413,3.177\r\n\t\t\tc0.258,0.028,0.542-0.002,0.853-0.002c4.332,0.014,8.662-0.01,12.994-0.007c0.531,0,0.977-0.055,1.36-0.161L29.083,37.331z"/>\r\n\t</g>\r\n</g>\r\n<g id="vector_4_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M40.294,3.616H8.433c-2.344,0-5-0.268-5,2.107v30.15c0,2.379,2.655,6.742,5,6.742h31.861\r\n\t\tc2.345,0,1.14-4.363,1.14-6.742V5.723C41.434,3.349,42.639,3.616,40.294,3.616z M32.434,12.648c0,0.032,0.733,0.058,0.405,0.1\r\n\t\tc-1.443,0.175-1.94,0.697-2.935,1.75c-0.907,0.965-1.46,5.118-1.471,5.118c1.318,0,3,0,3,0s0,1.904,0,3.411\r\n\t\tc0,0.279,0.48,0.279,0.211,0.279c-1.854,0-3.472,0.005-5.327-0.004c-0.185,0-2.021,4.171-3.264,5.973\r\n\t\tc-1.604,2.322-3.751,3.743-6.466,4.349c-0.958,0.211-1.912,0.293-2.884,0.334c-0.165,0.01-0.211-0.037-0.208-0.209\r\n\t\tc0.005-1.56,0.008-3.123,0.003-4.688c0-0.164-0.555-0.307-0.304-0.264c-0.071,0.017-0.763,0.029-0.763,0.039\r\n\t\tc0,0.017,0,0.035,0,0.052c0,0,0.84,0.006,0.976,0c1.58-0.095,3.26-0.655,4.381-1.808c0.363-0.371,1.791-2.267,2.105-2.807\r\n\t\tc0.19-0.331,1.635-3.421,1.908-4.14c0.303-0.795,0.622-1.602,0.922-2.397c0.116-0.309,0.833-1.83,0.908-1.97\r\n\t\tc0.409-0.755,0.816-1.517,1.245-2.267c0.239-0.421,0.508-0.83,0.797-1.216c1.607-2.158,3.362-3.726,5.941-4.406\r\n\t\tc0.938-0.249,0.815-0.551,0.815-0.551C32.434,10.478,32.434,10.964,32.434,12.648z"/>\r\n</g>\r\n<g id="vector_5_" display="none">\r\n\t<g display="inline">\r\n\t\t<g>\r\n\t\t\t<path fill="#CCCBCB" d="M22.957,5.179c-6.904,0-12.493,4.152-12.493,13.283v11.199c0,5.51,4.287,8.729,9.307,9.674\r\n\t\t\t\tc-2.807-1.61-5.027-5.127-5.027-10.25v-7.414c0-6.755,3.661-12.231,8.216-12.231c4.511,0,8.194,5.476,8.194,12.231v7.414\r\n\t\t\t\tc0,5.117-1.674,8.379-3.949,10.006c4.539-1.184,8.229-4.32,8.229-9.43V18.462C35.431,9.332,29.842,5.179,22.957,5.179z"/>\r\n\t\t</g>\r\n\t</g>\r\n\t<path display="inline" fill="#CCCBCB" d="M36.555,14.558H10.081c-1.828,0-2.969-0.675-2.969,1.121v11.903\r\n\t\tc0,1.795,1.141,3.498,2.969,3.498h26.474c1.827,0,2.228-1.703,2.228-3.498V15.679C38.782,13.882,38.381,14.558,36.555,14.558z\r\n\t\t M23.446,26.267c-2.219,0-4.017-1.798-4.017-4.015c0-2.219,1.798-4.017,4.017-4.017c2.218,0,4.016,1.798,4.016,4.017\r\n\t\tC27.461,24.469,25.664,26.267,23.446,26.267z"/>\r\n</g>\r\n<g id="vector_3_">\r\n\t<path d="M34.12,35.643c-0.285-0.025-0.573-0.048-0.889-0.048c-0.316-2.489,0.356-5.019-0.644-7.36\r\n\t\tc-0.976-2.29-2.576-4.057-4.304-5.764c1.711-1.707,3.295-3.446,4.281-5.69c1.018-2.311,0.364-4.787,0.662-7.279\r\n\t\tc0.335,0,0.601,0.018,0.859-0.004c0.817-0.067,1.342-0.619,1.35-1.414c0.01-0.827-0.537-1.275-1.402-1.332\r\n\t\tc-0.146-0.009-22.139-0.014-22.342,0.013c-0.752,0.097-1.237,0.607-1.234,1.37c0.005,0.765,0.497,1.277,1.256,1.352\r\n\t\tc0.399,0.042,0.805,0.007,1.313,0.007c0,1.422,0.023,2.749-0.004,4.078c-0.042,1.875,0.456,3.582,1.513,5.056\r\n\t\tc0.982,1.371,2.086,2.644,3.17,4.005c-1.609,1.622-3.17,3.37-4.118,5.636c-0.979,2.338-0.324,4.838-0.646,7.312\r\n\t\tc-0.499,0-0.945-0.062-1.371,0.014c-0.684,0.121-1.09,0.594-1.106,1.348c-0.021,0.801,0.391,1.615,1.109,1.792\r\n\t\tc0.195,0.048,22.397,0.039,22.514,0.029c0.815-0.072,1.342-0.796,1.349-1.589C35.445,36.379,34.926,35.715,34.12,35.643z\r\n\t\t M17.009,10.403c3.966,0,7.907,0,11.875,0c0.169,0,0.1,3.687-0.472,4.513c-1.547,2.235-3.539,4.395-5.545,6.213\r\n\t\tc-1.979-1.691-3.883-4.215-5.326-6.393C16.936,13.819,16.829,10.403,17.009,10.403z M28.885,34.517c-3.967,0-7.907,0-11.875,0\r\n\t\tc-0.169,0-0.1-3.386,0.472-4.211c1.547-2.235,3.539-3.772,5.545-5.591c1.979,1.691,3.883,3.518,5.326,5.695\r\n\t\tC28.959,31.327,29.065,34.517,28.885,34.517z"/>\r\n</g>\r\n<g id="vector_1_" display="none">\r\n\t<path display="inline" fill="#CCCBCB" d="M44.479,43.969c-1.006,0.992-2.636,0.992-3.642,0L1.413,5.136\r\n\t\tc-1.004-0.994-1.004-2.599,0-3.589c1.008-0.993,2.636-0.993,3.643,0L44.48,40.385C45.485,41.377,45.485,42.98,44.479,43.969z"/>\r\n\t<g display="inline">\r\n\t\t<path fill="#CCCBCB" d="M16.546,34.493c-0.961,0.01-1.326-0.262-1.325-1.27c0.016-3.178,0.046-5.826,0.004-8.35l-3.792-3.853\r\n\t\t\tc0,1.537,0,2.963,0,4.159c0,0-0.247,9.863-0.241,14.75c0,2.994,0.761,4.139,3.773,4.146c5.258,0.014,10.425,0.112,15.686,0.116\r\n\t\t\tc1.493,0,2.451-0.313,3.038-1.028l-8.815-8.686C22.1,34.465,19.314,34.467,16.546,34.493z"/>\r\n\t\t<path fill="#CCCBCB" d="M28.656,11.656c0.994-0.007,1.321,0.32,1.311,1.29c-0.022,2.392,0.016,4.782,0.019,7.179l4.448,4.355\r\n\t\t\tc0-4.402,0-8.798,0-13.204c0-3.002-0.978-3.934-3.993-3.937c-4.484-0.018-8.98-0.018-13.465-0.02l4.396,4.34\r\n\t\t\tC23.802,11.673,26.227,11.682,28.656,11.656z"/>\r\n\t</g>\r\n</g>\r\n<g id="Layer_7" display="none">\r\n</g>\r\n</svg>'}}),SUBSCRIBERS_ONLY:n(n(n({},Fo.DEFAULT_ERROR),en.SUBSCRIBERS_ONLY),{},{UI:{title:"Conte&#250;do exclusivo para assinantes.",message:"Voc&#234; precisa ser assinante para ter acesso ao conte&#250;do.",className:"subscriber-only",icon:Bo}}),UNSUPPORTED_BROWSER:n(n(n({},Fo.DEFAULT_ERROR),en.UNSUPPORTED_BROWSER),{},{UI:{title:"Seu navegador est&#225; velhinho.",message:"Para assistir aos nossos v&#237;deos, por favor, atualize-o para uma vers&#227;o mais nova.",className:"unsupported-browser",icon:'<?xml version="1.0" encoding="utf-8"?>\r\n\x3c!-- Generator: Adobe Illustrator 16.0.4, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t width="94.054px" height="58.925px" viewBox="0 0 94.054 58.925" enable-background="new 0 0 94.054 58.925" xml:space="preserve">\r\n<g>\r\n\t<path d="M89.057,0H13.051c-2.755,0-4.997,2.242-4.997,4.997v14.44C3.515,20.05,0,23.941,0,28.646v28.278c0,1.104,0.896,2,2,2\r\n\t\ts2-0.896,2-2V28.646c0-2.492,1.734-4.574,4.054-5.139v30.421c0,2.755,2.241,4.996,4.997,4.996h76.006\r\n\t\tc2.756,0,4.997-2.241,4.997-4.996V4.997C94.054,2.242,91.812,0,89.057,0z M23.054,3c1.105,0,2,0.896,2,2s-0.895,2-2,2\r\n\t\tc-1.104,0-2-0.896-2-2S21.95,3,23.054,3z M18.054,3c1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S16.95,3,18.054,3z M13.054,3\r\n\t\tc1.104,0,2,0.896,2,2s-0.896,2-2,2s-2-0.896-2-2S11.95,3,13.054,3z M91.054,53.929c0,1.102-0.894,1.996-1.997,1.996H13.051\r\n\t\tc-1.103,0-1.997-0.895-1.997-1.996V23.663c2.062,0.728,3.552,2.676,3.552,4.983c0,1.104,0.896,2,2,2s2-0.896,2-2\r\n\t\tc0-4.531-3.257-8.311-7.552-9.133V10h80V53.929z M91.054,6c0,0.552-0.447,1-1,1h-61c-0.552,0-1-0.448-1-1V4c0-0.552,0.448-1,1-1h61\r\n\t\tc0.553,0,1,0.448,1,1V6z"/>\r\n\t<path d="M55.14,37.386c-0.828,0-1.5,0.672-1.5,1.5c0,1.379-1.121,2.5-2.5,2.5s-2.5-1.121-2.5-2.5c0-0.828-0.672-1.5-1.5-1.5\r\n\t\tc-0.829,0-1.5,0.672-1.5,1.5c0,3.032,2.468,5.5,5.5,5.5s5.5-2.468,5.5-5.5C56.64,38.058,55.968,37.386,55.14,37.386z"/>\r\n\t<path d="M21.921,23.039c3.199,0,5.802,2.604,5.802,5.804c0,4.854,3.951,8.805,8.808,8.805c4.854,0,8.803-3.95,8.803-8.805\r\n\t\tc0-3.2,2.604-5.804,5.805-5.804c3.199,0,5.803,2.604,5.803,5.804c0,4.854,3.949,8.805,8.804,8.805s8.804-3.95,8.804-8.805\r\n\t\tc0-3.2,2.604-5.804,5.804-5.804c0.828,0,1.5-0.671,1.5-1.5s-0.672-1.5-1.5-1.5c-3.038,0-5.721,1.547-7.304,3.894\r\n\t\tc-1.583-2.347-4.266-3.894-7.304-3.894s-5.721,1.547-7.304,3.894c-1.583-2.347-4.266-3.894-7.303-3.894\r\n\t\tc-3.038,0-5.722,1.547-7.305,3.894c-1.583-2.347-4.265-3.894-7.303-3.894c-3.039,0-5.724,1.547-7.307,3.895\r\n\t\tc-1.583-2.348-4.265-3.895-7.303-3.895c-0.829,0-1.5,0.671-1.5,1.5S21.093,23.039,21.921,23.039z M65.745,23.039\r\n\t\tc3.2,0,5.804,2.604,5.804,5.804c0,3.201-2.604,5.805-5.804,5.805s-5.804-2.604-5.804-5.805\r\n\t\tC59.941,25.643,62.545,23.039,65.745,23.039z M36.531,23.039c3.2,0,5.803,2.604,5.803,5.804c0,3.201-2.603,5.805-5.803,5.805\r\n\t\tc-3.202,0-5.808-2.604-5.808-5.805C30.724,25.643,33.329,23.039,36.531,23.039z"/>\r\n\t<path d="M21.921,30.343h2.937c0.829,0,1.5-0.672,1.5-1.5s-0.671-1.5-1.5-1.5h-2.937c-0.829,0-1.5,0.672-1.5,1.5\r\n\t\tS21.093,30.343,21.921,30.343z"/>\r\n\t<path d="M80.353,27.343h-2.938c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h2.938c0.828,0,1.5-0.672,1.5-1.5\r\n\t\tS81.181,27.343,80.353,27.343z"/>\r\n\t<path d="M78.476,31.036c-0.586-0.586-1.535-0.586-2.121,0s-0.586,1.535,0,2.121l1.492,1.492c0.293,0.293,0.677,0.439,1.061,0.439\r\n\t\ts0.768-0.146,1.061-0.439c0.586-0.586,0.586-1.535,0-2.121L78.476,31.036z"/>\r\n\t<path d="M23.797,31.037l-1.49,1.492c-0.585,0.586-0.584,1.535,0.001,2.121c0.293,0.292,0.676,0.438,1.06,0.438\r\n\t\tc0.384,0,0.769-0.146,1.062-0.44l1.49-1.492c0.585-0.586,0.584-1.535-0.001-2.121C25.333,30.45,24.383,30.449,23.797,31.037z"/>\r\n</g>\r\n</svg>'}}),UNSUPPORTED_MOBILE_DEVICE:n(n(n({},Fo.DEFAULT_ERROR),en.UNSUPPORTED_MOBILE_DEVICE),{},{UI:{title:"Dispositivo n&#227;o suportado.",message:"Infelizmente, n&#227;o foi poss&#237;vel encontrar um v&#237;deo compat&#237;vel com o seu dispositivo.",className:"unsupported-device",icon:No}}),TIMESTAMP_ERROR:n(n(n({},Fo.DEFAULT_ERROR),en.TIMESTAMP_ERROR),{},{UI:{title:"Relógio adiantado.",message:"Para assistir, ajuste o horário do seu dispositivo conforme sua localização.",className:"unsupported-device",icon:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M11.99 2C17.52 2 22 6.48 22 12s-4.48 10-10.01 10C6.47 22 2 17.52 2 12S6.47 2 11.99 2zM12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8zm.5-13v5.25l4.5 2.67-.75 1.23L11 13V7h1.5z" fill="#FFF" fill-rule="nonzero"/></g></svg>'}})}),Ho="ERROR_SCREEN_SHOW",jo="ERROR_SCREEN_HIDE",Ko=bn.session;De.register(Ho),De.register(jo);var Go=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).playerId=n.options.playerId,n}return o(i,[{key:"name",get:function(){return"error_screen"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Ve('<div class="player-error__background-overlay"></div>\n<div class="player-error__content">\n  <span class="player-error__icon <%= className %>"><%= icon %></span>\n  <p class="player-error__title"><%= title %></p>\n  <p class="player-error__description"><%= message %></p>\n</div>\n')}},{key:"container",get:function(){return this.core.getCurrentContainer()}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"posterImage",get:function(){return this.container&&(this.container.getPlugin("poster")||{}).posterImage}},{key:"attributes",get:function(){return{class:"player-error"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindPlaybackEvents),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.clearErrors)}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,De.PLAYBACK_ERROR,this.onError)}},{key:"clearErrors",value:function(){this.error=null,this.$el.hide(),this.core.trigger(De.Custom.ERROR_SCREEN_HIDE)}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.error=n(n({},e),{},{videoSessionId:Ko.getVideoSessionId(this.options.playerId)}),this.showErrorScreen(),this.logError()}},{key:"showErrorScreen",value:function(){this.render(),this.$el.show(),this.core.trigger(De.Custom.ERROR_SCREEN_SHOW)}},{key:"logError",value:function(){switch(this.error.level){case Ge.Levels.INFO:_e.info("player_error","",this.error);break;case Ge.Levels.WARN:_e.warn("player_error","",this.error);break;case Ge.Levels.FATAL:default:_e.error("player_error","",this.error)}}},{key:"setPoster",value:function(){!(this.error.code===Vo.RESTRICTED_CONTENT.code)&&this.posterImage&&this.$el.css({"background-image":"url("+this.posterImage+")"})}},{key:"getErrorUI",value:function(e){var t=Object.values(Vo).find((function(t){return t.code===e}));return t&&t.UI||Vo.DEFAULT_ERROR.UI}},{key:"render",value:function(){if(this.error){Object.assign(this.error.UI,this.getErrorUI(this.error.code));var e=En.getStyleFrom(".clappr-player#wp3-player-0 .player-error {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  cursor: default;\n  color: #CCCACA;\n  position: absolute;\n  top: 0;\n  height: 100%;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n  z-index: 999;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: 50% 50%; }\n  .clappr-player#wp3-player-0 .player-error__background-overlay {\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.7);\n    position: absolute;\n    top: 0; }\n  .clappr-player#wp3-player-0 .player-error__link, .clappr-player#wp3-player-0 .player-error__link:visited {\n    color: #CCCACA; }\n  .clappr-player#wp3-player-0 .player-error__content {\n    position: relative;\n    line-height: 1.4; }\n  .clappr-player#wp3-player-0 .player-error__title {\n    color: #CCCACA;\n    font-weight: bold;\n    font-size: 18px; }\n  .clappr-player#wp3-player-0 .player-error__description {\n    color: #CCCACA;\n    width: 90%;\n    margin: 0 auto;\n    font-size: 14px; }\n  .clappr-player#wp3-player-0 .player-error__icon svg {\n    width: 30px;\n    max-height: 30px;\n    fill: #ffffff; }\n  .clappr-player#wp3-player-0 .player-error__icon.unsupported-browser svg {\n    width: 40px; }\n  .clappr-player#wp3-player-0 .player-error--hide {\n    display: none; }\n",{playerId:this.playerId});return this.$el.html(this.template(n({},this.error.UI))),this.setPoster(),this.$el.append(e[0]),this.core.$el.append(this.el),this}}}]),i}(ze),Wo=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"name",get:function(){return"overlay"}},{key:"internalName",get:function(){return"container-overlay"}},{key:"attributes",get:function(){return{class:"".concat(this.internalName)}}},{key:"playerId",get:function(){return this.options.playerId}},{key:"corePlugins",get:function(){return this.core.plugins}},{key:"bindEvents",value:function(){this.listenToOnce(this.core,De.CORE_READY,this.initPlugins),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.bindContainerEvents()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&this.bindAdEvents()}},{key:"bindAdEvents",value:function(){this.listenTo(this.container,Tn.DFP_AD_STARTED,this.disableVisibility),this.listenTo(this.container,Tn.DFP_AD_COMPLETED,this.enableVisibility),this.listenTo(this.container,Tn.DFP_AD_CLOSED,this.enableVisibility),this.listenTo(this.container,Tn.DFP_AD_SKIPPED,this.enableVisibility)}},{key:"disableVisibility",value:function(){this.$el.addClass("".concat(this.internalName,"--hidden"))}},{key:"enableVisibility",value:function(){this.$el.removeClass("".concat(this.internalName,"--hidden"))}},{key:"filterItems",value:function(e){return e instanceof n&&e!==this}},{key:"initPlugins",value:function(){var e=this;this.corePlugins.filter((function(t){return e.filterItems(t)})).forEach((function(t){return e.renderPlugin(t)}))}},{key:"renderPlugin",value:function(e){var t=e.el;this.$el.append(t)}},{key:"render",value:function(){this.$el.empty();var e=En.getStyleFrom(".clappr-player#wp3-player-0 .container-overlay {\n  width: 100%;\n  z-index: 2; }\n  .clappr-player#wp3-player-0 .container-overlay--hidden {\n    visibility: hidden; }\n\n.clappr-player#wp3-player-0 .media-control::after {\n  height: 0; }\n",{playerId:this.playerId});return this.$el.append(e[0]),this.core.$el.append(this.el),this.triggerDidShowOverlay(),this}},{key:"triggerDidShowOverlay",value:function(){this.core.trigger(Tn.DID_SHOW_OVERLAY)}}]),n}(ze),zo="24px",Yo="40px",qo=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).lastChromelessValue=!!n.options.chromeless,n}return o(i,[{key:"name",get:function(){return"drawer"}},{key:"internalName",get:function(){return"drawer"}},{key:"isExpanded",get:function(){return this._isExpanded},set:function(e){this._isExpanded=e}},{key:"attributes",get:function(){return{class:"".concat(this.internalName," ").concat(this.internalName,"-hidden")}}},{key:"content",get:function(){return this._content||""},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._content=e}},{key:"height",get:function(){return this._height||"inherit"},set:function(e){this._height=e}},{key:"heightImmersion",get:function(){return"50%"}},{key:"heightImmersionUnit",get:function(){return this.heightImmersion.includes("%")?"%":"px"}},{key:"heightHint",get:function(){return zo}},{key:"headerHeight",get:function(){return"57px"}},{key:"hasHeader",get:function(){return!1}},{key:"hasPlaceholder",get:function(){return!1}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"gradientHeadSize",get:function(){return parseInt("32px",10)}},{key:"defaultExpandValues",get:function(){return{drawerExpanded:"50%",drawerHintSize:this.effectiveHeightHint}}},{key:"effectiveHeightHint",get:function(){var e=parseInt(this.heightHint,10);return Number.isInteger(e)?e>parseInt(Yo,10)?Yo:e<parseInt(zo,10)?zo:this.heightHint:zo}},{key:"container",get:function(){return this.core.activeContainer}},{key:"inactivityTimeout",get:function(){return 2e3}},{key:"bindEvents",value:function(){this.bindMouseEvents(),this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.onActiveContainerChanged),this.listenTo(this.core,De.MEDIACONTROL_SHOW,this.showHint),this.listenTo(this.core,Tn.WM_SHARE_HIDE,this.showHint),this.listenTo(this.core,Tn.TAP_TO_UNMUTE_SHOW,this.showHint),this.listenTo(this.core,Tn.TAP_TO_UNMUTE_CLICKED,this.onTapToUnmuteClicked),this.listenTo(this.core,Tn.WM_SHARE_HIDE,this.bindMouseEvents),this.listenTo(this.core,De.MEDIACONTROL_HIDE,this.hideHint),this.listenTo(this.core,Tn.WM_SHARE_SHOW,this.unbindMouseEvents),this.listenTo(this.core,Tn.WM_SHARE_SHOW,this.hideHint),this.listenTo(this.core,Tn.DID_CLOSE_HEADER,this.hide),this.listenTo(this.core,Tn.SYNC_DRAWER_STATE_REQUEST,this.currentState),this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize),this.listenTo(this.core,De.CORE_OPTIONS_CHANGE,this.onOptionsChange),this.listenTo(this.core,De.ERROR,this.onError)}},{key:"bindContainerEvents",value:function(){this.listenTo(this.container,Tn.DFP_AD_STARTED,this.onDfpStarted),this.listenTo(this.container,Tn.DFP_AD_SKIPPED,this.onDfpClose),this.listenTo(this.container,Tn.DFP_AD_CLOSED,this.onDfpClose),this.listenTo(this.container,Tn.DFP_AD_COMPLETED,this.onDfpClose)}},{key:"onActiveContainerChanged",value:function(){this.container&&this.stopListening(this.container),this.bindContainerEvents()}},{key:"onDfpStarted",value:function(){this.isDfpActive=!0,this.isPreviouslyExpanded=this.isExpanded,this.hide(),this.hideHint()}},{key:"onDfpClose",value:function(){this.isDfpActive=!1,this.isPreviouslyExpanded&&this.show()}},{key:"onOptionsChange",value:function(){this.lastChromelessValue!==!!this.options.chromeless&&this.updateChromelessState()}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.level===Ge.Levels.FATAL&&this.showHint()}},{key:"updateChromelessState",value:function(){this.disableDrawer(),!1===this.options.chromeless&&(this.hideHint(),this.enableDrawer()),this.lastChromelessValue=this.options.chromeless}},{key:"bindMouseEvents",value:function(){var e=this;this.enableVisibilityDebounced||(this.enableVisibilityDebounced=la((function(){return e.enableVisibility.apply(e,arguments)}),100,{trailing:!1})),this.listenTo(this.core,De.CORE_MOUSE_MOVE,this.enableVisibilityDebounced),this.listenTo(this.core,De.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"unbindMouseEvents",value:function(){this.stopListening(this.core,De.CORE_MOUSE_MOVE,this.enableVisibilityDebounced),this.stopListening(this.core,De.CORE_MOUSE_LEAVE,this.hideDelayed)}},{key:"events",get:function(){var e={click:"toggle"},t={mouseenter:"setUserKeepVisible",mouseleave:"resetUserKeepVisible",click:"toggle"},i=n(n(n({},e),t),{},{touchend:this.resetUserKeepVisible});return Q.isHybridDevice?i:Q.isMobile?e:t}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.currentHeight=e.height,!this.lastChromelessValue&&this.updateResponsiveStyle())}},{key:"onTapToUnmuteClicked",value:function(){Q.isMobile&&this.hideHint()}},{key:"updateResponsiveStyle",value:function(){this.shouldDisable?this.disableDrawer():this.enableDrawer()}},{key:"enableDrawer",value:function(){this.$el.removeClass("".concat(this.internalName,"-disabled"))}},{key:"disableDrawer",value:function(){this.$el.addClass("".concat(this.internalName,"-disabled"))}},{key:"showHint",value:function(){this.isVisible()||this.isDfpActive||(this.$el.removeClass("".concat(this.internalName,"-hidden")),this.onDidShowDrawerHint())}},{key:"onDidShowDrawerHint",value:function(){this.core.trigger(Tn.DID_SHOW_DRAWER_HINT)}},{key:"hideHint",value:function(){!this.isExpanded&&this.isVisible()&&(this.disableVisibility(),this.onDidHideDrawerHint())}},{key:"onDidHideDrawerHint",value:function(){this.core.trigger(Tn.DID_HIDE_DRAWER_HINT)}},{key:"disableVisibility",value:function(){this.$el.addClass("".concat(this.internalName,"-hidden"))}},{key:"currentState",value:function(){this.core.trigger(Tn.SYNC_DRAWER_STATE_RESPONSE,this.isExpanded)}},{key:"show",value:function(e){this.isExpanded||(e&&e.stopPropagation(),this.isExpanded=!0,this.hideDelayed(),this.core.trigger(Tn.WILL_SHOW_DRAWER),this.addExpandBackground(),this.onDidShowDrawer())}},{key:"onDidShowDrawer",value:function(){this.core.trigger(Tn.DID_SHOW_DRAWER)}},{key:"hide",value:function(){var e=this;this.isExpanded&&(this.isExpanded=!1,this.core.trigger(Tn.WILL_HIDE_DRAWER),this.$el.removeClass("".concat(this.internalName,"-expand")).on("transitionend",(function(){e.$el.removeClass("".concat(e.internalName,"-expand__collapse")).off("transitionend")})),this.onDidHideDrawer())}},{key:"onDidHideDrawer",value:function(){this.core.trigger(Tn.DID_HIDE_DRAWER)}},{key:"enableVisibility",value:function(e){var t=this;Q.isMobile&&e&&"mousemove"===e.type||(clearTimeout(this.hideId),this.hideId=setTimeout((function(){return t.hideDelayed()}),this.inactivityTimeout),this.isExpanded&&this.isVisible()||this.showHint())}},{key:"isVisible",value:function(){return!this.$el.hasClass("".concat(this.internalName,"-hidden"))}},{key:"hideDelayed",value:function(e){var t=this;!this.isExpanded||this.inactivityTimeout<=0||!this.isVisible()||Q.supportsTouchEvents||(clearTimeout(this.hideId),this.userKeepVisible||e&&"mouseout"===e.type?this.hideId=setTimeout((function(){return t.hideDelayed()}),this.inactivityTimeout):!this.userKeepVisible&&this.disableVisibility())}},{key:"resetUserKeepVisible",value:function(){this.userKeepVisible&&(this.userKeepVisible=!1)}},{key:"setUserKeepVisible",value:function(){this.userKeepVisible||(this.userKeepVisible=!0)}},{key:"parseStyle",value:function(){var e=":root {\n  --player-drawer-hint-size: heightHint; }\n\n.clappr-player#wp3-player-0 .drawer--bottom {\n  display: flex;\n  width: 100%;\n  position: absolute;\n  bottom: calc(-100% + var(--player-drawer-hint-size));\n  height: 100%;\n  background: transparent;\n  z-index: 9999;\n  will-change: transform, opacity;\n  transform: translateY(0);\n  transition-property: opacity, transform;\n  transition-duration: 0.3s; }\n  .clappr-player#wp3-player-0 .drawer--bottom * {\n    pointer-events: none; }\n  .clappr-player#wp3-player-0 .drawer--bottom:hover {\n    transform: translateY(-12px);\n    transition: transform 0.3s; }\n  .clappr-player#wp3-player-0 .drawer--bottom-expand {\n    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%);\n    transform: translateY(heightImmersion);\n    transition: transform 0.3s; }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand * {\n      pointer-events: auto; }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand:hover {\n      transform: translateY(heightImmersion); }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand:before {\n      content: '';\n      position: absolute;\n      top: -100%;\n      height: 100%;\n      width: 100%;\n      background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px); }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse {\n      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%); }\n      .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse:hover {\n        background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0, rgba(0, 0, 0, 0.8) 100%); }\n      .clappr-player#wp3-player-0 .drawer--bottom-expand__collapse:before {\n        content: '';\n        position: absolute;\n        top: -100%;\n        height: 100%;\n        width: 100%;\n        background: linear-gradient(to top, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0) 32px); }\n    .clappr-player#wp3-player-0 .drawer--bottom-expand-with-header:before {\n      transition: visibility 0.3s ease, opacity 0.3s ease;\n      background: linear-gradient(to bottom, rgba(0, 0, 0, 0.6) 0%, rgba(0, 0, 0, 0.6) 100%); }\n  .clappr-player#wp3-player-0 .drawer--bottom-disabled {\n    display: none; }\n  .clappr-player#wp3-player-0 .drawer--bottom-hidden {\n    pointer-events: none;\n    opacity: 0;\n    transition: visibility 0.3s ease, opacity 0.3s ease; }\n    .clappr-player#wp3-player-0 .drawer--bottom-hidden:hover {\n      transition: visibility 0.3s ease, opacity 0.3s ease; }\n\n.clappr-player#wp3-player-0.fullscreen .drawer--bottom-expand {\n  transform: translateY(immersionFullScreen); }\n  .clappr-player#wp3-player-0.fullscreen .drawer--bottom-expand:hover {\n    transform: translateY(immersionFullScreen); }\n".toString();return e=(e=(e=e.replace(/heightImmersion/g,this.expandOffset())).replace(/immersionFullScreen/g,this.expandOffsetFullscreen())).replace(/heightHint/g,this.effectiveHeightHint)}},{key:"expandOffset",value:function(){}},{key:"expandOffsetFullscreen",value:function(){}},{key:"addExpandBackground",value:function(){var e=this;this.$el.addClass("".concat(this.internalName,"-expand")).on("transitionend",(function(){e.$el.addClass("".concat(e.internalName,"-expand__collapse")).off("transitionend")}))}},{key:"render",value:function(){var e=En.getStyleFrom(this.parseStyle(),{playerId:this.playerId});return this.$el.html(this.content),this.$el.append(e[0]),this.core.trigger(Tn.SHOW_DRAWER_REQUESTED),this.hasPlaceholder&&this.core.trigger(Tn.DRAWER_HAS_PLACEHOLDER,this.effectiveHeightHint),this.updateChromelessState(),this}}]),i}(Wo),$o=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"drawer_bottom"}},{key:"internalName",get:function(){return"drawer--bottom"}},{key:"hasPlaceholder",get:function(){return!0}},{key:"expandOffset",value:function(){return"max(".concat(this.specifiedExpandOffset(),", ").concat(this.maxExpandOffset(),") ")}},{key:"expandOffsetFullscreen",value:function(){return"px"==this.heightImmersionUnit?"max(-".concat(this.specifiedExpandOffset(),", ").concat(this.maxExpandOffset(),") "):"max(".concat(this.specifiedExpandOffsetPercentageFullscreen(),", ").concat(this.maxExpandOffset(),") ")}},{key:"maxExpandOffset",value:function(){return"".concat(this.effectiveHeightHint," + ").concat(this.headerSize())}},{key:"specifiedExpandOffset",value:function(){return"".concat(this.effectiveHeightHint," - ").concat(this.translateYValue())}},{key:"specifiedExpandOffsetPercentageFullscreen",value:function(){return"-".concat(this.translateYValue())}},{key:"headerSize",value:function(){return"".concat(this.headerHeight,"  - 100%")}},{key:"translateYValue",value:function(){return"".concat(parseInt(this.heightImmersion,10)).concat(this.heightImmersionUnit)}},{key:"toggle",value:function(e){e&&(this.isExpanded?this.clickAtHideArea(e)&&g(u(n.prototype),"hide",this).call(this):g(u(n.prototype),"show",this).call(this))}},{key:"clickAtHideArea",value:function(e){return e.clientY>=0&&e.clientY<=this.drawerYPosition()}},{key:"drawerYPosition",value:function(){return Math.round(this.$el[0].getBoundingClientRect().top)-1}}]),n}(qo),Xo=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"name",get:function(){return"drawer-header"}},{key:"attributes",get:function(){return{class:"".concat(this.name," ").concat(this.name,"--hidden")}}},{key:"title",get:function(){return this._title},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._title=e}},{key:"template",get:function(){return Ve('<div class="drawer-header-panel drawer-header-panel--hidden">\n    <div class="opposites-container">\n        <div class="drawer-header-position__left">\n            <div class="drawer-header-element drawer-header-title">\n                <%= title %>\n            </div>\n        </div>\n        <div class="drawer-header-position__right">\n            <div class="drawer-header-element drawer-header-button" data-controls data-close>\n                <div class="drawer-header__close"><%= closeIcon %></div>\n            </div>\n        </div>\n    </div>\n</div>')}},{key:"bindEvents",value:function(){this.listenTo(this.core,Tn.SHOW_HEADER_REQUESTED,this.showHeader),this.listenTo(this.core,Tn.CLOSE_HEADER_REQUESTED,this.closeHeader)}},{key:"bindCloseButton",value:function(){var e=this;this.$el.find(".".concat(this.name,"__close")).on("click",(function(t){t&&t.stopPropagation(),e.closeHeader()}))}},{key:"showHeader",value:function(e){this.updateTitle(e),this.core.trigger(Tn.WILL_SHOW_HEADER),this.show(),this.core.trigger(Tn.DID_SHOW_HEADER)}},{key:"closeHeader",value:function(){this.core.trigger(Tn.WILL_CLOSE_HEADER),this.hide(),this.core.trigger(Tn.DID_CLOSE_HEADER)}},{key:"updateTitle",value:function(e){this.title=e,this.$el.find(".".concat(this.name,"-title")).text(this.title)}},{key:"show",value:function(){this.core.trigger(Tn.WILL_SHOW_MODAL_ELEMENT,{name:this.name}),this.$el.find(".".concat(this.name,"-panel")).removeClass("".concat(this.name,"-panel--hidden")),this.$el.removeClass("".concat(this.name,"--hidden"))}},{key:"hide",value:function(){this.core.trigger(Tn.DID_HIDE_MODAL_ELEMENT,{name:this.name}),this.$el.find(".".concat(this.name,"-panel")).addClass("".concat(this.name,"-panel--hidden")),this.$el.addClass("".concat(this.name,"--hidden"))}},{key:"render",value:function(){var e=En.getStyleFrom('.clappr-player#wp3-player-0 .drawer-header {\n  height: 57px;\n  left: 0px;\n  position: absolute;\n  width: 100%;\n  z-index: 999;\n  transform: translateY(0);\n  transition-property: opacity, transform;\n  transition-duration: 0.3s; }\n  .clappr-player#wp3-player-0 .drawer-header-modal--visible .media-control-panel__upper {\n    display: none; }\n  .clappr-player#wp3-player-0 .drawer-header-panel {\n    padding: 4px 4px 0;\n    position: relative; }\n    .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container {\n      display: flex;\n      justify-content: space-between;\n      align-items: flex-start;\n      position: relative; }\n      .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right {\n        display: flex;\n        flex-flow: row nowrap;\n        align-items: center; }\n        .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-element, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right .drawer-header-element {\n          padding: 12px;\n          will-change: opacity;\n          transition: visibility 0.3s ease, opacity 0.3s ease; }\n        .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-button, .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__right .drawer-header-button {\n          display: inline-block;\n          margin: 0;\n          border: 0;\n          cursor: pointer;\n          background-color: transparent;\n          text-align: center;\n          width: 24px;\n          height: 24px;\n          box-sizing: content-box;\n          transition: visibility 0.3s ease, opacity 0.3s ease; }\n      .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left {\n        width: calc(100% - 48px); }\n        .clappr-player#wp3-player-0 .drawer-header-panel .opposites-container .drawer-header-position__left .drawer-header-title {\n          box-sizing: border-box;\n          color: #fff;\n          pointer-events: none;\n          text-align: left;\n          text-shadow: none;\n          transition: visibility 0.3s ease, opacity 0.3s ease;\n          overflow: hidden;\n          font-family: "opensans-regular";\n          letter-spacing: 0;\n          color: #fff;\n          text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);\n          margin-bottom: 6px;\n          font-size: 18px;\n          line-height: 24px;\n          white-space: nowrap;\n          text-overflow: ellipsis; }\n    .clappr-player#wp3-player-0 .drawer-header-panel--hidden {\n      display: none !important; }\n  .clappr-player#wp3-player-0 .drawer-header--hidden {\n    opacity: 0;\n    transform: translateY(100%);\n    transition: visibility 0.3s ease, opacity 0.3s ease;\n    z-index: 0; }\n',{playerId:this.core.options.playerId});return this.$el.empty(),this.$el.html(this.template({title:this.title,closeIcon:Pa})),this.$el.append(e[0]),this.core.$el.append(this.el),this.bindCloseButton(),this}}]),n}(ze),Qo=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"name",get:function(){return"media_control_placeholder"}},{key:"panel",get:function(){return"front-layer"}},{key:"position",get:function(){return""}},{key:"heightHint",get:function(){return 0}},{key:"shouldDisable",get:function(){return this.currentWidth<parseInt("532px",10)}},{key:"attributes",get:function(){return{class:"media-control-placeholder disabled hidden"}}},{key:"bindEvents",value:function(){this.listenTo(this.core,Tn.DRAWER_HAS_PLACEHOLDER,this.onDrawerHasPlaceholder),this.listenTo(this.core,De.CORE_RESIZE,this.onPlayerResize)}},{key:"onDrawerHasPlaceholder",value:function(){this.hasDrawer=!0,this.enablePlaceholder()}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width&&"number"==typeof e.width,n=this.currentWidth!==e.width;t&&n&&(this.currentWidth=e.width,this.updateResponsiveStyle())}},{key:"enablePlaceholder",value:function(e){e&&this.heightHint!==e&&this.$el.css({height:e}),this.$el.removeClass("disabled")}},{key:"disablePlaceholder",value:function(){this.$el.addClass("disabled")}},{key:"show",value:function(){this.$el.removeClass("hidden")}},{key:"updateResponsiveStyle",value:function(){this.hasDrawer&&(this.shouldDisable?this.disablePlaceholder():this.enablePlaceholder())}},{key:"render",value:function(){this.$el.empty();var e=En.getStyleFrom(".clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder {\n  position: relative;\n  width: 100%;\n  height: 24px; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.hidden {\n    visibility: hidden; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.disabled {\n    display: none; }\n  .clappr-player#wp3-player-0 .media-control-panel__front-layer .media-control-placeholder.media-control-element {\n    padding: 0; }\n\n.clappr-player#wp3-player-0 .media-control.ad .media-control-placeholder {\n  display: none; }\n",{playerId:this.core.options.playerId});return this.$el.append(e[0]),this}}]),n}(Ti),Zo=Wr(wt),Jo=Gr((function(e,t){var n;window,n=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="latest/",n(n.s="./src/clappr-stats.js")}({"./node_modules/lodash.get/index.js":
/*!******************************************!*\
    !*** ./node_modules/lodash.get/index.js ***!
    \******************************************/
/*! no static exports found */function(e,t,n){(function(t){var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="__lodash_hash_undefined__",a="[object Function]",o="[object GeneratorFunction]",s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,l=/^\w*$/,u=/^\./,c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g,h=/^\[object .+?Constructor\]$/,p="object"==(void 0===t?"undefined":i(t))&&t&&t.Object===Object&&t,f="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,g=p||f||Function("return this")(),m=Array.prototype,v=Function.prototype,y=Object.prototype,b=g["__core-js_shared__"],E=(n=/[^.]+$/.exec(b&&b.keys&&b.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",T=v.toString,A=y.hasOwnProperty,k=y.toString,_=RegExp("^"+T.call(A).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=g.Symbol,w=m.splice,C=U(g,"Map"),I=U(Object,"create"),D=S?S.prototype:void 0,R=D?D.toString:void 0;function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function L(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function M(e,t){var n;t=function(e,t){if(j(e))return!1;var n=void 0===e?"undefined":i(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!G(e))||(l.test(e)||!s.test(e)||null!=t&&e in Object(t))}(t,e)?[t]:j(n=t)?n:F(n);for(var r=0,a=t.length;null!=e&&r<a;)e=e[V(t[r++])];return r&&r==a?e:void 0}function N(e){if(!K(e)||(t=e,E&&E in t))return!1;var t,n=function(e){var t=K(e)?k.call(e):"";return t==a||t==o}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?_:h;return n.test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function B(e,t){var n=e.__data__;return function(e){var t=void 0===e?"undefined":i(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function U(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return N(n)?n:void 0}x.prototype.clear=function(){this.__data__=I?I(null):{}},x.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},x.prototype.get=function(e){var t=this.__data__;if(I){var n=t[e];return n===r?void 0:n}return A.call(t,e)?t[e]:void 0},x.prototype.has=function(e){var t=this.__data__;return I?void 0!==t[e]:A.call(t,e)},x.prototype.set=function(e,t){return this.__data__[e]=I&&void 0===t?r:t,this},L.prototype.clear=function(){this.__data__=[]},L.prototype.delete=function(e){var t=this.__data__,n=O(t,e);return!(n<0||(n==t.length-1?t.pop():w.call(t,n,1),0))},L.prototype.get=function(e){var t=this.__data__,n=O(t,e);return n<0?void 0:t[n][1]},L.prototype.has=function(e){return O(this.__data__,e)>-1},L.prototype.set=function(e,t){var n=this.__data__,i=O(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},P.prototype.clear=function(){this.__data__={hash:new x,map:new(C||L),string:new x}},P.prototype.delete=function(e){return B(this,e).delete(e)},P.prototype.get=function(e){return B(this,e).get(e)},P.prototype.has=function(e){return B(this,e).has(e)},P.prototype.set=function(e,t){return B(this,e).set(e,t),this};var F=H((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(G(e))return R?R.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return u.test(e)&&n.push(""),e.replace(c,(function(e,t,i,r){n.push(i?r.replace(d,"$1"):t||e)})),n}));function V(e){if("string"==typeof e||G(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function H(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new(H.Cache||P),n}H.Cache=P;var j=Array.isArray;function K(e){var t=void 0===e?"undefined":i(e);return!!e&&("object"==t||"function"==t)}function G(e){return"symbol"==(void 0===e?"undefined":i(e))||function(e){return!!e&&"object"==(void 0===e?"undefined":i(e))}(e)&&"[object Symbol]"==k.call(e)}e.exports=function(e,t,n){var i=null==e?void 0:M(e,t);return void 0===i?n:i}}).call(this,n(/*! ./../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function(e,t,n){var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}e.exports=i},"./src/clappr-stats.js":
/*!*****************************!*\
    !*** ./src/clappr-stats.js ***!
    \*****************************/
/*! no static exports found */function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i,r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(/*! @clappr/core */"@clappr/core"),s=n(/*! lodash.get */"./node_modules/lodash.get/index.js"),l=(i=s)&&i.__esModule?i:{default:i},u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._runEach=(0,l.default)(e,"options.clapprStats.runEach",5e3),n._onReport=(0,l.default)(e,"options.clapprStats.onReport",n._defaultReport),n._uriToMeasureLatency=(0,l.default)(e,"options.clapprStats.uriToMeasureLatency"),n._urisToMeasureBandwidth=(0,l.default)(e,"options.clapprStats.urisToMeasureBandwidth"),n._runBandwidthTestEvery=(0,l.default)(e,"options.clapprStats.runBandwidthTestEvery",10),n._bwMeasureCount=0,n._completion={watch:(0,l.default)(e,"options.clapprStats.onCompletion",[]),calls:[]},n._newMetrics(),n.on(t.REPORT_EVENT,n._onReport),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"_now",value:function(){return window.performance&&"function"==typeof window.performance.now?window.performance.now():new Date}},{key:"_inc",value:function(e){this._metrics.counters[e]+=1}},{key:"_timerHasStarted",value:function(e){return void 0!==this["_start"+e]}},{key:"_start",value:function(e){this["_start"+e]=this._now()}},{key:"_stop",value:function(e){this._metrics.timers[e]+=this._now()-this["_start"+e]}},{key:"_defaultReport",value:function(e){console.log(e)}},{key:"name",get:function(){return"clappr_stats"}},{key:"supportedVersion",get:function(){return{min:"0.4.2"}}},{key:"_playbackName",get:function(){return this.container.playback.name}},{key:"_playbackType",get:function(){return this.container.getPlaybackType()}}]),a(t,[{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,o.Events.CONTAINER_BITRATE,this.onBitrate),this.listenTo(this.container,o.Events.CONTAINER_STOP,this.stopReporting),this.listenTo(this.container,o.Events.CONTAINER_ENDED,this.stopReporting),this.listenToOnce(this.container.playback,o.Events.PLAYBACK_PLAY_INTENT,this.startTimers),this.listenToOnce(this.container,o.Events.CONTAINER_PLAY,this.onFirstPlaying),this.listenTo(this.container,o.Events.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,o.Events.CONTAINER_PAUSE,this.onPause),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,o.Events.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,o.Events.CONTAINER_ERROR,(function(){return e._inc("error")})),this.listenTo(this.container,o.Events.CONTAINER_FULLSCREEN,(function(){return e._inc("fullscreen")})),this.listenTo(this.container,o.Events.CONTAINER_PLAYBACKDVRSTATECHANGED,(function(t){t&&e._inc("dvrUsage")})),this.listenTo(this.container.playback,o.Events.PLAYBACK_PROGRESS,this.onProgress),this.listenTo(this.container.playback,o.Events.PLAYBACK_TIMEUPDATE,this.onTimeUpdate)}},{key:"destroy",value:function(){this.stopReporting(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"onBitrate",value:function(e){var t=parseInt((0,l.default)(e,"bitrate",0),10),n=this._now();if(this._metrics.extra.bitratesHistory.length>0){var i=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];i.end=n,i.time=n-i.start}this._metrics.extra.bitratesHistory.push({start:this._now(),bitrate:t}),this._inc("changeLevel")}},{key:"stopReporting",value:function(){this._buildReport(),clearInterval(this._intervalId),this._newMetrics(),this.stopListening(),this.bindEvents()}},{key:"startTimers",value:function(){this._intervalId=setInterval(this._buildReport.bind(this),this._runEach),this._start("session"),this._start("startup")}},{key:"onFirstPlaying",value:function(){this.listenTo(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._start("watch"),this._stop("startup")}},{key:"playAfterPause",value:function(){this.listenTo(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying),this._stop("pause"),this._start("watch")}},{key:"onPlay",value:function(){this._inc("play")}},{key:"onPause",value:function(){this._stop("watch"),this._start("pause"),this._inc("pause"),this.listenToOnce(this.container,o.Events.CONTAINER_PLAY,this.playAfterPause),this.stopListening(this.container,o.Events.CONTAINER_TIMEUPDATE,this.onContainerUpdateWhilePlaying)}},{key:"onSeek",value:function(e){this._inc("seek"),this._metrics.extra.watchHistory.push([1e3*e,1e3*e])}},{key:"onTimeUpdate",value:function(e){var t=1e3*e.current,n=1e3*e.total,i=this._metrics.extra.watchHistory.length;if(this._metrics.extra.duration=n,this._metrics.extra.currentTime=t,this._metrics.extra.watchedPercentage=t/n*100,0===i?this._metrics.extra.watchHistory.push([t,t]):this._metrics.extra.watchHistory[i-1][1]=t,this._metrics.extra.bitratesHistory.length>0){var r=this._metrics.extra.bitratesHistory[this._metrics.extra.bitratesHistory.length-1];r.end||(r.time=this._now()-r.start)}this._onCompletion()}},{key:"onContainerUpdateWhilePlaying",value:function(){this.container.playback.isPlaying()&&(this._stop("watch"),this._start("watch"))}},{key:"onBuffering",value:function(){this._inc("buffering"),this._start("buffering"),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERFULL,this.onBufferfull)}},{key:"onBufferfull",value:function(){this._stop("buffering"),this.listenToOnce(this.container,o.Events.CONTAINER_STATE_BUFFERING,this.onBuffering)}},{key:"onProgress",value:function(e){this._metrics.extra.buffersize=1e3*e.current}},{key:"_newMetrics",value:function(){this._metrics={counters:{play:0,pause:0,error:0,buffering:0,decodedFrames:0,droppedFrames:0,fps:0,changeLevel:0,seek:0,fullscreen:0,dvrUsage:0},timers:{startup:0,watch:0,pause:0,buffering:0,session:0,latency:0},extra:{playbackName:"",playbackType:"",bitratesHistory:[],bitrateWeightedMean:0,bitrateMostUsed:0,buffersize:0,watchHistory:[],watchedPercentage:0,bufferingPercentage:0,bandwidth:0,duration:0,currentTime:0}}}},{key:"_onCompletion",value:function(){var e=this._metrics.extra.watchedPercentage,n=this._completion.watch,i=-1!=this._completion.calls.indexOf(e);-1==n.indexOf(e)||i||(o.Log.info(this.name+" PERCENTAGE_EVENT: "+e),this._completion.calls.push(e),this.trigger(t.PERCENTAGE_EVENT,e))}},{key:"_buildReport",value:function(){this._stop("session"),this._start("session"),this._metrics.extra.playbackName=this._playbackName,this._metrics.extra.playbackType=this._playbackType,this._calculateBitrates(),this._calculatePercentages(),this._fetchFPS(),this._measureLatency(),this._measureBandwidth(),this.trigger(t.REPORT_EVENT,JSON.parse(JSON.stringify(this._metrics)))}},{key:"_fetchFPS",value:function(){var e={html5_video:this._html5FetchFPS,hls:this._html5FetchFPS,dash_shaka_playback:this._html5FetchFPS};e[this._playbackName]&&e[this._playbackName].call(this)}},{key:"_calculateBitrates",value:function(){var e=this._metrics.extra.bitratesHistory.map((function(e){return e.time})).reduce((function(e,t){return e+t}),0);this._metrics.extra.bitrateWeightedMean=this._metrics.extra.bitratesHistory.map((function(e){return e.bitrate*e.time})).reduce((function(e,t){return e+t}),0)/e,this._metrics.extra.bitratesHistory.length>0&&(this._metrics.extra.bitrateMostUsed=this._metrics.extra.bitratesHistory.slice().sort((function(e,t){return e.time<t.time}))[0].bitrate)}},{key:"_calculatePercentages",value:function(){this._metrics.extra.duration>0&&(this._metrics.extra.bufferingPercentage=this._metrics.timers.buffering/this._metrics.extra.duration*100)}},{key:"_html5FetchFPS",value:function(){var e=this.container.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"_measureLatency",value:function(){var e=this;if(this._uriToMeasureLatency){var t,n=[],i=function(){t=n[2]-n[1],e._metrics.timers.latency=t};!function t(){if(n.push(e._now()),n.length>2)i();else{var r=new Image;r.onload=t,r.src=e._uriToMeasureLatency+"?"+Math.random()+"="+e._now()}}()}}},{key:"_measureBandwidth",value:function(){var e=this;if(this._urisToMeasureBandwidth&&this._bwMeasureCount%this._runBandwidthTestEvery==0){var t=0,n=function(n){var i=(e._urisToMeasureBandwidth[t-1].end-e._urisToMeasureBandwidth[t-1].start)/1e3,r=8*n.loaded/i;e._metrics.extra.bandwidth=r,e._urisToMeasureBandwidth.forEach((function(e){e.start=0,e.end=0,e.expired=!1,clearTimeout(e.timer)}))};!function i(r){if(t>0&&(e._urisToMeasureBandwidth[t-1].end=e._now(),clearTimeout(e._urisToMeasureBandwidth[t-1].timer)),t>=e._urisToMeasureBandwidth.length||t>0&&e._urisToMeasureBandwidth[t-1].expired)n(r);else{var a=new XMLHttpRequest;a.open("GET",e._urisToMeasureBandwidth[t].url,!0),a.responseType="arraybuffer",a.onload=a.onabort=i,e._urisToMeasureBandwidth[t].start=e._now(),e._urisToMeasureBandwidth[t].timer=setTimeout((function(t){e._urisToMeasureBandwidth[t].expired=!0,a.abort()}),e._urisToMeasureBandwidth[t].timeout,t),a.send()}t++}()}this._bwMeasureCount++}}]),t}(o.ContainerPlugin);t.default=u,u.REPORT_EVENT="clappr:stats:report",u.PERCENTAGE_EVENT="clappr:stats:percentage",e.exports=t.default},"@clappr/core":
/*!*************************!*\
    !*** external "Clappr" ***!
    \*************************/
/*! no static exports found */function(t,n){t.exports=e}})},e.exports=n(Zo)})),es=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),e.options.clapprStats=e.options.clapprStats||{runEach:1e3,onReport:function(e){return i.onMetricsReceived(e)}},i=t.call(this,e)}return o(n,[{key:"innerPlayback",get:function(){return this.container.playback&&this.container.playback.playback}},{key:"_playbackName",get:function(){return this.innerPlayback&&this.innerPlayback.name}},{key:"_html5FetchFPS",value:function(){var e=this.container.playback.playback.el,t=e.webkitDecodedFrameCount||e.mozDecodedFrames||0,n=e.webkitDroppedFrameCount||e.mozParsedFrames-e.mozDecodedFrames||0,i=t-(this._lastDecodedFramesCount||0);this._metrics.counters.decodedFrames=t,this._metrics.counters.droppedFrames=n,this._metrics.counters.fps=i/(this._runEach/1e3),this._lastDecodedFramesCount=t}},{key:"onMetricsReceived",value:function(e){this.container.trigger(Tn.WM_STATS_REPORTED,e)}}]),n}(Kr(Jo)),ts=function(e){l(i,e);var t=p(i);function i(){return r(this,i),t.apply(this,arguments)}return o(i,[{key:"name",get:function(){return"cuepoints"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.container.playback,Tn.WM_VIDEO_METADATA_LOADED,this._parseCuepoints)}},{key:"_bindPlaybackEvents",value:function(){this.listenTo(this.container.playback,De.PLAYBACK_TIMEUPDATE,this._onPositionUpdate)}},{key:"_onPositionUpdate",value:function(e){var t=this,n=e.current;this._cuepoints.forEach((function(e){(t._previousPosition<e.time||n===e.time)&&(n===e.time||n>=e.time&&n-t._previousPosition<=1)&&(_e.debug(t.name,"cuepoint reached:",e),t.container.trigger(Tn.DID_REACH_CUEPOINT,e))})),this._previousPosition=n}},{key:"_parseCuepoints",value:function(e){var t=this;this._cuepoints=(e.cuepoints||[]).map((function(e){var t=n({},e);return t.time/=1e3,t})).sort((function(e,t){return e.time-t.time})),_e.debug(this.name,"cuepoints loaded:",this._cuepoints),this._cuepoints.length>0&&(jn((function(){return t.container.trigger(Tn.DID_LOAD_CUEPOINTS,t._cuepoints)})),this._bindPlaybackEvents(),this._previousPosition=-.01)}}]),i}(ot),ns=/^https?:\/\/([a-z0-9\.\-]*)\.globoi?\.com/,is=/^https?:\/\/[w]*\.?(techtudo)\.com\.br/,rs=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).siteName=i.options.siteName,i.listenToOnce(i.container.playback,Tn.WM_RESOURCE_READY,i.onResourceReady),i.embedPlugin(),i}return o(n,[{key:"name",get:function(){return"comscore"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"environment",get:function(){return this.container.options.env}},{key:"scorecardBeacon",get:function(){return"".concat(this.environment.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/beacon.js")}},{key:"embedPlugin",value:function(){var e=this;if(!window.COMSCORE){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src=this.scorecardBeacon,t.onload=function(){return e.ready()},document.head.appendChild(t)}}},{key:"ready",value:function(){this.isReady=!0,this.trigger("comscore:ready")}},{key:"onResourceReady",value:function(e){var t=this;window.COMSCORE?(this.video=e,this.listenToOnce(this.container,De.CONTAINER_PLAY,this.onPlay),this.listenToOnce(this.container,De.CONTAINER_STOP,this.onStop),this.listenToOnce(this.container,De.CONTAINER_ENDED,this.onStop)):this.listenToOnce(this,"comscore:ready",(function(){return t.onResourceReady(e)}))}},{key:"onPlay",value:function(){var e={c2:6035227,c3:this.getSiteName(),c4:this.video.channel,c5:this.getVideoType(),c6:null,c10:"1|1",rn:Math.random()};window.location.host.match(/globotv\.globo\.com$/)&&(e.c6="Globotv - "+this.video.channel),COMSCORE.beacon(e)}},{key:"onStop",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"getSiteName",value:function(){return this.siteName?this.siteName:this.getSubdomain(window.location.href)}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(ns)||e.match(is);return t?t[1]:null}return null}},{key:"getVideoType",value:function(){return{ad:"09",live:"03"}[this.video.kind]||"02"}}]),n}(ot),as=function(){function e(t){r(this,e),this.channel=t.channel,this.channelId=t.channel_id,this.program=t.program,this.programId=t.program_id,this.startTime=t.start_time,this.endTime=t.end_time,this.rawData=t}return o(e,[{key:"contains",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e>=this.startTime-t&&e<this.endTime+t}},{key:"toString",value:function(){var e={month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},t=new Date(1e3*this.startTime).toLocaleDateString(void 0,e),n=new Date(1e3*this.endTime).toLocaleDateString(void 0,e);return"Program [".concat(this.channel).concat(this.channelId?" (".concat(this.channelId,")"):""," - ").concat(this.program).concat(this.programId?" (".concat(this.programId,")"):"",": ").concat(t," - ").concat(n,"]")}}]),e}(),os=function(){function e(t){r(this,e),this._programs=t.programs||[],this._programs=this._programs.map((function(e){return new as(e)})).sort((function(e,t){return t.endTime-e.endTime})),this.rawData=t}return o(e,[{key:"programs",get:function(){return this._programs}},{key:"latestProgram",get:function(){return this.programs[0]}},{key:"getProgramForTime",value:function(e,t){return this.programs&&this.programs.find((function(n){return n.contains(e,t)}))}}]),e}(),ss=bn.truncateTimeSeconds,ls=bn.getCurrentTime,us=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e))._playback=e.playback,i._throttledPositionUpdate=la((function(){var e;return(e=i)._onPositionUpdate.apply(e,arguments)}),5e3,{trailing:!1}),i._url=i.epgApiUrl,i}return o(n,[{key:"name",get:function(){return"epg"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"epgApiUrl",get:function(){return"".concat(this.options.env.protocol,"://epg-api.video.globo.com/v2/programs")}},{key:"playback",get:function(){return this._playback}},{key:"innerPlayback",get:function(){return this.playback&&this.playback.playback}},{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_READY,this._onResourceReady)}},{key:"parseEPG",value:function(e){this._updating=!1,this._epg=new os(e),this.container.trigger(Tn.DID_LOAD_EPG,{programs:this._epg.programs}),this._onPositionUpdate()}},{key:"updateEPG",value:function(){if(!this._updating){this._updating=!0;var e=ls(this.innerPlayback),t=ss(e-this.playback.getDuration()),n=ss(e+1800);this._loadEpgData(t,n)}}},{key:"updateProgramForTime",value:function(e){if(!this._currentProgram||!this._currentProgram.contains(e)){var t=this._epg&&this._epg.getProgramForTime(e,5);this._currentProgram!==t&&(this._currentProgram=t,this.container.trigger(Tn.DID_CHANGE_CURRENT_PROGRAM,{program:this._currentProgram}))}}},{key:"_onResourceReady",value:function(e){var t,n=e.isLive,i=e.transmission&&e.transmission.id,r=!(null===(t=this.innerPlayback)||void 0===t||!t.getProgramDateTime);n&&i&&r?(this._video=e,this._transmissionId=i,this.listenTo(this.playback,De.PLAYBACK_TIMEUPDATE,this._throttledPositionUpdate),this.listenTo(this.playback,De.PLAYBACK_SEEKED,this._onPositionUpdate),this.listenToOnce(this.playback,De.PLAYBACK_PLAY,this.updateEPG)):_e.info(this.name,"skipping EPG loading (isLive=".concat(n,", transmissionId=").concat(i,")"))}},{key:"_loadEpgData",value:function(e,t){var n=this;if(!isNaN(e)&&!isNaN(t)){var i="".concat(this._url,"?transmission_id=").concat(this._transmissionId,"&start_time=").concat(e,"&end_time=").concat(t);return Y.ajax({url:i}).then((function(e){return n.parseEPG(e)}),(function(e,t,i){_e.error(n.name,"could not load EPG:",i||t),!n._epg&&n.stopListening(n.playback)}))}_e.warn(this.name,"skipping EPG request. Invalid start or end time. start: ".concat(e,",  end: ").concat(t))}},{key:"_onPositionUpdate",value:function(){if(this.innerPlayback){var e=ls(this.innerPlayback);this.updateProgramForTime(e);var t=this._epg&&this._epg.latestProgram;!this._updating&&t&&t.endTime-e<=300&&this.updateEPG()}}}]),n}(ot),cs=bn.autoplayManager,ds=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).options.disableControlsOnPoster||(i.options.disableControlsOnPoster=!0),i.options.disableControlsOnPoster&&i.container.disableMediaControl(),i._clicked=!1,i.playButtonVisible=!0,i.render(),i}return o(n,[{key:"name",get:function(){return"poster"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Ve('<div class="poster__background"></div>\n<div class="poster__background-overlay"></div>\n<button class="poster__play-wrapper" tabindex="0"></button>\n')}},{key:"disableImage",get:function(){return this.options.poster&&this.options.poster.disableImage}},{key:"startHidden",get:function(){return this.options.poster&&this.options.poster.startHidden}},{key:"attributes",get:function(){return{class:"poster".concat(this.startHidden?" poster--hidden":"")}}},{key:"events",get:function(){return{click:"clicked"}}},{key:"posterImage",get:function(){if(!this.options.src||!this.options.sources||!this.options.sources.length)return null;var e=this.video&&this.video.posterImageUrls||{},t=Object.keys(e),n=this.container.currentSize.height;return e[t.find((function(e){return e>=n}))||t[t.length-1]]}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Tn.WM_PLAY_REQUESTED,this.hidePlayButton),this.listenTo(this.container.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenTo(this.container.playback,Tn.WM_AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.listenTo(this.container,De.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,De.CONTAINER_PLAY,this.onPlay),this.listenTo(this.container,De.CONTAINER_STOP,this.onStop),this.listenTo(this.container,De.CONTAINER_ENDED,this.onStop)}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.authorizePosterImage=!e.adult||this.options.allowRestrictedContent,this.authorizePosterImage&&!this.disableImage&&this.addPosterImage()}},{key:"onAutoplayBlocked",value:function(){this.stopListening(this.container.playback,Tn.WM_PLAY_REQUESTED),this.showPlayButton()}},{key:"onBuffering",value:function(){this._clicked=!0,this.hidePlayButton()}},{key:"onPlay",value:function(){this.$el.addClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.enableMediaControl()}},{key:"onStop",value:function(){this._clicked=!1,this.show()}},{key:"show",value:function(){this.$el.removeClass("poster--hidden"),this.options.disableControlsOnPoster&&this.container.disableMediaControl(),this.options.poster&&this.options.poster.disablePlayButton||Q.isChromecast||this.showPlayButton()}},{key:"hidePlayButton",value:function(){this.$playButton.hide(),this.playButtonVisible=!1}},{key:"showPlayButton",value:function(){this.playButtonVisible=!0,this.$playButton.show()}},{key:"clicked",value:function(e){if(e.stopPropagation(),!this._clicked&&this.playButtonVisible)return this.container.playback.trigger(Tn.WM_USER_PLAY_REQUESTED,{event:e}),this.container.playback.playback&&this.container.playback.consent(),this.container.playback.play(),this.hidePlayButton(),this._clicked=!0,!1}},{key:"render",value:function(){var e=this,t=En.getStyleFrom(".clappr-player#wp3-player-0 .poster {\n  cursor: pointer;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 998;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-justify-content: center;\n  justify-content: center;\n  -webkit-align-items: center;\n  align-items: center;\n  visibility: visible;\n  opacity: 1;\n  transition: visibility 0.3s ease, opacity 0.3s ease; }\n  .clappr-player#wp3-player-0 .poster--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .poster:hover .poster__play-wrapper {\n    filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.5)); }\n  .clappr-player#wp3-player-0 .poster__background {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: 50% 50%; }\n  .clappr-player#wp3-player-0 .poster__background-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5); }\n  .clappr-player#wp3-player-0 .poster__play-wrapper {\n    background: none;\n    border: none;\n    width: auto;\n    height: 30%;\n    text-align: center;\n    opacity: 0.97;\n    transition: filter 0.3s;\n    -webkit-flex: 1;\n    flex: 1; }\n    .clappr-player#wp3-player-0 .poster__play-wrapper svg {\n      width: 100%;\n      height: 100%;\n      display: inline; }\n",{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(t[0]),this.container.$el.append(this.el),this.$playButton=this.$el.find(".poster__play-wrapper"),this.$playButton.append('<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"/>\n    </g>\n</svg>\n<span class="visually-hidden">Reproduzir vídeo</span>'),this.options.autoPlay&&this.hidePlayButton(),cs.onAutoplayAvailable((function(){return e.hidePlayButton()}),this.options,(function(){cs.isAutoPlayMutedAllowed(e.options)||e._clicked||e.showPlayButton()})),this}},{key:"addPosterImage",value:function(){if(this.container.currentSize&&this.container.currentSize.height>0){var e=this.posterImage;if(e){this.container.options.poster=e,this.imgEl=this.$(".poster__background"),this.imgEl.css({"background-image":"url("+e+")"}),this.$el.prepend(this.imgEl[0]);var t=this.container.$el.find("video");t.length&&(t[0].poster=e)}}else this.listenToOnce(this.container,De.CONTAINER_RESIZE,this.addPosterImage)}}]),n}(lt),hs=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).render(),i}return o(n,[{key:"name",get:function(){return"spinner"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Ve('<p class="visually-hidden">Carregando</p>\n<div class="spinner__svg spinner__svg--animated" aria-hidden="true">\n  <%= spinnerIcon %>\n</div>\n')}},{key:"playback",get:function(){return this.container.playback}},{key:"attributes",get:function(){return{class:"spinner",role:"alert"}}},{key:"bindEvents",value:function(){this.listenToOnce(this.playback,Tn.WM_PLAY_REQUESTED,this.start),this.listenToOnce(this.playback,Tn.WM_AUTOPLAY_BLOCKED,this.onAutoplayBlocked),this.listenTo(this.container,De.CONTAINER_STATE_BUFFERING,this.start),this.listenTo(this.container,De.CONTAINER_STATE_BUFFERFULL,this.onBufferfull),this.listenTo(this.container,De.CONTAINER_PLAY,this.stop),this.listenTo(this.container,De.CONTAINER_STOP,this.stop),this.listenTo(this.container,De.CONTAINER_ERROR,this.stop)}},{key:"onAutoplayBlocked",value:function(){this.stop(),this.stopListening(this.playback,Tn.WM_PLAY_REQUESTED),this.listenToOnce(this.playback,Tn.WM_USER_PLAY_REQUESTED,this.start)}},{key:"enable",value:function(){this.enabled||(this.bindEvents(),this.enabled=!0)}},{key:"disable",value:function(){this.stop(),this.stopListening(),this.enabled=!1}},{key:"start",value:function(){var e=this;this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.timeoutId=setTimeout((function(){e.$el.html(e.template({spinnerIcon:'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path d="M2.4 12c0-5.302 4.298-9.6 9.6-9.6.663 0 1.2.537 1.2 1.2 0 .663-.537 1.2-1.2 1.2-3.976 0-7.2 3.224-7.2 7.2 0 .663-.537 1.2-1.2 1.2-.663 0-1.2-.537-1.2-1.2z" fill="#FFF"/>\n    </g>\n</svg>'})),e.isVisible=!0,e.container.trigger(Tn.WM_SPINNER_START),e.timeoutId=null}),300)}},{key:"stop",value:function(){this.disableTimeUpdateObserver(),this.resetTimeoutToStart(),this.isVisible&&(this.isVisible=!1,this.$el.html(""),this.container.trigger(Tn.WM_SPINNER_STOP))}},{key:"resetTimeoutToStart",value:function(){this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=null}},{key:"disableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop&&(this.waitingTimeUpdateToStop=!1,this.stopListening(this.container,De.CONTAINER_TIMEUPDATE))}},{key:"enableTimeUpdateObserver",value:function(){this.waitingTimeUpdateToStop=!0,this.listenToOnce(this.container,De.CONTAINER_TIMEUPDATE,this.stop)}},{key:"onBufferfull",value:function(){var e,t,n=this.playback&&this.playback.videoEl;"video"===(null==n||null===(e=n.nodeName)||void 0===e||null===(t=e.toLowerCase)||void 0===t?void 0:t.call(e))?n.currentTime>0?this.stop():this.enableTimeUpdateObserver():this.stop()}},{key:"render",value:function(){var e=this,t=En.getStyleFrom(".clappr-player#wp3-player-0 .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 998;\n  width: 48px;\n  height: 48px;\n  margin: -24px 0 0 -24px;\n  cursor: default;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .spinner__svg {\n    line-height: 100%;\n    height: 100%;\n    width: 100%;\n    margin: 0; }\n    .clappr-player#wp3-player-0 .spinner__svg--animated {\n      animation: rotate-spinner-player 0.5s linear infinite normal forwards; }\n\n@keyframes rotate-spinner-player {\n  0% {\n    transform: rotate(0deg); }\n  100% {\n    transform: rotate(360deg); } }\n",{playerId:this.options.playerId});return this.container.$el.append(t[0]),this.container.$el.append(this.el),this.options.autoPlay?this.start():this.stop(),bn.autoplayManager.onAutoplayAvailable((function(){return e.start()}),this.options,(function(){bn.autoplayManager.isAutoPlayMutedAllowed(e.options)||e.stop()})),this}}]),n}(lt),ps=/([a-z0-9\.\-]*)\.globoi?\.com/,fs=/[w]*\.?(techtudo)\.com\.br/,gs="*null",ms=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).options.daxExtras||(i.options.daxExtras=i.options.daxextras),i.adError=!1,i.isReady=!1,i.started=!1,i.currentTime=0,i.embedScript(),i}return o(n,[{key:"name",get:function(){return"streamsense"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"waitForDFP",get:function(){return!Q.isChromecast&&!Q.isMobile}},{key:"isAdPlayback",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"currentTimeInMilliseconds",get:function(){return this.toMilliseconds(this.currentTime)}},{key:"streamsenseScript",get:function(){return"".concat(this.options.env.protocol,"://s3.glbimg.com/v1/AUTH_e1b09a2d222b4900a437a46914be81e5/static/vendor/libs/comScore-JS-6.3.1.181004.min.js")}},{key:"scorecardMeasurement",get:function(){return"".concat(this.options.env.protocol,"://").concat(this.options.httpOnly?"":"s","b.scorecardresearch.com/p?c1=2&c2=6035227&ns_site=globo")}},{key:"contentType",get:function(){var e="live"===this.video.kind,t=!e&&this.video.duration/1e3/60;return e?"vc13":!e&&t>=10?"vc12":"vc11"}},{key:"bindEvents",value:function(){var e=this;this.waitForDFP&&(this.listenTo(this.container,Tn.DFP_CONTENT_RESUME,(function(){return e.checkAd(!1)})),this.listenTo(this.container,Tn.DFP_AD_ERROR,(function(){return e.checkAd(!0)})),this.listenTo(this.container,Tn.DFP_CONTENT_ENDED,this.bindPlaybackEvents)),this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_READY,(function(t){return e.setupStart(t)}))}},{key:"bindPlaybackEvents",value:function(){var e,t=this,n=(s(e={},De.CONTAINER_TIMEUPDATE,this.timeUpdate),s(e,De.CONTAINER_PLAY,this.onPlay),s(e,De.CONTAINER_PAUSE,this.onPause),s(e,De.CONTAINER_ERROR,this.onError),s(e,De.CONTAINER_SEEK,this.onSeek),s(e,De.CONTAINER_STATE_BUFFERING,this.onBuffering),e),i=s({},De.PLAYBACK_ENDED,this.onEnded);Object.keys(n).forEach((function(e){var i=n[e];t.stopListening(t.container,e,i),t.listenTo(t.container,e,i)})),Object.keys(i).forEach((function(e){var n=i[e];t.stopListening(t.container.playback,e,n),t.listenTo(t.container.playback,e,n)}))}},{key:"setupStart",value:function(e){var t=this;this.video=e,!this.isReady&&!window.ns_||!this.dfpReady&&this.waitForDFP?this.listenToOnce(this,Tn.STREAMSENSE_READY,(function(){return t.setupStart(e)})):(this.start(),!this.waitForDFP&&this.bindPlaybackEvents())}},{key:"checkAd",value:function(e){this.adError=e,this.dfpReady=!0,!this.started&&this.setupStart(this.video),this.bindPlaybackEvents()}},{key:"ready",value:function(){window.ns_?(this.isReady=!0,this.trigger(Tn.STREAMSENSE_READY)):this.disable()}},{key:"embedScript",value:function(){var e=this;if(!window.ns_||!window.ns_.StreamingAnalytics){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("async","async"),t.setAttribute("src",this.streamsenseScript),t.onload=function(){return e.ready()},t.onerror=function(){return e.ready()},document.head.appendChild(t)}}},{key:"start",value:function(){this.video&&ns_.StreamingAnalytics&&(this.streamSense=new ns_.StreamingAnalytics({liveEndpointURL:this.scorecardMeasurement}),this.setStreamSenseInitData(),this.setClip(),this.started=!0)}},{key:"setStreamSenseInitData",value:function(){this.streamSense.setLabels&&this.streamSense.setLabels({ns_st_mp:"Player",ns_st_mv:"7.65.1"}),this.streamSense.createPlaybackSession&&this.streamSense.createPlaybackSession({ns_st_pl:this.video.program+"-"+this.video.title})}},{key:"getSubdomain",value:function(e){if(e){var t=e.match(ps)||e.match(fs);return t?t[1]:null}return null}},{key:"setClip",value:function(){var e={short:"vc11",full:"vc12",live:"vc13",collaborative:"vc21",ad:"va00"}[this.contentType],t=this.container.options.dax&&this.container.options.dax.url,n=this.container.options.dax&&this.container.options.dax;n||(n=this.container.options.domain);var i=n||t&&new URL(t).hostname||document.location.hostname,r={c3:this.getSubdomain(i),c4:this.video.channel,ns_st_ty:e,ns_st_ct:this.contentType,ns_st_pr:this.video.program,ns_st_ep:this.video.title,ns_st_st:this.video.channel,ns_st_pu:"Globo",ns_st_ge:this.video.category,ns_st_ci:""+this.video.id,ns_st_cu:t||document.location.href,ns_st_cl:this.video.duration||0,ns_st_cn:1,ns_st_pn:1,ns_st_tp:1,ns_st_ia:gs,ns_st_ce:gs,ns_st_ddt:gs,ns_st_tdt:gs};Object.assign(r,this.options.daxExtras),this.streamSense.getPlaybackSession&&this.streamSense.getPlaybackSession().setAsset(r)}},{key:"timeUpdate",value:function(e){this.currentTime=e.current}},{key:"onPlay",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPlay(this.currentTimeInMilliseconds)}},{key:"onPause",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyPause(this.currentTimeInMilliseconds)}},{key:"onEnded",value:function(){this.started&&!this.isAdPlayback&&this.streamSense.notifyEnd(this.currentTimeInMilliseconds)}},{key:"onBuffering",value:function(){this.started&&!this.isAdPlayback&&this.video&&"Live"===this.video.type&&this.streamSense.notifyBufferStart(this.currentTimeInMilliseconds)}},{key:"onSeek",value:function(){this.onPause()}},{key:"onError",value:function(){}},{key:"toMilliseconds",value:function(e){return 1e3*e>>0}},{key:"destroy",value:function(){this.started&&this.streamSense.notifyEnd(this.currentTimeInMilliseconds),g(u(n.prototype),"destroy",this).call(this)}}]),n}(ot),vs=bn.Ajax,ys=bn.loadUrlAsImage,bs=bn.hexGrf,Es=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).url=i.webmediaApiHit,i}return o(n,[{key:"name",get:function(){return"webmedia_api_hit"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"type",get:function(){return Q.isMobile?"mobile_browser":"desktop"}},{key:"environment",get:function(){return this.container.options.env}},{key:"webmediaApiHit",get:function(){return"prod"===this.environment.name||"local"===this.environment.name?"".concat(this.environment.protocol,"://stats.video.globo.com"):"".concat(this.environment.protocol,"://stats.video.dev.globoi.com")}},{key:"bindEvents",value:function(){this.stopListening(),this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_READY,this.fillIds),this.listenToOnce(this.container.playback,De.PLAYBACK_PLAY,this.seed),this.listenToOnce(this.container.playback,De.PLAYBACK_ENDED,this.bindEvents),this.listenToOnce(this.container.playback,De.PLAYBACK_STOP,this.bindEvents)}},{key:"fillIds",value:function(e){this.videoId=e.id,this.programId=e.programId}},{key:"seed",value:function(){var e=this;if(this.videoId&&this.programId){var t="hitStats_".concat(+new Date),n="/hits/".concat(this.videoId,"?type=").concat(this.type,"&callback=").concat(t),i="".concat(this.url).concat(n);vs.jsonp({url:i,callbackName:t,timeout:5e3}).then((function(t){return e.hit(t)}),this.logError)}else this.logError("no argument was passed")}},{key:"hit",value:function(e){var t=e.data,n="".concat(t).concat(bs(t+"w3bM3d!A")),i="hitIncStats_".concat(+new Date),r="/hits/".concat(this.videoId,"/").concat(this.programId,"/").concat(n,"?type=").concat(this.type,"&callback=").concat(i),a="".concat(this.url).concat(r);ys(a)}},{key:"logError",value:function(e){_e.error(this.name,"Webmedia api hit was not possible because ",e)}}]),n}(ot),Ts=/\n?(\r?\n){2}/,As=/\r?\n/,ks=/([0-9]{2}):([0-9]{2}):([0-9]{2}),([0-9]*)?/,_s=/[0-9:,]+/g,Ss=/[^\S\r\n]+$/gm,ws=function(){function e(t){var n=this;r(this,e),this.subtitleItems=[];var i=t.replace(Ss,"").split(Ts).filter((function(e){return n.isValid(e)}));this.subtitleItems=i.map((function(e){return n.parseSubtitle(e)}))}return o(e,[{key:"isCurrentSubtitle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t>=e.start&&t<=e.end}},{key:"getSubtitleAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.subtitleItems[e]}},{key:"getSubtitleBy",value:function(e){for(var t=0,n=this.subtitleItems.length-1,i=Math.floor((t+n)/2);!this.isCurrentSubtitle(this.subtitleItems[i],e)&&t<n;)e>this.subtitleItems[i].start?t=i+1:n=i-1,i=Math.floor((t+n)/2);return this.isCurrentSubtitle(this.subtitleItems[i],e)?{index:i,subtitle:this.subtitleItems[i]}:void 0}},{key:"isValid",value:function(e){return e&&""!==e.trim()}},{key:"millisFromTimestamp",value:function(e){e=e.match(ks);var t=60*parseInt(e[1],10)*60*1e3;return t+=60*parseInt(e[2],10)*1e3,t+=1e3*parseInt(e[3],10),e[4]&&(t+=parseInt(e[4],10)),t}},{key:"parseSubtitle",value:function(e){var t=-1,n=-1,i="",r=e.split(As);if(r.length>=2){var a=r[1].match(_s);if(a[0]&&(t=this.millisFromTimestamp(a[0])),a[1]&&(n=this.millisFromTimestamp(a[1])),-1!==t&&-1!==n)i=r.slice(2).join("<br>");return{start:t,end:n,content:i}}}}]),e}(),Cs="undefined"!=typeof window?window:void 0!==jr?jr:"undefined"!=typeof self?self:{},Is=Array.prototype.slice,Ds=function(e,t){"length"in e||(e=[e]);e=Is.call(e);for(;e.length;){var n=e.shift(),i=t(n);if(i)return i;n.childNodes&&n.childNodes.length&&(e=Is.call(n.childNodes).concat(e))}};var Rs=xs;function xs(e,t){if(!(this instanceof xs))return new xs(e,t);this.data=e,this.nodeValue=e,this.length=e.length,this.ownerDocument=t||null}xs.prototype.nodeType=8,xs.prototype.nodeName="#comment",xs.prototype.toString=function(){return"[object Comment]"};var Ls=Ps;function Ps(e,t){if(!(this instanceof Ps))return new Ps(e);this.data=e||"",this.length=this.data.length,this.ownerDocument=t||null}Ps.prototype.type="DOMTextNode",Ps.prototype.nodeType=3,Ps.prototype.nodeName="#text",Ps.prototype.toString=function(){return this.data},Ps.prototype.replaceData=function(e,t,n){var i=this.data,r=i.substring(0,e),a=i.substring(e+t,i.length);this.data=r+n+a,this.length=this.data.length};var Os=function(e){var t=this,n=e.type;e.target||(e.target=t);t.listeners||(t.listeners={});var i=t.listeners[n];if(i)return i.forEach((function(n){e.currentTarget=t,"function"==typeof n?n(e):n.handleEvent(e)}));t.parentNode&&t.parentNode.dispatchEvent(e)};var Ms=function(e,t){var n=this;n.listeners||(n.listeners={});n.listeners[e]||(n.listeners[e]=[]);-1===n.listeners[e].indexOf(t)&&n.listeners[e].push(t)};var Ns=function(e,t){var n=this;if(!n.listeners)return;if(!n.listeners[e])return;var i=n.listeners[e],r=i.indexOf(t);-1!==r&&i.splice(r,1)};var Bs=Fs,Us=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function Fs(e){switch(e.nodeType){case 3:return js(e.data);case 8:return"\x3c!--"+e.data+"--\x3e";default:return function(e){var t=[],n=e.tagName;"http://www.w3.org/1999/xhtml"===e.namespaceURI&&(n=n.toLowerCase());t.push("<"+n+function(e){var t=[];for(var n in e)Vs(e,n)&&t.push({name:n,value:e[n]});for(var i in e._attributes)for(var r in e._attributes[i]){var a=e._attributes[i][r],o=(a.prefix?a.prefix+":":"")+r;t.push({name:o,value:a.value})}e.className&&t.push({name:"class",value:e.className});return t.length?Hs(t):""}(e)+function(e){var t=e.dataset,n=[];for(var i in t)n.push({name:"data-"+i,value:t[i]});return n.length?Hs(n):""}(e)),Us.indexOf(n)>-1?t.push(" />"):(t.push(">"),e.childNodes.length?t.push.apply(t,e.childNodes.map(Fs)):e.textContent||e.innerText?t.push(js(e.textContent||e.innerText)):e.innerHTML&&t.push(e.innerHTML),t.push("</"+n+">"));return t.join("")}(e)}}function Vs(e,t){var n=typeof e[t];return"style"===t&&Object.keys(e.style).length>0||e.hasOwnProperty(t)&&("string"===n||"boolean"===n||"number"===n)&&"nodeName"!==t&&"className"!==t&&"tagName"!==t&&"textContent"!==t&&"innerText"!==t&&"namespaceURI"!==t&&"innerHTML"!==t}function Hs(e){var t=[];return e.forEach((function(e){var n=e.name,i=e.value;"style"===n&&(i=function(e){if("string"==typeof e)return e;var t="";return Object.keys(e).forEach((function(n){var i=e[n];n=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),t+=n+":"+i+";"})),t}(i)),t.push(n+'="'+(js(i).replace(/"/g,"&quot;")+'"'))})),t.length?" "+t.join(" "):""}function js(e){var t="";return"string"==typeof e?t=e:e&&(t=e.toString()),t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ks="http://www.w3.org/1999/xhtml",Gs=Ws;function Ws(e,t,n){if(!(this instanceof Ws))return new Ws(e);var i=void 0===n?Ks:n||null;this.tagName=i===Ks?String(e).toUpperCase():e,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=t||null,this.namespaceURI=i,this._attributes={},"INPUT"===this.tagName&&(this.type="text")}Ws.prototype.type="DOMElement",Ws.prototype.nodeType=1,Ws.prototype.appendChild=function(e){return e.parentNode&&e.parentNode.removeChild(e),this.childNodes.push(e),e.parentNode=this,e},Ws.prototype.replaceChild=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);return t.parentNode=null,this.childNodes[n]=e,e.parentNode=this,t},Ws.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);return this.childNodes.splice(t,1),e.parentNode=null,e},Ws.prototype.insertBefore=function(e,t){e.parentNode&&e.parentNode.removeChild(e);var n=null==t?-1:this.childNodes.indexOf(t);return n>-1?this.childNodes.splice(n,0,e):this.childNodes.push(e),e.parentNode=this,e},Ws.prototype.setAttributeNS=function(e,t,n){var i=null,r=t,a=t.indexOf(":");(a>-1&&(i=t.substr(0,a),r=t.substr(a+1)),"INPUT"===this.tagName&&"type"===t)?this.type=n:(this._attributes[e]||(this._attributes[e]={}))[r]={value:n,prefix:i}},Ws.prototype.getAttributeNS=function(e,t){var n=this._attributes[e],i=n&&n[t]&&n[t].value;return"INPUT"===this.tagName&&"type"===t?this.type:"string"!=typeof i?null:i},Ws.prototype.removeAttributeNS=function(e,t){var n=this._attributes[e];n&&delete n[t]},Ws.prototype.hasAttributeNS=function(e,t){var n=this._attributes[e];return!!n&&t in n},Ws.prototype.setAttribute=function(e,t){return this.setAttributeNS(null,e,t)},Ws.prototype.getAttribute=function(e){return this.getAttributeNS(null,e)},Ws.prototype.removeAttribute=function(e){return this.removeAttributeNS(null,e)},Ws.prototype.hasAttribute=function(e){return this.hasAttributeNS(null,e)},Ws.prototype.removeEventListener=Ns,Ws.prototype.addEventListener=Ms,Ws.prototype.dispatchEvent=Os,Ws.prototype.focus=function(){},Ws.prototype.toString=function(){return Bs(this)},Ws.prototype.getElementsByClassName=function(e){var t=e.split(" "),n=[];return Ds(this,(function(e){if(1===e.nodeType){var i=(e.className||"").split(" ");t.every((function(e){return-1!==i.indexOf(e)}))&&n.push(e)}})),n},Ws.prototype.getElementsByTagName=function(e){e=e.toLowerCase();var t=[];return Ds(this.childNodes,(function(n){1!==n.nodeType||"*"!==e&&n.tagName.toLowerCase()!==e||t.push(n)})),t},Ws.prototype.contains=function(e){return Ds(this,(function(t){return e===t}))||!1};var zs=Ys;function Ys(e){if(!(this instanceof Ys))return new Ys;this.childNodes=[],this.parentNode=null,this.ownerDocument=e||null}Ys.prototype.type="DocumentFragment",Ys.prototype.nodeType=11,Ys.prototype.nodeName="#document-fragment",Ys.prototype.appendChild=Gs.prototype.appendChild,Ys.prototype.replaceChild=Gs.prototype.replaceChild,Ys.prototype.removeChild=Gs.prototype.removeChild,Ys.prototype.toString=function(){return this.childNodes.map((function(e){return String(e)})).join("")};var qs=$s;function $s(e){}$s.prototype.initEvent=function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},$s.prototype.preventDefault=function(){};var Xs=Qs;function Qs(){if(!(this instanceof Qs))return new Qs;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var Zs=Qs.prototype;Zs.createTextNode=function(e){return new Ls(e,this)},Zs.createElementNS=function(e,t){var n=null===e?null:String(e);return new Gs(t,this,n)},Zs.createElement=function(e){return new Gs(e,this)},Zs.createDocumentFragment=function(){return new zs(this)},Zs.createEvent=function(e){return new qs},Zs.createComment=function(e){return new Rs(e,this)},Zs.getElementById=function(e){return e=String(e),Ds(this.childNodes,(function(t){if(String(t.id)===e)return t}))||null},Zs.getElementsByClassName=Gs.prototype.getElementsByClassName,Zs.getElementsByTagName=Gs.prototype.getElementsByTagName,Zs.contains=Gs.prototype.contains,Zs.removeEventListener=Ns,Zs.addEventListener=Ms,Zs.dispatchEvent=Os;var Js,el=new Xs,tl=void 0!==jr?jr:"undefined"!=typeof window?window:{};"undefined"!=typeof document?Js=document:(Js=tl["__GLOBAL_DOCUMENT_CACHE@4"])||(Js=tl["__GLOBAL_DOCUMENT_CACHE@4"]=el);var nl=Js;var il=function(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null},rl=nl.createElement&&nl.createElement("textarea"),al={rt:"ruby"},ol={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},sl={v:"title",lang:"lang"},ll={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"};var ul=function(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e,t){return!al[t.localName]||al[t.localName]===e.localName}function r(t,n){var i=ol[t];if(!i)return null;var r=e.document.createElement(i),a=sl[t];return a&&n&&(r[a]=n.trim()),r}for(var a,o,s=e.document.createElement("div"),l=s,u=[];null!==(a=n());)if("<"!==a[0])l.appendChild(e.document.createTextNode((o=a,rl.innerHTML=o,o=rl.textContent,rl.textContent="",o)));else{if("/"===a[1]){u.length&&u[u.length-1]===a.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var c,d=il(a.substr(1,a.length-2));if(d){c=e.document.createProcessingInstruction("timestamp",d),l.appendChild(c);continue}var h=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(c=r(h[1],h[3])))continue;if(!i(l,c))continue;if(h[2]){var p=h[2].split(".");p.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(Object.prototype.hasOwnProperty.call(ll,n)){var i=t?"background-color":"color",r=ll[n];c.style[i]=r}})),c.className=p.join(" ")}u.push(h[1]),l.appendChild(c),l=c}return s},cl=function(e,t){return e&&t?ul(e,t):null};function dl(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}dl.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},dl.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},dl.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},dl.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},dl.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},dl.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},dl.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},dl.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}};var hl=dl;function pl(){}pl.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)Object.prototype.hasOwnProperty.call(e,n)&&(t.style[n]=e[n])},pl.prototype.formatStyle=function(e,t){return 0===e?0:e+t};var fl=pl,gl=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];var ml=function(e){for(var t=0;t<gl.length;t++){var n=gl[t];if(e>=n[0]&&e<=n[1])return!0}return!1};var vl=function(e){var t,n=[],i="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function a(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var i=n.match(/^.*(\n|\r)/);return i?(e.length=0,i[0]):n}return"ruby"===t.tagName?a(e):t.childNodes?(r(e,t),a(e)):void 0}for(r(n,e);i=a(n);)for(var o=0;o<i.length;o++)if(t=i.charCodeAt(o),ml(t))return"rtl";return"ltr"};function yl(e,t,n){fl.call(this),this.cue=t,this.cueDiv=ul(e,t.text);var i={color:n.color||"rgba(255, 255, 255, 1)",backgroundColor:n.backgroundColor||"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:n.display||"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",padding:n.padding,borderRadius:n.borderRadius};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:vl(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}yl.prototype=Object.create(fl.prototype),yl.prototype.constructor=yl;var bl=yl;var El=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i};var Tl=function(e,t,n,i){var r=new hl(t),a=t.cue,o=El(a),s=[];if(a.snapToLines){var l;switch(a.vertical){case"":s=["+y","-y"],l="height";break;case"rl":s=["+x","-x"],l="width";break;case"lr":s=["-x","+x"],l="width"}var u=r.lineHeight,c=u*Math.round(o),d=n[l]+u,h=s[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/u)*u),o<0&&(c+=""===a.vertical?n.height:n.width,s=s.reverse()),r.move(h,c)}else{var p=r.lineHeight/n.height*100;switch(a.lineAlign){case"center":o-=p/2;break;case"end":o-=p}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],r=new hl(t)}var f=function(e,t){for(var r,a=new hl(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(n))return e;var l=e.intersectPercentage(n);o>l&&(r=new hl(e),o=l),e=new hl(a)}return r||a}(r,s);t.move(f.toCSSCompatValues(n))},Al=function(e,t,n,i){if(!e||!t||!n)return null;for(i=i||{};n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var a=[],o=hl.getSimpleBoxPosition(r),s=i.fontSize||Math.round(.05*o.height*100)/100,l=i.fontFamily||"sans-serif",u=Object.assign({font:s+"px "+l},i,u);!function(){for(var n,i,s=0;s<t.length;s++)i=t[s],n=new bl(e,i,u),r.appendChild(n.div),Tl(e,n,o,a),i.displayState=n.div,a.push(hl.getSimpleBoxPosition(n))}()}else for(var c=0;c<t.length;c++)r.appendChild(t[c].displayState)};function kl(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}kl.prototype=Object.create(Error.prototype),kl.prototype.constructor=kl,kl.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};var _l=kl;function Sl(){this.values=Object.create(null)}Sl.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var wl=Sl;var Cl=function(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);if(2===o.length)t(o[0],o[1])}};var Il=function(e,t,n){var i=e;function r(){var t=il(e);if(null===t)throw new _l(_l.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function a(){e=e.replace(/^\s+/,"")}if(a(),t.startTime=r(),a(),"--\x3e"!==e.substr(0,3))throw new _l(_l.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),a(),t.endTime=r(),a(),function(e,t){var i=new wl;Cl(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line",-1)}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position",-1)}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)},Dl=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new e.TextDecoder("utf8"),this.regionList=[]};Dl.prototype.reportOrThrowError=function(e){if(!(e instanceof _l))throw e;this.onparsingerror&&this.onparsingerror(e)},Dl.prototype.parse=function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var i=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),i}function i(e){e.match(/X-TIMESTAMP-MAP/)?Cl(e,(function(e,n){if("X-TIMESTAMP-MAP"===e)!function(e){var n=new wl;Cl(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",il(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}),/=/):Cl(e,(function(e,n){if("Region"===e)!function(e){var n=new wl;if(Cl(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var i=t.split(",");if(2!==i.length)break;var r=new wl;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var i=new(t.vttjs.VTTRegion||t.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),t.onregion&&t.onregion(i),t.regionList.push({id:n.get("id"),region:i})}}(n)}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new _l(_l.Errors.BadSignature);t.state="HEADER"}for(var o=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(o?o=!1:r=n(),t.state){case"HEADER":/:/.test(r)?i(r):r||(t.state="ID");continue;case"NOTE":r||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){t.state="NOTE";break}if(!r)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch(e){t.cue.align="middle"}if(t.state="CUE",-1===r.indexOf("--\x3e")){t.cue.id=r;continue}case"CUE":try{Il(r,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(o=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},Dl.prototype.flush=function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new _l(_l.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this};var Rl=Dl;function xl(e){return e.default||e}function Ll(){}Ll.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},Ll.convertCueToDOMTree=xl(cl),Ll.processCues=xl(Al),Ll.Parser=xl(Rl);var Pl=Ll;var Ol,Ml=(Ol=cl).default||Ol,Nl={"":1,lr:1,rl:1},Bl={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function Ul(e){return"string"==typeof e&&(!!Bl[e.toLowerCase()]&&e.toLowerCase())}function Fl(e,t,n){this.hasBeenReset=!1;var i="",r=!1,a=e,o=t,s=n,l=null,u="",c=!0,d="auto",h="start",p="auto",f="auto",g=100,m="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(e){i=""+e}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(e){r=!!e}},startTime:{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");a=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");o=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(e){s=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(e){l=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&!!Nl[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===t)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(e){c=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");d=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return h},set:function(e){var t=Ul(e);t?(h=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return p},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");p=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=Ul(e);t?(f=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");g=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return m},set:function(e){var t=Ul(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");m=t,this.hasBeenReset=!0}}}),this.displayState=void 0}Fl.prototype.getCueAsHTML=function(){return Ml(window,this.text)};var Vl=Fl,Hl={"":!0,up:!0};function jl(e){return"number"==typeof e&&e>=0&&e<=100}var Kl=function(){var e=100,t=3,n=0,i=100,r=0,a=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!jl(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(e){if(!jl(e))throw new Error("RegionAnchorX must be between 0 and 100.");i=e}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!jl(e))throw new Error("RegionAnchorY must be between 0 and 100.");n=e}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!jl(e))throw new Error("ViewportAnchorY must be between 0 and 100.");a=e}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!jl(e))throw new Error("ViewportAnchorX must be between 0 and 100.");r=e}},scroll:{enumerable:!0,get:function(){return o},set:function(e){var t=function(e){return"string"==typeof e&&!!Hl[e.toLowerCase()]&&e.toLowerCase()}(e);!1===t?console.warn("Scroll: an invalid or illegal string was specified."):o=t}}})},Gl=Gr((function(e){var t=e.exports={WebVTT:Pl,VTTCue:Vl,VTTRegion:Kl};Cs.vttjs=t,Cs.WebVTT=t.WebVTT;var n=t.VTTCue,i=t.VTTRegion,r=Cs.VTTCue,a=Cs.VTTRegion;t.shim=function(){Cs.VTTCue=n,Cs.VTTRegion=i},t.restore=function(){Cs.VTTCue=r,Cs.VTTRegion=a},Cs.VTTCue||t.shim()})),Wl=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this)).subtitleItems=i.parseVttFile(e),i}return o(n,[{key:"init",value:function(){return{parser:new Gl.WebVTT.Parser(window,Gl.WebVTT.StringDecoder()),cues:[]}}},{key:"bindEvents",value:function(e,t){e.onparsingerror=function(e){_e.error(this.name,"\n Error when trying to parse WebVTT file: ".concat(e))},e.oncue=function(e){t.push(e)}}},{key:"parseVttFile",value:function(e){if(e){var t=this.init(),n=t.parser,i=t.cues;return this.bindEvents(n,i),n.parse(e),n.flush(),i}}},{key:"getActiveCue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subtitleItems,n=v(t),i=n.length,r=0,a=i-1,o=Math.floor((i-1)/2),s=n[o],l=n.splice(0,o+1),u=n;if(!(r>a)&&s.startTime)return e>=s.startTime&&e<=s.endTime?[s]:i<=1?[]:e<=s.startTime?this.getActiveCue(e,l):e>s.startTime?this.getActiveCue(e,u):void 0}},{key:"processActiveCue",value:function(e,t,n){Gl.WebVTT.processCues(window,e,t,n)}}]),n}(xe),zl={fontFamily:"clearsans-bold",padding:"0.2em",borderRadius:"0.2em",display:"inline-block"},Yl=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).render(),n.createCachedElements(),n.idPlayback=n.container.playback,n.enableWebVtt=!!n.options.shouldDeviceUseWebVTT,n}return o(i,[{key:"attributes",get:function(){return{class:"subtitle__wrapper","data-subtitle":""}}},{key:"name",get:function(){return"subtitle"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Ve('<p class="subtitle"></p>\n')}},{key:"tagVideo",get:function(){return this.idPlayback.videoEl}},{key:"subtitleTrackAutoHandled",get:function(){return Q.isiOS||Q.isSafari&&"hls_fairplay_playback"===this.idPlayback.innerPlaybackName}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,De.CONTAINER_TIMEUPDATE,this.updateSubtitle),this.listenTo(this.container,Tn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Tn.WM_SUBTITLE_AVAILABLE,this.onSubtitleAvailable),this.listenTo(this.container,De.CONTAINER_MEDIACONTROL_SHOW,(function(){return e.onMediaControlShow()})),this.listenTo(this.container,De.CONTAINER_MEDIACONTROL_HIDE,(function(){return e.onMediaControlHide()})),this.listenTo(this.container,Tn.WM_MASTERTOPIP,(function(){return e.$el.hide()})),this.listenTo(this.container,Tn.WM_PIPTOMASTER,(function(){return e.$el.show()})),this.listenTo(this.container,De.CONTAINER_RESIZE,this.onPlayerResize),this.listenToOnce(this.container,De.CONTAINER_PLAY,this.onPlay),this.listenToOnce(this.container.playback,Tn.WM_PLAYBACK_CAN_PLAY,this.onCanPlay)}},{key:"onPlay",value:function(){this.createCachedElements(),this.updateCurrentSize(),this.updateResponsiveStyle()}},{key:"updateCurrentSize",value:function(){this.currentWidth=this.container.el.clientWidth,this.currentHeight=this.container.el.clientHeight}},{key:"onSubtitleAvailable",value:function(e,t){this.availableSubtitles=e,this.enableWebVtt=e.some((function(e){return"webvtt"===e.type})),this.generateSubtitleParser(t),this.updateStyle(),this.setInitialSubtitle()}},{key:"generateSubtitleParser",value:function(e){var t=this;this.availableContents=e.map((function(e){return e&&(t.enableWebVtt?new Wl(e):new ws(e))}))}},{key:"onMediaControlShow",value:function(){this.$subtitle.removeClass("subtitle--opacity-media-control-hide").addClass("subtitle--opacity-media-control-show")}},{key:"onMediaControlHide",value:function(){this.$subtitle.removeClass("subtitle--opacity-media-control-show").addClass("subtitle--opacity-media-control-hide")}},{key:"onPlayerResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&"number"==typeof e.width&&(this.currentWidth=e.width,this.currentHeight=e.height,this.updateResponsiveStyle())}},{key:"updateResponsiveStyle",value:function(){this.updateSize(),this.updateStyle()}},{key:"setInitialSubtitle",value:function(){var e=this,t=this.availableSubtitles.find((function(e){return e.selected}));this.subtitleTrackAutoHandled?setTimeout((function(){return e.onSubtitleChanged(t)})):this.onSubtitleChanged(t)}},{key:"onSubtitleChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.subtitleTrackAutoHandled)this.changeTextTrack(e);else{var t=this.availableContents[e.id];t?(this.subtitleParser=t,this.currentIndex=0,this.$el.show(),this.$subtitle.addClass("subtitle--hidden")):(delete this.subtitleParser,delete this.currentIndex,this.$subtitle.html(""),this.$el.hide())}}},{key:"changeTextTrack",value:function(e){var t=this.tagVideo.textTracks;Object.values(t).forEach((function(e){return e.mode="hidden"}));var n=Object.values(t).find((function(t){return e.keys.includes(t.language)}));n&&(n.mode="showing")}},{key:"updateSize",value:function(){bn.applySizeClass(this.$el,this.container.$el.width())}},{key:"updateStyle",value:function(){this.enableWebVtt&&this.processVttActiveCue(),this.updateFontSize(),this.updateVerticalPosition()}},{key:"updateFontSize",value:function(){this.$subtitle.css({fontSize:this.getFontSize()})}},{key:"updateVerticalPosition",value:function(){this.enableWebVtt?this.$el.css({bottom:"auto"}):this.$el.css({bottom:this.getVerticalPosition()})}},{key:"updateSubtitle",value:function(e){this.subtitleParser&&(this.enableWebVtt?this.updateWebVTTSubtitleContent(e.current):this.updateSrtSubtitleContent(1e3*e.current))}},{key:"updateWebVTTSubtitleContent",value:function(e){this.subtitleParser.subtitleItems&&(this.activeSubtitle=this.subtitleParser.getActiveCue(e),this.activeSubtitle&&!!this.activeSubtitle.length?(this.$el.addClass("subtitle__wrapper--override-webvtt"),this.$subtitle.removeClass("subtitle--hidden"),this.processVttActiveCue()):this.$subtitle.addClass("subtitle--hidden"))}},{key:"processVttActiveCue",value:function(){this.resetVttCueStyle(),this.subtitleParser&&this.subtitleParser.processActiveCue(this.activeSubtitle,this.$subtitle[0],this.getVttStyles())}},{key:"resetVttCueStyle",value:function(){this.activeSubtitle&&this.activeSubtitle[0]&&(this.activeSubtitle[0].hasBeenReset=this.activeSubtitle[0].playerWidth!==this.currentWidth,this.activeSubtitle[0].playerWidth=this.currentWidth)}},{key:"getVttStyles",value:function(){return n({fontSize:this.getFontSize()},zl)}},{key:"updateSrtSubtitleContent",value:function(e){var t=this.subtitleParser.getSubtitleAt(this.currentIndex),n=this.subtitleParser.isCurrentSubtitle(t,e);if(!n){var i=this.currentIndex+1,r=this.subtitleParser.getSubtitleAt(i);if(n=this.subtitleParser.isCurrentSubtitle(r,e))this.currentIndex=i,t=r;else if(r&&(e>r.end||e<t.start)){var a=this.subtitleParser.getSubtitleBy(e);t=a&&a.subtitle,a&&(this.currentIndex=a.index),n=!!a}}t&&this.$subtitle.html()!=t.content&&this.$subtitle.html(t.content),n?this.$subtitle.removeClass("subtitle--hidden"):this.$subtitle.addClass("subtitle--hidden")}},{key:"getMediaControlLowerHeight",value:function(){return this.$mediaControlPanelLower&&this.$mediaControlPanelLower.getBoundingClientRect().height||80}},{key:"getVerticalPosition",value:function(){return this.currentHeight/12}},{key:"getFontSize",value:function(){return this.currentWidth<560?14:2.5*this.currentWidth/100}},{key:"createCachedElements",value:function(){this.$subtitle=this.$el.find(".subtitle");var e=".clappr-player#wp3-player-".concat(this.options.playerId," .media-control-panel__lower");this.$mediaControlPanelLower=document.querySelector(e)}},{key:"render",value:function(){var e=En.getStyleFrom('.clappr-player#wp3-player-0 .subtitle {\n  background-color: rgba(0, 0, 0, 0.7);\n  position: relative;\n  font-family: "clearsans-bold", sans-serif;\n  font-size: 14px;\n  color: #f1f1f1;\n  line-height: 1.4;\n  margin: auto;\n  display: inline-block;\n  pointer-events: none; }\n  .clappr-player#wp3-player-0 .subtitle--hidden {\n    visibility: hidden;\n    opacity: 0; }\n  .clappr-player#wp3-player-0 .subtitle--opacity-media-control-show, .clappr-player#wp3-player-0 .subtitle--opacity-media-control-hide {\n    -webkit-transition: opacity 0.3s ease-in-out;\n    -moz-transition: opacity 0.3s ease-in-out;\n    -ms-transition: opacity 0.3s ease-in-out;\n    -o-transition: opacity 0.3s ease-in-out;\n    transition: opacity 0.3s ease-in-out; }\n  .clappr-player#wp3-player-0 .subtitle--opacity-media-control-show {\n    opacity: 0.5; }\n  .clappr-player#wp3-player-0 .subtitle--opacity-media-control-hide {\n    opacity: 1; }\n  .clappr-player#wp3-player-0 .subtitle__wrapper {\n    display: flex;\n    bottom: 0;\n    position: absolute;\n    width: 100%;\n    z-index: 993;\n    will-change: transform;\n    transition: transform 0.3s ease-out; }\n    .clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt {\n      /* This section is responsible for override wrapper styles for WebVTT resources */\n      bottom: auto;\n      height: 100%; }\n      .clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt .subtitle {\n        background-color: transparent;\n        /* The WebVTT parser lib calculates based on the screen size where to put\n            the subtitles. This leaves 10/12 portion so it wont be placed on the screen limit */\n        height: 98%;\n        width: 98%; }\n        .clappr-player#wp3-player-0 .subtitle__wrapper--override-webvtt .subtitle i {\n          font-family: "clearsans-bolditalic"; }\n\n.clappr-player#wp3-player-0 .cast-enabled .subtitle__wrapper, .clappr-player#wp3-player-0 .cast-connecting .subtitle__wrapper {\n  display: none; }\n',{playerId:this.options.playerId});return this.$el.html(this.template()),this.$el.append(e[0]),this.$el.hide(),this.container.$el.append(this.el),this}}]),i}(lt),ql=function(){function e(){r(this,e),this.youboraTimersStopped=!1,this.metrics={},this.youboraTimers={},this.initYouboraTimers()}return o(e,[{key:"YOUBORA_SERVICES",get:function(){return["init","adInit","adStart","adJoinTime","adStop","joinTime"]}},{key:"initYouboraTimers",value:function(){var e=this;this.YOUBORA_SERVICES.forEach((function(t){return e.youboraTimers[t]=0}))}},{key:"delta",value:function(e,t){var n=this.youboraTimers[e]-this.youboraTimers[t];return n>0?n:0}},{key:"onTimemark",value:function(e){var t=e.time,n=e.service,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="init"!==n&&this.youboraTimersStopped;-1===this.YOUBORA_SERVICES.indexOf(n)||r||(this.youboraTimers[n]=t,this.setAdMetrics(),this.setDFPMetrics(),this.setContentMetrics(),this.willSendParams(n)&&(this.setParams(i),this.initYouboraTimers()))}},{key:"setAdMetrics",value:function(){this.metrics.adInitTime=this.delta("adInit","init"),this.metrics.adStartTime=this.delta("adStart","adInit"),this.metrics.adJoinTime=this.delta("adJoinTime","adStart")}},{key:"setDFPMetrics",value:function(){this.metrics.dfpSetupTime=this.metrics.adStartTime+this.metrics.adJoinTime,this.metrics.dfpRunTime=this.delta("adStop","adInit"),this.metrics.dfpTime=this.metrics.dfpSetupTime?this.metrics.dfpSetupTime:this.metrics.dfpRunTime;var e=this.youboraTimers.adStop&&this.youboraTimers.adJoinTime;this.metrics.dfpWatchedTime=e?this.youboraTimers.adStop-this.youboraTimers.adJoinTime:0}},{key:"setContentMetrics",value:function(){this.metrics.contentStartTime=this.youboraTimers.adStop?this.delta("joinTime","adStop"):0,this.metrics.joinTime=this.delta("joinTime","init")-this.metrics.dfpWatchedTime}},{key:"willSendParams",value:function(e){var t="joinTime"===e;return this.youboraTimersStopped=t,t}},{key:"setParams",value:function(e){e.youboraMetrics=this.metrics}}]),e}(),$l=gi.Video,Xl=bn.getExperimentsList,Ql=bn.API_VERSION,Zl=bn.getPlatformName,Jl=bn.toQueryString,eu=bn.secondsToMillis,tu=bn.getCookie,nu=bn.session,iu=bn.User,ru=bn.autoplayManager,au=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).initValues(),n.video={},n.setVideoSessionID(),n.browser="".concat(Q.name).concat(Q.version),n.playerId=Pt.playerId,n.url="".concat(n.horizonHost,"/auth-session/activity/webmedia/watch"),n.domain=n.options.domain||window.location.hostname.replace("www.","").split(".")[0],n.experiments=Xl(n.options),ru.onAutoplayAvailable(n.onAutoplaySuccess.bind(d(n)),n.options,n.onAutoplayFailed.bind(d(n))),n.youboraTimemark=new ql,n.externalData={},n.onDFPInit(),n}return o(i,[{key:"name",get:function(){return"horizon"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"isAd",get:function(){return"ad"===this.container.getPlaybackType()}},{key:"isLive",get:function(){return"live"===this.video.kind||"live"===this.container.getPlaybackType()}},{key:"isAdsDisabled",get:function(){return this.options.skipDFP||!1}},{key:"currentTime",get:function(){return this.currentTimeValue},set:function(e){this.currentTimeValue=e}},{key:"horizonHost",get:function(){return"".concat(this.options.env.protocol,"://horizon.globo.com")}},{key:"tenant",get:function(){var e=this.options.horizon;return(void 0===e?{}:e).tenant||"unknown"}},{key:"referrer",get:function(){var e=this.options.horizon,t=void 0===e?{}:e;return null==t?void 0:t.referrer}},{key:"isEncrypted",get:function(){var e=this.video&&this.video.encrypted;return void 0!==e?e:"unknown"}},{key:"playbackName",get:function(){var e=this.container,t=e&&e.playback;return t?t.innerPlaybackName||t.name||"":null}},{key:"bufferingTime",get:function(){this.isBuffering&&(this.bufftime+=ye.now()-this.buffstarttime,this.buffstarttime=ye.now());var e=this.bufftime;return this.bufftime=0,Math.trunc(e)}},{key:"shouldIgnoreVolumeUpdate",value:function(e,t){var n=!this.isReady&&!this.container.playback.isPlaying();return null===e||n||!t}},{key:"setYouboraParams",value:function(e){var t=this.externalData&&this.externalData.youboraMetrics||{};Object.keys(t).forEach((function(n){e[n]=t[n]}))}},{key:"setVideoSessionID",value:function(){this.params.video_session_id=nu.getVideoSessionId(this.options.playerId)}},{key:"setDeviceInfo",value:function(){var e=this;Object.keys(this.options.deviceInfo).forEach((function(t){e.params["device_".concat(t)]=e.options.deviceInfo[t]}))}},{key:"getPercentage",value:function(e){return 0===e?e:e/this.session.duration*100}},{key:"initValues",value:function(){this.params={},this.dfpInit=0,this.bufftime=0,this.playRequestTime=0,this.isBuffering=!1,this.hasStartedClip=!1,this.isPlaying=!1}},{key:"bindEvents",value:function(){this.listenToOnce(this.container,De.CONTAINER_PLAY,this.onFirstPlaying),this.listenToOnce(this.container.playback,Tn.WM_PLAY_REQUESTED_READY,this.onPlayRequested),this.listenTo(this.container,De.CONTAINER_PLAY,this.play),this.listenTo(this.container,De.CONTAINER_PAUSE,this.pause),this.listenTo(this.container,De.CONTAINER_SEEK,this.seek),this.listenTo(this.container,De.CONTAINER_TIMEUPDATE,this.timeUpdate),this.listenTo(this.container,De.CONTAINER_ENDED,this.end),this.listenTo(this.container,De.CONTAINER_DESTROYED,this.end),this.listenTo(this.container,De.CONTAINER_STOP,this.end),this.listenTo(this.container,De.CONTAINER_STATS_REPORT,this.onOldStatsReport),this.listenTo(this.container,De.CONTAINER_ERROR,this.onError),this.listenTo(this.container,Tn.WM_STATS_REPORTED,this.onStatsReport),this.listenTo(this.container,Tn.WM_MUTED,this.onVolumeMuted),this.listenTo(this.container,Tn.WM_UNMUTED,this.onVolumeUnmuted),this.listenTo(this.container,Tn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Tn.WM_LOCATION_AVAILABLE,this.onLocationAvailable),this.listenTo(this.container,Tn.DFP_AD_ERROR,this.onAdError),this.listenTo(this.container,Tn.DFP_AD_NOTSERVED,this.onAdNotServed),this.listenTo(this.container,Tn.WM_BITRATE_CAP,this.onBitrateCap),this.listenTo(this.container,Tn.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,Tn.WM_GA_UNTRACKED_EVENT,this.onGoogleAnalyticsEventUntracked),this.listenTo(this.container.playback,Tn.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenTo(this.container.playback,Tn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,Tn.WILL_SELECT_FALLBACK_SOURCE,this.onFallbackSource),this.listenTo(this.container.playback,Tn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.container.playback,Tn.WILL_RENEW_RESOURCE,this.onRenewResource),this.listenTo(this.container.playback,Tn.WM_WROOM_WAITING,this.onWRWaiting),this.listenToOnce(this.container,De.Custom.DAI_ERROR,this.onDaiError),this.listenToOnce(this.container,Tn.WM_RESOURCE_REQUEST_STATS,this.onResourceRequestStats)}},{key:"onPlayRequested",value:function(){this.playRequestTime=ye.now(),this.isReady=!0}},{key:"onMetadataLoaded",value:function(e){e&&(this.video=e,this.params.playback_id=e.id,this.params.subscriber_only=e.isSubscriberOnly,this.params.title=e.title,this.params.program=e.program,this.params.channel=e.channel,this.params.kind=e.kind,this.setExperimentsParams())}},{key:"setExperimentsParams",value:function(){this.experiments.length>0&&this.experiments[0]&&(this.params.experiment_1=this.experiments[0]),this.experiments.length>1&&this.experiments[1]&&(this.params.experiment_2=this.experiments[1])}},{key:"onStreamingDataLoaded",value:function(e){var t=e.pop,n=e.host;this.params.host=n,this.params.pop=t}},{key:"onFallbackSource",value:function(e){this.notifyAction(eu(this.currentTime),"will_fallback_source",e)}},{key:"onFallbackSourceSelected",value:function(e){this.notifyAction(eu(this.currentTime),"fallback_source_selected",e)}},{key:"onRenewResource",value:function(e){this.notifyAction(eu(this.currentTime),"willRenewResource",e)}},{key:"onDaiError",value:function(e){if(e.notifiable){var t=e.errorCode,n=e.errorMessage;this.notifyAction(eu(this.currentTime),"dai_error",{daiErrorCode:t,daiErrorMessage:n})}}},{key:"onBitrateCap",value:function(e){this.params.cap_bitrate=e}},{key:"onDFPInit",value:function(){this.dfpInit=ye.now()}},{key:"onAdNotServed",value:function(){this.params.dfp_status="not served"}},{key:"onAdError",value:function(){this.params.dfp_status="error"}},{key:"onOldStatsReport",value:function(e){this.isLive&&(this.params.dvr=e.dvr?1:0)}},{key:"onStatsReport",value:function(e){e.extra.bitratesHistory.length>0&&(this.params.nominal_bitrate=e.extra.bitratesHistory[e.extra.bitratesHistory.length-1].bitrate),this.params.avg_bitrate=Math.trunc(e.extra.bitrateWeightedMean),this.params.session_time=Math.trunc(e.timers.session),this.params.watch_time=Math.trunc(e.timers.watch)}},{key:"onFirstPlaying",value:function(){if(this.listenToOnce(this.container,De.CONTAINER_STATE_BUFFERING,this.buffering),this.isAd&&!this.dfp_startup_time)return this.params.dfp_status="delivered",void(this.params.dfp_startup_time=Math.trunc(ye.now()-this.dfpInit));this.params.startup_time=Math.trunc(ye.now()-this.playRequestTime)}},{key:"onVolumeMuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(eu(this.currentTime),{mute_status:!0})}},{key:"onVolumeUnmuted",value:function(e,t){this.shouldIgnoreVolumeUpdate(e,t)||this.hasStartedClip&&this.notify(eu(this.currentTime),{mute_status:!1})}},{key:"onSubtitleChanged",value:function(e){this.hasStartedClip&&this.notify(eu(this.currentTime),{subtitle_status:"none"===e.language?"disabled":"enabled",subtitle_language:e.language})}},{key:"onLocationAvailable",value:function(e){this.params.lat=e.latitude,this.params.long=e.longitude}},{key:"onCurrentProgramUpdated",value:function(e){void 0!==e.program&&(this.params.program=e.program),void 0!==e.channel&&(this.params.channel=e.channel)}},{key:"onGoogleAnalyticsEventUntracked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;this.params.ga_untracked_event=n}},{key:"onWRWaiting",value:function(){this.params.wroom=1,this.isLive?this.ping():this.sendRequest("".concat(this.url,"?").concat(Jl(this.params)))}},{key:"onAutoplaySuccess",value:function(){this.params.autoPlayAvailable=!0}},{key:"onAutoplayFailed",value:function(){this.params.autoPlayAvailable=!1}},{key:"updateAuthorizedWRState",value:function(){this.params.wroom=0,this.ping()}},{key:"onResourceRequestStats",value:function(e){var t=e.retries,n=e.usedFallback;this.retryHistory=JSON.stringify({attempts:t,fallback:n})}},{key:"onResourceReady",value:function(){this.updateAuthorizedWRState(),!this.session&&this.startSession(),this.retryHistory&&this.notifyRequestStats(this.retryHistory)}},{key:"play",value:function(){var e=this;this.isAd||(this.notifyPlayOrSeek(eu(this.currentTime)),this.isPlaying||(this.breakTimerId=setInterval((function(){e.isPlaying=!0,e.notifyRelevantPoint(eu(e.currentTime))}),15e3),this.ping()),this.doingSeek=!1,this.paused=!1)}},{key:"pause",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.userInvoked,r=void 0!==i&&i;this.pauseTimerId=setTimeout((function(){t.notifyAction(eu(t.currentTime),"pause",{user_invoked:r})}),100)}},{key:"seek",value:function(){this.pauseTimerId&&(clearTimeout(this.pauseTimerId),this.pauseTimerId=null),this.doingSeek=!0}},{key:"timeUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.currentTime=e.current}},{key:"onBufferStart",value:function(){this.isBuffering=!0,this.buffstarttime=ye.now()}},{key:"onBufferEnd",value:function(){this.isBuffering=!1,this.bufftime+=ye.now()-this.buffstarttime}},{key:"buffering",value:function(){this.onBufferStart(),this.listenToOnce(this.container,De.CONTAINER_STATE_BUFFERFULL,this.bufferfull)}},{key:"bufferfull",value:function(){this.onBufferEnd(),this.listenToOnce(this.container,De.CONTAINER_STATE_BUFFERING,this.buffering)}},{key:"end",value:function(){this.notifyAction(eu(this.currentTime),"stop"),this.cancelBreakTimer(),this.cancelPing(),this.initValues()}},{key:"clear",value:function(){this.params.dfp_startup_time=null,this.params.dfp_status=null}},{key:"cancelBreakTimer",value:function(){clearInterval(this.breakTimerId),clearInterval(this.playOrSeekTimerId),this.breakTimerId=null,this.isPlaying=!1}},{key:"cancelPing",value:function(){this.isLive&&(clearInterval(this.pingTimerId),this.pingTimerId=null)}},{key:"startSession",value:function(){var e=(new Date).getTime().toString();this.lastNotifiedPoint=-1,this.totalActions=0,this.isLive&&(this.params.signal=this.video.selectedResource.signal,this.params.started_at=e),this.video.providerId&&(this.params.gst=tu("GST")),this.session={duration:this.video.duration,started_at:e,play:0,seek:0,pause:0,stop:0,mute:0,unmute:0,subtitle_enable:0,subtitle_disable:0,will_fallback_source:0,fallback_source_selected:0,willRenewResource:0,dai_error:0,retry_history:0},this.doingSeek=!1,this.hasStartedClip=!0}},{key:"notifyRelevantPoint",value:function(e){if(this.hasStartedClip){var t=this.getPercentage(e),n=5*Math.floor(t/5);n>this.lastNotifiedPoint?(this.notify(e),this.lastNotifiedPoint=n):this.verbose&&_e.info(this.name,"do not notify: ".concat(n," !> ").concat(this.lastNotifiedPoint))}}},{key:"notifyPlayOrSeek",value:function(e){var t=this,n=this.doingSeek;this.playOrSeekTimerId=setTimeout((function(){n?t.notifyAction(e,"seek"):t.notifyAction(e,"play")}),100)}},{key:"notifyRequestStats",value:function(e){this.notifyAction(eu(this.currentTime),"retry_history",{retryHistory:e})}},{key:"notifyAction",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.hasStartedClip){var i=++this.session[t];n["".concat(t,"_total")]=i,n["".concat(t,"_id_").concat(i)]=e,this.notify(e,n)}}},{key:"notify",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.hasStartedClip){this.setCommonParams();var i=++this.totalActions,r=n(n(n({},t),this.params),{},s({duration:this.session.duration,started_at:this.session.started_at,last_at:(new Date).getTime().toString(),btime:this.bufferingTime},"time_".concat(i),e));1===i&&this.setYouboraParams(r),this.sendRequest("".concat(this.url,"?").concat(Jl(r))),this.clear()}}},{key:"onError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.isLive?"watchlive":"watch";this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/").concat(t),this.params.started_at=(new Date).getTime().toString(),this.params.error=e.code||"unknown",this.params.errorDescription=e.description||"unknown",this.params.retryHistory=this.retryHistory,this.setCommonParams(),this.setExperimentsParams(),this.sendRequest("".concat(this.url,"?").concat(Jl(this.params)))}},{key:"ping",value:function(){var e=this;this.isLive&&(this.url="".concat(this.horizonHost,"/auth-session/activity/webmedia/watchlive"),this.params.dvr=this.params.dvr||0,this.setCommonParams(),this.pingTimerId||(this.sendPing(),this.pingTimerId=setInterval((function(){e.sendPing()}),6e4)))}},{key:"sendPing",value:function(){this.params.btime=this.bufferingTime,this.params.n=++this.totalActions;var e=Object.assign({},this.params);1===this.totalActions&&this.setYouboraParams(e),this.sendRequest("".concat(this.url,"?").concat(Jl(e)))}},{key:"sendRequest",value:function(e){return Q.isSmartTvEnvironment?this.sendRequestWithHeaders(e):this.sendRequestAsJsonP(e)}},{key:"sendRequestAsJsonP",value:function(e){var t=new Image;return t.src=e,t}},{key:"sendRequestWithHeaders",value:function(e){var t=this;Y.ajax({url:e,xhrFields:{withCredentials:!0},headers:s({},this.options.token?"GLBID":"GLBUID",this.options.token||iu.uid),error:function(e,n,i){return _e.warn(t.name,"could not send request: ".concat(i))}})}},{key:"setCommonParams",value:function(){var e,t=(null===(e=this.video)||void 0===e?void 0:e.id)||this.options.src||this.options.sources,n=this.video&&this.video.playerType||$l.getPlayerType();this.setVideoSessionID(),this.options.deviceInfo&&this.setDeviceInfo(),this.params.player_id=this.playerId,this.params.browser=this.browser,this.params.object="video:".concat(t),this.params.playback_id=this.params.playback_id||t,this.params.playback=this.playbackName,this.params.player_type=n,this.params.platform=Zl(n),this.params.ads_disabled=this.isAdsDisabled,this.params.encrypted=this.isEncrypted,this.params.url=document.location.href,this.params.domain=this.domain,this.params.Referrer=this.referrer,this.params.cdn=this.video.cdn,this.params.player_version="7.65.1",this.params.api_version=Ql,this.params.tenant=this.tenant}}]),i}(ot),ou={ambient:"dimension1",provider:"dimension21",userId:"dimension22",platform:"dimension36",platform_manufacturer:"dimension37",platform_model:"dimension38",arc:"dimension100",signal:"dimension101",id:"dimension102",channel:"dimension103",program:"dimension104",episode:"dimension105",domain:"dimension106",type:"dimension107",kind:"dimension108",length_range:"dimension109",gsat_op:"dimension110",pisp:"dimension111",channel_id:"dimension112",program_id:"dimension113",keep_watching:"dimension114",pub_err:"dimension115",exb_date:"dimension116",creation_date:"dimension117",length:"dimension118",auto_play:"dimension119",quality:"dimension120",player_version:"dimension121",schema_version:"dimension122",affiliate_code:"dimension123",service_id:"dimension124",dvr_status:"dimension128",current_subtitle:"dimension130",current_audio:"dimension131",EPG_program_id:"dimension132",EPG_program:"dimension133",EPG_channel_id:"dimension134",EPG_channel:"dimension135",video_session_id:"dimension136",current_audio_type:"dimension142",current_subtitle_type:"dimension143"},su={start:"metric100",seconds_watched:"metric101",complete:"metric102",bucket10:"metric103",bucket25:"metric104",bucket50:"metric105",bucket75:"metric106",bucket90:"metric107",bucket100:"metric108",seek:"metric109",load:"metric110",load_time:"metric111",skip_recap_displayed:"metric112",skip_recap_clicked:"metric113",skip_intro_displayed:"metric114",skip_intro_clicked:"metric115",quick_seek:"metric116",start_over_clicked:"metric117",auto_skip_recap:"metric118",start_over_displayed:"metric119"},lu=bn.session,uu=bn.LocalStorage,cu=bn.now,du=bn.seekStringToSeconds,hu=bn.toDurationString,pu=bn.toLowerCase,fu=bn.User,gu="object"===i(window.onbeforeunload)?"beforeunload":"unload",mu=1,vu=2,yu=function(e){l(i,e);var t=p(i);function i(e){var n;return r(this,i),(n=t.call(this,e)).videoUA="prod"===n.options.env.name?"UA-296593-59":"UA-296593-62",n.productUA=n.options.ga&&n.options.ga.productUA||n.options.gaProductua,n.gaClientId=n.options.ga&&n.options.ga.productClientId,n.gaExtras=n.options.ga&&n.options.ga.extras||{},n.isPaused=!1,n.seekCounter=0,n.checkpoint=0,n.trackedPlayTime=0,n.loadTimer=0,n.sentBuckets={},n.deviceInfo=n.options.deviceInfo||{},bn.registerGlobal("ga"),window.ga?(n.getGAClientId(),n.setupAnalytics()):bn.embedScript("https://www.google-analytics.com/analytics.js").then((function(){n.getGAClientId(),n.setupAnalytics()})),n}return o(i,[{key:"name",get:function(){return"google_analytics"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"playback",get:function(){return this.container.playback}},{key:"isLive",get:function(){return"live"===this.container.getPlaybackType()}},{key:"schemaVersion",get:function(){return"13.0"}},{key:"inflatedPlaytime",get:function(){return this.isLive?300:this.video.duration/1e3*3}},{key:"shouldResetPlaytime",get:function(){return this.trackedPlayTime>this.inflatedPlaytime||this.trackedPlayTime<0}},{key:"oneDayInMiliseconds",get:function(){return 864e5}},{key:"playerTracker",get:function(){return"playerTracker".concat(this.options.playerId)}},{key:"productTracker",get:function(){return"productTracker".concat(this.options.playerId)}},{key:"ambient",get:function(){return Q.isSmartTvEnvironment?"app_tv":"web"}},{key:"platform",get:function(){return Q.isSmartTvEnvironment?"big screen":Q.isMobile?"mobile":"desktop"}},{key:"getGAClientId",value:function(){if(!this.gaClientId)if(window.GoogleAnalyticsObject&&window[window.GoogleAnalyticsObject]&&window[window.GoogleAnalyticsObject].getAll){var e,t=E(window[window.GoogleAnalyticsObject].getAll());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.get("trackingId")===this.productUA&&(this.gaClientId=n.get("clientId"),_e.info(this.name,"Getting GA product client id via GoogleAnalyticsObject"))}}catch(e){t.e(e)}finally{t.f()}}else{var i=uu.loadRaw("wm.player._videoGa");if(!i){var r=new Date;r.setFullYear(r.getFullYear()+2),uu.store("_videoGa",fu.uid,r)}this.gaClientId=i,_e.info(this.name,"Player has not found a valid client id. It`s been generated by the player.")}}},{key:"setupAnalytics",value:function(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,this.createGATrackers()}},{key:"createGATrackers",value:function(){var e=this.mountGAInitialParameters();ga("create",this.videoUA,"auto",this.playerTracker,e),ga("".concat(this.playerTracker,".set"),"location",window.location.href),this.productUA&&(ga("create",this.productUA,"auto",this.productTracker,e),ga("".concat(this.productTracker,".set"),"location",window.location.href))}},{key:"mountGAInitialParameters",value:function(){var e={};return this.gaExtras&&this.gaExtras.uid&&(e.userId=this.gaExtras.uid),this.productUA&&(e.clientId=this.gaClientId),e}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.container,Tn.DFP_CONTENT_RESUME,(function(){e.DFPError="false"})),this.listenTo(this.container,Tn.DFP_AD_ERROR,(function(){e.DFPError="true"})),this.listenTo(this.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToOnce(this.playback,Tn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.playback,De.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.playback,De.PLAYBACK_PAUSE,this.onPause),this.listenTo(this.container,De.CONTAINER_STATE_BUFFERING,this.onBuffering),this.listenTo(this.container,De.CONTAINER_SEEK,this.onSeek),this.listenTo(this.container,Tn.WM_SETTINGS_LEVEL_SELECTED,this.onQualitySelected),this.listenTo(this.playback,De.PLAYBACK_TIMEUPDATE,this.onTimeUpdate),this.listenTo(this.playback,De.PLAYBACK_STOP,this.onEnd),this.listenTo(this.playback,De.PLAYBACK_ENDED,(function(){e.onEnd("complete")})),this.listenTo(this.container,De.CONTAINER_DESTROYED,this.onEnd),this.listenTo(this.container,Tn.WM_STATS_REPORTED,(function(t){e.watchedTime=t.timers.watch})),this.listenTo(this.container,Tn.SKIP_BUTTON_CLICKED,this.onSkipButtonClicked),this.listenTo(this.container,Tn.SKIP_BUTTON_SHOW,this.onSkipButtonDisplayed),this.listenTo(this.playback,De.PLAYBACK_DVR,this.onDVR),this.listenTo(this.container,Tn.DID_CHANGE_CURRENT_PROGRAM,this.onCurrentProgramUpdated),this.listenTo(this.container,Tn.WM_AUDIO_CHANGED,this.onAudioChanged),this.listenTo(this.container,Tn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Tn.WILL_QUICK_SEEK,this.onQuickSeek),this.listenTo(this.container,Tn.WILL_AUTO_SKIP_RECAP,this.onAutoSkipRecap),this.bindCustomEvents()}},{key:"bindCustomEvents",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(gu,this.boundOnEnd)}},{key:"onMetadataLoaded",value:function(e){this.video=e,this.defineBuckets(this.video.duration),this.setVideoLayer(),this.layer.schema_version=this.schemaVersion,this.layer.gaAccounts=[this.videoUA],this.productUA&&this.layer.gaAccounts.push(this.productUA)}},{key:"onResourceReady",value:function(e,t){this.layer.video_session_id=lu.getVideoSessionId(this.options.playerId),t&&t.product&&(this.layer.pisp=t.product),e.transmission&&e.transmission.affiliate&&(this.layer.affiliate_code=e.transmission.affiliate.code)}},{key:"setVideoLayer",value:function(){var e={excerpt:"short",segment:"short",episode:"full"}[this.video.kind]||this.video.kind,t=this.options.resumeAt||du(),i=this.container.options.domain;this.layer={arc:this.video.isArchived?"acervo":"grade",signal:this.video.isSubscriberOnly?"fechado":"aberto",id:"".concat(this.video.id),channel:this.video.channel,program:this.video.program,episode:this.video.title,domain:i||document.location.hostname,type:e,kind:pu(this.video.category),length_range:hu(this.video.duration),channel_id:this.video.channelId,program_id:this.video.programId,keep_watching:t>0?"true":"false",exb_date:this.video.exhibitedAt,creation_date:this.video.createdAt,length:Math.trunc(this.video.duration/1e3),auto_play:this.options.autoPlay+"",player_version:"7.65.1",start:0,service_id:this.video.serviceId,ambient:this.ambient,platform:this.platform},this.video.providerId&&this.video.isSubscriberOnly&&(this.layer.gsat_op=pu(this.options.payTvServiceProvider)),Q.isSmartTvEnvironment&&(this.layer=n(n({},this.layer),{},{platform_manufacturer:this.deviceInfo.manufacturer||Q.device&&Q.device.brand,platform_model:this.deviceInfo.model||Q.device&&Q.device.model}))}},{key:"onQualitySelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var t=e.find((function(e){return e.selected}))||e[0];this.levelSelected=t&&t.name}}},{key:"onPlay",value:function(){this.isFirstPlay()?this.isPaused=!1:this.isPaused&&(this.initialTrackedPlayTime=cu(),this.track("play"),this.isPaused=!1)}},{key:"getLanguageDimension",value:function(e){return e.languageISO_639_2B||e.language}},{key:"isFirstPlay",value:function(){return 0===this.layer.start&&(this.isLive&&(this.layer.dvr_status=this.container.isDvrEnabled()?"em-simulcast":"nao-disponivel"),this.playback.currentAudio&&(this.layer.current_audio=this.getLanguageDimension(this.playback.currentAudio),this.changeSettingType(this.playback.currentAudio,"audio")),this.playback.currentSubtitle&&(this.layer.current_subtitle=this.getLanguageDimension(this.playback.currentSubtitle),this.changeSettingType(this.playback.currentSubtitle,"subtitle")),this.layer.start=1,this.initialTrackedPlayTime=cu(),this.track("start"),!0)}},{key:"calculatePlayTime",value:function(){if(this.initialTrackedPlayTime){var e=cu(),t=(e-this.initialTrackedPlayTime)/1e3;this.isBuffering&&(this.calculateBufferTime(),this.onBufferStart()),this.trackedPlayTime=t-this.loadTimer,this.hasSentBuffer(),this.shouldResetPlaytime&&(this.sendToSentry({type:"GA ERROR: Not possible to calculate trackedPlayTime",description:"initialTrackedPlayTime = ".concat(this.initialTrackedPlayTime," / finalTrackedPlayTime = ").concat(e)}),this.trackedPlayTime=null),this.initialTrackedPlayTime=0}}},{key:"milestone",value:function(e){!this.isPaused&&0!==e&&this.checkpoint!==e&&e%60<1&&(this.calculatePlayTime(),1===this.layer.start&&this.track("milestone"),this.initialTrackedPlayTime=cu()),this.checkpoint=e}},{key:"onSkipButtonDisplayed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this["".concat(t,"_displayed")]!==vu&&(this["".concat(t,"_displayed")]=mu)}},{key:"onSkipButtonClicked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;this["".concat(t,"_clicked")]!==vu&&(this["".concat(t,"_clicked")]=mu)}},{key:"onAutoSkipRecap",value:function(){this.auto_skip_recap!==vu&&(this.auto_skip_recap=mu)}},{key:"onCurrentProgramUpdated",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program;this.layer.EPG_program=t&&t.program||null,this.layer.EPG_channel=t&&t.channel||null,this.layer.EPG_program_id=t&&t.programId||null,this.layer.EPG_channel_id=t&&t.channelId||null}},{key:"changeSettingType",value:function(e,t){var n="current_".concat(t,"_type"),i="audio"===t&&"description"===(null==e?void 0:e.role),r="subtitle"===t&&"caption"===(null==e?void 0:e.role);this.layer[n]=i||r?e.role:null}},{key:"onAudioChanged",value:function(e){this.layer.current_audio=e&&this.getLanguageDimension(e)||null,this.changeSettingType(e,"audio")}},{key:"onSubtitleChanged",value:function(e){this.layer.current_subtitle=e&&this.getLanguageDimension(e)||null,this.changeSettingType(e,"subtitle")}},{key:"onQuickSeek",value:function(){this.didQuickSeek=!0}},{key:"onPause",value:function(){this.calculatePlayTime(),this.track("pause"),this.isPaused=!0}},{key:"onBuffering",value:function(){this.isBuffering||(this.isBuffering=!0,this.listenToOnce(this.container,De.CONTAINER_STATE_BUFFERFULL,this.onBufferFull),this.onBufferStart())}},{key:"onBufferStart",value:function(){this.loadInitialTime=cu()}},{key:"onBufferFull",value:function(){this.calculateBufferTime(),this.isBuffering=!1}},{key:"calculateBufferTime",value:function(){this.loadEndTime=cu(),this.loadEndTime>0&&this.loadInitialTime>0&&this.loadEndTime>this.loadInitialTime&&(this.loadTimer+=(this.loadEndTime-this.loadInitialTime)/1e3),this.loadInitialTime=0,this.loadEndTime=0}},{key:"hasSentBuffer",value:function(){this.loadTimer=0,this.layer.load=0,this.layer.load_time=0}},{key:"onSeek",value:function(){this.hasSeeked=!0,this.seekCounter++}},{key:"onEnd",value:function(e){!this.layer||this.layer&&0===this.layer.start||(this.layer.start=0,this.hasVideoCompleted="complete"===e,this.calculatePlayTime(),this.track("end"))}},{key:"destroy",value:function(){window.removeEventListener(gu,this.boundOnEnd),g(u(i.prototype),"destroy",this).call(this),this.stopListening(),window.ga&&ga.getByName&&ga.getByName(this.playerTracker)&&ga("".concat(this.playerTracker,".remove")),window.ga&&ga.getByName&&ga.getByName(this.productTracker)&&ga("".concat(this.productTracker,".remove"))}},{key:"onTimeUpdate",value:function(e){this.currentTime=this.isLive?Math.trunc(this.watchedTime/1e3):e.current,this.milestone(Math.trunc(this.currentTime))}},{key:"onDVR",value:function(e){this.layer.dvr_status=e?"em-dvr":"em-simulcast"}},{key:"track",value:function(e){window.ga?(this.layer.event=e,this.layer.quality=this.levelSelected,this.layer.pub_err=this.DFPError,this.setGACustomMetrics(this.layer.event),this.useGAtracker()):this.container.trigger(Tn.WM_GA_UNTRACKED_EVENT,{eventName:e})}},{key:"setGACustomMetrics",value:function(e){for(var t in this.GACustomMetrics={},this.GACustomMetrics[su.start]="start"===e&&1,this.GACustomMetrics[su.seconds_watched]=this.shouldSendPlayTime()&&this.trackedPlayTime,this.trackedPlayTime=0,this.GACustomMetrics[su.load]=this.shouldSendLoadTime()&&1,this.GACustomMetrics[su.load_time]=this.shouldSendLoadTime()&&this.loadTimer,this.GACustomMetrics[su.complete]="end"===e&&this.hasVideoCompleted&&1,this.setSkipButtonsCustomMetric(),this.didQuickSeek&&(this.GACustomMetrics[su.quick_seek]=1,this.didQuickSeek=!1),"milestone"!==e&&this.hasSeeked&&(this.hasSeeked=!1,this.GACustomMetrics[su.seek]=this.seekCounter,this.seekCounter=0),!this.isLive&&this.watchedTime&&this.calculateBuckets(this.watchedTime),this.GACustomMetrics)!1===this.GACustomMetrics[t]&&delete this.GACustomMetrics[t]}},{key:"setSkipButtonsCustomMetric",value:function(){var e=this;["skip_recap_displayed","skip_recap_clicked","skip_intro_displayed","skip_intro_clicked","start_over_displayed","start_over_clicked","auto_skip_recap"].forEach((function(t){e[t]===mu&&(e.GACustomMetrics[su[t]]=1,e[t]=vu)}))}},{key:"useGAtracker",value:function(){this.setGACustomDimensions(this.playerTracker),this.sendtoGA(this.playerTracker),this.productUA&&(this.setGACustomDimensions(this.productTracker),this.sendtoGA(this.productTracker))}},{key:"setGACustomDimensions",value:function(e){var t=this;for(var n in ou)void 0!==this.layer[n]&&ga("".concat(e,".set"),ou[n],this.layer[n]);this.gaExtras&&Object.keys(this.gaExtras).forEach((function(n){t.gaExtras[n]&&ga("".concat(e,".set"),ou[n]||n,t.gaExtras[n])}))}},{key:"sendtoGA",value:function(e){this.isLive?this.milestoneTime=this.milliToMinutes(this.watchedTime):this.milestoneTime=Math.trunc(this.currentTime/60),this.gaEventLabel="milestone"===this.layer.event?"minute - ".concat(this.milestoneTime):this.layer.episode,ga("".concat(e,".send"),"event","video",this.layer.event,this.gaEventLabel,this.GACustomMetrics),this.shouldSendLoadTime()&&this.hasSentBuffer()}},{key:"shouldSendPlayTime",value:function(){return"milestone"===this.layer.event||"pause"===this.layer.event||"end"===this.layer.event}},{key:"shouldSendLoadTime",value:function(){return"start"===this.layer.event||"play"===this.layer.event}},{key:"defineBuckets",value:function(e){this.videobuckets={};for(var t=0,n=[10,25,50,75,90,100];t<n.length;t++){var i=n[t];this.videobuckets["bucket".concat(i)]=i/100*e}}},{key:"calculateBuckets",value:function(e){for(var t in this.videobuckets)e>=this.videobuckets[t]&&!this.sentBuckets[t]&&(this.GACustomMetrics[su[t]]=1,this.sentBuckets[t]=1)}},{key:"milliToMinutes",value:function(e){return Math.trunc(e/6e4)}},{key:"sendToSentry",value:function(e){this.container.trigger("wm:ga:error",e)}}]),i}(ot),bu=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).rendered=!1,i}return o(n,[{key:"name",get:function(){return"waiting_room"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"template",get:function(){return Ve('<div class="waiting-room__aligner">\n<div class="waiting-room__main-text">Estamos lotados! Tentaremos carregar a transmissão novamente em </div>\n<p class="waiting-room__countdown"></p>\n</div>\n')}},{key:"attributes",get:function(){return{class:"waiting-room"}}},{key:"bindEvents",value:function(){this.listenTo(this.container.playback,Tn.WM_WROOM_WAITING,this.onResponse)}},{key:"onResponse",value:function(){var e=this;this.retryInterval=this.setRetryInterval(),this.rendered?this.updateScreenVisibility("flex"):this.render(),this.countdownStart=Date.now(),this.retryID=setTimeout((function(){e.retry()}),this.retryInterval),this.countdownID=setInterval((function(){e.updateScreen()}),1e3)}},{key:"retry",value:function(){clearInterval(this.retryID),clearInterval(this.countdownID),this.updateScreenVisibility("none"),this.container.playback.trigger(Tn.WILL_RESTART_PLAYBACK,"wroom")}},{key:"updateScreen",value:function(){this.updateCountdownElement(this.updateCountdownTime())}},{key:"updateScreenVisibility",value:function(e){this.$el[0].style.display=e}},{key:"updateCountdownElement",value:function(e){this.$el.find(".waiting-room__countdown").text(this.toSeconds(e))}},{key:"updateCountdownTime",value:function(){return this.retryInterval-(Date.now()-this.countdownStart)}},{key:"toSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"setRetryInterval",value:function(){return Math.round(-2e4*Math.random())+5e4}},{key:"render",value:function(){if(!this.rendered){this.$el.html(this.template());var e=En.getStyleFrom('.clappr-player#wp3-player-0 .waiting-room {\n  display: -ms-flexbox;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  background-color: #202020;\n  background-size: cover;\n  z-index: 999;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  top: 0; }\n  .clappr-player#wp3-player-0 .waiting-room__aligner {\n    flex-grow: 1;\n    width: 100%; }\n  .clappr-player#wp3-player-0 .waiting-room__main-text {\n    color: #cccccc;\n    font-family: "opensans-bold", sans-serif;\n    font-size: 18px;\n    width: 100%;\n    left: 0; }\n  .clappr-player#wp3-player-0 .waiting-room__countdown {\n    color: #cccccc;\n    font-family: "opensans-bold", sans-serif;\n    font-size: 18px;\n    margin: 0 auto;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 50%;\n    width: 50px;\n    height: 50px;\n    line-height: 50px;\n    display: inline-block;\n    text-align: center; }\n',{baseUrl:this.options.baseUrl,playerId:this.options.playerId});return this.$el.append(e[0]),this.container.$el.append(this.el),this.rendered=!0,this}}}]),n}(lt),Eu="6.8.42",Tu=function(){Function.prototype.bind=Function.prototype.bind||function(e){var t=Array.prototype.slice,n=this,i=t.call(arguments,1);function r(){var r=n.prototype&&this instanceof n;return n.apply(!r&&e||this,i.concat(t.call(arguments)))}return r.prototype=n.prototype,r},Array.prototype.forEach=Array.prototype.forEach||function(e,t){if("function"!=typeof e)throw new TypeError(e+" is not a function!");for(var n=this.length,i=0;i<n;i++)e.call(t,this[i],i,this)},Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)}},Au=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},ku=function(){},_u=function(){};_u.prototype={constructor:function(){}},_u.extend=function(e,t){var n,i=this;return n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return i.apply(this,arguments)},Au(n,i,t),n.prototype=function(e){if(arguments.length>1)throw Error("Second argument not supported");if(null===e)throw Error("Cannot set a null [[Prototype]]");if("object"!=typeof e)throw TypeError("Argument must be an object");return ku.prototype=e,new ku}(i.prototype),e&&Au(n.prototype,e),n.prototype.constructor=n,n.__super__=i.prototype,n};var Su=_u,wu=function(e){return"[object Array]"===Object.prototype.toString.call(e)},Cu=Su.extend({on:function(e,t){if(this._listeners=this._listeners||{},"function"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this},off:function(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var n=this._listeners[e].indexOf(t);-1!==n&&this._listeners[e].splice(n,1)}return this},emit:function(e,t){return this._listeners=this._listeners||{},t=t||{},wu(this._listeners[e])&&this._listeners[e].forEach(this._eachCallback.bind(this,e,t)),wu(this._listeners["*"])&&this._listeners["*"].forEach(this._eachCallback.bind(this,e,t)),this},_eachCallback:function(e,t,n){"function"==typeof n&&n({type:e,data:t,target:this})}}),Iu=Cu,Du={_emitter:new Iu,on:function(){Du._emitter.on.apply(Du._emitter,arguments)},off:function(){Du._emitter.off.apply(Du._emitter,arguments)},emit:function(){Du._emitter.emit.apply(Du._emitter,arguments)},Level:{SILENT:6,ERROR:5,WARNING:4,NOTICE:3,DEBUG:2,VERBOSE:1},Event:{LOG:"log"},logLevel:5,plainLogs:!1,report:function(e,t,n){if("undefined"!=typeof console&&console.log&&"undefined"!=typeof document){n=n||"darkcyan";var i,r={5:"e",4:"w",3:"n",2:"d",1:"v"}[t=t||Du.Level.NOTICE],a="[Youbora]"+Du._getCurrentTime()+" "+r+":";if(this.emit("log",{level:t,msg:e,prefix:a}),Du.logLevel<=t)if(Du.plainLogs||document.documentMode)Du._plainReport(e,a);else i=t===Du.Level.ERROR&&console.error?console.error:t===Du.Level.WARNING&&console.warn?console.warn:t===Du.Level.DEBUG&&console.debug?console.debug:console.log,a="%c"+a,wu(e)?(e.splice(0,0,a,"color: "+n),i.apply(console,e)):i.call(console,a,"color: "+n,e)}},_getCurrentTime:function(){var e=new Date;return"["+("0"+e.getDate()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3)+"]"},_plainReport:function(e,t){if(e instanceof Array)for(var n in e)Du._plainReport(e[n],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+" <next line>"),console.log(e))},error:function(){Du.report([].slice.call(arguments),Du.Level.ERROR,"darkred")},warn:function(){Du.report([].slice.call(arguments),Du.Level.WARNING,"darkorange")},notice:function(){Du.report([].slice.call(arguments),Du.Level.NOTICE,"darkgreen")},debug:function(){Du.report([].slice.call(arguments),Du.Level.DEBUG,"indigo")},verbose:function(){Du.report([].slice.call(arguments),Du.Level.VERBOSE,"navy")},loadLevelFromUrl:function(){"undefined"!=typeof window&&window.location&&this._parseLevelFromUrl(window.location.search)},_parseLevelFromUrl:function(e){if(e){var t=/\?.*&*youbora-debug=(.+)/i.exec(e);null!==t&&(Du.logLevel=t[1]),null!==/\?.*&*youbora-debug=plain/i.exec(e)&&(Du.plainLogs=!0)}}},Ru=Du,xu={stripProtocol:function(e){var t=e;try{t=e.replace(/^(.*?:\/\/|\/\/)/i,"")}catch(e){Ru.warn(e)}return t},addProtocol:function(e,t){var n="http://localhost/";try{n="http://"+e,t||"undefined"!=typeof window&&0===window.location.protocol.indexOf("https")?n="https://"+e:"undefined"!=typeof window&&0===window.location.protocol.indexOf("http")&&(n="//"+e)}catch(e){Ru.warn(e)}return n},parseNumber:function(e,t){return!isNaN(e)&&e>=0&&e!==1/0&&e!==-1/0&&null!=e?e:t},logAllEvents:function(e,t,n){try{if(Ru.logLevel<=Ru.Level.DEBUG){n=n||function(e){Ru.debug("Event: "+e.type)};var i=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart"];t&&(null===t[0]?(t.shift(),i=t):i=i.concat(t));for(var r=0;r<i.length;r++)"function"==typeof e?e.call(window,i[r],n):e.on?e.on(i[r],n):e.addEventListener&&e.addEventListener(i[r],n)}}catch(e){Ru.error(e)}},buildRenditionString:function(e,t,n){1===arguments.length&&(n=e,e=null,t=null);var i=null;return e&&t&&(i=e+"x"+t),"number"==typeof n&&!isNaN(n)&&n>=1&&(i?i+="@":i="",i+=n<1e3?Math.round(n)+"bps":n<1e6?(n=Math.round(n/1e3))+"Kbps":(n=Math.round(n/1e4)/100)+"Mbps"),i},buildErrorParams:function(e,t,n,i){var r={};return"object"==typeof e&&null!==e?r=e:(r.errorCode=e||"FAILURE",r.msg=t||r.errorCode,r.errorMetadata=n,r.errorLevel=i),r},calculateAdViewability:function(e,t){var n=!0;if("undefined"!=typeof window&&e&&"function"==typeof e.getBoundingClientRect){var i=e.getBoundingClientRect();if(i.top>=window.innerHeight||i.bottom<=0||i.right<=0||i.left>=window.innerWidth)n=!1;else{var r=Math.trunc(i.height*i.width),a=i.top>0?i.top:0,o=i.bottom>window.innerHeight?window.innerHeight:i.bottom,s=i.left>0?i.left:0;n=100*(((i.right>window.innerWidth?window.innerWidth:i.right)-s)*(o-a))>r*(t||50)}}return n},getMetricsFrom:function(e,t){var n=e||t;for(var i in n)if("object"!=typeof n[i]||!n[i].value){var r={};r.value=n[i],n[i]=r}return n},assign:Au,isArray:wu},Lu=xu,Pu=Su.extend({getCdnTraffic:function(){var e=null;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn)e=CdnBalancerStats.cdn.totalDownloadedBytes;else if("undefined"!=typeof Streamroot)e=this._getStreamrootPeerObject("cdn",!1)||this._getStreamrootInstanceObject("cdnDownload");else if("undefined"!=typeof peer5&&peer5.getStats)e=peer5.getStats().totalHttpDownloaded;else if("undefined"!=typeof teltoo&&teltoo.getStats){var t=teltoo.getStats();e=t.totalReceivedBytes-t.p2pReceivedBytes}return e},getMultiCdnInfo:function(){var e=null;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn&&CdnBalancerStats.cdn.cdns){var t=CdnBalancerStats.p2p;e={P2P:{downloaded_bytes:t.downloadedBytes,uploaded_bytes:t.uploadedBytes,downloaded_chunks:t.downloadedSegments,uploaded_chunks:t.uploadedSegments,errors:t.failedRequests?t.failedRequests.total:0,missed_downloaded_chunks:t.failedRequests?t.failedRequests.absent:0,timeout_errors:t.failedRequests?t.failedRequests.timeout:0,other_errors:t.failedRequests?t.failedRequests.error:0,late_uploaded_chunks:t.discardedUploadedSegments,late_uploaded_bytes:t.discardedUploadedBytes,late_downloaded_bytes:t.discardedDownloadedBytes,time:t.downloadMillis,active_peers:t.activePeers,peers:t.totalPeers}},CdnBalancerStats.cdn.cdns.forEach((function(t){e[t.name]={downloaded_bytes:t.bytes,downloaded_chunks:t.chunks,errors:t.failures,time:t.downloadMillis}}))}return e},getSegmentDuration:function(){return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.segmentDuration?CdnBalancerStats.segmentDuration:null},getBalancerResponseId:function(){return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.cdn?CdnBalancerStats.cdn.responseUUID:null},getP2PTraffic:function(){var e=null;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?e=CdnBalancerStats.p2p.downloadedBytes:"undefined"!=typeof Streamroot?e=this._getStreamrootPeerObject("p2p",!0)||this._getStreamrootInstanceObject("dnaDownload"):"undefined"!=typeof peer5&&peer5.getStats?e=peer5.getStats().totalP2PDownloaded:"undefined"!=typeof teltoo&&teltoo.getStats&&(e=teltoo.getStats().p2pReceivedBytes),e},getUploadTraffic:function(){var e=null;return"undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p?e=CdnBalancerStats.p2p.uploadedBytes:"undefined"!=typeof Streamroot?e=this._getStreamrootPeerObject("upload",!0)||this._getStreamrootInstanceObject("dnaUpload"):"undefined"!=typeof peer5&&peer5.getStats&&(e=peer5.getStats().totalP2PUploaded),e},getIsP2PEnabled:function(){var e=!1;if("undefined"!=typeof CdnBalancerStats&&CdnBalancerStats.p2p)e=CdnBalancerStats.p2p.downloadEnabled;else if("undefined"!=typeof Streamroot)if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var t in Streamroot.peerAgents)e=e||Streamroot.peerAgents[t].isP2PEnabled;else Streamroot.instances&&Streamroot.instances.forEach((function(t){e=e||t.dnaDownloadEnabled||t.dnaUploadEnabled}));else"undefined"!=typeof peer5&&peer5.isEnabled?e=peer5.isEnabled():"undefined"!=typeof teltoo&&(e=!0);return e},_getStreamrootPeerObject:function(e,t){var n=null;if(Streamroot.p2pAvailable&&Streamroot.peerAgents)for(var i in Streamroot.peerAgents){var r=Streamroot.peerAgents[i];!r.stats||t&&!r.isP2PEnabled||(n+=r.stats[e])}return n},_getStreamrootInstanceObject:function(e){var t=null;return Streamroot.instances&&Streamroot.instances.forEach((function(n){n.stats&&n.stats.currentContent&&(t+=n.stats.currentContent[e])})),t}}),Ou=Su.extend({constructor:function(){this.reset()},reset:function(){this.startTime=0,this.stopTime=0,this.pauseTime=0,this.offset=0},getDeltaTime:function(e){var t=-1,n=(new Date).getTime();if(this.startTime){e&&!this.stopTime&&(this.stopTime=n);var i=this.pauseTime?n-this.pauseTime:0,r=this.stopTime?this.stopTime:n;t=this.offset-i+(r-this.startTime)}return t},start:function(){this.startTime=(new Date).getTime(),this.stopTime=0,this.offset=0},stop:function(){return this.pauseTime&&this.resume(),this.stopTime=(new Date).getTime(),this.startTime?this.offset+(this.stopTime-this.startTime):-1},pause:function(){this.pauseTime=(new Date).getTime()},resume:function(){this.offset-=(new Date).getTime()-this.pauseTime,this.pauseTime=0},clone:function(){var e=new Ou;return e.startTime=this.startTime,e.stopTime=this.stopTime,e.offset=this.offset,e}}),Mu=Ou,Nu=Su.extend({constructor:function(e,t){this.callback=e,this.interval=t||5e3,this.isRunning=!1,this._timer=null,this.chrono=new Mu},start:function(){this.isRunning||(this.isRunning=!0,this._setTick())},stop:function(){if(this.isRunning=!1,this._timer)try{clearTimeout(this._timer),this._timer=null}catch(e){"undefined"!=typeof atv&&(atv.clearTimeout(this._timer),this._timer=null)}},_setTick:function(){if(this.isRunning){this.chrono.start();try{this._timer=setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval)}catch(e){"undefined"!=typeof atv&&(this._timer=atv.setTimeout(function(){this.callback(this.chrono.stop()),this._setTick()}.bind(this),this.interval))}}}}),Bu={Event:{START:"start",JOIN:"join",PAUSE:"pause",RESUME:"resume",SEEK_BEGIN:"seek-begin",SEEK_END:"seek-end",BUFFER_BEGIN:"buffer-begin",BUFFER_END:"buffer-end",ERROR:"error",STOP:"stop",CLICK:"click",MANIFEST:"manifest",PODSTART:"break-start",PODSTOP:"break-stop",QUARTILE:"quartile",VIDEO_EVENT:"video-event"}},Uu={GET:"get",POST:"post"},Fu={AdPosition:{Preroll:"pre",Midroll:"mid",Postroll:"post"},ManifestError:{NO_RESPONSE:"NO_RESPONSE",EMPTY:"EMPTY_RESPONSE",WRONG:"WRONG_RESPONSE"},RequestMethod:Uu,Service:{DATA:"/data",INIT:"/init",START:"/start",JOIN:"/joinTime",PAUSE:"/pause",RESUME:"/resume",SEEK:"/seek",BUFFER:"/bufferUnderrun",ERROR:"/error",STOP:"/stop",PING:"/ping",VIDEO_EVENT:"/infinity/video/event",AD_INIT:"/adInit",AD_START:"/adStart",AD_JOIN:"/adJoin",AD_PAUSE:"/adPause",AD_RESUME:"/adResume",AD_BUFFER:"/adBufferUnderrun",AD_STOP:"/adStop",AD_CLICK:"/adClick",AD_ERROR:"/adError",AD_MANIFEST:"/adManifest",AD_POD_START:"/adBreakStart",AD_POD_STOP:"/adBreakStop",AD_QUARTILE:"/adQuartile",EVENT:"/infinity/session/event",SESSION_START:"/infinity/session/start",SESSION_STOP:"/infinity/session/stop",NAV:"/infinity/session/nav",BEAT:"/infinity/session/beat",OFFLINE_EVENTS:"/offlineEvents"},WillSendEvent:{WILL_SEND_INIT:"will-send-init",WILL_SEND_START:"will-send-start",WILL_SEND_JOIN:"will-send-join",WILL_SEND_PAUSE:"will-send-pause",WILL_SEND_RESUME:"will-send-resume",WILL_SEND_SEEK:"will-send-seek",WILL_SEND_BUFFER:"will-send-buffer",WILL_SEND_ERROR:"will-send-error",WILL_SEND_FATAL_ERROR:"will-send-fatal-error",WILL_SEND_STOP:"will-send-stop",WILL_SEND_PING:"will-send-ping",WILL_SEND_VIDEO_EVENT:"will-send-video-event",WILL_SEND_AD_START:"will-send-ad-start",WILL_SEND_AD_JOIN:"will-send-ad-join",WILL_SEND_AD_PAUSE:"will-send-ad-pause",WILL_SEND_AD_RESUME:"will-send-ad-resume",WILL_SEND_AD_BUFFER:"will-send-ad-buffer",WILL_SEND_AD_STOP:"will-send-ad-stop",WILL_SEND_AD_CLICK:"will-send-ad-click",WILL_SEND_AD_ERROR:"will-send-ad-error",WILL_SEND_AD_MANIFEST:"will-send-ad-manifest",WILL_SEND_AD_POD_START:"will-send-ad-break-start",WILL_SEND_AD_POD_STOP:"will-send-ad-break-stop",WILL_SEND_AD_QUARTILE:"will-send-ad-quartile",WILL_SEND_SESSION_START:"will-send-session-start",WILL_SEND_SESSION_STOP:"will-send-session-stop",WILL_SEND_NAV:"will-send-nav",WILL_SEND_BEAT:"will-send-beat",WILL_SEND_EVENT:"will-send-event",WILL_SEND_OFFLINE_EVENTS:"will-send-offline-events"},AdInsertionType:{ClientSide:"csai",ServerSide:"ssai"},Adapter:Bu},Vu=Su.extend({constructor:function(e,t,n,i){this.xhr=this.createXHR(),this.host=e||"",this.service=t||"",this.params=n||{},this.options=Lu.assign({},Vu.defaultOptions,i),this.retries=0,this.sendPostRequest=!1,this.preparedPostRequest=!1,this.options.cache||this.setParam("timemark",(new Date).getTime())},createXHR:function(){var e={};try{e=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")}catch(e){Ru.error(e)}return e},getXHR:function(){return this.xhr},getResponse:function(){return this.xhr.response},getResponseText:function(){return this.xhr.responseText},getResponseHeaders:function(){return this.xhr.getAllResponseHeaders()},getUrl:function(){return this.host+this.service+this.getParamString()},on:function(e,t,n){return this.xhr.addEventListener?this.xhr.addEventListener(e,t.bind(this,this,n)):e===Vu.Event.SUCCESS&&(this.xhr.onreadystatechange=function(){4===this.xhr.readyState&&t.bind(this,this,n)}.bind(this)),this},off:function(e,t){return this.xhr.removeEventListener(e,t),this},getParamString:function(){try{var e="?";for(var t in this.params){var n=this.params[t];if(null!==n&&"object"==typeof n){var i=JSON.stringify(n);"{}"!==i&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(i)+"&")}else null!=n&&""!==n&&(e+=encodeURIComponent(t)+"="+encodeURIComponent(n)+"&")}return e.slice(0,-1)}catch(e){return Ru.error(e),""}},getParam:function(e){return this.params[e]},setParam:function(e,t){return this.params[e]=t,this},setBody:function(e){this.body=e},setPostRequest:function(e){this.sendPostRequest=e},getParamsForPostMessages:function(){var e={};try{var t=this.getParam("timemark"),n=this.getParam("code"),i=this.getParam("sessionRoot"),r=this.getParam("sessionId");t&&(e.timemark=t),n&&(e.code=n),i&&(e.sessionRoot=i),r&&(e.sessionId=r)}catch(e){Ru.error(e)}return e},send:function(){try{try{this.sendPostRequest&&!this.preparedPostRequest&&(this.options.method="POST",this.body=JSON.stringify(this.params),this.params=this.getParamsForPostMessages(),this.preparedPostRequest=!0)}catch(e){}if(this.xhr.open(this.options.method,this.getUrl(),!0),this.options.requestHeaders)for(var e in this.options.requestHeaders)this.options.requestHeaders.hasOwnProperty(e)&&this.xhr.setRequestHeader(e,this.options.requestHeaders[e]);if(this.options.retryAfter>0&&this.options.maxRetries>0){0===this.retries&&this.on(Vu.Event.ERROR,function(){if(this.retries>=this.options.maxRetries)Ru.error('Aborting failed request "'+this.service+'". Max retries reached.');else{Ru.warn('YBRequest "'+this.service+'" failed. Retry '+(this.retries+1)+" of "+this.options.maxRetries+" in "+this.options.retryAfter+"ms.");try{setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter)}catch(e){"undefined"!=typeof atv?atv.setTimeout(function(){this.retries+=1,this.send()}.bind(this),this.options.retryAfter):Ru.error(e)}}}.bind(this))}for(var t in Ru.logLevel<=Ru.Level.VERBOSE&&Ru.verbose("XHR Req: "+this.getUrl()),Vu._globalListeners)Vu._globalListeners[t].forEach(function(e){this.on(t,e)}.bind(this));return this.xhr.send(this.body)}catch(e){Ru.error(e)}}},{Event:{SUCCESS:"load",LOAD:"load",ERROR:"error",ABORT:"abort"},defaultOptions:{method:"GET",requestHeaders:{},maxRetries:3,retryAfter:5e3,cache:!1},_globalListeners:{},onEvery:function(e,t){Vu._globalListeners[e]=Vu._globalListeners[e]||[],Vu._globalListeners[e].push(t)},offEvery:function(e,t){if(Vu._globalListeners[e]){var n=Vu._globalListeners[e].indexOf(t);-1!==n&&Vu._globalListeners[e].splice(n,1)}}}),Hu=Vu,ju=Iu.extend({constructor:function(){this._isBusy=!0,this._sendRequest=!0,this.transformName="Transform"},parse:function(e){},isBlocking:function(e){return this._isBusy},done:function(){this._isBusy=!1,this.emit(ju.Event.DONE)},hasToSend:function(e){return this._sendRequest},getState:function(){return this._sendRequest?this._isBusy?this.STATE_BLOCKED:this.STATE_NO_BLOCKED:this.STATE_OFFLINE}},{STATE_OFFLINE:2,STATE_BLOCKED:1,STATE_NO_BLOCKED:0,Event:{DONE:"done"}}),Ku=ju,Gu=Su.extend({constructor:function(e){this.transforms=[],this.pluginRef=e,this._requests=[]},sendRequest:function(e,t,n){e&&("function"==typeof t&&e.on(Hu.Event.SUCCESS,t,n),this._registerRequest(e))},buildRequest:function(e,t,n,i){var r=new Hu(e,t,n=n||{});"function"==typeof i&&r.on(Hu.Event.SUCCESS,i),this._registerRequest(r)},addTransform:function(e){e.parse&&e.isBlocking?(this.transforms.push(e),e.on(Ku.Event.DONE,this._processRequests.bind(this))):Ru.warn(e+" is not a valid RequestTransform.")},removeTransform:function(e){var t=this.transforms.indexOf(e);-1!==t?this.transforms.splice(t,1):Ru.warn("Trying to remove unexisting Transform '"+e+"'.")},_registerRequest:function(e){if(this.pluginRef){var t=this.pluginRef.options;t.authToken&&(e.options.requestHeaders.Authorization=t.authType+" "+t.authToken)}this._requests.push(e),this._processRequests()},_processRequests:function(){var e=this._requests;this._requests=[];for(var t=[];e.length;){var n=e.shift(),i=this._transform(n);i===Ku.STATE_NO_BLOCKED?(this.pluginRef&&(n.host=this.pluginRef.getHost()),n.send()):i===Ku.STATE_BLOCKED&&t.push(n)}for(;t.length;)this._requests.push(t.shift())},_transform:function(e){var t=Ku.STATE_NO_BLOCKED;return this.transforms.forEach((function(n){n.isBlocking(e)?t=Ku.STATE_BLOCKED:(n.parse(e),n.getState()===Ku.STATE_OFFLINE&&(t=Ku.STATE_OFFLINE))})),t}}),Wu=Gu,zu=Ku.extend({constructor:function(e,t){Ku.prototype.constructor.apply(this,arguments),this.response={},this._viewIndex=(new Date).getTime(),this._session=t,this._httpSecure=e.options["app.https"],this._plugin=e,this.transformName="View"},init:function(){if(this._plugin.options&&this._plugin.options.offline)return this.response.host="OFFLINE",this.response.code="OFFLINE",this.response.pingTime=60,this.response.beatTime=60,this.done(),null;if(this._plugin.storage.isEnabled()&&((new Date).getTime()<this._plugin.sessionExpire+(Number(this._plugin.getDataTime())||0)&&this._plugin.getStoredData()))return this.setData(this._plugin.getStoredData()),null;var e=Fu.Service.DATA,t={outputformat:"json"};null!==(t=this._plugin.requestBuilder.buildParams(t,e))&&(Ru.notice(e+" "+t.system),"nicetest"===t.system&&Ru.error("No accountCode has been set. Please set your accountCode inside plugin's options."),new Hu(this._plugin.getHost(),e,t).on(Hu.Event.SUCCESS,this._receiveData.bind(this)).on(Hu.Event.ERROR,this._failedData.bind(this)).send())},setData:function(e){try{var t=JSON.parse(e);this._plugin.options["parse.fdsResponseHost"]&&(e=e.replace(t.q.h,this._plugin.options["parse.fdsResponseHost"](t.q.h)),t=JSON.parse(e)),this.response.msg=e,this.response.host=Lu.addProtocol(t.q.h,this._httpSecure),this.response.code=t.q.c,this.response.pingTime=t.q.pt||5,this.response.beatTime=t.q.i&&t.q.i.bt||30,this.response.sessionExpire=t.q.i&&t.q.i.exp||300,this._plugin.storage.setLocal("sessionExpire",this.response.sessionExpire),this.done()}catch(e){Ru.error("Fastdata response is invalid.")}},_receiveData:function(e,t){var n=e.getResponse();this.setData(n)},_failedData:function(e,t){Ru.error("Fastdata request has failed.")},nextView:function(){return this._viewIndex=(new Date).getTime(),this.getViewCode()},getViewCode:function(){return this.response.code+"_"+this._viewIndex},getSession:function(){return this._session},setSession:function(e){this._session=e},setHost:function(e){this.response.host=e},parse:function(e){e.host=e.host||this.response.host,e.params.system=this._plugin.getAccountCode(),e.params.sessionRoot=e.params.sessionRoot||this.getSession(),-1!==zu.EventList.PingTime.indexOf(e.service)&&(e.params.pingTime=e.params.pingTime||this.response.pingTime),-1===zu.EventList.Infinity.indexOf(e.service)?e.params.code=e.params.code||this.getViewCode():e.params.sessionId=e.params.sessionRoot,-1!==zu.EventList.CreateView.indexOf(e.service)&&(this._plugin.infinity.infinityStarted||this._plugin.storage.isEnabled()&&this._plugin.storage.getLocal("infinityStarted"))&&(e.params.parentId=e.params.sessionRoot,e.params.navContext=e.params.navContext||this._plugin.getContext())}},{EventList:{CreateView:[Fu.Service.START,Fu.Service.INIT,Fu.Service.ERROR],Infinity:[Fu.Service.NAV,Fu.Service.SESSION_START,Fu.Service.SESSION_STOP,Fu.Service.EVENT,Fu.Service.BEAT],PingTime:[Fu.Service.START,Fu.Service.PING]}}),Yu=zu,qu=Iu.extend({constructor:function(e){this._realResource=null,this._lastManifest=null,this._transportFormat=null,this.iterations=3,this._headers=e},done:function(){this.iterations=3,this.emit(qu.Event.DONE)},parse:function(e,t){},getResource:function(){return this._realResource},getTransportFormat:function(){return this._transportFormat},getLastManifest:function(){return this._lastManifest},shouldExecute:function(e){return!0}},{Event:{DONE:"done"}}),$u=qu,Xu={MP4:"MP4",MPEG2:"TS",CMF:"CMF"},Qu=$u.extend({parse:function(e,t,n){n=n||"";var i=null;try{i=/((\S*?)(\.m3u8|\.m3u|\.ts|\.m4s|\.mp4|\.cmfv|\.m4a)((\?|;)\S*|\n|\r|$))/i.exec(e.replaceAll(",URI=","\n").replaceAll('"',"").replaceAll(",","\n"))}catch(e){Ru.warn("Parse HLS Regex failed",e),this.done()}if(null!==i){var r=i[1].trim(),a="",o=n.lastIndexOf("/");if(0!==r.indexOf("http")&&-1!==o){if("/"===r[0]&&"/"!==r[1]){var s=n.indexOf("/")+1;s+=n.substr(s,n.length).indexOf("/")+1,s+=n.substr(s,n.length).indexOf("/"),r=n.slice(0,s)+r}else r=n.slice(0,o)+"/"+r;a=n.slice(0,o)+"/"}if(".m3u8"===i[3]||".m3u"===i[3])if(t)this._parseWithManifest(t,a,i);else{var l=new Hu(r,null,null,{cache:!0,requestHeaders:this._headers});l.on(Hu.Event.SUCCESS,function(e){this._parseWithManifest(e,a,i)}.bind(this)),l.on(Hu.Event.ERROR,function(e){this.done()}.bind(this)),l.send()}else{switch(i[3]){case".mp4":case".m4s":case".m4a":this._transportFormat=Xu.MP4;break;case".ts":this._transportFormat=Xu.MPEG2;break;case".cmfv":this._transportFormat=Xu.CMF}this._realResource=r,this.done()}}else this.done()},_parseWithManifest:function(e,t,n){this._lastManifest=e,this.parse(e.getResponseText(),null,t+n[2])},shouldExecute:function(e){var t=!0;e&&(t=-1!==e.getResponseText().indexOf("#EXTM3U"));return t}}),Zu=Qu,Ju=Iu.extend({constructor:function(e){this._options=Lu.assign({cdnName:null,parsers:[],requestMethod:"HEAD",requestHeaders:{},parseType:function(){return 0}},e),this._responses={}},done:function(){this.emit(Ju.Event.DONE)},addParser:function(e){return this._options.parsers.push(e),this},setCdnName:function(e){return this._options.cdnName=e,this},setRequestMethod:function(e){return this._options.requestMethod=e,this},setRequestHeader:function(e,t){return this._options.requestHeaders[e]=t,this},setParseType:function(e){return this._options.parseType=e,this},getParsedCdnName:function(){return this._cdnName},getParsedNodeHost:function(){return this._cdnNodeHost},getParsedNodeTypeString:function(){return this._cdnNodeTypeString},getParsedNodeType:function(){return this._cdnNodeType},getResponses:function(){return this._responses},parse:function(e,t){this._responses=t||{};var n=JSON.stringify(this._options.requestHeaders);this._responses[n]?this._parseResponse(this._responses[n]):this._requestResponse(e)},_requestResponse:function(e){var t=JSON.stringify(this._options.requestHeaders),n="{}"!==t,i=new Hu(e,null,null,{method:this._options.requestMethod,maxRetries:0,requestHeaders:this._options.requestHeaders,cache:!0});i.on(Hu.Event.SUCCESS,function(e){this._responses[t]=e.getResponseHeaders(),this._parseResponse(this._responses[t])}.bind(this)),i.on(Hu.Event.ERROR,function(t){n?(this._options.requestHeaders={},this._requestResponse(e)):this.done()}.bind(this)),i.send()},_parseResponse:function(e){this._options.parsers.forEach(function(t){var n=t.headerName?t.headerName.toLowerCase():"";n&&e.split("\n").forEach(function(e){var i=e.indexOf(":");-1!==i&&(e.slice(0,i).toLowerCase()===n&&this._executeParser(t,e.slice(i+1)))}.bind(this))}.bind(this)),this.done()},_executeParser:function(e,t){try{var n=e.regex.exec(t.trim());if(null!==n)switch(this._options.cdnName&&(this._cdnName=this._options.cdnName),e.element){case Ju.ElementType.HOST:this._cdnNodeHost=n[1];break;case Ju.ElementType.TYPE:this._cdnNodeTypeString=n[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case Ju.ElementType.HOST_AND_TYPE:this._cdnNodeHost=n[1],this._cdnNodeTypeString=n[2],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString);break;case Ju.ElementType.TYPE_AND_HOST:this._cdnNodeTypeString=n[1],this._cdnNodeType=this._options.parseType(this._cdnNodeTypeString),this._cdnNodeHost=n[2];break;case Ju.ElementType.NAME:this._cdnName=n[1].toUpperCase()}}catch(e){Ru.warn("CDN parsing for "+this._options.cdnName+" could not parse header value "+t)}},shouldExecute:function(){return!0}},{Event:{DONE:"done"},ElementType:{HOST:"host",TYPE:"type",HOST_AND_TYPE:"host+type",TYPE_AND_HOST:"type+host",NAME:"name"},_cdnConfigs:{},setBalancerHeaderName:function(e,t){Ju._cdnConfigs.Balancer.parsers[0].headerName=e,Ju._cdnConfigs.Balancer.parsers[1].headerName=t},create:function(e){if(Ju._cdnConfigs[e])return new Ju(Ju._cdnConfigs[e]);Ru.warn("Tried to create an unexisting CdnParser named "+e)},add:function(e,t){Ju._cdnConfigs[e]=t}});Ju.add("Level3",{cdnName:"LEVEL3",parsers:[{element:"host+type",headerName:"X-WR-Diag",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"X-WR-Diag":"host"},parseType:function(e){if(e){if(0===e.indexOf("TCP_HIT")||0===e.indexOf("TCP_MEM_HIT")||0===e.indexOf("TCP_IMS_HIT"))return 1;if(0===e.indexOf("TCP_MISS"))return 2}return 0}}),Ju.add("Cloudfront",{cdnName:"CLOUDFRT",parsers:[{element:"host",headerName:"X-Amz-Cf-Id",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(\S+)\s.+/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}}),Ju.add("Akamai",{cdnName:"AKAMAI",parsers:[{element:"type+host",headerName:"X-Cache",regex:/(.+)\sfrom.+AkamaiGHost\/(.+)\).+/},{element:"host",headerName:"akamai-mon-iucid-del",regex:/(.*)/},{element:"type",headerName:"akamai-cache-status",regex:/(.+)\sfrom\schild/}],requestHeaders:{Pragma:"akamai-x-cache-on"},parseType:function(e){var t=e.toLowerCase();return-1!==t.indexOf("hit")?1:-1!==t.indexOf("miss")?2:0}}),Ju.add("Highwinds",{cdnName:"HIGHNEGR",parsers:[{element:"host+type",headerName:"X-HW",regex:/.+,[0-9]+\.(.+)\.(.+)/}],parseType:function(e){switch(e){case"c":case"x":return 1;default:return 2}}}),Ju.add("Fastly",{cdnName:"FASTLY",parsers:[{element:"host",headerName:"X-Served-By",regex:/([^,\s]+)$/},{element:"type",headerName:"X-Cache",regex:/([^,\s]+)$/}],parseType:function(e){switch(e){case"HIT":return 1;case"MISS":return 2;default:return 0}}}),Ju.add("Telefonica",{cdnName:"TELEFO",parsers:[{element:"host+type",headerName:"x-tcdn",regex:/Host:(.+)\sType:(.+)/}],requestHeaders:{"x-tcdn":"host"},parseType:function(e){if(e){if(-1!==e.indexOf("p")||-1!==e.indexOf("c"))return 1;if(-1!==e.indexOf("i")||-1!==e.indexOf("m"))return 2}return 0}}),Ju.add("Amazon",{cdnName:"AMAZON",parsers:[{element:"host",headerName:"x-amz-cf-pop",regex:/(.+)/},{element:"type",headerName:"x-cache",regex:/(.+)\sfrom.+/}],parseType:function(e){return-1!==e.toLowerCase().indexOf("hit")?1:-1!==e.toLowerCase().indexOf("miss")?2:0}}),Ju.add("Edgecast",{cdnName:"EDGECAST",parsers:[{element:"host",headerName:"Server",regex:/\((.+)\/.+\)/},{element:"type",headerName:"X-Cache",regex:/(.+)/}],parseType:function(e){return"HIT"===e?1:2}}),Ju.add("Balancer",{parsers:[{element:"name",headerName:null,regex:/(.+)/},{element:"host",headerName:null,regex:/(.+)/}]}),Ju.add("NosOtt",{cdnName:"NOSOTT",parsers:[{element:"host",headerName:"X-NOS-Server",regex:/(.+)/},{element:"type",headerName:"X-Cache",regex:/(.*)/}],parseType:function(e){switch(e){case"Hit":return 1;case"Miss":return 2;default:return 0}}});var ec=Ju,tc=Iu.extend({constructor:function(e){this.plugin=e,this.headerName="x-cdn"},init:function(){var e=null;this.plugin&&(e=this.plugin.getAdapter()&&this.plugin.getAdapter().getURLToParse()?this.plugin.getAdapter().getURLToParse():this.plugin.getResource()),this.plugin&&this.plugin.getAdapter()&&this.plugin.getAdapter().flags.isStarted&&this._request(e)},done:function(e){this.emit(tc.Events.DONE,e)},error:function(){this.emit(tc.Events.ERROR)},_successfulRequest:function(e){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"]));var t=e.getResponseHeaders().split("\n"),n=null;for(var i in t){var r=t[i],a=r.indexOf(this.headerName);a>-1&&(n=r.substring(a+this.headerName.length+1,r.length-1).replace(" ",""))}this.done(n)},_failedRequest:function(){setTimeout(this.init.bind(this),1e3*parseInt(this.plugin.options["parse.cdnTTL"])),Ru.warn("CDN switch detection request failed"),this.error()},_request:function(e){var t=new Hu(e,null,null,{method:"HEAD",cache:!0});t.on(Hu.Event.SUCCESS,this._successfulRequest.bind(this)),t.on(Hu.Event.ERROR,this._failedRequest.bind(this)),t.send()}},{Events:{DONE:"done",ERROR:"error"}}),nc=tc,ic=$u.extend({parse:function(e,t){if(t)this.parseLocation(t,e);else{var n=new Hu(e,null,null,{cache:!0,requestHeaders:this._headers});n.on(Hu.Event.SUCCESS,function(t){this.parseLocation(t,e)}.bind(this)),n.on(Hu.Event.ERROR,function(e){this.done()}.bind(this)),n.send()}},parseLocation:function(e,t){this.iterations--;var n=new RegExp(/<Location>([\s\S]+)<\/Location>/);try{this._lastManifest=e;var i=e.getResponseText(),r=n.exec(i);if(r&&r[1])var a=this._htmlDecode(r[1].replace("\n",""));a&&a!==t&&this.iterations>0?this.parse(a):this.parseFinalResource(i,t)}catch(e){Ru.warn("Dash parse failed"),this.done()}},_htmlDecode:function(e){if("undefined"!=typeof document&&"function"==typeof document.createElement){var t=document.createElement("textarea");return t.innerHTML=e,t.childNodes&&t.childNodes.length?t.childNodes[0].nodeValue:e}return e},parseFinalResource:function(e,t){var n=new RegExp(/<BaseURL>[\r\n]*(.*?)[\r\n]*<\/BaseURL>/),i=new RegExp(/<SegmentURL[\s\S]*media="([^"]+)/),r=new RegExp(/<SegmentTemplate[\s\S]*media="([^"]+)/),a=null;try{a=n.exec(e)||r.exec(e)||i.exec(e),this._getManifestMetadata(e),a&&a[1]&&this._isFullUrl(a[1])?a[1].indexOf('"')>0?this._realResource=a[1].substr(0,a[1].indexOf('"')).replace("\n",""):this._realResource=a[1].replace("\n",""):this._realResource=t}catch(e){Ru.warn("Dash manifest parse failed")}this.done()},_getManifestMetadata:function(e){try{var t=new RegExp(/<AdaptationSet[\s\S]*mimeType="video\/([^"]+)/).exec(e),n=null;switch(t[1]){case"mp4":case"m4s":n=Xu.MP4;break;case"mp2t":n=Xu.MPEG2;break;case"cmfv":n=Xu.CMF}this._transportFormat=n}catch(e){Ru.warn("Couldnt find the transport format")}},_isFullUrl:function(e){return-1!==e.indexOf("http")},shouldExecute:function(e){var t=!0;e&&(t=-1!==e.getResponseText().indexOf("<MPD"));return t}}),rc=ic,ac=$u.extend({parse:function(e,t){if(t)this._parseWithManifest(t);else{this._realResource=e;var n=new Hu(e,null,null,{cache:!0,requestHeaders:this._headers});n.on(Hu.Event.SUCCESS,function(e){this._parseWithManifest(e)}.bind(this)),n.on(Hu.Event.ERROR,function(e){this.done()}.bind(this)),n.send()}},_parseWithManifest:function(e){this._lastManifest=e;var t=e.getResponseHeaders(),n=!1;e&&e.xhr&&e.xhr.responseURL&&e.xhr.responseURL!==this._realResource?(this._realResource=e.xhr.responseURL,this.parse(this._realResource),n=!0):t.split("\n").forEach(function(e){e.startsWith("Location:")&&(this._realResource=e.slice(10),this.parse(this._realResource),n=!0)}.bind(this)),n||this.done()}}),oc=Ku.extend({constructor:function(e){oc.__super__.constructor.apply(this,arguments),this._plugin=e,this._realResource=null,this._transportFormat=null,this._initResource=null,this._cdnName=null,this._cdnNodeHost=null,this._cdnNodeTypeString=null,this._cdnNodeType=null,this._responses={},this._isBusy=!1,this.transformName="Resource"},getResource:function(){return this._realResource},_getInitialCdnResource:function(){return this._realResource||this._initResource},getTransportFormat:function(){return this._transportFormat},getCdnName:function(){return this._cdnName},getNodeHost:function(){return this._cdnNodeHost},getNodeTypeString:function(){return this._cdnNodeTypeString},getNodeType:function(){return this._cdnNodeType},init:function(e){e?this._isBusy||(this._isBusy=!0,this._initResource=e,this._parseManifestEnabled=this._plugin.isParseManifest(),this._cdnEnabled=this._plugin.isParseCdnNode(),this._cdnList=this._plugin.getParseCdnNodeList().slice(),ec.setBalancerHeaderName(this._plugin.getParseCdnNodeNameHeader(),this._plugin.getParseNodeHeader()),this._setTimeout(),this._parseManifestEnabled?this._isFinalUrl(this._initResource)?(this._realResource=this._initResource,this.done()):this.parseManifest():this._parseCDN()):this.done()},_isFinalUrl:function(e){var t=[".ts",".mp4",".m4s",".cmfv"];for(var n in e=e||"",t){var i=t[n];if(e.lastIndexOf(i)===e.length-i.length)return!0}return!1},_setTimeout:function(){var e=function(){this._isBusy&&(this.done(),Ru.warn("ResourceTransform has exceded the maximum execution time (3s) and will be aborted."))}.bind(this);try{this._parseTimeout=setTimeout(e,3e3)}catch(t){"undefined"!=typeof atv?this._parseTimeout=atv.setTimeout(e,3e3):Ru.error(t)}},parseManifest:function(e,t){var n=this._plugin.options["parse.manifest.auth"],i=[new ac(n),new rc(n),new Zu(n)];this._parseManifest(i,e,t||this._initResource)},_parseManifest:function(e,t,n,i){if(e.length>0){var r=e[0];r.shouldExecute(t)?(r.on($u.Event.DONE,function(){this._parseManifest(e.slice(1,e.length),r.getLastManifest(),r.getResource(),r.getTransportFormat()||i)}.bind(this)),r.parse(n,t)):this._parseManifest(e.slice(1,e.length),t,n,i)}else this._transportFormat=i,this._realResource=n,this._parseCDN()},_parseCDN:function(){if(this._plugin.isCdnSwitch())this.switchDetector=new nc(this._plugin),this.switchDetector.on(nc.Events.DONE,function(e){this._cdnName=e.data,this.done()}.bind(this)),this.switchDetector.on(nc.Events.ERROR,function(){this.done()}.bind(this)),this.switchDetector.init();else if(this._cdnEnabled&&this._cdnList.length>0){var e=this._cdnList.shift();if(this.getNodeHost())return;var t=ec.create(e);t?(t.on(ec.Event.DONE,function(){this._responses=t.getResponses(),this._cdnName=t.getParsedCdnName(),this._cdnNodeHost=t.getParsedNodeHost(),this._cdnNodeTypeString=t.getParsedNodeTypeString(),this._cdnNodeType=t.getParsedNodeType(),this.getNodeHost()?this.done():this._parseCDN()}.bind(this)),t.parse(this._getInitialCdnResource(),this._responses)):this._parseCDN()}else this.done()},parse:function(e){if(e.service===Fu.Service.START){var t=this._plugin.requestBuilder.lastSent;t.parsedResource=e.params.parsedResource=this.getResource()||e.params.parsedResource,t.transportFormat=e.params.transportFormat=this.getTransportFormat()||e.params.transportFormat,this._cdnEnabled&&(t.cdn=e.params.cdn=e.params.cdn||this.getCdnName(),t.nodeHost=e.params.nodeHost=this.getNodeHost()||e.params.nodeHost,t.nodeType=e.params.nodeType=this.getNodeType()||e.params.nodeType,t.nodeTypeString=e.params.nodeTypeString=this.getNodeTypeString()||e.params.nodeTypeString)}}}),sc=oc,lc=Ku.extend({constructor:function(e,t){this._sendRequest=!1,this._isBusy=!1,this.plugin=e,this.session=t,this.transformName="Offline"},parse:function(e){e&&this.plugin.offlineStorage&&this.plugin.offlineStorage.addEvent(e.service,e.params)},hasToSend:function(e){return!1},getState:function(){return Ku.STATE_OFFLINE}}),uc=lc,cc=Su.extend({exists:function(e){return cc.Dictionary.hasOwnProperty(e)},getNewName:function(e){var t=cc.Dictionary[e];return Ru.warn('The option "'+e+'" is deprecated, use "'+t+'" instead'),t}},{Dictionary:{httpSecure:"app.https",username:"user.name",anonymousUser:"user.anonymousId",obfuscateIp:"user.obfuscateIp",userType:"user.type","content.title2":"content.program","background.settings.iphone":"background.settings.iOS","parse.hls":"parse.manifest","parse.dash":"parse.manifest","parse.locationHeader":"parse.manifest","extraparam.1":"content.customDimension.1","extraparam.2":"content.customDimension.2","extraparam.3":"content.customDimension.3","extraparam.4":"content.customDimension.4","extraparam.5":"content.customDimension.5","extraparam.6":"content.customDimension.6","extraparam.7":"content.customDimension.7","extraparam.8":"content.customDimension.8","extraparam.9":"content.customDimension.9","extraparam.10":"content.customDimension.10","extraparam.11":"content.customDimension.11","extraparam.12":"content.customDimension.12","extraparam.13":"content.customDimension.13","extraparam.14":"content.customDimension.14","extraparam.15":"content.customDimension.15","extraparam.16":"content.customDimension.16","extraparam.17":"content.customDimension.17","extraparam.18":"content.customDimension.18","extraparam.19":"content.customDimension.19","extraparam.20":"content.customDimension.20","ad.extraparam.1":"ad.customDimension.1","ad.extraparam.2":"ad.customDimension.2","ad.extraparam.3":"ad.customDimension.3","ad.extraparam.4":"ad.customDimension.4","ad.extraparam.5":"ad.customDimension.5","ad.extraparam.6":"ad.customDimension.6","ad.extraparam.7":"ad.customDimension.7","ad.extraparam.8":"ad.customDimension.8","ad.extraparam.9":"ad.customDimension.9","ad.extraparam.10":"ad.customDimension.10"}}),dc=cc,hc={HDS:"HDS",HLS:"HLS",MSS:"MSS",DASH:"DASH",RTMP:"RTMP",RTP:"RTP",RTSP:"RTSP",DVB:"DVB",DVBC:"DVB-C",DVBT:"DVB-T",DVBT2:"DVB-T2",MULTICAST:"MULTICAST"},pc=Su.extend({constructor:function(e){this.enabled=!0,this.host="a-fds.youborafds01.com",this.accountCode="nicetest",this.authToken=null,this.authType="Bearer",this.preventZombieViews=!0,this.offline=!1,this.referer=null,this.referral=null,this.disableCookies=!0,this.forceCookies=!1,this.disableStorage=!1,this["user.email"]=null,this["user.type"]=null,this["user.name"]=null,this["user.obfuscateIp"]=!1,this["user.anonymousId"]=null,this["user.privacyProtocol"]=null,this["parse.manifest"]=!1,this["parse.manifest.auth"]={},this["parse.cdnNameHeader"]="x-cdn-forward",this["parse.cdnNodeHeader"]="",this["parse.cdnNode"]=!1,this["parse.cdnNode.list"]=["Akamai","Amazon","Cloudfront","Level3","Fastly","Highwinds","Telefonica","Edgecast","NosOtt"],this["parse.fdsResponseHost"]=null,this["parse.cdnSwitchHeader"]=!1,this["parse.cdnTTL"]=60,this["network.ip"]=null,this["network.isp"]=null,this["network.connectionType"]=null,this["device.id"]=null,this["device.code"]=null,this["device.model"]=null,this["device.brand"]=null,this["device.type"]=null,this["device.name"]=null,this["device.osName"]=null,this["device.osVersion"]=null,this["device.browserName"]=null,this["device.browserVersion"]=null,this["device.browserType"]=null,this["device.browserEngine"]=null,this["device.EDID"]=null,this["device.isAnonymous"]=!1,this["content.transactionCode"]=null,this["content.resource"]=null,this["content.isLive"]=null,this["content.isLive.noSeek"]=!1,this["content.isLive.noMonitor"]=!1,this["content.title"]=null,this["content.program"]=null,this["content.duration"]=null,this["content.fps"]=null,this["content.segmentDuration"]=null,this["content.bitrate"]=null,this["content.totalBytes"]=null,this["content.sendTotalBytes"]=!1,this["content.throughput"]=null,this["content.rendition"]=null,this["content.cdn"]=null,this["content.cdnNode"]=null,this["content.cdnType"]=null,this["content.metadata"]={},this["content.metrics"]={},this["content.streamingProtocol"]=null,this["content.transportFormat"]=null,this["content.package"]=null,this["content.saga"]=null,this["content.tvShow"]=null,this["content.season"]=null,this["content.episodeTitle"]=null,this["content.channel"]=null,this["content.id"]=null,this["content.imdbId"]=null,this["content.gracenoteId"]=null,this["content.type"]=null,this["content.genre"]=null,this["content.language"]=null,this["content.autodetect.language"]=!0,this["content.subtitles"]=null,this["content.autodetect.subtitles"]=!0,this["content.contractedResolution"]=null,this["content.cost"]=null,this["content.price"]=null,this["content.playbackType"]=null,this["content.drm"]=null,this["content.encoding.videoCodec"]=null,this["content.encoding.audioCodec"]=null,this["content.encoding.codecSettings"]=null,this["content.encoding.codecProfile"]=null,this["content.encoding.containerFormat"]=null,this["ad.metadata"]={},this["ad.campaign"]=null,this["ad.creativeId"]=null,this["ad.provider"]=null,this["ad.resource"]=null,this["ad.title"]=null,this["ad.duration"]=null,this["ad.expectedPattern"]=null,this["ad.givenAds"]=null,this["ad.breaksTime"]=null,this["ad.expectedBreaks"]=null,this["ad.givenBreaks"]=null,this["ad.ignore"]=!1,this["ad.blockerDetected"]=null,this["app.name"]=null,this["app.releaseVersion"]=null,this["app.https"]=!1,this["background.enabled"]=!0,this["background.settings"]=null,this["background.settings.android"]="stop",this["background.settings.iOS"]="stop",this["background.settings.desktop"]=null,this["background.settings.tv"]="stop",this["background.settings.playstation"]="stop",this["smartswitch.configCode"]=null,this["smartswitch.groupCode"]=null,this["smartswitch.contractCode"]=null,this["content.customDimensions"]={},this["content.customDimension.1"]=null,this["content.customDimension.2"]=null,this["content.customDimension.3"]=null,this["content.customDimension.4"]=null,this["content.customDimension.5"]=null,this["content.customDimension.6"]=null,this["content.customDimension.7"]=null,this["content.customDimension.8"]=null,this["content.customDimension.9"]=null,this["content.customDimension.10"]=null,this["content.customDimension.11"]=null,this["content.customDimension.12"]=null,this["content.customDimension.13"]=null,this["content.customDimension.14"]=null,this["content.customDimension.15"]=null,this["content.customDimension.16"]=null,this["content.customDimension.17"]=null,this["content.customDimension.18"]=null,this["content.customDimension.19"]=null,this["content.customDimension.20"]=null,this["ad.customDimension.1"]=null,this["ad.customDimension.2"]=null,this["ad.customDimension.3"]=null,this["ad.customDimension.4"]=null,this["ad.customDimension.5"]=null,this["ad.customDimension.6"]=null,this["ad.customDimension.7"]=null,this["ad.customDimension.8"]=null,this["ad.customDimension.9"]=null,this["ad.customDimension.10"]=null,this.forceInit=!1,this["session.metrics"]={},this["session.context"]=!1,this["errors.fatal"]=[],this["errors.nonFatal"]=[],this["errors.ignore"]=[],this.linkedViewId=null,this.waitForMetadata=!1,this.pendingMetadata=[],this.method=Uu.GET,this["playhead.monitor"]=!0,this["readyState.monitor"]=!0,this.setOptions(e)},setOptions:function(e,t){var n=!1;if(void 0===t){t=this,n=!0;var i=new dc}if(void 0!==e)for(var r in e){var a=!1,o=null;n&&(this.hasOwnProperty(r)||(i.exists(r)?(o=i.getNewName(r),a=!0):Ru.warn('The option "'+r+'" does not exist, so it cannot be set'))),"object"!=typeof t[r]||null===t[r]||Array.isArray(t[r])||"parse.cdnNode.list"!==r?a?t[o]=e[r]:t[r]=e[r]:this.setOptions(e[r],t[r])}},setExtraParams:function(e){if("object"==typeof e&&e.length){for(e.length>=20&&(e=e.slice(0,20));e.length<20;)e.push(null);e.forEach(function(e,t){this["content.customDimension."+(t+1).toString()]=e}.bind(this))}},setCustomDimensions:function(){pc.prototype.setExtraParams.apply(this,arguments)},setAdExtraParams:function(e){if("object"==typeof e&&e.length){for(e.length>=10&&(e=e.slice(0,10));e.length<10;)e.push(null);e.forEach(function(e,t){this["ad.customDimension."+(t+1).toString()]=e}.bind(this))}},setAdCustomDimensions:function(){pc.prototype.setAdExtraParams.apply(this,arguments)}},{StreamingProtocol:hc,TransportFormat:Xu,RequestMethod:Uu}),fc=pc,gc=Ku.extend({_services:[Fu.Service.INIT,Fu.Service.START,Fu.Service.OFFLINE_EVENTS],isBlocking:function(e){if(this._isBusy&&null!=e)if(-1!==this._services.indexOf(e.service))this.done();else if(e.service===Fu.Service.ERROR)return!1;return Ku.prototype.isBlocking.apply(this,arguments)}}),mc=gc,vc=Su.extend({constructor:function(e,t,n,i){this.prefix=e||"youbora",this.disableCookies=t,this.forceCookies=n,this.disabled=i},isEnabled:function(){if(this.disabled)return!1;var e=!0;if(!this.forceCookies)try{localStorage.setItem(this.prefix+".test","true"),localStorage.removeItem(this.prefix+".test")}catch(t){e=!1}return e},setLocal:function(e,t){if(this.disabled)return null;var n=null;try{n=!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?localStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".local."+e,t)}catch(e){Ru.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return n},getLocal:function(e){return this.disabled?null:this._localGetRemove("getItem","_getCookie",e)},removeLocal:function(e){return this.disabled?null:this._localGetRemove("removeItem","_removeCookie",e)},_localGetRemove:function(e,t,n){var i=null;try{i=!this.forceCookies&&("undefined"!=typeof localStorage&&localStorage||this.disableCookies)?localStorage[e](this.prefix+"."+n):this[t](this.prefix+".local."+n)}catch(e){Ru.error("Youbora Infinity needs localStorage or cookies, not supported by your browser.")}return i},setSession:function(e,t){if(this.disabled)return null;var n=null;try{n=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage.setItem(this.prefix+"."+e,t):this._setCookie(this.prefix+".session."+e,t)}catch(e){Ru.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return n},getSession:function(e){return this.disabled?null:this._sessionGetRemove("getItem","_getCookie",e)},removeSession:function(e){return this.disabled?null:this._sessionGetRemove("removeItem","_removeCookie",e)},_sessionGetRemove:function(e,t,n){var i=null;try{i=!this.forceCookies&&("undefined"!=typeof sessionStorage&&sessionStorage||this.disableCookies)?sessionStorage[e](this.prefix+"."+n):this[t](this.prefix+".session."+n)}catch(e){Ru.error("Youbora Infinity needs sessionStorage or cookies, not supported by your browser.")}return i},getStorages:function(e){return this.getSession(e)||this.getLocal(e)},setStorages:function(e,t){this.setSession(e,t),this.setLocal(e,t)},removeStorages:function(e){this.removeSession(e),this.removeLocal(e)},_setCookie:function(e,t){if("undefined"!=typeof document){var n=";";"undefined"!=typeof location&&(n+="domain="+location.host.split(".").reverse().splice(0,2).reverse().join(".")+";path=/;"),document.cookie=e+"="+t+n}},_getCookie:function(e){if("undefined"!=typeof document)for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},_removeCookie:function(e){this._setCookie(e,"")}}),yc=vc,bc=Su.extend({constructor:function(){this.storage=new yc("youboraOffline",!0),this.actualView=null,this.viewList=[],this.givenIds=[],this._getOldViewList()},_newView:function(){var e=this._getValidId();this.storage.setLocal(e,""),this.viewList.push(e),this.storage.setLocal("views",this.viewList),this.actualView=e},addEvent:function(e,t){if("/start"===e&&this._newView(),"/init"===e)return null;if(!this.actualView)return null;var n='{"request":"'+e.slice(1)+'",';for(var i in n+='"unixtime":'+Date.now()+",",t){if(void 0===t[i])break;n+='"'+i+'":',"code"===i?n+='"CODE_PLACEHOLDER",':"sessionId"===i?n+='"SESSION_PLACEHOLDER",':"sessionRoot"===i?n+='"ROOT_PLACEHOLDER",':"string"==typeof t[i]?n+='"'+t[i]+'",':"object"==typeof t[i]?n+='"'+JSON.stringify(t[i]).replace(/"/g,'\\"')+'",':n+=t[i]+","}n=n.slice(0,-1),n+="}";var r=this.storage.getLocal(this.actualView);""!==r&&(r+=","),this.storage.setLocal(this.actualView,r+n)},getView:function(){if(this.viewList.length>this.givenIds.length)for(var e=0;;){var t=this.viewList[e];if(this.givenIds.indexOf(t)<0)return this.givenIds.push(t),["["+this.storage.getLocal(t)+"]",t];e++}return[null,null]},removeView:function(e){this.storage.removeLocal(e);var t=this.viewList.indexOf(e);-1!==t&&this.viewList.splice(t,1),-1!==(t=this.givenIds.indexOf(e))&&this.givenIds.splice(t,1),this.storage.setLocal("views",this.viewList.toString()),e===this.actualView&&(this.actualView=null)},_getOldViewList:function(){var e="";this.storage.getLocal("views")?e=this.storage.getLocal("views"):this.storage.setLocal("views",""),""===e?this.viewList=[]:"function"==typeof e.split&&(this.viewList=e.split(","))},_getValidId:function(){var e=Math.floor(1e8*Math.random()).toString();return this.viewList.indexOf(e)>=0?this._getValidId():e},sent:function(){this.givenIds=[]}}),Ec=bc,Tc=["accountCode","username","anonymousUser","rendition","deviceInfo","player","title","title2","live","segmentDuration","mediaDuration","mediaResource","parsedResource","transactionCode","properties","cdn","playerVersion","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","dimensions","playerStartupTime","obfuscateIp","privacyProtocol","p2pEnabled","pluginVersion","pluginInfo","isp","connectionType","ip","referer","userType","streamingProtocol","transportFormat","householdId","adsBlocked","adsExpected","deviceUUID","smartswitchConfigCode","smartswitchGroupCode","smartswitchContractCode","libVersion","nodeHost","nodeType","appName","appReleaseVersion","package","saga","tvshow","season","titleEpisode","channel","imdbID","gracenoteID","contentType","genre","contentLanguage","subtitles","cost","price","playbackType","email","drm","videoCodec","audioCodec","codecSettings","codecProfile","containerFormat","contentId","contractedResolution","linkedViewId","edid","cdnBalancerResponseUUID","triggeredEvents"],Ac=["player","playhead","adTitle","position","adDuration","adCampaign","adCreativeId","adProvider","adResource","adPlayerVersion","adProperties","adAdapterVersion","adInsertionType","extraparam1","extraparam2","extraparam3","extraparam4","extraparam5","extraparam6","extraparam7","extraparam8","extraparam9","extraparam10","fullscreen","audio","skippable","adNumber","adNumberInBreak","breakNumber"],kc=Su.extend({constructor:function(e){this._plugin=e,this._adNumber=0,this._adNumberInBreak=0,this.lastSent={}},fetchParams:function(e,t,n){e=e||{},t=t||[];for(var i=0;i<t.length;i++){var r=t[i];if(!e[r]){var a=kc.getters[r];if(this._plugin[a]){var o=this._plugin[a]();null===o||n&&this.lastSent[r]===o||(e[r]=o,this.lastSent[r]=o)}else Ru.warn("Trying to call undefined getter "+r+":"+a)}}return e},getGetters:function(){return kc.getters},buildBody:function(e){return this.fetchParams(null,kc.bodyParams[e],!1)},buildParams:function(e,t){return e=e||{},this.fetchParams(e,kc.params[t],!1),this.fetchParams(e,kc.differentParams[t],!0),e},getNewAdNumber:function(){var e=this.lastSent.adNumber;return e&&this.lastSent.position===this._plugin.getAdPosition()?e+=1:e=1,this.lastSent.adNumber=e,e},getNewAdNumberInBreak:function(){return this._adNumberInBreak++,this.lastSent.adNumberInBreak=this._adNumberInBreak,this._adNumberInBreak},getNewBreakNumber:function(){var e=1;return this._adNumberInBreak=0,this.lastSent.breakNumber&&(e=this.lastSent.breakNumber+1),this.lastSent.breakNumber=e,e},getChangedEntities:function(){return this.fetchParams({},kc.differentParams.entities,!0)}},{params:{"/data":["system","pluginVersion","requestNumber","username"],"/init":Tc,"/start":Tc,"/joinTime":["joinDuration","playhead","bitrate","triggeredEvents"],"/pause":["playhead","triggeredEvents"],"/resume":["pauseDuration","playhead","triggeredEvents"],"/seek":["seekDuration","playhead","triggeredEvents"],"/bufferUnderrun":["bufferDuration","playhead","triggeredEvents"],"/error":["player","playhead","triggeredEvents"].concat(Tc),"/stop":["bitrate","totalBytes","playhead","pauseDuration","metrics","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","triggeredEvents"],"/infinity/video/event":[],"/adInit":Ac,"/adStart":Ac,"/adJoin":["playhead","position","adJoinDuration","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adPause":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adResume":["playhead","position","adPlayhead","adPauseDuration","adNumber","adNumberInBreak","breakNumber"],"/adBufferUnderrun":["playhead","position","adPlayhead","adBufferDuration","adNumber","adNumberInBreak","breakNumber"],"/adStop":["playhead","position","adPlayhead","adBitrate","adTotalDuration","pauseDuration","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/adClick":["playhead","position","adPlayhead","adNumber","adNumberInBreak","breakNumber"],"/adError":["playhead"].concat(Ac),"/adManifest":["givenBreaks","expectedBreaks","expectedPattern","breaksTime"],"/adBreakStart":["position","givenAds","expectedAds","breakNumber","adInsertionType"],"/adBreakStop":["position","breakNumber"],"/adQuartile":["position","adViewedDuration","adViewability","adNumber","adNumberInBreak","breakNumber"],"/ping":["droppedFrames","playrate","cdnDownloadedTraffic","multiCdnInfo","p2pDownloadedTraffic","uploadTraffic","latency","packetLoss","packetSent","metrics","totalBytes","segmentDuration"],"/infinity/session/start":["accountCode","username","userType","anonymousUser","route","page","referer","referral","language","deviceInfo","adsBlocked","deviceUUID","libVersion","appName","appReleaseVersion","isp","connectionType","ip","obfuscateIp","privacyProtocol","dimensions","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","edid"],"/infinity/session/stop":["sessionMetrics"],"/infinity/session/nav":["route","page","scrollDepth"],"/infinity/session/beat":["sessionMetrics"],"/infinity/session/event":["accountCode"],"/offlineEvents":{}},bodyParams:{"/offlineEvents":["viewJson"]},differentParams:{entities:["rendition","title","title2","param1","param2","param3","param4","param5","param6","param7","param8","param9","param10","param11","param12","param13","param14","param15","param16","param17","param18","param19","param20","cdn","nodeHost","nodeType","nodeTypeString","subtitles","contentLanguage"]},getters:{requestNumber:"getRequestNumber",playhead:"getPlayhead",playrate:"getPlayrate",fps:"getFramesPerSecond",segmentDuration:"getSegmentDuration",droppedFrames:"getDroppedFrames",mediaDuration:"getDuration",bitrate:"getBitrate",totalBytes:"getTotalBytes",throughput:"getThroughput",rendition:"getRendition",title:"getTitle",title2:"getTitle2",live:"getIsLive",mediaResource:"getResource",parsedResource:"getParsedResource",transactionCode:"getTransactionCode",properties:"getMetadata",playerVersion:"getPlayerVersion",player:"getPlayerName",cdn:"getCdn",pluginVersion:"getPluginVersion",libVersion:"getLibVersion",userType:"getUserType",streamingProtocol:"getStreamingProtocol",transportFormat:"getTransportFormat",obfuscateIp:"getObfuscateIp",privacyProtocol:"getPrivacyProtocol",householdId:"getHouseholdId",latency:"getLatency",packetLoss:"getPacketLoss",packetSent:"getPacketSent",metrics:"getVideoMetrics",dimensions:"getCustomDimensions",param1:"getExtraparam1",param2:"getExtraparam2",param3:"getExtraparam3",param4:"getExtraparam4",param5:"getExtraparam5",param6:"getExtraparam6",param7:"getExtraparam7",param8:"getExtraparam8",param9:"getExtraparam9",param10:"getExtraparam10",param11:"getExtraparam11",param12:"getExtraparam12",param13:"getExtraparam13",param14:"getExtraparam14",param15:"getExtraparam15",param16:"getExtraparam16",param17:"getExtraparam17",param18:"getExtraparam18",param19:"getExtraparam19",param20:"getExtraparam20",extraparam1:"getAdExtraparam1",extraparam2:"getAdExtraparam2",extraparam3:"getAdExtraparam3",extraparam4:"getAdExtraparam4",extraparam5:"getAdExtraparam5",extraparam6:"getAdExtraparam6",extraparam7:"getAdExtraparam7",extraparam8:"getAdExtraparam8",extraparam9:"getAdExtraparam9",extraparam10:"getAdExtraparam10",position:"getAdPosition",adNumber:"getAdNumber",adNumberInBreak:"getAdNumberInBreak",breakNumber:"getBreakNumber",adPlayhead:"getAdPlayhead",adDuration:"getAdDuration",adCampaign:"getAdCampaign",adCreativeId:"getAdCreativeId",adBitrate:"getAdBitrate",adTitle:"getAdTitle",adResource:"getAdResource",adPlayerVersion:"getAdPlayerVersion",adProperties:"getAdMetadata",adAdapterVersion:"getAdAdapterVersion",givenBreaks:"getGivenBreaks",expectedBreaks:"getExpectedBreaks",expectedPattern:"getExpectedPattern",breaksTime:"getBreaksTime",givenAds:"getGivenAds",expectedAds:"getExpectedAds",adsExpected:"getAdsExpected",adViewedDuration:"getAdViewedDuration",adViewability:"getAdViewability",fullscreen:"getIsFullscreen",audio:"getAudioEnabled",skippable:"getIsSkippable",adProvider:"getAdProvider",adInsertionType:"getAdInsertionType",pluginInfo:"getPluginInfo",isp:"getIsp",connectionType:"getConnectionType",ip:"getIp",deviceInfo:"getDeviceInfo",edid:"getEDID",system:"getAccountCode",accountCode:"getAccountCode",username:"getUsername",anonymousUser:"getAnonymousUser",joinDuration:"getJoinDuration",bufferDuration:"getBufferDuration",seekDuration:"getSeekDuration",pauseDuration:"getPauseDuration",adJoinDuration:"getAdJoinDuration",adBufferDuration:"getAdBufferDuration",adPauseDuration:"getAdPauseDuration",adTotalDuration:"getAdTotalDuration",referer:"getReferer",referral:"getReferral",language:"getLanguage",nodeHost:"getNodeHost",nodeType:"getNodeType",nodeTypeString:"getNodeTypeString",route:"getReferer",page:"getPageName",playerStartupTime:"getPlayerStartupTime",pageLoadTime:"getPageLoadTime",cdnDownloadedTraffic:"getCdnTraffic",multiCdnInfo:"getMultiCdnInfo",p2pDownloadedTraffic:"getP2PTraffic",p2pEnabled:"getIsP2PEnabled",uploadTraffic:"getUploadTraffic",cdnBalancerResponseUUID:"getBalancerResponseId",viewJson:"getOfflineView",deviceUUID:"getDeviceUUID",sessionMetrics:"getSessionMetrics",scrollDepth:"getScrollDepth",adsBlocked:"getIsBlocked",linkedViewId:"getLinkedViewId",smartswitchConfigCode:"getSmartswitchConfigCode",smartswitchGroupCode:"getSmartswitchGroupCode",smartswitchContractCode:"getSmartswitchContractCode",appName:"getAppName",appReleaseVersion:"getAppReleaseVersion",package:"getPackage",saga:"getSaga",tvshow:"getTvShow",season:"getSeason",titleEpisode:"getEpisodeTitle",channel:"getChannel",drm:"getDRM",videoCodec:"getVideoCodec",audioCodec:"getAudioCodec",codecSettings:"getCodecSettings",codecProfile:"getCodecProfile",containerFormat:"getContainerFormat",contentId:"getID",imdbID:"getImdbId",gracenoteID:"getGracenoteID",contentType:"getType",genre:"getGenre",contentLanguage:"getVideoLanguage",subtitles:"getSubtitles",contractedResolution:"getContractedResolution",cost:"getCost",price:"getPrice",playbackType:"getPlaybackType",email:"getEmail"}}),_c=kc,Sc=Ku.extend({isBlocking:function(e){return!e.params.sessionId}}),wc=Sc,Cc=Iu.extend({constructor:function(e){this._plugin=e,this.infinityStopped=!1,this.infinityStarted=!1},andBeyond:function(){Cc.prototype.begin.apply(this,arguments)},begin:function(e,t){(t=t||!1)&&(this._plugin.storage.removeStorages("infinityStarted"),this._plugin.storage.removeStorages("data"),this._plugin.restartViewTransform()),this._comm=new Wu(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new wc(this._plugin)),this._plugin&&this._plugin.storage&&"function"==typeof this._plugin.storage.getLocal&&(this._registeredProperties=this._plugin.storage.getLocal("inifnityRegisteredProperties")),this.fireSessionStart(e)},_setLastActive:function(){this._firstActive||(this._firstActive=this.getFirstActive()),this._plugin.storage.setStorages("lastactive",(new Date).getTime())},getFirstActive:function(){return Number(this._plugin.getLastActive())||0},getComm:function(){return this._comm},fireSessionStart:function(e){this.infinityStopped&&(this._plugin.restartViewTransform(),this._comm=new Wu(this._plugin),this._comm.addTransform(this._plugin.viewTransform),this._comm.addTransform(new wc(this._plugin)),this.infinityStopped=!1),this.infinityStarted||(this._plugin.storage.setLocal("infinityStarted","true"),this.infinityStarted=!0,this.emit(Cc.Event.SESSION_START,this._getParamsJson(e,null,null,!0,!0)),this._setLastActive())},fireSessionStop:function(e){this.infinityStarted&&(this.infinityStopped=!0,this.infinityStarted=!1,this._plugin.storage.removeStorages("infinityStarted"),this.emit(Cc.Event.SESSION_STOP,e),this._plugin.storage.removeStorages("data"),this._plugin.storage.removeStorages("session"),this._plugin.storage.removeStorages("lastactive"))},newSession:function(e,t){this.isActive()&&(this.infinityStarted?this.fireSessionStop():(this._plugin.storage.removeStorages("infinityStarted"),this._plugin.storage.removeStorages("data"),this._comm&&this._comm.removeTransform(this._plugin.viewTransform),this._plugin.restartViewTransform(),this._comm&&this._comm.addTransform(this._plugin.viewTransform))),this._plugin.setOptions(e),this.begin(t)},fireNav:function(e){this.isActive()&&(this.infinityStarted=!0,this.emit(Cc.Event.NAV,this._getParamsJson(e,null,null,!0)))},_sendExtraBeat:function(){if(this._plugin&&this._plugin._beat){var e=(new Date).getTime(),t=this._plugin._beat.chrono.startTime?e-this._plugin._beat.chrono.startTime:0;this._plugin._sendBeat(t),this._plugin._beat.chrono.startTime=e}this._setLastActive()},fireEvent:function(e,t,n,i){if(this.infinityStarted){var r=this._getParamsJson(t,n,e);Lu.assign(r.params,i||{}),this.emit(Cc.Event.EVENT,r),this._setLastActive()}},register:function(e,t){this._registeredProperties={dimensions:e,values:t},this._plugin.storage.setLocal("inifnityRegisteredProperties",JSON.stringify(this._registeredProperties))},registerOnce:function(e,t){this._registeredProperties||this.register(e,t)},unregister:function(){this._registeredProperties=null,this._plugin.storage.removeLocal("inifnityRegisteredProperties")},_getParamsJson:function(e,t,n,i,r){var a={};if(n&&(a.name=n),a.dimensions=e||{},a.values=t||{},this._registeredProperties){for(var o in this._registeredProperties.dimensions)a.dimensions[o]=this._registeredProperties.dimensions[o];for(var s in this._registeredProperties.values)a.values[s]=this._registeredProperties.values[s]}var l={params:a};return i&&(l.params.dimensions.page&&(l.params.page=l.params.dimensions.page,delete l.params.dimensions.page),l.params.dimensions.route&&(l.params.route=l.params.dimensions.route,delete l.params.dimensions.route),r||delete l.params.dimensions,delete l.params.values),l},isActive:function(){var e=this._plugin.storage.getLocal("infinityStarted");if(this.infinityStarted||e&&"false"!==e)return!0;var t=(new Date).getTime();return Number(this._plugin.getLastActive())+this._plugin.sessionExpire>t}},{Event:{NAV:"nav",SESSION_START:"sessionStart",SESSION_STOP:"sessionStop",BEAT:"beat",EVENT:"event"}}),Ic=Cc,Dc=function(e){var t,n,i=(e=e||window).document,r=function(t){var n=!1;if(t.getBoundingClientRect){var r=t.getBoundingClientRect();(n={top:Math.max(r.top,0),left:Math.max(r.left,0),bottom:Math.min(r.bottom,e.innerHeight||i.documentElement.clientHeight),right:Math.min(r.right,e.innerWidth||i.documentElement.clientWidth)}).bottom<=n.top||n.right<=n.left?n=!1:n.area=(n.bottom-n.top)*(n.right-n.left)}return n},a=function(e,t){if(t){var n=r(e);n&&o.push({url:t,area:n.area,rect:n})}},o=[],s=[],l=.1;try{var u=e.performance.timing.navigationStart;!function(){for(var t=i.getElementsByTagName("*"),n=/url\(.*(http.*)\)/gi,s=0;s<t.length;s++){var l=t[s],u=e.getComputedStyle(l);if("IMG"===l.tagName&&a(l,l.src),u["background-image"]){n.lastIndex=0;var c=n.exec(u["background-image"]);c&&c.length>1&&a(l,c[1].replace('"',""))}if("IFRAME"===l.tagName)try{var d=r(l);if(d){var h=Dc(l.contentWindow);h&&o.push({tm:h,area:d.area,rect:d})}}catch(e){}}}(),function(){for(var t={},n=e.performance.getEntriesByType("resource"),i=0;i<n.length;i++)t[n[i].name]=n[i].responseEnd;for(var r=0;r<o.length;r++)"tm"in o[r]||(o[r].tm=void 0!==t[o[r].url]?t[o[r].url]:0)}(),function(){"msFirstPaint"in e.performance.timing&&(t=e.performance.timing.msFirstPaint-u);for(var n=e.performance.getEntriesByType("paint"),r=0;r<n.length;r++)"first-paint"===n[r].name&&(t=n[r].startTime);if(void 0===t||t<0||t>12e4){t=e.performance.timing.responseStart-u;for(var a={},o=i.getElementsByTagName("head")[0].children,s=0;s<o.length;s++){var l=o[s];"SCRIPT"===l.tagName&&l.src&&!l.async&&(a[l.src]=!0),"LINK"===l.tagName&&"stylesheet"===l.rel&&l.href&&(a[l.href]=!0)}for(var c=e.performance.getEntriesByType("resource"),d=!1,h=0;h<c.length;h++)if(d||!a[c[h].name]||"script"!==c[h].initiatorType&&"link"!==c[h].initiatorType)d=!0;else{var p=c[h].responseEnd;(void 0===t||p>t)&&(t=p)}}t=Math.max(t,0)}(),function(){for(var n={0:0},r=0,a=0;a<o.length;a++){var u=t;"tm"in o[a]&&o[a].tm>t&&(u=o[a].tm),void 0===n[u]&&(n[u]=0),n[u]+=o[a].area,r+=o[a].area}var c=Math.max(i.documentElement.clientWidth,e.innerWidth||0)*Math.max(i.documentElement.clientHeight,e.innerHeight||0);if(c>0&&(c=Math.max(c-r,0)*l,void 0===n[t]&&(n[t]=0),n[t]+=c,r+=c),r){for(var d in n)n.hasOwnProperty(d)&&s.push({tm:d,area:n[d]});s.sort((function(e,t){return e.tm-t.tm}));for(var h=0,p=0;p<s.length;p++)h+=s[p].area,s[p].progress=h/r}}(),function(){if(s.length){n=0;for(var e=0,i=0,r=0;r<s.length;r++){var a=s[r].tm-e;a>0&&i<1&&(n+=(1-i)*a),e=s[r].tm,i=s[r].progress}}else n=t}()}catch(e){}return n},Rc=Dc,xc=Su.extend({constructor:function(e){if(this.infinity=e.infinity,this.timeObject=null,this.playerSetup=null,this.perfObject=null,this.myTimesObject={},"undefined"!=typeof window&&"function"==typeof window.addEventListener&&(window.addEventListener("load",this._windowLoaded.bind(this)),window.performance&&window.performance.timing)){try{"function"==typeof window.performance.getEntriesByType&&(this.perfObject=window.performance)}catch(e){}this.timeObject=window.performance.timing}try{if("function"==typeof PerformanceObserver){var t=new PerformanceObserver(function(e,t){var n=e.getEntries();this.myTimesObject.largestContentfulPaint=n[n.length-1].renderTime}.bind(this));PerformanceObserver.supportedEntryTypes.indexOf("largest-contentful-paint")>-1&&t.observe({entryTypes:["largest-contentful-paint"]})}}catch(e){}},_windowLoaded:function(){this.myTimesObject.onLoad=(new Date).getTime(),this._getEnoughFPS(),setTimeout(this._fireLoadTimesEvent.bind(this),1e3)},_fireLoadTimesEvent:function(){this._getLastMetrics(),this.infinity.fireEvent("loadTimes",{},this._getAllValues())},_getAllValues:function(){var e={PageLoadTime:this.getPageLoadTime(),DNSTime:this.getDnsTime(),TCPTime:this.getTcpTime(),HandshakeTime:this.getHandshakeTime(),DomReadyTime:this.getDomReadyTime(),BackendTime:this.getBackendTime(),FrontendTime:this.getFrontendTime(),VisualReady:this.getTimeToVisuallyReady(),TimeToInteractive:this.getTimeToInteractive(),JsTime:this.getJSTime(),CssTime:this.getCSSTime(),ImageTime:this.getImageTime(),FontTime:this.getFontTime(),AvgReqLatency:this.getAvgReqLatency(),MaxReqLatency:this.getMaxReqLatency(),FirstPaint:this.getFirstPaint(),FirstContentfulPaint:this.getFirstContentfulPaint(),LargestContentfulPaint:this.getLargestContentfulPaint(),SpeedIndex:this.getSpeedIndex()};for(var t in e)null===e[t]||void 0===e[t]||e[t]<0?delete e[t]:e[t]=Math.round(e[t]);return e},getPageLoadTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.loadEventEnd-this.timeObject.navigationStart),e},getPlayerStartupTime:function(){var e=null;return this.timeObject&&this.playerSetup&&(e=this.playerSetup-this.timeObject.navigationStart),e},getDnsTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.domainLookupEnd-this.timeObject.domainLookupStart),e},getTcpTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.connectEnd-this.timeObject.connectStart),e},getHandshakeTime:function(){var e=null;return this.timeObject&&this.timeObject.secureConnectionStart&&(e=this.timeObject.connectEnd-this.timeObject.secureConnectionStart),e},getDomReadyTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.domComplete-this.timeObject.navigationStart),e},getBackendTime:function(){var e=null;return this.timeObject&&(e=this.timeObject.responseStart-this.timeObject.navigationStart),e},getFrontendTime:function(){var e=null;return this.timeObject&&(e=this.myTimesObject.onLoad-this.timeObject.responseStart),e},getTimeToVisuallyReady:function(){var e=this.myTimesObject.firstPaint||0;return this.timeObject?Math.max(e,this.timeObject.domContentLoadedEventEnd-this.timeObject.navigationStart||0):e||null},getTimeToInteractive:function(){if(this.myTimesObject.fps&&this.getTimeToVisuallyReady())return Math.max(this.myTimesObject.fps,this.getTimeToVisuallyReady());setTimeout(function(){this.getTimeToInteractive()}.bind(this),500)},getJSTime:function(){return this._getXTime("script")},getCSSTime:function(){return this._getXTime("css")},getImageTime:function(){return this._getXTime("img")},getFontTime:function(){return this._getXTime("css",[".woff",".otf",".ttf"])},getAvgReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var e=0,t=0,n=this.perfObject.getEntriesByType("resource");for(var i in n)n[i].requestStart&&n[i].responseStart&&(t+=n[i].responseStart-n[i].requestStart),e++;return t/e}}catch(e){}return null},getFirstPaint:function(){return this.myTimesObject?this.myTimesObject.firstPaint:null},getFirstContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.firstContentfulPaint:null},getLargestContentfulPaint:function(){return this.myTimesObject?this.myTimesObject.largestContentfulPaint:null},getMaxReqLatency:function(){try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var e=this.perfObject.getEntriesByType("resource"),t=0;for(var n in e)e[n].requestStart&&e[n].responseStart&&(t=Math.max(t,e[n].responseStart-e[n].requestStart));return t}}catch(e){}return null},getSpeedIndex:function(){var e=null;if("undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.getEntriesByType)try{e=Rc()}catch(e){}return e},_getXTime:function(e,t){var n=0;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var i=this.perfObject.getEntriesByType("resource");for(var r in i)if(i[r].initiatorType===e)if(t){var a=!1;for(var o in t)i[r].name.indexOf(t[o]>0)&&(a=!0);a&&(n+=i[r].duration)}else n+=i[r].duration}}catch(e){}return Math.round(n)||null},_getLastMetrics:function(){var e=null,t=null;try{if(this.perfObject&&"function"==typeof this.perfObject.getEntriesByType){var n=this.perfObject.getEntriesByType("paint");for(var i in n)"first-paint"===n[i].name?e=n[i].startTime:"first-contentful-paint"===n[i].name&&(t=n[i].startTime)}}catch(e){}!e&&this.timeObject&&(e=this.timeObject.msFirstPaint-this.timeObject.navigationStart),this.myTimesObject.firstPaint=e,this.myTimesObject.firstContentfulPaint=t,this.getTimeToInteractive()},_getEnoughFPS:function(){if(!this.timeObject||"undefined"==typeof window)return!0;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(){};this.preFPS=(new Date).getTime(),e(function(){var e=(new Date).getTime();e<this.preFPS+50?this.myTimesObject.fps=e-this.timeObject.navigationStart:setTimeout(function(){return this._getEnoughFPS()}.bind(this),50)}.bind(this))},setPlayerSetupTime:function(){this.playerSetup=this.playerSetup||(new Date).getTime()}}),Lc=xc,Pc=Su.extend({constructor:function(e){this.plugin=e,this.isInBackground=!1,this.listenerReference=this._visibilityListener.bind(this),this._reset()},startDetection:function(){this.isBackgroundDetectorStarted||"undefined"==typeof document||(this.isBackgroundDetectorStarted=!0,document.addEventListener("visibilitychange",this.listenerReference))},stopDetection:function(){this.isBackgroundDetectorStarted&&"undefined"!=typeof document&&(document.removeEventListener("visibilitychange",this.listenerReference),this._reset())},_reset:function(){this.isBackgroundDetectorStarted=!1},_visibilityListener:function(e){if("undefined"!=typeof document){var t=this._getSettings();"hidden"===document.visibilityState?this._toBackground(t):"visible"===document.visibilityState&&this._toForeground(t)}},_toBackground:function(e){if(this.isInBackground=!0,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.stopChronoView(),"string"==typeof e){switch(e){case"stop":this._fireStop();break;case"pause":this._firePause()}if(this.plugin.infinity.infinityStarted){this.lastBeatTime=(new Date).getTime();var t=this.plugin._beat.chrono.startTime?this.lastBeatTime-this.plugin._beat.chrono.startTime:0;this.plugin._sendBeat(t),this.plugin._beat.stop()}}},_toForeground:function(e){if(this.isInBackground=!1,this.plugin&&this.plugin._adsAdapter&&this.plugin._adsAdapter.startChronoView(),"string"==typeof e&&e&&this.plugin.infinity.infinityStarted){var t=(new Date).getTime();t-this.lastBeatTime<this.plugin.sessionExpire?(this.plugin._sendBeat(t-this.lastBeatTime),this.plugin._beat.start()):this.plugin.infinity.newSession()}},_getSettings:function(){return"string"==typeof this.plugin.options["background.settings"]&&this.plugin.options["background.settings"]?this.plugin.options["background.settings"]:this.plugin.deviceDetector.isSmartTV()?this.plugin.options["background.settings.tv"]:this.plugin.deviceDetector.isDesktop()?this.plugin.options["background.settings.desktop"]:this.plugin.deviceDetector.isAndroid()?this.plugin.options["background.settings.android"]:this.plugin.deviceDetector.isIphone()?this.plugin.options["background.settings.iOS"]:this.plugin.deviceDetector.isPlayStation()?this.plugin.options["background.settings.playstation"]:void 0},_firePause:function(){this._fireX("firePause")},_fireStop:function(){this._fireX("fireStop"),this.plugin.fireStop()},_fireX:function(e){this.adsAdapter=this.plugin.getAdsAdapter(),this.adsAdapter&&this.adsAdapter[e](),this.contentAdapter=this.plugin.getAdapter(),this.contentAdapter&&this.contentAdapter[e]()},canBlockStartCalls:function(){return this.isInBackground&&!0===this.plugin.options["background.enabled"]&&this._getSettings()}}),Oc=Pc,Mc=Su.extend({constructor:function(){"undefined"!=typeof navigator&&navigator.userAgent&&(this._isSmartTVDevice=navigator.userAgent.toLowerCase().match(/smarttv/)||navigator.userAgent.toLowerCase().match(/smart-tv/)||navigator.userAgent.toLowerCase().match(/appletv/)||navigator.userAgent.toLowerCase().match(/apple tv/),this._isPlaystationDevice=null!==navigator.userAgent.match(/PlayStation/),this._isIphoneDevice=null!==navigator.userAgent.match(/iPhone|iPad|iPod/i),this._isAndroidDevice=null!==navigator.userAgent.match(/Android/),this._isSmartphoneDevice=!this._isSmartTVDevice&&!this._isPlaystationDevice&&(this._isIphoneDevice||this._isAndroidDevice),this._isDesktopDevice=!this._isSmartphoneDevice&&!this._isSmartTVDevice&&!this._isPlaystationDevice)},isIphone:function(){return this._isIphoneDevice},isAndroid:function(){return this._isAndroidDevice},isSmartphone:function(){return this._isSmartphoneDevice},isDesktop:function(){return this._isDesktopDevice},isSmartTV:function(){return this._isSmartTVDevice},isPlayStation:function(){return this._isPlaystationDevice}}),Nc=Su.extend({constructor:function(e){this.pluginref=e,this.listenerReference=this._changeListener.bind(this),this.loadReference=this._loadListener.bind(this),this.isEnabled=!1,this.pageHeight=0,this.maxHeight=0,this.startDetection()},startDetection:function(){this.isEnabled||"undefined"==typeof window||"function"!=typeof window.addEventListener||(window.addEventListener("scroll",this.listenerReference),window.addEventListener("resize",this.listenerReference),window.addEventListener("load",this.loadReference),this.isEnabled=!0)},stopDetection:function(){this.isEnabled&&"undefined"!=typeof window&&"function"==typeof window.removeEventListener&&(window.removeEventListener("scroll",this.listenerReference),window.removeEventListener("resize",this.listenerReference),window.removeEventListener("load",this.loadReference),this.isEnabled=!1)},getScrollDepth:function(){var e=null;return this.maxHeight&&this.pageHeight&&(e=Math.min(Math.trunc(this.maxHeight/this.pageHeight*100),100)),e},_loadListener:function(){if("undefined"!=typeof document){var e=document.documentElement;e&&(this.pageHeight=Math.round(e.scrollHeight,e.clientHeight,e.offsetHeight),this.maxHeight=window.innerHeight,this._updateCompletionRate())}},_changeListener:function(){if(this.pageHeight){var e=this.maxHeight;this.maxHeight=Math.max(this.maxHeight,window.pageYOffset+window.innerHeight),e!==this.maxHeight&&this._updateCompletionRate()}var t=this.pluginref.getAdsAdapter();t&&t.flags.isStarted&&(t.getIsVisible()?t.startChronoView():t.stopChronoView())},_updateCompletionRate:function(){setTimeout(function(){this.pluginref.storage.setSession("pageScrollDepth",this.getScrollDepth())}.bind(this),3e3)}}),Bc=Nc,Uc=Su.extend({constructor:function(e){this.plugin=e},getAllData:function(){var e=this.getNonRandomData();return e.timestamp=this.getTimestamp(),e},getNonRandomData:function(){var e={};return e.userAgent=this.getUserAgent(),e.threads=this.getVirtualCores(),e.language=this.getLanguage(),e.langList=this.getAvailableLanguages(),e.resolution=this.getResolution(),e.colorDepth=this.getColorDepth(),e.deviceMemory=this.getMemory(),e.touchscreen=this.getTouchscreen(),e.localStorage=this.getLocalStorage(),e.sessionStorage=this.getSessionStorage(),e.cookiesAvailable=this.getCookiesAvailable(),e.flashAvailable=this.getHasFlash(),e.timeZone=this.getTimeZone(),e.plugins=this.getPluginList(),e},getUserAgent:function(){return this._getNavigatorValue("userAgent")},getVirtualCores:function(){return this._getNavigatorValue("hardwareConcurrency")},getLanguage:function(){return this._getNavigatorValue("language")},getAvailableLanguages:function(){return this._getNavigatorValue("languages")},getResolution:function(){var e=null;try{this._getNavigatorValue("screen")&&(e=navigator.screen.width.toString()+navigator.screen.height.toString())}catch(e){}return e},getColorDepth:function(){var e=null;try{this._getNavigatorValue("screen")&&(e=navigator.screen.colorDepth)}catch(e){}return e},getMemory:function(){return this._getNavigatorValue("deviceMemory")},getTouchscreen:function(){return this._getNavigatorValue("maxTouchPoints")||!1},getLocalStorage:function(){var e=!1;try{e="undefined"!=typeof localStorage}catch(e){}return e},getSessionStorage:function(){var e=!1;try{e="undefined"!=typeof sessionStorage}catch(e){}return e},getCookiesAvailable:function(){return this._getNavigatorValue("cookieEnabled")||!1},getHasFlash:function(){var e=!1;try{var t=this._getNavigatorValue("plugins");e=t&&"object"==typeof t["Shockwave Flash"]||"undefined"!=typeof window&&window.ActiveXObject&&!1!==new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}return e},getPluginList:function(){var e=null;try{var t=this._getNavigatorValue("plugins");if(t&&0!==t.length){for(var n="",i=0;i<navigator.plugins.length;i++)n+=navigator.plugins[i].description+" "+navigator.plugins[i].filename+" "+navigator.plugins[i].name+" ";e=n}}catch(e){}return e},getTimeZone:function(){var e=null;try{e=(new Date).getTimezoneOffset().toString()}catch(e){}return e},getTimestamp:function(){return(new Date).getTime()},_navigatorCheck:function(){return"undefined"!=typeof navigator},_getNavigatorValue:function(e){var t=null;try{this._navigatorCheck()&&(t=navigator[e])}catch(e){}return t}}),Fc=Uc,Vc=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,i,r,a,o;return r=2147483648&e,a=2147483648&t,o=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(i=1073741824&t)?2147483648^o^r^a:n|i?1073741824&o?3221225472^o^r^a:1073741824^o^r^a:o^r^a}function i(e,i,r,a,o,s,l){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}(i,r,a),o),l)),n(t(e,s),i)}function r(e,i,r,a,o,s,l){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}(i,r,a),o),l)),n(t(e,s),i)}function a(e,i,r,a,o,s,l){return e=n(e,n(n(function(e,t,n){return e^t^n}(i,r,a),o),l)),n(t(e,s),i)}function o(e,i,r,a,o,s,l){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}(i,r,a),o),l)),n(t(e,s),i)}function s(e){var t,n="",i="";for(t=0;t<=3;t++)n+=(i="0"+(e>>>8*t&255).toString(16)).substr(i.length-2,2);return n}var l,u,c,d,h,p,f,g,m,v=Array();for(e=function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(e),v=function(e){for(var t,n=e.length,i=n+8,r=16*((i-i%64)/64+1),a=Array(r-1),o=0,s=0;s<n;)o=s%4*8,a[t=(s-s%4)/4]=a[t]|e.charCodeAt(s)<<o,s++;return o=s%4*8,a[t=(s-s%4)/4]=a[t]|128<<o,a[r-2]=n<<3,a[r-1]=n>>>29,a}(e),p=1732584193,f=4023233417,g=2562383102,m=271733878,l=0;l<v.length;l+=16)u=p,c=f,d=g,h=m,p=i(p,f,g,m,v[l+0],7,3614090360),m=i(m,p,f,g,v[l+1],12,3905402710),g=i(g,m,p,f,v[l+2],17,606105819),f=i(f,g,m,p,v[l+3],22,3250441966),p=i(p,f,g,m,v[l+4],7,4118548399),m=i(m,p,f,g,v[l+5],12,1200080426),g=i(g,m,p,f,v[l+6],17,2821735955),f=i(f,g,m,p,v[l+7],22,4249261313),p=i(p,f,g,m,v[l+8],7,1770035416),m=i(m,p,f,g,v[l+9],12,2336552879),g=i(g,m,p,f,v[l+10],17,4294925233),f=i(f,g,m,p,v[l+11],22,2304563134),p=i(p,f,g,m,v[l+12],7,1804603682),m=i(m,p,f,g,v[l+13],12,4254626195),g=i(g,m,p,f,v[l+14],17,2792965006),p=r(p,f=i(f,g,m,p,v[l+15],22,1236535329),g,m,v[l+1],5,4129170786),m=r(m,p,f,g,v[l+6],9,3225465664),g=r(g,m,p,f,v[l+11],14,643717713),f=r(f,g,m,p,v[l+0],20,3921069994),p=r(p,f,g,m,v[l+5],5,3593408605),m=r(m,p,f,g,v[l+10],9,38016083),g=r(g,m,p,f,v[l+15],14,3634488961),f=r(f,g,m,p,v[l+4],20,3889429448),p=r(p,f,g,m,v[l+9],5,568446438),m=r(m,p,f,g,v[l+14],9,3275163606),g=r(g,m,p,f,v[l+3],14,4107603335),f=r(f,g,m,p,v[l+8],20,1163531501),p=r(p,f,g,m,v[l+13],5,2850285829),m=r(m,p,f,g,v[l+2],9,4243563512),g=r(g,m,p,f,v[l+7],14,1735328473),p=a(p,f=r(f,g,m,p,v[l+12],20,2368359562),g,m,v[l+5],4,4294588738),m=a(m,p,f,g,v[l+8],11,2272392833),g=a(g,m,p,f,v[l+11],16,1839030562),f=a(f,g,m,p,v[l+14],23,4259657740),p=a(p,f,g,m,v[l+1],4,2763975236),m=a(m,p,f,g,v[l+4],11,1272893353),g=a(g,m,p,f,v[l+7],16,4139469664),f=a(f,g,m,p,v[l+10],23,3200236656),p=a(p,f,g,m,v[l+13],4,681279174),m=a(m,p,f,g,v[l+0],11,3936430074),g=a(g,m,p,f,v[l+3],16,3572445317),f=a(f,g,m,p,v[l+6],23,76029189),p=a(p,f,g,m,v[l+9],4,3654602809),m=a(m,p,f,g,v[l+12],11,3873151461),g=a(g,m,p,f,v[l+15],16,530742520),p=o(p,f=a(f,g,m,p,v[l+2],23,3299628645),g,m,v[l+0],6,4096336452),m=o(m,p,f,g,v[l+7],10,1126891415),g=o(g,m,p,f,v[l+14],15,2878612391),f=o(f,g,m,p,v[l+5],21,4237533241),p=o(p,f,g,m,v[l+12],6,1700485571),m=o(m,p,f,g,v[l+3],10,2399980690),g=o(g,m,p,f,v[l+10],15,4293915773),f=o(f,g,m,p,v[l+1],21,2240044497),p=o(p,f,g,m,v[l+8],6,1873313359),m=o(m,p,f,g,v[l+15],10,4264355552),g=o(g,m,p,f,v[l+6],15,2734768916),f=o(f,g,m,p,v[l+13],21,1309151649),p=o(p,f,g,m,v[l+4],6,4149444226),m=o(m,p,f,g,v[l+11],10,3174756917),g=o(g,m,p,f,v[l+2],15,718787259),f=o(f,g,m,p,v[l+9],21,3951481745),p=n(p,u),f=n(f,c),g=n(g,d),m=n(m,h);return(s(p)+s(f)+s(g)+s(m)).toLowerCase()},Hc=Su.extend({constructor:function(e){this.plugin=e,this.dataExtractor=new Fc,this.key=this.getPreviousKey()},generateHashKey:function(){if(!this.key){var e=this.dataExtractor.getAllData();this.key=this._hashFunction(e),this.plugin.storage.setLocal("youboraDeviceUUID",this.key)}},getKey:function(){return this.key||this.generateHashKey(),this.key},_hashFunction:function(e){var t=e;return"string"!=typeof e&&(t=JSON.stringify(e)),Vc(t)},_reset:function(){this.key=void 0},getPreviousKey:function(){return this.plugin.storage.getLocal("youboraDeviceUUID")}}),jc=Hc,Kc=Su.extend({constructor:function(){this.reset()},reset:function(){this.join=new Mu,this.seek=new Mu,this.pause=new Mu,this.buffer=new Mu,this.total=new Mu,this.viewedMax=[]}}),Gc=Su.extend({constructor:function(){this.reset()},reset:function(){this.isStarted=!1,this.isJoined=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isVideoStateBuffering=!1,this.isEnded=!1,this.isStopped=!1,this.lastQuartileSent=0}}),Wc=Su.extend({constructor:function(e,t,n){this._adapter=e,this._seekEnabled=t&Wc.Type.SEEK,this._bufferEnabled=t&Wc.Type.BUFFER,n=n||800,this._chrono=new Mu,this._lastPlayhead=0,n>0&&(this._timer=new Nu(this.progress.bind(this),n))},start:function(){this.stop(),this.canBeUsed()&&this._timer.start()},stop:function(){this._lastPlayhead=0,this._timer&&this._timer.stop()},skipNextTick:function(){this._lastPlayhead=0},progress:function(){var e=this._chrono.stop();this._chrono.start();var t=e*Wc.kBUFFER_THRESHOLD_RATIO,n=e*Wc.kSEEK_THRESHOLD_RATIO;this._adapter.getPlayrate&&this._adapter.getPlayrate()&&1!==this._adapter.getPlayrate()&&(t*=this._adapter.getPlayrate(),n*=this._adapter.getPlayrate());var i=this._getPlayhead(),r=1e3*Math.abs(this._lastPlayhead-i);r<t?this._bufferEnabled&&this._lastPlayhead>0&&!this._adapter.flags.isPaused&&!this._adapter.flags.isSeeking&&this._adapter.fireBufferBegin(null,!1,"playheadMonitor"):r>n?this._seekEnabled&&this._lastPlayhead>0&&this._adapter.fireSeekBegin(null,!1,"playheadMonitor"):(this._seekEnabled&&this._adapter.fireSeekEnd(null,"playheadMonitor"),this._bufferEnabled&&this._adapter.fireBufferEnd(null,"playheadMonitor")),this._lastPlayhead=i},canBeUsed:function(){var e=this._adapter.plugin;return!(!e||!e.getPlayheadMonitorEnabled()||!this._seekEnabled&&!this._bufferEnabled)&&(!e.getIsLive()||!e.options["content.isLive.noMonitor"])},_getPlayhead:function(){return this._adapter.getPlayhead()}},{Type:{NONE:0,BUFFER:1,SEEK:2},kBUFFER_THRESHOLD_RATIO:.5,kSEEK_THRESHOLD_RATIO:2}),zc=Wc,Yc=Su.extend({constructor:function(e,t){this._adapter=e,this._videoElement=e.getVideoObject(),this._startedStateCheck=!1,this._intervalCheckId=null,this._intervalMilliseconds=t||300},start:function(){var e=this._adapter.plugin;e&&e.getReadyStateMonitorEnabled()&&this._videoElement&&!this._startedStateCheck&&(this._intervalCheckId=setInterval(this.checkStateProperty.bind(this),this._intervalMilliseconds),this._startedStateCheck=!0)},stop:function(){try{this._startedStateCheck&&this._intervalCheckId&&clearInterval(this._intervalCheckId),this._intervalCheckId=null,this._startedStateCheck=!1}catch(e){Ru.error("Produced error stopping the network monitor")}},checkStateProperty:function(e){try{this._videoElement&&this._adapter&&this._videoElement.readyState&&(this._videoElement.readyState>3&&!this._adapter.flags.isSeeking?this._adapter.flags.isBuffering?this.fireBufferEnd({},"stateMonitor"):this._adapter.flags.isJoined||this.fireJoin({},"stateMonitor"):this._videoElement.readyState<4&&!this._adapter.flags.isBuffering&&this.fireBufferBegin({},!1,"stateMonitor",!0))}catch(e){}}}),qc=Yc,$c={getPosition:function(){return null},getGivenBreaks:function(){return null},getExpectedBreaks:function(){return null},getExpectedPattern:function(){return null},getBreaksTime:function(){return null},getGivenAds:function(){return null},getExpectedAds:function(){return null},getIsVisible:function(){return!0},getAudioEnabled:function(){return null},getIsSkippable:function(){return null},getIsFullscreen:function(){return null},getCampaign:function(){return null},getCreativeId:function(){return null},getProvider:function(){return null},getAdInsertionType:function(){return null},fireClick:function(e){"string"==typeof e&&(e={url:e}),this.emit(Bu.Event.CLICK,{params:e})},fireQuartile:function(e){this.flags.isStarted&&"number"==typeof e&&e>this.flags.lastQuartileSent&&e<4&&(this.flags.lastQuartileSent++,this.emit(Bu.Event.QUARTILE,{params:{quartile:e}}))},startChronoView:function(){if(this.getIsVisible()&&!this.plugin.backgroundDetector.isInBackground){var e=this.chronos.viewedMax;0!==e.length&&0===e[e.length-1].stopTime||(e.push(new Mu),e[e.length-1].start())}},stopChronoView:function(){var e=this.chronos.viewedMax;e[0]&&e.length>0&&0===e[e.length-1].stopTime&&e[e.length-1].stop()},fireManifest:function(e,t){var n={params:e};"string"==typeof e&&(n={params:{errorType:e,errorMessage:t}}),this.emit(Bu.Event.MANIFEST,n)},fireSkip:function(e){void 0===e&&(e={}),e.skipped=!0,this.fireStop(e)},fireBreakStart:function(e){this.emit(Bu.Event.PODSTART,{params:e})},fireBreakStop:function(e){this.emit(Bu.Event.PODSTOP,{params:e})}},Xc={getPlayrate:function(){return this.flags.isPaused?0:1},getFramesPerSecond:function(){return null},getDroppedFrames:function(){return null},getThroughput:function(){return null},getRendition:function(){return null},getTitle2:function(){return null},getIsLive:function(){return null},getCdnTraffic:function(){return null},getP2PTraffic:function(){return null},getUploadTraffic:function(){return null},getIsP2PEnabled:function(){return null},getSegmentDuration:function(){return null},getHouseholdId:function(){return null},getLatency:function(){return null},getPacketLoss:function(){return null},getPacketSent:function(){return null},getMetrics:function(){return null},getAudioCodec:function(){return null},getVideoCodec:function(){return null},getURLToParse:function(){return null},fireSeekBegin:function(e,t,n){if(this._discardFalseBuffers(),this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&!this.flags.isSeeking){if(this.flags.isBuffering){if(!1===t)return;Ru.notice("Converting current buffer to seek"),this.chronos.seek=this.chronos.buffer.clone(),this.chronos.buffer.reset(),this.flags.isBuffering=!1}else this.chronos.seek.start();try{this.fireEventsStruct.seek=[],n?this.fireEventsStruct.seek.push(n):this.fireEventsStruct.seek.push("undefinedEvent")}catch(e){}this.flags.isSeeking=!0,this.emit(Bu.Event.SEEK_BEGIN,{params:e})}},fireSeekEnd:function(e,t){if(this.plugin&&this.plugin.getIsLive()&&this.plugin.options["content.isLive.noSeek"])return null;if(this.flags.isJoined&&this.flags.isSeeking){try{t?this.fireEventsStruct.seek.push(t):this.fireEventsStruct.seek.push("undefinedEvent")}catch(e){}(e=e||{}).triggeredEvents=this.fireEventsStruct.seek,this.cancelSeek(),this.emit(Bu.Event.SEEK_END,{params:e})}},cancelSeek:function(e){this.flags.isJoined&&this.flags.isSeeking&&(this.flags.isSeeking=!1,this.chronos.seek.stop(),this.monitor&&this.monitor.skipNextTick())},fireEvent:function(e,t,n,i){var r=i||{};r.name=e||"",r.dimensions=t||{},r.values=n||{},this.emit(Bu.Event.VIDEO_EVENT,{params:r})}},Qc=Iu.extend({constructor:function(e){this.flags=new Gc,this.chronos=new Kc,this.fireEventsStruct={},this.fireEventsStruct.buffer=[],this.fireEventsStruct.seek=[],this.monitor=null,this.plugin=null,this.player=null,this._isAdsAdapter=null,this.setPlayer(e),this.tag=this.player,Ru.notice("Adapter "+this.getVersion()+" with Lib "+Eu+" is ready.")},setPlayer:function(e){this.player&&this.unregisterListeners(),"string"==typeof e&&"undefined"!=typeof document?this.player=document.getElementById(e):this.player=e,this.registerListeners()},registerListeners:function(){},unregisterListeners:function(){},dispose:function(){this.stopMonitor(),this.stopReadyStateMonitor(),this.fireStop(),this.unregisterListeners(),this.player=null,this.tag=null},monitorPlayhead:function(e,t,n){this.stopMonitor();var i=0;e&&(i|=zc.Type.BUFFER),t&&(i|=zc.Type.SEEK),this.monitor&&this.monitor._timer.isRunning?this.monitor.skipNextTick():this.monitor=new zc(this,i,n)},stopMonitor:function(){this.monitor&&this.monitor.stop()},monitorReadyState:function(e){this.stopReadyStateMonitor(),this.stateMonitor=new qc(this,e)},startReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.start()},stopReadyStateMonitor:function(){this.stateMonitor&&this.stateMonitor.stop()},checkReadyState:function(e,t){try{this.plugin&&this.plugin.getReadyStateMonitorEnabled()&&e&&(e>3&&!this.flags.isSeeking?this.flags.isBuffering?this.fireBufferEnd({},t+"-readyState"):this.flags.isJoined||this.fireJoin({},t+"-readyState"):e<4&&!this.flags.isBuffering&&this.fireBufferBegin({},!1,t+"-readyState",!0))}catch(e){Ru.error("Can't check readyState property correctly")}},getPlayhead:function(){return null},getDuration:function(){return null},getBitrate:function(){return null},getTotalBytes:function(){return null},getTitle:function(){return null},getResource:function(){return null},getPlayerVersion:function(){return null},getPlayerName:function(){return null},getVersion:function(){return Eu+"-generic-js"},getVideoObject:function(){return null},fireInit:function(e,t){this.plugin&&this.plugin.fireInit(e,t)},fireStart:function(e,t){if(this.plugin&&this.plugin.backgroundDetector&&this.plugin.backgroundDetector.canBlockStartCalls())return null;this.flags.isStarted||(this.flags.isStarted=!0,this.chronos.total.start(),this.chronos.join.start(),t&&((e=e||{}).triggeredEvents=[t]),this.startReadyStateMonitor(),this.emit(Bu.Event.START,{params:e}))},fireJoin:function(e,t){this.flags.isJoined||this.flags.isStarted||this._isAds()||!this.plugin||!this.plugin.isInitiated||this.fireStart({},t),this.flags.isStarted&&!this.flags.isJoined&&(this.flags.isStarted=!0,this.monitor&&this.monitor.start(),this.flags.isJoined=!0,this.chronos.join.stop(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Bu.Event.JOIN,{params:e}))},firePause:function(e,t){this._discardFalseBuffers(),this.flags.isBuffering&&this.fireBufferEnd(null,"firePauseCall"),this.flags.isJoined&&!this.flags.isPaused&&(this.flags.isPaused=!0,this.chronos.pause.start(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Bu.Event.PAUSE,{params:e}))},fireResume:function(e,t){this._discardFalseBuffers(),this.flags.isJoined&&this.flags.isPaused&&(this.flags.isPaused=!1,this.chronos.pause.stop(),this.monitor&&this.monitor.skipNextTick(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Bu.Event.RESUME,{params:e}))},fireBufferBegin:function(e,t,n,i){if(i=i||!1,this.flags.isJoined&&!this.flags.isBuffering){if(this.flags.isSeeking){if(!t)return;Ru.notice("Converting current buffer to seek"),this.chronos.buffer=this.chronos.seek.clone(),this.chronos.seek.reset(),this.flags.isSeeking=!1}else this.chronos.buffer.start();try{this.fireEventsStruct.buffer=[],n?this.fireEventsStruct.buffer.push(n):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(e){}this.flags.isBuffering=!0,this.flags.isVideoStateBuffering=i,this.emit(Bu.Event.BUFFER_BEGIN,{params:e})}},fireBufferEnd:function(e,t){if(this.flags.isJoined&&this.flags.isBuffering){try{t?this.fireEventsStruct.buffer.push(t):this.fireEventsStruct.buffer.push("undefinedEvent")}catch(e){}(e=e||{}).triggeredEvents=this.fireEventsStruct.buffer,this.cancelBuffer(),this.emit(Bu.Event.BUFFER_END,{params:e})}},_discardFalseBuffers:function(){try{this.flags.isBuffering&&this.flags.isVideoStateBuffering&&this._getDeltaBufferTime()<=100&&this.cancelBuffer()}catch(e){}},cancelBuffer:function(e){this.flags.isJoined&&this.flags.isBuffering&&(this.flags.isBuffering=!1,this.flags.isVideoStateBuffering=!1,this.chronos.buffer.stop(),this.monitor&&this.monitor.skipNextTick())},_getDeltaBufferTime:function(){return this.chronos&&this.chronos.buffer?this.chronos.buffer.getDeltaTime(!1):0},fireStop:function(e,t){(this._isAds()||this.plugin&&this.plugin._isStopReady())&&(this._isAds()&&this.flags.isStarted||!this._isAds()&&(this.flags.isStarted||this.plugin&&this.plugin.isInitiated))&&(this.stopMonitor(),this.stopReadyStateMonitor(),this.flags.reset(),this.chronos.total.stop(),this.chronos.join.reset(),this.chronos.pause.stop(),this.chronos.buffer.stop(),this.chronos.seek.stop(),t&&((e=e||{}).triggeredEvents=[t]),this.emit(Bu.Event.STOP,{params:e}),this.chronos.pause.reset(),this.chronos.buffer.reset(),this.chronos.seek.reset(),this.chronos.viewedMax.splice(0,this.chronos.viewedMax.length))},setIsAds:function(e){this._isAdsAdapter=e},_isAds:function(){return this._isAdsAdapter},fireCasted:function(e,t){e||(e={}),e.casted=!0,this.fireStop(e,t)},fireError:function(e,t,n,i,r){var a=Lu.buildErrorParams(e,t,n,i);a.code&&delete a.code,r&&((a=a||{}).triggeredEvents=[r]);var o=this.plugin?this.plugin.options:{};void 0!==a.errorCode&&o["errors.ignore"]&&o["errors.ignore"].indexOf(a.errorCode.toString())>-1||(this.emit(Bu.Event.ERROR,{params:a}),void 0!==a.errorCode&&o["errors.fatal"]&&o["errors.fatal"].indexOf(a.errorCode.toString())>-1&&this.fireStop({},r))},fireFatalError:function(e,t,n,i,r){var a=this.plugin?this.plugin.options:{};void 0!==e&&a["errors.ignore"]&&a["errors.ignore"].indexOf(e.toString())>-1||(this.monitor&&this.monitor.stop(),this.fireError(e,t,n,i,r),void 0!==e&&a["errors.nonFatal"]&&a["errors.nonFatal"].indexOf(e.toString())>-1||this.fireStop({},r))}},{Event:Bu.Event});Lu.assign(Qc.prototype,$c),Lu.assign(Qc.prototype,Xc);var Zc=Qc,Jc={setAdapter:function(e){if(this.browserLoadTimes&&this.browserLoadTimes.setPlayerSetupTime(),e.plugin)Ru.warn("Adapters can only be added to a single plugin");else for(var t in this.removeAdapter(),this._adapter=e,e.plugin=this,e.setIsAds(!1),this.contentAdapterListeners={},this.contentAdapterListeners[Zc.Event.START]=this._startListener.bind(this),this.contentAdapterListeners[Zc.Event.JOIN]=this._joinListener.bind(this),this.contentAdapterListeners[Zc.Event.PAUSE]=this._pauseListener.bind(this),this.contentAdapterListeners[Zc.Event.RESUME]=this._resumeListener.bind(this),this.contentAdapterListeners[Zc.Event.SEEK_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[Zc.Event.SEEK_END]=this._seekEndListener.bind(this),this.contentAdapterListeners[Zc.Event.BUFFER_BEGIN]=this._seekBufferBeginListener.bind(this),this.contentAdapterListeners[Zc.Event.BUFFER_END]=this._bufferEndListener.bind(this),this.contentAdapterListeners[Zc.Event.ERROR]=this._errorListener.bind(this),this.contentAdapterListeners[Zc.Event.STOP]=this._stopListener.bind(this),this.contentAdapterListeners[Zc.Event.VIDEO_EVENT]=this._videoEventListener.bind(this),this.contentAdapterListeners)this._adapter.on(t,this.contentAdapterListeners[t])},getAdapter:function(){return this._adapter},removeAdapter:function(){if(this._adapter){if(this._adapter.dispose(),this._adapter.plugin=null,this.contentAdapterListeners){for(var e in this.contentAdapterListeners)this._adapter.off(e,this.contentAdapterListeners[e]);delete this.contentAdapterListeners}this._adapter=null}},_startListener:function(e){this.isInitiated?0!==this.initChrono.startTime&&(this._adapter.chronos.join.startTime=this.initChrono.startTime):(this.viewTransform.nextView(),this._initComm(),this._startPings());var t=e.data.params||{},n=this.getResource()&&"boolean"==typeof this.getIsLive()&&(this.getIsLive()||"number"==typeof this.getDuration()&&this.getDuration()>0)&&this.getTitle();(n=!this.options.forceInit&&(n&&this._isExtraMetadataReady()))&&!this.isInitiated?(this._send(Fu.WillSendEvent.WILL_SEND_START,Fu.Service.START,t),this._adSavedError(),this._adSavedManifest(),Ru.notice(Fu.Service.START+" "+(t.title||t.mediaResource)),this.isStarted=!0):this.isInitiated||(this.isInitiated=!0,this._adapter.chronos.join.start(),this._send(Fu.WillSendEvent.WILL_SEND_INIT,Fu.Service.INIT,t),this._adSavedError(),this._adSavedManifest(),Ru.notice(Fu.Service.INIT+" "+(t.title||t.mediaResource)))},_retryStart:function(e){this._isExtraMetadataReady()&&(this._send(Fu.WillSendEvent.WILL_SEND_START,Fu.Service.START,{}),this.startDelayed=!1)},_joinListener:function(e){var t={};Lu.assign(t,e.data.params||{}),this._adsAdapter&&this._adsAdapter.flags.isStarted?(this._adapter.monitor&&this._adapter.monitor.stop(),this._adapter.flags.isJoined=!1,this._adapter.chronos.join.stopTime=0):(this._adapter&&(this._adapter.chronos.join.startTime=Math.min(this._adapter.chronos.join.startTime+(this._totalPrerollsTime||0),(new Date).getTime()),this._totalPrerollsTime=0),this.isInitiated&&!this.isStarted&&(this._isExtraMetadataReady()?this._send(Fu.WillSendEvent.WILL_SEND_START,Fu.Service.START,t):this.startDelayed=!0,this._adSavedError(),this._adSavedManifest(),Ru.notice(Fu.Service.START+" "+(t.title||t.mediaResource)),this.isStarted=!0),t=e.data.params||{},this._adsAdapter&&this.isBreakStarted&&this._adsAdapter.fireBreakStop(),this._send(Fu.WillSendEvent.WILL_SEND_JOIN,Fu.Service.JOIN,t),Ru.notice(Fu.Service.JOIN+" "+t.joinDuration+"ms"))},_pauseListener:function(e){this._adapter&&(this._adapter.flags.isBuffering||this._adapter.flags.isSeeking||this._adsAdapter&&this._adsAdapter.flags.isStarted)&&this._adapter.chronos.pause.reset();var t=e.data.params||{};this._send(Fu.WillSendEvent.WILL_SEND_PAUSE,Fu.Service.PAUSE,t),Ru.notice(Fu.Service.PAUSE+" at "+t.playhead+"s")},_resumeListener:function(e){this._adsAdapter&&this.isBreakStarted&&!this._adsAdapter.flags.isStarted&&this._adsAdapter.fireBreakStop();var t=e.data.params||{};this._send(Fu.WillSendEvent.WILL_SEND_RESUME,Fu.Service.RESUME,t),Ru.notice(Fu.Service.RESUME+" "+t.pauseDuration+"ms"),this._adapter.chronos.pause.reset()},_seekBufferBeginListener:function(e){this._adapter&&this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset(),e.type&&e.type.includes("buffer")?Ru.notice(e.type+", eventsTriggered: "+this._adapter.fireEventsStruct.buffer):Ru.notice(e.type+", eventsTriggered: "+this._adapter.fireEventsStruct.seek)},_seekEndListener:function(e){var t=e.data.params||{};this._send(Fu.WillSendEvent.WILL_SEND_SEEK,Fu.Service.SEEK,t),Ru.notice(Fu.Service.SEEK+" to "+t.playhead+" in "+t.seekDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_bufferEndListener:function(e){var t=e.data.params||{};this._send(Fu.WillSendEvent.WILL_SEND_BUFFER,Fu.Service.BUFFER,t),Ru.notice(Fu.Service.BUFFER+" to "+t.playhead+" in "+t.bufferDuration+"ms"+(t.triggeredEvents?", eventsTriggered: "+t.triggeredEvents:""))},_errorListener:function(e){this._blockError(e.data.params)||(this.fireError(e.data.params||{}),this._adSavedError(),this._adSavedManifest())},_blockError:function(e){var t=Date.now();return!!this._lastErrorParams&&(this._lastErrorParams.errorCode===e.errorCode&&this._lastErrorParams.msg===e.msg)&&this._lastErrorTime+5e3>t?(this._lastErrorTime=t,!0):(this._lastErrorTime=t,this._lastErrorParams=e,!1)},_stopListener:function(e){this.fireStop(e.data.params||{})},_isStopReady:function(e){var t=!1;if(!this.requestBuilder.lastSent.live&&this._adsAdapter&&this._adapter&&(!this._adapter.getPlayhead()||this._adapter.getPlayhead()>=this.requestBuilder.lastSent.mediaDuration-1)){var n=0,i=this.options["ad.expectedPattern"];if(i&&i.post&&i.post[0])n=i.post[0];else if(this.requestBuilder.lastSent.breaksTime){if(this.requestBuilder.lastSent.position===Fu.AdPosition.Postroll&&(n=this.requestBuilder.lastSent.givenAds),!n&&this.requestBuilder.lastSent.breaksTime){var r=this.requestBuilder.lastSent.breaksTime;if(r.length>0&&this.requestBuilder.lastSent.mediaDuration)Math.round(r[r.length-1])+1>=this.requestBuilder.lastSent.mediaDuration&&(n=1)}}else t=!0;n<=this.playedPostrolls&&(t=!0)}else t=!0;return t},_videoEventListener:function(e){this._send(Fu.WillSendEvent.WILL_SEND_VIDEO_EVENT,Fu.Service.VIDEO_EVENT,e.data.params)},_isExtraMetadataReady:function(e){if(!this.options.waitForMetadata||this.options.pendingMetadata.length<1)return!0;var t=this.requestBuilder.getGetters();return this.options.pendingMetadata.map(function(e){if(t.hasOwnProperty(e))return!!this[t[e]]()}.bind(this)).indexOf(!1)<0}},ed=Jc,td={getHost:function(){var e=this.options.host;return this.viewTransform&&this.viewTransform.response&&this.viewTransform.response.host&&(e=this.viewTransform.response.host),Lu.addProtocol(Lu.stripProtocol(e),this.options["app.https"])},getUserType:function(){return this.options["user.type"]},isParseManifest:function(){return this.options["parse.manifest"]},isParseCdnNode:function(){return this.options["parse.cdnNode"]},isCdnSwitch:function(){return this.options["parse.cdnSwitchHeader"]},getParseCdnNodeList:function(){return this.options["parse.cdnNode.list"]},getParseCdnNodeNameHeader:function(){return this.options["parse.cdnNameHeader"]},getParseNodeHeader:function(){return this.options["parse.cdnNodeHeader"]},getObfuscateIp:function(){return this.options["user.obfuscateIp"]},getPrivacyProtocol:function(){var e=this.options["user.privacyProtocol"];return"string"==typeof e&&(e=e.toLowerCase()),"optin"===e||"optout"===e?e:null},getCustomDimensions:function(){var e=this.options["content.customDimensions"];return"object"==typeof e?e:null},getExtraparam1:function(){return this.options["content.customDimension.1"]},getExtraparam2:function(){return this.options["content.customDimension.2"]},getExtraparam3:function(){return this.options["content.customDimension.3"]},getExtraparam4:function(){return this.options["content.customDimension.4"]},getExtraparam5:function(){return this.options["content.customDimension.5"]},getExtraparam6:function(){return this.options["content.customDimension.6"]},getExtraparam7:function(){return this.options["content.customDimension.7"]},getExtraparam8:function(){return this.options["content.customDimension.8"]},getExtraparam9:function(){return this.options["content.customDimension.9"]},getExtraparam10:function(){return this.options["content.customDimension.10"]},getExtraparam11:function(){return this.options["content.customDimension.11"]},getExtraparam12:function(){return this.options["content.customDimension.12"]},getExtraparam13:function(){return this.options["content.customDimension.13"]},getExtraparam14:function(){return this.options["content.customDimension.14"]},getExtraparam15:function(){return this.options["content.customDimension.15"]},getExtraparam16:function(){return this.options["content.customDimension.16"]},getExtraparam17:function(){return this.options["content.customDimension.17"]},getExtraparam18:function(){return this.options["content.customDimension.18"]},getExtraparam19:function(){return this.options["content.customDimension.19"]},getExtraparam20:function(){return this.options["content.customDimension.20"]},getAdExtraparam1:function(){return this.options["ad.customDimension.1"]},getAdExtraparam2:function(){return this.options["ad.customDimension.2"]},getAdExtraparam3:function(){return this.options["ad.customDimension.3"]},getAdExtraparam4:function(){return this.options["ad.customDimension.4"]},getAdExtraparam5:function(){return this.options["ad.customDimension.5"]},getAdExtraparam6:function(){return this.options["ad.customDimension.6"]},getAdExtraparam7:function(){return this.options["ad.customDimension.7"]},getAdExtraparam8:function(){return this.options["ad.customDimension.8"]},getAdExtraparam9:function(){return this.options["ad.customDimension.9"]},getAdExtraparam10:function(){return this.options["ad.customDimension.10"]},getPluginInfo:function(){return{lib:Eu,adapter:this.getAdapterVersion(),adAdapter:this.getAdAdapterVersion()}},getIp:function(){return this.options["network.ip"]},getIsp:function(){return this.options["network.isp"]},getConnectionType:function(){return this.options["network.connectionType"]},getDeviceInfo:function(){var e={};return this.getDeviceCode()&&(e.deviceCode=this.getDeviceCode()),this.getModel()&&(e.model=this.getModel()),this.getBrand()&&(e.brand=this.getBrand()),this.getDeviceType()&&(e.deviceType=this.getDeviceType()),this.getDeviceName()&&(e.deviceName=this.getDeviceName()),this.getOsName()&&(e.osName=this.getOsName()),this.getOsVersion()&&(e.osVersion=this.getOsVersion()),this.getBrowserName()&&(e.browserName=this.getBrowserName()),this.getBrowserVersion()&&(e.browserVersion=this.getBrowserVersion()),this.getBrowserType()&&(e.browserType=this.getBrowserType()),this.getBrowserEngine()&&(e.browserEngine=this.getBrowserEngine()),e!=={}?e:null},getEDID:function(){var e=this.options["device.EDID"];return e?e.toString():null},getDeviceCode:function(){return this.options["device.code"]},getModel:function(){return this.options["device.model"]},getBrand:function(){return this.options["device.brand"]},getDeviceType:function(){return this.options["device.type"]},getDeviceName:function(){return this.options["device.name"]},getOsName:function(){return this.options["device.osName"]},getOsVersion:function(){return this.options["device.osVersion"]},getBrowserName:function(){return this.options["device.browserName"]},getBrowserVersion:function(){return this.options["device.browserVersion"]},getBrowserType:function(){return this.options["device.browserType"]},getBrowserEngine:function(){return this.options["device.browserEngine"]},getAccountCode:function(){return this.options.accountCode},getUsername:function(){return this.options["user.name"]},getAnonymousUser:function(){return this.options["user.anonymousId"]},getEmail:function(){return this.options["user.email"]},getReferer:function(){var e=this.options.referer||"";return!e&&"undefined"!=typeof window&&window.location&&(e=window.location.href),e},getReferral:function(){var e=this.options.referral||"";return e||"undefined"==typeof document||(e=document.referrer),e},getLanguage:function(){var e=null;return"undefined"!=typeof navigator&&(e=navigator.language),e},getNodeHost:function(){return this.options["content.cdnNode"]||this.resourceTransform.getNodeHost()},getNodeType:function(){return this.options["content.cdnType"]||this.resourceTransform.getNodeType()},getNodeTypeString:function(){return this.resourceTransform.getNodeTypeString()},getRequestNumber:function(){return Math.random()},getOfflineView:function(){var e=null;return this.offlineStorage&&(e=this.offlineStorage.getView()),e},getDeviceUUID:function(){var e=null;return this.options["device.isAnonymous"]||(e=this.options["device.id"]||this.uuidGenerator.getKey()),e},getSmartswitchConfigCode:function(){return this.options["smartswitch.configCode"]},getSmartswitchGroupCode:function(){return this.options["smartswitch.groupCode"]},getSmartswitchContractCode:function(){return this.options["smartswitch.contractCode"]},getAppName:function(){return this.options["app.name"]},getAppReleaseVersion:function(){return this.options["app.releaseVersion"]},getIsBlocked:function(){return this.options["ad.blockerDetected"]},isMethodPostEnabled:function(){return this.options.method&&this.options.method.toLowerCase()===Uu.POST},getPlayheadMonitorEnabled:function(){return this.options["playhead.monitor"]},getReadyStateMonitorEnabled:function(){return this.options["readyState.monitor"]}},nd={getPlayhead:function(){var e=this._safeGetterAdapter("getPlayhead");return Lu.parseNumber(e,0)},getPlayrate:function(){var e=0;if(this._adapter&&this._adapter.flags&&!this._adapter.flags.isPaused)try{e=this._adapter.getPlayrate()}catch(e){Ru.warn("An error occured while calling getPlayrate",e)}return e},getFramesPerSecond:function(){return this._safeGetterAdapter("getFramesPerSecond","content.fps")},getSegmentDuration:function(){return this.hybridNetwork.getSegmentDuration()||this._safeGetterAdapter("getSegmentDuration","content.segmentDuration")},getDroppedFrames:function(){var e=this._safeGetterAdapter("getDroppedFrames");return e||(e=this.getWebkitDroppedFrames()),Lu.parseNumber(e,0)},getWebkitDroppedFrames:function(){return this._adapter&&this._adapter.tag&&this._adapter.tag.webkitDroppedFrameCount?this._adapter.tag.webkitDroppedFrameCount:null},getDuration:function(){var e=this._safeGetterAdapter("getDuration","content.duration")||null;return Lu.parseNumber(Math.round(e),null)},getBitrate:function(){var e=this._safeGetterAdapter("getBitrate","content.bitrate");return e&&-1!==e||(e=this.getWebkitBitrate()),Lu.parseNumber(e,-1)},getTotalBytes:function(){return this.options["content.sendTotalBytes"]?this._safeGetterAdapter("getTotalBytes","content.totalBytes"):null},getWebkitBitrate:function(){if(this._adapter&&this._adapter.tag&&this._adapter.tag.webkitVideoDecodedByteCount){var e=this._adapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitBitrate){var t=this._adapter.tag.webkitVideoDecodedByteCount-this._lastWebkitBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitBitrate=this._adapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getThroughput:function(){var e=this._safeGetterAdapter("getThroughput","content.throughput");return Lu.parseNumber(e,-1)},getRendition:function(){return this._safeGetterAdapter("getRendition","content.rendition")},getTitle:function(){return this._safeGetterAdapter("getTitle","content.title")},getTitle2:function(){return this._safeGetterAdapter("getTitle2","content.program")},getIsLive:function(){var e=this.options["content.isLive"];return e||!1===e||(e=this._safeGetterAdapter("getIsLive")||!1),e},getResource:function(){return this._safeGetterAdapter("getResource","content.resource")},getParsedResource:function(){var e=null;return this.resourceTransform.isBlocking()||(e=this.resourceTransform.getResource()),(e=e||this._safeGetterAdapter("getURLToParse"))===this.getResource()?null:e},getTransactionCode:function(){return this.options["content.transactionCode"]},getMetadata:function(){return this.options["content.metadata"]},getPlayerVersion:function(){return this._safeGetterAdapter("getPlayerVersion")||""},getPlayerName:function(){return this._safeGetterAdapter("getPlayerName")||""},getCdn:function(){var e=null;return this.resourceTransform.isBlocking()||(e=this.resourceTransform.getCdnName()),e||this.options["content.cdn"]},getPluginVersion:function(){var e=this.getAdapterVersion();return e||(e=Eu+"-adapterless-js"),e},getLibVersion:function(){return Eu},getAdapterVersion:function(){return this._safeGetterAdapter("getVersion")},getCdnTraffic:function(){return this._safeGetterAdapter("getCdnTraffic")||this.hybridNetwork.getCdnTraffic()},getMultiCdnInfo:function(){return this.hybridNetwork.getMultiCdnInfo()},getBalancerResponseId:function(){return this.hybridNetwork.getBalancerResponseId()},getP2PTraffic:function(){return this._safeGetterAdapter("getP2PTraffic")||this.hybridNetwork.getP2PTraffic()},getUploadTraffic:function(){return this._safeGetterAdapter("getUploadTraffic")||this.hybridNetwork.getUploadTraffic()},getIsP2PEnabled:function(){return this._safeGetterAdapter("getIsP2PEnabled")||this.hybridNetwork.getIsP2PEnabled()},getStreamingProtocol:function(){var e=this.options["content.streamingProtocol"];if(e)for(var t in hc)if(hc[t]===e)return e;return null},getTransportFormat:function(){var e=this.options["content.transportFormat"];if(e||!this.options["parse.manifest"]||this.resourceTransform.isBlocking()||(e=this.resourceTransform.getTransportFormat()),e)for(var t in Xu)if(Xu[t]===e)return e;return null},getHouseholdId:function(){return this._safeGetterAdapter("getHouseholdId")},getLatency:function(){return this.getIsLive()?this._safeGetterAdapter("getLatency"):null},getPacketLoss:function(){return this._safeGetterAdapter("getPacketLoss")},getPacketSent:function(){return this._safeGetterAdapter("getPacketSent")},getVideoMetrics:function(){return Lu.getMetricsFrom(this._adapter?this._adapter.getMetrics():null,this.options["content.metrics"])},getPlayerStartupTime:function(){return this.browserLoadTimes.getPlayerStartupTime()},getJoinDuration:function(){return this._adapter?this._adapter.chronos.join.getDeltaTime(!1):-1},getBufferDuration:function(){return this._adapter?this._adapter.chronos.buffer.getDeltaTime(!1):-1},getSeekDuration:function(){return this._adapter?this._adapter.chronos.seek.getDeltaTime(!1):-1},getPauseDuration:function(){return this._adapter?this._adapter.chronos.pause.getDeltaTime(!1):0},getPackage:function(){return this.options["content.package"]},getSaga:function(){return this.options["content.saga"]},getTvShow:function(){return this.options["content.tvShow"]},getSeason:function(){return this.options["content.season"]},getEpisodeTitle:function(){return this.options["content.episodeTitle"]},getChannel:function(){return this.options["content.channel"]},getID:function(){return this.options["content.id"]},getImdbId:function(){return this.options["content.imdbId"]},getGracenoteID:function(){return this.options["content.gracenoteId"]},getType:function(){return this.options["content.type"]},getGenre:function(){return this.options["content.genre"]},getVideoLanguage:function(){return this.options["content.language"]},getSubtitles:function(){return this.options["content.subtitles"]},getContractedResolution:function(){return this.options["content.contractedResolution"]},getCost:function(){return this.options["content.cost"]},getPrice:function(){return this.options["content.price"]},getPlaybackType:function(){var e=this.options["content.playbackType"];if(!e){var t=this.options["content.isLive"];"boolean"!=typeof t&&(t=this._safeGetterAdapter("getIsLive")),"boolean"==typeof t&&(e=t?"Live":"VoD")}return e},getDRM:function(){return this.options["content.drm"]},getVideoCodec:function(){return this._safeGetterAdapter("getVideoCodec","content.encoding.videoCodec")},getAudioCodec:function(){return this._safeGetterAdapter("getAudioCodec","content.encoding.audioCodec")},getCodecSettings:function(){return this.options["content.encoding.codecSettings"]},getCodecProfile:function(){return this.options["content.encoding.codecProfile"]},getContainerFormat:function(){return this.options["content.encoding.containerFormat"]},getLinkedViewId:function(){return this.options.linkedViewId},_safeGetterAdapter:function(e,t){var n=null;if(t&&this.options[t])n=this.options[t];else try{this._adapter&&"function"==typeof this._adapter[e]&&(n=this._adapter[e]())}catch(t){Ru.warn("An error occured while calling "+e,t)}return n}},id=nd,rd={getAdsAdapter:function(){return this._adsAdapter},setAdsAdapter:function(e){if(e.plugin)Ru.warn("Adapters can only be added to a single plugin");else for(var t in this.removeAdsAdapter(),e.plugin=this,this._adsAdapter=e,e.setIsAds(!0),this.adsAdapterListeners={},this.adsAdapterListeners[Zc.Event.START]=this._adStartListener.bind(this),this.adsAdapterListeners[Zc.Event.JOIN]=this._adJoinListener.bind(this),this.adsAdapterListeners[Zc.Event.PAUSE]=this._adPauseListener.bind(this),this.adsAdapterListeners[Zc.Event.RESUME]=this._adResumeListener.bind(this),this.adsAdapterListeners[Zc.Event.BUFFER_BEGIN]=this._adBufferBeginListener.bind(this),this.adsAdapterListeners[Zc.Event.BUFFER_END]=this._adBufferEndListener.bind(this),this.adsAdapterListeners[Zc.Event.STOP]=this._adStopListener.bind(this),this.adsAdapterListeners[Zc.Event.ERROR]=this._adErrorListener.bind(this),this.adsAdapterListeners[Zc.Event.CLICK]=this._adClickListener.bind(this),this.adsAdapterListeners[Zc.Event.MANIFEST]=this._adManifestListener.bind(this),this.adsAdapterListeners[Zc.Event.PODSTART]=this._adBreakStartListener.bind(this),this.adsAdapterListeners[Zc.Event.PODSTOP]=this._adBreakStopListener.bind(this),this.adsAdapterListeners[Zc.Event.QUARTILE]=this._adQuartileListener.bind(this),this.adsAdapterListeners)this._adsAdapter.on(t,this.adsAdapterListeners[t])},removeAdsAdapter:function(){if(this._adsAdapter){if(this._adsAdapter.dispose(),this._adsAdapter.plugin=null,this.adsAdapterListeners){for(var e in this.adsAdapterListeners)this._adsAdapter.off(e,this.adsAdapterListeners[e]);delete this.adsAdapterListeners}this.resizeScrollDetector.stopDetection(),this._adsAdapter=null}},_adStartListener:function(e){this._adapter?(this._adapter.fireBufferEnd(null,"adStartListener"),this._adapter.fireSeekEnd(null,"adStartListener"),this.isInitiated||this._adapter.flags.isStarted||this._adapter.fireStart(),this._adapter.flags.isPaused&&this._adapter.chronos.pause.reset()):this.fireInit(),this._adsAdapter&&(this._adsAdapter.chronos.viewedMax=[]);var t=e.data.params||{};t.adNumber=this.requestBuilder.getNewAdNumber(),(this.getAdResource()||this.getAdTitle())&&"number"==typeof this.getAdDuration()?(this.adStartSent=!0,this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart(),t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak(),this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_START,Fu.Service.AD_START,t)):(this.adInitSent=!0,t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak(),this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_INIT,Fu.Service.AD_INIT,t))},_adJoinListener:function(e){var t={};Lu.assign(t,e.data.params||{}),this.adInitSent&&!this.adStartSent&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart(),this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_START,Fu.Service.AD_START,t)),this._adsAdapter.startChronoView(),this.adConnected&&(this._adsAdapter.chronos.join.startTime=this.adConnectedTime,this._adsAdapter.chronos.total.startTime=this.adConnectedTime,this.adConnectedTime=0,this.adConnected=!1),t=e.data.params||{},this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_JOIN,Fu.Service.AD_JOIN,t),this.adInitSent=!1,this.adStartSent=!1},_adPauseListener:function(e){var t=e.data.params||{};this._adsAdapter.stopChronoView(),this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_PAUSE,Fu.Service.AD_PAUSE,t)},_adResumeListener:function(e){var t=e.data.params||{};this._adsAdapter.startChronoView(),this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_RESUME,Fu.Service.AD_RESUME,t)},_adBufferBeginListener:function(e){Ru.notice("Ad Buffer Begin"),this._adsAdapter.stopChronoView(),this._adsAdapter&&this._adsAdapter.flags.isPaused&&this._adsAdapter.chronos.pause.reset()},_adBufferEndListener:function(e){var t=e.data.params||{};this._adsAdapter.startChronoView(),this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_BUFFER,Fu.Service.AD_BUFFER,t)},_adStopListener:function(e){this._adsAdapter.stopChronoView(),this._adsAdapter.flags.reset(),this._totalPrerollsTime=(this._totalPrerollsTime||0)+this._adsAdapter.chronos.total.getDeltaTime();var t=e.data.params||{};if(t.position=this.requestBuilder.lastSent.position,this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_STOP,Fu.Service.AD_STOP,t),this.requestBuilder.lastSent.position===Fu.AdPosition.Postroll){var n=this.options["ad.expectedPattern"];this.playedPostrolls++,(this.requestBuilder.lastSent.givenAds&&this.requestBuilder.lastSent.givenAds<=this.playedPostrolls||!this.requestBuilder.lastSent.givenAds&&n&&n.post&&n.post[0]&&n.post[0]<=this.playedPostrolls)&&this.fireStop()}this.adConnected=!0,this.adConnectedTime=(new Date).getTime()},_adErrorListener:function(e){var t=e.data.params||{};return!this._adapter||this._adapter.flags.isStarted||this.isInitiated?this._blockAdError(e.data.params)?null:(this._adsAdapter&&(this._adsAdapter.fireManifest(),this._adsAdapter.fireBreakStart()),this._adsAdapter&&this._adsAdapter.flags.isStarted||(t.adNumber=this.requestBuilder.getNewAdNumber(),t.adNumberInBreak=this.requestBuilder.getNewAdNumberInBreak()),this.isBreakStarted||(t.breakNumber=this.requestBuilder.getNewBreakNumber()),void this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_ERROR,Fu.Service.AD_ERROR,t)):(this._savedAdError=e,null)},_adSavedError:function(){this._savedAdError&&(this._adErrorListener(this._savedAdError),this._savedAdError=null)},_adSavedManifest:function(){this._savedAdManifest&&(this._adManifestListener(this._savedAdManifest),this._savedAdManifest=null)},_blockAdError:function(e){var t=Date.now();return this._lastAdErrorParams&&this._lastAdErrorParams.errorCode===e.errorCode&&this._lastAdErrorParams.msg===e.msg&&this._lastAdErrorParams.adCreativeId===this.getAdCreativeId()&&this._lastAdErrorTime+5e3>t?(this._lastAdErrorTime=t,!0):(this._lastAdErrorTime=t,this._lastAdErrorParams=e,!1)},_adClickListener:function(e){var t=e.data.params||{};this._adsAdapter.stopChronoView(),this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_CLICK,Fu.Service.AD_CLICK,t)},_adManifestListener:function(e){if(!this.isAdsManifestSent){if(this._adapter&&!this._adapter.flags.isStarted&&!this.isInitiated)return this._savedAdManifest=e,null;var t=e.data.params||{};this.isAdsManifestSent=!0,this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_MANIFEST,Fu.Service.AD_MANIFEST,t)}},_adBreakStartListener:function(e){if(!this.isBreakStarted){this.isBreakStarted=!0,this._adapter&&this._adapter.firePause();var t=e.data.params||{};t.breakNumber=this.requestBuilder.getNewBreakNumber(),this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_POD_START,Fu.Service.AD_POD_START,t),this.adConnected=!1}},_adBreakStopListener:function(e){if(this.isBreakStarted){this.isBreakStarted=!1;var t=e.data.params||{};t.position=this.requestBuilder.lastSent.position,this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_POD_STOP,Fu.Service.AD_POD_STOP,t),this.adConnected=!1,this._adapter&&this._adapter.fireResume()}},_adQuartileListener:function(e){var t=e.data.params||{};t.quartile&&this._sendAdEventIfAllowed(Fu.WillSendEvent.WILL_SEND_AD_QUARTILE,Fu.Service.AD_QUARTILE,t)},_sendAdEventIfAllowed:function(e,t,n){this.options["ad.ignore"]||this._send(e,t,n),Ru.notice(t)}},ad=rd,od={getAdPlayerVersion:function(){return this._safeGetterAdsAdapter("getPlayerVersion")||""},getAdPosition:function(){var e=Fu.AdPosition.Preroll;if(this._adsAdapter)try{var t=this._adsAdapter.getPosition();Fu.AdPosition.Preroll!==t&&Fu.AdPosition.Midroll!==t&&Fu.AdPosition.Postroll!==t||(e=t)}catch(e){Ru.warn("An error occured while calling getAdPosition",e)}return!e&&this._adapter&&(e=this._adapter.flags.isJoined?Fu.AdPosition.Midroll:Fu.AdPosition.Preroll),e},getAdNumber:function(){return this.requestBuilder.lastSent.adNumber||0},getAdNumberInBreak:function(){return this.requestBuilder.lastSent.adNumberInBreak||0},getBreakNumber:function(){return this.requestBuilder.lastSent.breakNumber||0},getAdPlayhead:function(){var e=this._safeGetterAdsAdapter("getPlayhead");return Lu.parseNumber(e,0)},getAdDuration:function(){var e=this._safeGetterAdsAdapter("getDuration","ad.duration");return Lu.parseNumber(e,0)},getAdBitrate:function(){var e=this._safeGetterAdsAdapter("getBitrate");return e&&-1!==e||(e=this.getWebkitAdBitrate()),Lu.parseNumber(e,-1)},getWebkitAdBitrate:function(){if(this._adsAdapter&&this._adsAdapter.tag&&this._adsAdapter.tag.webkitVideoDecodedByteCount){var e=this._adsAdapter.tag.webkitVideoDecodedByteCount;if(this._lastWebkitAdBitrate){var t=this._adsAdapter.tag.webkitVideoDecodedByteCount-this._lastWebkitAdBitrate;e=Math.round(t/this.viewTransform.response.pingTime*8)}return this._lastWebkitAdBitrate=this._adsAdapter.tag.webkitVideoDecodedByteCount,0!==e?e:-1}},getAdTitle:function(){return this._safeGetterAdsAdapter("getTitle","ad.title")},getAdResource:function(){return this._safeGetterAdsAdapter("getResource","ad.resource")},getAdCampaign:function(){return this._safeGetterAdsAdapter("getCampaign","ad.campaign")},getAdCreativeId:function(){return this._safeGetterAdsAdapter("getCreativeId","ad.creativeId")},getAdProvider:function(){return this._safeGetterAdsAdapter("getProvider","ad.provider")},getAdAdapterVersion:function(){return this._safeGetterAdsAdapter("getVersion")},getAdMetadata:function(){return this.options["ad.metadata"]},getAdInsertionType:function(){return this._safeGetterAdsAdapter("getAdInsertionType")},getGivenBreaks:function(){return this._safeGetterAdsAdapter("getGivenBreaks","ad.givenBreaks")},getExpectedBreaks:function(){var e=null,t=this.options["ad.expectedBreaks"],n=this.options["ad.expectedPattern"];if(t)e=t;else if(n)e=0,e=n.pre?n.pre.length:0,e+=n.mid?n.mid.length:0,e+=n.post?n.post.length:0;else if(this._adsAdapter)try{e=this._adsAdapter.getExpectedBreaks()}catch(e){Ru.warn("An error occured while calling expectedBreaks",e)}return e},getExpectedPattern:function(){return this._safeGetterAdsAdapter("getExpectedPattern","ad.expectedPattern")},getBreaksTime:function(){return this._safeGetterAdsAdapter("getBreaksTime","ad.breaksTime")},getGivenAds:function(){return this._safeGetterAdsAdapter("getGivenAds","ad.givenAds")},getExpectedAds:function(){var e=null;try{if(this._adsAdapter){var t=this.options["ad.expectedPattern"];if(t&&this.getAdPosition()){var n=[];if(t.pre&&(n=n.concat(t.pre)),t.mid&&(n=n.concat(t.mid)),t.post&&(n=n.concat(t.post)),n.length>0){var i=this.requestBuilder.lastSent.breakNumber;i>n.length&&(i=n.length),e=n[i-1]}}else e=this._adsAdapter.getExpectedAds()}}catch(e){Ru.warn("An error occured while calling expectedAds",e)}return e},getAdsExpected:function(){var e=null;try{e=this.getExpectedPattern()||this.getGivenAds()||!1}catch(e){Ru.warn("An error occured while calling givenAds or expectedPattern",e)}return e},getAdJoinDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.join.getDeltaTime(!1):-1},getAdBufferDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.buffer.getDeltaTime(!1):-1},getAdPauseDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.pause.getDeltaTime(!1):0},getAdTotalDuration:function(){return this._adsAdapter?this._adsAdapter.chronos.total.getDeltaTime(!1):-1},getAdViewedDuration:function(){return this._getTimeMaxOrAcum(!0)},getAdViewability:function(){return this._getTimeMaxOrAcum()},_getTimeMaxOrAcum:function(e){var t=0;return this._adsAdapter&&this._adsAdapter.chronos.viewedMax.forEach((function(n){e?t+=n.getDeltaTime(!1):t=Math.max(n.getDeltaTime(!1),t)})),t},getAudioEnabled:function(){return this._safeGetterAdsAdapter("getAudioEnabled")},getIsSkippable:function(){return this._safeGetterAdsAdapter("getIsSkippable")},getIsFullscreen:function(){return this._safeGetterAdsAdapter("getIsFullscreen")},_safeGetterAdsAdapter:function(e,t){var n=null;if(t&&this.options[t])n=this.options[t];else try{this._adsAdapter&&"function"==typeof this._adsAdapter[e]&&(n=this._adsAdapter[e]())}catch(t){Ru.warn("An error occured while calling "+e,t)}return n}},sd=od,ld={_startPings:function(){this._ping.isRunning||this._ping.start()},_stopPings:function(){this._ping.stop()},_sendPing:function(e){var t={diffTime:e,entities:this.requestBuilder.getChangedEntities()};this._adapter&&(t=this._adapter.flags.isPaused?this.requestBuilder.fetchParams(t,["pauseDuration"]):this.requestBuilder.fetchParams(t,["bitrate","throughput","fps"]),this._adapter.flags.isJoined&&(t=this.requestBuilder.fetchParams(t,["playhead"])),this._adapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,["bufferDuration"])),this._adapter.flags.isSeeking&&(t=this.requestBuilder.fetchParams(t,["seekDuration"]))),this._adsAdapter&&!this.options["ad.ignore"]&&(this._adsAdapter.flags.isStarted&&(t=this.requestBuilder.fetchParams(t,["adPlayhead","adViewedDuration","adViewability"]),t=this._adsAdapter.flags.isPaused?this.requestBuilder.fetchParams(t,["adPauseDuration"]):this.requestBuilder.fetchParams(t,["adBitrate"])),this._adsAdapter.flags.isBuffering&&(t=this.requestBuilder.fetchParams(t,["adBufferDuration"]))),this._send(Fu.WillSendEvent.WILL_SEND_PING,Fu.Service.PING,t),this.startDelayed&&this._retryStart(),Ru.verbose(Fu.Service.PING)}},ud={fireInit:function(e,t){this.isInitiated||(!this.getAdapter()||this.getAdapter()&&!this.getAdapter().flags.isStarted)&&(this.viewTransform.nextView(),this._initComm(),this._startPings(),this.initChrono.start(),this.isInitiated=!0,e=e||{},t&&(e.triggeredEvents=[t]),this._send(Fu.WillSendEvent.WILL_SEND_INIT,Fu.Service.INIT,e),this._adSavedError(),this._adSavedManifest(),Ru.notice(Fu.Service.INIT+" "+(e.title||e.mediaResource)))},fireError:function(e,t,n,i){this.fireInit();var r=Lu.buildErrorParams(e,t,n,i);r.code&&delete r.code,this._send(Fu.WillSendEvent.WILL_SEND_ERROR,Fu.Service.ERROR,r),this._adSavedError(),this._adSavedManifest(),Ru.notice(Fu.Service.ERROR+" "+r.errorLevel+" "+r.errorCode),"fatal"===r.errorLevel&&this.fireStop()},fireFatalError:function(e,t,n,i){this.fireError(e,t,n,i),this.fireStop()},fireStop:function(e){if(this.isInitiated||this.isStarted){this._adapter&&(this._adapter.flags.isStopped=!0,this._adapter.monitor&&this._adapter.monitor.stop()),this._adsAdapter&&this.isBreakStarted&&(this._adsAdapter.fireStop(),this._adsAdapter.fireBreakStop()),e=e||{},this._send(Fu.WillSendEvent.WILL_SEND_STOP,Fu.Service.STOP,e);var t=this._adapter?this._adapter.chronos:null;t&&(t.total.stop(),t.join.reset(),t.pause.reset(),t.buffer.reset(),t.seek.reset()),Ru.notice(Fu.Service.STOP+" at "+e.playhead+"s"),this._reset()}},fireOfflineEvents:function(e){this.options&&!this.options.offline?this.isInitiated||this._adapter&&this._adapter.flags.isStarted||this._adsAdapter&&this._adsAdapter.flags.isStarted?Ru.error("Adapters have to be stopped"):(this._offlineParams=e,this.viewTransform.response.code&&this.viewTransform.response.host?this._generateAndSendOffline():(this.offlineReference=this._generateAndSendOffline.bind(this),this.viewTransform.on(Ku.Event.DONE,this.offlineReference))):Ru.error("To send offline events, offline option must be disabled")},_generateAndSendOffline:function(){if(this.options.disableStorage)return null;var e=this._offlineParams;for(this._initComm();;){var t=this.requestBuilder.buildBody(Fu.Service.OFFLINE_EVENTS).viewJson;if(null===t[0])break;var n=this.viewTransform.nextView(),i=t[0].replace(/CODE_PLACEHOLDER/g,n.toString()).replace(/,"sessionId":"SESSION_PLACEHOLDER"/g,"").replace(/,"sessionRoot":"ROOT_PLACEHOLDER"/g,"");this._send(Fu.WillSendEvent.WILL_SEND_OFFLINE_EVENTS,Fu.Service.OFFLINE_EVENTS,e,i,"POST",function(e,t){this.offlineStorage.removeView(t.offlineId)}.bind(this),{offlineId:t[1]})}this.offlineStorage.sent(),this._offlineParams=null}},cd=ud,dd={_initInfinity:function(){this.infinity.on(Ic.Event.NAV,this._navListener.bind(this)),this.infinity.on(Ic.Event.SESSION_START,this._sessionStartListener.bind(this)),this.infinity.on(Ic.Event.SESSION_STOP,this._sessionStopListener.bind(this)),this.infinity.on(Ic.Event.EVENT,this._eventListener.bind(this))},_sendInfinity:function(e,t,n){var i={params:n=this.requestBuilder.buildParams(n,t),plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(e,i),this.infinity._comm&&null!==n&&this.options.enabled){this.lastServeiceSent=t;var r=new Hu(null,t,n);this.isMethodPostEnabled()&&r.setPostRequest(!0),this.infinity._comm.sendRequest(r)}},_navListener:function(e){var t=e.data.params||{};this._sendInfinity(Fu.WillSendEvent.WILL_SEND_NAV,Fu.Service.NAV,t),this._beat.isRunning||this._beat.start(),Ru.notice(Fu.Service.NAV+" "+t.route)},_sessionStartListener:function(e){var t=e.data.params||{};this._sendInfinity(Fu.WillSendEvent.WILL_SEND_SESSION_START,Fu.Service.SESSION_START,t),this._beat.isRunning||this._beat.start(),Ru.notice(Fu.Service.SESSION_START+" "+t.route)},_sessionStopListener:function(e){var t=e.data.params||{};this._sendInfinity(Fu.WillSendEvent.WILL_SEND_SESSION_STOP,Fu.Service.SESSION_STOP,t),this._beat.isRunning&&this._beat.stop(),Ru.notice(Fu.Service.SESSION_STOP+" "+t.route)},_eventListener:function(e){var t=e.data.params||{};this._sendInfinity(Fu.WillSendEvent.WILL_SEND_EVENT,Fu.Service.EVENT,t),Ru.notice(Fu.Service.EVENT+" "+t.name)},_sendBeat:function(e){var t={diffTime:e};this._sendInfinity(Fu.WillSendEvent.WILL_SEND_BEAT,Fu.Service.BEAT,t),this.infinity&&this.infinity._setLastActive(),Ru.verbose(Fu.Service.BEAT)},getSessionMetrics:function(){return Lu.getMetricsFrom(this.options["session.metrics"])}},hd=dd,pd={getContext:function(){return"Default"},getScrollDepth:function(){var e=this.storage.getSession("pageScrollDepth");return this.storage.removeSession("pageScrollDepth"),e},getSession:function(){var e=this.storage.getStorages("session");if("undefined"===e&&(e=void 0),!e){var t=this.getStoredData();if(t)try{e=JSON.parse(t).q.c}catch(e){}}return e},getStorageHost:function(){var e=null,t=this.getStoredData();if(t)try{e=JSON.parse(t).q.h}catch(e){}return e?Lu.addProtocol(e,this.options["app.https"]):e},getStoredData:function(){return this.storage.getStorages("data")},getDataTime:function(){return this.storage.getStorages("dataTime")},getLastActive:function(){return this.storage.getStorages("lastactive")},setStoredData:function(e){this.storage.setStorages("data",e)},setSession:function(e){this.storage.setStorages("session",e)},setDataTime:function(e){this.storage.setStorages("dataTime",e)},setLastActive:function(e){this.storage.setStorages("lastactive",e)},getPageName:function(){if("undefined"!=typeof document&&document.title)return document.title},getPageLoadTime:function(){return this.browserLoadTimes.getPageLoadTime()},getIsSessionExpired:function(){var e=(new Date).getTime();return!this.getSession()||this.infinity.getFirstActive()<e-this.sessionExpire},getIsDataExpired:function(){var e=(new Date).getTime();return!this.storage.isEnabled()||!this.getStoredData()||this.infinity.getFirstActive()<e-this.sessionExpire}},fd=pd,gd=Iu.extend({constructor:function(e,t,n){"string"!=typeof t||n||(n=t,t=null),this.storage=new yc,this.uuidGenerator=new jc(this),this.infinity=new Ic(this),this.isInitiated=!1,this.isAdsManifestSent=!1,this.playedPostrolls=0,this.isBreakStarted=!1,this.initChrono=new Mu,this.options=new fc(e),this.storage=new yc(null,this.options.disableCookies,this.options.forceCookies,this.options.disableStorage),this.options.disableStorage||(this.offlineStorage=new Ec),this._adapter=null,this._adsAdapter=null,this._ping=new Nu(this._sendPing.bind(this),5e3),this._beat=new Nu(this._sendBeat.bind(this),3e4),this._refreshData=new Nu(this._checkOldData.bind(this),36e5),this._refreshData.start(),this.sessionExpire=1e3*Number(this.storage.getLocal("sessionExpire"))||18e4,this.requestBuilder=new _c(this),this.resourceTransform=new sc(this),this.lastEventTime=null,this.restartViewTransform(n),this._initInfinity(),this.hybridNetwork=new Pu,this.browserLoadTimes=new Lc(this),this.deviceDetector=new Mc,this.backgroundDetector=new Oc(this),this.resizeScrollDetector=new Bc(this),this.options["background.enabled"]&&this.backgroundDetector.startDetection(),t&&this.setAdapter(t)},_checkOldData:function(){this._adapter&&this._adapter.flags.isStarted||this.infinity.infinityStarted||this.restartViewTransform()},restartViewTransform:function(e){this.viewTransform=new Yu(this),this.viewTransform.on(Yu.Event.DONE,this._receiveData.bind(this)),e?this.viewTransform.setData(e):this.getIsDataExpired()||!this.getStorageHost()||this.storage.getLocal("accCode")!==this.options.accountCode&&this.storage.getSession("accCode")!==this.options.accountCode?(this.storage.removeStorages("data"),this.storage.removeStorages("session"),this.storage.removeLocal("infinityStarted"),this.viewTransform.init()):this.viewTransform.setData(this.getStoredData())},_receiveData:function(e){this._ping.interval=1e3*e.target.response.pingTime,this._beat.interval=1e3*e.target.response.beatTime,this.sessionExpire=1e3*e.target.response.sessionExpire,this.storage.setStorages("data",e.target.response.msg),this.storage.setStorages("dataTime",(new Date).getTime()),this.storage.setStorages("accCode",this.options.accountCode),this.getIsSessionExpired()?(this.viewTransform.setSession(this.viewTransform.response.code),this.storage.setStorages("session",this.viewTransform.response.code),this.storage.setStorages("host",this.viewTransform.response.host)):(this.viewTransform.setSession(this.getSession()),this.viewTransform.setHost(this.getStorageHost()))},_reset:function(){this._stopPings(),this.resourceTransform=new sc(this),this._adapter&&this._adapter.flags.reset(),this.isInitiated=!1,this.isStarted=!1,this.startDelayed=!1,this.isAdsManifestSent=!1,this.initChrono.reset(),this._totalPrerollsTime=0,this.requestBuilder.lastSent.breakNumber=0,this.requestBuilder.lastSent.adNumber=0,this._savedAdManifest=null,this._savedAdError=null,this.playedPostrolls=0,this.isBreakStarted=!1},_send:function(e,t,n,i,r,a,o){var s=(new Date).getTime();this.options.preventZombieViews&&this.lastEventTime&&s>this.lastEventTime+6e5&&this.viewTransform.nextView(),this.lastEventTime=t===Fu.Service.STOP?null:s,n=this.requestBuilder.buildParams(n,t),this.getIsLive()&&(n.mediaDuration=this.options["content.duration"],n.playhead=void 0);var l={params:n,plugin:this,adapter:this.getAdapter(),adsAdapter:this.getAdsAdapter()};if(this.emit(e,l),this._comm&&(null!==n||void 0!==r)&&this.options.enabled){this.lastServeiceSent=t;var u={};void 0!==r&&"GET"!==r&&(u.method=r);var c=new Hu(null,t,n,u);i&&c.setBody(i),this.isMethodPostEnabled()&&c.setPostRequest(!0),this._comm.sendRequest(c,a,o)}},_initComm:function(){var e=this.getResource();this._adapter&&this._adapter.getURLToParse()&&(e=this._adapter.getURLToParse()),this.resourceTransform.init(e),this._comm=new Wu,this._comm.addTransform(new mc),this._comm.addTransform(this.viewTransform),this.options&&this.options.offline?this._comm.addTransform(new uc(this)):this._comm.addTransform(this.resourceTransform)},getComm:function(){return this._comm},setOptions:function(e){e&&(this.options.setOptions(e),"boolean"==typeof e["background.enabled"]&&(e["background.enabled"]?this.backgroundDetector.startDetection():this.backgroundDetector.stopDetection()))},getFastDataConfig:function(){return this.viewTransform.response.msg},disable:function(){this.setOptions({enabled:!1})},enable:function(){this.setOptions({enabled:!0})}},{Event:Fu.WillSendEvent});Lu.assign(gd.prototype,ed),Lu.assign(gd.prototype,td),Lu.assign(gd.prototype,id),Lu.assign(gd.prototype,ad),Lu.assign(gd.prototype,sd),Lu.assign(gd.prototype,ld),Lu.assign(gd.prototype,cd),Lu.assign(gd.prototype,hd),Lu.assign(gd.prototype,fd);var md=gd,vd=yd,yd={noConflict:function(){return yd=vd,this}};yd.VERSION=Eu,yd.polyfills=Tu,yd.polyfills(),yd.Object=Su,yd.Emitter=Iu,yd.Log=Ru,yd.Log.loadLevelFromUrl(),yd.Util=Lu,yd.HybridNetwork=Pu,yd.Chrono=Mu,yd.Timer=Nu,yd.Constants=Fu,yd.Request=Hu,yd.Communication=Wu,yd.Transform=Ku,yd.ViewTransform=Yu,yd.ResourceTransform=sc,yd.CdnParser=ec,yd.HlsParser=Zu,yd.DashParser=rc,yd.OfflineParser=uc,yd.LocationheaderParser=ac,yd.Options=fc,yd.Plugin=md,yd.Storage=yc,yd.RequestBuilder=_c,yd.PlayheadMonitor=zc,yd.Adapter=Zc,yd.adapters={},yd.Infinity=Ic,yd.BackgroundDetector=Oc,yd.DeviceDetector=Mc,yd.UUIDGenerator=jc,yd.registerAdapter=function(e,t){this.adapters[e]=t}.bind(yd),yd.unregisterAdapter=function(e){this.adapters[e]=null}.bind(yd);var bd=yd;var Ed=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"getVersion",value:function(){return"youbora-6"}},{key:"getPlayerName",value:function(){return"clappr-web"}},{key:"getPlayerVersion",value:function(){return"7.65.1"}},{key:"getTitle",value:function(){return this.player.video.title}},{key:"getPlayhead",value:function(){return this.player.idPlayback.currentTime}},{key:"getDuration",value:function(){return this.player.video.duration/1e3}},{key:"getIsLive",value:function(){var e;return!(null===(e=this.player.video)||void 0===e||!e.isLive)}},{key:"getResource",value:function(){return this.player.resource}},{key:"getBitrate",value:function(){return this.bitrate||-1}},{key:"getRendition",value:function(){return this.rendition}},{key:"registerListeners",value:function(){for(var e in this.monitorPlayhead(!1,!1),this.player.listenToOnce(this.player.idPlayback,De.PLAYBACK_PLAY,this.onFirstPlayListener.bind(this)),this.player.listenTo(this.player.container,Tn.WATCH_SESSION_END,this.watchSessionEndListener.bind(this)),this.references={},this.references[De.PLAYBACK_PAUSE]=this.pauseListener.bind(this),this.references[De.PLAYBACK_SEEK]=this.seekStart.bind(this),this.references[De.PLAYBACK_SEEKED]=this.seekStopListener.bind(this),this.references[De.PLAYBACK_BUFFERING]=this.bufferingListener.bind(this),this.references[De.PLAYBACK_BUFFERFULL]=this.bufferfullListener.bind(this),this.references[De.PLAYBACK_ERROR]=this.errorListener.bind(this),this.references[De.PLAYBACK_BITRATE]=this.bitrateListener.bind(this),this.references)this.player.listenTo(this.player.idPlayback,e,this.references[e])}},{key:"unregisterListeners",value:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.references)for(var e in this.player.stopListening(this.player.container,Tn.WATCH_SESSION_END),this.player.stopListening(this.player.idPlayback,De.PLAYBACK_PLAY),this.player.stopListening(this.player.idPlayback,Tn.WM_PLAY_REQUESTED),this.references)this.player.stopListening(this.player.idPlayback,e),delete this.references[e]}},{key:"onReplayRequested",value:function(){this.fireInit(void 0,Tn.WM_PLAY_REQUESTED)}},{key:"onFirstPlayListener",value:function(){this.fireStart(void 0,De.PLAYBACK_PLAY),this.fireJoin(void 0,De.PLAYBACK_PLAY),this.player.listenTo(this.player.idPlayback,De.PLAYBACK_PLAY,this.playListener.bind(this))}},{key:"playListener",value:function(){this.fireResume(void 0,De.PLAYBACK_PLAY)}},{key:"pauseListener",value:function(){this.firePause(void 0,De.PLAYBACK_PAUSE)}},{key:"watchSessionEndListener",value:function(){this.fireStop(void 0,Tn.WATCH_SESSION_END),this.player.stopListening(this.player.idPlayback,De.PLAYBACK_PLAY),this.player.listenToOnce(this.player.idPlayback,De.PLAYBACK_PLAY,this.onFirstPlayListener.bind(this)),this.player.listenToOnce(this.player.idPlayback,Tn.WM_PLAY_REQUESTED,this.onReplayRequested.bind(this))}},{key:"seekStart",value:function(){this.fireSeekBegin(void 0,!1,De.PLAYBACK_SEEK)}},{key:"seekStopListener",value:function(){this.fireSeekEnd(void 0,De.PLAYBACK_SEEKED)}},{key:"bufferingListener",value:function(){this.fireBufferBegin(void 0,!1,De.PLAYBACK_BUFFERING)}},{key:"bufferfullListener",value:function(){this.fireBufferEnd(void 0,De.PLAYBACK_BUFFERFULL)}},{key:"errorListener",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fireFatalError(null==e?void 0:e.code,null==e?void 0:e.description)}},{key:"bitrateListener",value:function(e){this.bitrate=e.bitrate,e.bandwidth&&e.width&&e.height&&(this.rendition=bd.Util.buildRenditionString(e.width,e.height,e.bandwidth))}}]),n}(bd.Adapter),Td=1,Ad=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).requestState=Td,i}return o(n,[{key:"getTitle",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getTitle()}},{key:"getPosition",value:function(){var e,t,n=null===(e=this.ad)||void 0===e||null===(t=e.getAdPodInfo())||void 0===t?void 0:t.getPodIndex();return this.ad&&0!==n?-1===n?"post":"mid":"pre"}},{key:"getResource",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getMediaUrl()}},{key:"getDuration",value:function(){var e;return null===(e=this.ad)||void 0===e?void 0:e.getDuration()}},{key:"getPlayhead",value:function(){var e;return(null===(e=this.adPlayback)||void 0===e?void 0:e.getCurrentTime())||0}},{key:"registerListeners",value:function(){for(var e in this.monitorPlayhead(!1,!1),this.references={},this.references[Tn.DID_START_ADS_MANAGER]=this.onDidStartAdsManager.bind(this),this.references[Tn.DID_SET_AD_PLAYBACK]=this.onDidSetAdPlayback.bind(this),this.references[Tn.DFP_AD_METADATA]=this.onAdMetadata.bind(this),this.references[Tn.DFP_AD_LOADED]=this.onAdLoaded.bind(this),this.references[Tn.DFP_CONTENT_PAUSE]=this.onContentPause.bind(this),this.references[Tn.DFP_AD_STARTED]=this.onAdStarted.bind(this),this.references[Tn.DFP_AD_ERROR]=this.onAdError.bind(this),this.references[Tn.DFP_AD_PAUSE]=this.onAdPause.bind(this),this.references[Tn.DFP_AD_RESUME]=this.onAdResume.bind(this),this.references[Tn.DFP_AD_SKIPPED]=this.onAdSkipped.bind(this),this.references[Tn.DFP_AD_CLICKED]=this.onAdClicked.bind(this),this.references[Tn.DFP_AD_COMPLETED]=this.onAdCompleted.bind(this),this.references[Tn.DFP_CONTENT_RESUME]=this.onContentResume.bind(this),this.references)this.player.listenTo(this.player.container,e,this.references[e])}},{key:"unregisterListeners",value:function(){if(this.monitor&&this.monitor.stop(),this.player&&this.references)for(var e in this.references)this.player.stopListening(this.player.container,e),delete this.references[e]}},{key:"onDidStartAdsManager",value:function(){this.fireStart()}},{key:"onDidSetAdPlayback",value:function(e){this.adPlayback=e}},{key:"onAdMetadata",value:function(){this.fireManifest()}},{key:"onAdLoaded",value:function(e){this.ad=e}},{key:"onContentPause",value:function(){this.fireStart(),this.fireBreakStart()}},{key:"onAdStarted",value:function(){this.fireStart(),this.fireJoin()}},{key:"onAdPause",value:function(){this.firePause()}},{key:"onAdResume",value:function(){this.fireResume()}},{key:"onAdSkipped",value:function(){this.fireSkip()}},{key:"onAdClicked",value:function(){this.fireClick()}},{key:"onAdCompleted",value:function(){this.fireStop()}},{key:"onContentResume",value:function(){this.fireBreakStop()}},{key:"onAdError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fireFatalError(null==e?void 0:e.type,null==e?void 0:e.message),this._isVastEmpty(e)&&(this.fireBreakStop(),this.fireResume())}},{key:"_isVastEmpty",value:function(e){var t,n,i=1009===(null==e||null===(t=e.message)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.errorCode),r="pre"===this.getPosition();return i&&r}}]),n}(bd.Adapter),kd=gi.Video,_d=bn.getExperimentsList,Sd=bn.API_VERSION,wd=bn.getPlatformName,Cd=bn.session,Id=bn.toLowerCase,Dd=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).idPlayback=i.container.playback,i.plugin=i.createPlugin(),i}return o(n,[{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"name",get:function(){return"globo_youbora_plugin"}},{key:"accountCode",get:function(){return"prod"===(this.options.youbora?this.options.youbora.account:this.options.env.name)?"globo":"globodev"}},{key:"product",get:function(){var e=this.options.product;return void 0===e?{}:e}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onVideoMetadataLoaded),this.listenToOnce(this.container.playback,Tn.WM_PLAY_REQUESTED_READY,this.onPlayRequestedReady),this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_READY,this.onResourceReady),this.listenToOnce(this.container,Tn.WM_RESOURCE_REQUEST_STATS,this.onResourceRequestStats),this.listenToOnce(this.container,De.Custom.DAI_RESOURCE_LOADED,this.onDaiResourceLoaded)}},{key:"onVideoMetadataLoaded",value:function(e){this.video=e,this.plugin.setOptions(this.createYouboraOptions())}},{key:"onPlayRequestedReady",value:function(){this.plugin.fireInit(void 0,Tn.WM_PLAY_REQUESTED_READY)}},{key:"onResourceReady",value:function(e){var t,n={"content.transactionCode":Cd.getVideoSessionId(this.options.playerId),"content.cdn":(e.cdn||"").toUpperCase(),"content.resource":e.selectedResource.url,"content.customDimension.11":"live"===this.video.kind?this.video.transmission.signal:"","content.customDimension.14":(null===(t=e.selectedResource)||void 0===t?void 0:t.playbackApiVersion)||"","content.customDimension.15":this.video.selectedResource&&this.video.selectedResource.resourcePOP||"","content.customDimension.20":this.video.isLive?this.video.selectedResource&&this.video.selectedResource.dai:""};this.plugin.setOptions(n)}},{key:"onResourceRequestStats",value:function(e){var t={"content.customDimension.16":e.usedFallback};this.plugin.setOptions(t)}},{key:"onDaiResourceLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.streamId,n={"content.customDimension.17":!0,"content.customDimension.18":t};this.plugin.setOptions(n)}},{key:"getPlayerVersion",value:function(){var e="7.65.1",t=window.GloboplaySDKPlugins,n=void 0===t?{}:t;return n.Version&&(e="".concat(e,"/").concat(n.Version)),e}},{key:"createPlugin",value:function(){var e=new bd.Plugin(this.createYouboraOptions());return e.setAdapter(new Ed(this)),e.setAdsAdapter(new Ad(this)),e}},{key:"createYouboraOptions",value:function(){var e,t,n,i,r,a,o,s,l,u,c,d,h,p,f;return{enabled:!0,accountCode:this.accountCode,"app.https":!this.options.httpOnly,"app.name":null===(e=this.product)||void 0===e?void 0:e.name,"app.releaseVersion":null===(t=this.product)||void 0===t?void 0:t.version,"user.name":this.options.globoId,"content.cdn":null===(n=this.video)||void 0===n?void 0:n.cdn,"content.channel":null===(i=this.video)||void 0===i?void 0:i.channelId,"content.drm":null!==(r=this.video)&&void 0!==r&&r.encrypted?null===(a=this.video)||void 0===a?void 0:a.drm:null,"content.id":null===(o=this.video)||void 0===o?void 0:o.id,"content.isLive":null===(s=this.video)||void 0===s?void 0:s.isLive,"content.program":null===(l=this.video)||void 0===l?void 0:l.programId,"content.resource":this.resource,"content.title":null===(u=this.video)||void 0===u?void 0:u.title,"content.transactionCode":Cd.getVideoSessionId(this.options.playerId),"ad.campaign":this.options.adUnit||(null===(c=this.video)||void 0===c?void 0:c.adUnit)||"","content.customDimension.1":this.options.src,"content.customDimension.2":(null===(d=this.video)||void 0===d?void 0:d.programId)||"","content.customDimension.3":(null===(h=this.video)||void 0===h?void 0:h.channelId)||"","content.customDimension.4":this.getPlayerVersion(),"content.customDimension.5":Sd,"content.customDimension.6":Id(null===(p=this.video)||void 0===p?void 0:p.kind)||"","content.customDimension.7":document.location.hostname,"content.customDimension.8":wd(kd.getPlayerType()),"content.customDimension.9":_d(this.options).toString(),"content.customDimension.10":this.container.playback.name,"content.customDimension.11":void 0,"content.customDimension.12":!!this.options.autoPlay,"content.customDimension.13":this.container.getPlaybackType()!==qe.LIVE&&!!this.options.resumeAt&&this.options.resumeAt>0,"content.customDimension.14":"","content.customDimension.15":void 0,"content.customDimension.16":!1,"content.customDimension.17":(null===(f=this.video)||void 0===f||!f.isLive)&&null,"content.customDimension.18":"","content.customDimension.19":!!this.options.skipDFP,"content.customDimension.20":void 0,"background.enabled":!1,"errors.ignore":[en.PLAYLIST_LOAD_ERROR.code]}}},{key:"destroy",value:function(){this.removeAdapters(),g(u(n.prototype),"destroy",this).call(this)}},{key:"removeAdapters",value:function(){this.plugin&&(this.plugin.removeAdapter(),this.plugin.removeAdsAdapter())}}]),n}(ot),Rd="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==Rd&&Rd,xd="URLSearchParams"in Rd,Ld="Symbol"in Rd&&"iterator"in Symbol,Pd="FileReader"in Rd&&"Blob"in Rd&&function(){try{return new Blob,!0}catch(e){return!1}}(),Od="FormData"in Rd,Md="ArrayBuffer"in Rd;if(Md)var Nd=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Bd=ArrayBuffer.isView||function(e){return e&&Nd.indexOf(Object.prototype.toString.call(e))>-1};function Ud(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function Fd(e){return"string"!=typeof e&&(e=String(e)),e}function Vd(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return Ld&&(t[Symbol.iterator]=function(){return t}),t}function Hd(e){this.map={},e instanceof Hd?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function jd(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function Kd(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function Gd(e){var t=new FileReader,n=Kd(t);return t.readAsArrayBuffer(e),n}function Wd(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function zd(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:Pd&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Od&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:xd&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Md&&Pd&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=Wd(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Md&&(ArrayBuffer.prototype.isPrototypeOf(e)||Bd(e))?this._bodyArrayBuffer=Wd(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):xd&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Pd&&(this.blob=function(){var e=jd(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=jd(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(Gd)}),this.text=function(){var e,t,n,i=jd(this);if(i)return i;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=Kd(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),i=0;i<t.length;i++)n[i]=String.fromCharCode(t[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Od&&(this.formData=function(){return this.text().then($d)}),this.json=function(){return this.text().then(JSON.parse)},this}Hd.prototype.append=function(e,t){e=Ud(e),t=Fd(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},Hd.prototype.delete=function(e){delete this.map[Ud(e)]},Hd.prototype.get=function(e){return e=Ud(e),this.has(e)?this.map[e]:null},Hd.prototype.has=function(e){return this.map.hasOwnProperty(Ud(e))},Hd.prototype.set=function(e,t){this.map[Ud(e)]=Fd(t)},Hd.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},Hd.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),Vd(e)},Hd.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),Vd(e)},Hd.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),Vd(e)},Ld&&(Hd.prototype[Symbol.iterator]=Hd.prototype.entries);var Yd=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function qd(e,t){if(!(this instanceof qd))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,r=(t=t||{}).body;if(e instanceof qd){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Hd(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new Hd(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),Yd.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(r),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;if(a.test(this.url))this.url=this.url.replace(a,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function $d(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(r))}})),t}function Xd(e,t){if(!(this instanceof Xd))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new Hd(t.headers),this.url=t.url||"",this._initBody(e)}qd.prototype.clone=function(){return new qd(this,{body:this._bodyInit})},zd.call(qd.prototype),zd.call(Xd.prototype),Xd.prototype.clone=function(){return new Xd(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Hd(this.headers),url:this.url})},Xd.error=function(){var e=new Xd(null,{status:0,statusText:""});return e.type="error",e};var Qd=[301,302,303,307,308];Xd.redirect=function(e,t){if(-1===Qd.indexOf(t))throw new RangeError("Invalid status code");return new Xd(null,{status:t,headers:{location:e}})};var Zd=Rd.DOMException;try{new Zd}catch(e){Zd=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},Zd.prototype=Object.create(Error.prototype),Zd.prototype.constructor=Zd}function Jd(e,t){return new Promise((function(n,i){var r=new qd(e,t);if(r.signal&&r.signal.aborted)return i(new Zd("Aborted","AbortError"));var a=new XMLHttpRequest;function o(){a.abort()}a.onload=function(){var e,t,i={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new Hd,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();t.append(i,r)}})),t)};i.url="responseURL"in a?a.responseURL:i.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;setTimeout((function(){n(new Xd(r,i))}),0)},a.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},a.onabort=function(){setTimeout((function(){i(new Zd("Aborted","AbortError"))}),0)},a.open(r.method,function(e){try{return""===e&&Rd.location.href?Rd.location.href:e}catch(t){return e}}(r.url),!0),"include"===r.credentials?a.withCredentials=!0:"omit"===r.credentials&&(a.withCredentials=!1),"responseType"in a&&(Pd?a.responseType="blob":Md&&r.headers.get("Content-Type")&&-1!==r.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof Hd?r.headers.forEach((function(e,t){a.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){a.setRequestHeader(e,Fd(t.headers[e]))})),r.signal&&(r.signal.addEventListener("abort",o),a.onreadystatechange=function(){4===a.readyState&&r.signal.removeEventListener("abort",o)}),a.send(void 0===r._bodyInit?null:r._bodyInit)}))}Jd.polyfill=!0,Rd.fetch||(Rd.fetch=Jd,Rd.Headers=Hd,Rd.Request=qd,Rd.Response=Xd);var eh=window.WM&&window.WM.Settings||{},th=(eh.bitrateCapping&&eh.bitrateCapping||{}).poolingInterval||eh.bitrateCappingPoolingInterval||6e5,nh=function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t},ih=function(e){return e.json()},rh=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).options.bitrateCappingDisabled&&i.disable(),i}return o(n,[{key:"name",get:function(){return"bitrate_capping"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"playback",get:function(){return this.container.playback}},{key:"host",get:function(){return"".concat(this.options.env.protocol,"://wroom.video.globo.com/limits")}},{key:"isHlsjsPlayback",get:function(){return"id_playback"===this.playback.name&&"hls"===this.playback.innerPlaybackName}},{key:"bindEvents",value:function(){this.stopListening(),this.listenTo(this.playback,Tn.WM_RESOURCE_READY,this._onResourceReady),this.listenTo(this.playback,Tn.WM_RESOURCE_ERROR,this._onResourceError),this.listenTo(this.playback,Tn.WM_RESOURCE_SELECTED,this._onResourceSelected)}},{key:"disable",value:function(){g(u(n.prototype),"disable",this).call(this),this._currentBitrate&&this._capBitrate(0),this._stopPolling()}},{key:"enable",value:function(){g(u(n.prototype),"enable",this).call(this),this._bindPlaybackEvents(),this.playback.isPlaying()&&this._startPolling()}},{key:"_bindPlaybackEvents",value:function(){this._unbindPlaybackEvents(),this.listenTo(this.playback,De.PLAYBACK_PLAY,this._startPolling),this.listenTo(this.playback,De.PLAYBACK_PAUSE,this._stopPolling),this.listenTo(this.playback,De.PLAYBACK_STOP,this._stopPolling),this.listenTo(this.playback,De.PLAYBACK_ENDED,this._stopPolling),this.listenTo(this.playback,De.PLAYBACK_ERROR,this._stopPolling)}},{key:"_unbindPlaybackEvents",value:function(){this.stopListening(this.playback,De.PLAYBACK_PLAY,this._startPolling),this.stopListening(this.playback,De.PLAYBACK_PAUSE,this._stopPolling),this.stopListening(this.playback,De.PLAYBACK_STOP,this._stopPolling),this.stopListening(this.playback,De.PLAYBACK_ENDED,this._stopPolling),this.stopListening(this.playback,De.PLAYBACK_ERROR,this._stopPolling)}},{key:"_buildLimitsUrl",value:function(){var e=new URL(this.host),t=this.resource.selectedResource,n=(void 0===t?{}:t).resourcePOP;return n&&(e.search=new URLSearchParams({pop:n})),e}},{key:"_fetchLimits",value:function(){var e=this;_e.info(this.name,"fetching bitrate capping"),fetch(this._buildLimitsUrl()).then(nh).then(ih).then((function(t){var n=t.b;return e._capBitrate(n)})).catch((function(t){return _e.warn(e.name,"error fetching bitrate capping:",t)}))}},{key:"_capBitrate",value:function(e){if(this._currentBitrate!==e){e?_e.warn(this.name,"capping bitrate to ".concat(e)):_e.warn(this.name,"reset bitrate to unlimited");var t=this._getLevelFromBitrate(e);t>=0&&_e.warn(this.name,"capping level to ".concat(t)),this._currentBitrate=e,this._capLevelIndex(t),this.container.trigger(Tn.WM_BITRATE_CAP,e)}else _e.info(this.name,"no limit changes")}},{key:"_capLevelIndex",value:function(e){this.isHlsjsPlayback&&this._capHlsjsLevel(e)}},{key:"_capHlsjsLevel",value:function(e){this._destroyCapLevelController(),this._updateHlsjsConfig(e),this._createCapLevelController()}},{key:"_createCapLevelController",value:function(){if(!this._currentBitrate&&this.playback.options.playback.hlsjsConfig.capLevelToPlayerSize){var e=this.playback.playback._hls,t=new e.config.capLevelController(e);t.onMediaAttaching(e),t.onManifestParsed(e),this.playback.playback._hls.coreComponents.push(t)}}},{key:"_destroyCapLevelController",value:function(){var e=this;this.playback.playback._hls.coreComponents=this.playback.playback._hls.coreComponents.filter((function(t){var n=e._isHlsjsCapLevelController(t);return n&&t.destroy(),!n}))}},{key:"_updateHlsjsConfig",value:function(e){this.playback.playback._hls.autoLevelCapping=e}},{key:"_isHlsjsCapLevelController",value:function(e){return e.constructor===this.playback.playback._hls.config.capLevelController}},{key:"_getLevelFromBitrate",value:function(e){if(!e)return-1;var t,n=[];return this.isHlsjsPlayback&&(n=this.playback.playback._hls.levels),(t=n.reduce((function(t,n,i){return n.bitrate<=e?i:t}),0))>n.length&&(t=-1),_e.debug(this.name,"selected level:",n[t]),t}},{key:"_onResourceSelected",value:function(e){this._stopPolling(),this.resource=e}},{key:"_onResourceError",value:function(){_e.info(this.name,"resource error: disabling"),this.disable()}},{key:"_onResourceReady",value:function(e){"globo"===e.cdn?(_e.info(this.name," video loaded, waiting for start"),this._bindPlaybackEvents()):(_e.info(this.name,"cdn does not allow bitrate capping"),this.disable())}},{key:"_startPolling",value:function(){var e=this;this._pollTimerId||(_e.info(this.name,"video playing, configuring polling"),this._pollTimerId=setInterval((function(){return e._fetchLimits()}),th),this._fetchLimits())}},{key:"_stopPolling",value:function(){this._pollTimerId&&(_e.info(this.name,"polling canceled"),clearInterval(this._pollTimerId),delete this._pollTimerId)}}]),n}(ot),ah=(window.WM&&window.WM.Settings||{}).lockClientPoolingInterval||29e3,oh=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"lock_client"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"playback",get:function(){return this.container.playback}},{key:"lockKey",get:function(){return this.playback.selectedResource.session}},{key:"endpoint",get:function(){return"".concat(this.options.env.protocol,"://watcher.playback.video.globo.com/heartbeat")}},{key:"bindEvents",value:function(){this.listenTo(this.playback,Tn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(e){e.selectedResource.session&&this.bindPlaybackEvents()}},{key:"bindPlaybackEvents",value:function(){this.listenTo(this.playback,De.PLAYBACK_PLAY,this.startPolling),this.listenTo(this.playback,De.PLAYBACK_STOP,this.stopPolling),this.listenTo(this.playback,De.PLAYBACK_ENDED,this.stopPolling),this.listenTo(this.playback,De.PLAYBACK_ERROR,this.stopPolling)}},{key:"startPolling",value:function(){var e=this;this._pollTimerId||(this._pollTimerId=setInterval((function(){return e.sendPing()}),ah),this.sendPing())}},{key:"sendPing",value:function(){var e=this,t=new Headers;t.append("Authorization","Bearer ".concat(this.lockKey));var n={method:"POST",headers:t};fetch(this.endpoint,n).then((function(t){if(403===t.status)return t.json().then((function(n){return e.onPingResponse({status:t.status,body:n})}))})).catch((function(t){return _e.warn(e.name,"error",t)}))}},{key:"onPingResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.status,n=e.body;if(_e.info(this.name,{status:t,body:n}),403===t&&(null==n?void 0:n.code)===en.SIMULTANEOUS_ACCESS.code){var i={useCodePrefix:!1};this.playback.trigger(De.PLAYBACK_ERROR,this.createError(en.SIMULTANEOUS_ACCESS,i))}}},{key:"stopPolling",value:function(){this._pollTimerId&&(clearInterval(this._pollTimerId),delete this._pollTimerId)}},{key:"destroy",value:function(){this.stopPolling(),g(u(n.prototype),"destroy",this).call(this)}}]),n}(ot),sh=bn.getCurrentTime,lh=function(e){l(n,e);var t=p(n);function n(){return r(this,n),t.apply(this,arguments)}return o(n,[{key:"name",get:function(){return"simulcast-ping"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"playback",get:function(){return this.container.playback}},{key:"innerPlayback",get:function(){return this.playback.playback}},{key:"pingInterval",get:function(){return 6e4}},{key:"bindEvents",value:function(){this.listenTo(this.playback,Tn.WM_VIDEO_METADATA_LOADED,this.bindPlaybackEvents)}},{key:"bindPlaybackEvents",value:function(e){e.isLive&&(this.listenTo(this.playback,De.PLAYBACK_STOP,this.stopTimer),this.listenTo(this.playback,De.PLAYBACK_ERROR,this.stopTimer),this.listenTo(this.playback,De.PLAYBACK_ENDED,this.stopTimer),this.listenToOnce(this.playback,De.PLAYBACK_PLAY,this.onPlay))}},{key:"onPlay",value:function(){this.startTimer(),this.heartbeatTick()}},{key:"heartbeatTick",value:function(){this.innerPlayback&&this.container.trigger(Tn.SIMULCAST_PING,sh(this.innerPlayback))}},{key:"startTimer",value:function(){this.heartbeat=setInterval(this.heartbeatTick.bind(this),this.pingInterval)}},{key:"stopTimer",value:function(){this.heartbeat&&clearInterval(this.heartbeat)}},{key:"restartTimer",value:function(){this.stopTimer(),this.startTimer()}},{key:"destroy",value:function(){this.stopTimer(),g(u(n.prototype),"destroy",this).call(this)}}]),n}(ot),uh=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e))._isVideoFinished=!1,i}return o(n,[{key:"name",get:function(){return"watch_session"}},{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"dfp",get:function(){return this.options.dfp}},{key:"bindEvents",value:function(){this.listenTo(this.container,Tn.DFP_ALL_ADS_COMPLETED,this.onAllAdsCompleted),this.listenTo(this.container,De.CONTAINER_ENDED,this.onVideoFinished),this.listenTo(this.container,De.CONTAINER_STOP,this.onVideoFinished)}},{key:"onAllAdsCompleted",value:function(){this.sendEvent()}},{key:"onVideoFinished",value:function(){this._isVideoFinished=!0,this.sendEvent()}},{key:"sendEvent",value:function(){var e=this;(this.dfp.isAllAdsCompleted||this.dfp.shouldSkipAd||this.dfp.error)&&this._isVideoFinished&&setTimeout((function(){e.container.trigger(Tn.WATCH_SESSION_END),e.onWatchSessionEnd()}))}},{key:"onWatchSessionEnd",value:function(){this._isVideoFinished=!1}}]),n}(ot),ch=Gr((function(e,t){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(10));function r(e){return e&&e.__esModule?e:{default:e}}var a={AVOID_COOKIE_USAGE:!1,EVENTS_BUFFER_SIZE:100,EVENTS_SENDER_INTERVAL:1e4,EVENTS_SENDER_MIN_INTERVAL:5e3,EVENTS_SENDER_MAX_INTERVAL:2e4,EVENTS_DISCARD_AFTER_MSECS:36e5,EVENTS_BULK_SIZE:10,HORIZON_CALLBACK_STACK_LIMIT:1e3,HORIZON_TRACK_IDENTIFICATION_RESOURCE:"id",HORIZON_TRACK_HOST:"horizon-track.globo.com",HORIZON_CLIENT_UUID:r(n(2)).default.getResource("clientInstanceUUID",(0,i.default)()),HORIZON_REQUEST_ENCODING:"base64",HORIZON_SCHEMAS_HOST:"horizon-schemas.globo.com",IDENTIFICATION_LOAD_RETRY_AFTER_MSECS:5e3,PACKAGE_VERSION:"1.10.0",SCHEMA_VALIDATOR_SCRIPT_URL:"s3.glbimg.com/cdn/libs/tv4/1.3.0/tv4.min.js",SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES:2,SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS:1e4,USE_HTTPS:!0},o={avoidCookieUsage:function(){a.AVOID_COOKIE_USAGE=!0},useHTTPOnly:function(){a.USE_HTTPS=!1},useQAConfiguration:function(){a.HORIZON_TRACK_HOST="horizon-track.qa.globoi.com",a.HORIZON_SCHEMAS_HOST="horizon-schemas.qa.globoi.com",a.HORIZON_REQUEST_ENCODING="json"}};t.default=Object.assign(a,o)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i={COMPONENT_NOT_READY:"[Horizon] Component is not ready.",COMPONENT_UNAVAILABLE:"[Horizon] Class or function is required.",DUPLICATED_SCHEMA:"[Horizon] Duplicated schema.",ERROR_LOADING_RESOURCE:"[Horizon] Failed to load resource.",INVALID_AUTH_TOKEN:"[Horizon] Invalid authorization token.",INVALID_DATA:"[Horizon] Invalid data.",INVALID_DATE:"[Horizon] Invalid date-time RFC 3339 format.",INVALID_STRING_NUMERIC_STRING:"[Horizon] numericString should be string.",INVALID_EMPTY_NUMERIC_STRING:"[Horizon] numericString should be empty.",INVALID_NUMERIC_STRING:"[Horizon] Invalid number. Field with NumericString must to be number.",INVALID_ENVIRONMENT:"[Horizon] Invalid environment value.",INVALID_FORMAT:"[Horizon] Invalid event format.",INVALID_REQUEST:"[Horizon] Invalid request.",INVALID_TIMESTAMP:"[Horizon] Invalid timestamp.",INVALID_VERSION_FORMAT:"[Horizon] Invalid version format.",INVALID_RELATION_ID:"[Horizon] Invalid relation identification.",LIMIT_EXCEEDED:"[Horizon] Resource limit exceeded.",MUST_BE_DEFINED:"[Horizon] Parameter or argument must be defined",SCHEMA_VALIDATOR_ERROR_LOADING:"[Horizon] Could not load SchemaValidator.",UNSUPPORTED_TYPE:"[Horizon] Unsupported type.",UNSUPPORTED_TENANT:"[Horizon] Unsupported tenant.",UNSUPPORTED_ENCODER:"[Horizon] Unsupported encoder.",USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE:"[Horizon] Can not set or remove a logged user when AVOID_COOKIE_USAGE is not enabled."},r={mustBeDefined:function(e){throw new Error(i.MUST_BE_DEFINED+": "+e+".")}};t.default=Object.assign(i,r)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return window.horizonResources=window.horizonResources||{},window.horizonResources};t.default={getContext:i,getResource:function(e,t){var n=i();return n[e]=n[e]||t,n[e]}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={execAsync:function(e,t){setTimeout((function(){return e(t)}),1)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default={request:function(e,t,n,i){var r=new XMLHttpRequest;r.open(e,t,!0),r.onload=function(){return r.status<400?n(JSON.parse(r.response)):i(r.response)},r.onerror=i,r.send()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(3)),a=u(n(2)),o=u(n(1)),s=u(n(4)),l=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){return a.default.getResource("idManager",{loggedIDs:null,anonymousIDs:null,sessionIDs:null})},d=["GLBID","GST"],h={STATE_READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state=n?h.STATE_READY:h.STATE_NOT_READY,this.url=t,this.bypass=n,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return i(e,[{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===h.STATE_READY)return e(this.getClientIDs());if(this.callbacks.onReady.length>l.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(o.default.LIMIT_EXCEEDED+" IDManager callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===h.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"getAsKeyValue",value:function(){if(!this.isReady())throw new Error(""+o.default.COMPONENT_NOT_READY);if(this.bypass)return"";var e=this.getClientIDs();return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}},{key:"getClientIDs",value:function(){var e=c();return Object.assign(e.loggedIDs||{},e.anonymousIDs||{},e.sessionIDs||{})}},{key:"isReady",value:function(){return this.state===h.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=h.STATE_SCHEDULED,this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=h.STATE_NOT_READY,e.load()}),l.default.IDENTIFICATION_LOAD_RETRY_AFTER_MSECS)}},{key:"setLoggedUser",value:function(e,t){if(-1===d.indexOf(e))throw Error(o.default.INVALID_AUTH_TOKEN);var n=c();n.loggedIDs=Object.assign(n.loggedIDs||{},function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))}},{key:"setAnonymousUser",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=c();if(null==n.anonymousIDs||t){if(!("glb_uid"in e)||!("glb_uid_public"in e))throw o.default.mustBeDefined("glb_uid and glb_uid_public");var i={glb_uid:e.glb_uid,glb_uid_public:e.glb_uid_public};n.anonymousIDs=Object.assign(n.anonymousIDs||{},i)}}},{key:"getAnonymousUser",value:function(){return c().anonymousIDs}},{key:"setSessionID",value:function(e){e.hsid&&(c().sessionIDs=Object.assign({},{hsid:e.hsid}))}},{key:"removeLoggedUser",value:function(){var e=c();d.forEach((function(t){e.loggedIDs[t]&&delete e.loggedIDs[t]}))}},{key:"load",value:function(){var e=this;if(this.state===h.STATE_NOT_READY){this.state=h.STATE_LOADING,this.callbacks.onLoad.forEach((function(e){return e()}));var t=l.default.USE_HTTPS?"https://":"http://";s.default.request("GET",""+t+this.url,(function(t){e.setSessionID(t),e.setAnonymousUser(t,!1),e.state=h.STATE_READY,e.callbacks.onReady.forEach((function(t){return r.default.execAsync(t,e.getClientIDs())}))}),(function(t){e.state=h.STATE_ERROR,e.callbacks.onError.forEach((function(e){return r.default.execAsync(e,t)})),e.retry()}))}}}]),e}(),f=function(e){var t=c();if(!t.instance){var n=e||l.default.HORIZON_TRACK_HOST+"/"+l.default.HORIZON_TRACK_IDENTIFICATION_RESOURCE,i=!1===l.default.AVOID_COOKIE_USAGE;t.instance=new p(n,i)}return t.instance};t.default={getInstance:f,getContextManager:c,setLoggedUser:function(e,t){if(!l.default.AVOID_COOKIE_USAGE)throw Error(o.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);e&&0!==e.length||o.default.mustBeDefined("tokenName"),t&&0!==t.length||o.default.mustBeDefined("tokenValue"),f().setLoggedUser(e,t)},removeLoggedUser:function(){if(!l.default.AVOID_COOKIE_USAGE)throw Error(o.default.USE_MANAGER_ONLY_WHEN_AVOIDING_COOKIE);f().removeLoggedUser()},setAnonymousUser:function(e){f().setAnonymousUser(e)},getAnonymousUser:function(){return f().getAnonymousUser()}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IDManager=t.Settings=t.HorizonClient=void 0,n(7);var i=o(n(9)),r=o(n(0)),a=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var s={setLoggedUser:a.default.setLoggedUser,removeLoggedUser:a.default.removeLoggedUser,setAnonymousUser:a.default.setAnonymousUser,getAnonymousUser:a.default.getAnonymousUser};t.HorizonClient=i.default,t.Settings=r.default,t.IDManager=s},function(e,t,n){n(8).polyfill()},function(e,t,n){function i(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var a=Object.keys(Object(r)),o=0,s=a.length;o<s;o++){var l=a[o],u=Object.getOwnPropertyDescriptor(r,l);void 0!==u&&u.enumerable&&(n[l]=r[l])}}return n}e.exports={assign:i,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:i})}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=h(n(0)),o=h(n(13)),s=h(n(1)),l=h(n(15)),u=h(n(26)),c=h(n(27)),d=h(n(5));function h(e){return e&&e.__esModule?e:{default:e}}var p={READY:"stateReady",UNLOADED:"stateNotReady",LOADING:"stateLoading"},f=["web","instant-article","app"],g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"web";if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tenant=t||c.default.getTenant()||s.default.mustBeDefined("tenant"),this.deviceGroup=n||c.default.getDeviceGroup()||s.default.mustBeDefined("deviceGroup"),this.defaultContentType=r,-1===f.indexOf(h))throw Error(s.default.INVALID_ENVIRONMENT);this.environment=h,this.validator=o.default,this.clientVersion=a.default.PACKAGE_VERSION,this.state=p.UNLOADED,this.referer=document.referrer;var g=null,m=null,v=null;this.setSchemasProvider=function(e){g=e},this.getSchemasProvider=function(){if(!g){var e=u.default.getInstance();i.setSchemasProvider(e)}return g},this.setEventBus=function(e){m=e},this.getEventBus=function(){if(!m){var e=l.default.getInstance(i.tenant,i.deviceGroup,i.environment,i.getIdManager());i.setEventBus(e)}return m},this.setIdManager=function(e){v=e},this.getIdManager=function(){if(!v){var e=d.default.getInstance();i.setIdManager(e)}return v},this.isReady=function(){return!!g&&!!v&&i.validator.isReady()&&g.isReady()&&v.isReady()},window.addEventListener("beforeunload",(function(){i.unload()}))}return r(e,[{key:"useDefaultContentType",value:function(e){this.defaultContentType=e}},{key:"setValidator",value:function(e){this.validator=e}},{key:"setReferer",value:function(e){this.referer=e||document.referrer}},{key:"unload",value:function(){this.flush()}},{key:"getScopeInfo",value:function(e){return{url:document.location.href,actionTs:+Date.now(),horizonClientVersion:this.clientVersion,horizonClientReferer:this.referer,horizonRelationId:e}}},{key:"validateBeforeEnqueue",value:function(e){var t=this.getSchemasProvider().get(e.id,e.version);this.validator.validateFor(e,t)}},{key:"onReady",value:function(e){this.validator.isReady()?this.getSchemasProvider().isReady()?this.getIdManager().isReady()?(this.state=p.READY,e()):(this.state=p.LOADING,this.getIdManager().onReady(e),this.getIdManager().load()):(this.state=p.LOADING,this.getSchemasProvider().onReady(e),this.getSchemasProvider().load()):(this.state=p.LOADING,this.validator.onReady(e),this.validator.load())}},{key:"flush",value:function(){var e=this;this.isReady()?this.getEventBus().flush():this.onReady((function(){return e.flush()}))}},{key:"send",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=n&&"string"!=typeof n)throw new Error(s.default.INVALID_RELATION_ID+" Wrong relationId type. It should be a String: actual type is "+(void 0===n?"undefined":i(n)));[].concat(e).forEach((function(e){t.validator.validateArgs(e),t.sendWithInfo(e,t.getScopeInfo(n))}))}},{key:"sendWithInfo",value:function(e,t){var n=this;if(!this.isReady())return this.state===p.UNLOADED&&this.flush(),void this.onReady((function(){return n.sendWithInfo(e,t)}));this.validateBeforeEnqueue(e);var i=Object.assign({},t,e);i.contentType||(this.defaultContentType||s.default.mustBeDefined("contentType"),i.contentType=this.defaultContentType),this.getEventBus().enqueue(i)}}]),e}();t.default=g},function(e,t,n){var i=n(11),r=n(12);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||r(o)}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=s(n(14)),a=s(n(1)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var l={ready:[]},u=["url"],c=function(){return!!window.tv4},d=function(e){return null===e||isNaN(e)&&!isNaN(Date.parse(e))?null:a.default.INVALID_DATE},h=function(e){return"string"!=typeof e?a.default.INVALID_STRING_NUMERIC_STRING:""===e.trim()?a.default.INVALID_EMPTY_NUMERIC_STRING:Number.isFinite(Number(e))?null:a.default.INVALID_NUMERIC_STRING};t.default={validateFor:function(e,t){if(!c())throw new Error(a.default.ERROR_LOADING_RESOURCE+" Validator is not ready.");if(!t)throw new Error(a.default.INVALID_DATA+" Argument: schema.");if(!/\d+\.\d+/.test(e.version))throw new Error(a.default.INVALID_VERSION_FORMAT);if(!tv4.validate(e.properties,t))throw new Error(a.default.INVALID_DATA+" "+e.id+" "+e.version+". "+tv4.error)},validateArgs:function(e){var t=Object.prototype.hasOwnProperty;if(!(e&&t.call(e,"id")&&t.call(e,"version")&&t.call(e,"properties")))throw new Error(a.default.INVALID_FORMAT+" Missing properties: "+JSON.stringify(e));if("string"!=typeof e.id||"string"!=typeof e.version||"object"!==i(e.properties))throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(u.filter((function(t){return e[t]&&"string"!=typeof e[t]})).length>0)throw new Error(a.default.INVALID_FORMAT+" Wrong object type: "+JSON.stringify(e));if(e.id.length<2||e.version.length<3)throw new Error(a.default.INVALID_FORMAT+" Invalid property size: "+JSON.stringify(e));var n=Object.assign({},e);delete n.id,delete n.version,delete n.properties,delete n.contentType;var r=Object.keys(n);if(r.length>0&&!r.every((function(e){return-1!==u.indexOf(e)})))throw new Error(a.default.INVALID_FORMAT+" Extra keys aren't allowed: "+JSON.stringify(n))},tv4IsValidData:d,tv4IsNumericString:h,isReady:c,onReady:function(e){if(c())return e();if(l.ready.length>o.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(a.default.LIMIT_EXCEEDED+" Validator callback stack.");return l.ready.unshift(e)},load:function(){if(!r.default.isDefined("tv4")){var e=(o.default.USE_HTTPS?"https://":"http://")+o.default.SCHEMA_VALIDATOR_SCRIPT_URL;(0,r.default)([e],"tv4",{async:!0,numRetries:o.default.SCHEMA_VALIDATOR_SCRIPT_MAX_RETRIES,success:function(){tv4.addFormat("date-time",d),tv4.addFormat("numericString",h),l.ready.forEach((function(e){return e()}))},error:function(e){throw new Error(a.default.SCHEMA_VALIDATOR_ERROR_LOADING+" "+e)}})}}}},function(e,t,n){var i,r,a,o;o=function(){var e=function(){},t={},n={},i={};function r(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function o(t,n,i,r){var a,s,l=document,u=i.async,c=(i.numRetries||0)+1,d=i.before||e,h=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(t)?((s=l.createElement("link")).rel="stylesheet",s.href=h,(a="hideFocus"in s)&&s.relList&&(a=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg)$)/.test(t)?(s=l.createElement("img")).src=h:((s=l.createElement("script")).src=t,s.async=void 0===u||u),s.onload=s.onerror=s.onbeforeload=function(e){var l=e.type[0];if(a)try{s.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<c)return o(t,n,i,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==d(t,s)&&l.head.appendChild(s)}function s(e,n,i){var s,l;if(n&&n.trim&&(s=n),l=(s?i:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}function u(t,n){!function(e,t,n){var i,r,a=(e=e.push?e:[e]).length,s=a,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--a||t(l)},r=0;r<s;r++)o(e[r],i,n)}(e,(function(e){a(l,e),t&&a({success:t,error:n},e),r(s,e)}),l)}if(l.returnPromise)return new Promise(u);u()}return s.ready=function(e,t){return function(e,t){var r,a,o,s=[],l=(e=e.push?e:[e]).length,u=l;for(r=function(e,n){n.length&&s.push(e),--u||t(s)};l--;)a=e[l],(o=n[a])?r(a,o):(i[a]=i[a]||[]).push(r)}(e,(function(e){a(t,e)})),s},s.done=function(e){r(e,[])},s.reset=function(){t={},n={},i={}},s.isDefined=function(e){return e in t},s},r=[],void 0===(a="function"==typeof(i=o)?i.apply(t,r):i)||(e.exports=a)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(16);var r=d(n(2)),a=d(n(17)),o=d(n(0)),s=d(n(1)),l=d(n(22)),u=d(n(24)),c=d(n(25));function d(e){return e&&e.__esModule?e:{default:e}}var h=function(){return r.default.getResource("bus",{})},p=function(){function e(t,n,i,r,a){var d=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentTenant=t||s.default.mustBeDefined("tenant"),this.instanceID=n||s.default.mustBeDefined("instanceID"),this.deviceGroup=i||s.default.mustBeDefined("deviceGroup"),this.environment=r||s.default.mustBeDefined("environment"),this.queue=new u.default(o.default.EVENTS_BUFFER_SIZE),this.idManager=a,this.dispatchNumber=1,this.actionCounter=0,(new c.default).every(o.default.EVENTS_SENDER_INTERVAL).call((function(){d.queue=d.filterQueue();var e=d.prepareRequest();d.dispatch(e,o.default.HORIZON_REQUEST_ENCODING)||e.actions.forEach((function(e){return d.enqueue(e)}))})).call(l.default.applyThrottlingPolicy).start()}return i(e,[{key:"setMaxQueueSize",value:function(e){this.queue=u.default.fromArray(this.queue.items,e)}},{key:"filterQueue",value:function(){var e=+Date.now()-o.default.EVENTS_DISCARD_AFTER_MSECS;return this.queue.filter((function(t){return t.actionTs>e}))}},{key:"prepareRequest",value:function(){var e=this.queue.splice(0,o.default.EVENTS_BULK_SIZE);return this.actionCounter+=e.length,{horizonClientUUID:this.instanceID,horizonClientTenant:this.currentTenant,horizonClientTs:Date.now(),horizonClientType:"js",horizonClientDeviceGroup:this.deviceGroup,horizonDispatchNumber:this.dispatchNumber,horizonActionCounter:this.actionCounter,horizonEnvironment:this.environment,actions:e}}},{key:"isValidRequest",value:function(e){if(!e||e&&!e.actions)throw new Error(s.default.INVALID_REQUEST);return e.actions.length>0}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json",n=o.default.USE_HTTPS?"https://":"http://",i=this.idManager.getAsKeyValue(),r=i?"?"+i:"",s=""+n+l.default.applyDestinationPolicy()+"/event/"+this.currentTenant+r,u=a.default.get(t);if(!this.isValidRequest(e))return!1;this.dispatchNumber+=1;var c=u(e);return navigator.sendBeacon(s,c)}},{key:"enqueue",value:function(e){if(!e.actionTs)throw new Error(s.default.INVALID_TIMESTAMP);this.queue.push(e)}},{key:"flush",value:function(){for(;this.queue.length>0;){this.queue=this.filterQueue();var e=this.prepareRequest();this.dispatch(e,o.default.HORIZON_REQUEST_ENCODING)}}},{key:"length",get:function(){return this.queue.length}}]),e}();t.default={getInstance:function(e,t,n,i){var r=h(),a=e+"-"+t;return r[a]||(r[a]=new p(e,o.default.HORIZON_CLIENT_UUID,t,n,i)),r[a]},reset:function(e,t){e&&0!==e.length||s.default.mustBeDefined("tenant"),t&&0!==t.length||s.default.mustBeDefined("deviceGroup");var n=e+"-"+t;delete h()[n]},getContextBus:h}},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){return"string"==typeof e},r=function(e){return e instanceof Blob};(function(){(function(){return"navigator"in this&&"sendBeacon"in this.navigator}).call(this)||("navigator"in this||(this.navigator={}),this.navigator.sendBeacon=function(e,t){var n=this.event&&this.event.type,a="unload"===n||"beforeunload"===n,o="XMLHttpRequest"in this?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");o.open("POST",e,!a),o.withCredentials=!0,o.setRequestHeader("Accept","*/*"),i(t)?(o.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),o.responseType="text/plain"):r(t)&&t.type&&o.setRequestHeader("Content-Type",t.type);try{o.send(t)}catch(e){return!1}return!0}.bind(this))}).call("object"===("undefined"==typeof window?"undefined":n(window))?window:{})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(18)),r=o(n(21)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s={base64:function(e){var t=new FormData;return t.append("data",i.default.encode(r.default.encode(JSON.stringify(e)))),t.append("encoding","base64"),t},json:function(e){return JSON.stringify(e)}};t.default={get:function(e){if(!(e in s))throw new Error(a.default.UNSUPPORTED_ENCODER+" Invalid "+e+" encoder.");return s[e]}}},function(e,t,n){(function(e,i){var r;/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */!function(a){var o=("object"==typeof e&&e&&e.exports,"object"==typeof i&&i);o.global!==o&&o.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var l=function(e){throw new s(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&l("The string to be encoded contains characters outside of the Latin1 range.");for(var t,n,i,r,a=e.length%3,o="",s=-1,c=e.length-a;++s<c;)t=e.charCodeAt(s)<<16,n=e.charCodeAt(++s)<<8,i=e.charCodeAt(++s),o+=u.charAt((r=t+n+i)>>18&63)+u.charAt(r>>12&63)+u.charAt(r>>6&63)+u.charAt(63&r);return 2==a?(t=e.charCodeAt(s)<<8,n=e.charCodeAt(++s),o+=u.charAt((r=t+n)>>10)+u.charAt(r>>4&63)+u.charAt(r<<2&63)+"="):1==a&&(r=e.charCodeAt(s),o+=u.charAt(r>>2)+u.charAt(r<<4&63)+"=="),o},decode:function(e){var t=(e=String(e).replace(c,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&l("Invalid character: the string to be decoded is not correctly encoded.");for(var n,i,r=0,a="",o=-1;++o<t;)i=u.indexOf(e.charAt(o)),n=r%4?64*n+i:i,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};void 0===(r=function(){return d}.call(t,n,t,e))||(e.exports=r)}()}).call(t,n(19)(e),n(20))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){!function(e){var t,n,i,r=String.fromCharCode;function a(e){for(var t,n,i=[],r=0,a=e.length;r<a;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<a?56320==(64512&(n=e.charCodeAt(r++)))?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--):i.push(t);return i}function o(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function s(e,t){return r(e>>t&63|128)}function l(e){if(0==(4294967168&e))return r(e);var t="";return 0==(4294965248&e)?t=r(e>>6&31|192):0==(4294901760&e)?(o(e),t=r(e>>12&15|224),t+=s(e,6)):0==(4292870144&e)&&(t=r(e>>18&7|240),t+=s(e,12),t+=s(e,6)),t+r(63&e|128)}function u(){if(i>=n)throw Error("Invalid byte index");var e=255&t[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,r;if(i>n)throw Error("Invalid byte index");if(i==n)return!1;if(e=255&t[i],i++,0==(128&e))return e;if(192==(224&e)){if((r=(31&e)<<6|u())>=128)return r;throw Error("Invalid continuation byte")}if(224==(240&e)){if((r=(15&e)<<12|u()<<6|u())>=2048)return o(r),r;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=(7&e)<<18|u()<<12|u()<<6|u())>=65536&&r<=1114111)return r;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=a(e),n=t.length,i=-1,r="";++i<n;)r+=l(t[i]);return r},e.decode=function(e){t=a(e),n=t.length,i=0;for(var o,s=[];!1!==(o=c());)s.push(o);return function(e){for(var t,n=e.length,i=-1,a="";++i<n;)(t=e[i])>65535&&(a+=r((t-=65536)>>>10&1023|55296),t=56320|1023&t),a+=r(t);return a}(s)}}(t)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(23)),r=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}t.default={applyThrottlingPolicy:function(e){var t=r.default.EVENTS_SENDER_MIN_INTERVAL,n=r.default.EVENTS_SENDER_MAX_INTERVAL,a=Number(i.default.get("_hzt.interval"))||r.default.EVENTS_SENDER_INTERVAL;a<=n&&a>=t&&e.interval!==a&&e.reschedule(a)},applyDestinationPolicy:function(){return i.default.get("_hzt.host")||r.default.HORIZON_TRACK_HOST}}},function(e,t,n){var i,r;
/*!
   * JavaScript Cookie v2.2.0
   * https://github.com/js-cookie/js-cookie
   *
   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
   * Released under the MIT license
   */!function(a){void 0===(r="function"==typeof(i=a)?i.call(t,n,t,e):i)||(e.exports=r),e.exports=a()}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function t(n){function i(t,r,a){var o;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(a=e({path:"/"},i.defaults,a)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}a.expires=a.expires?a.expires.toUTCString():"";try{o=JSON.stringify(r),/^[\{\[]/.test(o)&&(r=o)}catch(e){}r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var u in a)a[u]&&(l+="; "+u,!0!==a[u]&&(l+="="+a[u]));return document.cookie=t+"="+r+l}t||(o={});for(var c=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,h=0;h<c.length;h++){var p=c[h].split("="),f=p.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var g=p[0].replace(d,decodeURIComponent);if(f=n.read?n.read(f,g):n(f,g)||f.replace(d,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===g){o=f;break}t||(o[g]=f)}catch(e){}}return o}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}((function(){}))}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._queue=[],this.maxSize=t}return i(e,[{key:"push",value:function(e){this._queue=[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.slice(0,this.maxSize-1)))}},{key:"forEach",value:function(e){return this._queue.forEach(e)}},{key:"slice",value:function(e,t){return this._queue.slice(e,t)}},{key:"splice",value:function(e,t){return this._queue.splice(e,t)}},{key:"clear",value:function(){this._queue=[]}},{key:"filter",value:function(t){return e.fromArray(this._queue.filter(t),this.maxSize)}},{key:"length",get:function(){return this._queue.length}},{key:"items",get:function(){return JSON.parse(JSON.stringify(this._queue))}}],[{key:"fromArray",value:function(t,n){var i=new e(n);return t.forEach((function(e){return i.push(e)})),i}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interval=0,this.tickIntervalId=0,this.callbacks=[]}return i(e,[{key:"tick",value:function(){var e=this;this.callbacks.forEach((function(t){return t(e)}))}},{key:"start",value:function(){return this.tickIntervalId=setInterval(this.tick.bind(this),this.interval),this}},{key:"stop",value:function(){return clearInterval(this.tickIntervalId),this.tickIntervalId=0,this}},{key:"reschedule",value:function(e){return this.stop().every(e).start()}},{key:"every",value:function(e){return this.interval=e,this}},{key:"call",value:function(e){return this.callbacks.push(e),this}},{key:"isRunning",get:function(){return!!this.tickIntervalId}}]),e}();t.default=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(3)),a=u(n(2)),o=u(n(1)),s=u(n(0)),l=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var c={STATE_READY:"statusReady",STATE_NOT_READY:"statusNotReady",STATE_LOADING:"statusLoading",STATE_SCHEDULED:"statusScheduled",STATE_ERROR:"statusError"},d=function(){return a.default.getResource("schemas",{data:{}})},h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.state=c.STATE_NOT_READY,this.callbacks={onReady:[],onError:[],onRetry:[],onLoad:[]}}return i(e,[{key:"get",value:function(e,t){var n=e+"-"+t;if(!this.isReady())throw new Error(""+o.default.COMPONENT_NOT_READY);var i=d().data[n];if(!i)throw new Error(o.default.UNSUPPORTED_TYPE+": "+n);return i}},{key:"isReady",value:function(){return this.state===c.STATE_READY}},{key:"retry",value:function(){var e=this;this.state=c.STATE_SCHEDULED,this.callbacks.onRetry.forEach((function(e){return e()})),setTimeout((function(){e.state=c.STATE_NOT_READY,e.load()}),s.default.SCHEMA_LOAD_COLLECTION_RETRY_AFTER_MSECS)}},{key:"onLoad",value:function(e){this.callbacks.onLoad.push(e)}},{key:"onRetry",value:function(e){this.callbacks.onRetry.push(e)}},{key:"onReady",value:function(e){if(this.state===c.STATE_READY)return e(d().data);if(this.callbacks.onReady.length>s.default.HORIZON_CALLBACK_STACK_LIMIT)throw new Error(o.default.LIMIT_EXCEEDED+" Schemas callback stack.");return this.callbacks.onReady.push(e)}},{key:"onError",value:function(e){this.state===c.STATE_ERROR?e():this.callbacks.onError.push(e)}},{key:"load",value:function(){var e=this,t=d();if(this.state===c.STATE_NOT_READY){this.state=c.STATE_LOADING,this.callbacks.onLoad.forEach((function(e){return e()}));var n=s.default.USE_HTTPS?"https://":"http://";l.default.request("GET",""+n+this.url,(function(n){t.data=Object.assign(t.data||{},n),e.state=c.STATE_READY,e.callbacks.onReady.forEach((function(e){return r.default.execAsync(e,t.data)}))}),(function(t){e.state=c.STATE_ERROR,e.callbacks.onError.forEach((function(e){return r.default.execAsync(e,t)})),e.retry()}))}}}]),e}();t.default={getInstance:function(e){var t=d();return t.provider||(t.provider=new h(e||s.default.HORIZON_SCHEMAS_HOST+"/schemas")),t.provider},getContextSchemas:d}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return window.cdaaas&&window.cdaaas.SETTINGS?window.cdaaas.SETTINGS[e]:null},r=function(e){return window.utag_data?window.utag_data[e]:null};t.default={getTenant:function(){return i("SITE_ID")||r("ut.profile")||"unknown"},getDeviceGroup:function(){return i("MOBILE_GROUP")||r("platform")||"unknown"}}}])})),dh=Kr(ch),hh=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(r(this,e),e.instance)return e.instance;this.initHorizonClient(t,n,i)}return o(e,[{key:"initHorizonClient",value:function(e,t,n){var i=Q.isSmartTvEnvironment?"tv":null;"prod"!==e&&dh.Settings.useQAConfiguration(),t&&dh.Settings.useHTTPOnly(),this.horizon=new dh.HorizonClient(n,i),this.saveInstance()}},{key:"saveInstance",value:function(){e.instance=this}},{key:"send",value:function(e){this.horizon.send(e)}},{key:"unload",value:function(){this.horizon.unload()}}]),e}(),ph=bn.session,fh="object"===i(window.onbeforeunload)?"beforeunload":"unload",gh=function(e){return function(e){l(i,e);var t=p(i);function i(e){var n;r(this,i),(n=t.call(this,e))[e.type]=e;var a=n.options.env&&n.options.env.name||"",o=n.options.httpOnly,s=n.options.horizon&&n.options.horizon.tenant||(Q.isSmartTvEnvironment?"player":null);return n.horizon=new hh(a,o,s),n.setupUnload(),n}return o(i,[{key:"supportedVersion",get:function(){return{min:"0.4.27"}}},{key:"playerId",get:function(){return Pt.playerId}},{key:"videoSessionId",get:function(){return ph.getVideoSessionId(this.options.playerId)}},{key:"contentType",get:function(){return"monitoring"}},{key:"basicData",get:function(){return{id:this.id,version:this.version,contentType:this.contentType}}},{key:"setupUnload",value:function(){this.boundOnEnd=this.onEnd.bind(this),window.addEventListener(fh,this.boundOnEnd)}},{key:"bindEvents",value:function(){}},{key:"onUnload",value:function(){}},{key:"onEnd",value:function(){this.onUnload(),this.horizon.unload()}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{this.horizon.send(n(n({},this.basicData),{},{properties:e}))}catch(e){_e.error(this.name,"Error when trying to send data to Horizon",e)}}},{key:"destroy",value:function(){window.removeEventListener(fh,this.boundOnEnd),this.stopListening(),g(u(i.prototype),"destroy",this).call(this)}}]),i}(e)},mh=/^\s+|\s+$/g,vh=/^[-+]0x[0-9a-f]+$/i,yh=/^0b[01]+$/i,bh=/^0o[0-7]+$/i,Eh=parseInt,Th="object"==typeof jr&&jr&&jr.Object===Object&&jr,Ah="object"==typeof self&&self&&self.Object===Object&&self,kh=Th||Ah||Function("return this")(),_h=Object.prototype.toString,Sh=Math.max,wh=Math.min,Ch=function(){return kh.Date.now()};function Ih(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Dh(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==_h.call(e)}(e))return NaN;if(Ih(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ih(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(mh,"");var n=yh.test(e);return n||bh.test(e)?Eh(e.slice(2),n?2:8):vh.test(e)?NaN:+e}var Rh=function(e,t,n){var i,r,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function f(e){return u=e,s=setTimeout(m,t),c?p(e):o}function g(e){var n=e-l;return void 0===l||n>=t||n<0||d&&e-u>=a}function m(){var e=Ch();if(g(e))return v(e);s=setTimeout(m,function(e){var n=t-(e-l);return d?wh(n,a-(e-u)):n}(e))}function v(e){return s=void 0,h&&i?p(e):(i=r=void 0,o)}function y(){var e=Ch(),n=g(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return f(l);if(d)return s=setTimeout(m,t),p(l)}return void 0===s&&(s=setTimeout(m,t)),o}return t=Dh(t)||0,Ih(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Sh(Dh(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h),y.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},y.flush=function(){return void 0===s?o:v(Ch())},y},xh=function(){return{}},Lh=function(e){return{subject:e}},Ph=function(e,t){return{subject:t,value:e}},Oh=function(e,t){return{subject:t}},Mh=bn.getCurrentTime,Nh=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).counter=0,i}return o(n,[{key:"name",get:function(){return"events-schema"}},{key:"id",get:function(){return"player-events"}},{key:"version",get:function(){return"2.1"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"innerPlayback",get:function(){return this.playback.playback}},{key:"playbackType",get:function(){return this.container&&this.container.getPlaybackType()}},{key:"playHeadTimeLive",get:function(){return this.innerPlayback&&Mh(this.innerPlayback)||-1}},{key:"playHeadTimeVOD",get:function(){return this.container&&parseInt(1e3*this.container.getCurrentTime(),10)||-1}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}},{key:"coreEvents",get:function(){var e;return s(e={},De.CORE_FULLSCREEN,(function(e,t){return{subject:t,value:e}})),s(e,De.CORE_RESIZE,(function(e,t){var n=e.width,i=e.height;return{value:"".concat(n,"x").concat(i),subject:t}})),s(e,De.CORE_SCREEN_ORIENTATION_CHANGED,(function(e,t){return{subject:t,value:e.orientation}})),s(e,Tn.WM_PIP_ADDED,xh),s(e,Tn.WM_PIP_DISCARDED,xh),s(e,Tn.WM_MASTER_ADDED,xh),s(e,Tn.WM_MASTER_CHANGED,xh),s(e,Tn.WM_PIPTOMASTER,xh),s(e,Tn.WM_MASTERTOPIP,xh),s(e,Tn.MEDIACONTROL_DOUBLE_TAP,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tapSide,n=void 0===t?"":t;return{value:n}})),s(e,Tn.WILL_SHOW_QUICK_SEEK_HINT,xh),s(e,Tn.WILL_HIDE_QUICK_SEEK_HINT,xh),s(e,Tn.START_DRAGGING_SEEKBAR,xh),s(e,Tn.STOP_DRAGGING_SEEKBAR,xh),e}},{key:"mediaControlEvents",get:function(){var e;return s(e={},Tn.MEDIACONTROL_MODAL_SHOW,xh),s(e,Tn.MEDIACONTROL_MODAL_HIDE,xh),s(e,Tn.MEDIACONTROL_ITEMCLICKED,Lh),s(e,De.MEDIACONTROL_RENDERED,Lh),s(e,Tn.WM_VOLUME_SHOW,Lh),s(e,Tn.WM_VOLUME_HIDE,Lh),s(e,Tn.WM_SHARE_SHOW,Lh),s(e,Tn.WM_SHARE_HIDE,Lh),e}},{key:"containerEvents",get:function(){var e,t=(s(e={},De.CONTAINER_CLICK,Oh),s(e,De.CONTAINER_DESTROYED,Oh),s(e,De.CONTAINER_DBLCLICK,Oh),s(e,De.CONTAINER_VOLUME,(function(e,t){return{value:Math.round(e),subject:t}})),s(e,Tn.WM_BITRATE_CAP,(function(e,t){return{value:e.toFixed(2),subject:t}})),s(e,Tn.DFP_AD_LOADED,xh),s(e,Tn.DFP_AD_CLOSED,xh),s(e,Tn.DFP_AD_STARTED,xh),s(e,Tn.DFP_AD_RESUME,xh),s(e,Tn.DFP_AD_PAUSE,xh),s(e,Tn.DFP_AD_CLICKED,xh),s(e,Tn.DFP_AD_COMPLETED,xh),s(e,Tn.DFP_AD_SKIPPED,xh),s(e,Tn.DFP_AD_NOTSERVED,xh),s(e,Tn.DFP_AD_METADATA,xh),s(e,Tn.DFP_ALL_ADS_COMPLETED,xh),s(e,Tn.DFP_CONTENT_PAUSE,xh),s(e,Tn.DFP_CONTENT_RESUME,xh),s(e,Tn.DFP_CONTENT_STARTED,xh),s(e,Tn.DFP_CONTENT_ENDED,xh),s(e,Tn.DFP_FINISHED,xh),s(e,Tn.WM_MUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),s(e,Tn.WM_UNMUTED,(function(e,t,n){return{value:Math.round(e),subject:n}})),s(e,Tn.WM_SETTINGS_LEVEL_SELECTED,(function(e,t){return{value:JSON.stringify(e),subject:t}})),s(e,Tn.WM_AUDIO_CHANGED,(function(e,t){var n=e.label,i=e.language,r=e.role;return{subject:t,value:JSON.stringify({label:n,lang:i,role:r})}})),s(e,Tn.WM_AUDIO_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),s(e,Tn.WM_LOCATION_AVAILABLE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),s(e,Tn.WM_SUBTITLE_CHANGED,(function(e,t){var n=e.label,i=e.language,r=e.role;return{subject:t,value:JSON.stringify({label:n,lang:i,role:r})}})),s(e,Tn.SKIP_BUTTON_CLICKED,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),s(e,Tn.SKIP_BUTTON_SHOW,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=void 0===t?"":t;return{value:n}})),s(e,Tn.DID_CHANGE_CURRENT_PROGRAM,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),s(e,Tn.WILL_QUICK_SEEK,xh),s(e,Tn.WILL_AUTO_SKIP_RECAP,xh),s(e,Tn.WM_GA_UNTRACKED_EVENT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eventName,n=void 0===t?"":t;return{value:n}})),s(e,Tn.SIMULCAST_PING,Ph),s(e,Tn.WM_RESOURCE_REQUEST_STATS,(function(e){var t=e.retries,n=e.usedFallback;return{value:JSON.stringify({attempts:t,fallback:n}),eventName:"retry_history"}})),e);return t}},{key:"playbackEvents",get:function(){var e;return s(e={},De.PLAYBACK_READY,Ph),s(e,De.PLAYBACK_BUFFERING,Ph),s(e,De.PLAYBACK_BUFFERFULL,Ph),s(e,De.PLAYBACK_LOADEDMETADATA,(function(e,t){var n=e.duration;return{subject:t,value:Math.round(n)}})),s(e,De.PLAYBACK_HIGHDEFINITIONUPDATE,Ph),s(e,De.PLAYBACK_BITRATE,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),s(e,De.PLAYBACK_DVR,Ph),s(e,De.PLAYBACK_ENDED,Lh),s(e,De.PLAYBACK_PLAY_INTENT,Lh),s(e,De.PLAYBACK_PLAY,Lh),s(e,De.PLAYBACK_PAUSE,(function(e,t){return{subject:e,value:JSON.stringify(t)}})),s(e,De.PLAYBACK_SEEK,Lh),s(e,De.PLAYBACK_SEEKED,Lh),s(e,De.PLAYBACK_STOP,Lh),s(e,De.PLAYBACK_LEVEL_SWITCH,(function(e,t){return{subject:t,value:JSON.stringify(e)}})),s(e,De.PLAYBACK_SUBTITLE_AVAILABLE,Lh),s(e,Tn.WM_WROOM_WAITING,Oh),s(e,Tn.WM_PLAY_REQUESTED_READY,Oh),s(e,Tn.WILL_SELECT_FALLBACK_SOURCE,(function(e){return{value:JSON.stringify(e)}})),s(e,Tn.WILL_CHANGE_SOURCE,(function(e){return{value:JSON.stringify(e)}})),s(e,Tn.FALLBACK_SOURCE_SELECTED,(function(e){return{value:JSON.stringify(e)}})),s(e,Tn.WILL_RENEW_RESOURCE,(function(e){return{value:JSON.stringify(e)}})),e}},{key:"bindEvents",value:function(){var e=this;this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,De.CORE_READY,this.bindContainerEvents),Object.entries(this.coreEvents).forEach((function(t){var n=m(t,2),i=n[0],r=n[1];e.subscribeEvent(e.core,i,r)})),Object.entries(this.mediaControlEvents).forEach((function(t){var n=m(t,2),i=n[0],r=n[1];e.subscribeEvent(e.mediaControl,i,r)}))}},{key:"onUnload",value:function(){this.sendEvent("user","DID_LEAVE")}},{key:"playheadTime",value:function(){return this.playbackType?this.playbackType===qe.LIVE?this.playHeadTimeLive:this.playHeadTimeVOD:-1}},{key:"handleEventArgs",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=t.apply(void 0,i),o=a.subject,s=a.value,l=a.eventName;this.sendEvent(o,l||e,s)}},{key:"subscribeEvent",value:function(e,t,n){this.listenTo(e,t,Rh(this.handleEventArgs.bind(this,t,n),500,{leading:!0,trailing:!0}))}},{key:"bindContainerEvents",value:function(){var e=this;this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.bindPlaybackEvents(),Object.entries(this.containerEvents).forEach((function(t){var n=m(t,2),i=n[0],r=n[1];e.subscribeEvent(e.container,i,r)})))}},{key:"bindPlaybackEvents",value:function(){var e=this;this.playback&&this.stopListening(this.playback),this.playback=this.core.activePlayback,this.playback&&Object.entries(this.playbackEvents).forEach((function(t){var n=m(t,2),i=n[0],r=n[1];e.subscribeEvent(e.playback,i,r)}))}},{key:"sendEvent",value:function(e,t,n){this.send(Object.assign({},this.baseProperties,{subject:e||"unknown"},t&&{event:t.toString()},n&&{value:n.toString()},{playheadTime:this.playheadTime()},{counter:parseInt(this.counter,10)})),this.counter+=1}}]),n}(gh(st)),Bh=function(e){l(i,e);var t=p(i);function i(){return r(this,i),t.apply(this,arguments)}return o(i,[{key:"name",get:function(){return"session-info-schema"}},{key:"id",get:function(){return"player-session-info"}},{key:"version",get:function(){return"2.3"}},{key:"innerPlayback",get:function(){return this.container.playback.playback}},{key:"startAt",get:function(){return"live"===this.container.getPlaybackType()?this.options.liveStartTime:this.options.resumeAt}},{key:"baseProperties",get:function(){var e={playerId:this.playerId,videoSessionId:this.videoSessionId,autoPlay:!!this.options.autoPlay,disableAds:!!this.options.skipDFP};return this.startAt&&(e.startAt=Math.floor(this.startAt)),e}},{key:"bindEvents",value:function(){this.listenToOnce(this.container.playback,Tn.WM_RESOURCE_READY,this.onResourceReady)}},{key:"onResourceReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.send(n(n(n({},this.baseProperties),this.containerProperties()),this.videoProperties(e)))}},{key:"containerProperties",value:function(){return{playback:this.innerPlayback.name,muted:!this.container.playback.getVolume()}}},{key:"liveProps",value:function(e){return{duration:-1,dvr:this.container.isDvrEnabled(),signal:e.transmission.signal}}},{key:"videoProperties",value:function(e){var t={videoId:e.id,programId:e.programId,channelId:e.channelId,kind:e.kind,encrypted:e.encrypted,subscriberOnly:e.isSubscriberOnly,adult:e.adult,cdn:e.cdn,duration:e.duration,downloadedSession:!1};return e.encrypted&&(t.drmProtocol=e.drm),"live"==e.kind&&(t=n(n({},t),this.liveProps(e))),t}}]),i}(gh(ot)),Uh=bn.API_VERSION,Fh=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).chromecastStatus=i.getChromecastStatus(),i}return o(n,[{key:"name",get:function(){return"environment-web-info-schema"}},{key:"id",get:function(){return"player-environment-web"}},{key:"version",get:function(){return"2.0"}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_READY,this.sendEvents)}},{key:"getChromecastStatus",value:function(){return Promise.race([this.subscribe(this.listenTo.bind(this,this.core,Tn.CHROMECAST_SCRIPT_ERROR)).then((function(){return"script-load-error"})),this.subscribe(this.listenTo.bind(this,this.core,Tn.CHROMECAST_API_ERROR)).then((function(){return"api-error"})),this.subscribe(this.listenTo.bind(this,this.core,Tn.CHROMECAST_INITIALIZE_ERROR)).then((function(){return"initialize-error"})),this.subscribe(this.listenTo.bind(this,this.core,Tn.CHROMECAST_AVAILABLE)).then((function(){return"available"})),this.subscribe(this.listenTo.bind(this,this.core,Tn.CHROMECAST_UNAVAILABLE)).then((function(){return"unavailable"}))]).then((function(e){return{castStatus:e}})).catch((function(){return{castStatus:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,apiVersion:Uh,browserVersion:Q.data.fullVersion,browser:Q.name,location:this.core.options.domain||document.location.hostname}),this.chromecastStatus]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(v(t))))}))}}]),n}(gh(st)),Vh=gi.Video,Hh=bn.getDeviceType,jh=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).deviceInfo=i.options.deviceInfo||{},i}return o(n,[{key:"name",get:function(){return"environment-info-schema"}},{key:"id",get:function(){return"player-environment-data"}},{key:"version",get:function(){return"3.0"}},{key:"osVersion",get:function(){return(Q.isSmartTvEnvironment?this.deviceInfo.firmwareVersion:Q.os.fullVersion)||"other"}},{key:"deviceModel",get:function(){return Q.isSmartTvEnvironment&&(this.deviceInfo.model||Q.device.model)||"not-informed"}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_READY,this.sendEvents)}},{key:"initialSize",value:function(){return this.subscribe(this.listenTo.bind(this,this.core,De.CORE_RESIZE)).then((function(e){var t=e.width,n=e.height;return{initialSize:"".concat(t,"x").concat(n)}})).catch((function(){return{initialSize:"not-informed"}}))}},{key:"subscribe",value:function(e){return new Promise((function(t,n){e((function(e){return t(e)})),window.setTimeout(n,2e3)}))}},{key:"signals",value:function(){return[Promise.resolve({playerId:this.playerId,os:this.deviceInfo.os||Q.os.name,osVersion:this.osVersion,playerVersion:"7.65.1",playerType:Vh.getPlayerType(),application:this.core.options.domain||document.location.hostname,deviceType:Hh(),applicationVersion:this.core.options.applicationVersion||"not-informed",networkType:"None/web",deviceModel:this.deviceModel}),this.initialSize()]}},{key:"sendEvents",value:function(){var e=this;return Promise.all(this.signals()).then((function(t){e.send(Object.assign.apply(Object,[{}].concat(v(t))))}))}}]),n}(gh(st)),Kh=function(e){l(a,e);var t=p(a);function a(){return r(this,a),t.apply(this,arguments)}return o(a,[{key:"name",get:function(){return"errors-schema"}},{key:"id",get:function(){return"player-errors"}},{key:"version",get:function(){return"2.2"}},{key:"mediaControl",get:function(){return this.core.mediaControl}},{key:"baseProperties",get:function(){return{playerId:this.playerId,videoSessionId:this.videoSessionId}}},{key:"bindEvents",value:function(){this.listenTo(this.core,De.CORE_ACTIVE_CONTAINER_CHANGED,this.bindContainerEvents),this.listenTo(this.core,De.CORE_READY,this.bindContainerEvents),this.listenToCoreErrors()}},{key:"bindContainerEvents",value:function(){this.container&&this.stopListening(this.container),this.container=this.core.activeContainer,this.container&&(this.listenToOnce(this.container.playback,Tn.WM_VIDEO_METADATA_LOADED,this.onMetadataLoaded),this.listenToContainerErrors())}},{key:"listenToContainerErrors",value:function(){var e=this;this.listenTo(this.container,De.CONTAINER_ERROR,this.sendEvents),this.listenTo(this.container,Tn.DFP_AD_ERROR,(function(t){var n=e.formatAdErrors(t);e.sendEvents(n)})),this.listenTo(this.container,Tn.WM_VIDEO_METADATA_ERROR,this.sendEvents),this.listenTo(this.container,Tn.WM_RESOURCE_ERROR,this.sendEvents)}},{key:"listenToCoreErrors",value:function(){this.listenTo(this.core,Tn.CHROMECAST_API_ERROR,this.sendEvents),this.listenTo(this.core,Tn.CHROMECAST_SCRIPT_ERROR,this.sendEvents),this.listenTo(this.core,Tn.CHROMECAST_INITIALIZE_ERROR,this.sendEvents),this.listenTo(this.core,Tn.CHROMECAST_LAUNCH_ERROR,this.sendEvents),this.listenTo(this.core,Tn.CHROMECAST_MEDIA_LOAD_ERROR,this.sendEvents)}},{key:"onMetadataLoaded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.kind=e.kind}},{key:"formatAdErrors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"===i(e.message)?{code:e.message&&e.message.getType&&e.message.getType()||"",message:e.message&&e.message.getMessage&&e.message.getMessage()}:e}},{key:"videoProperties",value:function(){var e=this.container.options,t=parseInt(null==e?void 0:e.source,10);return{videoId:bn.isVideoId(t)?t:-1,kind:this.kind||""}}},{key:"errorProperties",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{code:String(e.code||e.type||"unknown"),clientCode:e.clientCode||"unknown",message:e.description||e.message||"unknown",extraData:""}}},{key:"sendEvents",value:function(e){this.send(n(n(n({},this.baseProperties),this.videoProperties()),this.errorProperties(e)))}}]),a}(gh(st)),Gh=function(e){l(i,e);var t=p(i);function i(){return r(this,i),t.apply(this,arguments)}return o(i,[{key:"name",get:function(){return"ad-config-schema"}},{key:"id",get:function(){return"player-ad-config"}},{key:"version",get:function(){return"2.0"}},{key:"dfp",get:function(){return this.container.options.dfp}},{key:"baseProperties",get:function(){return{videoSessionId:this.videoSessionId}}},{key:"bindEvents",value:function(){this.listenTo(this.container,Tn.DFP_AD_LOADED,this.sendEvents)}},{key:"adConfigProperties",value:function(e){return n(n({},this.adProperties(e)),this.dfpProperties())}},{key:"adProperties",value:function(e){return{adId:e.getAdId(),linear:e.isLinear(),position:this.getAdPosition(e),skippable:e.isSkippable(),duration:parseInt(e.getDuration(),10),timeOffset:parseInt(e.getAdPodInfo().getTimeOffset(),10)}}},{key:"dfpProperties",value:function(){return{adUnit:this.dfp.adUnit,adCustomData:this.dfp.adCustomData,accountId:this.dfp.adAccountId,cmsId:this.dfp.adCmsId}}},{key:"getAdPosition",value:function(e){if(!e.isLinear())return"overlay";switch(e.getAdPodInfo().getPodIndex()){case 0:return"pre-roll";case-1:return"pos-roll";default:return"mid-roll"}}},{key:"sendEvents",value:function(e){this.send(n(n({},this.baseProperties),this.adConfigProperties(e)))}}]),i}(gh(ot)),Wh=6e4,zh=15e3,Yh=.05,qh=function(e){l(n,e);var t=p(n);function n(e){var i;return r(this,n),(i=t.call(this,e)).measurements=[],i.counter=0,i.bufferingTime=0,i.decodedFrames=0,i.droppedFrames=0,i.lastBufferType=null,i.updateMeasurements({}),i}return o(n,[{key:"name",get:function(){return"network-monitoring-schema"}},{key:"id",get:function(){return"player-network-monitoring"}},{key:"version",get:function(){return"6.0"}},{key:"currentTime",get:function(){return(new Date).getTime()}},{key:"isBuffering",get:function(){return this.lastBufferType===De.PLAYBACK_BUFFERING}},{key:"bandwidthEstimate",get:function(){var e=this.container.playback.bandwidthEstimate;return"number"==typeof e&&e>=0?e:-1}},{key:"bindEvents",value:function(){this.listenTo(this.container,Tn.WM_STATS_REPORTED,this.onStatsReported),this.listenTo(this.container.playback,Tn.FALLBACK_SOURCE_SELECTED,this.onFallbackSourceSelected),this.listenTo(this.container.playback,Tn.WM_STREAMING_DATA_LOADED,this.onStreamingDataLoaded),this.listenTo(this.container.playback,Tn.WM_RESOURCE_READY,this.onResourceReady),this.listenTo(this.container.playback,De.PLAYBACK_BITRATE,this.updateMeasurements),this.listenTo(this.container.playback,De.PLAYBACK_STOP,this.stopHeartbeat),this.listenTo(this.container.playback,De.PLAYBACK_ERROR,this.stopHeartbeat),this.listenTo(this.container.playback,De.PLAYBACK_ENDED,this.stopHeartbeat),this.listenTo(this.container.playback,De.PLAYBACK_BUFFERING,this.onBuffering),this.listenTo(this.container.playback,De.PLAYBACK_BUFFERFULL,this.onBufferFull)}},{key:"onStatsReported",value:function(e){this.decodedFrames=e.counters.decodedFrames,this.droppedFrames=e.counters.droppedFrames}},{key:"onFallbackSourceSelected",value:function(e){var t=e.currentSrc;this.domainHost=this.getDomainFromURL(t)}},{key:"onStreamingDataLoaded",value:function(e){var t=e.host;this.domainHost=t}},{key:"pingInterval",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"live"==e.kind?Wh:Math.max(zh,Yh*e.duration)}},{key:"onResourceReady",value:function(e){this.setCDNHost(e),this.setPoP(e),this.stopHeartbeat(),this.heartbeat=setInterval(this.onHeartbeatTick.bind(this),this.pingInterval(e)),this.onHeartbeatTick()}},{key:"setCDNHost",value:function(e){var t=e.selectedResource.url;this.domainHost=this.getDomainFromURL(t)}},{key:"setPoP",value:function(e){var t=e.selectedResource.resourcePOP;this.pop=t}},{key:"getDomainFromURL",value:function(e){return e&&/:\/\/(?:www\.)?(.[^/]+)(.*)/.exec(e)[1]}},{key:"updateMeasurements",value:function(e){var t=e.bitrate,n=void 0===t?0:t;this.lastMeasurement={nominalBitrate:parseInt(n,10),bandwidth:parseInt(this.bandwidthEstimate,10),timestamp:this.currentTime},this.measurements.push(this.lastMeasurement)}},{key:"increaseTotalBuffering",value:function(){this.isBuffering&&this.bufferStartTime>0&&(this.bufferingTime+=this.currentTime-this.bufferStartTime,this.bufferStartTime=this.currentTime)}},{key:"onBuffering",value:function(){this.bufferStartTime=this.currentTime,this.increaseTotalBuffering(),this.lastBufferType=De.PLAYBACK_BUFFERING}},{key:"onBufferFull",value:function(){this.increaseTotalBuffering(),this.bufferStartTime=0,this.lastBufferType=De.PLAYBACK_BUFFERFULL}},{key:"onHeartbeatTick",value:function(){0==this.measurements.length&&this.measurements.push(this.lastMeasurement),this.increaseTotalBuffering(),this.sendEvent(),this.resetStateTimmingInfo(),this.eraseMeasurements(),this.updateCounter()}},{key:"updateCounter",value:function(){this.counter+=1}},{key:"resetStateTimmingInfo",value:function(){this.bufferingTime=0}},{key:"eraseMeasurements",value:function(){this.measurements=[]}},{key:"onUnload",value:function(){this.sendEvent()}},{key:"sendEvent",value:function(){this.send({videoSessionId:this.videoSessionId,measurements:this.measurements,counter:this.counter,domainHost:this.domainHost||"unknown",pop:this.pop||"unknown",bufferingTime:this.bufferingTime,decodedFrames:this.decodedFrames,droppedFrames:this.droppedFrames})}},{key:"stopHeartbeat",value:function(){this.heartbeat&&clearInterval(this.heartbeat)}},{key:"destroy",value:function(){this.stopHeartbeat(),g(u(n.prototype),"destroy",this).call(this)}}]),n}(gh(ot)),$h={EnvironmentInfo:jh,EnvironmentWebInfo:Fh,SessionInfoSchema:Bh,ErrorsInfo:Kh,EventsInfo:Nh,AdConfigSchema:Gh,NetworkMonitoring:qh},Xh=Object.entries($h).reduce((function(e,t){var n=m(t,2),i=n[0],r=n[1];return e[r.type]=e[r.type]||{},e[r.type][i]=r,e}),{}),Qh=Xh.core,Zh=Xh.container,Jh=function(e){return(t=e,String.fromCharCode.apply(null,new Uint16Array(t.buffer))).match(/skd\:\/\/(.*)$/)[1];var t},ep=function(e,t,n){var i="string"==typeof t?function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return n}(t):t,r=0,a=new ArrayBuffer(e.byteLength+4+i.byteLength+4+n.byteLength),o=new DataView(a);new Uint8Array(a,r,e.byteLength).set(e),r+=e.byteLength,o.setUint32(r,i.byteLength,!0),r+=4;var s=new Uint16Array(a,r,i.length);return s.set(i),r+=s.byteLength,o.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(a,r,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)},tp=function(e){l(i,e);var t=p(i);function i(){var e;r(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._isReadyState=!1,e.certificate=null,e.setupDRM(e.options.fairplay||{}),e}return o(i,[{key:"name",get:function(){return"hls_fairplay_playback"}},{key:"events",get:function(){return n(n({},g(u(i.prototype),"events",this)),{},{webkitneedkey:this.onNeedKey})}},{key:"_setup",value:function(){this.setupDRM(this.options.fairplay||{})}},{key:"_ready",value:function(){this.certificate&&g(u(i.prototype),"_ready",this).call(this)}},{key:"setupDRM",value:function(e){this.certificateUrl=e.certificate,this.serverUrl=e.server,this.certificateUrl&&this.loadCertificate()}},{key:"loadCertificate",value:function(){var e=this,t=new XMLHttpRequest;t.responseType="arraybuffer",t.addEventListener("load",(function(t){return e.onCertificateLoaded(t)}),!1),t.addEventListener("error",(function(t){return e.onCertificateError(t)}),!1),t.open("GET",this.certificateUrl,!0),t.send()}},{key:"onCertificateLoaded",value:function(e){var t=e.target;this.certificate=new Uint8Array(t.response),this._ready(),_e.info(this.name,"Certificate loaded successfully")}},{key:"onCertificateError",value:function(e){var t=this.createError({code:"certificateError",description:"Failed to retrieve the server certificate",raw:e});this.trigger(De.PLAYBACK_ERROR,t),_e.error(this.name,"Failed to retrieve the server certificate",t)}},{key:"onNeedKey",value:function(e){var t=e.target,n=e.initData,i=Jh(n);n=ep(n,i,this.certificate),this.createMediaKeys(t),this.createKeySession(t,n,i)}},{key:"createMediaKeys",value:function(e){if(!e.webkitKeys){var t=WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4")?"com.apple.fps.1_0":null;if(t)e.webkitSetMediaKeys(new WebKitMediaKeys(t));else{var n=this.createError({code:"unsupportedKeySystem",description:"Could not create MediaKeys. Key System not supported"});this.trigger(De.PLAYBACK_ERROR,n),_e.error(this.name,"Could not create MediaKeys. Key System not supported",n)}}}},{key:"createKeySession",value:function(e,t,n){if(e.webkitKeys){var i=e.webkitKeys.createSession("video/mp4",t);if(i)i.contentId=n,this.bindKeySessionEvents(i);else{var r=this.createError({code:"mediaKeysError",description:"Could not create key session"});this.trigger(De.PLAYBACK_ERROR,r),_e.error(this.name,"Could not create key session",r)}}}},{key:"bindKeySessionEvents",value:function(e){var t=this;e.addEventListener("webkitkeymessage",(function(e){return t.licenseRequestReady(e)}),!1),e.addEventListener("webkitkeyadded",(function(e){return t.onKeyAdded(e)}),!1),e.addEventListener("webkitkeyerror",(function(e){return t.onKeyError(e)}),!1)}},{key:"onKeyAdded",value:function(e){_e.info(this.name,"Decryption key was added to session",e)}},{key:"onKeyError",value:function(e){var t=this.createError({code:"decryptionKeyError",description:"A decryption key error was encountered",level:"WARN",raw:e});_e.warn(this.name,"A decryption key error was encountered",t)}},{key:"licenseRequestReady",value:function(e){var t=this,n=e.target,i=e.message,r=new XMLHttpRequest,a="spc=".concat(encodeURIComponent(function(e){for(var t,n,i,r,a,o,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",c=0;c<e.length;)r=(t=e[c++])>>2,a=(3&t)<<4|(n=c<e.length?e[c++]:Number.NaN)>>4,o=(15&n)<<2|(i=c<e.length?e[c++]:Number.NaN)>>6,s=63&i,isNaN(n)?(o=64,s=64):isNaN(i)&&(s=64),u+=l.charAt(r)+l.charAt(a)+l.charAt(o)+l.charAt(s);return u}(i)));r.responseType="text",r.session=n,r.addEventListener("load",(function(e){return t.onLicenseRequestLoaded(e)}),!1),r.addEventListener("error",(function(e){return t.onLicenseRequestError(e)}),!1),r.open("POST",this.serverUrl,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(a),_e.info(this.name,"License request ready")}},{key:"onLicenseRequestLoaded",value:function(e){var t=e.target,n=t.session,i=function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n)),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}(JSON.parse(t.responseText.trim()).ckc);n.update(i),_e.info(this.name,"License loaded successfully")}},{key:"onLicenseRequestError",value:function(e){var t=this.createError({code:"licenseRequestError",description:"The license request failed",raw:e});this.trigger(De.PLAYBACK_ERROR,t),_e.error(this.name,"The license request failed",t)}}]),i}(pt);tp.canPlay=function(e,t,n){var i=e.split("?")[0].match(/.*\.(.*)$/)||[],r=i.length>1&&"m3u8"===i[1].toLowerCase()||"application/x-mpegURL"===t||"application/vnd.apple.mpegurl"===t;return!(!Q.isSafari&&!Q.isiOS||!r||!n)};var np=Gr((function(e,t){e.exports=function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?h(e):t}function f(e){var t=d();return function(){var n,i=u(e);if(t){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}function m(e,t,n){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=g(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},m(e,t,n||e)}function v(e){return y(e)||b(e)||E(e)||A()}function y(e){if(Array.isArray(e))return T(e)}function b(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function E(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function A(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var k=e.Utils.now,_=e.Utils.assign,S=e.Utils.listContainsIgnoreCase,w=-1;e.Events.register("PLAYBACK_FRAGMENT_CHANGED"),e.Events.register("PLAYBACK_FRAGMENT_PARSING_METADATA");var C=function(i){l(o,i);var a=f(o);function o(){var t;n(this,o);for(var i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return(t=a.call.apply(a,[this].concat(r))).options.playback=s(s({},t.options),t.options.playback),t._minDvrSize=void 0===t.options.hlsMinimumDvrSize?60:t.options.hlsMinimumDvrSize,t._extrapolatedWindowNumSegments=t.options.playback&&void 0!==t.options.playback.extrapolatedWindowNumSegments?t.options.playback.extrapolatedWindowNumSegments:2,t._playbackType=e.Playback.VOD,t._lastTimeUpdate={current:0,total:0},t._lastDuration=null,t._playableRegionStartTime=0,t._localStartTimeCorrelation=null,t._localEndTimeCorrelation=null,t._playableRegionDuration=0,t._programDateTime=0,t._durationExcludesAfterLiveSyncPoint=!1,t._segmentTargetDuration=null,t._playlistType=null,t._recoverAttemptsRemaining=t.options.hlsRecoverAttempts||16,t}return r(o,[{key:"name",get:function(){return"hls"}},{key:"supportedVersion",get:function(){return{min:"0.4.11"}}},{key:"levels",get:function(){return this._levels||[]}},{key:"currentLevel",get:function(){return null===this._currentLevel||void 0===this._currentLevel?w:this._currentLevel},set:function(t){this._currentLevel=t,this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_START),this.options.playback.hlsUseNextLevel?this._hls.nextLevel=this._currentLevel:this._hls.currentLevel=this._currentLevel}},{key:"isReady",get:function(){return this._isReadyState}},{key:"_startTime",get:function(){return this._playbackType===e.Playback.LIVE&&"EVENT"!==this._playlistType?this._extrapolatedStartTime:this._playableRegionStartTime}},{key:"_now",get:function(){return k()}},{key:"_extrapolatedStartTime",get:function(){if(!this._localStartTimeCorrelation)return this._playableRegionStartTime;var e=this._localStartTimeCorrelation,t=this._now-e.local,n=(e.remote+t)/1e3;return Math.min(n,this._playableRegionStartTime+this._extrapolatedWindowDuration)}},{key:"_extrapolatedEndTime",get:function(){var e=this._playableRegionStartTime+this._playableRegionDuration;if(!this._localEndTimeCorrelation)return e;var t=this._localEndTimeCorrelation,n=this._now-t.local,i=(t.remote+n)/1e3;return Math.max(e-this._extrapolatedWindowDuration,Math.min(i,e))}},{key:"_duration",get:function(){return this._extrapolatedEndTime-this._startTime}},{key:"_extrapolatedWindowDuration",get:function(){return null===this._segmentTargetDuration?0:this._extrapolatedWindowNumSegments*this._segmentTargetDuration}},{key:"bandwidthEstimate",get:function(){return this._hls&&this._hls.bandwidthEstimate}}],[{key:"HLSJS",get:function(){return t}}]),r(o,[{key:"_setup",value:function(){var e=this;this._ccIsSetup=!1,this._ccTracksUpdated=!1,this._hls&&this._hls.destroy(),this._hls=new t(_({},this.options.playback.hlsjsConfig)),this._hls.once(t.Events.MEDIA_ATTACHED,(function(){return e._hls.loadSource(e.options.src)})),this._hls.on(t.Events.LEVEL_LOADED,(function(t,n){return e._updatePlaybackType(t,n)})),this._hls.on(t.Events.LEVEL_UPDATED,(function(t,n){return e._onLevelUpdated(t,n)})),this._hls.on(t.Events.LEVEL_SWITCHING,(function(t,n){return e._onLevelSwitch(t,n)})),this._hls.on(t.Events.FRAG_CHANGED,(function(t,n){return e._onFragmentChanged(t,n)})),this._hls.on(t.Events.FRAG_LOADED,(function(t,n){return e._onFragmentLoaded(t,n)})),this._hls.on(t.Events.FRAG_PARSING_METADATA,(function(t,n){return e._onFragmentParsingMetadata(t,n)})),this._hls.on(t.Events.ERROR,(function(t,n){return e._onHLSJSError(t,n)})),this._hls.on(t.Events.SUBTITLE_TRACK_LOADED,(function(t,n){return e._onSubtitleLoaded(t,n)})),this._hls.on(t.Events.SUBTITLE_TRACKS_UPDATED,(function(){return e._ccTracksUpdated=!0})),this._hls.attachMedia(this.el)}},{key:"_onFragmentParsingMetadata",value:function(t,n){this.trigger(e.Events.Custom.PLAYBACK_FRAGMENT_PARSING_METADATA,{evt:t,data:n})}},{key:"render",value:function(){return this._ready(),m(u(o.prototype),"render",this).call(this)}},{key:"_ready",value:function(){this._isReadyState=!0,this.trigger(e.Events.PLAYBACK_READY,this.name)}},{key:"_recover",value:function(t,n,i){if(this._recoveredDecodingError)if(this._recoveredAudioCodecError){e.Log.error("hlsjs: failed to recover",{evt:t,data:n}),i.level=e.PlayerError.Levels.FATAL;var r=this.createError(i);this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else this._recoveredAudioCodecError=!0,this._hls.swapAudioCodec(),this._hls.recoverMediaError();else this._recoveredDecodingError=!0,this._hls.recoverMediaError()}},{key:"_setupSrc",value:function(e){}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._timeUpdateTimer||(this._timeUpdateTimer=setInterval((function(){e._onDurationChange(),e._onTimeUpdate()}),100))}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&(clearInterval(this._timeUpdateTimer),this._timeUpdateTimer=null)}},{key:"getProgramDateTime",value:function(){return this._programDateTime}},{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){return Math.max(0,this.el.currentTime-this._startTime)}},{key:"getStartTimeOffset",value:function(){return this._startTime}},{key:"seekPercentage",value:function(e){var t=this._duration;e>0&&(t=this._duration*(e/100)),this.seek(t)}},{key:"seek",value:function(t){t<0&&(e.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),t=this.getDuration()),this.dvrEnabled&&this._updateDvr(t<this.getDuration()-3),t+=this._startTime,this.el.currentTime=t}},{key:"seekToLivePoint",value:function(){this.seek(this.getDuration())}},{key:"_updateDvr",value:function(t){this.trigger(e.Events.PLAYBACK_DVR,t),this.trigger(e.Events.PLAYBACK_STATS_ADD,{dvr:t})}},{key:"_updateSettings",value:function(){this._playbackType===e.Playback.VOD?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(e.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_onHLSJSError",value:function(n,i){var r,a={code:"".concat(i.type,"_").concat(i.details),description:"".concat(this.name," error: type: ").concat(i.type,", details: ").concat(i.details),raw:i};if(i.response&&(a.description+=", response: ".concat(JSON.stringify(i.response))),i.fatal)if(this._recoverAttemptsRemaining>0)switch(this._recoverAttemptsRemaining-=1,i.type){case t.ErrorTypes.NETWORK_ERROR:switch(i.details){case t.ErrorDetails.MANIFEST_LOAD_ERROR:case t.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case t.ErrorDetails.MANIFEST_PARSING_ERROR:case t.ErrorDetails.LEVEL_LOAD_ERROR:case t.ErrorDetails.LEVEL_LOAD_TIMEOUT:e.Log.error("hlsjs: unrecoverable network fatal error.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();break;default:e.Log.warn("hlsjs: trying to recover from network error.",{evt:n,data:i}),a.level=e.PlayerError.Levels.WARN,this._hls.startLoad()}break;case t.ErrorTypes.MEDIA_ERROR:e.Log.warn("hlsjs: trying to recover from media error.",{evt:n,data:i}),a.level=e.PlayerError.Levels.WARN,this._recover(n,i,a);break;default:e.Log.error("hlsjs: could not recover from error.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop()}else e.Log.error("hlsjs: could not recover from error after maximum number of attempts.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),this.stop();else{if(this.options.playback.triggerFatalErrorOnResourceDenied&&this._keyIsDenied(i))return e.Log.error("hlsjs: could not load decrypt key.",{evt:n,data:i}),r=this.createError(a),this.trigger(e.Events.PLAYBACK_ERROR,r),void this.stop();a.level=e.PlayerError.Levels.WARN,e.Log.warn("hlsjs: non-fatal error occurred",{evt:n,data:i})}}},{key:"_keyIsDenied",value:function(e){return e.type===t.ErrorTypes.NETWORK_ERROR&&e.details===t.ErrorDetails.KEY_LOAD_ERROR&&e.response&&e.response.code>=400}},{key:"_onTimeUpdate",value:function(){var t={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&t.current===this._lastTimeUpdate.current&&t.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=t,this.trigger(e.Events.PLAYBACK_TIMEUPDATE,t,this.name))}},{key:"_onDurationChange",value:function(){var e=this.getDuration();this._lastDuration!==e&&(this._lastDuration=e,m(u(o.prototype),"_onDurationChange",this).call(this))}},{key:"_onProgress",value:function(){if(this.el.buffered.length){for(var t=[],n=0,i=0;i<this.el.buffered.length;i++)t=[].concat(v(t),[{start:Math.max(0,this.el.buffered.start(i)-this._playableRegionStartTime),end:Math.max(0,this.el.buffered.end(i)-this._playableRegionStartTime)}]),this.el.currentTime>=t[i].start&&this.el.currentTime<=t[i].end&&(n=i);var r={start:t[n].start,current:t[n].end,total:this.getDuration()};this.trigger(e.Events.PLAYBACK_PROGRESS,r,t)}}},{key:"play",value:function(){this._hls||this._setup(),m(u(o.prototype),"play",this).call(this),this._startTimeUpdateTimer()}},{key:"pause",value:function(){this._hls&&(this.el.pause(),this.dvrEnabled&&this._updateDvr(!0))}},{key:"stop",value:function(){this._stopTimeUpdateTimer(),this._hls&&(m(u(o.prototype),"stop",this).call(this),this._hls.destroy(),delete this._hls)}},{key:"destroy",value:function(){this._stopTimeUpdateTimer(),this._hls&&(this._hls.destroy(),delete this._hls),m(u(o.prototype),"destroy",this).call(this)}},{key:"_updatePlaybackType",value:function(t,n){this._playbackType=n.details.live?e.Playback.LIVE:e.Playback.VOD,this._onLevelUpdated(t,n),this._ccTracksUpdated&&this._playbackType===e.Playback.LIVE&&this.hasClosedCaptionsTracks&&this._onSubtitleLoaded()}},{key:"_fillLevels",value:function(){this._levels=this._hls.levels.map((function(e,t){return{id:t,level:e,label:"".concat(e.bitrate/1e3,"Kbps")}})),this.trigger(e.Events.PLAYBACK_LEVELS_AVAILABLE,this._levels)}},{key:"_onLevelUpdated",value:function(n,i){this._segmentTargetDuration=i.details.targetduration,this._playlistType=i.details.type||null;var r=!1,a=!1,o=i.details.fragments,s=this._playableRegionStartTime,l=this._playableRegionDuration;if(0!==o.length){if(o[0].rawProgramDateTime&&(this._programDateTime=o[0].rawProgramDateTime),this._playableRegionStartTime!==o[0].start&&(r=!0,this._playableRegionStartTime=o[0].start),r)if(this._localStartTimeCorrelation){var u=this._localStartTimeCorrelation,c=this._now-u.local,d=(u.remote+c)/1e3;d<o[0].start?this._localStartTimeCorrelation={local:this._now,remote:1e3*o[0].start}:d>s+this._extrapolatedWindowDuration&&(this._localStartTimeCorrelation={local:this._now,remote:1e3*Math.max(o[0].start,s+this._extrapolatedWindowDuration)})}else this._localStartTimeCorrelation={local:this._now,remote:1e3*(o[0].start+this._extrapolatedWindowDuration/2)};var h=i.details.totalduration;if(this._playbackType===e.Playback.LIVE){var p=i.details.targetduration*((this.options.playback.hlsjsConfig||{}).liveSyncDurationCount||t.DefaultConfig.liveSyncDurationCount);p<=h?(h-=p,this._durationExcludesAfterLiveSyncPoint=!0):this._durationExcludesAfterLiveSyncPoint=!1}h!==this._playableRegionDuration&&(a=!0,this._playableRegionDuration=h);var f=o[0].start+h,g=s+l;if(f!==g)if(this._localEndTimeCorrelation){var m=this._localEndTimeCorrelation,v=this._now-m.local,y=(m.remote+v)/1e3;y>f?this._localEndTimeCorrelation={local:this._now,remote:1e3*f}:y<f-this._extrapolatedWindowDuration?this._localEndTimeCorrelation={local:this._now,remote:1e3*(f-this._extrapolatedWindowDuration)}:y>g&&(this._localEndTimeCorrelation={local:this._now,remote:1e3*g})}else this._localEndTimeCorrelation={local:this._now,remote:1e3*f};a&&this._onDurationChange(),r&&this._onProgress()}}},{key:"_onFragmentChanged",value:function(t,n){this.trigger(e.Events.Custom.PLAYBACK_FRAGMENT_CHANGED,n)}},{key:"_onFragmentLoaded",value:function(t,n){this.trigger(e.Events.PLAYBACK_FRAGMENT_LOADED,n)}},{key:"_onSubtitleLoaded",value:function(){if(!this._ccIsSetup){this.trigger(e.Events.PLAYBACK_SUBTITLE_AVAILABLE);var t=this._playbackType===e.Playback.LIVE?-1:this.closedCaptionsTrackId;this.closedCaptionsTrackId=t,this._ccIsSetup=!0}}},{key:"_onLevelSwitch",value:function(t,n){this.levels.length||this._fillLevels(),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH_END),this.trigger(e.Events.PLAYBACK_LEVEL_SWITCH,n);var i=this._hls.levels[n.level];i&&(this.highDefinition=i.height>=720||i.bitrate/1e3>=2e3,this.trigger(e.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(e.Events.PLAYBACK_BITRATE,{height:i.height,width:i.width,bandwidth:i.bitrate,bitrate:i.bitrate,level:n.level}))}},{key:"getPlaybackType",value:function(){return this._playbackType}},{key:"isSeekEnabled",value:function(){return this._playbackType===e.Playback.VOD||this.dvrEnabled}},{key:"dvrEnabled",get:function(){return this._durationExcludesAfterLiveSyncPoint&&this._duration>=this._minDvrSize&&this.getPlaybackType()===e.Playback.LIVE}}]),o}(e.HTML5Video);return C.canPlay=function(e,n){var i=e.split("?")[0].match(/.*\.(.*)$/)||[],r=i.length>1&&"m3u8"===i[1].toLowerCase()||S(n,["application/vnd.apple.mpegurl","application/x-mpegURL"]);return!(!t.isSupported()||!r)},C}(Zo,lo)})),ip=Gr((function(e,t){var n;window,n=function(e){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s="./src/clappr-dash-shaka-playback.js")}({"./node_modules/shaka-player/dist/shaka-player.compiled.js":
/*!*****************************************************************!*\
    !*** ./node_modules/shaka-player/dist/shaka-player.compiled.js ***!
    \*****************************************************************/
/*! no static exports found */function(e,t,n){(function(e){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
!function(){var n="undefined"!=typeof window?window:e,i={};for(var r in function(e,t,n){var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{for(var n=o,i=e.split("."),r=0;r<i.length-1;r++){var s=i[r];if(!(s in n))break e;n=n[s]}(s=t(r=n[i=i[i.length-1]]))!=r&&null!=s&&a(n,i,{configurable:!0,writable:!0,value:s})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function c(e){if(!(e instanceof Array)){e=u(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}s("Symbol",(function(e){function t(e,t){this.a=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.a};var n=0;return function e(i){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t("jscomp_symbol_"+(i||"")+"_"+n++,i)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=o[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return l(r(this))}})}return e}));var d,h="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var p;e:{var f={};try{f.__proto__={ae:!0},p=f.ae;break e}catch(e){}p=!1}d=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=d;function m(e,t){if(e.prototype=h(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Rf=t.prototype}function v(){this.j=!1,this.g=null,this.b=void 0,this.a=1,this.f=this.h=0,this.v=this.c=null}function y(e){if(e.j)throw new TypeError("Generator is already running");e.j=!0}function b(e,t){e.c={Bd:t,Gd:!0},e.a=e.h||e.f}function E(e,t,n){return e.a=n,{value:t}}function T(e){e.a=0}function A(e,t,n){e.h=t,null!=n&&(e.f=n)}function k(e){e.h=0,e.f=2}function _(e,t){e.a=t,e.h=0}function S(e){e.h=0;var t=e.c.Bd;return e.c=null,t}function w(e){e.v=[e.c],e.h=0,e.f=0}function C(e,t){var n=e.v.splice(0)[0];(n=e.c=e.c||n)?n.Gd?e.a=e.h||e.f:null!=n.u&&e.f<n.u?(e.a=n.u,e.c=null):e.a=e.f:e.a=t}function I(e){this.a=new v,this.b=e}function D(e,t,n,i){try{var r=t.call(e.a.g,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.a.j=!1,r;var a=r.value}catch(t){return e.a.g=null,b(e.a,t),R(e)}return e.a.g=null,i.call(e.a,a),R(e)}function R(e){for(;e.a.a;)try{var t=e.b(e.a);if(t)return e.a.j=!1,{value:t.value,done:!1}}catch(t){e.a.b=void 0,b(e.a,t)}if(e.a.j=!1,e.a.c){if(t=e.a.c,e.a.c=null,t.Gd)throw t.Bd;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function x(e){this.next=function(t){return y(e.a),e.a.g?t=D(e,e.a.g.next,t,e.a.m):(e.a.m(t),t=R(e)),t},this.throw=function(t){return y(e.a),e.a.g?t=D(e,e.a.g.throw,t,e.a.m):(b(e.a,t),t=R(e)),t},this.return=function(t){return function(e,t){y(e.a);var n=e.a.g;return n?D(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),R(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e,t){var n=new x(new I(t));return g&&e.prototype&&g(n,e.prototype),n}function P(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(new x(new I(e)))}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Y:r,Yd:a}}return{Y:-1,Yd:void 0}}function N(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}function B(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}v.prototype.m=function(e){this.b=e},v.prototype.return=function(e){this.c={return:e},this.a=this.f},v.prototype.u=function(e){this.a=e},s("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[],this.j=!1;var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var r=o.setTimeout;n.prototype.c=function(e){r(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.H),reject:e(this.g)}},t.prototype.H=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.J(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.h(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.M(t,e):this.h(e)},t.prototype.g=function(e){this.m(2,e)},t.prototype.h=function(e){this.m(1,e)},t.prototype.m=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,2===this.b&&this.I(),this.v()},t.prototype.I=function(){var e=this;r((function(){if(e.A()){var t=o.console;void 0!==t&&t.error(e.c)}}),1)},t.prototype.A=function(){if(this.j)return!1;var e=o.CustomEvent,t=o.Event,n=o.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.c,n(e))},t.prototype.v=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.J=function(e){var t=this.f();e.ec(t.resolve,t.reject)},t.prototype.M=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.ec(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.ec=function(e,t){function n(){switch(i.b){case 1:e(i.c);break;case 2:t(i.c);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?a.b(n):this.a.push(n),this.j=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=u(e),a=r.next();!a.done;a=r.next())i(a.value).ec(t,n)}))},t.all=function(e){var n=u(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).ec(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),s("WeakMap",(function(e){function t(e){if(this.a=(l+=Math.random()+1).toString(),e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!O(e,s)){var t=new n;a(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var l=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!O(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.a]=t,this},t.prototype.get=function(e){return i(e)&&O(e,s)?e[s][this.a]:void 0},t.prototype.has=function(e){return i(e)&&O(e,s)&&O(e[s],this.a)},t.prototype.delete=function(e){return!!(i(e)&&O(e,s)&&O(e[s],this.a))&&delete e[s][this.a]},t})),s("Map",(function(e){function t(){var e={};return e.Ga=e.next=e.head=e}function n(e,t){var n=e.a;return l((function(){if(n){for(;n.head!=e.a;)n=n.Ga;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&O(e.b,n))for(var r=0;r<i.length;r++){var s=i[r];if(t!=t&&s.key!=s.key||t===s.key)return{id:n,list:i,index:r,X:s}}return{id:n,list:i,index:-1,X:void 0}}function r(e){if(this.b={},this.a=t(),this.size=0,e){e=u(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.b[n.id]=[]),n.X?n.X.value=t:(n.X={next:this.a,Ga:this.a.Ga,head:this.a,key:e,value:t},n.list.push(n.X),this.a.Ga.next=n.X,this.a.Ga=n.X,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).X||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.X.Ga.next=e.X.next,e.X.next.Ga=e.X.Ga,e.X.head=null,this.size--,0))},r.prototype.clear=function(){this.b={},this.a=this.a.Ga=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).X},r.prototype.get=function(e){return(e=i(this,e).X)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r})),s("Set",(function(e){function t(e){if(this.a=new Map,e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.a.set(e,e),this.size=this.a.size,this},t.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},t.prototype.clear=function(){this.a.clear(),this.size=0},t.prototype.has=function(e){return this.a.has(e)},t.prototype.entries=function(){return this.a.entries()},t.prototype.values=function(){return this.a.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.a.forEach((function(i){return e.call(t,i,i,n)}))},t)})),s("Array.prototype.findIndex",(function(e){return e||function(e,t){return M(this,e,t).Y}})),s("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),s("Array.prototype.keys",(function(e){return e||function(){return N(this,(function(e){return e}))}})),s("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),s("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),s("String.prototype.includes",(function(e){return e||function(e,t){return-1!==B(this,e,"includes").indexOf(e,t||0)}})),s("Array.prototype.values",(function(e){return e||function(){return N(this,(function(e,t){return t}))}})),s("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}})),s("Array.prototype.find",(function(e){return e||function(e,t){return M(this,e,t).Yd}})),s("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}}));var U="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)O(i,r)&&(e[r]=i[r])}return e};s("Object.assign",(function(e){return e||U})),s("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)O(e,t)&&n.push(e[t]);return n}})),s("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=B(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return o>=r}}));var F=this||self;function V(e,t){var n,i=e.split("."),r=F;i[0]in r||void 0===r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function H(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function j(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function K(e){return e.a/(1-Math.pow(e.c,e.b))}function G(){this.b=new H(2),this.c=new H(5),this.a=0}function W(){}function z(){}function Y(){}function q(){}G.prototype.getBandwidthEstimate=function(e){return 128e3>this.a?e:Math.min(K(this.b),K(this.c))};var $=new Set;if(e.console&&e.console.log.bind){var X={},Q=(X[1]=console.error.bind(console),X[2]=console.warn.bind(console),X[3]=console.info.bind(console),X[4]=console.log.bind(console),X[5]=console.debug.bind(console),X[6]=console.debug.bind(console),X);Y=Q[2],z=Q[1]}function Z(e,t){for(var n=[],i=u(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}var J=function e(t){var n;return L(e,(function(e){return 1==e.a&&(n=0),3!=e.a?n<t?E(e,n,3):e.u(0):(n++,e.u(2))}))},ee=function e(t){var n,i,r,a,o,s;return L(e,(function(e){return 1==e.a&&(n=-1,r=i=void 0,a=u(t),o=a.next()),5!=e.a?o.done?-1==n?e.u(0):E(e,{Y:n,Oe:i,item:r,next:void 0},0):(s=o.value,0<=n?E(e,{Y:n,item:r,Oe:i,next:s},5):e.u(5)):(n++,i=r,r=s,o=a.next(),e.u(2))}))};function te(){}function ne(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(ie(e)==ie(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=ae(e),i=ae(t),r=u(J(e.byteLength)),a=r.next();!a.done;a=r.next())if(n[a=a.value]!=i[a])return!1;return!0}function ie(e){return e instanceof ArrayBuffer?e:e.buffer}function re(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function ae(e,t,n){return se(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function oe(e,t,n){return se(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function se(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(ie(e),t,Math.min(t+Math.max(n,0),r)-t)}function le(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}V("shaka.util.BufferUtils",te),te.toDataView=oe,te.toUint8=ae,te.toArrayBuffer=re,te.equal=ne,le.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},V("shaka.util.Error",le),le.Severity={RECOVERABLE:1,CRITICAL:2},le.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},le.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};
/*
   @license
   Copyright 2008 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */
var ue=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
/*
   @license
   Copyright 2006 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */function ce(e){var t;e instanceof ce?(de(this,e.va),this.Za=e.Za,this.ua=e.ua,he(this,e.qb),this.ja=e.ja,pe(this,e.a.clone()),this.Qa=e.Qa):e&&(t=String(e).match(ue))?(de(this,t[1]||"",!0),this.Za=fe(t[2]||""),this.ua=fe(t[3]||"",!0),he(this,t[4]),this.ja=fe(t[5]||"",!0),pe(this,t[6]||"",!0),this.Qa=fe(t[7]||"")):this.a=new Ae(null)}function de(e,t,n){e.va=n?fe(t,!0):t,e.va&&(e.va=e.va.replace(/:$/,""))}function he(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.qb=t}else e.qb=null}function pe(e,t,n){t instanceof Ae?e.a=t:(n||(t=ge(t,Ee)),e.a=new Ae(t))}function fe(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function ge(e,t,n){return null!=e?(e=encodeURI(e).replace(t,me),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function me(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=ce.prototype).va="",i.Za="",i.ua="",i.qb=null,i.ja="",i.Qa="",i.toString=function(){var e=[],t=this.va;if(t&&e.push(ge(t,ve,!0),":"),t=this.ua){e.push("//");var n=this.Za;n&&e.push(ge(n,ve,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.qb)&&e.push(":",String(t))}return(t=this.ja)&&(this.ua&&"/"!=t.charAt(0)&&e.push("/"),e.push(ge(t,"/"==t.charAt(0)?be:ye,!0))),(t=this.a.toString())&&e.push("?",t),(t=this.Qa)&&e.push("#",ge(t,Te)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.va&&(t=new ce);var n=!!e.va;n?de(t,e.va):n=!!e.Za,n?t.Za=e.Za:n=!!e.ua,n?t.ua=e.ua:n=null!=e.qb;var i=e.ja;if(n)he(t,e.qb);else if(n=!!e.ja){if("/"!=i.charAt(0))if(this.ua&&!this.ja)i="/"+i;else{var r=t.ja.lastIndexOf("/");-1!=r&&(i=t.ja.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.ja=i:n=""!==e.a.toString(),n?pe(t,e.a.clone()):n=!!e.Qa,n&&(t.Qa=e.Qa),t},i.clone=function(){return new ce(this)};var ve=/[#\/\?@]/g,ye=/[#\?:]/g,be=/[#\?]/g,Ee=/[#\?@]/g,Te=/#/g;function Ae(e){this.a=e||null}function ke(e,t){this.a=e,this.b=t}function _e(e,t){var n=new ke(4,0),i=Ce,r=i.a,a=n.b-r.b;(0<(n.a-r.a||a)?i.c:i.b)(i.a,n,e,t)}function Se(e,t,n,i){Y([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function we(e,t,n,i){z([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}(i=Ae.prototype).ga=null,i.hc=null,i.add=function(e,t){if(!this.ga&&(this.ga={},this.hc=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),a=null;if(0<=r){var o=n[i].substring(0,r);a=n[i].substring(r+1)}else o=n[i];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.a=null,(n=this.ga.hasOwnProperty(e)&&this.ga[e])||(this.ga[e]=n=[]),n.push(t),this.hc++,this},i.toString=function(){if(this.a)return this.a;if(!this.ga)return"";var e,t=[];for(e in this.ga)for(var n=encodeURIComponent(e),i=this.ga[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},i.clone=function(){var e=new Ae;if(e.a=this.a,this.ga){var t,n={};for(t in this.ga)n[t]=this.ga[t].concat();e.ga=n,e.hc=this.hc}return e},ke.prototype.toString=function(){return"v"+this.a+"."+this.b};var Ce=null;function Ie(e,t){return e.concat(t)}function De(){}function Re(e){return null!=e}function xe(e){var t=Object.create(e.prototype||Object.prototype);try{var n=e.call(t);n||(_e("Factories requiring new","Factories should be plain functions"),n=t)}catch(t){_e("Factories requiring new","Factories should be plain functions"),n=new e}return n}function Le(e,t){if(0==t.length)return e;var n=t.map((function(e){return new ce(e)}));return e.map((function(e){return new ce(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(Ie,[]).map((function(e){return e.toString()}))}function Pe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:new Set}}var Oe={Da:"video",fb:"audio",$:"text",vf:"image",mf:"application"};function Me(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function Ne(e){this.b=e,this.a=void 0}function Be(){}function Ue(e){if(!e)return"";239==(e=ae(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=Ke(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new le(2,2,2004)}}function Fe(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new le(2,2,2004);var i=Math.floor(e.byteLength/2);n=new Uint16Array(i),e=oe(e);for(var r=(i=u(J(i))).next();!r.done;r=i.next())n[r=r.value]=e.getUint16(2*r,t);return Ke(n)}function Ve(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=ae(e);if(239==n[0]&&187==n[1]&&191==n[2])return Ue(n);if(254==n[0]&&255==n[1])return Fe(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Fe(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Fe(e,!1);if(0==n[1]&&0==n[3])return Fe(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Ue(e);throw new le(2,2,2003)}function He(e){e=encodeURIComponent(e);var t=unescape(e);e=new Uint8Array(t.length);for(var n=(t=u(ee(t))).next();!n.done;n=t.next())e[(n=n.value).Y]=n.item.charCodeAt(0);return re(e)}function je(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=u(ee(e)),a=r.next();!a.done;a=r.next())a=a.value,i.setUint16(2*a.Y,a.item.charCodeAt(0),t);return n}function Ke(e){return Ge.value()(e)}Me.prototype.resolve=function(){},Me.prototype.reject=function(){},Ne.prototype.value=function(){return null==this.a&&(this.a=this.b()),this.a},V("shaka.util.StringUtils",Be),Be.resetFromCharCode=function(){Ge.a=void 0},Be.toUTF16=je,Be.toUTF8=He,Be.fromBytesAutoDetect=Ve,Be.fromUTF16=Fe,Be.fromUTF8=Ue;var Ge=new Ne((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Ja:65536};0<t.Ja;(t={Ja:t.Ja}).Ja/=2)if(e(t.Ja))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Ja)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Ja));return n}}(t);return null}));function We(){}function ze(e){return e=Ke(ae(e)),btoa(e)}function Ye(e,t){t=null==t||t;var n=ze(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function qe(t){var n=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));t=new Uint8Array(n.length);for(var i=(n=u(ee(n))).next();!i.done;i=n.next())t[(i=i.value).Y]=i.item.charCodeAt(0);return t}function $e(t){for(var n=t.length/2,i=new Uint8Array(n),r=(n=u(J(n))).next();!r.done;r=n.next())i[r=r.value]=e.parseInt(t.substr(2*r,2),16);return i}function Xe(e){var t=ae(e);e="";for(var n=(t=u(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Qe(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];var i=0,r=u(t);for(n=r.next();!n.done;n=r.next())i+=n.value.byteLength;for(i=new Uint8Array(i),r=0,n=(t=u(t)).next();!n.done;n=t.next())n=n.value,i.set(ae(n),r),r+=n.byteLength;return i}function Ze(){var e=this;this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.h=[],this.c=[],this.g=[],this.f=!1,this.a.on("data",(function(t){e.c=t.captions,e.g=t.metadata,e.h.push(Qe(t.initSegment,t.data))})),this.a.on("done",(function(){var t={data:Qe.apply(We,c(e.h)),captions:e.c,metadata:e.g};e.b.resolve(t),e.f=!1}))}function Je(t,n){if(!e.muxjs||"mp2t"!=t.toLowerCase().split(";")[0].split("/")[1])return!1;if(n)return MediaSource.isTypeSupported(et(n,t));var i=et("audio",t),r=et("video",t);return MediaSource.isTypeSupported(i)||MediaSource.isTypeSupported(r)}function et(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",a=i[1],o=Number(i[2]);r=("66"==a?r+"4200":"77"==a?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function tt(e){this.b=e,this.a=null}function nt(e){this.b=e,this.a=null}function it(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0};this.j=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.h=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function rt(e){var t,n;return P((function(i){if(1==i.a){if(e.a>=e.j){if(!e.c)throw new le(2,7,1010);e.a=1,e.b=e.f}return t=e.a,e.a++,0==t?i.return():(n=e.b*(1+(2*Math.random()-1)*e.h),E(i,new Promise((function(e){new nt(e).R(n/1e3)})),2))}e.b*=e.g,T(i)}))}function at(e,t){this.promise=e,this.c=t,this.a=!1}function ot(e){return new at(Promise.reject(e),(function(){return Promise.resolve()}))}function st(){var e=Promise.reject(new le(2,7,7001));return e.catch((function(){})),new at(e,(function(){return Promise.resolve()}))}function lt(e){return new at(Promise.resolve(e),(function(){return Promise.resolve()}))}function ut(e){return new at(e,(function(){return e.catch((function(){}))}))}function ct(e){return new at(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function dt(t,n){for(var i in n=void 0===n?{}:n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function ht(){this.a={}}function pt(){this.Mc=new ht,this.$b=this}function ft(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function gt(e){var t,n={};for(t in e)n[t]=e[t];return n}function mt(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function vt(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function yt(e,t,n){if(n||(n=mt),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=u(e)).next();!r.done;i={Ac:i.Ac},r=e.next()){if(i.Ac=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.Ac,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function bt(e,t,n){if(n||(n=mt),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function Et(){this.a=[]}function Tt(e,t){e.a.push(t.finally((function(){vt(e.a,t)})))}function At(e){pt.call(this),this.f=!1,this.g=new Et,this.a=new Set,this.b=new Set,this.c=e||null}function kt(e,t,n){n=n||Dt;var i=Rt[e];(!i||n>=i.priority)&&(Rt[e]={priority:n,Ne:t})}function _t(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function St(e,t,n,i,r,a,o){var s=new ce(n.uris[r]),l=s.va,u=!1;l||(de(s,l=(l=location.protocol).slice(0,-1)),n.uris[r]=s.toString()),l=l.toLowerCase();var c,d=(l=Rt[l])?l.Ne:null;return d?ut(rt(i)).U((function(){return e.f?st():(c=Date.now(),d(n.uris[r],n,t,(function(n,i,r){e.c&&t==It&&(e.c(n,i),u=!0,o.a=r)})))})).U((function(e){return null==e.timeMs&&(e.timeMs=Date.now()-c),{response:e,Fe:u}}),(function(s){if(e.f)return st();if(s instanceof le){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity){var l=new dt("retry",{error:s});return e.dispatchEvent(l),r=(r+1)%n.uris.length,St(e,t,n,i,r,s,o)}}throw s})):ot(new le(2,1,1e3,s))}function wt(){this.a=0}function Ct(e,t,n){at.call(this,e,t),this.b=n}V("shaka.util.Uint8ArrayUtils",We),We.concat=Qe,We.toHex=Xe,We.fromHex=$e,We.fromBase64=qe,We.toBase64=Ye,We.toStandardBase64=ze,We.equal=function(e,t){return _e("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),ne(e,t)},Ze.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},tt.prototype.R=function(t){var n=this;this.stop();var i=!0,r=null;return this.a=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.b()}),1e3*t),this},tt.prototype.stop=function(){this.a&&(this.a(),this.a=null)},nt.prototype.Qb=function(){return this.stop(),this.b(),this},nt.prototype.R=function(e){var t=this;return this.stop(),this.a=new tt((function(){t.b()})).R(e),this},nt.prototype.ra=function(e){var t=this;return this.stop(),this.a=new tt((function(){t.a.R(e),t.b()})).R(e),this},nt.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},V("shaka.util.Timer",nt),nt.prototype.stop=nt.prototype.stop,nt.prototype.tickEvery=nt.prototype.ra,nt.prototype.tickAfter=nt.prototype.R,nt.prototype.tickNow=nt.prototype.Qb,at.prototype.abort=function(){return this.a=!0,this.c()},at.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},at.prototype.U=function(e,t){function n(n){return function(s){if(r.a&&n)a.reject(o);else{var l=n?e:t;l?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(l,s,a):(n?a.resolve:a.reject)(s)}}}function i(){return a.reject(o),r.abort()}var r=this,a=new Me,o=new le(2,7,7001);return this.promise.then(n(!0),n(!1)),new at(a,(function(){return i()}))},V("shaka.util.AbortableOperation",at),at.prototype.chain=at.prototype.U,at.prototype.finally=at.prototype.finally,at.all=ct,at.prototype.abort=at.prototype.abort,at.notAbortable=ut,at.completed=lt,at.aborted=st,at.failed=ot,dt.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},dt.prototype.stopImmediatePropagation=function(){this.a=!0},dt.prototype.stopPropagation=function(){},V("shaka.util.FakeEvent",dt),ht.prototype.push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},ht.prototype.get=function(e){return(e=this.a[e])?e.slice():null},ht.prototype.remove=function(e,t){e in this.a&&(this.a[e]=this.a[e].filter((function(e){return e!=t})))},pt.prototype.addEventListener=function(e,t){this.Mc.push(e,t)},pt.prototype.removeEventListener=function(e,t){this.Mc.remove(e,t)},pt.prototype.dispatchEvent=function(e){for(var t=this.Mc.get(e.type)||[],n=(t=u(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.$b,e.currentTarget=this.$b;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.a)break}return e.defaultPrevented},Et.prototype.destroy=function(){for(var e=[],t=u(this.a),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.a=[],Promise.all(e)},m(At,pt),(i=At.prototype).Pe=function(e){this.a.add(e)},i.hf=function(e){this.a.delete(e)},i.ge=function(){this.a.clear()},i.Qe=function(e){this.b.add(e)},i.jf=function(e){this.b.delete(e)},i.he=function(){this.b.clear()},i.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},i.request=function(e,t){var n=this,i=new wt;if(this.f){var r=Promise.reject(new le(2,7,7001));return r.catch((function(){})),new Ct(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?ft(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},t.uris=ft(t.uris),r=function(e,t,n){for(var i=lt(void 0),r={},a=(e=u(e.a)).next();!a.done;r={Ec:r.Ec},a=e.next())r.Ec=a.value,i=i.U(function(e){return function(){return n.body&&(n.body=re(n.body)),e.Ec(t,n)}}(r));return i.U(void 0,(function(e){if(e instanceof le&&7001==e.code)throw e;throw new le(2,1,1006,e)}))}(this,e,t);var a=r.U((function(){return St(n,e,t,new it(t.retryParameters,!1),0,null,i)})),o=a.U((function(t){return function(e,t,n){for(var i=lt(void 0),r={},a=(e=u(e.b)).next();!a.done;r={Fc:r.Fc},a=e.next())r.Fc=a.value,i=i.U(function(e){return function(){var i=n.response;return i.data&&(i.data=re(i.data)),e.Fc(t,i)}}(r));return i.U((function(){return n}),(function(e){var t=2;if(e instanceof le){if(7001==e.code)throw e;t=e.severity}throw new le(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),l=0;r.promise.then((function(){l=Date.now()-s}),(function(){}));var c=0;a.promise.then((function(){c=Date.now()}),(function(){}));var d=o.U((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.Fe||!n.c||r.fromCache||e!=It||n.c(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}));return r=new Ct(d.promise,(function(){return d.abort()}),i),Tt(this.g,r),r},V("shaka.net.NetworkingEngine",At),At.prototype.request=At.prototype.request,At.prototype.destroy=At.prototype.destroy,At.makeRequest=_t,At.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}},At.prototype.clearAllResponseFilters=At.prototype.he,At.prototype.unregisterResponseFilter=At.prototype.jf,At.prototype.registerResponseFilter=At.prototype.Qe,At.prototype.clearAllRequestFilters=At.prototype.ge,At.prototype.unregisterRequestFilter=At.prototype.hf,At.prototype.registerRequestFilter=At.prototype.Pe,At.unregisterScheme=function(e){delete Rt[e]},At.registerScheme=kt,At.NumBytesRemainingClass=wt,m(Ct,at),At.PendingRequest=Ct;var It=1;At.RequestType={MANIFEST:0,SEGMENT:It,LICENSE:2,APP:3,TIMING:4};var Dt=3;At.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Dt};var Rt={};function xt(e){this.a=!1,this.b=new Me,this.c=e}function Lt(e,t){if(e.a){if(t instanceof le&&7003==t.code)throw t;throw new le(2,7,7003,t)}}function Pt(){this.a=new ht}function Ot(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Mt;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Mt=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}xt.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then((function(){e.b.resolve()}),(function(){e.b.resolve()})))},(i=Pt.prototype).release=function(){this.Xa(),this.a=null},i.l=function(e,t,n,i){this.a&&(e=new Ot(e,t,n,i),this.a.push(t,e))},i.ha=function(e,t,n,i){var r=this;this.l(e,t,(function i(a){r.sa(e,t,i),n(a)}),i)},i.sa=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=u(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.sa(),this.a.remove(t,r))},i.Xa=function(){if(this.a){var e,t=this.a,n=[];for(e in t.a)n.push.apply(n,c(t.a[e]));for(n=(t=u(n)).next();!n.done;n=t.next())n.value.sa();this.a.a={}}},V("shaka.util.EventManager",Pt),Pt.prototype.removeAll=Pt.prototype.Xa,Pt.prototype.unlisten=Pt.prototype.sa,Pt.prototype.listenOnce=Pt.prototype.ha,Pt.prototype.listen=Pt.prototype.l,Pt.prototype.release=Pt.prototype.release,Ot.prototype.sa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1};var Mt=void 0;function Nt(){}function Bt(e){return new ce(e=Ve(e)).ua}function Ut(e,t,n){function i(e){oe(a).setUint32(o,e.byteLength,!0),o+=4,a.set(ae(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new le(2,6,6015);var r;r="string"==typeof t?je(t,!0):t,e=je(e=Ve(e),!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),a}function Ft(e){for(var t=new Map,n=u(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Vt(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Ht(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=u(e),i=n.next();!i.done;i=n.next()){var r=u(i.value);if(i=r.next().value,r=r.next().value,!t.has(i))return!1;if((i=t.get(i))!=r||null==i)return!1}return!0}function jt(){}function Kt(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function Gt(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}V("shaka.util.FairPlayUtils",Nt),Nt.initDataTransform=Ut,Nt.defaultGetContentId=Bt;var Wt=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function zt(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function Yt(e){return""!=Zt().canPlayType(e)}function qt(){return Qt("Tizen")}function $t(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!qt()}function Xt(){if(!$t())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Qt(e){return(navigator.userAgent||"").includes(e)}function Zt(){return en||(Jt||(Jt=new nt((function(){en=null}))),(en=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(en=document.createElement("video")),Jt.R(1),en)}var Jt=null,en=null;function tn(e,t){var n=this;t=void 0===t?1:t,this.s=e,this.m=new Set,this.a=this.h=null,this.M=!1,this.H=0,this.c=null,this.b=new Pt,this.f=new Map,this.v=[],this.j=new Me,this.i=null,this.g=function(t){n.j.reject(t),e.onError(t)},this.ca=new Map,this.T=new Map,this.J=new nt((function(){return function(e){var t=e.ca,n=e.T;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),(t=Array.from(n.values())).length&&t.every((function(e){return"expired"==e}))&&e.g(new le(2,6,6014)),e.s.oc(Vt(n))}(n)})),this.A=!1,this.D=[],this.I=!1,this.W=new nt((function(){!function(e){e.f.forEach((function(t,n){var i=t.bd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.s.onExpirationUpdated(n.sessionId,r),t.bd=r)}))}(n)})).ra(t),this.j.catch((function(){})),this.F=new xt((function(){return function(e){return P((function(t){switch(t.a){case 1:return e.b.release(),e.b=null,e.j.reject(),e.W.stop(),e.W=null,e.J.stop(),e.J=null,E(t,vn(e),2);case 2:if(!e.a){t.u(3);break}return A(t,4),E(t,e.a.setMediaKeys(null),6);case 6:_(t,5);break;case 4:S(t);case 5:e.a=null;case 3:e.c=null,e.m.clear(),e.h=null,e.v=[],e.i=null,e.g=function(){},e.s=null,T(t)}}))}(n)}))}function nn(e,t,n){return e.v=n,e.A=0<n.length,rn(e,t)}function rn(t,n){var i=function(t){if(0==(t=Ft(t.i.clearKeys)).size)return null;var n=[],i=[];t.forEach((function(e,t){var r=$e(t),a=$e(e);r={kty:"oct",kid:Ye(r,!1),k:Ye(a,!1)},n.push(r),i.push(r.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:ae(He(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:new Set(i)}}(t);if(i)for(var r=u(n),a=r.next();!a.done;a=r.next())(a=a.value).video&&(a.video.drmInfos=[i]),a.audio&&(a.audio.drmInfos=[i]);for((i=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||function(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:new Set})}));for(var i=u(e),r=i.next();!r.done;r=i.next())(r=r.value).video&&(r.video.drmInfos=n),r.audio&&(r.audio.drmInfos=n)}(n,r=Ft(t.i.servers)),a=(r=u(n)).next();!a.done;a=r.next())for(var o=(a=u(((a=a.value).video?a.video.drmInfos:[]).concat(a.audio?a.audio.drmInfos:[]))).next();!o.done;o=a.next())Tn(o.value,Ft(t.i.servers),Ft(t.i.advanced||{}));return r=function(e,t){for(var n=new Set,i=u(t),r=i.next();!r.done;r=i.next()){var a=u(((r=r.value).video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[]));for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(i=u(n),r=i.next();!r.done;r=i.next())Tn(r.value,Ft(e.i.servers),Ft(e.i.advanced||{}));a=e.A?"required":"optional";var o=e.A?["persistent-license"]:["temporary"];for(i=new Map,n=u(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(n=u(t),r=n.next();!r.done;r=n.next())for(r=r.value,a=u([r.audio,r.video]),r=a.next();!r.done;r=a.next())if(o=r.value){var s=dn(o),l=null;"ac-3"==o.codecs.toLowerCase()&&qt()&&(l=dn(o,"ec-3"));var c=u(o.drmInfos);for(r=c.next();!r.done;r=c.next()){var d=r.value;(r=i.get(d.keySystem)).drmInfos.push(d),d.distinctiveIdentifierRequired&&(r.distinctiveIdentifier="required"),d.persistentStateRequired&&(r.persistentState="required");var h={robustness:(d="audio"==o.type?d.audioRobustness:d.videoRobustness)||"",contentType:s};"audio"==o.type?r.audioCapabilities.push(h):r.videoCapabilities.push(h),l&&(d={robustness:d||"",contentType:l},"audio"==o.type?r.audioCapabilities.push(d):r.videoCapabilities.push(d))}}return i}(t,n),r.size?(r=hn(t,r),i?r:r.catch((function(){}))):(t.M=!0,Promise.resolve())}function an(e){return P((function(t){if(1==t.a)return e.h&&e.c&&e.c.serverCertificate&&e.c.serverCertificate.length?(A(t,3),E(t,e.h.setServerCertificate(e.c.serverCertificate),5)):t.u(0);if(3!=t.a)return _(t,0);throw new le(2,6,6004,S(t).message)}))}function on(e){for(var t=(e.c?e.c.initData:[])||[],n=u(t),i=n.next();!i.done;i=n.next())sn(e,(i=i.value).initDataType,i.initData);for(i=(n=u(e.v)).next();!i.done;i=n.next())pn(e,i.value);return t.length||e.v.length||e.j.resolve(),e.j}function sn(e,t,n){for(var i=e.f.values(),r=(i=u(i)).next();!r.done;r=i.next())if(ne(n,r.value.initData)&&!Qt("Tizen 2"))return;!function(e,t,n){try{var i=e.A?e.h.createSession("persistent-license"):e.h.createSession()}catch(t){return void e.g(new le(2,6,6005,t.message))}e.b.l(i,"message",(function(t){e.a&&e.i.delayLicenseRequestUntilPlayed&&e.a.paused&&!e.I?e.D.push(t):gn(e,t)})),e.b.l(i,"keystatuseschange",(function(t){return mn(e,t)})),e.f.set(i,{initData:n,loaded:!1,bd:1/0,Aa:null});try{n=e.i.initDataTransform(n,t,e.c)}catch(n){return t=n,n instanceof le||(t=new le(2,6,6016,n)),void e.g(t)}e.i.logLicenseExchange&&Ye(n),i.generateRequest(t,n).catch((function(t){if(!e.F.a){e.f.delete(i);var n=t.errorCode;if(n&&n.systemCode){var r=n.systemCode;0>r&&(r+=Math.pow(2,32)),r="0x"+r.toString(16)}e.g(new le(2,6,6006,t.message,t,r))}}))}(e,t,n)}function ln(e){return e?e.keySystem:""}function un(e,t){if(navigator.userAgent.match(/Edge\//))return!0;if(t=t.toLowerCase(),qt()&&t.includes('codecs="ac-3"')){var n=t.replace("ac-3","ec-3");return e.m.has(t)||e.m.has(n)}return e.m.has(t)}function cn(e){return e=Z(e=e.f.keys(),(function(e){return e.sessionId})),Array.from(e)}function dn(e,t){var n=Kt(e.mimeType,t||e.codecs);return Je(n)?et(e.type,n):n}function hn(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,T,k,w,C;return P((function(I){switch(I.a){case 1:if(1==t.size&&t.has(""))throw new le(2,6,6e3);for(n=u(t.values()),i=n.next();!i.done;i=n.next())0==(r=i.value).audioCapabilities.length&&delete r.audioCapabilities,0==r.videoCapabilities.length&&delete r.videoCapabilities;o=u([!0,!1]),s=o.next();case 2:if(s.done){I.u(4);break}l=s.value,c=u(t.keys()),d=c.next();case 5:if(d.done){I.u(7);break}if(h=d.value,(p=t.get(h)).drmInfos.some((function(e){return!!e.licenseServerUri}))!=l){I.u(6);break}return A(I,8),E(I,navigator.requestMediaKeySystemAccess(h,[p]),10);case 10:a=I.b,I.u(7);break;case 8:S(I);case 9:Lt(e.F);case 6:d=c.next(),I.u(5);break;case 7:if(a){I.u(4);break}s=o.next(),I.u(2);break;case 4:if(!a)throw new le(2,6,6001);for(Lt(e.F),A(I,11),e.m.clear(),f=a.getConfiguration(),g=f.audioCapabilities||[],m=f.videoCapabilities||[],v=u(g),y=v.next();!y.done;y=v.next())b=y.value,e.m.add(b.contentType.toLowerCase());for(T=u(m),y=T.next();!y.done;y=T.next())k=y.value,e.m.add(k.contentType.toLowerCase());if(e.c=function(e,t){var n=[],i=[],r=[],a=new Set;return function(e,t,n,i,r){for(var a={},o=(e=u(e)).next();!o.done;a={na:a.na},o=e.next()){if(a.na=o.value,t.includes(a.na.licenseServerUri)||t.push(a.na.licenseServerUri),a.na.serverCertificate&&(n.some(function(e){return function(t){return ne(t,e.na.serverCertificate)}}(a))||n.push(a.na.serverCertificate)),a.na.initData){o={};for(var s=u(a.na.initData),l=s.next();!l.done;o={Ub:o.Ub},l=s.next())o.Ub=l.value,i.some(function(e){return function(t){var n=e.Ub;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&ne(t.initData,n.initData)}}(o))||i.push(o.Ub)}if(a.na.keyIds)for(s=(o=u(a.na.keyIds)).next();!s.done;s=o.next())r.add(s.value)}}(t.drmInfos,n,i,r,a),{keySystem:e,licenseServerUri:n[0],distinctiveIdentifierRequired:"required"==t.distinctiveIdentifier,persistentStateRequired:"required"==t.persistentState,audioRobustness:(t.audioCapabilities?t.audioCapabilities[0].robustness:"")||"",videoRobustness:(t.videoCapabilities?t.videoCapabilities[0].robustness:"")||"",serverCertificate:i[0],initData:r,keyIds:a}}(a.keySystem,t.get(a.keySystem)),!e.c.licenseServerUri)throw new le(2,6,6012,e.c.keySystem);return E(I,a.createMediaKeys(),13);case 13:return w=I.b,Lt(e.F),e.h=w,e.M=!0,E(I,an(e),14);case 14:Lt(e.F),_(I,0);break;case 11:if(C=S(I),Lt(e.F,C),e.c=null,e.m.clear(),C instanceof le)throw C;throw new le(2,6,6002,C.message)}}))}function pn(e,t){var n,i,r,a,o;return P((function(s){switch(s.a){case 1:try{n=e.h.createSession("persistent-license")}catch(t){return i=new le(2,6,6005,t.message),e.g(i),s.return(Promise.reject(i))}return e.b.l(n,"message",(function(t){e.a&&e.i.delayLicenseRequestUntilPlayed&&e.a.paused&&!e.I?e.D.push(t):gn(e,t)})),e.b.l(n,"keystatuseschange",(function(t){return mn(e,t)})),r={initData:null,loaded:!1,bd:1/0,Aa:null},e.f.set(n,r),A(s,2),E(s,n.load(t),4);case 4:return a=s.b,Lt(e.F),a?(r.loaded=!0,En(e)&&e.j.resolve(),s.return(n)):(e.f.delete(n),e.g(new le(2,6,6013)),s.return(Promise.resolve()));case 2:o=S(s),Lt(e.F,o),e.f.delete(n),e.g(new le(2,6,6005,o.message));case 3:return s.return(Promise.resolve())}}))}function fn(e,t,n){return"skd"==t&&(t=n.serverCertificate,e=Ut(e,n=Bt(e),t)),e}function gn(e,t){var n,i,r,a,o,s,l,c,d,h,p,f;P((function(g){switch(g.a){case 1:return n=t.target,e.i.logLicenseExchange&&Ye(t.message),i=e.f.get(n),r=e.c.licenseServerUri,a=e.i.advanced[e.c.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(o=_t([r],e.i.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,"com.microsoft.playready"!=e.c.keySystem&&"com.chromecast.playready"!=e.c.keySystem||function(e){var t=Fe(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=u((t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader")),i=n.next();!i.done;i=n.next())i=i.value,e.headers[i.getElementsByTagName("name")[0].textContent]=i.getElementsByTagName("value")[0].textContent;e.body=qe(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),s=Date.now(),A(g,2),E(g,e.s.nb.request(2,o).promise,4);case 4:l=g.b,_(g,3);break;case 2:return c=S(g),d=new le(2,6,6007,c),e.g(d),i&&i.Aa&&i.Aa.reject(d),g.return();case 3:return e.F.a?g.return():(e.H+=(Date.now()-s)/1e3,e.i.logLicenseExchange&&Ye(l.data),A(g,5),E(g,n.update(l.data),7));case 7:_(g,6);break;case 5:return h=S(g),p=new le(2,6,6008,h.message),e.g(p),i&&i.Aa&&i.Aa.reject(p),g.return();case 6:f=new dt("drmsessionupdate"),e.s.onEvent(f),i&&(i.Aa&&i.Aa.resolve(),new nt((function(){i.loaded=!0,En(e)&&e.j.resolve()})).R(kn)),T(g)}}))}function mn(e,t){var n=t.target,i=e.f.get(n),r=!1;n.keyStatuses.forEach((function(t,n){if("string"==typeof n){var a=n;n=t,t=a}if("com.microsoft.playready"==e.c.keySystem&&16==n.byteLength&&(Qt("Trident/")||navigator.userAgent.match(/Edge?\//))){var o=(a=oe(n)).getUint32(0,!0),s=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,l,!1)}"com.microsoft.playready"==e.c.keySystem&&"status-pending"==t&&(t="usable"),"status-pending"!=t&&(i.loaded=!0),"expired"==t&&(r=!0),a=Xe(n),e.ca.set(a,t)}));var a=n.expiration-Date.now();(0>a||r&&1e3>a)&&i&&!i.Aa&&(e.f.delete(n),n.close().catch((function(){}))),En(e)&&(e.j.resolve(),e.J.R(_n))}function vn(e){var t;return P((function(n){return t=Array.from(e.f.keys()),e.f.clear(),E(n,Promise.all(t.map((function(e){return P((function(t){return 1==t.a?(A(t,2),E(t,function(e){var t;return P((function(n){return 1==n.a?(t=new Promise((function(e,t){new nt(t).R(An)})),A(n,2),E(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.a?_(n,0):(S(n),void T(n))}))}(e),4)):2!=t.a?_(t,0):(S(t),void T(t))}))}))),0)}))}function yn(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted){var r=dn(n);if(!un(e,r))return!1}if(i&&i.encrypted&&!un(e,r=dn(i)))return!1;var a=ln(e.c);return 0==(n=(i?i.drmInfos:[]).concat(n?n.drmInfos:[])).length||n.some((function(e){return e.keySystem==a}))}function bn(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=u(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=u(t),o=a.next();!o.done;o=a.next())if(o=o.value,r.keySystem==o.keySystem){a=(a=(a=[]).concat(r.initData||[])).concat(o.initData||[]);var s=r.keyIds&&o.keyIds?new Set(c(r.keyIds).concat(c(o.keyIds))):r.keyIds||o.keyIds;n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,initData:a,keyIds:s});break}}return n}function En(e){return function(e,t){for(var n=u(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}(e=e.f.values(),(function(e){return e.loaded}))}function Tn(t,n,i){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}tn.prototype.destroy=function(){return this.F.destroy()},tn.prototype.configure=function(e){this.i=e},tn.prototype.zb=function(e){var t,n=this;return P((function(i){if(1==i.a)return n.h?(n.a=e,n.b.ha(n.a,"play",(function(){for(var e=u(n.D),t=e.next();!t.done;t=e.next())gn(n,t.value);n.I=!0,n.D=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.a&&n.b.l(n.a,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return vn(n)})),E(i,n.a.setMediaKeys(n.h).catch((function(e){return Promise.reject(new le(2,6,6003,e.message))})),2)):(n.b.ha(e,"encrypted",(function(){n.g(new le(2,6,6010))})),i.return());Lt(n.F),on(n),n.c.initData.length||n.v.length||(t=function(e){return sn(n,e.initDataType,ae(e.initData))},n.b.l(n.a,"encrypted",t)),T(i)}))},tn.prototype.Eb=function(){for(var e=1/0,t=this.f.keys(),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};var An=1,kn=5,_n=.5,Sn=new Ne((function(){return re(new Uint8Array([0]))}));function wn(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Cn(){}function In(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Dn(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Rn(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=u(xn(e)),r=i.next();!r.done;r=i.next()){var a=r.value;r=a.start,(a=a.end)>t&&(n+=a-Math.max(r,t))}return n}function xn(e){if(!e)return[];for(var t=[],n=u(J(e.length)),i=n.next();!i.done;i=n.next())i=i.value,t.push({start:e.start(i),end:e.end(i)});return t}function Ln(e,t,n){this.startTime=e,this.direction=Fn,this.endTime=t,this.payload=n,this.region=new Yn,this.position=null,this.positionAlign=On,this.size=0,this.textAlign=Mn,this.writingMode=Vn,this.lineInterpretation=Hn,this.line=null,this.lineHeight="",this.lineAlign=jn,this.displayAlign=Bn,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Gn,this.fontStyle=Wn,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1,this.cellResolution={columns:32,rows:15}}function Pn(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!bt(e.nestedCues,t.nestedCues,Pn))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!bt(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}wn.prototype.init=function(e){var t=muxjs.mp4.probe;e=ae(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},wn.prototype.b=function(e,t){var n=ae(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},wn.prototype.c=function(){this.a.resetCaptionStream()},Cn.prototype.init=function(){},Cn.prototype.b=function(){},Cn.prototype.c=function(){},Ln.prototype.clone=function(){var e,t=new Ln(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},V("shaka.text.Cue",Ln);var On="auto";Ln.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:On};var Mn="center",Nn={LEFT:"left",RIGHT:"right",CENTER:Mn,START:"start",END:"end"};Ln.textAlign=Nn;var Bn="after",Un={BEFORE:"before",CENTER:"center",AFTER:Bn};Ln.displayAlign=Un;var Fn="ltr";Ln.direction={HORIZONTAL_LEFT_TO_RIGHT:Fn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Vn="horizontal-tb";Ln.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Vn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Hn=0;Ln.lineInterpretation={LINE_NUMBER:Hn,PERCENTAGE:1};var jn="start",Kn={CENTER:"center",START:jn,END:"end"};Ln.lineAlign=Kn;var Gn=400;Ln.fontWeight={NORMAL:Gn,BOLD:700};var Wn="normal",zn={NORMAL:Wn,ITALIC:"italic",OBLIQUE:"oblique"};function Yn(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qn,this.scroll=$n}Ln.fontStyle=zn,Ln.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},V("shaka.text.CueRegion",Yn);var qn=1;Yn.units={PX:0,PERCENTAGE:qn,LINES:2};var $n="";function Xn(e){this.m=null,this.c=e,this.f=this.v=0,this.g=1/0,this.b=this.a=null,this.j="",this.h=new Map}function Qn(t){return!!(Jn[t]||e.muxjs&&"application/cea-608"==t)}function Zn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=u(t)).next();!s.done;s=t.next()){var l=s.value;s=l.stream,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),l.startTime+=r,l.endTime+=r,l.startTime>=e.f&&l.startTime<e.g&&(l=new Ln(l.startTime,l.endTime,l.text),o.get(s).get(a).push(l),s==e.j&&e.c.append([l]))}for(a=(r=u(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.h.has(a)||e.h.set(a,new Map),s=(t=u(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,l=o.get(a).get(s),e.h.get(a).set(s,l);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.g))}Yn.scrollMode={NONE:$n,UP:"up"},Xn.prototype.destroy=function(){return this.c=this.m=null,this.h.clear(),Promise.resolve()},Xn.prototype.remove=function(e,t){var n=this;return P((function(i){if(1==i.a)return E(i,Promise.resolve(),2);!n.c||!n.c.remove(e,t)||null==n.a||t<=n.a||e>=n.b||(e<=n.a&&t>=n.b?n.a=n.b=null:e<=n.a&&t<n.b?n.a=t:e>n.a&&t>=n.b&&(n.b=e)),T(i)}))},V("shaka.text.TextEngine",Xn),Xn.prototype.destroy=Xn.prototype.destroy,Xn.unregisterParser=function(e){delete Jn[e]},Xn.registerParser=function(e,t){Jn[e]=t};var Jn={};function ei(e,t,n,i){var r=this;this.a=e,this.h=n,this.f={},this.c=null,this.H=i||function(){},this.g={},this.b=new Pt,this.m={},this.v=t,this.A=new Me,this.j=function(e,t){var n=new MediaSource;return e.b.ha(n,"sourceopen",(function(){URL.revokeObjectURL(e.D),t.resolve()})),e.D=gi(n),e.a.src=e.D,n}(this,this.A),this.F=new xt((function(){return function(e){var t,n,i,r,a,o,s;return P((function(l){if(1==l.a){for(n in t=[],e.g)for(i=e.g[n],r=i[0],e.g[n]=i.slice(0,1),r&&t.push(r.p.catch(De)),a=u(i.slice(1)),o=a.next();!o.done;o=a.next())o.value.p.reject(new le(2,7,7003,void 0));for(s in e.c&&t.push(e.c.destroy()),e.h&&t.push(e.h.destroy()),e.m)t.push(e.m[s].destroy());return E(l,Promise.all(t),2)}e.b&&(e.b.release(),e.b=null),e.a&&(e.a.removeAttribute("src"),e.a.load(),e.a=null),e.j=null,e.c=null,e.h=null,e.f={},e.m={},e.v=null,e.g={},T(l)}))}(r)})),this.D=""}function ti(e){var t=Kt(e.mimeType,e.codecs),n=function(e){var t=[e.mimeType];return Wt.forEach((function(n,i){var r=e[i];r&&t.push(n+'="'+r+'"')})),t.join(";")}(e);return Qn(t)||MediaSource.isTypeSupported(n)||Je(t,e.type)}function ni(e,t){e.c||(e.c=new Xn(e.h)),"application/cea-608"!=t&&(e.c.m=xe(Jn[t]))}function ii(e){return!e.j||"ended"==e.j.readyState}function ri(e,t){if("text"==t)var n=e.c.a;else n=!(n=oi(e,t))||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function ai(e,t){return"text"==t?e.c.b:In(oi(e,t))}function oi(e,t){try{return e.f[t].buffered}catch(e){return null}}function si(t,n,i,r,a,o){var s,l,u,c;return P((function(d){return 1==d.a?n==(s=Oe).$?E(d,function(e,t,n,i){var r,a,o;return P((function(s){return 1==s.a?E(s,Promise.resolve(),2):e.m&&e.c?null==n||null==i?(e.m.parseInit(ae(t)),s.return()):(r={periodStart:e.v,segmentStart:n,segmentEnd:i},a=e.m.parseMedia(ae(t),r),o=a.filter((function(t){return t.startTime>=e.f&&t.startTime<e.g})),e.c.append(o),null==e.a&&(e.a=Math.max(n,e.f)),e.b=Math.min(i,e.g),void T(s)):s.return()}))}(t.c,i,r,a),0):t.m[n]?E(d,function(e,t){e.f=!0,e.b=new Me,e.h=[],e.c=[],e.g=[];var n=ae(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new le(2,3,3018)),e.b}(t.m[n],i),10):(o&&e.muxjs&&(t.c||ni(t,"text/vtt"),null==r&&null==a?t.v.init(i):t.v.b(i,(function(e){e.length&&Zn(t.c,e,r,a,t.f[s.Da].timestampOffset)}))),E(d,di(t,n,(function(){t.f[n].appendBuffer(i)})),0)):(l=d.b,t.c||ni(t,"text/vtt"),l.metadata&&(u=t.f[n].timestampOffset,t.H(l.metadata,u,a)),l.captions&&l.captions.length&&(c=t.f[s.Da].timestampOffset,Zn(t.c,l.captions,r,a,c)),E(d,di(t,n,(function(){t.f[n].appendBuffer(l.data)})),0))}))}function li(e,t){var n=ai(e,"video")||0;!function(e,t,n){if(e.j=t,t=e.h.get(t))for(var i=u(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.c.append(r)}(e.c,t,n)}function ui(e,t){return P((function(n){return t==Oe.$?e.c?E(n,e.c.remove(0,1/0),0):n.return():E(n,di(e,t,(function(){var n=e.j.duration;0>=n?ci(e,t):e.f[t].remove(0,n)})),0)}))}function ci(e,t){var n=e.g[t][0];n&&(n.p.resolve(),pi(e,t))}function di(e,t,n){return Lt(e.F),n={start:n,p:new Me},e.g[t].push(n),1==e.g[t].length&&fi(e,t),n.p}function hi(e,t){var n,i,r,a,o;return P((function(s){switch(s.a){case 1:for(r in Lt(e.F),n=[],i={},e.f)i.vb=new Me,a={start:function(e){return function(){return e.vb.resolve()}}(i),p:i.vb},e.g[r].push(a),n.push(i.vb),1==e.g[r].length&&a.start(),i={vb:i.vb};return A(s,2),E(s,Promise.all(n),4);case 4:_(s,3);break;case 2:throw S(s);case 3:try{t()}catch(e){throw new le(2,3,3015,e)}finally{for(o in e.f)pi(e,o)}T(s)}}))}function pi(e,t){e.g[t].shift(),fi(e,t)}function fi(e,t){var n=e.g[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new le(2,3,3017,t)):n.p.reject(new le(2,3,3015,i)),pi(e,t)}}(i=ei.prototype).destroy=function(){return this.F.destroy()},i.init=function(e,t){var n,i,r,a,o,s,l,c=this;return P((function(d){if(1==d.a)return n=Oe,E(d,c.A,2);for(i={},r=u(e.keys()),a=r.next();!a.done;i={ma:i.ma},a=r.next())i.ma=a.value,o=e.get(i.ma),s=Kt(o.mimeType,o.codecs),i.ma==n.$?ni(c,s):(!t&&MediaSource.isTypeSupported(s)||!Je(s,i.ma)||(c.m[i.ma]=new Ze,s=et(i.ma,s)),l=c.j.addSourceBuffer(s),c.b.l(l,"error",function(e){return function(){c.g[e.ma][0].p.reject(new le(2,3,3014,c.a.error?c.a.error.code:0))}}(i)),c.b.l(l,"updateend",function(e){return function(){return ci(c,e.ma)}}(i)),c.f[i.ma]=l,c.g[i.ma]=[]);T(d)}))},i.ic=function(){var e={total:xn(this.a.buffered),audio:xn(oi(this,"audio")),video:xn(oi(this,"video")),text:[]};if(this.c){var t=this.c.a,n=this.c.b;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var i=this;return P((function(r){return E(r,e==Oe.$?i.c.remove(t,n):di(i,e,(function(){n<=t?ci(i,e):i.f[e].remove(t,n)})),0)}))},i.flush=function(e){var t=this;return P((function(n){return e==Oe.$?n.return():E(n,di(t,e,(function(){t.a.currentTime-=.001,ci(t,e)})),0)}))},i.endOfStream=function(e){var t=this;return P((function(n){return E(n,hi(t,(function(){ii(t)||(e?t.j.endOfStream(e):t.j.endOfStream())})),0)}))},i.za=function(e){var t=this;return P((function(n){return E(n,hi(t,(function(){t.j.duration=e})),0)}))},i.getDuration=function(){return this.j.duration};var gi=e.URL.createObjectURL;function mi(e,t){return e=bi(e),t=bi(t),e.split("-")[0]==t.split("-")[0]}function vi(e,t){e=bi(e),t=bi(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function yi(e,t){e=bi(e),t=bi(t);var n=e.split("-"),i=t.split("-");return 2==n.length&&2==i.length&&n[0]==i[0]}function bi(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=ki.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Ei(e,t){return e=bi(e),(t=bi(t))==e?4:vi(t,e)?3:yi(t,e)?2:vi(e,t)?1:0}function Ti(e){return e.language?bi(e.language):e.audio&&e.audio.language?bi(e.audio.language):e.video&&e.video.language?bi(e.video.language):"und"}function Ai(e,t){for(var n=bi(e),i=new Set,r=u(t),a=r.next();!a.done;a=r.next())i.add(bi(a.value));for(a=(r=u(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=u(i)).next();!a.done;a=r.next())if(vi(a=a.value,n))return a;for(a=(r=u(i)).next();!a.done;a=r.next())if(yi(a=a.value,n))return a;for(a=(i=u(i)).next();!a.done;a=i.next())if(vi(n,a=a.value))return a;return null}var ki=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function _i(e,t){function n(e){var t="";e.video&&(t=Gt(e.video.codecs)[0]);var n="";return e.audio&&(n=Gt(e.audio.codecs)[0]),t+"-"+n}for(var i=Pi(e.variants,t),r=new ht,a=(i=u(i)).next();!a.done;a=i.next()){var o=n(a=a.value);r.push(o,a)}var s=null,l=1/0;!function(e,t){for(var n in e.a)t(n,e.a[n])}(r,(function(e,t){for(var n=0,i=0,r=u(t),a=r.next();!a.done;a=r.next())n+=a.value.bandwidth||0,++i;(n/=i)<l&&(s=e,l=n)})),e.variants=e.variants.filter((function(e){return n(e)==s}))}function Si(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function wi(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Ci(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var l=new Set;if(t)for(var c=u(t.roles),d=c.next();!d.done;d=c.next())l.add(d.value);if(n)for(d=(c=u(n.roles)).next();!d.done;d=c.next())l.add(d.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(l),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function Ii(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}}function Di(e){return e.__shaka_id||(e.__shaka_id=Ni++),e.__shaka_id}function Ri(e){var t=xi(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t}function xi(e){return{id:Di(e),active:!1,type:"",bandwidth:0,language:bi(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}}function Li(e){return e.allowedByApplication&&e.allowedByKeySystem}function Pi(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=u(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(Math,c(r))):i.get(Math.min.apply(Math,c(n)))}function Oi(e,t,n){var i=e,r=e.filter((function(e){return e.primary}));r.length&&(i=r);var a=i.length?i[0].language:"";if(i=i.filter((function(e){return e.language==a})),t){var o=Ai(bi(t),e.map((function(e){return e.language})));o&&(i=e.filter((function(e){return bi(e.language)==o})))}if(n){if((e=Mi(i,n)).length)return e}else if((e=i.filter((function(e){return 0==e.roles.length}))).length)return e;return(e=i.map((function(e){return e.roles})).reduce(Ie,[])).length?Mi(i,e[0]):i}function Mi(e,t){return e.filter((function(e){return e.roles.includes(t)}))}var Ni=0;function Bi(){this.h=null,this.c=!1,this.a=new G,this.b=[],this.g=1,this.j=!1,this.i=this.f=null}function Ui(e,t){return e&&(t=t.filter((function(t){return Si(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function Fi(e,t){this.a=e,this.b=new Set([e]);for(var n=u(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Vi(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!(n.channelsCount==i.channelsCount&&Hi(n,i)&&ji(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(Hi(n=e.video,i=t.video)&&ji(n.roles,i.roles))),!n}function Hi(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return Gt(e)[0]})),i=t.codecs.split(",").map((function(e){return Gt(e)[0]}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=u(J(n.length)),a=r.next();!a.done;a=r.next())if(n[a=a.value]!=i[a])return!1;return!0}function ji(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size!=i.size)return!1;for(var r=(n=u(n)).next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Ki(e){this.a=e,this.b=new Gi(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Gi(e,t,n,i){this.c=e,this.f=t,this.a=n,this.b=void 0===i?"":i}function Wi(){this.a=qi,this.b=(new Map).set(qi,2).set(Yi,1)}function zi(e,t,n){e.b.set(qi,n).set(Yi,t)}(i=Bi.prototype).stop=function(){this.h=null,this.c=!1,this.b=[],this.g=1,this.f=null},i.init=function(e){this.h=e},i.chooseVariant=function(){var e=Ui(this.i.restrictions,this.b),t=this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate);this.b.length&&!e.length&&(e=[(e=Ui(null,this.b))[0]]);for(var n=e[0]||null,i=(e=u(ee(e))).next();!i.done;i=e.next()){var r=i.value;i=r.item;var a=isNaN(this.g)?1:Math.abs(this.g);r=a*(r.next||{bandwidth:1/0}).bandwidth/this.i.bandwidthUpgradeTarget,t>=a*i.bandwidth/this.i.bandwidthDowngradeTarget&&t<=r&&(n=i)}return this.f=Date.now(),n},i.enable=function(){this.c=!0},i.disable=function(){this.c=!1},i.segmentDownloaded=function(e,t){var n=this.a;if(!(16e3>t)){var i=8e3*t/e,r=e/1e3;n.a+=t,j(n.b,r,i),j(n.c,r,i)}if(null!=this.f&&this.c)e:{if(this.j){if(Date.now()-this.f<1e3*this.i.switchInterval)break e}else{if(!(128e3<=this.a.a))break e;this.j=!0}n=this.chooseVariant(),this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate),n&&this.h(n)}},i.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate(this.i.defaultBandwidthEstimate)},i.setVariants=function(e){this.b=e},i.playbackRateChanged=function(e){this.g=e},i.configure=function(e){this.i=e},V("shaka.abr.SimpleAbrManager",Bi),Bi.prototype.configure=Bi.prototype.configure,Bi.prototype.playbackRateChanged=Bi.prototype.playbackRateChanged,Bi.prototype.setVariants=Bi.prototype.setVariants,Bi.prototype.getBandwidthEstimate=Bi.prototype.getBandwidthEstimate,Bi.prototype.segmentDownloaded=Bi.prototype.segmentDownloaded,Bi.prototype.disable=Bi.prototype.disable,Bi.prototype.enable=Bi.prototype.enable,Bi.prototype.chooseVariant=Bi.prototype.chooseVariant,Bi.prototype.init=Bi.prototype.init,Bi.prototype.stop=Bi.prototype.stop,Fi.prototype.add=function(e){return!!Vi(this.a,e)&&(this.b.add(e),!0)},Fi.prototype.values=function(){return this.b.values()},Ki.prototype.create=function(e){var t=this,n=e.filter((function(e){return Vi(t.a,e)}));return n.length?new Fi(n[0],n):this.b.create(e)},Gi.prototype.create=function(e){var t=[];t=function(e,t){var n=bi(t),i=Ai(n,e.map((function(e){return Ti(e)})));return i?e.filter((function(e){return i==Ti(e)})):[]}(e,this.c);var n=e.filter((function(e){return e.primary}));for(e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.f),e.length&&(t=e),this.a&&(e=Pi(t,this.a)).length&&(t=e),this.b&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.b),e.length&&(t=e)),e=new Fi(t[0]),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,Vi(e.a,n)&&e.add(n);return e};var Yi=0,qi=1;function $i(){}function Xi(e,t,n,i){var r,a,o,s;return P((function(l){if(1==l.a)return i&&(r=Zi[i.toLowerCase()])?l.return(r):(a=Qi(e))&&(o=Ji[a])?l.return(o):i?l.u(2):E(l,function(e,t,n){var i,r,a;return P((function(o){return 1==o.a?((i=_t([e],n)).method="HEAD",E(o,t.request(0,i).promise,2)):(r=o.b,a=r.headers["content-type"],o.return(a?a.toLowerCase().split(";").shift():""))}))}(e,t,n),3);if(2!=l.a&&(i=l.b)&&(s=Zi[i]))return l.return(s);throw new le(2,4,4e3,e)}))}function Qi(e){return 1==(e=new ce(e).ja.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}V("shaka.media.ManifestParser",$i),$i.unregisterParserByMime=function(e){delete Zi[e]},$i.registerParserByMime=function(e,t){Zi[e]=t},$i.registerParserByExtension=function(e,t){Ji[e]=t};var Zi={},Ji={};function er(e,t,n){this.c=e,this.b=t,this.a=n}function tr(e,t,n,i,r,a,o,s,l){this.startTime=e,this.endTime=t,this.c=n,this.b=i,this.a=r,this.f=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=l}function nr(e,t,n){this.f=e,this.rc=t,this.h=this.g=1/0,this.a=1,this.b=this.c=null,this.j=0,this.m=!0,this.v=0,this.A=void 0===n||n}function ir(e,t){this.g=e,this.h=ar(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.j=t,this.c=function(){}}function rr(e){this.a=e}function ar(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.currentTime;for(var n=(e=u(xn(e.a.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function or(e,t,n,i,r){var a=this;this.a=e,this.A=t,this.i=n,this.v=r,this.b=new Pt,this.j=!1,this.m=e.readyState,this.f=!1,this.c=i,this.h=!1,this.b.l(e,"waiting",(function(){return sr(a)})),this.g=new nt((function(){sr(a)})).ra(.25)}function sr(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.j)return}else e.j=!1;if(!e.a.paused){var t;if(e.a.readyState!=e.m&&(e.f=!1,e.m=e.a.readyState),!(t=!e.c)){var n=(t=e.c).g,i=ar(n),r=n.a.currentTime,a=Date.now()/1e3;t.a==r&&t.h==i||(t.f=a,t.a=r,t.h=i,t.b=!1),(i=(r=a-t.f)>=t.j&&i&&!t.b)&&(t.c(t.a,r),t.b=!0,t.a=n.a.currentTime),t=!i}if(t){var o=e.i.smallGapLimit;if(r=e.a.currentTime,n=function(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return null;var n=navigator.userAgent.match(/Edge\//)||Qt("Trident/")||qt()||Qt("CrKey")?.5:.1,i=xn(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)}));return 0<=i?i:null}(t=e.a.buffered,r),!(null==n||0==n&&!e.h||(i=t.start(n),i>=e.A.Fa()))){o=(a=i-r)<=o;var s=!1;.001>a||(o||e.f||(e.f=!0,(r=new dt("largegap",{currentTime:r,gapSize:a})).cancelable=!0,e.v(r),e.i.jumpLargeGaps&&!r.defaultPrevented&&(s=!0)),!o&&!s)||(0!=n&&t.end(n-1),e.a.currentTime=i)}}}}}function lr(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=ur.get(t),n.ha(e,t,i))}er.prototype.Hb=function(){return this.b},er.prototype.Db=function(){return this.a},V("shaka.media.InitSegmentReference",er),er.prototype.getEndByte=er.prototype.Db,er.prototype.getStartByte=er.prototype.Hb,tr.prototype.Ae=function(){return this.startTime},tr.prototype.ne=function(){return this.endTime},tr.prototype.Hb=function(){return this.b},tr.prototype.Db=function(){return this.a},V("shaka.media.SegmentReference",tr),tr.prototype.getEndByte=tr.prototype.Db,tr.prototype.getStartByte=tr.prototype.Hb,tr.prototype.getEndTime=tr.prototype.ne,tr.prototype.getStartTime=tr.prototype.Ae,(i=nr.prototype).getDuration=function(){return this.g},i.se=function(){return this.a},i.za=function(e){this.g=e},i.ze=function(){return this.f},i.Td=function(e){this.j=e},i.Pb=function(e){this.m=e},i.pd=function(e){this.h=e},i.bf=function(e){this.rc=e},i.me=function(){return this.rc},i.ob=function(e){if(0!=e.length){var t=e[e.length-1].endTime;this.Zc(e[0].startTime),this.a=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.a),this.b=Math.max(this.b,t),null!=this.f&&this.A&&(this.f=(Date.now()+this.j)/1e3-this.b-this.a)}},i.Zc=function(e){this.c=null==this.c?e:Math.min(this.c,e)},i.Yc=function(e){this.a=Math.max(this.a,e)},i.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},i.S=function(){return 1/0==this.g&&!this.m},i.Ua=function(){return 1/0!=this.g&&!this.m},i.Ra=function(){return Math.max(this.v,this.La()-this.h)},i.Ud=function(e){this.v=e},i.La=function(){return this.S()||this.Ua()?Math.min(Math.max(0,(Date.now()+this.j)/1e3-this.a-this.f),this.g):this.g},i.Gb=function(e){var t=Math.max(this.c,this.v);return 1/0==this.h?t:Math.max(t,Math.min(this.La()-this.h+e,this.Fa()))},i.kb=function(){return this.Gb(0)},i.Fa=function(){return Math.max(0,this.La()-(this.S()||this.Ua()?this.rc:0))},i.Xd=function(){return!(null==this.f||null!=this.b&&this.A)},V("shaka.media.PresentationTimeline",nr),nr.prototype.usingPresentationStartTime=nr.prototype.Xd,nr.prototype.getSeekRangeEnd=nr.prototype.Fa,nr.prototype.getSeekRangeStart=nr.prototype.kb,nr.prototype.getSafeSeekRangeStart=nr.prototype.Gb,nr.prototype.getSegmentAvailabilityEnd=nr.prototype.La,nr.prototype.setUserSeekStart=nr.prototype.Ud,nr.prototype.getSegmentAvailabilityStart=nr.prototype.Ra,nr.prototype.isInProgress=nr.prototype.Ua,nr.prototype.isLive=nr.prototype.S,nr.prototype.offset=nr.prototype.offset,nr.prototype.notifyMaxSegmentDuration=nr.prototype.Yc,nr.prototype.notifyMinSegmentStartTime=nr.prototype.Zc,nr.prototype.notifySegments=nr.prototype.ob,nr.prototype.getDelay=nr.prototype.me,nr.prototype.setDelay=nr.prototype.bf,nr.prototype.setSegmentAvailabilityDuration=nr.prototype.pd,nr.prototype.setStatic=nr.prototype.Pb,nr.prototype.setClockOffset=nr.prototype.Td,nr.prototype.getPresentationStartTime=nr.prototype.ze,nr.prototype.setDuration=nr.prototype.za,nr.prototype.getMaxSegmentDuration=nr.prototype.se,nr.prototype.getDuration=nr.prototype.getDuration,ir.prototype.release=function(){this.g=null,this.c=function(){}},or.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.g&&(this.g.stop(),this.g=null),this.c&&(this.c.release(),this.c=null),this.a=this.A=this.v=null},or.prototype.cd=function(){this.h=!0,sr(this)};var ur=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function cr(e,t,n){var i=this;this.a=e,this.g=t,this.f=n,this.h=!1,this.b=new Pt,this.c=new gr(e),lr(this.a,HTMLMediaElement.HAVE_METADATA,this.b,(function(){pr(i,i.f)}))}function dr(e){return e.h?e.a.currentTime:e.f}function hr(e,t){0<e.a.readyState?mr(e.c,t):lr(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){pr(e,e.f)}))}function pr(e,t){.001>Math.abs(e.a.currentTime-t)?fr(e):(e.b.ha(e.a,"seeking",(function(){fr(e)})),mr(e.c,0==e.a.currentTime?t:e.a.currentTime))}function fr(e){e.h=!0,e.b.l(e.a,"seeking",(function(){return e.g()}))}function gr(e){var t=this;this.b=e,this.h=10,this.g=this.f=this.c=0,this.a=new nt((function(){0>=t.c||t.b.currentTime!=t.f?t.a.stop():(t.b.currentTime=t.g,t.c--)}))}function mr(e,t){e.f=e.b.currentTime,e.g=t,e.c=e.h,e.b.currentTime=t,e.a.ra(.1)}function vr(e){var t=this;this.a=e,this.f=!1,this.c=null,this.b=new Pt,lr(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,(function(){null==t.c?t.f=!0:(t.b.ha(t.a,"seeking",(function(){t.f=!0})),t.a.currentTime=Math.max(0,t.a.currentTime+t.c))}))}function yr(e,t,n,i,r,a){var o=this;this.c=e,this.a=t.presentationTimeline,this.D=t.minBufferTime||0,this.i=n,this.A=r,this.j=null,this.f=new or(e,t.presentationTimeline,n,function(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new ir(new rr(e),t.stallThreshold);return function(e,t){e.c=t}(i,(function(){n?e.currentTime+=n:(e.pause(),e.play())})),i}(e,n),a),this.b=new cr(e,(function(){var e=o.f;e.j=!0,e.h=!1,e.f=!1;var t=dr(o.b);return e=Er(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.j||o.j<t-1)?(o.j=t,hr(o.b,e),e=void 0):(o.A(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.a.getDuration()?e.a.kb():e.a.Fa():0>t&&(t=e.a.Fa()+t),br(e,Tr(e,t))}(this,i)),this.h=new nt((function(){if(0!=o.c.readyState&&!o.c.paused){var e=dr(o.b),t=o.a.kb(),n=o.a.Fa();3>n-t&&(t=n-3),e<t&&(e=Er(o,e),o.c.currentTime=e)}})).ra(.25)}function br(e,t){var n=e.a.getDuration();return t>=n?n-e.i.durationBackoff:t}function Er(e,t){var n=Math.max(e.D,e.i.rebufferingGoal),i=e.i.safeSeekOffset,r=e.a.kb(),a=e.a.Fa(),o=e.a.getDuration();3>a-r&&(r=a-3);var s=e.a.Gb(n),l=e.a.Gb(i);return n=e.a.Gb(n+i),t>=o?br(e,t):t>a?a:t<r?Dn(e.c.buffered,l)?l:n:t>=s||Dn(e.c.buffered,t)?t:n}function Tr(e,t){var n=e.a.kb();return t<n||t>(n=e.a.Fa())?n:t}function Ar(e){this.a=e,this.b=null,this.c=0,this.f=!1}function kr(e,t,n){return new Ar([new tr(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function _r(e,t){this.b=e,this.a=t}function Sr(){Ar.call(this,[]),this.g=[]}function wr(e){var t=this;this.a=e,this.f=!1,this.b=this.a.kc(),this.c=new nt((function(){t.a.Kd(.25*t.b)}))}function Cr(e){e.c.stop();var t=e.f?0:e.b;if(0<=t)try{return void(e.a.kc()!=t&&e.a.od(t))}catch(e){}e.c.ra(.25),0!=e.a.kc()&&e.a.od(0)}function Ir(e){var t=this;this.c=e,this.a=new Set,this.b=new nt((function(){Dr(t,!1)})).ra(.25)}function Dr(e,t){for(var n=u(e.a),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=e.c.currentTime,a=t,o=u(i.g.a),s=o.next();!s.done;s=o.next()){s=s.value;var l=i.f.get(s),c=r<s.startTime?Lr:r>s.endTime?Or:Pr;i.f.set(s,c);for(var d=u(i.h),h=d.next();!h.done;h=d.next())(h=h.value).bb==l&&h.ab==c&&h.Ta(s,a)}}}function Rr(e){var t=this;this.b=function(){},this.a=new Set,this.f=e,this.c=new nt((function(){for(var e=t.f(),n=u(t.a),i=n.next();!i.done;i=n.next())(i=i.value).endTime<e.start&&t.a.delete(i)})).ra(2)}function xr(e){var t=this;this.g=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.h=[{bb:null,ab:Pr,Ta:function(e,n){return t.a(e,n)}},{bb:Lr,ab:Pr,Ta:function(e,n){return t.a(e,n)}},{bb:Or,ab:Pr,Ta:function(e,n){return t.a(e,n)}},{bb:Pr,ab:Lr,Ta:function(e,n){return t.b(e,n)}},{bb:Pr,ab:Or,Ta:function(e,n){return t.b(e,n)}},{bb:Lr,ab:Or,Ta:function(e,n){return t.c(e,n)}},{bb:Or,ab:Lr,Ta:function(e,n){return t.c(e,n)}}]}cr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},gr.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},vr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},vr.prototype.m=function(e){this.c=this.f?this.c:e},vr.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},vr.prototype.v=function(){},yr.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.f&&(this.f.release(),this.f=null),this.h&&(this.h.stop(),this.h=null),this.c=this.b=this.a=this.i=null,this.A=function(){}},yr.prototype.m=function(e){hr(this.b,e)},yr.prototype.g=function(){var e=dr(this.b);return 0<this.c.readyState&&!this.c.paused?Tr(this,e):e},yr.prototype.v=function(){this.f.cd()},(i=Ar.prototype).destroy=function(){return _e("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},i.release=function(){this.f||(this.a=[],this.b&&this.b.stop(),this.b=null)},i.Ie=function(){this.f=!0},i.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return t+this.c}return this.a.length&&e<this.a[0].startTime?this.c:null},i.get=function(e){return 0==this.a.length||0>(e-=this.c)||e>=this.a.length?null:this.a[e]},i.offset=function(e){if(!this.f)for(var t=u(this.a),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.timestampOffset+=e},i.mb=function(e){if(!this.f){var t,n=this.a[this.a.length-1];t=this.a.length?e.filter((function(e){return e.startTime>=n.startTime})):e,n&&t.length&&t[0].startTime==n.startTime&&this.a.pop(),this.a.push.apply(this.a,c(t))}},i.Pa=function(e){if(!this.f){var t=this.a.length;this.a=this.a.filter((function(t){return t.endTime>e})),this.c+=t-this.a.length}},i.Ka=function(e,t){if(!this.f){for(;this.a.length&&this.a[this.a.length-1].startTime>=t;)this.a.pop();for(;this.a.length&&this.a[0].endTime<=e;)this.a.shift(),this.c++;if(0!=this.a.length){var n=this.a[this.a.length-1];this.a[this.a.length-1]=new tr(n.startTime,t,n.c,n.b,n.a,n.f,n.timestampOffset,n.appendWindowStart,n.appendWindowEnd)}}},i.tc=function(e,t){var n=this;this.f||(this.b&&this.b.stop(),this.b=new nt((function(){var e=t();n.a.push.apply(n.a,c(e)),0==n.a.length&&(n.b.stop(),n.b=null)})),this.b.ra(e))},Ar.prototype[Symbol.iterator]=function(){return this.jb(0)},Ar.prototype.jb=function(e){return new _r(this,this.find(e)||0)},V("shaka.media.SegmentIndex",Ar),Ar.forSingleSegment=kr,Ar.prototype.getIteratorForTime=Ar.prototype.jb,Ar.prototype.updateEvery=Ar.prototype.tc,Ar.prototype.fit=Ar.prototype.Ka,Ar.prototype.evict=Ar.prototype.Pa,Ar.prototype.merge=Ar.prototype.mb,Ar.prototype.offset=Ar.prototype.offset,Ar.prototype.get=Ar.prototype.get,Ar.prototype.find=Ar.prototype.find,Ar.prototype.markImmutable=Ar.prototype.Ie,Ar.prototype.release=Ar.prototype.release,Ar.prototype.destroy=Ar.prototype.destroy,_r.prototype.seek=function(e){return this.a=this.b.jb(e).a,this.next().value},_r.prototype.current=function(){return this.b.get(this.a-1)},_r.prototype.next=function(){var e=this.b.get(this.a++);return{value:e,done:!e}},V("shaka.media.SegmentIterator",_r),_r.prototype.next=_r.prototype.next,_r.prototype.current=_r.prototype.current,_r.prototype.seek=_r.prototype.seek,m(Sr,Ar),(i=Sr.prototype).clone=function(){var e=new Sr;return e.g=this.g.slice(),e},i.release=function(){for(var e=u(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g=[]},i.find=function(e){for(var t=0,n=u(this.g),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.c+i.a.length}return null},i.get=function(e){for(var t=0,n=u(this.g),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.c+i.a.length}return null},i.offset=function(){},i.mb=function(){},i.Pa=function(){},i.Ka=function(){},i.tc=function(){},V("shaka.media.MetaSegmentIndex",Sr),Sr.prototype.updateEvery=Sr.prototype.tc,Sr.prototype.fit=Sr.prototype.Ka,Sr.prototype.evict=Sr.prototype.Pa,Sr.prototype.merge=Sr.prototype.mb,Sr.prototype.offset=Sr.prototype.offset,Sr.prototype.get=Sr.prototype.get,Sr.prototype.find=Sr.prototype.find,Sr.prototype.release=Sr.prototype.release,wr.prototype.release=function(){this.c&&(this.c.stop(),this.c=null),this.a=null},wr.prototype.set=function(e){this.b=e,Cr(this)},Ir.prototype.release=function(){this.b.stop();for(var e=u(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Rr.prototype.release=function(){this.b=function(){},this.a.clear(),this.c.stop()},xr.prototype.release=function(){this.g=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}};var Lr=1,Pr=2,Or=3;function Mr(e,t){this.P=oe(e),this.a=t==Br,this.C=0}function Nr(){return new le(2,3,3e3)}(i=Mr.prototype).wa=function(){return this.C<this.P.byteLength},i.ye=function(){return this.C},i.oe=function(){return this.P.byteLength},i.qa=function(){try{var e=this.P.getUint8(this.C);return this.C+=1,e}catch(e){throw Nr()}},i.Mb=function(){try{var e=this.P.getUint16(this.C,this.a);return this.C+=2,e}catch(e){throw Nr()}},i.K=function(){try{var e=this.P.getUint32(this.C,this.a);return this.C+=4,e}catch(e){throw Nr()}},i.Od=function(){try{var e=this.P.getInt32(this.C,this.a);return this.C+=4,e}catch(e){throw Nr()}},i.rb=function(){try{if(this.a)var e=this.P.getUint32(this.C,!0),t=this.P.getUint32(this.C+4,!0);else t=this.P.getUint32(this.C,!1),e=this.P.getUint32(this.C+4,!1)}catch(e){throw Nr()}if(2097151<t)throw new le(2,3,3001);return this.C+=8,t*Math.pow(2,32)+e},i.Wa=function(e){if(this.C+e>this.P.byteLength)throw Nr();var t=ae(this.P,this.C,e);return this.C+=e,t},i.skip=function(e){if(this.C+e>this.P.byteLength)throw Nr();this.C+=e},i.Qd=function(e){if(this.C<e)throw Nr();this.C-=e},i.seek=function(e){if(0>e||e>this.P.byteLength)throw Nr();this.C=e},i.ed=function(){for(var e=this.C;this.wa()&&0!=this.P.getUint8(this.C);)this.C+=1;return e=ae(this.P,e,this.C-e),this.C+=1,Ue(e)},V("shaka.util.DataViewReader",Mr),Mr.prototype.readTerminatedString=Mr.prototype.ed,Mr.prototype.seek=Mr.prototype.seek,Mr.prototype.rewind=Mr.prototype.Qd,Mr.prototype.skip=Mr.prototype.skip,Mr.prototype.readBytes=Mr.prototype.Wa,Mr.prototype.readUint64=Mr.prototype.rb,Mr.prototype.readInt32=Mr.prototype.Od,Mr.prototype.readUint32=Mr.prototype.K,Mr.prototype.readUint16=Mr.prototype.Mb,Mr.prototype.readUint8=Mr.prototype.qa,Mr.prototype.getLength=Mr.prototype.oe,Mr.prototype.getPosition=Mr.prototype.ye,Mr.prototype.hasMoreData=Mr.prototype.wa;var Br=1;function Ur(){this.c=[],this.b=[],this.a=!1}function Fr(e){for(var t=null!=e.flags?12:8;e.reader.wa()&&!e.parser.a;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function Vr(e){for(var t=null!=e.flags?12:8,n=e.reader.K(),i=(n=u(J(n))).next();!i.done&&(e.parser.qc(e.start+t,e.reader,e.partialOkay),!e.parser.a);i=n.next());}function Hr(e){return function(t){e(t.reader.Wa(t.reader.P.byteLength-t.reader.C))}}function jr(e){for(var t=0,n=(e=u(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Kr(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}Mr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Br},(i=Ur.prototype).box=function(e,t){var n=jr(e);return this.c[n]=Gr,this.b[n]=t,this},i.ea=function(e,t){var n=jr(e);return this.c[n]=Wr,this.b[n]=t,this},i.stop=function(){this.a=!0},i.parse=function(e,t){var n=new Mr(e,0);for(this.a=!1;n.wa()&&!this.a;)this.qc(0,n,t)},i.qc=function(e,t,n){var i=t.C,r=t.K(),a=t.K();switch(r){case 0:r=t.P.byteLength-i;break;case 1:r=t.rb()}var o=this.b[a];if(o){var s=null,l=null;this.c[a]==Wr&&(s=(l=t.K())>>>24,l&=16777215),a=i+r,n&&a>t.P.byteLength&&(a=t.P.byteLength),o({parser:this,partialOkay:n||!1,version:s,flags:l,reader:t=new Mr(t=0<(a-=t.C)?t.Wa(a):new Uint8Array(0),0),size:r,start:i+e})}else t.skip(Math.min(i+r-t.C,t.P.byteLength-t.C))},V("shaka.util.Mp4Parser",Ur),Ur.typeToString=Kr,Ur.allData=Hr,Ur.sampleDescription=Vr,Ur.children=Fr,Ur.prototype.parseNext=Ur.prototype.qc,Ur.prototype.parse=Ur.prototype.parse,Ur.prototype.stop=Ur.prototype.stop,Ur.prototype.fullBox=Ur.prototype.ea,Ur.prototype.box=Ur.prototype.box;var Gr=0,Wr=1;function zr(e,t,n,i){return e=_t(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Yr(e,t){var n=this;this.s=t,this.o=e,this.i=null,this.f=1,this.c=this.b=null,this.a=new Map,this.h=!1,this.j=null,this.g=!1,this.F=new xt((function(){return function(e){var t,n,i,r;return P((function(a){if(1==a.a){for(t=[],n=u(e.a.values()),i=n.next();!i.done;i=n.next())aa(r=i.value),t.push(oa(r));return E(a,Promise.all(t),2)}e.a.clear(),e.s=null,e.o=null,e.i=null,T(a)}))}(n)}))}function qr(e,t){var n=e.a.get("video");if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;r&&!n.Ya&&(Qr(e,r,!1,0,!1),n.Ya=i)}else(i=n.Ya)&&(n.Ya=null,Qr(e,i,!0,0,!1))}}function $r(e,t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,e.b=t,e.h&&(t.video&&Qr(e,t.video,n,i,!1),t.audio&&Qr(e,t.audio,n,i,!1))}function Xr(e,t){e.c=t,e.h&&Qr(e,t,!0,0,!1)}function Qr(e,t,n,i,r){var a=e.a.get(t.type);a||"text"!=t.type?a&&(a.Ya&&(t.trickModeVideo?(a.Ya=t,t=t.trickModeVideo):a.Ya=null),a.stream!=t||r)&&("text"==t.type&&ni(e.s.L,Kt(t.mimeType,t.codecs)),a.stream=t,a.la=null,n&&(a.Ab?a.wc=!0:a.Ma?(a.$a=!0,a.fc=i,a.wc=!0):(aa(a),ia(e,a,!0,i).catch((function(t){e.s&&e.s.onError(t)})))),function(e,t){var n,i;return P((function(r){if(1==r.a)return t.ia?(n=t.stream,i=t.ia,n.segmentIndex?r.u(2):E(r,n.createSegmentIndex(),2)):r.return();if(t.ia!=i||t.stream!=n)return r.return();var a=e.s.jc(),o=ai(e.s.L,t.type),s=t.stream.segmentIndex.find(t.pa?t.pa.endTime:a),l=null==s?null:t.stream.segmentIndex.get(s);s=l&&l.a?l.a-l.b:null,l&&!s&&(s=(l.endTime-l.startTime)*(t.stream.bandwidth||0)/8),s?((l=l.f)&&(s+=(l.a?l.a-l.b:null)||0),a=8*s/(l=e.s.getBandwidthEstimate())<(o||0)-a-Math.max(e.o.minBufferTime||0,e.i.rebufferingGoal)||t.ia.b.a>s):a=!1,a&&t.ia.abort(),T(r)}))}(e,a).catch((function(t){e.s&&e.s.onError(t)}))):function(e,t){var n,i,r,a;P((function(o){switch(o.a){case 1:return n=Oe,A(o,2),E(o,ui(e.s.L,n.$),4);case 4:_(o,3);break;case 2:i=S(o),e.s&&e.s.onError(i);case 3:r=Kt(t.mimeType,t.codecs),ni(e.s.L,r),(e.s.L.h.isTextVisible()||e.i.alwaysStreamText)&&(a=Jr(t),e.a.set(n.$,a),ra(e,a,0)),T(o)}}))}(e,t)}function Zr(e,t){t.Ab||t.$a||(t.Ma?(t.$a=!0,t.fc=0):null==ri(e.s.L,t.type)?null==t.Ia&&ra(e,t,0):(aa(t),ia(e,t,!1,0).catch((function(t){e.s&&e.s.onError(t)}))))}function Jr(e){return{stream:e,type:e.type,la:null,pa:null,mc:null,Wc:null,Vc:null,Uc:null,Ya:null,endOfStream:!1,Ma:!1,Ia:null,$a:!1,fc:0,wc:!1,Ab:!1,gd:!1,Ib:!1,ia:null}}function ea(e,t){var n=e.o.presentationTimeline,i=n.La();return!(t.endTime<n.Ra()||t.startTime>i)}function ta(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function na(e,t,n){var i,r,a,o;return P((function(s){return 1==s.a?(i=It,r=zr(n.c(),n.b,n.a,e.i.retryParameters),a=e.s.nb.request(i,r),t.ia=a,E(s,a.promise,2)):(o=s.b,t.ia=null,s.return(o.data))}))}function ia(e,t,n,i){var r,a;return P((function(o){return 1==o.a?(t.$a=!1,t.wc=!1,t.fc=0,t.Ab=!0,t.pa=null,t.mc=null,t.la=null,i?(r=e.s.jc(),a=e.s.L.getDuration(),E(o,e.s.L.remove(t.type,r+i,a),3)):E(o,ui(e.s.L,t.type),4)):3!=o.a?(Lt(e.F),n?E(o,e.s.L.flush(t.type),3):o.u(3)):(Lt(e.F),t.Ab=!1,t.endOfStream=!1,ra(e,t,0),void T(o))}))}function ra(e,t,n){var i=t.type;("text"!=i||e.a.has(i))&&(t.Ia=new tt((function(){var n;return P((function(i){return 1==i.a?(A(i,2),E(i,e.Kb(t),4)):2!=i.a?_(i,0):(n=S(i),e.s&&e.s.onError(n),void T(i))}))})).R(n))}function aa(e){null!=e.Ia&&(e.Ia.stop(),e.Ia=null)}function oa(e){return P((function(t){return e.ia?E(t,e.ia.abort(),0):t.u(0)}))}function sa(e,t){P((function(n){if(1==n.a)return E(n,rt(e.j),2);Lt(e.F),e.s.onError(t),t.handled||e.i.failureCallback(t),T(n)}))}function la(e,t){var n={B:null,mimeType:null,startTime:null,qd:NaN,uri:null},i=this;this.h=t,this.c=e,this.f=n,this.j=null,this.g=[],this.b=this.a=null,this.m=Promise.resolve().then((function(){return function(e){return P((function(t){if(e.F.a)t=t.u(0);else{if(0==e.g.length||e.a&&!e.a.Sa)var n=!1;else{e.a&&(e.a.xa.Va(),e.a=null);var i=(n=e.g.shift()).create(e.f);i?(n.xa.pb(),e.a={node:i.node,payload:i.payload,Sa:i.Sa,xa:n.xa}):n.xa.pc(),n=!0}n?n=Promise.resolve():e.a?n=function(e){var t,n;return P((function(i){switch(i.a){case 1:return e.c=e.h.ue(e.c,e.f,e.a.node,e.a.payload),A(i,2),e.b=e.h.je(e.c,e.f,e.a.payload),E(i,e.b.promise,4);case 4:e.b=null,e.c==e.a.node&&(e.a.xa.nc(),e.a=null),_(i,0);break;case 2:return 7001==(t=S(i)).code?e.a.xa.Va():e.a.xa.onError(t),e.a=null,e.b=null,n=e,E(i,e.h.handleError(e.f,t),5);case 5:n.c=i.b,T(i)}}))}(e):(e.h.Le(e.c),e.j=new Me,n=e.j),t=E(t,n,1)}return t}))}(i)})),this.F=new xt((function(){return function(e){var t,n;return P((function(i){if(1==i.a)return e.b&&e.b.abort(),ca(e),E(i,e.m,2);for(e.a&&e.a.xa.Va(),t=u(e.g),n=t.next();!n.done;n=t.next())n.value.xa.Va();e.a=null,e.g=[],e.h=null,T(i)}))}(i)}))}function ua(e,t){var n={pb:function(){},nc:function(){},Va:function(){},onError:function(){},pc:function(){},Qf:function(){}};return e.g.push({create:t,xa:n}),e.b&&e.b.abort(),ca(e),n}function ca(e){e.j&&(e.j.resolve(),e.j=null)}function da(e){this.a=null;for(var t=u(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n);this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function ha(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function pa(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=u(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function fa(){}function ga(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ma(e,t){var n=this;this.h=!1,this.f=[],this.a=e,this.g=t,this.b=document.createElement("div"),this.b.classList.add("shaka-text-container"),this.b.style.textAlign="center",this.b.style.display="flex",this.b.style.flexDirection="column",this.b.style.alignItems="center",this.b.style.justifyContent="flex-end",this.g.appendChild(this.b),this.j=new nt((function(){va(n)})).ra(.25),this.c=new Map}function va(e){function t(t){return e.f.includes(t)&&e.h&&t.startTime<=n&&t.endTime>=n}for(var n=e.a.currentTime,i=u(e.c.keys()),r=i.next();!r.done;r=i.next())if(!t(r=r.value)){var a=e.c.get(r);e.b.removeChild(a),e.c.delete(r)}for(i=new Set(e.c.values()),a=(r=u(Array.from(e.b.childNodes))).next();!a.done;a=r.next())a=a.value,i.has(a)||e.b.removeChild(a);for(r=(i=u(i=e.f.filter((function(n){return t(n)&&!e.c.has(n)})).sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})))).next();!r.done;r=i.next())ba(e,e.b,r.value)}function ya(e,t,n,i){var r=document.createElement("span");return i&&r.classList.add("shaka-nested-cue"),Ea(e,r,n,!0),t.appendChild(r),r}function ba(e,t,n){if(n.nestedCues.length){var i=document.createElement("p");i.style.width="100%",Ea(e,i,n,!1);for(var r=0;r<n.nestedCues.length;r++)ya(e,i,n.nestedCues[r],!0);t.appendChild(i),e.c.set(n,i)}else e.c.set(n,ya(e,t,n,!1))}function Ea(e,t,n,i){var r=t.style,a=0==n.nestedCues.length;n.spacer?(r.flexBasis="100%",r.height="0"):(r.whiteSpace="pre-line",t.textContent=n.payload,a&&(r.backgroundColor=n.backgroundColor),r.border=n.border,r.color=n.color,r.direction=n.direction,r.opacity=n.opacity,r.paddingLeft=Ta(n.linePadding,n,e.g),r.paddingRight=Ta(n.linePadding,n,e.g),n.backgroundImage&&(r.backgroundImage="url('"+n.backgroundImage+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",""==n.backgroundColor&&(r.backgroundColor="transparent")),n.backgroundImage&&n.region&&(t=n.region.widthUnits==qn?"%":"px",r.height=n.region.height+(n.region.heightUnits==qn?"%":"px"),r.width=n.region.width+t),r.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end",a?r.display="inline-block":(r.display="flex",r.flexDirection="row",r.flexWrap="wrap",r.margin="0",r.alignItems=r.justifyContent,r.justifyContent="center"),i&&(r.maxWidth="100%"),r.fontFamily=n.fontFamily,r.fontWeight=n.fontWeight.toString(),r.fontStyle=n.fontStyle,r.letterSpacing=n.letterSpacing,r.fontSize=Ta(n.fontSize,n,e.g),n.line?1==n.lineInterpretation&&(r.position="absolute",n.writingMode==Vn?n.lineAlign==jn?r.top=n.line+"%":"end"==n.lineAlign&&(r.bottom=n.line+"%"):"vertical-lr"==n.writingMode?n.lineAlign==jn?r.left=n.line+"%":"end"==n.lineAlign&&(r.right=n.line+"%"):n.lineAlign==jn?r.right=n.line+"%":"end"==n.lineAlign&&(r.left=n.line+"%")):n.region&&n.region.id&&!a&&(e=n.region.widthUnits==qn?"%":"px",i=n.region.viewportAnchorUnits==qn?"%":"px",r.height=n.region.height+(n.region.heightUnits==qn?"%":"px"),r.width=n.region.width+e,r.position="absolute",r.top=n.region.viewportAnchorY+i,r.left=n.region.viewportAnchorX+i),r.lineHeight=n.lineHeight,n.position&&(n.writingMode==Vn?r.paddingLeft=n.position:r.paddingTop=n.position),"line-left"==n.positionAlign?r.cssFloat="left":"line-right"==n.positionAlign&&(r.cssFloat="right"),r.textAlign=n.textAlign,r.textDecoration=n.textDecoration.join(" "),r.writingMode=n.writingMode,n.size&&(n.writingMode==Vn?r.width=n.size+"%":r.height=n.size+"%"))}function Ta(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),gf:i[2]}:null;if(!i)return e;var r=i.value;switch(i.gf){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function Aa(){}function ka(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var l=r+"."+a,u=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===u||o?delete e[a]:e[a]=ft(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=ft(u)),l=ka(e[a],t[a],u,i,l),s=s&&l):typeof t[a]!=typeof u||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=u.constructor?(z("Invalid config, wrong type for "+l),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&Y("Unexpected number of arguments for "+l),e[a]=t[a]):(z("Invalid config, unrecognized key "+l),s=!1)}return s}function _a(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Sa(){}function wa(){var e=1e6,t=1/0;navigator.connection&&(navigator.connection.downlink&&(e=1e6*navigator.connection.downlink),navigator.connection.saveData&&(t=360));var n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:fn,logLicenseExchange:!1,updateExpirationTime:1},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},r={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0},failureCallback:function(e){return[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2};(Qt("Web0S")||qt()||Qt("CrKey"))&&(r.stallSkip=0);var a={trackSelectionCallback:function(e){return P((function(t){return t.return(e)}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},o={drm:n,manifest:i,streaming:r,offline:a,abrFactory:function(){return new Bi},abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(e){return P((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=Ai(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return bi(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(i=u(e),o=i.next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(e,o.preferredAudioLanguage))}))},o}function Ca(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return ka(e,t,n||wa(),i,"")}function Ia(){this.a=null,this.b=[]}function Da(e,t){if(null==e.a)e.a={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0})}}function Ra(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=u(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function xa(){this.b=this.c=null,this.a=[]}function La(e,t,n){e.c!=t&&(e.c=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth}))}function Pa(e,t,n){e.b!=t&&(e.b=t,e.a.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Oa(){this.g=this.h=this.A=this.m=this.D=this.c=this.v=this.f=this.H=this.I=this.J=this.j=this.M=NaN,this.b=new Ia,this.a=new xa}function Ma(t,n){pt.call(this);var i=this;this.g=Vo,this.cc=this.a=null,this.T=!1,this.b=new Pt,this.Ic=this.j=this.xb=this.o=this.ac=this.m=this.c=this.bc=this.D=this.Yb=this.A=this.Ba=this.v=this.H=this.h=this.N=null,this.vd=1e9,this.i=Ga(this),this.xc={width:1/0,height:1/0},this.f=null,this.yb=new Gi(this.i.preferredAudioLanguage,this.i.preferredVariantRole,this.i.preferredAudioChannelCount),this.ca=this.i.preferredTextLanguage,this.Zb=this.i.preferredTextRole,this.Jc=[],n&&n(this),this.N=function(e){return new At((function(t,n){e.j&&e.j.segmentDownloaded(t,n)}))}(this),this.I=null,zo&&(this.I=xe(zo)),this.b.l(e,"online",(function(){i.hd()})),this.da={name:"detach"},this.Ea={name:"attach"},this.M={name:"unload"},this.Oc={name:"manifest-parser"},this.Nc={name:"manifest"},this.ta={name:"media-source"},this.Kc={name:"drm-engine"},this.J={name:"load"},this.Pc={name:"src-equals-drm-engine"},this.Ca={name:"src-equals"};var r=new Map;r.set(this.Ea,(function(e,t){return ut(function(e,t,n){return null==t.B&&(t.B=n.B,e.b.l(t.B,"error",(function(){var t=ro(e);t&&no(e,t)}))),e.a=t.B,Promise.resolve()}(i,e,t))})),r.set(this.da,(function(e){return e.B&&(i.b.sa(e.B,"error"),e.B=null),i.a=null,ut(e=Promise.resolve())})),r.set(this.M,(function(e){return ut(Ba(i,e))})),r.set(this.ta,(function(t){return t=function(t,n){var i,r,a,o;return P((function(s){if(1==s.a)return i=e.muxjs?new wn:new Cn,r=t.i.textDisplayFactory,a=xe(r),t.Lc=r,o=function(e,t,n,i){return new ei(e,t,n,i)}(n.B,i,a,(function(e,n,i){for(var r=(e=u(e)).next();!r.done;r=e.next())if((r=r.value).data&&r.cueTime&&r.frames){for(var a=r.cueTime+n,o=i,s=u(r.frames),l=s.next();!l.done;l=s.next())Ua(t,a,o,"ID3",l.value);t.I&&t.I.onHlsTimedMetadata(r,a)}})),E(s,o.A,2);t.H=o,T(s)}))}(i,t),ut(t)})),r.set(this.Oc,(function(e,t){var n=function(e,t,n){var i,r,a,o;return P((function(s){if(1==s.a)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.N,e.xb=i,a=e,E(s,Xi(i,r,e.i.manifest.retryParameters,t.mimeType),2);a.ac=s.b,e.m=xe(e.ac),o=ft(e.i.manifest),n.B&&"AUDIO"===n.B.nodeName&&(o.disableVideo=!0),e.m.configure(o),T(s)}))}(i,e,t);return ut(n)})),r.set(this.Nc,(function(e){return function(e,t){var n=t.uri,i=e.N;e.bc=new Rr((function(){return e.jd()})),function(e,t){e.b=t}(e.bc,(function(t){io(e,Lo,t),e.I&&e.I.onDashTimedMetadata(t)}));var r={networkingEngine:i,filter:function(t){return P((function(n){return n.return(e.gb(t))}))},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,i=u(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"==(r=r.value).mimeType&&n.add(r.originalId);for(i=u(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=u(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=new Sr;s={id:e.vd++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:s,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(o),label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.bc;e:{for(var i=u(n.a),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.a.add(t),n.b(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return no(e,t)}},a=Date.now()/1e3;return new at(function(){var t,i,o,s;return P((function(l){if(1==l.a)return t=e,E(l,e.m.start(n,r),2);if(t.o=l.b,i=Na(_o),e.dispatchEvent(i),0==e.o.variants.length)throw new le(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.o),o=Date.now()/1e3,s=o-a,e.f.v=s,T(l)}))}(),(function(){return e.m.stop()}))}(i,e)})),r.set(this.Kc,(function(){var e=function(e){var t,n;return P((function(i){if(1==i.a)return t=Date.now()/1e3,n=!0,e.h=Fa(e,{nb:e.N,onError:function(t){no(e,t)},oc:function(t){ao(e,t)},onExpirationUpdated:function(t,n){oo(e,t,n)},onEvent:function(i){e.dispatchEvent(i),i.type==yo&&n&&(n=!1,e.f.c=Date.now()/1e3-t)}}),e.h.configure(e.i.drm),E(i,nn(e.h,e.o.variants,e.o.offlineSessionIds),2);e.gb(e.o),T(i)}))}(i);return ut(e)})),r.set(this.J,(function(e,t){return ut(function(e,t,n){var i,r,a,o,s,l,c,d,h,p;return P((function(f){switch(f.a){case 1:return t.startTime=n.startTime,i=t.B,r=t.uri,e.xb=r,e.A=new wr({kc:function(){return t.B.playbackRate},od:function(e){t.B.playbackRate=e},Kd:function(e){t.B.currentTime+=e}}),a=function(){return Ya(e)},o=function(){return za(e)},e.b.l(i,"playing",a),e.b.l(i,"pause",a),e.b.l(i,"ended",a),e.b.l(i,"ratechange",o),s=e.i.abrFactory,e.j&&e.Ic==s||(e.Ic=s,e.j=xe(s),"function"!=typeof e.j.playbackRateChanged&&(_e("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.j.playbackRateChanged=function(){}),e.j.configure(e.i.abr)),e.yb=new Gi(e.i.preferredAudioLanguage,e.i.preferredVariantRole,e.i.preferredAudioChannelCount),e.ca=e.i.preferredTextLanguage,function(e,t,n){0<t&&(e.S()||e.Ud(t)),t=e.getDuration(),n<t&&(e.S()||e.za(n))}(e.o.presentationTimeline,e.i.playRangeStart,e.i.playRangeEnd),E(f,e.h.zb(i),2);case 2:if(e.j.init((function(t,n,i){n=void 0!==n&&n,i=void 0===i?0:i,e.c&&t!=e.c.b&&(La(e.f.a,t,!0),$r(e.c,t,n,i),Xa(e))})),e.v=function(e,t){return new yr(e.a,e.o,e.i.streaming,t,(function(){if(e.Ba&&Dr(e.Ba,!0),e.c)for(var t=e.c,n=t.s.jc(),i=t.i.smallGapLimit,r=u(t.a.keys()),a=r.next();!a.done;a=r.next()){a=a.value;var o=t.a.get(a);o.la=null;var s=t.s.L;(s="text"==a?null!=(s=s.c).a&&null!=s.b&&n>=s.a&&n<s.b:Dn(s=oi(s,a),n,i))||(null!=ai(t.s.L,a)&&Zr(t,o),o.ia&&(o.ia.abort(),o.ia=null),"text"===a&&t.s.L.v.c())}e.D&&Ha(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.Ba=function(e){var t=new xr(e.bc);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(t,(function(t){io(e,Po,t)}),(function(t){io(e,Oo,t)}),(function(t,n){n||(io(e,Po,t),io(e,Oo,t))}));var n=new Ir(e.a);return n.a.add(t),n}(e),l=Math.max(e.o.minBufferTime,e.i.streaming.rebufferingGoal),Va(e,l),_i(e.o,e.i.preferredAudioChannelCount),e.c=function(e){return new Yr(e.o,{jc:function(){return e.v.g()},getBandwidthEstimate:function(){return e.j.getBandwidthEstimate()},L:e.H,nb:e.N,onError:function(t){return no(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Me:function(){e.m&&e.m.update&&e.m.update()},cd:function(){e.v&&e.v.v(),Ha(e)}})}(e),e.c.configure(e.i.streaming),e.g=Ho,e.dispatchEvent(Na(Do)),c=qa(e)?e.j.chooseVariant():null,La(e.f.a,c,!0),$r(e.c,c,!1,0),(d=Oi(e.o.textStreams,e.ca,e.Zb)[0]||null)&&Pa(e.f.a,d,!0),d?(c.audio&&function(e,t,n){return e=bi(e.i.preferredTextLanguage),t=bi(t.language),mi(n=bi(n.language),e)&&!mi(t,n)}(e,c.audio,d)&&(e.T=!0),e.T&&e.H.h.setTextVisibility(!0),eo(e)):e.T=!1,d&&(e.i.streaming.alwaysStreamText||e.Tc())&&Xr(e.c,d),!e.i.streaming.startAtSegmentBoundary){f.u(3);break}return h=e.v.g(),E(f,function(e,t){var n,i,r,a,o;return P((function(s){return 1==s.a?(n=e.audio,i=e.video,r=function(e,t){var n,i;return P((function(r){return 1==r.a?e?E(r,e.createSegmentIndex(),2):r.return(null):(n=e.segmentIndex[Symbol.iterator]().seek(t))?(i=n.startTime,r.return(i)):r.return(null)}))},E(s,r(n,t),2)):3!=s.a?(a=s.b,E(s,r(i,t),3)):null!=(o=s.b)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}(c,h),4);case 4:p=f.b,e.v.m(p);case 3:return E(f,e.c.start(),5);case 5:e.i.abr.enabled&&(e.j.enable(),to(e)),e.gb(e.o),Qa(e),Xa(e),qa(e),e.o.variants.some((function(e){return e.primary})),e.b.ha(i,"loadedmetadata",(function(){e.f.f=Date.now()/1e3-n.qd})),T(f)}}))}(i,e,t))})),r.set(this.Pc,(function(e){return e=function(e,t){var n,i,r,a;return P((function(o){return 1==o.a?(n=Oe,i=Date.now()/1e3,r=!0,e.h=Fa(e,{nb:e.N,onError:function(t){no(e,t)},oc:function(t){ao(e,t)},onExpirationUpdated:function(t,n){oo(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==yo&&r&&(r=!1,e.f.c=Date.now()/1e3-i)}}),e.h.configure(e.i.drm),a={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"video/mp4",codecs:"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Da,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0},E(o,nn(e.h,[a],[]),2)):E(o,e.h.zb(t.B),0)}))}(i,e),ut(e)})),r.set(this.Ca,(function(e,t){return function(e,t,n){function i(){return Ya(e)}t.uri=n.uri,t.startTime=n.startTime,e.xb=t.uri,e.v=new vr(t.B),null!=t.startTime&&e.v.m(t.startTime),e.A=new wr({kc:function(){return t.B.playbackRate},od:function(e){t.B.playbackRate=e},Kd:function(e){t.B.currentTime+=e}}),Va(e,e.i.streaming.rebufferingGoal),e.b.l(t.B,"playing",i),e.b.l(t.B,"pause",i),e.b.l(t.B,"ended",i),e.b.l(t.B,"ratechange",(function(){return za(e)})),"none"!=e.a.preload&&e.b.ha(e.a,"loadedmetadata",(function(){e.f.f=Date.now()/1e3-n.qd})),e.a.audioTracks&&(e.b.l(e.a.audioTracks,"addtrack",(function(){return Qa(e)})),e.b.l(e.a.audioTracks,"removetrack",(function(){return Qa(e)})),e.b.l(e.a.audioTracks,"change",(function(){return Qa(e)}))),e.a.textTracks&&(e.b.l(e.a.textTracks,"addtrack",(function(t){Qa(e),function(e,t){var n=t.track;"metadata"==n.kind&&(n.mode="hidden",e.b.l(n,"cuechange",(function(){if(n.activeCues)for(var t=u(n.activeCues),i=t.next();!i.done;i=t.next())i=i.value,Ua(e,i.startTime,i.endTime,i.type,i.value),e.I&&e.I.onCueMetadataChange(i.value)})),new nt((function(){for(var t=function(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=u(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Qb().R(.5))}(e,t)})),e.b.l(e.a.textTracks,"removetrack",(function(){return Qa(e)})),e.b.l(e.a.textTracks,"change",(function(){return Qa(e)}))),t.B.src=t.uri,(qt()||Qt("Web0S"))&&t.B.load(),e.g=jo,e.dispatchEvent(Na(Do));var r=new Me;lr(e.a,HTMLMediaElement.HAVE_METADATA,e.b,(function(){r.resolve()}));var a=!1;return e.Jc.push((function(){a=!0})),lr(e.a,HTMLMediaElement.HAVE_CURRENT_DATA,e.b,(function(){return P((function(t){return 1==t.a?a?t.return():(function(e){var t=e.i.preferredAudioLanguage;if(""!=t){e.kd(t);var n=e.i.preferredVariantRole;""!=n&&e.kd(t,n)}}(e),Ka(e).find((function(e){return"disabled"!=e.mode}))?t.u(2):E(t,new Promise((function(t){e.b.ha(e.a.textTracks,"change",t),new nt(t).R(1)})),2)):a?t.return():(function(e){var t=e.i.preferredTextLanguage;if(""!=t){e.ld(t);var n=e.i.preferredTextRole;""!=n&&e.ld(t,n)}}(e),void T(t))}))})),e.a.error?r.reject(ro(e)):"none"==e.a.preload&&(Y('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),r.resolve()),e.b.ha(e.a,"error",(function(){r.reject(ro(e))})),new at(r,(function(){return r.reject(new le(2,7,7001)),Promise.resolve()}))}(i,e,t)})),this.W=new la(this.da,{ue:function(e,t,n,r){var a=null;return e==i.da&&(a=n==i.da?i.da:i.Ea),e==i.Ea&&(a=n==i.da||t.B!=r.B?i.da:n==i.Ea?i.Ea:n==i.ta||n==i.J?i.ta:n==i.Ca?i.Pc:null),e==i.ta&&(a=n==i.J&&t.B==r.B?i.Oc:i.M),e==i.Oc&&(a=po(i.J,i.Nc,i.M,n,t,r)),e==i.Nc&&(a=po(i.J,i.Kc,i.M,n,t,r)),e==i.Kc&&(a=po(i.J,i.J,i.M,n,t,r)),e==i.Pc&&(a=n==i.Ca&&t.B==r.B?i.Ca:i.M),e!=i.J&&e!=i.Ca||(a=i.M),e==i.M&&(a=r.B&&t.B==r.B?i.Ea:i.da),a},je:function(e,t,n){return i.dispatchEvent(Na(wo,{state:e.name})),r.get(e)(t,n)},handleError:function(e){return P((function(t){return 1==t.a?E(t,Ba(i,e),2):t.return(e.B?i.Ea:i.da)}))},Le:function(e){i.dispatchEvent(Na(Co,{state:e.name}))}}),t&&this.zb(t,!0)}function Na(e,t){return new dt(e,t)}function Ba(e,t){var n,i,r,a,o,s,l,c,d;return P((function(h){switch(h.a){case 1:return e.g!=Fo&&(e.g=Vo),n=e.Jc.map((function(e){return e()})),e.Jc=[],E(h,Promise.all(n),2);case 2:if(e.dispatchEvent(Na(No)),t.mimeType=null,t.startTime=null,t.uri=null,t.B&&(e.b.sa(t.B,"loadedmetadata"),e.b.sa(t.B,"playing"),e.b.sa(t.B,"pause"),e.b.sa(t.B,"ended"),e.b.sa(t.B,"ratechange")),e.Ba&&(e.Ba.release(),e.Ba=null),e.Yb&&(e.Yb.stop(),e.Yb=null),!e.m){h.u(3);break}return E(h,e.m.stop(),4);case 4:e.m=null,e.ac=null;case 3:if(!e.j){h.u(5);break}return E(h,e.j.stop(),5);case 5:if(!e.c){h.u(7);break}return E(h,e.c.destroy(),8);case 8:e.c=null;case 7:if(e.A&&(e.A.release(),e.A=null),e.v&&(e.v.release(),e.v=null),!e.H){h.u(9);break}return E(h,e.H.destroy(),10);case 10:e.H=null;case 9:if(e.I&&e.I.onAssetUnload(),!t.B||!t.B.src){h.u(11);break}return E(h,new Promise((function(e){return new nt(e).R(.1)})),12);case 12:t.B.removeAttribute("src"),t.B.load();case 11:if(!e.h){h.u(13);break}return E(h,e.h.destroy(),14);case 14:e.h=null;case 13:if(e.xb=null,e.D=null,e.o){for(i=u(e.o.variants),r=i.next();!r.done;r=i.next())for(a=r.value,o=u([a.audio,a.video]),s=o.next();!s.done;s=o.next())(l=s.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=u(e.o.textStreams),s=c.next();!s.done;s=c.next())(d=s.value).segmentIndex&&d.segmentIndex.release()}e.o=null,e.f=new Oa,e.Lc=null,Wa(e),T(h)}}))}function Ua(e,t,n,i,r){e.dispatchEvent(Na(So,{startTime:t,endTime:n,Of:i,payload:r}))}function Fa(e,t){return new tn(t,e.i.drm.updateExpirationTime)}function Va(e,t){e.D=new Wi,e.D.a=Yi,zi(e.D,t,Math.min(.5,t/2)),Wa(e),e.Yb=new nt((function(){Ha(e)})).ra(.25)}function Ha(e){switch(e.g){case jo:if(e.a.ended)var t=!0;else{var n=In(e.a.buffered);t=null!=n&&n>=e.a.duration-1}break;case Ho:e:if(e.a.ended||ii(e.H))t=!0;else{if(e.o.presentationTimeline.S()){n=e.o.presentationTimeline.La();var i=In(e.a.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=Rn(e.a.buffered,e.a.currentTime);var r=t,a=(n=e.D).b.get(n.a);t=n.a,i=r||i>=a?qi:Yi,n.a=i,t!=i&&Wa(e)}function ja(e){if(e.m){var t=ft(e.i.manifest);e.a&&"AUDIO"===e.a.nodeName&&(t.disableVideo=!0),e.m.configure(t)}if(e.h&&e.h.configure(e.i.drm),e.c){e.c.configure(e.i.streaming);try{e.gb(e.o)}catch(t){no(e,t)}e.j&&qa(e),!(t=e.c.b)||t.allowedByApplication&&t.allowedByKeySystem||$a(e)}if(e.H&&(t=e.i.textDisplayFactory,e.Lc!=t)){var n=xe(t),i=e.H,r=i.h;i.h=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.c&&(i.c.c=n),e.Lc=t,e.c&&(n=(t=e.c).a.get("text"))&&Qr(t,n.stream,!0,0,!0)}e.j&&(e.j.configure(e.i.abr),e.i.abr.enabled?e.j.enable():e.j.disable(),to(e)),e.D&&(t=e.i.streaming.rebufferingGoal,e.o&&(t=Math.max(t,e.o.minBufferTime)),zi(e.D,t,Math.min(.5,t/2)))}function Ka(e){return Array.from(e.a.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function Ga(e){var t=wa();return t.streaming.failureCallback=function(t){e.S()&&[1001,1002,1003].includes(t.code)&&(t.severity=1,e.hd())},t.textDisplayFactory=function(){return e.cc?new ma(e.a,e.cc):new da(e.a)},t}function Wa(e){var t=e.Sc();if(e.f&&e.D&&e.v){var n=e.A;n.f=t,Cr(n),Ya(e)}e.dispatchEvent(Na(vo,{buffering:t}))}function za(e){var t=e.a.playbackRate;0!=t&&(e.A&&e.A.set(t),t=Na(Io),e.dispatchEvent(t))}function Ya(e){if(e.f&&e.D){var t=e.f.b;e.D.a==Yi?Da(t,"buffering"):e.a.paused?Da(t,"paused"):e.a.ended?Da(t,"ended"):Da(t,"playing")}}function qa(e){try{so(e,e.o)}catch(t){return no(e,t),!1}var t=e.o.variants.filter((function(e){return Li(e)}));return t=e.yb.create(t),e.j.setVariants(Array.from(t.values())),!0}function $a(e){var t;if(t=qa(e)?e.j.chooseVariant():null){if(t==e.c.b)return;La(e.f.a,t,!0),$r(e.c,t,!0,0),Za(e)}Xa(e)}function Xa(e){lo(e,Na(mo))}function Qa(e){lo(e,Na(Mo))}function Za(e){lo(e,Na(Bo))}function Ja(e){lo(e,Na(Ro))}function eo(e){lo(e,Na(xo))}function to(e){lo(e,Na(go,{Pf:e.i.abr.enabled}))}function no(e,t){if(e.g!=Fo){var n=Na(Eo,{detail:t});e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function io(e,t,n){e.dispatchEvent(Na(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function ro(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new le(2,3,3016,t,n,e.a.error.message)}function ao(e,t){if(e.c){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var a=(n=u(e.o.variants)).next();!a.done;a=n.next()){var o=[];(a=a.value).audio&&o.push(a.audio),a.video&&o.push(a.video);for(var s=(o=u(o)).next();!s.done;s=o.next()){var l=s.value;if(s=a.allowedByKeySystem,l.keyIds.size){a.allowedByKeySystem=!0;for(var c=(l=u(l.keyIds)).next();!c.done;c=l.next())c=c.value,c=t[i?"00":c],a.allowedByKeySystem=a.allowedByKeySystem&&!!c&&!Go.includes(c)}s!=a.allowedByKeySystem&&(r=!0)}}r&&qa(e),(i=e.c.b)&&!i.allowedByKeySystem&&$a(e),r&&Qa(e)}}function oo(e,t,n){e.m&&e.m.onExpirationUpdated&&e.m.onExpirationUpdated(t,n),t=Na(To),e.dispatchEvent(t)}function so(e,t){var n=e.h?Vt(e.h.T):{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,a=!1,o=new Set,s=new Set,l=u(t.variants),c=l.next();!c.done;c=l.next()){var d=[];(c=c.value).audio&&d.push(c.audio),c.video&&d.push(c.video);for(var h=(d=u(d)).next();!h.done;h=d.next())if((h=h.value).keyIds.size)for(var p=(h=u(h.keyIds)).next();!p.done;p=h.next()){p=p.value;var f=n[i?"00":p];f?Go.includes(f)&&s.add(f):o.add(p)}c.allowedByApplication?c.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new le(2,4,4012,n={hasAppRestrictions:a,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)})}function lo(e,t){P((function(n){if(1==n.a)return E(n,Promise.resolve(),2);e.g!=Fo&&e.dispatchEvent(t),T(n)}))}function uo(e){for(var t=new Set,n=(e=u(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(bi(n.language)):t.add("und");return t}function co(e){for(var t=new Map,n=(e=u(e)).next();!n.done;n=e.next()){var i=n.value;n="und";var r=[];for(i.language&&(n=bi(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=u(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach((function(e,t){for(var n=u(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})})),a}function ho(){return new le(2,7,7e3)}function po(e,t,n,i,r,a){return i==e&&r.B==a.B&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function fo(e){return new Promise((function(t,n){e.Va=function(){return n(ho())},e.nc=function(){return t()},e.onError=function(e){return n(e)},e.pc=function(){return n(ho())}}))}Yr.prototype.destroy=function(){return this.F.destroy()},Yr.prototype.configure=function(e){this.i=e,this.j=new it({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},Yr.prototype.start=function(){var e=this;return P((function(t){if(1==t.a)return E(t,function(e){var t,n,i,r,a,o,s,l,c,d;return P((function(h){if(1==h.a){if(t=Oe,!e.b)throw new le(2,5,5006);return n=new Map,i=new Set,e.b.audio&&(n.set(t.fb,e.b.audio),i.add(e.b.audio)),e.b.video&&(n.set(t.Da,e.b.video),i.add(e.b.video)),e.c&&(n.set(t.$,e.c),i.add(e.c)),r=e.s.L,a=e.i.forceTransmuxTS,E(h,r.init(n,a),2)}Lt(e.F);var p=e.o.presentationTimeline.getDuration();for(1/0>p?e.s.L.za(p):e.s.L.za(Math.pow(2,32)),o=u(n.keys()),s=o.next();!s.done;s=o.next())l=s.value,c=n.get(l),e.a.has(l)||(d=Jr(c),e.a.set(l,d),ra(e,d,0));T(h)}))}(e),2);Lt(e.F),e.h=!0,T(t)}))},Yr.prototype.Kb=function(e){var t,n,i,r,a=this;return P((function(o){switch(o.a){case 1:if(Lt(a.F),e.Ma||null==e.Ia||e.Ab)return o.return();if(e.Ia=null,!e.$a){o.u(2);break}return E(o,ia(a,e,e.wc,e.fc),3);case 3:return o.return();case 2:if(e.stream.segmentIndex){o.u(4);break}return t=e.stream,E(o,e.stream.createSegmentIndex(),5);case 5:if(t!=e.stream)return null==e.Ia&&ra(a,e,0),o.return();case 4:try{n=function(e,t){if(ta(t))return li(e.s.L,t.stream.originalId||""),null;var n=e.s.jc(),i=t.pa?t.pa.endTime:n,r=function(e,t,n){return"text"==t?null==(e=e.c).b||e.b<n?0:e.b-Math.max(n,e.a):Rn(e=oi(e,t),n)}(e.s.L,t.type,n),a=Math.max(e.o.minBufferTime||0,e.i.rebufferingGoal,e.i.bufferingGoal)*e.f;if(i>=e.o.presentationTimeline.getDuration())return t.endOfStream=!0,"video"==t.type&&(n=e.a.get("text"))&&ta(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,r>=a)return.5;if(r=ai(e.s.L,t.type),r=function(e,t,n,i){return t.la?t.la.current():t.pa||i?(t.la=t.stream.segmentIndex.jb(t.pa?t.pa.endTime:i),t.la.next().value):(t.la=t.stream.segmentIndex.jb(Math.max(n-e.i.inaccurateManifestTolerance,0)),(i=t.la.next().value)&&ea(e,i)||(t.la=t.stream.segmentIndex.jb(n),i=t.la.next().value),i)}(e,t,n,r),!r||!ea(e,r))return 1;a=1/0;for(var o=Array.from(e.a.values()),s=(o=u(o)).next();!s.done;s=o.next())ta(s=s.value)||(a=Math.min(a,s.pa?s.pa.endTime:n));return i>=a+e.o.presentationTimeline.a?1:(function(e,t,n,i){var r,a,o,s,l,u,c,d,h;return P((function(p){switch(p.a){case 1:return r=Oe,a=t.stream,o=t.la,t.Ma=!0,s=function(e,t,n){var i,r,a,o,s,l,u;return P((function(c){return i=[],r=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,(o=n.timestampOffset)==t.Wc&&r==t.Vc&&a==t.Uc||(s=function(){var n;return P((function(i){if(1==i.a)return A(i,2),t.Vc=r,t.Uc=a,t.Wc=o,E(i,function(e,t,n,i,r){return P((function(a){return t==Oe.$?(e.c.v=n,function(e,t,n){e.f=t,e.g=n}(e.c,i,r),a.return()):E(a,Promise.all([di(e,t,(function(){var n=e.f[t].appendWindowStart,i=e.f[t].appendWindowEnd;e.f[t].abort(),e.f[t].appendWindowStart=n,e.f[t].appendWindowEnd=i,ci(e,t)})),di(e,t,(function(){var i=n;0>i&&(i+=.001),e.f[t].timestampOffset=i,ci(e,t)})),di(e,t,(function(){e.f[t].appendWindowStart=0,e.f[t].appendWindowEnd=r,e.f[t].appendWindowStart=i,ci(e,t)}))]),0)}))}(e.s.L,t.type,o,r,a),4);if(2!=i.a)return _(i,0);throw n=S(i),t.Vc=null,t.Uc=null,t.Wc=null,n}))},i.push(s())),!function(e,t){return e&&t?e.Hb()==t.Hb()&&e.Db()==t.Db()&&bt(e.c(),t.c()):e==t}(n.f,t.mc)&&(t.mc=n.f)&&(l=na(e,t,n.f),u=function(){var n,i,r;return P((function(a){switch(a.a){case 1:return A(a,2),E(a,l,4);case 4:return n=a.b,Lt(e.F),i=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,E(a,si(e.s.L,t.type,n,null,null,i),5);case 5:_(a,0);break;case 2:throw r=S(a),t.mc=null,r}}))},i.push(u())),E(c,Promise.all(i),0)}))}(e,t,i),l=na(e,t,i),A(p,2),E(p,Promise.all([s,l]),4);case 4:return u=p.b,Lt(e.F),e.g?p.return():t.$a?(t.Ma=!1,ra(e,t,0),p.return()):E(p,function(e,t,n,i,r,a){var o;return P((function(s){return 1==s.a?(o=i.closedCaptions&&0<i.closedCaptions.size,null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new Ur).ea("emsg",(function(t){var n=i.emsgSchemeIdUris,a=t.reader.ed(),o=t.reader.ed(),s=t.reader.K(),l=t.reader.K(),u=t.reader.K(),c=t.reader.K();t=t.reader.Wa(t.reader.P.byteLength-t.reader.C);var d=r.startTime+l/s;n.includes(a)&&("urn:mpeg:dash:event:2012"==a?e.s.Me():(n=new dt(bo,{detail:{startTime:d,endTime:d+u/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:l,eventDuration:u,id:c,messageData:t}}),e.s.onEvent(n)))})).parse(a),E(s,function(e,t,n){var i,r,a;return P((function(o){if(1==o.a)return i=Math.max(e.i.bufferBehind,e.o.presentationTimeline.a),null==(r=ri(e.s.L,t.type))||.01>=(a=n-r-i)?o.return():E(o,e.s.L.remove(t.type,r,r+a),2);Lt(e.F),T(o)}))}(e,t,n),2)):3!=s.a?(Lt(e.F),E(s,si(e.s.L,t.type,a,r.startTime,r.endTime,o),3)):(Lt(e.F),void T(s))}))}(e,t,n,a,i,u[1]),5);case 5:if(Lt(e.F),e.g)return p.return();t.pa=i,o.next(),t.Ma=!1,t.gd=!1,c=e.s.L.ic(),d=c[t.type],JSON.stringify(d),t.$a||e.s.cd(),ra(e,t,0),_(p,0);break;case 2:if(h=S(p),Lt(e.F,h),e.g)return p.return();t.Ma=!1,t.type==r.$&&e.i.ignoreTextStreamFailures?e.a.delete(r.$):7001==h.code?(t.Ma=!1,t.Ia=null,ra(e,t,0)):3017==h.code?function(e,t,n){if(!Array.from(e.a.values()).some((function(e){return e!=t&&e.gd}))){var i=Math.round(100*e.f);if(20<i)e.f-=.2;else{if(!(4<i))return t.Ib=!0,e.g=!0,void e.s.onError(n);e.f-=.04}t.gd=!0}ra(e,t,4)}(e,t,h):(t.Ib=!0,h.severity=2,sa(e,h)),T(p)}}))}(e,t,n,r).catch((function(){})),null)}(a,e),null!=n&&(ra(a,e,n),e.Ib=!1)}catch(e){return sa(a,e),o.return()}if(i=Array.from(a.a.values()),!a.h||!i.every((function(e){return e.endOfStream}))){o.u(0);break}return E(o,a.s.L.endOfStream(),7);case 7:Lt(a.F),0!=(r=a.s.L.getDuration())&&r<a.o.presentationTimeline.getDuration()&&a.o.presentationTimeline.za(r),T(o)}}))},la.prototype.destroy=function(){return this.F.destroy()},(i=da.prototype).remove=function(e,t){return!!this.a&&(pa(this.a,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){function t(e){return e.spacer?"\n":e.nestedCues.length?e.nestedCues.map(t).join(""):e.payload}var n=e.map((function(e){if(e.nestedCues.length){var n=e.clone();return n.nestedCues=[],n.payload=t(e),n}return e})),i=[];e=this.a.cues?Array.from(this.a.cues):[];for(var r={},a=(n=u(n)).next();!a.done;r={cb:r.cb},a=n.next())r.cb=a.value,e.some(function(e){return function(t){return t.startTime==e.cb.startTime&&t.endTime==e.cb.endTime&&t.text==e.cb.payload}}(r))||(a=ha(r.cb))&&i.push(a);for(r=(e=u(e=i.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?i.indexOf(t)-i.indexOf(e):i.indexOf(e)-i.indexOf(t)})))).next();!r.done;r=e.next())this.a.addCue(r.value)},i.destroy=function(){return this.a&&(pa(this.a,(function(){return!0})),this.a.mode="disabled"),this.a=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.a.mode},i.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},V("shaka.text.SimpleTextDisplayer",da),da.prototype.setTextVisibility=da.prototype.setTextVisibility,da.prototype.isTextVisible=da.prototype.isTextVisible,da.prototype.destroy=da.prototype.destroy,da.prototype.append=da.prototype.append,da.prototype.remove=da.prototype.remove,V("shaka.util.Dom",fa),fa.removeAllChildren=ga,(i=ma.prototype).append=function(e){for(var t=c(this.f).concat(),n={},i=(e=u(e)).next();!i.done;n={Sb:n.Sb},i=e.next())n.Sb=i.value,t.some(function(e){return function(t){return Pn(t,e.Sb)}}(n))||this.f.push(n.Sb);va(this)},i.destroy=function(){this.g.removeChild(this.b),this.b=null,this.h=!1,this.f=[],this.j&&this.j.stop(),this.c.clear()},i.remove=function(e,t){return!!this.b&&(this.f=this.f.filter((function(n){return n.startTime<e||n.endTime>=t})),va(this),!0)},i.isTextVisible=function(){return this.h},i.setTextVisibility=function(e){this.h=e},V("shaka.text.UITextDisplayer",ma),ma.prototype.setTextVisibility=ma.prototype.setTextVisibility,ma.prototype.isTextVisible=ma.prototype.isTextVisible,ma.prototype.remove=ma.prototype.remove,ma.prototype.destroy=ma.prototype.destroy,ma.prototype.append=ma.prototype.append,V("shaka.util.ConfigUtils",Aa),Aa.convertToConfigObject=_a,Aa.mergeConfigObjects=ka,V("shaka.util.PlayerConfiguration",Sa),Sa.mergeConfigObjects=Ca,m(Ma,pt),(i=Ma.prototype).destroy=function(){var e,t=this;return P((function(n){switch(n.a){case 1:return t.g==Fo?n.return():(t.g=Fo,e=ua(t.W,(function(){return{node:t.da,payload:{B:null,mimeType:null,startTime:null,qd:NaN,uri:null},Sa:!1}})),E(n,new Promise((function(t){e.pb=function(){},e.nc=function(){t()},e.Va=function(){t()},e.onError=function(){t()},e.pc=function(){t()}})),2));case 2:return E(n,t.W.destroy(),3);case 3:if(t.b&&(t.b.release(),t.b=null),t.Ic=null,t.j=null,t.i=null,t.f=null,t.cc=null,!t.N){n.u(0);break}return E(n,t.N.destroy(),5);case 5:t.N=null,T(n)}}))},i.zb=function(e,t){if(t=void 0===t||t,this.g==Fo)return Promise.reject(ho());var n={B:null,mimeType:null,startTime:null,qd:NaN,uri:null};n.B=e,zt()||(t=!1);var i=t?this.ta:this.Ea,r=ua(this.W,(function(){return{node:i,payload:n,Sa:!1}}));return r.pb=function(){},fo(r)},i.detach=function(){var e=this;if(this.g==Fo)return Promise.reject(ho());var t=ua(this.W,(function(){return{node:e.da,payload:{B:null,mimeType:null,startTime:null,qd:NaN,uri:null},Sa:!1}}));return t.pb=function(){},fo(t)},i.td=function(e){var t=this;if(e=void 0===e||e,this.g==Fo)return Promise.reject(ho());zt()||(e=!1);var n={B:null,mimeType:null,startTime:null,qd:NaN,uri:null},i=ua(this.W,(function(i){var r=i.B&&e?t.ta:i.B?t.Ea:t.da;return n.B=i.B,{node:r,payload:n,Sa:!1}}));return i.pb=function(){},fo(i)},i.load=function(e,t,n){var i=this;if(this.g==Fo)return Promise.reject(ho());this.dispatchEvent(Na(ko));var r={B:null,mimeType:null,startTime:null,qd:NaN,uri:null};r.uri=e,r.qd=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var a=function(e,t){if(!zt())return!0;var n=t.mimeType,i=t.uri||"";return n||(n={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[Qi(i)]),!!n&&""!=(t.B||Zt()).canPlayType(n)&&(!zt()||!(n in Zi)&&!(Qi(i)in Ji)||$t()&&e.i.streaming.useNativeHlsOnSafari)}(this,r)?this.Ca:this.J,o=ua(this.W,(function(e){return null==e.B?null:(r.B=e.B,{node:a,payload:r,Sa:!0})}));return this.f=new Oa,o.pb=function(){},new Promise((function(e,t){o.pc=function(){return t(new le(2,7,7002))},o.nc=function(){e(),i.dispatchEvent(Na(Ao))},o.Va=function(){return t(ho())},o.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=_a(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(_e("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay);var n=Ca(this.i,e,Ga(this));return ja(this),n},i.getConfiguration=function(){var e=Ga(this);return Ca(e,this.i,Ga(this)),e},i.Ve=function(){for(var e in this.i)delete this.i[e];Ca(this.i,Ga(this),Ga(this)),ja(this)},i.pe=function(){return this.g},i.te=function(){return this.a},i.Fb=function(){return this.N},i.Qc=function(){return this.xb},i.Dd=function(){return function(e,t){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];$.has(e)||($.add(e),Y.apply(W,c(n)))}("getAdManager","Shaka Player's ad features are currently in BETA and are NOT yet covered by semantic versioning compatibility guarantees.  The API may change at any time!"),this.I},i.S=function(){return this.o?this.o.presentationTimeline.S():!(!this.a||!this.a.src)&&1/0==this.a.duration},i.Ua=function(){return!!this.o&&this.o.presentationTimeline.Ua()},i.Ge=function(){if(this.o){var e=this.o.variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},i.jd=function(){if(this.o){var e=this.o.presentationTimeline;return{start:e.kb(),end:e.Fa()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.keySystem=function(){return ln(this.drmInfo())},i.drmInfo=function(){return this.h?this.h.c:null},i.Eb=function(){return this.h?this.h.Eb():1/0},i.Sc=function(){return!!this.D&&this.D.a==Yi},i.ve=function(){return this.a?this.A?this.A.b:1:0},i.ff=function(e){0==e?Y("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.A.set(e),this.g==Ho&&(this.j.playbackRateChanged(e),qr(this.c,1<Math.abs(e))))},i.ee=function(){this.g==jo&&this.A.set(1),this.g==Ho&&(this.A.set(1),this.j.playbackRateChanged(1),qr(this.c,!1))},i.Rc=function(){if(this.o){for(var e=this.c?this.c.b:null,t=[],n=u(this.o.variants),i=n.next();!i.done;i=n.next())if(Li(i=i.value)){var r=Ci(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map((function(e){return Ri(e)})):[]},i.lc=function(){if(this.o){for(var e=this.c?this.c.c:null,t=[],n=u(this.o.textStreams),i=n.next();!i.done;i=n.next()){var r=Ii(i=i.value);r.active=i==e,t.push(r)}return t}return this.a&&this.a.src&&this.a.textTracks?Ka(this).map((function(e){var t=xi(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t})):[]},i.Sd=function(e){if(this.o&&this.c){var t=this.o.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.c.c&&(Pa(this.f.a,t,!1),Xr(this.c,t),Ja(this),this.ca=t.language)}else if(this.a&&this.a.src&&this.a.textTracks){for(var n=(t=u(t=Ka(this))).next();!n.done;n=t.next())Di(n=n.value)==e.id?n.mode=this.T?"showing":"hidden":n.mode="disabled";Ja(this)}},i.We=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.o&&this.c){this.i.abr.enabled&&Y("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.o.variants.find((function(t){return t.id==e.id}));i&&Li(i)&&i!=this.c.b&&(La(this.f.a,i,!1),$r(this.c,i,t,n),Za(this),this.yb=new Ki(i),qa(this))}else if(this.a&&this.a.audioTracks){for(n=(t=u(t=Array.from(this.a.audioTracks))).next();!n.done;n=t.next())Di(n=n.value)==e.id&&(n.enabled=!0);Za(this)}},i.le=function(){return co(this.Rc())},i.De=function(){return co(this.lc())},i.ke=function(){return Array.from(uo(this.Rc()))},i.Ce=function(){return Array.from(uo(this.lc()))},i.kd=function(e,t){if(this.o&&this.v)this.yb=new Gi(e,t||"",0,""),$a(this);else if(this.a&&this.a.audioTracks){for(var n=Array.from(this.a.audioTracks),i=bi(e),r=null,a=null,o=(n=u(n)).next();!o.done;o=n.next()){var s=Ri(o=o.value);bi(s.language)==i&&(r=o,t?s.roles.includes(t)&&(a=o):0==s.roles.length&&(a=o))}a?(a.enabled=!0,Za(this)):r&&(r.enabled=!0,Za(this))}},i.ld=function(e,t){if(this.o&&this.v){this.ca=e,this.Zb=t||"";var n=Oi(this.o.textStreams,this.ca,this.Zb)[0]||null;n&&n!=this.c.c&&(Pa(this.f.a,n,!1),this.i.streaming.alwaysStreamText||this.Tc())&&(Xr(this.c,n),Ja(this))}else{var i=bi(e);(n=this.lc().find((function(e){return bi(e.language)==i&&(!t||e.roles.includes(t))})))&&this.Sd(n)}},i.Xe=function(e){if(this.o&&this.v){for(var t=null,n=u(this.o.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.yb=new Gi(t.language,"",0,e),$a(this))}},i.Tc=function(){var e=this.T;return this.H?this.H.h.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Ka(this).some((function(e){return"showing"==e.mode})):e},i.cf=function(e){if(e=!!e,this.T!=e){if(this.T=e,this.g==Ho)this.H.h.setTextVisibility(e),this.i.streaming.alwaysStreamText||(e?this.c.c||0<(e=Oi(this.o.textStreams,this.ca,this.Zb)).length&&(Xr(this.c,e[0]),Ja(this)):function(e){var t=e.a.get("text");t&&(aa(t),oa(t).catch((function(){})),e.a.delete("text")),e.c=null}(this.c));else if(this.a&&this.a.src&&this.a.textTracks)for(var t=Ka(this),n=(t=u(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");eo(this)}},i.xe=function(){if(!this.S())return null;var e=this.W.f,t=0;if(this.v)t=this.v.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.o?new Date(1e3*(this.o.presentationTimeline.f+t)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.Ed=function(){if(!this.S())return null;if(this.o)return new Date(1e3*this.o.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?null:e}return null},i.ic=function(){if(this.g==Ho)return this.H.ic();var e={total:[],audio:[],video:[],text:[]};return this.g==jo&&(e.total=xn(this.a.buffered)),e},i.getStats=function(){if(this.g!=Ho&&this.g!=jo)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Ya(this);var e=this.a;if(e.getVideoPlaybackQuality){e=e.getVideoPlaybackQuality();var t=this.f,n=Number(e.totalVideoFrames);t.J=Number(e.droppedVideoFrames),t.I=n,this.f.H=Number(e.corruptedVideoFrames)}e=this.h&&(e=this.h).H?e.H:NaN,this.f.D=e,this.g==Ho&&((e=this.c.b)&&(this.f.h=(this.A?this.A.b:1)*e.bandwidth),e&&e.video&&(t=this.f,n=e.video.height||NaN,t.M=e.video.width||NaN,t.j=n),this.S()&&(e=this.Ed().valueOf()+1e3*this.jd().end,this.f.m=(Date.now()-e)/1e3),this.o&&this.o.presentationTimeline&&(this.f.A=this.o.presentationTimeline.a),e=this.j.getBandwidthEstimate(),this.f.g=e);var i=this.f;e=i.M,t=i.j,n=i.h;for(var r=i.I,a=i.J,o=i.H,s=i.g,l=i.f,c=i.v,d=i.c,h=Ra(i.b,"playing"),p=Ra(i.b,"paused"),f=Ra(i.b,"buffering"),g=i.D,m=i.m,v=i.A,y=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=u(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(i.b),b=[],E=(i=u(i.a.a)).next();!E.done;E=i.next())E=E.value,b.push({timestamp:E.timestamp,id:E.id,type:E.type,fromAdaptation:E.fromAdaptation,bandwidth:E.bandwidth});return{width:e,height:t,streamBandwidth:n,decodedFrames:r,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,loadLatency:l,manifestTimeSeconds:c,drmTimeSeconds:d,playTime:h,pauseTime:p,bufferingTime:f,licenseTime:g,liveLatency:m,maxSegmentDuration:v,stateHistory:y,switchHistory:b}},i.addTextTrack=function(e,t,n,i,r,a){if(this.g==jo)throw Error("State error!");if(this.g!=Ho)throw Error("State error!");var o=this.o.presentationTimeline.getDuration();if(1/0==o)throw new le(1,4,4033);return e={id:this.vd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:kr(0,o,[e]),mimeType:i,codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},this.o.textStreams.push(e),Qa(this),Ii(e)},i.nd=function(e,t){this.xc.width=e,this.xc.height=t},i.hd=function(){if(this.g==Ho){var e=this.c;if(e.F.a)e=!1;else if(e.g)e=!1;else{for(var t=u(e.a.values()),n=t.next();!n.done;n=t.next())(n=n.value).Ib&&(n.Ib=!1,ra(e,n,.1));e=!0}}else e=!1;return e},i.qe=function(){return Y("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.o},i.re=function(){return this.ac},i.Vd=function(e){this.cc=e},i.gb=function(e){if(function(e,t,n){n.variants=n.variants.filter((function(n){if(e&&e.M&&!yn(e,n))return!1;var i=n.audio;return n=n.video,!(i&&!ti(i)||n&&!ti(n)||i&&t&&t.audio&&!wi(i,t.audio)||n&&t&&t.video&&!wi(n,t.video))})),n.textStreams=n.textStreams.filter((function(e){return Qn(Kt(e.mimeType,e.codecs))}))}(this.h,this.c?this.c.b:null,e),!e.variants.some(Li))throw new le(2,4,4032);for(var t=this.i.restrictions,n=this.xc,i=!1,r=u(e.variants),a=r.next();!a.done;a=r.next()){var o=(a=a.value).allowedByApplication;a.allowedByApplication=Si(a,t,n),o!=a.allowedByApplication&&(i=!0)}if(i&&this.c&&Qa(this),t=this.h?this.h.c:null)for(i=(n=u(e.variants)).next();!i.done;i=n.next())for(r=(i=u(((i=i.value).video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]))).next();!r.done;r=i.next())if((r=r.value).keySystem==t.keySystem)for(a=(r=u(r.initData||[])).next();!a.done;a=r.next())a=a.value,sn(this.h,a.initDataType,a.initData);so(this,e)},V("shaka.Player",Ma),Ma.prototype.setVideoContainer=Ma.prototype.Vd,Ma.prototype.getManifestParserFactory=Ma.prototype.re,Ma.prototype.getManifest=Ma.prototype.qe,Ma.prototype.retryStreaming=Ma.prototype.hd,Ma.prototype.setMaxHardwareResolution=Ma.prototype.nd,Ma.prototype.addTextTrack=Ma.prototype.addTextTrack,Ma.prototype.getStats=Ma.prototype.getStats,Ma.prototype.getBufferedInfo=Ma.prototype.ic,Ma.prototype.getPresentationStartTimeAsDate=Ma.prototype.Ed,Ma.prototype.getPlayheadTimeAsDate=Ma.prototype.xe,Ma.prototype.setTextTrackVisibility=Ma.prototype.cf,Ma.prototype.isTextTrackVisible=Ma.prototype.Tc,Ma.prototype.selectVariantsByLabel=Ma.prototype.Xe,Ma.prototype.selectTextLanguage=Ma.prototype.ld,Ma.prototype.selectAudioLanguage=Ma.prototype.kd,Ma.prototype.getTextLanguages=Ma.prototype.Ce,Ma.prototype.getAudioLanguages=Ma.prototype.ke,Ma.prototype.getTextLanguagesAndRoles=Ma.prototype.De,Ma.prototype.getAudioLanguagesAndRoles=Ma.prototype.le,Ma.prototype.selectVariantTrack=Ma.prototype.We,Ma.prototype.selectTextTrack=Ma.prototype.Sd,Ma.prototype.getTextTracks=Ma.prototype.lc,Ma.prototype.getVariantTracks=Ma.prototype.Rc,Ma.prototype.cancelTrickPlay=Ma.prototype.ee,Ma.prototype.trickPlay=Ma.prototype.ff,Ma.prototype.getPlaybackRate=Ma.prototype.ve,Ma.prototype.isBuffering=Ma.prototype.Sc,Ma.prototype.getExpiration=Ma.prototype.Eb,Ma.prototype.drmInfo=Ma.prototype.drmInfo,Ma.prototype.keySystem=Ma.prototype.keySystem,Ma.prototype.seekRange=Ma.prototype.jd,Ma.prototype.isAudioOnly=Ma.prototype.Ge,Ma.prototype.isInProgress=Ma.prototype.Ua,Ma.prototype.isLive=Ma.prototype.S,Ma.prototype.getAdManager=Ma.prototype.Dd,Ma.prototype.getAssetUri=Ma.prototype.Qc,Ma.prototype.getNetworkingEngine=Ma.prototype.Fb,Ma.prototype.getMediaElement=Ma.prototype.te,Ma.prototype.getLoadMode=Ma.prototype.pe,Ma.prototype.resetConfiguration=Ma.prototype.Ve,Ma.prototype.getConfiguration=Ma.prototype.getConfiguration,Ma.prototype.configure=Ma.prototype.configure,Ma.prototype.load=Ma.prototype.load,Ma.prototype.unload=Ma.prototype.td,Ma.prototype.detach=Ma.prototype.detach,Ma.prototype.attach=Ma.prototype.zb,Ma.probeSupport=function(){var e,t,n,i,r;return P((function(a){if(1==a.a)return E(a,function(){var e,t,n,i,r,a;return P((function(o){return 1==o.a?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],i=new Map,r=function(e){var t,r,a;return P((function(o){switch(o.a){case 1:return A(o,2),E(o,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=o.b,a=!!(r=t.getConfiguration().sessionTypes)&&r.includes("persistent-license"),Qt("Tizen 3")&&(a=!1),i.set(e,{persistentState:a}),E(o,t.createMediaKeys(),5);case 5:_(o,0);break;case 2:S(o),i.set(e,null),T(o)}}))},a=e.map((function(e){return r(e)})),E(o,Promise.all(a),2)):o.return(Vt(i))}))}(),2);e=a.b;var o={};if(zt()){for(var s in Zi)o[s]=!0;for(var l in Ji)o[l]=!0}s={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var c=(l=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!c.done;c=l.next())o[c=c.value]=zt()?!!Zi[c]:Yt(c);for(var d in s)o[d]=zt()?!!Ji[d]:Yt(s[d]);for(t=o,o={},s=(d=u('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(","))).next();!s.done;s=d.next())o[s=s.value]=zt()?!!Qn(s)||MediaSource.isTypeSupported(s)||Je(s):Yt(s),o[l=s.split(";")[0]]=o[l]||o[s];for(r in n={manifest:t,media:o,drm:e},i=Wo)n[r]=i[r]();return a.return(n)}))},Ma.isBrowserSupported=function(){if(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach))return!1;var t=Xt();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!zt()||Yt("application/x-mpegurl"))},Ma.setAdManagerFactory=function(e){zo=e},Ma.registerSupportPlugin=function(e,t){Wo[e]=t},Ma.prototype.destroy=Ma.prototype.destroy;var go="abrstatuschanged",mo="adaptation",vo="buffering",yo="drmsessionupdate",bo="emsg",Eo="error",To="expirationupdated",Ao="loaded",ko="loading",_o="manifestparsed",So="metadata",wo="onstatechange",Co="onstateidle",Io="ratechange",Do="streaming",Ro="textchanged",xo="texttrackvisibility",Lo="timelineregionadded",Po="timelineregionenter",Oo="timelineregionexit",Mo="trackschanged",No="unloading",Bo="variantchanged",Uo={nf:go,pf:mo,qf:vo,rf:yo,tf:bo,Error:Eo,uf:To,wf:"largegap",xf:Ao,yf:ko,zf:_o,Metadata:So,Af:wo,Bf:Co,Cf:Io,Df:Do,Ef:Ro,Ff:xo,Gf:Lo,Hf:Po,If:Oo,Jf:Mo,Kf:No,Lf:Bo},Fo=0,Vo=1,Ho=2,jo=3;Ma.LoadMode={DESTROYED:Fo,NOT_LOADED:Vo,MEDIA_SOURCE:Ho,SRC_EQUALS:jo},Ma.version="v3.0.7";var Ko=["3","0"];Ce=new function(e){this.a=e,this.c=Se,this.b=we}(new ke(Number(Ko[0]),Number(Ko[1])));var Go=["output-restricted","internal-error"],Wo={},zo=null;function Yo(){this.a=[],this.f=this.b=this.c=0}function qo(e,t){var n=this;this.c=e,this.a=t,this.f=!1,this.g=this.a.getVolume(),this.b=new Pt,this.b.l(this.a,google.ima.AdEvent.Type.PAUSED,(function(){n.f=!0})),this.b.l(this.a,google.ima.AdEvent.Type.RESUMED,(function(){n.f=!1}))}function $o(e,t,n,i){var r=this;this.h=e,this.a=t,this.m=NaN,this.f=i,this.j=null,this.b=new Pt,google.ima.settings.setLocale(n),(e=new google.ima.AdDisplayContainer(this.h,this.a)).initialize(),this.g=new google.ima.AdsLoader(e),this.g.getSettings().setPlayerType("shaka-player"),this.g.getSettings().setPlayerVersion("v3.0.7"),this.c=null,this.b.ha(this.g,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){!function(e,t){e.f(new dt("ads-loaded",{loadTime:Date.now()/1e3-e.m})),e.c=t.getAdsManager(e.a),e.f(new dt("ima-ad-manager-loaded",{imaAdsManager:e.c}));var n=e.c.getCuePoints();if(n.length){for(var i=[],r=(n=u(n)).next();!r.done;r=n.next())i.push(new ns(r.value));e.f(new dt("ad-cue-points-changed",{cuepoints:i}))}!function(e){e.b.l(e.c,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){Xo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){Qo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.STARTED,(function(t){Qo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(t){e.f(new dt("ad-first-quartile",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.MIDPOINT,(function(t){e.f(new dt("ad-midpoint",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(t){e.f(new dt("ad-third-quartile",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.COMPLETE,(function(t){e.f(new dt("ad-complete",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){Zo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){Zo(e,t)})),e.b.l(e.c,google.ima.AdEvent.Type.SKIPPED,(function(t){e.f(new dt("ad-skipped",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(t){e.f(new dt("ad-volume-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.VOLUME_MUTED,(function(t){e.f(new dt("ad-muted",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.PAUSED,(function(t){e.j.f=!0,e.f(new dt("ad-paused",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.RESUMED,(function(t){e.j.f=!1,e.f(new dt("ad-resumed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(t){e.f(new dt("ad-skip-state-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.CLICK,(function(){e.f(new dt("ad-clicked"))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_PROGRESS,(function(t){e.f(new dt("ad-progress",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_BUFFERING,(function(t){e.f(new dt("ad-buffering",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.IMPRESSION,(function(t){e.f(new dt("ad-impression",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.DURATION_CHANGE,(function(t){e.f(new dt("ad-duration-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.USER_CLOSE,(function(t){e.f(new dt("ad-closed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LOADED,(function(t){e.f(new dt("ad-loaded",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){e.f(new dt("all-ads-completed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(t){e.f(new dt("ad-linear-changed",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_METADATA,(function(t){e.f(new dt("ad-metadata",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.LOG,(function(t){e.f(new dt("ad-recoverable-error",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.AD_BREAK_READY,(function(t){e.f(new dt("ad-break-ready",{originalEvent:t}))})),e.b.l(e.c,google.ima.AdEvent.Type.INTERACTION,(function(t){e.f(new dt("ad-interaction",{originalEvent:t}))}))}(e);try{e.c.init(e.a.offsetWidth,e.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.b.l(e.a,"loadeddata",(function(){e.c.resize(e.a.offsetWidth,e.a.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),e.c.start()}catch(t){Zo(e,null)}}(r,e)})),this.b.l(this.g,google.ima.AdEvent.Type.AD_ERROR,(function(e){Xo(r,e)})),this.a.onended=function(){r.g.contentComplete()}}function Xo(e,t){t.getError(),Zo(e,null),e.f(new dt("ad-cue-points-changed",{cuepoints:[]}))}function Qo(e,t){var n=t.getAd();e.j=new qo(n,e.c),e.f(new dt("ad-started",{ad:e.j,sdkAdObject:n,originalEvent:t})),e.h.setAttribute("ad-active","true"),e.a.pause()}function Zo(e,t){e.f(new dt("ad-stopped",{originalEvent:t})),e.h.removeAttribute("ad-active"),e.a.play()}function Jo(e,t){this.c=e,this.b=null,this.a=t}function es(e,t,n,i){var r=this;this.v=e,this.a=t,this.g=null,this.H=NaN,this.f=i,this.D=!1,this.A=this.h=this.j=null,this.m="",this.b=new Pt,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.c=new google.ima.dai.api.StreamManager(this.a,this.v,e),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.f(new dt("ads-loaded",{loadTime:Date.now()/1e3-e.H}));var n=t.getStreamData().url;e.g.resolve(n),e.g=null,e.D||e.b.l(e.a,"seeked",(function(){var t=e.a.currentTime;if(0!=t){e.c.streamTimeForContentTime(t);var n=e.c.previousCuePointForStreamTime(t);n&&!n.played&&(e.j=t,e.a.currentTime=n.start)}}))}(r,e)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.m.length?r.g.resolve(r.m):r.g.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.g=null})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.h=new Jo(e,r.a),r.A&&(r.h.b=r.A),r.f(new dt("ad-started",{ad:r.h})),r.v.setAttribute("ad-active","true")})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.v.removeAttribute("ad-active");var e=r.a.currentTime;r.j&&r.j>e&&(r.a.currentTime=r.j,r.j=null)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.A=e.getStreamData().adProgressData,r.h&&(r.h.b=r.A)})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.f(new dt("ad-first-quartile"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.f(new dt("ad-midpoint"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.f(new dt("ad-third-quartile"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.f(new dt("ad-complete")),r.f(new dt("ad-stopped")),r.v.removeAttribute("ad-active"),r.h=null})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.f(new dt("ad-skipped")),r.f(new dt("ad-stopped"))})),this.b.l(this.c,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=u(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push(new ns(n.start,n.end));r.f(new dt("ad-cue-points-changed",{cuepoints:e}))}))}function ts(){pt.call(this),this.a=this.b=null,this.f=new Yo,this.c=navigator.language}function ns(e,t){this.start=e,this.end=void 0===t?null:t}function is(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof dt){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=u(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=u(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},i=(n=u(xn(t))).next();!i.done;i=n.next()){var a=(i=i.value).end;r.start.push(i.start),r.end.push(a)}else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function rs(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;return n}))}(i=qo.prototype).getDuration=function(){return this.c.getDuration()},i.getRemainingTime=function(){return this.a.getRemainingTime()},i.isPaused=function(){return this.f},i.isSkippable=function(){return 0<=this.c.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.c.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.a.getAdSkippableState()},i.skip=function(){return this.a.skip()},i.pause=function(){return this.a.pause()},i.play=function(){return this.a.resume()},i.getVolume=function(){return this.a.getVolume()},i.setVolume=function(e){return this.a.setVolume(e)},i.isMuted=function(){return 0==this.a.getVolume()},i.resize=function(e,t){this.a.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.g=this.getVolume(),this.setVolume(0)):this.setVolume(this.g)},i.getSequenceLength=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.a=this.c=null},V("shaka.ads.ClientSideAd",qo),qo.prototype.release=qo.prototype.release,qo.prototype.getPositionInSequence=qo.prototype.getPositionInSequence,qo.prototype.getSequenceLength=qo.prototype.getSequenceLength,qo.prototype.setMuted=qo.prototype.setMuted,qo.prototype.resize=qo.prototype.resize,qo.prototype.isMuted=qo.prototype.isMuted,qo.prototype.setVolume=qo.prototype.setVolume,qo.prototype.getVolume=qo.prototype.getVolume,qo.prototype.play=qo.prototype.play,qo.prototype.pause=qo.prototype.pause,qo.prototype.skip=qo.prototype.skip,qo.prototype.canSkipNow=qo.prototype.canSkipNow,qo.prototype.getTimeUntilSkippable=qo.prototype.getTimeUntilSkippable,qo.prototype.isSkippable=qo.prototype.isSkippable,qo.prototype.isPaused=qo.prototype.isPaused,qo.prototype.getRemainingTime=qo.prototype.getRemainingTime,qo.prototype.getDuration=qo.prototype.getDuration,$o.prototype.stop=function(){this.c&&this.c.stop(),this.h&&ga(this.h)},(i=Jo.prototype).getDuration=function(){return this.b?this.b.duration:-1},i.getRemainingTime=function(){return this.b?this.b.duration-this.b.currentTime:-1},i.isPaused=function(){return this.a.paused},i.isSkippable=function(){return this.c.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.c.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.a.currentTime+=this.getRemainingTime()},i.pause=function(){return this.a.pause()},i.play=function(){return this.a.play()},i.getVolume=function(){return this.a.volume},i.setVolume=function(e){this.a.volume=e},i.isMuted=function(){return this.a.muted},i.resize=function(){},i.setMuted=function(e){this.a.muted=e},i.getSequenceLength=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.c.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.a=this.b=this.c=null},V("shaka.ads.ServerSideAd",Jo),Jo.prototype.release=Jo.prototype.release,Jo.prototype.getPositionInSequence=Jo.prototype.getPositionInSequence,Jo.prototype.getSequenceLength=Jo.prototype.getSequenceLength,Jo.prototype.setMuted=Jo.prototype.setMuted,Jo.prototype.resize=Jo.prototype.resize,Jo.prototype.isMuted=Jo.prototype.isMuted,Jo.prototype.setVolume=Jo.prototype.setVolume,Jo.prototype.getVolume=Jo.prototype.getVolume,Jo.prototype.play=Jo.prototype.play,Jo.prototype.pause=Jo.prototype.pause,Jo.prototype.skip=Jo.prototype.skip,Jo.prototype.canSkipNow=Jo.prototype.canSkipNow,Jo.prototype.getTimeUntilSkippable=Jo.prototype.getTimeUntilSkippable,Jo.prototype.isSkippable=Jo.prototype.isSkippable,Jo.prototype.isPaused=Jo.prototype.isPaused,Jo.prototype.getRemainingTime=Jo.prototype.getRemainingTime,Jo.prototype.getDuration=Jo.prototype.getDuration,es.prototype.stop=function(){this.c.reset(),this.m="",this.j=null},es.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.c.onTimedMetadata(t)}},m(ts,pt),(i=ts.prototype).setLocale=function(e){this.c=e},i.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new le(2,10,1e4);this.b=new $o(t,n,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.f.a.push(e.loadTime);break;case"ad-started":i.f.c++;break;case"ad-complete":i.f.b++;break;case"ad-skipped":i.f.f++}i.dispatchEvent(e)}))},i.onAssetUnload=function(){this.b&&this.b.stop(),this.dispatchEvent(new dt("ad-stopped")),this.f=new Yo},i.requestClientSideAds=function(e){if(!this.b)throw new le(1,10,10001);var t=this.b;t.m=Date.now()/1e3,t.g.requestAds(e)},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new le(2,10,10002);this.a=new es(t,n,this.c,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.f.a.push(e.loadTime);break;case"ad-started":i.f.c++;break;case"ad-complete":i.f.b++;break;case"ad-skipped":i.f.f++}i.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.a)throw new le(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="Shaka Player",e.adTagParameters.mpv="v3.0.7";var i=t;return(n=this.a).g?n=Promise.reject(new le(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.D=!0),n.g=new Me,n.c.requestStream(e),n.m=i||"",n.H=Date.now()/1e3,n=n.g),n},i.replaceServerSideAdTagParameters=function(e){if(!this.a)throw new le(1,10,10003);(e.mpt||e.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v3.0.7",this.a.c.replaceAdTagParameters(e)},i.getStats=function(){var e=this.f;return{loadTimes:e.a,started:e.c,playedCompletely:e.b,skipped:e.f}},i.onDashTimedMetadata=function(e){if(this.a&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.a.c.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.a&&this.a.c.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.a&&this.a.onCueMetadataChange(e)},V("shaka.ads.AdManager",ts),ts.prototype.onCueMetadataChange=ts.prototype.onCueMetadataChange,ts.prototype.onHlsTimedMetadata=ts.prototype.onHlsTimedMetadata,ts.prototype.onDashTimedMetadata=ts.prototype.onDashTimedMetadata,ts.prototype.getStats=ts.prototype.getStats,ts.prototype.replaceServerSideAdTagParameters=ts.prototype.replaceServerSideAdTagParameters,ts.prototype.requestServerSideStream=ts.prototype.requestServerSideStream,ts.prototype.initServerSide=ts.prototype.initServerSide,ts.prototype.requestClientSideAds=ts.prototype.requestClientSideAds,ts.prototype.onAssetUnload=ts.prototype.onAssetUnload,ts.prototype.initClientSide=ts.prototype.initClientSide,ts.prototype.setLocale=ts.prototype.setLocale,ts.ADS_LOADED="ads-loaded",ts.AD_STARTED="ad-started",ts.AD_FIRST_QUARTILE="ad-first-quartile",ts.AD_MIDPOINT="ad-midpoint",ts.AD_THIRD_QUARTILE="ad-third-quartile",ts.AD_COMPLETE="ad-complete",ts.AD_STOPPED="ad-stopped",ts.AD_SKIPPED="ad-skipped",ts.AD_VOLUME_CHANGED="ad-volume-changed",ts.AD_MUTED="ad-muted",ts.AD_PAUSED="ad-paused",ts.AD_RESUMED="ad-resumed",ts.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",ts.CUEPOINTS_CHANGED="ad-cue-points-changed",ts.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",ts.AD_CLICKED="ad-clicked",ts.AD_PROGRESS="ad-progress",ts.AD_BUFFERING="ad-buffering",ts.AD_IMPRESSION="ad-impression",ts.AD_DURATION_CHANGED="ad-duration-changed",ts.AD_CLOSED="ad-closed",ts.AD_LOADED="ad-loaded",ts.ALL_ADS_COMPLETED="all-ads-completed",ts.AD_LINEAR_CHANGED="ad-linear-changed",ts.AD_METADATA="ad-metadata",ts.AD_RECOVERABLE_ERROR="ad-recoverable-error",ts.AD_BREAK_READY="ad-break-ready",ts.AD_INTERACTION="ad-interaction",zo=function(){return new ts};var as="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),os="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ss=["loop","playbackRate"],ls=["pause","play"],us={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},cs={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},ds=[["getConfiguration","configure"]],hs=[["isTextTrackVisible","setTextTrackVisibility"]],ps="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),fs=["attach","detach","load","unload"];function gs(e,t,n,i,r,a){var o=this;this.T=e,this.f=new nt(t),this.W=n,this.m=!1,this.D=i,this.M=r,this.I=a,this.b=this.h=!1,this.J="",this.j=null,this.v=function(){return Es(o)},this.A=function(e,t){var n=rs(t);switch(n.type){case"event":var i=n.targetName;n=new dt((n=n.event).type,n),o.D(i,n);break;case"update":for(var r in i=n.update)for(var a in n=o.a[r]||{},i[r])n[a]=i[r][a];o.m&&(o.W(),o.m=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=o.c[r],delete o.c[r],a)if(n){for(i in r=new le(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}},this.a={video:{},player:{}},this.H=0,this.c={},this.g=null,ws.add(this)}function ms(e,t,n){Ss=n,n.addUpdateListener(e.v),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.A),Es(e),As(e,{type:"init",initState:t,appData:e.j}),e.g.resolve()}function vs(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.g.reject(new le(2,8,n,t))}function ys(e,t){var n=e.I();e.g=new Me,e.m=!0,ms(e,n,t)}function bs(e){var t=Ss;t.removeUpdateListener(e.v),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.A)}function Es(e){var t=!!Ss&&"connected"==Ss.status;if(e.b&&!t){for(var n in e.M(),e.a)e.a[n]={};Ts(e)}e.b=t,e.J=t?Ss.receiver.friendlyName:"",e.f.Qb()}function Ts(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new le(1,7,7e3))}}function As(e,t){var n=is(t),i=Ss;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),q)}catch(t){throw i=new dt("error",{detail:n=new le(2,8,8005,t)}),e.D("player",i),e.hb(),n}}(i=gs.prototype).destroy=function(){return ws.delete(this),Ts(this),Ss&&bs(this),this.f&&(this.f.stop(),this.f=null),this.M=this.D=null,this.b=this.h=!1,this.A=this.v=this.g=this.c=this.a=this.j=null,Promise.resolve()},i.fa=function(){return this.b},i.fd=function(){return this.J},i.init=function(){if(e.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.T.length){this.h=!0,this.f.Qb();var t=new chrome.cast.SessionRequest(this.T);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(ws),n=t.next();!n.done;n=t.next())ys(n.value,e)}),(function(e){for(var t=u(ws),n=t.next();!n.done;n=t.next())n=n.value,_s="available"==e,n.f.Qb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),_s&&this.f.R(ks),(t=Ss)&&t.status!=chrome.cast.SessionStatus.STOPPED?ys(this,t):Ss=null}},i.md=function(e){this.j=e,this.b&&As(this,{type:"appData",appData:this.j})},i.cast=function(e){var t=this;return P((function(n){if(!t.h)throw new le(1,8,8e3);if(!_s)throw new le(1,8,8001);if(t.b)throw new le(1,8,8002);return t.g=new Me,chrome.cast.requestSession((function(n){return ms(t,e,n)}),(function(e){return vs(t,e)})),E(n,t.g,0)}))},i.hb=function(){if(this.b){if(Ts(this),Ss){bs(this);try{Ss.stop((function(){}),(function(){}))}catch(e){}Ss=null}Es(this)}},i.get=function(e,t){var n=this;if("video"==e){if(ls.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Pd.apply(n,[e,t].concat(c(r)))}}else if("player"==e){if(cs[t]&&!this.get("player","isLive")())return function(){};if(ps.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Pd.apply(n,[e,t].concat(c(r)))};if(fs.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Se.apply(n,[e,t].concat(c(r)))};if(us[t])return function(){return n.a[e][t]}}return this.a[e][t]},i.set=function(e,t,n){this.a[e][t]=n,As(this,{type:"set",targetName:e,property:t,value:n})},i.Pd=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];As(this,{type:"call",targetName:e,methodName:t,args:i})},i.Se=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new Me;var a=this.H.toString();this.H++,this.c[a]=r;try{As(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:a})}catch(e){r.reject(e)}return r};var ks=.02,_s=!1,Ss=null,ws=new Set;function Cs(e,t,n){pt.call(this);var i=this;this.f=e,this.c=t,this.b=this.j=this.g=this.m=this.h=null,this.A=n,this.v=new Map,this.a=new gs(n,(function(){return Rs(i)}),(function(){return xs(i)}),(function(e,t){return Os(i,e,t)}),(function(){return Ls(i)}),(function(){return Ds(i)})),function(e){e.a.init(),e.b=new Pt;for(var t=u(as),n=t.next();!n.done;n=t.next())e.b.l(e.f,n.value,(function(t){e.a.fa()||(t=new dt(t.type,t),e.g.dispatchEvent(t))}));for(var i in Uo)e.b.l(e.c,Uo[i],(function(t){e.a.fa()||e.j.dispatchEvent(t)}));for(var r in e.h={},t={},e.f)t.tb=r,Object.defineProperty(e.h,t.tb,{configurable:!1,enumerable:!0,get:function(t){return function(){return Ps(e,t.tb)}}(t),set:function(t){return function(n){var i=t.tb;e.a.fa()?e.a.set("video",i,n):e.f[i]=n}}(t)}),t={tb:t.tb};e.m={},Is(e,(function(t){Object.defineProperty(e.m,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.v.has(t)&&(t=e.v.get(t)),"addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.h};if("getSharedConfiguration"==t)return e.a.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.c.Fb()};if("getAdManager"==t)return function(){return e.c.Dd()};if("setVideoContainer"==t)return function(t){return e.c.Vd(t)};if(e.a.fa()){if("getManifest"==t||"drmInfo"==t)return function(){return Y(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return Y(t+"() does not work while casting!"),Promise.resolve()}}return e.a.fa()&&0==Object.keys(e.a.a.video).length&&us[t]||!e.a.fa()?e.c[t].bind(e.c):e.a.get("player",t)}(e,t)}})})),function(e){var t=new Map;Is(e,(function(n,i){if(t.has(i)){var r=t.get(i);n.length<r.length?e.v.set(n,r):e.v.set(r,n)}else t.set(i,n)}))}(e),e.g=new pt,e.g.$b=e.h,e.j=new pt,e.j.$b=e.m}(this)}function Is(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.c,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=u(Object.getOwnPropertyNames(a)),l=s.next();!l.done;l=s.next())n(l=l.value)&&(r.add(l),t(l,i[l]));a=Object.getPrototypeOf(a)}}function Ds(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.c.Qc(),startTime:null};e.f.pause();for(var n=u(ss),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.f[i];for(e.f.ended||(t.startTime=e.f.currentTime),i=(n=u(ds)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.c[r[0]](),t.player[i]=r}for(i=(n=u(hs)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.c[r[0]](),t.playerAfterLoad[i]=r;return t}function Rs(e){var t=new dt("caststatuschanged");e.dispatchEvent(t)}function xs(e){var t=new dt(e.h.paused?"pause":"play");e.g.dispatchEvent(t)}function Ls(e){for(var t=u(ds),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.a.get("player",i[0])(),e.c[n](i)}var r=e.a.get("player","getAssetUri")();n=e.a.get("video","ended"),t=Promise.resolve();var a=e.f.autoplay;i=null,n||(i=e.a.get("video","currentTime")),r&&(e.f.autoplay=!1,t=e.c.load(r,i));var o={};for(i=(n=u(ss)).next();!i.done;i=n.next())i=i.value,o[i]=e.a.get("video",i);t.then((function(){if(e.f){for(var t=u(ss),n=t.next();!n.done;n=t.next())n=n.value,e.f[n]=o[n];for(n=(t=u(hs)).next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.a.get("player",i[0])(),e.c[n](i)}e.f.autoplay=a,r&&e.f.play()}}),(function(t){t=new dt(Eo,{detail:t}),e.c.dispatchEvent(t)}))}function Ps(e,t){if("addEventListener"==t)return function(t,n,i){return e.g.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.g.removeEventListener(t,n,i)};if(e.a.fa()&&0==Object.keys(e.a.a.video).length){var n=e.f[t];if("function"!=typeof n)return n}return e.a.fa()?e.a.get("video",t):("function"==typeof(n=e.f[t])&&(n=n.bind(e.f)),n)}function Os(e,t,n){e.a.fa()&&("video"==t?e.g.dispatchEvent(n):"player"==t&&e.j.dispatchEvent(n))}function Ms(e,t,n,i){pt.call(this);var r=this;this.a=e,this.c=t,this.b=new Pt,this.J={video:e,player:t},this.D=n||function(){},this.M=i||function(e){return e},this.f=null,this.H=!1,this.j=!0,this.h=0,this.A=!1,this.v=!0,this.m=this.g=null,this.I=new nt((function(){Fs(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Ns(e)},t.onSenderDisconnected=function(){return Ns(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Ks(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.g),Ks(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.g)},e.m=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.m.onMessage=function(t){return function(e,t){var n=rs(t.data);switch(n.type){case"PLAY":e.a.play(),Gs(e);break;case"PAUSE":e.a.pause(),Gs(e);break;case"SEEK":var i=n.currentTime,r=n.resumeState;null!=i&&(e.a.currentTime=Number(i)),r&&"PLAYBACK_START"==r?(e.a.play(),Gs(e)):r&&"PLAYBACK_PAUSE"==r&&(e.a.pause(),Gs(e));break;case"STOP":e.c.td().then((function(){e.c&&Gs(e)}));break;case"GET_STATUS":Hs(e,Number(n.requestId));break;case"VOLUME":i=(r=n.volume).level,r=r.muted;var a=e.a.volume,o=e.a.muted;null!=i&&(e.a.volume=Number(i)),null!=r&&(e.a.muted=r),a==e.a.volume&&o==e.a.muted||Gs(e);break;case"LOAD":e.h=0,e.A=!1,e.v=!1,i=n.media,r=n.currentTime,a=e.M(i.contentId),o=n.autoplay||!0,e.D(i.customData),o&&(e.a.autoplay=!0),e.c.load(a,r).then((function(){e.c&&Hs(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),Ks(e,{requestId:Number(n.requestId),type:i},e.m)}));break;default:Ks(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.m)}}(e,t)},e.g=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.g.onMessage=function(t){return function(e,t){var n=rs(t.data);switch(n.type){case"init":e.h=0,e.A=!1,e.v=!0,function(e,t,n){var i,r,a,o,s,l,u,c,d;P((function(h){switch(h.a){case 1:for(i in t.player)r=t.player[i],e.c[i](r);return e.D(n),a=e.a.autoplay,t.manifest?(e.a.autoplay=!1,A(h,5),E(h,e.c.load(t.manifest,t.startTime),7)):E(h,Promise.resolve(),3);case 7:_(h,3);break;case 5:return o=S(h),s=new dt(Eo,{detail:o}),e.c.dispatchEvent(s),h.return();case 3:if(!e.c)return h.return();for(l in t.video)u=t.video[l],e.a[l]=u;for(c in t.playerAfterLoad)d=t.playerAfterLoad[c],e.c[c](d);e.a.autoplay=a,t.manifest&&(e.a.play(),Gs(e)),T(h)}}))}(e,n.initState,n.appData),Fs(e);break;case"appData":e.D(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){var a=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){a.setSystemVolumeLevel(n);break}if("muted"==r){a.setSystemVolumeMuted(n);break}}e.J[i][r]=n;break;case"call":(i=e.J[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.h=0,e.A=!1);var o=n.id,s=t.senderId;n=(a=e.J[i])[r].apply(a,n.args),"player"==i&&"load"==r&&(n=n.then((function(){e.v=!0}))),n.then((function(){return js(e,s,o,null)}),(function(t){return js(e,s,o,t)}))}}(e,t)},t.start();for(var n=(t=u(as)).next();!n.done;n=t.next())e.b.l(e.a,n.value,(function(t){return Us(e,"video",t)}));for(var i in Uo)e.b.l(e.c,Uo[i],(function(t){return Us(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.c.nd(3840,2160):e.c.nd(1920,1080),e.b.l(e.a,"loadeddata",(function(){e.A=!0})),e.b.l(e.c,"loading",(function(){e.j=!1,Bs(e)})),e.b.l(e.a,"playing",(function(){e.j=!1,Bs(e)})),e.b.l(e.a,"pause",(function(){Bs(e)})),e.b.l(e.c,"unloading",(function(){e.j=!0,Bs(e)})),e.b.l(e.a,"ended",(function(){new nt((function(){e.a&&e.a.ended&&(e.j=!0,Bs(e))})).R(zs)}))}(this)}function Ns(e){e.h=0,e.v=!0,e.H=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Bs(e)}function Bs(e){var t;P((function(n){return 1==n.a?E(n,Promise.resolve(),2):e.c?(t=new dt("caststatuschanged"),e.dispatchEvent(t),Vs(e)||Gs(e),void T(n)):n.return()}))}function Us(e,t,n){e.c&&(Fs(e),Ks(e,{type:"event",targetName:t,event:n},e.g))}function Fs(e){e.I.R(Ws);for(var t={video:{},player:{}},n=u(os),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.a[i];if(e.c.S())for(var r in cs)0==e.h%cs[r]&&(t.player[r]=e.c[r]());for(var a in us)0==e.h%us[a]&&(t.player[a]=e.c[a]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.A&&(e.h+=1),Ks(e,{type:"update",update:t},e.g),Vs(e)}function Vs(e){return!(!e.v||!e.a.duration&&!e.c.S()||(Hs(e),e.v=!1,0))}function Hs(e,t){var n={contentId:e.c.Qc(),streamType:e.c.S()?"LIVE":"BUFFERED",contentType:""};e.c.S()||(n.duration=e.a.duration),e.f&&(n.metadata=e.f),Gs(e,void 0===t?0:t,n)}function js(e,t,n,i){e.c&&Ks(e,{type:"asyncComplete",id:n,error:i},e.g,t)}function Ks(e,t,n,i){e.H&&(e=is(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Gs(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.a.playbackRate,playerState:e.j?Ys:e.c.Sc()?$s:e.a.paused?Xs:qs,currentTime:e.a.currentTime,supportedMediaCommands:63,volume:{level:e.a.volume,muted:e.a.muted}};n&&(i.media=n),Ks(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.m)}e.__onGCastApiAvailable=function(e){if(e)for(var t=(e=u(ws)).next();!t.done;t=e.next())t.value.init()},m(Cs,pt),(i=Cs.prototype).destroy=function(e){return e&&this.a.hb(),this.b&&(this.b.release(),this.b=null),e=[],this.c&&(e.push(this.c.destroy()),this.c=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.m=this.h=this.f=null,Promise.all(e)},i.Ee=function(){return this.h},i.we=function(){return this.m},i.de=function(){return this.a.h&&_s},i.fa=function(){return this.a.fa()},i.fd=function(){return this.a.fd()},i.cast=function(){var e,t=this;return P((function(n){return 1==n.a?(e=Ds(t),E(n,t.a.cast(e),2)):t.c?E(n,t.c.td(),0):n.return()}))},i.md=function(e){this.a.md(e)},i.df=function(){!function(e){if(e.b){var t=e.I();chrome.cast.requestSession((function(n){return ms(e,t,n)}),(function(t){return vs(e,t)}))}}(this.a)},i.hb=function(){this.a.hb()},i.fe=function(e){var t=this;return P((function(n){if(1==n.a)return e==t.A?n.return():(t.A=e,t.a.hb(),E(n,t.a.destroy(),2));t.a=null,t.a=new gs(e,(function(){return Rs(t)}),(function(){return xs(t)}),(function(e,n){return Os(t,e,n)}),(function(){return Ls(t)}),(function(){return Ds(t)})),t.a.init(),T(n)}))},V("shaka.cast.CastProxy",Cs),Cs.prototype.changeReceiverId=Cs.prototype.fe,Cs.prototype.forceDisconnect=Cs.prototype.hb,Cs.prototype.suggestDisconnect=Cs.prototype.df,Cs.prototype.setAppData=Cs.prototype.md,Cs.prototype.cast=Cs.prototype.cast,Cs.prototype.receiverName=Cs.prototype.fd,Cs.prototype.isCasting=Cs.prototype.fa,Cs.prototype.canCast=Cs.prototype.de,Cs.prototype.getPlayer=Cs.prototype.we,Cs.prototype.getVideo=Cs.prototype.Ee,Cs.prototype.destroy=Cs.prototype.destroy,m(Ms,pt),(i=Ms.prototype).isConnected=function(){return this.H},i.He=function(){return this.j},i.$e=function(e){this.f=e},i.ie=function(){this.f=null},i.af=function(e){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.title=e},i.Ze=function(e){this.f||(this.f={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.f.images=[{url:e}]},i.Ye=function(e){this.f||(this.f={}),this.f.artist=e,this.f.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return P((function(n){if(1==n.a)return t.b&&(t.b.release(),t.b=null),e=[],t.c&&(e.push(t.c.destroy()),t.c=null),t.I&&(t.I.stop(),t.I=null),t.a=null,t.J=null,t.D=null,t.H=!1,t.j=!0,t.g=null,t.m=null,E(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),T(n)}))},V("shaka.cast.CastReceiver",Ms),Ms.prototype.destroy=Ms.prototype.destroy,Ms.prototype.setContentArtist=Ms.prototype.Ye,Ms.prototype.setContentImage=Ms.prototype.Ze,Ms.prototype.setContentTitle=Ms.prototype.af,Ms.prototype.clearContentMetadata=Ms.prototype.ie,Ms.prototype.setContentMetadata=Ms.prototype.$e,Ms.prototype.isIdle=Ms.prototype.He,Ms.prototype.isConnected=Ms.prototype.isConnected;var Ws=.5,zs=5,Ys="IDLE",qs="PLAYING",$s="BUFFERING",Xs="PAUSED";function Qs(e){var t=this;this.a=[],this.b=[],this.data=[],(new Ur).box("moov",Fr).ea("pssh",(function(e){if(!(1<e.version)){var n=ae(e.reader.P,-12,e.size);if(t.data.push(n),t.a.push(Xe(e.reader.Wa(16))),0<e.version){n=e.reader.K();for(var i=(n=u(J(n))).next();!i.done;i=n.next())i=Xe(e.reader.Wa(16)),t.b.push(i)}}})).parse(e)}function Zs(e,t){var n=el(e,t);return 1!=n.length?null:n[0]}function Js(e,t,n){return 1!=(e=tl(e,t,n)).length?null:e[0]}function el(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName==t}))}function tl(e,t,n){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))}function nl(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function il(e){return Array.from(e.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}))?e.textContent.trim():null}function rl(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r}function al(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function ol(e){return e&&(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function sl(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function ll(e){return 0==(e=Number(e))%1?e:null}function ul(e){return 0==(e=Number(e))%1&&0<e?e:null}function cl(e){return 0==(e=Number(e))%1&&0<=e?e:null}function dl(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e}function hl(e,t){var n=new DOMParser,i=null,r=null;try{r=n.parseFromString(e,"text/xml")}catch(e){}return r&&r.documentElement.tagName==t&&(i=r.documentElement),i&&0<i.getElementsByTagName("parsererror").length?null:i}function pl(e,t){try{return hl(Ue(e),t)}catch(e){return null}}function fl(e,t){var n=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())(n=gl(n.value))&&t.push(n);return t}(e),i=null,r=[],a=[],o=new Set(n.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new le(2,4,4010);if(t||(a=n.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.Rd||(i=e.init||i,!1)})),a.length&&(r=function(e,t){for(var n=[],i=u(t),r=i.next();!r.done;r=i.next()){r=r.value;var a=ml.get(r.Rd);if(a){var o;if(o=Js(r.node,"urn:microsoft:playready","pro")){o=qe(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=o.length,c=s.length+16+l,d=new Uint8Array(c),h=oe(d),p=0;h.setUint32(p,c),p+=4,h.setUint32(p,1886614376),p+=4,h.setUint32(p,0),p+=4,d.set(s,p),p+=s.length,h.setUint32(p,l),p+=4,d.set(o,p),o=[{initData:d,initDataType:"cenc",keyId:r.keyId}]}else o=null;o=Pe(a,r.init||e||o),(a=vl.get(a))&&(o.licenseServerUri=a(r)),n.push(o)}}return n}(i,a),0==r.length&&(r=[Pe("",i)]))),n.length&&(t||!a.length))for(r=[],a=(n=u(ml.values())).next();!a.done;a=n.next())"org.w3.clearkey"!=(a=a.value)&&r.push(Pe(a,i));if(o=Array.from(o)[0]||null)for(a=(n=u(r)).next();!a.done;a=n.next())for(var s=(a=u(a.value.initData)).next();!s.done;s=a.next())s.value.keyId=o;return{yd:o,Mf:i,drmInfos:r,Cd:!0}}function gl(e){var t=e.getAttribute("schemeIdUri"),n=nl(e,"urn:mpeg:cenc:2013","default_KID"),i=tl(e,"urn:mpeg:cenc:2013","pssh").map(il);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new le(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:qe(e),keyId:null}}))}catch(e){throw new le(2,4,4007)}return{node:e,Rd:t,keyId:n,init:0<r.length?r:null}}var ml=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime"),vl=(new Map).set("com.widevine.alpha",(function(e){return(e=Js(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",(function(e){return(e=Js(e.node,"urn:microsoft:playready","pro"))?(e=function(e){var t=0,n=oe(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var a=ae(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}(e=qe(e.textContent)).filter((function(e){return 1===e.type}))[0],e&&(e=hl(e=Fe(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=u(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=u(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""}));function yl(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function bl(e,t){var n=El(e,t,"timescale"),i=1;n&&(i=ul(n)||1),(n=ul((n=El(e,t,"duration"))||""))&&(n/=i);var r=El(e,t,"startNumber"),a=Number(El(e,t,"presentationTimeOffset"))||0,o=cl(r||"");null!=r&&null!=o||(o=1);var s=Tl(e,t,"SegmentTimeline");if(r=null,s){r=i;var l=e.O.duration||1/0,c=el(s,"S");s=[];for(var d=-a,h=(c=u(ee(c))).next();!h.done;h=c.next()){var p=(h=h.value).item,f=h.next,g=rl(p,"t",cl);h=rl(p,"d",cl);var m=rl(p,"r",ll);if(null!=g&&(g-=a),!h)break;if(p=null!=g?g:d,0>(g=m||0))if(f){if(null==(f=rl(f,"t",cl)))break;if(p>=f)break;g=Math.ceil((f-p)/h)-1}else{if(1/0==l)break;if(p/r>=l)break;g=Math.ceil((l*r-p)/h)-1}for(0<s.length&&p!=d&&(s[s.length-1].end=p/r),g=(f=u(J(g+1))).next();!g.done;g=f.next())d=p+h,s.push({start:p/r,end:d/r,kf:p}),p=d}r=s}return{timescale:i,Z:n,sb:o,Ha:a/i||0,ud:a,timeline:r}}function El(e,t,n){return[t(e.G),t(e.aa),t(e.ka)].filter(Re).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Tl(e,t,n){return[t(e.G),t(e.aa),t(e.ka)].filter(Re).map((function(e){return Zs(e,n)})).reduce((function(e,t){return e||t}))}function Al(e,t,n,i,r,a){if(a=void 0===a?0:a,nl(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=nl(e,"http://www.w3.org/1999/xlink","href"),s=nl(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=u(Array.from(e.attributes)),c=l.next();!c.done;c=l.next())"http://www.w3.org/1999/xlink"==(c=c.value).namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=a)return ot(new le(2,4,4028));if("onLoad"!=s)return ot(new le(2,4,4027));var d=Le([i],[o]);return r.request(0,_t(d,t)).U((function(i){if(!(i=pl(i.data,e.tagName)))return ot(new le(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=(i=u(Array.from(i.attributes))).next();!s.done;s=i.next())e.setAttributeNode(s.value.cloneNode(!1));return Al(e,t,n,d[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.U(void 0,(function(){return Al(e,t,n,i,r,a)}))),o}o=[];for(var s=u(Array.from(e.childNodes)),l=s.next();!l.done;l=s.next())(l=l.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==nl(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&o.push(Al(l,t,n,i,r,a)));return ct(o).U((function(){return e}))}function kl(e,t,n,i,r,a,o){var s,l=(new Ur).ea("sidx",(function(e){s=function(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var l=o.reader.K();if(0==l)throw new le(2,3,3005);if(0==o.version)var c=o.reader.K(),d=o.reader.K();else c=o.reader.rb(),d=o.reader.rb();o.reader.skip(2);var h=o.reader.Mb();for(e=e+o.size+d,h=u(J(h)),d=h.next();!d.done;d=h.next()){var p=o.reader.K();d=(2147483648&p)>>>31,p&=2147483647;var f=o.reader.K();if(o.reader.skip(4),1==d)throw new le(2,3,3006);s.push(new tr(c/l+n,(c+f)/l+n,(function(){return a}),e,e+p-1,t,n,i,r)),c+=f,e+=p}return o.parser.stop(),s}(t,i,r,a,o,n,e)}));if(e&&l.parse(e),s)return s;throw new le(2,3,3004)}function _l(e){this.b=oe(e),this.a=new Mr(this.b,0)}function Sl(e){var t=wl(e);if(7<t.length)throw new le(2,3,3002);for(var n=0,i=(t=u(t)).next();!i.done;i=t.next())n=256*n+i.value;t=wl(e);e:{for(var r=(i=u(Cl)).next();!r.done;r=i.next())if(ne(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.b.byteLength-e.a.C;else{if(8==t.length&&224&t[1])throw new le(2,3,3001);i=0;for(var a=(r=u(ee(t))).next();!a.done;a=r.next()){var o=(a=a.value).item;i=0==a.Y?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.a.C+t<=e.b.byteLength?t:e.b.byteLength-e.a.C,i=oe(e.b,e.a.C,t),e.a.skip(t),new Il(n,i)}function wl(e){var t=e.a.C,n=e.a.qa();if(0==n)throw new le(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.a.skip(n-1),ae(e.b,t,n)}_l.prototype.wa=function(){return this.a.wa()};var Cl=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Il(e,t){this.id=e,this.a=t}function Dl(e){if(8<e.a.byteLength)throw new le(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new le(2,3,3001);for(var t=0,n=u(J(e.a.byteLength)),i=n.next();!i.done;i=n.next())t=256*t+(i=e.a.getUint8(i.value));return t}function Rl(e){var t=new _l(e.a);if(179!=(e=Sl(t)).id)throw new le(2,3,3013);if(e=Dl(e),183!=(t=Sl(t)).id)throw new le(2,3,3012);t=new _l(t.a);for(var n=0;t.wa();){var i=Sl(t);if(241==i.id){n=Dl(i);break}}return{lf:e,Re:n}}function xl(e,t){var n=Tl(e,t,"Initialization");if(!n)return null;var i=e.G.oa,r=n.getAttribute("sourceURL");r&&(i=Le(e.G.oa,[r])),r=0;var a=null;return(n=rl(n,"range",sl))&&(r=n.start,a=n.end),new er((function(){return i}),r,a)}function Ll(e,t){var n=Number(El(e,Ol,"presentationTimeOffset"))||0,i=El(e,Ol,"timescale"),r=1;i&&(r=ul(i)||1);var a=n/r||0,o=xl(e,Ol);!function(e,t){if(Nl(e,t),!Ml(e))throw new le(2,4,4002)}(e,o);var s=gt(e);return{ib:function(){var e=Tl(s,Ol,"RepresentationIndex"),n=s.G.oa;return e&&(e=e.getAttribute("sourceURL"))&&(n=Le(s.G.oa,[e])),e=Ml(s),Pl(s,t,o,n,e.start,e.end,a)}}}function Pl(e,t,n,i,r,a,o){var s,l,u,c,d,h,p,f,g,m,v,y,b,T,A;return P((function(k){var _;if(1==k.a)return s=e.presentationTimeline,l=!e.Oa||!e.O.Hd,u=e.O.start,c=e.O.duration,d=e.G.mimeType.split("/")[1],p=null,f=[(h=t)(i,r,a),"webm"==d?h(n.c(),n.b,n.a):null],h=null,E(k,Promise.all(f),2);if(g=k.b,m=g[0],v=g[1]||null,b=u-o,T=u,A=c?u+c:1/0,"mp4"==d)var S=kl(m,r,i,n,b,T,A);else{if(440786851!=Sl(S=new _l(v)).id)throw new le(2,3,3008);var w=Sl(S);if(408125543!=w.id)throw new le(2,3,3009);for(S=w.a.byteOffset,w=new _l(w.a),_=null;w.wa();){var C=Sl(w);if(357149030==C.id){_=C;break}}if(!_)throw new le(2,3,3010);for(_=new _l(_.a),C=1e6,w=null;_.wa();){var I=Sl(_);if(2807729==I.id)C=Dl(I);else if(17545==I.id)if(4==I.a.byteLength)w=I.a.getFloat32(0);else{if(8!=I.a.byteLength)throw new le(2,3,3003);w=I.a.getFloat64(0)}}if(null==w)throw new le(2,3,3011);if(w=(_={ef:_=C/1e9,duration:w*_}).ef,_=_.duration,475249515!=(C=Sl(new _l(m))).id)throw new le(2,3,3007);S=function(e,t,n,i,r,a,o,s,l){function u(){return r}var c=[];e=new _l(e.a);for(var d=null,h=null;e.wa();){var p=Sl(e);if(187==p.id){var f=Rl(p);f&&(p=n*f.lf,f=t+f.Re,null!=d&&c.push(new tr(d+o,p+o,u,h,f-1,a,o,s,l)),d=p,h=f)}}return null!=d&&c.push(new tr(d+o,i+o,u,h,null,a,o,s,l)),c}(C,S,w,_,i,n,b,T,A)}return y=S,s.ob(y),p=new Ar(y),l&&p.Ka(T,A),k.return(p)}))}function Ol(e){return e.Nb}function Ml(e){var t=Tl(e,Ol,"RepresentationIndex");return e=sl((e=El(e,Ol,"indexRange"))||""),t&&(e=rl(t,"range",sl,e)),e}function Nl(e,t){var n=e.G.mimeType.split("/")[1];if("text"!=e.G.contentType&&"mp4"!=n&&"webm"!=n)throw new le(2,4,4006);if("webm"==n&&!t)throw new le(2,4,4005)}function Bl(e,t){var n=xl(e,Ul),i=function(e){var t=function(e){return[e.G.Na,e.aa.Na,e.ka.Na].filter(Re).map((function(e){return el(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Fd&&(e.Fd=!0),{Ke:t.getAttribute("media"),start:(t=rl(t,"mediaRange",sl,{start:0,end:null})).start,end:t.end}}))}(e),n=(e=bl(e,Ul)).sb;0==n&&(n=1);var i=0;return e.Z?i=e.Z*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Z:e.Z,startTime:i,sb:n,Ha:e.Ha,timeline:e.timeline,lb:t}}(e);if(!i.Z&&!i.timeline&&1<i.lb.length)throw new le(2,4,4002);if(!i.Z&&!e.O.duration&&!i.timeline&&1==i.lb.length)throw new le(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new le(2,4,4002);var r=null,a=null;return e.ka.id&&e.G.id&&(a=e.ka.id+","+e.G.id,r=t[a]),n=function(e,t,n,i,r){var a=i.lb.length;i.timeline&&i.timeline.length!=i.lb.length&&(a=Math.min(i.timeline.length,i.lb.length));for(var o=e-i.Ha,s=t?e+t:1/0,l=[],c=i.startTime,d={},h=(a=u(J(a))).next();!h.done;d={Cc:d.Cc},h=a.next()){h=h.value;var p=i.lb[h];d.Cc=Le(n,[p.Ke]);var f=void 0;f=null!=i.Z?c+i.Z:i.timeline?i.timeline[h].end:c+t,l.push(new tr(e+c,e+f,function(e){return function(){return e.Cc}}(d),p.start,p.end,r,o,e,s)),c=f}return l}(e.O.start,e.O.duration,e.G.oa,i,n),r?(r.mb(n),r.Pa(e.presentationTimeline.Ra())):(e.presentationTimeline.ob(n),r=new Ar(n),a&&e.Oa&&(t[a]=r)),e.Oa&&e.O.Hd||r.Ka(e.O.start,e.O.duration?e.O.start+e.O.duration:1/0),{ib:function(){return Promise.resolve(r)}}}function Ul(e){return e.Na}function Fl(e,t,n,i,r){var a=function(e){var t=El(e,Vl,"initialization");if(!t)return null;var n=e.G.id,i=e.bandwidth||null,r=e.G.oa;return new er((function(){var e=yl(t,n,null,i,null);return Le(r,[e])}),0,null)}(e),o=function(e){var t=bl(e,Vl),n=El(e,Vl,"media");return e=El(e,Vl,"index"),{Z:t.Z,timescale:t.timescale,sb:t.sb,Ha:t.Ha,ud:t.ud,timeline:t.timeline,Xc:n,Jb:e}}(e);!function(e){var t=e.Jb?1:0;if(t+=e.timeline?1:0,0==(t+=e.Z?1:0))throw new le(2,4,4002);if(1!=t&&(e.Jb&&(e.timeline=null),e.Z=null),!e.Jb&&!e.Xc)throw new le(2,4,4002)}(o);var s=gt(e);if(o.Jb)return Nl(e,a),{ib:function(){var e=yl(o.Jb,s.G.id,null,s.bandwidth||null,null);return e=Le(s.G.oa,[e]),Pl(s,t,a,e,0,null,o.Ha)}};if(o.Z)return i||(e.presentationTimeline.Yc(o.Z),e.presentationTimeline.Zc(e.O.start)),{ib:function(){return function(e,t,n,i){function r(e){var n=(e-h)*d,r=n+t.Ha;return new tr(n+=s,Math.min(n+d,c),(function(){var t=yl(f,m,e,g,r*p);return Le(v,[t])}),0,null,i,y,s,c)}function a(){var e=[Math.max(o.Ra(),s),Math.min(o.La(),c)].map((function(e){return e-s}));return[Math.ceil(e[0]/d),Math.ceil(e[1]/d)-1].map((function(e){return e+h}))}var o=e.presentationTimeline,s=e.O.start,l=e.O.duration,c=l?s+l:1/0,d=t.Z,h=t.sb,p=t.timescale,f=t.Xc,g=e.bandwidth||null,m=e.G.id,v=e.G.oa,y=s-t.Ha,b=a();l=b[1];var E=[];for(e=e.Oa?Math.max(b[0],b[1]-n+1):b[0];e<=l;++e)n=r(e),E.push(n);var T=new Ar(E);if(o.La()<c){var A=l+1;T.tc(d,(function(){T.Pa(o.Ra());var e=u(a());e.next(),e=e.next().value;for(var t=[];A<=e;){var n=r(A);t.push(n),A++}return t}))}return Promise.resolve(T)}(s,o,r,a)}};var l=null;i=null,e.ka.id&&e.G.id&&(i=e.ka.id+","+e.G.id,l=n[i]);var c=function(e,t,n){var i=e.O.start,r=e.O.duration,a=i-t.Ha;r=r?i+r:1/0;for(var o=[],s={},l=u(ee(t.timeline)),c=l.next();!c.done;s={Bc:s.Bc,Dc:s.Dc,Gc:s.Gc,yc:s.yc,Hc:s.Hc,zc:s.zc},c=l.next()){var d=(c=c.value).item,h=d.start,p=d.kf;d=d.end,s.Gc=c.Y+t.sb,s.Hc=p+t.ud,s.Dc=e.G.id,s.yc=e.bandwidth||null,s.Bc=t.Xc,s.zc=e.G.oa,o.push(new tr(i+h,i+d,function(e){return function(){var t=yl(e.Bc,e.Dc,e.Gc,e.yc||null,e.Hc);return Le(e.zc,[t]).map((function(e){return e.toString()}))}}(s),0,null,n,a,i,r))}return o}(s,o,a),d=e.O.start,h=e.O.duration?e.O.start+e.O.duration:1/0,p=1/0!=h;return l?(p&&new Ar(c).Ka(d,h),l.mb(c),l.Pa(e.presentationTimeline.Ra())):(e.presentationTimeline.ob(c),l=new Ar(c),i&&e.Oa&&(n[i]=l)),p&&l.Ka(d,h),{ib:function(){return Promise.resolve(l)}}}function Vl(e){return e.Ob}function Hl(){this.f=[],this.a=[],this.b=[],this.c=[],this.g=new Set}function jl(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,A,k,_,S,w,C,I,D,R,x,L,O;return P((function(P){switch(P.a){case 1:if(i=Oe,function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).dc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.channelsCount==s.channelsCount&&r.language==s.language&&r.bandwidth==s.bandwidth&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&yt(r.roles,s.roles)&&r.audioSamplingRate==s.audioSamplingRate&&r.primary==s.primary&&(a=!0);a||n.push(r)}t.dc=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).vc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.frameRate==s.frameRate&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.label==s.label&&yt(r.roles,s.roles)&&Ht(r.closedCaptions,s.closedCaptions)&&r.bandwidth==s.bandwidth&&(a=!0);a||n.push(r)}t.vc=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.language==s.language&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&yt(r.roles,s.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}(t),!n&&1==t.length){r=t[0],e.a=r.dc,e.b=r.vc,e.c=r.textStreams,P.u(2);break}for(a=-1,o=u(ee(t)),s=o.next();!s.done;s=o.next())l=s.value,c=l.Y,d=l.item,e.g.has(d.id)||(e.g.add(d.id),-1==a&&(a=c));if(-1==a)return P.return();for(h=t.map((function(e){return e.dc})),p=t.map((function(e){return e.vc})),f=t.map((function(e){return e.textStreams})),g=u(f),m=g.next();!m.done;m=g.next())m.value.push({id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ar([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:"text",primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return E(P,Gl(e.a,h,a,zl,ql),3);case 3:return E(P,Gl(e.b,p,a,zl,ql),4);case 4:return E(P,Gl(e.c,f,a,zl,ql),2);case 2:if(v=0,y=[],e.b.length&&e.a.length)for(w=u(e.a),C=w.next();!C.done;C=w.next())for(I=C.value,D=u(e.b),R=D.next();!R.done;R=D.next())x=R.value,L=bn(I.drmInfos,x.drmInfos),I.drmInfos.length&&x.drmInfos.length&&!L.length||(O=v++,y.push({id:O,language:I.language,primary:I.primary,audio:I,video:x,bandwidth:(I.bandwidth||0)+(x.bandwidth||0),drmInfos:L,allowedByApplication:!0,allowedByKeySystem:!0}));else for(b=e.b.concat(e.a),A=u(b),k=A.next();!k.done;k=A.next())_=k.value,S=v++,y.push({id:S,language:_.language,primary:_.primary,audio:_.type==i.fb?_:null,video:_.type==i.Da?_:null,bandwidth:_.bandwidth||0,drmInfos:_.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0});e.f=y,T(P)}}))}function Kl(e){var t,n,i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,T,A;return P((function(k){switch(k.a){case 1:if(t=Oe,1==e.length)return k.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.fb}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.Da}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.$}))})),a=u(r),o=a.next();!o.done;o=a.next())o.value.push({id:0,originalId:"",primary:!1,type:"text",mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null});return E(k,Gl([],n,0,Yl,$l),2);case 2:return s=k.b,E(k,Gl([],i,0,Yl,$l),3);case 3:return l=k.b,E(k,Gl([],r,0,Yl,$l),4);case 4:if(c=k.b,d=0,l.length&&s.length)for(g=u(s),m=g.next();!m.done;m=g.next())for(v=m.value,y=u(l),b=y.next();!b.done;b=y.next())T=b.value,A=d++,T.variantIds.push(A),v.variantIds.push(A);else for(h=l.concat(s),p=u(h),f=p.next();!f.done;f=p.next())f.value.variantIds=[d++];return k.return(l.concat(s,c))}}))}function Gl(e,t,n,i,r){var a,o,s,l,c,d,h,p,f,g,m,v,y,b,T,A,k,_,S;return P((function(w){switch(w.a){case 1:for(a=Oe,o=[],s=u(ee(t)),l=s.next();!l.done;l=s.next())c=l.value,d=c.Y,h=c.item,d>=n?o.push(new Set(h)):o.push(new Set);p=u(e),f=p.next();case 2:if(f.done){w.u(4);break}return E(w,function(e,t,n,i,r){var a;return P((function(o){return 1==o.a?(a=Xl(t,e))?E(o,Promise.all(a.map((function(e){return e.createSegmentIndex()}))),2):o.return(!1):(Wl(e,a,n,i,r),o.return(!0))}))}(f.value,t,n,r,o),5);case 5:if(!w.b)throw new le(2,4,4037);f=p.next(),w.u(2);break;case 4:g=u(o),m=g.next();case 6:if(m.done){w.u(8);break}v=m.value,y=u(v),b=y.next();case 9:if(b.done){m=g.next(),w.u(6);break}return E(w,function(e,t,n,i,r){var a,o;return P((function(s){return 1==s.a?(a=n(e),(o=Xl(t,a))?a.createSegmentIndex?E(s,Promise.all(o.map((function(e){return e.createSegmentIndex()}))),2):s.u(2):s.return(null)):(Wl(a,o,0,i,r),s.return(a))}))}(b.value,t,i,r,o),12);case 12:(T=w.b)&&e.push(T),b=y.next(),w.u(9);break;case 8:for(A=u(o),m=A.next();!m.done;m=A.next())for(k=m.value,_={},S=u(k),b=S.next();!b.done;_={eb:_.eb},b=S.next())if(_.eb=b.value,(_.eb.type!=a.$||_.eb.language)&&e.some(function(e){return function(t){return t.mimeType==e.eb.mimeType&&Gt(t.codecs)[0]==Gt(e.eb.codecs)[0]}}(_)))throw new le(2,4,4037);return w.return(e)}}))}function Wl(e,t,n,i,r){for(var a=(t=u(ee(t))).next();!a.done;a=t.next()){var o=a.value;if(a=o.Y,o=o.item,a>=n){i(e,o);var s=!0;"audio"==e.type&&0==Ei(e.language,o.language)&&(s=!1),s&&r[a].delete(o)}}}function zl(e){return(e=Object.assign({},e)).originalId=null,e.createSegmentIndex=function(){return Promise.resolve()},e.segmentIndex=new Sr,e.emsgSchemeIdUris=[],e.keyIds=new Set,e.closedCaptions=null,e.trickModeVideo=null,e}function Yl(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function ql(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));var n=t.keyIds;if(n=new Set(c(e.keyIds).concat(c(n))),e.keyIds=n,null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),n=bn(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new le(2,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=u(t.closedCaptions)).next();!i.done;i=n.next()){var r=u(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}e.segmentIndex.g.push(t.segmentIndex),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=zl(t.trickModeVideo),e.trickModeVideo.segmentIndex=e.segmentIndex.clone()),ql(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&ql(e.trickModeVideo,t)}function $l(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set(c(e.keyIds).concat(c(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,c(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var i=(n=u(t.closedCaptions)).next();!i.done;i=n.next()){var r=u(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}}function Xl(e,t){for(var n=[],i=u(e),r=i.next();!r.done;r=i.next()){for(var a=t,o={audio:Ql,video:Ql,text:Zl}[a.type],s={audio:Jl,video:eu,text:tu}[a.type],l=null,c=(r=u(r.value)).next();!c.done;c=r.next())!o(a,c=c.value)||l&&!s(a,l,c)||(l=c);if(!(a=l))return null;n.push(a)}return n}function Ql(e,t){var n;if(!(n=t.mimeType!=e.mimeType||Gt(t.codecs)[0]!=Gt(e.codecs)[0])&&(n=e.drmInfos)){n=e.drmInfos;var i=t.drmInfos;n=!(!n.length||!i.length||0<bn(n,i).length)}return!n}function Zl(e,t){return!!e.language&&(!t.language||0!=Ei(e.language,t.language)&&t.kind==e.kind)}function Jl(e,t,n){if(e.id==n.id)return!0;var i=Ei(e.language,t.language),r=Ei(e.language,n.language);return r>i||!(r<i)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&((i=nu(e.channelsCount,t.channelsCount,n.channelsCount))==ru||i!=ou&&((i=nu(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==ru||i!=ou&&!(!e.bandwidth||iu(e.bandwidth,t.bandwidth,n.bandwidth)!=ru)))))}function eu(e,t,n){if(e.id==n.id)return!0;var i=nu(e.width*e.height,t.width*t.height,n.width*n.height);if(i==ru)return!0;if(i==ou)return!1;if(e.frameRate){if((i=nu(e.frameRate,t.frameRate,n.frameRate))==ru)return!0;if(i==ou)return!1}return!(!e.bandwidth||iu(e.bandwidth,t.bandwidth,n.bandwidth)!=ru)}function tu(e,t,n){if(e.id==n.id)return!0;var i=Ei(e.language,t.language),r=Ei(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function nu(e,t,n){if(t==e&&e!=n)return ou;if(n==e&&e!=t)return ru;if(t>e){if(n<=e||n-e<t-e)return ru;if(n-e>t-e)return ou}else{if(n>e)return ou;if(e-n<e-t)return ru;if(e-n>e-t)return ou}return au}function iu(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?ru:t<e?ou:au}Hl.prototype.release=function(){for(var e=u(this.a.concat(this.b,this.c)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.a=[],this.b=[],this.c=[],this.f=[]};var ru=1,au=0,ou=-1;function su(){var e=this;this.s=this.i=null,this.b=[],this.o=null,this.m=1,this.f={},this.a=new Hl,this.h=0,this.j=new H(5),this.g=new nt((function(){e.Kb()})),this.c=new Et}function lu(e){var t,n,i,r,a,o,s;return P((function(l){return 1==l.a?(t=_t(e.b,e.i.retryParameters),n=e.s.networkingEngine,i=Date.now(),r=n.request(0,t),Tt(e.c,r),E(l,r.promise,2)):3!=l.a?(a=l.b,e.s?(a.uri&&!e.b.includes(a.uri)&&e.b.unshift(a.uri),E(l,function(e,t,n){var i,r,a,o;return P((function(s){if(1==s.a){if(!(i=pl(t,"MPD")))throw new le(2,4,4001,n);return r=e.i.dash.xlinkFailGracefully,a=Al(i,e.i.retryParameters,r,n,e.s.networkingEngine),Tt(e.c,a),E(s,a.promise,2)}return o=s.b,s.return(function(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,T,k,w,C,I;return P((function(D){switch(D.a){case 1:i=[n],0<(r=el(t,"Location").map(il).filter(Re)).length&&(a=Le(i,r),i=e.b=a),o=el(t,"BaseURL").map(il),s=Le(i,o),l=e.i.dash.ignoreMinBufferTime,c=0,l||(c=rl(t,"minBufferTime",ol)||0),e.h=rl(t,"minimumUpdatePeriod",ol,-1),d=rl(t,"availabilityStartTime",al),h=rl(t,"timeShiftBufferDepth",ol),p=e.i.dash.ignoreSuggestedPresentationDelay,f=null,p||(f=rl(t,"suggestedPresentationDelay",ol)),g=rl(t,"maxSegmentDuration",ol),m=t.getAttribute("type")||"static",e.o?v=e.o.presentationTimeline:(y=e.i.defaultPresentationDelay||1.5*c,v=new nr(d,null!=f?f:y,e.i.dash.autoCorrectDrift)),b={Oa:"static"!=m,presentationTimeline:v,ka:null,O:null,aa:null,G:null,bandwidth:0,Fd:!1};for(var R=rl(t,"mediaPresentationDuration",ol),x=[],L=0,O=el(t,"Period"),M=(O=u(ee(O))).next();!M.done;M=O.next()){var N=M.value;M=N.item,N=N.next,L=rl(M,"start",ol,L);var B=rl(M,"duration",ol),U=null;if(N){var F=rl(N,"start",ol);null!=F&&(U=F-L)}else null!=R&&(U=R-L);if(null==U&&(U=B),M=uu(e,b,s,{start:L,duration:U,node:M,Hd:null==U||!N}),x.push(M),null==U){L=null;break}L+=U}return k=(T=null!=R?{periods:x,duration:R,zd:!1}:{periods:x,duration:L,zd:!0}).duration,w=T.periods,v.Pb("static"==m),"static"!=m&&T.zd||v.za(k||1/0),v.S()&&!isNaN(e.i.availabilityWindowOverride)&&(h=e.i.availabilityWindowOverride),null==h&&(h=1/0),v.pd(h),v.Yc(g||1),E(D,jl(e.a,w,b.Oa),2);case 2:if(e.o){e.o.variants=e.a.f,e.o.textStreams=e.a.c,D.u(3);break}if(e.o={presentationTimeline:v,variants:e.a.f,textStreams:e.a.c,offlineSessionIds:[],minBufferTime:c||0},!v.Xd()){D.u(3);break}return C=el(t,"UTCTiming"),E(D,function(e,t,n){var i,r,a,o,s,l,c,d;return P((function(h){switch(h.a){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.i.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=u(i),o=a.next();case 2:if(o.done){h.u(4);break}switch(s=o.value,A(h,5),l=s.scheme,c=s.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.u(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.u(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(c),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Y("NTP UTCTiming scheme is not supported");break;default:Y("Unrecognized scheme in UTCTiming element",l)}h.u(9);break;case 7:return E(h,pu(e,t,c,"HEAD"),10);case 10:return h.return(h.b);case 8:return E(h,pu(e,t,c,"GET"),11);case 11:return h.return(h.b);case 9:_(h,3);break;case 5:S(h);case 3:o=a.next(),h.u(2);break;case 4:return Y("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}(e,s,C),5);case 5:if(I=D.b,!e.s)return D.return();v.Td(I);case 3:return e.s.makeTextStreamsForClosedCaptions(e.o),E(D,e.s.filter(e.o),0)}}))}(e,o,n))}))}(e,a.data,a.uri),3)):l.return(0)):(o=Date.now(),s=(o-i)/1e3,j(e.j,1,s),l.return(s))}))}function uu(e,t,n,i){t.ka=hu(i.node,null,n),t.O=i,t.ka.id||(t.ka.id="__shaka_period_"+i.start);for(var r=(n=u(n=el(i.node,"EventStream"))).next();!r.done;r=n.next())fu(e,i.start,i.duration,r.value);if(n=el(i.node,"AdaptationSet").map((function(n){return function(e,t,n){if(t.aa=hu(n,t.ka,null),"image"==t.aa.contentType)return null;var i=!1,r=el(n,"Role"),a=r.map((function(e){return e.getAttribute("value")})).filter(Re),o=void 0,s="text"==t.aa.contentType;s&&(o="subtitle");for(var l=(r=u(r)).next();!l.done;l=r.next()){var d=(l=l.value).getAttribute("schemeIdUri");if(null==d||"urn:mpeg:dash:role:2011"==d)switch(l=l.getAttribute("value"),l){case"main":i=!0;break;case"caption":case"subtitle":o=l}}d=el(n,"EssentialProperty"),r=null,l=!1;for(var h=(d=u(d)).next();!h.done;h=d.next())"http://dashif.org/guidelines/trickmode"==(h=h.value).getAttribute("schemeIdUri")?r=h.getAttribute("value"):l=!0;d=el(n,"Accessibility");var p=new Map;for(d=u(d),h=d.next();!h.done;h=d.next()){var f=h.value;if(h=f.getAttribute("schemeIdUri"),f=f.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==h||"urn:scte:dash:cc:cea-708:2015"==h)if(h=1,null!=f)for(var g=(f=u(f.split(";"))).next();!g.done;g=f.next()){var m=g.value,v=g=void 0;m.includes("=")?(g=(m=m.split("="))[0].startsWith("CC")?m[0]:"CC"+m[0],v=m[1].split(",")[0].split(":").pop()):(g="CC"+h,h+=2,v=m),p.set(g,bi(v))}else p.set("CC1","und");else"urn:mpeg:dash:role:2011"==h&&null!=f&&(a.push(f),"captions"==f&&(o="caption"))}if(l)return null;var y=fl(l=el(n,"ContentProtection"),e.i.dash.ignoreDrmInfo),b=bi(n.getAttribute("lang")||"und"),A=n.getAttribute("label");if((l=el(n,"Label"))&&l.length&&((l=l[0]).textContent&&(A=l.textContent)),l=el(n,"Representation"),n=l.map((function(n){return function(e,t,n,i,r,a,o,s,l,u){if(t.G=hu(u,t.aa,null),!function(e){var t=e.Nb?1:0;return t+=e.Na?1:0,0==(t+=e.Ob?1:0)?"text"==e.contentType||"application"==e.contentType:(1!=t&&(e.Nb&&(e.Na=null),e.Ob=null),!0)}(t.G))return null;var c=t.O.start;t.bandwidth=rl(u,"bandwidth",ul)||0;var d=t.G.contentType;d="text"==d||"application"==d;try{var h=function(t,n,i){return function(e,t,n,i){var r,a,o,s,l;return P((function(u){return 1==u.a?(r=It,a=zr(t,n,i,e.i.retryParameters),o=e.s.networkingEngine,s=o.request(r,a),Tt(e.c,s),E(u,s.promise,2)):(l=u.b,u.return(l.data))}))}(e,t,n,i)};if(t.G.Nb)var p=Ll(t,h);else if(t.G.Na)p=Bl(t,e.f);else if(t.G.Ob)p=Fl(t,h,e.f,!!e.o,e.i.dash.initialSegmentLimit);else{var f=t.G.oa,g=t.O.duration||0;p={ib:function(){return Promise.resolve(kr(c,g,f))}}}}catch(e){if(d&&4002==e.code)return null;throw e}d=function(e,t,n){var i=fl(e,n);if(t.Cd)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==i.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=i.drmInfos),t.Cd=!1;else if(0<i.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return i.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new le(2,4,4008);return i.yd||t.yd}(d=el(u,"ContentProtection"),n,e.i.dash.ignoreDrmInfo),d=new Set(d?[d]:[]),el(u,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(t.G.mimeType="audio/eac3-joc");var m={id:e.m++,originalId:t.G.id,createSegmentIndex:function(){var e;return P((function(t){if(1==t.a)return m.segmentIndex?t.u(0):(e=m,E(t,p.ib(),3));e.segmentIndex=t.b,T(t)}))},segmentIndex:null,mimeType:t.G.mimeType,codecs:t.G.codecs,frameRate:t.G.frameRate,pixelAspectRatio:t.G.pixelAspectRatio,bandwidth:t.bandwidth,width:t.G.width,height:t.G.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:d,language:r,label:a,type:t.aa.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.G.emsgSchemeIdUris,roles:s,channelsCount:t.G.$c,audioSamplingRate:t.G.audioSamplingRate,closedCaptions:l};return m}(e,t,y,o,b,A,i,a,p,n)})).filter((function(e){return!!e})),0==n.length){if(e.i.dash.ignoreEmptyAdaptationSet||s)return null;throw new le(2,4,4003)}if(!t.aa.contentType||"application"==t.aa.contentType)for(t.aa.contentType=gu(n[0].mimeType,n[0].codecs),s=u(n),d=s.next();!d.done;d=s.next())d.value.type=t.aa.contentType;for(s=u(n),d=s.next();!d.done;d=s.next())for(d=d.value,h=u(y.drmInfos),f=h.next();!f.done;f=h.next())(f=f.value).keyIds=f.keyIds&&d.keyIds?new Set(c(f.keyIds).concat(c(d.keyIds))):f.keyIds||d.keyIds;return s=l.map((function(e){return e.getAttribute("id")})).filter(Re),{id:t.aa.id||"__fake__"+e.m++,contentType:t.aa.contentType,language:b,Nf:i,streams:n,drmInfos:y.drmInfos,sd:r,Ue:s}}(e,t,n)})).filter(Re),t.Oa){i=[];for(var a=(r=u(n)).next();!a.done;a=r.next())for(var o=(a=u(a.value.Ue)).next();!o.done;o=a.next())i.push(o.value);if(i.length!=new Set(i).size)throw new le(2,4,4018)}for(i=n.filter((function(e){return!e.sd})),r=(n=u(n=n.filter((function(e){return e.sd})))).next();!r.done;r=n.next()){a=(r=r.value).sd.split(" ");for(var s=(o=u(i)).next();!s.done;s=o.next()){var l=s.value;if(a.includes(l.id)){s={};for(var d=(l=u(l.streams)).next();!d.done;s={Rb:s.Rb,Xb:s.Xb},d=l.next())s.Xb=d.value,s.Rb=jt,s.Xb.trickModeVideo=r.streams.find(function(e){return function(t){return e.Rb.a(e.Xb.codecs)==e.Rb.a(t.codecs)}}(s))}}}if(r=e.i.disableAudio?[]:cu(i,"audio"),a=e.i.disableVideo?[]:cu(i,"video"),n=e.i.disableText?[]:cu(i,"text"),!a.length&&!r.length)throw new le(2,4,4004);for(i=[],o=(r=u(r)).next();!o.done;o=r.next())i.push.apply(i,c(o.value.streams));for(r=[],o=(a=u(a)).next();!o.done;o=a.next())r.push.apply(r,c(o.value.streams));for(a=[],o=(n=u(n)).next();!o.done;o=n.next())a.push.apply(a,c(o.value.streams));return{id:t.ka.id,dc:i,vc:r,textStreams:a}}function cu(e,t){return e.filter((function(e){return e.contentType==t}))}function du(e,t){0>e.h||e.g.R(Math.max(3,e.h-t,K(e.j)))}function hu(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,$c:null,audioSamplingRate:null},n=n||t.oa;for(var i=el(e,"BaseURL").map(il),r=e.getAttribute("contentType")||t.contentType,a=e.getAttribute("mimeType")||t.mimeType,o=e.getAttribute("codecs")||t.codecs,s=rl(e,"frameRate",dl)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,c=el(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),h=(c=u(c)).next();!h.done;h=c.next())h=h.value.getAttribute("schemeIdUri"),d.includes(h)||d.push(h);return c=function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16)){for(e=0;t;)1&t&&++e,t>>=1;return e}}}return null}(c=el(e,"AudioChannelConfiguration"))||t.$c,h=rl(e,"audioSamplingRate",cl)||t.audioSamplingRate,r||(r=gu(a,o)),{oa:Le(n,i),Nb:Zs(e,"SegmentBase")||t.Nb,Na:Zs(e,"SegmentList")||t.Na,Ob:Zs(e,"SegmentTemplate")||t.Ob,width:rl(e,"width",cl)||t.width,height:rl(e,"height",cl)||t.height,contentType:r,mimeType:a,codecs:o,frameRate:s,pixelAspectRatio:l,emsgSchemeIdUris:d,id:e.getAttribute("id"),$c:c,audioSamplingRate:h}}function pu(e,t,n,i){var r,a,o,s,l,u;return P((function(c){if(1==c.a)return r=Le(t,[n]),(a=_t(r,e.i.retryParameters)).method=i,o=e.s.networkingEngine.request(4,a),Tt(e.c,o),E(c,o.promise,2);if(s=c.b,"HEAD"==i){if(!s.headers||!s.headers.date)return c.return(0);l=s.headers.date}else l=Ue(s.data);return u=Date.parse(l),isNaN(u)?c.return(0):c.return(u-Date.now())}))}function fu(e,t,n,i){for(var r=i.getAttribute("schemeIdUri")||"",a=i.getAttribute("value")||"",o=rl(i,"timescale",cl)||1,s=(i=u(el(i,"Event"))).next();!s.done;s=i.next()){var l=rl(s=s.value,"presentationTime",cl)||0,c=rl(s,"duration",cl)||0;c=(l=l/o+t)+c/o,null!=n&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),s={schemeIdUri:r,value:a,startTime:l,endTime:c,id:s.getAttribute("id")||"",eventElement:s},e.s.onTimelineRegionAdded(s)}}function gu(e,t){return Qn(Kt(e,t))?"text":e.split("/")[0]}function mu(e,t,n,i){this.a=e,this.type=t,this.V=n,this.segments=i||null}function vu(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function yu(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function bu(e,t){var n=e.getAttribute(t);if(!n)throw new le(2,4,4023,t);return n.value}function Eu(e,t){this.V=t,this.a=e}function Tu(e,t){this.name=e,this.value=t}function Au(e,t){return e.filter((function(e){return e.name==t}))}function ku(e,t){return e.filter((function(e){return bu(e,"TYPE")==t}))}function _u(e,t){var n=Au(e,t);return n.length?n[0]:null}function Su(e,t,n){return n=void 0===n?0:n,(e=_u(e,t))?Number(e.value):n}function wu(e){this.b=e,this.a=0}function Cu(e){Iu(e,/[ \t]+/gm)}function Iu(e,t){t.lastIndex=e.a;var n=t.exec(e.b);return n=null==n?null:{position:n.index,length:n[0].length,results:n},e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.results)}function Du(e){return e.a==e.b.length?null:(e=Iu(e,/[^ \t\n]*/gm))?e[0]:null}function Ru(){this.a=0}function xu(e,t,n){var i=(t=(t=Ue(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new le(2,4,4015);t=0;for(var r=!0,a=u(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Lu(e.a++,o),--e.a,Pu.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}a=[],r=!0;for(var s=(o=u(ee(i))).next();!s.done;s=o.next()){var l=s.value;s=l.Y;var c=l.item;if(l=l.next,/^#(?!EXT)/m.test(c)||r)r=!1;else{if(c=Lu(e.a++,c),Ou.includes(c.name)){if(1!=t)throw new le(2,4,4017);for(c=i.splice(s,i.length-s),i=n,r=[],o=[],s=null,l=(c=u(c)).next();!l.done;l=c.next())l=l.value,/^(#EXT)/.test(l)?(l=Lu(e.a++,l),Pu.includes(l.name)?a.push(l):"EXT-X-MAP"==l.name?s=l:o.push(l)):/^#(?!EXT)/m.test(l)||(l=Le([i],[l.trim()])[0],s&&o.push(s),r.push(new Eu(l,o)),o=[]);return new mu(n,t,a,r)}a.push(c),"EXT-X-STREAM-INF"==c.name&&(c.a.push(new Tu("URI",l)),r=!0)}}return new mu(n,t,a)}function Lu(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new le(2,4,4016,t);var i,r=n[1],a=n[2];if(n=[],a){var o;(o=Iu(a=new wu(a),/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=Iu(a,s);)n.push(new Tu(o[1],o[2]||o[3]))}return new vu(e,r,n,i)}(i=su.prototype).configure=function(e){this.i=e},i.start=function(e,t){var n,i=this;return P((function(r){if(1==r.a)return i.b=[e],i.s=t,E(r,lu(i),2);if(n=r.b,i.s&&du(i,n),!i.s)throw new le(2,7,7001);return r.return(i.o)}))},i.stop=function(){for(var e=u(Object.values(this.f)),t=e.next();!t.done;t=e.next())t.value.release();return this.a&&this.a.release(),this.i=this.s=null,this.b=[],this.o=null,this.f={},this.a=null,null!=this.g&&(this.g.stop(),this.g=null),this.c.destroy()},i.update=function(){var e,t=this;return P((function(n){return 1==n.a?(A(n,2),E(n,lu(t),4)):2!=n.a?_(n,0):(e=S(n),t.s&&e?(t.s.onError(e),void T(n)):n.return())}))},i.onExpirationUpdated=function(){},i.Kb=function(){var e,t,n=this;return P((function(i){switch(i.a){case 1:return e=0,A(i,2),E(i,lu(n),4);case 4:e=i.b,_(i,3);break;case 2:t=S(i),n.s&&(t.severity=1,n.s.onError(t));case 3:if(!n.s)return i.return();du(n,e),T(i)}}))},V("shaka.dash.DashParser",su),Ji.mpd=function(){return new su},Zi["application/dash+xml"]=function(){return new su},Zi["video/vnd.mpeg.dash.mpd"]=function(){return new su},vu.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},vu.prototype.getAttribute=function(e){var t=this.a.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Pu="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),Ou="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Mu(){}function Nu(e){try{var t=Bu(e);return lt({uri:e,Nd:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return ot(e)}}function Bu(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new le(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new le(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r=!1;return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:r?qe(t):He(t),contentType:i}}function Uu(){var e=this;this.i=this.s=null,this.Ca=1,this.j=new Map,this.g=new Map,this.ta=new Set,this.a=new Map,this.b=null,this.J="",this.H=new Ru,this.ca=0,this.h=new nt((function(){e.Kb()})),this.c=sc,this.o=null,this.M=0,this.T=1/0,this.m=new Et,this.W=[],this.A=new Map,this.Ba=!1,this.f=new Map,this.D=null,this.I=new Map,this.v=new Map}function Fu(e,t){var n,i,r,a,o,s,l,u,c;return P((function(d){if(1==d.a)return n=cc,i=t.be,E(d,nc(e,_t([i],e.i.retryParameters),0),2);if(3!=d.a){if(r=d.b,1!=(a=xu(e.H,r.data,r.uri)).type)throw new le(2,4,4017);return o=Au(a.V,"EXT-X-DEFINE"),s=Vu(e,o),l=t.stream,E(d,qu(e,t.uc,a,l.mimeType,t.Id,s),3)}u=d.b,l.segmentIndex.mb(u),u.length&&l.segmentIndex.Pa(u[0].startTime),c=u[u.length-1],_u(a.V,"EXT-X-ENDLIST")&&(tc(e,n.$d),e.b.za(c.endTime)),T(d)}))}function Vu(e,t){for(var n=new Map,i=u(t),r=i.next();!r.done;r=i.next()){var a=r.value;r=yu(a,"NAME");var o=yu(a,"VALUE");a=yu(a,"IMPORT"),r&&o&&n.set(r,o),a&&(r=e.j.get(a))&&n.set(a,r)}return n}function Hu(e,t){var n=[];e.i.disableVideo||n.push("avc1.42E01E"),e.i.disableAudio||n.push("mp4a.40.2");var i=yu(t,"CODECS",n.join(",")).split(/\s*,\s*/);n=new Set;for(var r=[],a=(i=u(i)).next();!a.done;a=i.next()){var o=Gt(a=a.value)[0];n.has(o)||(r.push(a),n.add(o))}return r}function ju(e){return bi(e=yu(e,"LANGUAGE")||"und")}function Ku(e,t){var n,i,r,a,o,s,l,u,c,d,h;return P((function(p){if(1==p.a){n=bu(t,"GROUP-ID"),i="";var f=bu(t,"TYPE").toLowerCase();return"subtitles"==f&&(f="text"),"text"!=(r=f)&&n&&e.f.has(n)&&(i=e.f.get(n)),a=Ju(bu(t,"URI"),e.j),e.a.has(a)?p.return(e.a.get(a)):(o=ju(t),s=yu(t,"NAME"),l=t.getAttribute("DEFAULT"),u="YES"==l,f="audio"==r&&(f=yu(t,"CHANNELS"))?parseInt(f.split("/")[0],10):null,c=f,d=yu(t,"CHARACTERISTICS"),E(p,Gu(e,a,i,r,o,u,s,c,null,d),2))}return h=p.b,e.g.has(n)?e.g.get(n).push(h):e.g.set(n,[h]),null==h?p.return(null):e.a.has(a)?p.return(e.a.get(a)):(e.a.set(a,h),p.return(h))}))}function Gu(e,t,n,i,r,a,o,s,l,d){var h,p,f,g,m,v,y,b,T,k,w,C,I,D,R,x,L,O,M,N,B,U,F,V,H,j,K,G,W,z,q,$,X,Q,Z,J;return P((function(ee){switch(ee.a){case 1:return h=Le([e.J],[t])[0],E(ee,nc(e,_t([h],e.i.retryParameters),0),2);case 2:if(p=ee.b,h=p.uri,1!=(f=xu(e.H,p.data,h)).type)throw new le(2,4,4017);if(g=[],f.segments)for(m=u(f.segments),v=m.next();!v.done;v=m.next())y=v.value,b=Au(y.V,"EXT-X-KEY"),g.push.apply(g,c(b));for(T=!1,k=[],w=new Set,C=u(g),I=C.next();!I.done;I=C.next())if(D=I.value,"NONE"!=(R=bu(D,"METHOD"))){if(T=!0,"AES-128"==R)return e.Ba=!0,ee.return(null);if(x=bu(D,"KEYFORMAT"),O=(L=oc[x])?L(D):null){if(O.keyIds)for(M=u(O.keyIds),N=M.next();!N.done;N=M.next())B=N.value,w.add(B);k.push(O)}}if(T&&!k.length)throw new le(2,4,4026);return U=Au(f.V,"EXT-X-DEFINE"),F=Vu(e,U),function(e,t){var n=_u(t.V,"EXT-X-PLAYLIST-TYPE"),i=_u(t.V,"EXT-X-ENDLIST");i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i?tc(e,sc):(tc(e,n?uc:lc),i=ec(t.V,"EXT-X-TARGETDURATION"),i=Number(i.value),e.M=Math.max(i,e.M),e.T=Math.min(i,e.T))}(e,f),E(ee,function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f;return P((function(g){if(1==g.a)return a=Oe,o=It,s=Ju(i.segments[0].a,r),l=new ce(s),u=l.ja.split(".").pop(),c=ac[t],(d=c[u])?g.return(d):t==a.$?n&&"vtt"!=n&&"wvtt"!=n?g.return("application/mp4"):g.return("text/vtt"):((h=_t([s],e.i.retryParameters)).method="HEAD",E(g,nc(e,h,o),2));if(p=g.b,!(f=p.headers["content-type"]))throw new le(2,4,4021,u);return g.return(f.split(";")[0])}))}(e,i,n,f,F),3);case 3:return V=ee.b,rc.includes(V)&&(n=""),H=new Map,A(ee,4),E(ee,qu(e,t,f,V,H,F),6);case 6:j=ee.b,_(ee,5);break;case 4:if(4035==(K=S(ee)).code)return Y("Skipping unsupported HLS stream",V,t),ee.return(null);throw K;case 5:if(G=j[0].startTime,W=j[j.length-1].endTime,z=new Ar(j),q="text"==i?"subtitle":void 0,$=[],d)for(X=u(d.split(",")),Q=X.next();!Q.done;Q=X.next())Z=Q.value,$.push(Z);return J={id:e.Ca++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:z,mimeType:V,codecs:n,kind:q,encrypted:T,drmInfos:k,keyIds:w,language:r,label:o,type:i,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:$,channelsCount:s,audioSamplingRate:null,closedCaptions:l},ee.return({stream:J,uc:t,be:h,Jd:G,Je:W,Id:H})}}))}function Wu(e,t,n,i){return(n=_u(n,"EXT-X-MAP"))?(t=[i=Ju(Le([t],[bu(n,"URI")])[0],i),yu(n,"BYTERANGE","")].join("-"),e.I.has(t)||(n=function(e,t){var n=0,i=null,r=yu(t,"BYTERANGE");return r&&(n=r.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1),new er((function(){return[e]}),n,i)}(i,n),e.I.set(t,n)),e.I.get(t)):null}function zu(e,t,n,i,r,a){var o=n.V,s=Ju(n.a,a);n=ec(o,"EXTINF").value.split(","),n=i+Number(n[0]),a=0;var l=null;return(o=_u(o,"EXT-X-BYTERANGE"))&&(a=o.value.split("@"),o=Number(a[0]),l=(a=a[1]?Number(a[1]):t.a+1)+o-1),new tr(i,n,(function(){return[s]}),a,l,e,r,0,1/0)}function Yu(e){if(e.b){for(var t=u(e.W),n=t.next();!n.done;n=t.next())e.b.ob(n.value);e.W=[]}}function qu(e,t,n,i,r,a){var o,s,l,c,d,h,p,f,g,m,v,y,b,T,A,k,_;return P((function(S){switch(S.a){case 1:if(o=n.segments,l=Su(n.V,"EXT-X-MEDIA-SEQUENCE",0),e.c!=sc&&r.has(l)){c=r.get(l),S.u(2);break}if(null!=e.D){S.u(3);break}return s=Wu(e,n.a,o[0].V,a),d=e,E(S,Xu(e,t,s,i,l,!1,o[0],a),4);case 4:d.D=S.b;case 3:c=e.D;case 2:o[0].a.split("/").pop(),h=Su(n.V,"EXT-X-DISCONTINUITY-SEQUENCE"),p=e.v.get(h)||0,f=[],g=u(ee(o)),m=g.next();case 5:if(m.done){S.u(7);break}if(v=m.value,y=v.Y,b=v.item,T=f[f.length-1],A=0==y?c:T.endTime,k=l+y,r.set(k,A),s=Wu(e,n.a,b.V,a),!_u(b.V,"EXT-X-DISCONTINUITY")){S.u(8);break}return h++,E(S,function(e,t,n,i,r,a,o,s,l){var u,c;return P((function(d){return 1==d.a?(u=0,e.v.has(t)?(u=e.v.get(t),d.u(2)):E(d,Xu(e,n,i,r,a,!0,o,s),3)):(2!=d.a&&(c=d.b,u=l-c,e.v.set(t,u)),d.return(u))}))}(e,h,t,s,i,k,b,a,A),9);case 9:p=S.b;case 8:_=zu(s,T,b,A,p,a),f.push(_),m=g.next(),S.u(5);break;case 7:return e.W.push(f),Yu(e),S.return(f)}}))}function $u(e,t){var n,i,r,a,o,s;return P((function(l){switch(l.a){case 1:return n=It,i=zr(t.c(),t.b,t.a,e.i.retryParameters),e.i.hls.useFullSegmentsForStartTime?l.return(nc(e,i,n)):(r=zr(t.c(),t.b,t.b+2048-1,e.i.retryParameters),A(l,2),E(l,nc(e,r,n),4));case 4:return a=l.b,l.return(a);case 2:if(7001==(o=S(l)).code)throw o;return Y("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),E(l,nc(e,i,n),5);case 5:return s=l.b,l.return(s)}}))}function Xu(e,t,n,i,r,a,o,s){var l,u,c,d,h,p,f,g;return P((function(m){switch(m.a){case 1:if(l=zu(n,null,o,0,0,s),e.o&&!a&&(u=e.a.get(t),null!=(c=u.Id.get(r))))return m.return(c);if(i=i.toLowerCase(),rc.includes(i))throw Y("Raw formats are not yet supported.  Skipping "+i),new le(1,4,4035);if("video/webm"==i)throw Y("WebM in HLS is not yet supported.  Skipping."),new le(1,4,4035);if("video/mp4"!=i&&"audio/mp4"!=i){m.u(2);break}return d=[$u(e,l)],n&&d.push($u(e,n)),E(m,Promise.all(d),3);case 3:return h=m.b,p=h[0],f=h[1]||h[0],m.return(function(e,t,n,i){var r=0;if((new Ur).box("moov",Fr).box("trak",Fr).box("mdia",Fr).ea("mdhd",(function(e){e.reader.skip(0==e.version?8:16),r=e.reader.K(),e.parser.stop()})).parse(i,!0),!r)throw new le(2,4,4030,e,t);var a=0,o=!1;if((new Ur).box("moof",Fr).box("traf",Fr).ea("tfdt",(function(e){a=(0==e.version?e.reader.K():e.reader.rb())/r,o=!0,e.parser.stop()})).parse(n,!0),!o)throw new le(2,4,4030,e,t);return a}(t,p.uri,p.data,f.data));case 2:if("video/mp2t"!=i){m.u(4);break}return E(m,$u(e,l),5);case 5:return g=m.b,m.return(function(e,t,n){function i(){a.seek(o+188),71!=(s=a.qa())&&(a.seek(o+192),s=a.qa()),71!=s&&(a.seek(o+204),s=a.qa()),71!=s&&r(),a.Qd(1)}function r(){throw new le(2,4,4030,e,t)}for(var a=new Mr(n,0),o=0,s=0;;)if(o=a.C,71!=(s=a.qa())&&r(),8191==(8191&(n=a.Mb())))i();else if(16384&n){if(0!=(n=(48&a.qa())>>4)&&2!=n||r(),3==n&&(n=a.qa(),a.skip(n)),1==a.K()>>8)return a.skip(3),0!=(n=a.qa()>>6)&&1!=n||r(),0==a.qa()&&r(),(1073741824*((14&(n=a.qa()))>>1)+((65534&a.Mb())<<14|(65534&a.Mb())>>1))/9e4;i()}else i()}(t,g.uri,g.data));case 4:throw new le(2,4,4030,t)}}))}function Qu(e,t){if(1==t.length)return t[0];var n=Zu(e,t);if(null!=n)return n;throw new le(2,4,4025,t)}function Zu(e,t){for(var n=u(ic[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=u(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return"text"==e?"":null}function Ju(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),i=n.match(/{\$\w*}/g);if(i)for(var r=(i=u(i)).next();!r.done;r=i.next()){var a=(r=r.value).slice(2,r.length-1),o=t.get(a);if(!o)throw new le(2,4,4039,a);n=n.replace(r,o)}return n}function ec(e,t){var n=_u(e,t);if(!n)throw new le(2,4,4024,t);return n}function tc(e,t){e.c=t,e.b&&e.b.Pb(e.c==sc),e.c!=sc||e.h.stop()}function nc(e,t,n){if(!e.m)throw new le(2,7,7001);return t=e.s.networkingEngine.request(n,t),Tt(e.m,t),t.promise}V("shaka.net.DataUriPlugin",Mu),Mu.parse=Nu,kt("data",Nu),(i=Uu.prototype).configure=function(e){this.i=e},i.start=function(e,t){var n,i,r=this;return P((function(a){return 1==a.a?(r.s=t,E(a,nc(r,_t([e],r.i.retryParameters),0),2)):3!=a.a?(n=a.b,r.J=n.uri,E(a,function(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,m;return P((function(v){switch(v.a){case 1:if(0!=(n=xu(e.H,t,e.J)).type)throw new le(2,4,4022);for(var y=u(Au(n.V,"EXT-X-DEFINE")),b=y.next();!b.done;b=y.next()){var T=b.value;b=yu(T,"NAME"),T=yu(T,"VALUE"),b&&T&&(e.j.has(b)||e.j.set(b,T))}for(i=Au(n.V,"EXT-X-MEDIA"),b=(y=u(r=Au(n.V,"EXT-X-STREAM-INF"))).next();!b.done;b=y.next()){var k=b.value;T=yu(k,"AUDIO"),b=yu(k,"VIDEO");var _=yu(k,"SUBTITLES");if(k=Hu(e,k),_){var w=Zu("text",k);e.f.set(_,w),vt(k,w)}T&&(_=Qu("audio",k),e.f.set(T,_)),b&&(T=Qu("video",k),e.f.set(b,T))}return E(v,function(e,t){var n;return P((function(i){return 1==i.a?(t=t.filter((function(e){var t=yu(e,"URI")||"";return"SUBTITLES"!=yu(e,"TYPE")&&""!=t})),t.length?E(i,Ku(e,t[0]),2):i.u(2)):(n=t.slice(1).map((function(t){return Ku(e,t)})),E(i,Promise.all(n),0))}))}(e,i),2);case 2:for(b=(y=u(y=ku(i,"CLOSED-CAPTIONS"))).next();!b.done;b=y.next())b=ju(_=b.value),T=bu(_,"GROUP-ID"),_=bu(_,"INSTREAM-ID"),e.A.get(T)||e.A.set(T,new Map),e.A.get(T).set(_,b);return E(v,function(e,t){var n,i,r;return P((function(a){return 1==a.a?(n=t.map((function(t){var n,i,r,a,o,s,l;return P((function(c){return 1==c.a?(n=yu(t,"FRAME-RATE"),i=Number(bu(t,"BANDWIDTH")),r=yu(t,"RESOLUTION"),a=u(r?r.split("x"):[null,null]),o=a.next().value,s=a.next().value,E(c,function(e,t,n,i){var r,a,o,s,l,c,d,h,p,f,g,m,v,y;return P((function(b){if(1==b.a)return r=Oe,a=Hu(e,t),o=yu(t,"AUDIO"),s=yu(t,"VIDEO"),c=(l=o||s)&&e.g.has(l)?e.g.get(l):[],d={audio:o?c:[],video:s?c:[]},p=!1,f=bu(t,"URI"),g=d.audio.find((function(e){return e&&e.uc==f})),m=Zu(r.Da,a),v=n||i||m,1!=a.length||v?!c.length&&1<a.length?(h=r.Da,a=[a.join(",")]):d.audio.length&&g?(h=r.fb,p=!0):h=d.video.length?r.fb:r.Da:h=r.fb,p?b.u(2):E(b,function(e,t,n,i){var r,a,o,s;return P((function(l){if(1==l.a){if(r=Ju(bu(t,"URI"),e.j),e.a.has(r))return l.return(e.a.get(r));var u=yu(t,"CLOSED-CAPTIONS");return a="video"==i&&u&&"NONE"!=u?e.A.get(u):null,o=Qu(i,n),E(l,Gu(e,r,o,i,"und",!1,null,null,a,null),2)}return null==(s=l.b)?l.return(null):e.a.has(r)?l.return(e.a.get(r)):(e.a.set(r,s),l.return(s))}))}(e,t,a,h),3);if(2!=b.a&&(y=b.b),y)d[y.stream.type]=[y];else if(null===y)return b.return(null);return function(e){for(var t=(e=u(e.audio.concat(e.video))).next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter((function(e){return"mp4a.40.34"!=e})),t.stream.codecs=n.join(",")}}(d),b.return(d)}))}(e,t,r,n),2)):(l=c.b)?c.return(function(e,t,n,i,r,a,o){for(var s=u(n),l=s.next();!l.done;l=s.next()){var c=a,d=o;(l=l.value.stream)&&(l.width=Number(r)||void 0,l.height=Number(c)||void 0,l.frameRate=Number(d)||void 0)}for(r=e.i.disableAudio,(!t.length||r)&&(t=[null]),r=e.i.disableVideo,(!n.length||r)&&(n=[null]),r=[],t=u(t),a=t.next();!a.done;a=t.next())for(a=a.value,o=u(n),s=o.next();!s.done;s=o.next()){var h=s.value;s=a?a.stream:null,l=h?h.stream:null,c=a?a.stream.drmInfos:null,d=h?h.stream.drmInfos:null,h=(h?h.uc:"")+" - "+(a?a.uc:""),s&&l&&c.length&&d.length&&!(0<bn(c,d).length)||e.ta.has(h)||(s={id:e.Ca++,language:s?s.language:"und",primary:!!s&&s.primary||!!l&&l.primary,audio:s,video:l,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0},r.push(s),e.ta.add(h))}return r}(e,l.audio,l.video,i,o,s,n)):c.return([])}))})),E(a,Promise.all(n),2)):(i=a.b,r=(r=i.reduce(Ie,[])).filter((function(e){return null!=e})),a.return(r))}))}(e,r),3);case 3:return a=v.b,E(v,function(e,t){var n,i,r,a,o,s,l,c,d,h,p;return P((function(f){if(1==f.a)return n=ku(t,"SUBTITLES"),i=n.map((function(t){var n,i;return P((function(r){if(1==r.a)return e.i.disableText?r.return(null):(A(r,2),E(r,Ku(e,t),4));if(2!=r.a)return n=r.b,r.return(n.stream);if(i=S(r),e.i.hls.ignoreTextStreamFailures)return r.return(null);throw i}))})),E(f,Promise.all(i),2);for(r=f.b,a=u(n),o=a.next();!o.done;o=a.next())if(s=o.value,l=bu(s,"GROUP-ID"),(c=e.f.get(l))&&(d=e.g.get(l)))for(h=u(d),p=h.next();!p.done;p=h.next())p.value.stream.codecs=c;return f.return(r.filter((function(e){return e})))}))}(e,i),4);case 4:if(o=v.b,!e.s)throw new le(2,7,7001);if(e.Ba&&0==a.length)throw new le(2,4,4034);for(l=s=1/0,c=u(e.a.values()),d=c.next();!d.done;d=c.next())h=d.value,s=Math.min(s,h.Jd),"text"!=h.stream.type&&(l=Math.min(l,h.Je-h.Jd));if(e.c!=sc?(e.b=new nr(0,e.i.defaultPresentationDelay||3*e.M),e.b.Pb(!1)):(e.b=new nr(null,0),e.b.Pb(!0)),Yu(e),e.c!=sc)e.ca=e.T,p=cc,e.c==p.Zd&&(f=e.b.rc,isNaN(e.i.availabilityWindowOverride)||(f=e.i.availabilityWindowOverride),e.b.pd(f));else for(e.b.za(l),e.b.offset(-s),g=u(e.a.values()),d=g.next();!d.done;d=g.next())(m=d.value).stream.segmentIndex.offset(-s),m.stream.segmentIndex.Ka(0,l);return e.o={presentationTimeline:e.b,variants:a,textStreams:o,offlineSessionIds:[],minBufferTime:0},e.s.makeTextStreamsForClosedCaptions(e.o),E(v,e.s.filter(e.o),0)}}))}(r,n.data),3)):(0<(i=r.ca)&&r.h.R(i),a.return(r.o))}))},i.stop=function(){this.h&&(this.h.stop(),this.h=null);var e=[];return this.m&&(e.push(this.m.destroy()),this.m=null),this.i=this.s=null,this.ta.clear(),this.o=null,this.a.clear(),this.g.clear(),this.f.clear(),this.j.clear(),Promise.all(e)},i.update=function(){var e,t,n,i=this;return P((function(r){if(1==r.a)return i.c==sc?r.return():(e=[],i.D=null,(t=Array.from(i.a.values())).length?E(r,Fu(i,t[0]),2):r.u(2));for(n=1;n<t.length;n++)e.push(Fu(i,t[n]));return E(r,Promise.all(e),0)}))},i.onExpirationUpdated=function(){},i.Kb=function(){var e,t,n=this;return P((function(i){return 1==i.a?n.s?(A(i,2),E(i,n.update(),4)):i.return():2!=i.a?(e=n.ca,n.h.R(e),_(i,0)):(t=S(i),n.s?(t.severity=1,n.s.onError(t),n.h.R(.1),void T(i)):i.return())}))},V("shaka.hls.HlsParser",Uu);var ic={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},rc=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],ac={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}},oc={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=bu(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Pe("com.widevine.alpha",[{initDataType:"cenc",initData:t=ae((t=Bu(t=bu(e,"URI"))).data)}]),(e=yu(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null}},sc="VOD",lc="EVENT",uc="LIVE",cc={$d:sc,sf:lc,Zd:uc};function dc(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,Nd:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=Ve(t)}catch(e){}throw new le(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function hc(){}function pc(e,t,n,i){var r=new yc;Ft(t.headers).forEach((function(e,t){r.append(t,e)}));var a=new mc,o={wd:!1,Wd:!1};if(e=function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f,g,m,v;return P((function(y){switch(y.a){case 1:return a=gc,o=vc,c=u=0,d=Date.now(),A(y,2),E(y,a(e,n),4);case 4:return s=y.b,h=s.clone().body.getReader(),f=(p=s.headers.get("Content-Length"))?parseInt(p,10):0,g=function(e){function t(){var n,i;return P((function(a){switch(a.a){case 1:return A(a,2),E(a,h.read(),4);case 4:n=a.b,_(a,3);break;case 2:return S(a),a.return();case 3:n.done||(u+=n.value.byteLength),(100<(i=Date.now())-d||n.done)&&(r(i-d,u-c,f-u),c=u,d=i),n.done?e.close():(e.enqueue(n.value),t()),T(a)}}))}t()},new o({start:g}),E(y,s.arrayBuffer(),5);case 5:l=y.b,_(y,3);break;case 2:if(m=S(y),i.wd)throw new le(1,1,7001,e,t);if(i.Wd)throw new le(1,1,1003,e,t);throw new le(1,1,1002,e,m,t);case 3:return v={},s.headers.forEach((function(e,t){v[t.trim()]=e})),y.return(dc(v,l,s.status,e,s.url,t))}}))}(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i),e=new at(e,(function(){return o.wd=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new nt((function(){o.Wd=!0,a.abort()}));s.R(t/1e3),e.finally((function(){s.stop()}))}return e}function fc(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}Ji.m3u8=function(){return new Uu},Zi["application/x-mpegurl"]=function(){return new Uu},Zi["application/vnd.apple.mpegurl"]=function(){return new Uu},V("shaka.net.HttpFetchPlugin",hc),hc.isSupported=fc,hc.parse=pc;var gc=e.fetch,mc=e.AbortController,vc=e.ReadableStream,yc=e.Headers;function bc(){}function Ec(e,t,n,i){var r=new Tc,a=Date.now(),o=0,s=new Promise((function(s,l){for(var c in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){l(new le(1,1,7001,e,n))},r.onload=function(t){for(var i=(t=t.target).getAllResponseHeaders().trim().split("\r\n"),r={},a=(i=u(i)).next();!a.done;a=i.next())r[(a=a.value.split(": "))[0].toLowerCase()]=a.slice(1).join(": ");try{var o=dc(r,t.response,t.status,e,t.responseURL,n);s(o)}catch(e){l(e)}},r.onerror=function(t){l(new le(1,1,1002,e,t,n))},r.ontimeout=function(){l(new le(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(i(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)r.setRequestHeader(c.toLowerCase(),t.headers[c]);r.send(t.body)}));return new at(s,(function(){return r.abort(),Promise.resolve()}))}fc()&&(kt("http",pc,2),kt("https",pc,2)),V("shaka.net.HttpXHRPlugin",bc),bc.parse=Ec;var Tc=e.XMLHttpRequest;function Ac(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function kc(e){var t=this;this.N=e,this.a=new Map,this.F=new xt((function(){var e=Array.from(t.a.values());return Promise.all(e.map((function(e){return e.catch((function(){}))})))})),this.b=[],this.Md=function(){},this.Ld=function(){},this.Cb=new Ac}function _c(e){var t=e.b.map((function(e){return e()}));return e.b=[],Promise.all(t)}function Sc(e,t,n,i,r,a){Lt(e.F);var o=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(e.Cb,i);return i=(e.a.get(t)||Promise.resolve()).then((function(){var t,i,s,l,u,c,d;return P((function(h){if(1==h.a)return E(h,function(e,t){var n,i,r,a;return P((function(o){return 1==o.a?(n=It,i=e.N.request(n,t),r=function(){return i.abort()},e.b.push(r),E(o,i.promise,2)):(a=o.b,vt(e.b,r),o.return(a.data))}))}(e,n),2);if(t=h.b,e.F.a)throw new le(2,9,7001);if(r)for(l in i=ae(t),(s=new Qs(i)).data)u=Number(l),c=s.data[u],d=s.a[u],e.Ld(c,d);e.Cb.close(o,t.byteLength);var p=e.Cb;return e.Md(0==p.b?0:p.f/p.b,e.Cb.a),h.return(a(t))}))})),e.a.set(t,i),i}function wc(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new Me,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function Cc(e,t){return new Promise((function(n,i){var r=e.b.openCursor();r.onerror=i,r.onsuccess=function(){var e;return P((function(i){if(1==i.a)return null==r.result?(n(),i.return()):(e=r.result,E(i,t(e.key,e.value,e),2));e.continue(),T(i)}))}}))}function Ic(e){this.b=e,this.a=[]}function Dc(e,t){return Rc(e,t,"readwrite")}function Rc(e,t,n){var i=new wc(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then((function(){vt(e.a,i)}),(function(){vt(e.a,i)})),i}function xc(e,t,n){this.b=new Ic(e),this.c=t,this.a=n}function Lc(e){return Promise.reject(new le(2,9,9011,"Cannot add new value to "+e))}function Pc(e,t,n,i){t=(e=Dc(e.b,t)).store();for(var r={},a=(n=u(n)).next();!a.done;r={Vb:r.Vb},a=n.next())r.Vb=a.value,t.delete(r.Vb).onsuccess=function(e){return function(){return i(e.Vb)}}(r);return e.promise()}function Oc(e,t,n){var i,r,a,o,s,l,c;return P((function(d){if(1==d.a){for(i=Rc(e.b,t,"readonly"),r=i.store(),a={},o=[],s={},l=u(n),c=l.next();!c.done;s={wb:s.wb,ub:s.ub},c=l.next())s.ub=c.value,s.wb=r.get(s.ub),s.wb.onsuccess=function(e){return function(){null==e.wb.result&&o.push(e.ub),a[e.ub]=e.wb.result}}(s);return E(d,i.promise(),2)}if(o.length)throw new le(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function Mc(e){this.a=new Ic(e)}function Nc(){this.a=new Map}function Bc(e,t,n){if(!(e=e.a.get(t)))throw new le(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new le(2,9,9013,"Could not find cell with name "+n);return t}function Uc(e,t){Fc.set(e,t)}kt("http",Ec,1),kt("https",Ec,1),Ac.prototype.close=function(e,t){if(this.c.has(e)){var n=this.c.get(e);this.c.delete(e),this.f+=n,this.a+=t}},kc.prototype.destroy=function(){return this.F.destroy()},wc.prototype.abort=function(){var e=this;return P((function(t){if(1==t.a){try{e.c.abort()}catch(e){}return A(t,2),E(t,e.a,4)}if(2!=t.a)return _(t,0);S(t),T(t)}))},wc.prototype.store=function(){return this.b},wc.prototype.promise=function(){return this.a},Ic.prototype.destroy=function(){return Promise.all(this.a.map((function(e){return e.abort()})))},(i=xc.prototype).destroy=function(){return this.b.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Lc(this.c)},i.removeSegments=function(e,t){return Pc(this,this.c,e,t)},i.getSegments=function(e){var t,n=this;return P((function(i){return 1==i.a?E(i,Oc(n,n.c,e),2):(t=i.b,i.return(t.map((function(e){return n.xd(e)}))))}))},i.addManifests=function(){return Lc(this.a)},i.updateManifestExpiration=function(e,t){var n=Dc(this.b,this.a),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return Pc(this,this.a,e,t)},i.getManifests=function(e){var t,n=this;return P((function(i){return 1==i.a?E(i,Oc(n,n.a,e),2):(t=i.b,i.return(Promise.all(t.map((function(e){return n.Bb(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return P((function(i){return 1==i.a?(e=Rc(n.b,n.a,"readonly"),t=new Map,E(i,Cc(e,(function(e,i){var r;return P((function(a){if(1==a.a)return E(a,n.Bb(i),2);r=a.b,t.set(e,r),T(a)}))})),2)):3!=i.a?E(i,e.promise(),3):i.return(t)}))},i.xd=function(e){return e},i.Bb=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,a,o,s,l,c=this;return P((function(d){if(1==d.a){for(n=Dc(c.b,e),i=n.store(),r=[],a={},o=u(t),s=o.next();!s.done;a={Wb:a.Wb},s=o.next())l=s.value,a.Wb=i.add(l),a.Wb.onsuccess=function(e){return function(){r.push(e.Wb.result)}}(a);return E(d,n.promise(),2)}return d.return(r)}))},Mc.prototype.destroy=function(){return this.a.destroy()},Mc.prototype.getAll=function(){var e,t,n=this;return P((function(i){return 1==i.a?(e=Rc(n.a,"session-ids","readonly"),t=[],E(i,Cc(e,(function(e,n){t.push(n)})),2)):3!=i.a?E(i,e.promise(),3):i.return(t)}))},Mc.prototype.add=function(e){for(var t=Dc(this.a,"session-ids"),n=t.store(),i=(e=u(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Mc.prototype.remove=function(e){var t,n=this;return P((function(i){return 1==i.a?E(i,Cc(t=Dc(n.a,"session-ids"),(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2):E(i,t.promise(),0)}))},Nc.prototype.destroy=function(){for(var e=[],t=u(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},Nc.prototype.init=function(){var e=this;Fc.forEach((function(t,n){var i=t();i&&e.a.set(n,i)}));for(var t=[],n=u(this.a.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},V("shaka.offline.StorageMuxer",Nc),Nc.unregister=function(e){Fc.delete(e)},Nc.register=Uc,Nc.prototype.destroy=Nc.prototype.destroy;var Fc=new Map;function Vc(){xc.apply(this,arguments)}function Hc(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=u(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=u(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,a=u(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(a=u(t)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=u(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=u(e)).next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=u(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return function(e,t,n){var i=e.initSegmentUri?jc(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=jc(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r}})),variantIds:e.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}(n,e.startTime,t)}))}function jc(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new le(2,9,9004,"Could not parse uri "+e)}function Kc(){xc.apply(this,arguments)}function Gc(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey}})),variantIds:e.variantIds,roles:[],audioSamplingRate:null,channelsCount:null,closedCaptions:null}}function Wc(){xc.apply(this,arguments)}function zc(){this.h=this.f=this.c=this.b=this.a=this.g=null}function Yc(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function qc(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new Yc(t,n,i,Number(e[4])):null}function $c(e,t){this.b=e,this.a=t}function Xc(e,t){var n=new nr(null,0);n.za(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=function(e,t,n,i){for(var r=new Set,a=u(t),o=a.next();!o.done;o=a.next()){var s=u(o.value.variantIds);for(o=s.next();!o.done;o=s.next())r.add(o.value)}for(a=u(n),o=a.next();!o.done;o=a.next())for(s=u(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);for(a=new Map,r=u(r),o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0});for(t=u(t),r=t.next();!r.done;r=t.next())for(r=r.value,o=Qc(e,r,i),s=u(r.variantIds),r=s.next();!r.done;r=s.next())(r=a.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=u(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Qc(e,r,i),o=u(r.variantIds),r=o.next();!r.done;r=o.next())(r=a.get(r.value)).primary=r.primary||t.primary,r.video=t;return a}(e,i,r,n),r=t.streams.filter((function(e){return"text"==e.type})).map((function(t){return Qc(e,t,n)}));var a=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var o=u(i.values()),s=o.next();!s.done;s=o.next())(s=s.value).audio&&s.audio.encrypted&&(s.audio.drmInfos=a),s.video&&s.video.encrypted&&(s.video.drmInfos=a);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r}}function Qc(e,t,n){var i=t.segments.map((function(t){return function(e,t){var n=new Yc("segment",e.b,e.a,t.dataKey);return new tr(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new Yc("segment",e.b,e.a,t);return new er((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd)}(e,t)}));return n.ob(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ar(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,closedCaptions:t.closedCaptions}}function Zc(){this.a=null}function Jc(){}function ed(e){var t=qc(e);return e=t&&"manifest"==t.a?lt(e={uri:e,Nd:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):t&&"segment"==t.a?function(e,t){var n=new Nc;return lt(void 0).U((function(){return n.init()})).U((function(){return Bc(n,t.ya(),t.ba())})).U((function(e){return e.getSegments([t.key()])})).U((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):ot(new le(2,1,9004,e))}function td(e,t,n){var i,r,a,o,s,l;return P((function(c){switch(c.a){case 1:i=[];for(var d=[],h=u(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var f=!1,g=u(d),m=g.next();!m.done;m=g.next())if(nd((m=m.value).info,p)){m.sessionIds.push(p.sessionId),f=!0;break}f||d.push({info:p,sessionIds:[p.sessionId]})}r=u(d),a=r.next();case 2:if(a.done){c.u(4);break}return o=a.value,s=function(e,t,n){var i,r;return P((function(a){switch(a.a){case 1:return i=new tn({nb:t,onError:function(){},oc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(a,2),i.configure(e),E(a,function(e,t,n,i,r,a){var o=new Map;return(r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,initData:null,keyIds:null}],o.set(t,r),hn(e,o)}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:_(a,3);break;case 2:return S(a),E(a,i.destroy(),5);case 5:case 9:return a.return([]);case 3:return A(a,6),E(a,an(i),8);case 8:_(a,7);break;case 6:return S(a),E(a,i.destroy(),9);case 7:return r=[],E(a,Promise.all(n.sessionIds.map((function(e){return P((function(t){return 1==t.a?(A(t,2),E(t,function(e,t){var n,i,r;return P((function(a){return 1==a.a?E(a,pn(e,t),2):(n=a.b)?(i=[],(r=e.f.get(n))&&(r.Aa=new Me,i.push(r.Aa)),i.push(n.remove()),E(a,Promise.all(i),0)):a.return()}))}(i,e),4)):2!=t.a?(r.push(e),_(t,0)):(S(t),void T(t))}))}))),10);case 10:return E(a,i.destroy(),11);case 11:return a.return(r)}}))}(e,t,o),E(c,s,5);case 5:l=c.b,i=i.concat(l),a=r.next(),c.u(2);break;case 4:return c.return(i)}}))}function nd(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&yt(e.audioCapabilities,t.audioCapabilities,n)&&yt(e.videoCapabilities,t.videoCapabilities,n)}function id(e,t){var n=Xc(new $c(e.ya(),e.ba()),t),i=t.appMetadata||{};return n=rd(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function rd(e){for(var t=[],n=function(e){return e.filter((function(e){return Li(e)}))}(e.variants),i=(n=u(n)).next();!i.done;i=n.next())t.push(Ci(i.value));for(n=(e=u(e.textStreams)).next();!n.done;n=e.next())t.push(Ii(n.value));return t}function ad(){this.a={}}function od(e,t){var n=e.a[t];return null==n&&(n=0),n}function sd(e){var t=this;if(e&&e.constructor!=Ma)throw new le(2,9,9008);this.N=this.i=null,e?(this.i=e.i,this.N=e.Fb()):(this.i=wa(),this.N=new At),this.sc=[],this.Lb=[],this.dd=[],this.a=new Map,this.a.set(null,Promise.resolve(null)),this.b=new Map;var n=!e;this.F=new xt((function(){var e,i,r,a,o;return P((function(s){switch(s.a){case 1:return E(s,Promise.all(t.dd.map((function(e){return _c(e)}))),2);case 2:for(e=function(){},i=[],r=u(t.Lb),a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return E(s,Promise.all(i),3);case 3:if(!n){s.u(4);break}return E(s,t.N.destroy(),4);case 4:t.i=null,t.N=null,T(s)}}))}))}function ld(){if(zt())e:{for(var e=u(Fc.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function ud(e,t){for(var n=[],i=u(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:Kt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:Kt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function cd(e,t,n){return P((function(i){return E(i,function(e,t,n,i){var r,a,o;return P((function(s){return 1==s.a?i.drmInfo?(r=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new le(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(n),a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:ud(i,!1),videoCapabilities:ud(i,!0)}})),E(s,td(t,e,a),2)):s.return():3!=s.a?(o=s.b,E(s,r.remove(o),3)):E(s,r.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.N,e.i.drm,n,t),0)}))}function dd(e,t,n){function i(){}var r=function(e){for(var t=[],n=(e=u(e.streams)).next();!n.done;n=e.next())for(var i=(n=u(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.push(i.initSegmentKey),t.push(i.dataKey);return t}(n);return id(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function hd(e,t,n,i,r,a,o){var s={id:a.id,originalId:a.originalId,primary:a.primary,type:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,encrypted:a.encrypted,keyIds:a.keyIds,segments:[],variantIds:[],roles:a.roles,channelsCount:a.channelsCount,audioSamplingRate:a.audioSamplingRate,closedCaptions:a.closedCaptions},l=a.id;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(a,r.presentationTimeline.Ra(),(function(r){var u=function(e,t,n,i,r,a,o,s){return e.a.has(o)?e.a.get(o):(s=zr(o.c(),o.b,o.a,s.streaming.retryParameters),t=Sc(t,n,s,.5*od(a,i),!0,(function(t){var n;return P((function(i){return 1==i.a?E(i,r.addSegments([{data:t}]),2):(n=i.b,e.sc.push(n[0]),i.return(n[0]))}))})),e.a.set(o,t),t)}(e,t,l,a.id,n,i,r.f,o),c=function(e,t,n,i,r,a,o,s){var l=[o.c()[0],o.b,o.a].join("-");return e.b.has(l)?e.b.get(l):(s=zr(o.c(),o.b,o.a,s.streaming.retryParameters),t=Sc(t,n,s,function(e,t,n){return n=n.endTime-n.startTime,od(e,t)*n}(a,i,o),!1,(function(t){var n;return P((function(i){return 1==i.a?E(i,r.addSegments([{data:t}]),2):(n=i.b,e.sc.push(n[0]),i.return(n[0]))}))})),e.b.set(l,t),t)}(e,t,l,a.id,n,i,r,o);!function(e,t,n){Lt(e.F);var i=(e.a.get(t)||Promise.resolve()).then((function(){return P((function(e){return E(e,n(),0)}))}));e.a.set(t,i)}(t,l,(function(){var e,t;return P((function(n){return 1==n.a?E(n,u,2):3!=n.a?(e=n.b,E(n,c,3)):(t=n.b,s.segments.push({initSegmentKey:e,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,dataKey:t}),void T(n))}))}))})),s}function pd(e){if(e.F.a)throw new le(2,9,7001)}function fd(){if(!ld())throw new le(2,9,9e3)}function gd(e,t){return P((function(n){return 1==n.a?(e.Lb.push(t),k(n),E(n,t,4)):2!=n.a?n.return(n.b):(w(n),vt(e.Lb,t),C(n,0))}))}function md(e){for(var t=new Set,n=u(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=(e=u(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}m(Vc,xc),Vc.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return P((function(o){return n=Dc(a.b,a.a),i=n.store(),r=new Me,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new le(2,9,9012,"Could not find values for "+e))},E(o,Promise.all([n.promise(),r]),0)}))},Vc.prototype.Bb=function(e){var t,n,i,r,a,o;return P((function(s){if(1==s.a){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=Hc(e.periods[n],r),t.push(a);return E(s,Kl(t),2)}return o=s.b,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})}))},Vc.prototype.xd=function(e){return{data:e.data}},m(Kc,xc),Kc.prototype.Bb=function(e){var t,n,i,r,a,o;return P((function(s){if(1==s.a){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var l=e.periods[n],c=[],d=u(l.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&c.push(Gc(h,l.startTime,l.startTime+r));a=c,t.push(a)}return E(s,Kl(t),2)}return o=s.b,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o})}))},m(Wc,xc),Wc.prototype.hasFixedKeySpace=function(){return!1},Wc.prototype.addSegments=function(e){return this.add(this.c,e)},Wc.prototype.addManifests=function(e){return this.add(this.a,e)},Wc.prototype.Bb=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=zc.prototype).init=function(){var t=this,n=new Me,i=e.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){var e=i.result;t.g=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new Vc(e,"segment","manifest"):null,t.a=r,r=(r=e.objectStoreNames).contains("manifest-v2")&&r.contains("segment-v2")?new Kc(e,"segment-v2","manifest-v2"):null,t.b=r,r=(r=e.objectStoreNames).contains("manifest-v3")&&r.contains("segment-v3")?new Kc(e,"segment-v3","manifest-v3"):null,t.c=r,r=(r=e.objectStoreNames).contains("manifest-v5")&&r.contains("segment-v5")?new Wc(e,"segment-v5","manifest-v5"):null,t.f=r,e=e.objectStoreNames.contains("session-ids")?new Mc(e):null,t.h=e,n.resolve()},i.onupgradeneeded=function(){for(var e=i.result,t=u(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new le(2,9,9001,i.error)),e.preventDefault()},n},i.destroy=function(){var e=this;return P((function(t){switch(t.a){case 1:if(!e.a){t.u(2);break}return E(t,e.a.destroy(),2);case 2:if(!e.b){t.u(4);break}return E(t,e.b.destroy(),4);case 4:if(!e.c){t.u(6);break}return E(t,e.c.destroy(),6);case 6:if(!e.f){t.u(8);break}return E(t,e.f.destroy(),8);case 8:if(!e.h){t.u(10);break}return E(t,e.h.destroy(),10);case 10:e.g&&e.g.close(),T(t)}}))},i.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),this.f&&e.set("v5",this.f),e},i.getEmeSessionCell=function(){return this.h},i.erase=function(){var t=this;return P((function(n){switch(n.a){case 1:if(!t.a){n.u(2);break}return E(n,t.a.destroy(),2);case 2:if(!t.b){n.u(4);break}return E(n,t.b.destroy(),4);case 4:if(!t.c){n.u(6);break}return E(n,t.c.destroy(),6);case 6:if(!t.f){n.u(8);break}return E(n,t.f.destroy(),8);case 8:return t.g&&t.g.close(),E(n,function(){var t=new Me,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new le(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.g=null,t.a=null,t.b=null,t.c=null,t.f=null,E(n,t.init(),0)}}))},Uc("idb",(function(){return Qt("CrKey")||!e.indexedDB?null:new zc})),Yc.prototype.ya=function(){return this.g},Yc.prototype.ba=function(){return this.f},Yc.prototype.key=function(){return this.c},Yc.prototype.toString=function(){return this.b},(i=Zc.prototype).configure=function(){},i.start=function(e,t){var n,i,r,a,o,s,l=this;return P((function(u){switch(u.a){case 1:if(n=qc(e),l.a=n,null==n||"manifest"!=n.a)throw new le(2,1,9004,e);return i=new Nc,k(u),E(u,i.init(),4);case 4:return E(u,Bc(i,n.ya(),n.ba()),5);case 5:return E(u,u.b.getManifests([n.key()]),6);case 6:return r=u.b,a=r[0],o=new $c(n.ya(),n.ba()),s=Xc(o,a),t.makeTextStreamsForClosedCaptions(s),u.return(s);case 2:return w(u),E(u,i.destroy(),7);case 7:C(u,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,a,o,s,l,u=this;return P((function(c){switch(c.a){case 1:return n=u.a,i=new Nc,A(c,2,3),E(c,i.init(),5);case 5:return E(c,Bc(i,n.ya(),n.ba()),6);case 6:return E(c,(r=c.b).getManifests([n.key()]),7);case 7:if(a=c.b,o=a[0],s=o.sessionIds.includes(e),l=null==o.expiration||o.expiration>t,!s||!l){c.u(3);break}return E(c,r.updateManifestExpiration(n.key(),t),3);case 3:return w(c),E(c,i.destroy(),10);case 10:C(c,0);break;case 2:S(c),c.u(3)}}))},Zi["application/x-offline-manifest"]=function(){return new Zc},V("shaka.offline.OfflineScheme",Jc),Jc.plugin=ed,kt("offline",ed),(i=sd.prototype).destroy=function(){return this.F.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=_a(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(_e("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),Ca(this.i,e)},i.getConfiguration=function(){var e=wa();return Ca(e,this.i,wa()),e},i.Fb=function(){return this.N},i.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new kc(this.N);this.dd.push(a),t=function(e,t,n,i,r,a){var o,s,l,c,d,h,p,f,g,m;return P((function(v){switch(v.a){case 1:return fd(),s=o=null,l=new Nc,d=c=null,A(v,2,3),E(v,i(),5);case 5:return o=v.b,E(v,function(e,t,n,i){var r,a,o,s,l;return P((function(u){if(1==u.a)return r=null,a=e.N,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e}},n.configure(i.manifest),pd(e),E(u,n.start(t,o),2);if(3!=u.a)return s=u.b,pd(e),l=md(s),E(u,Promise.all(Z(l,(function(e){return e.createSegmentIndex()}))),3);if(pd(e),r)throw r;return u.return(s)}))}(e,t,o,r),6);case 6:if(h=v.b,pd(e),h.presentationTimeline.S()||h.presentationTimeline.Ua())throw new le(2,9,9005,t);return E(v,function(e,t,n,i){var r;return P((function(a){switch(a.a){case 1:return(r=new tn({nb:e.N,onError:n,oc:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(i.drm),E(a,function(e,t,n){return e.v=[],e.A=n,rn(e,t)}(r,t.variants,i.offline.usePersistentLicense),2);case 2:return E(a,an(r),3);case 3:return E(a,on(r),4);case 4:return a.return(r)}}))}(e,h,(function(e){d=d||e}),r),7);case 7:if(s=v.b,pd(e),d)throw d;return E(v,e.gb(h,s,r),8);case 8:return E(v,l.init(),9);case 9:return pd(e),E(v,function(e){var t=null;if(e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{ya:n,ba:i},ba:e})}))})),t)return t;throw new le(2,9,9013,"Could not find a cell that supports add-operations")}(l),10);case 10:return c=v.b,pd(e),E(v,function(e,t,n,i,r,a,o,s){var l,c,d,h,p,f,g,m,v,y;return P((function(b){switch(b.a){case 1:return l=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=rd(t),appMetadata:n}}(r,i,a),c=o.offline.progressCallback,function(e,t,n){e.Md=t,e.Ld=n}(s,(function(e,t){l.size=t,c(l,e)}),(function(e,t){p&&o.offline.usePersistentLicense&&f==t&&sn(n,"cenc",e)})),d=i.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})),h=i.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))})),f=null,(p=d&&!h)&&(g=n.c,f=vd.get(g.keySystem)),k(b),v=m=function(e,t,n,i,r,a,o,s){for(var l=new ad,c=u(r.variants),d=c.next();!d.done;d=c.next()){var h=l,p=(d=d.value).audio,f=d.video;if(p&&!f&&(h.a[p.id]=p.bandwidth||d.bandwidth),!p&&f&&(h.a[f.id]=f.bandwidth||d.bandwidth),p&&f){var g=p.bandwidth||393216,m=f.bandwidth||d.bandwidth-g;0>=m&&(m=d.bandwidth),h.a[p.id]=g,h.a[f.id]=m}}for(c=u(r.textStreams),h=c.next();!h.done;h=c.next())l.a[h.value.id]=52;for(h=md(r),c=new Map,h=u(h),d=h.next();!d.done;d=h.next())d=d.value,p=hd(e,t,n,l,r,d,s),c.set(d.id,p);for(e=u(r.variants),d=e.next();!d.done;d=e.next())(t=d.value).audio&&c.get(t.audio.id).variantIds.push(t.id),t.video&&c.get(t.video.id).variantIds.push(t.id);return e=Array.from(c.values()),s=s.offline.usePersistentLicense,(t=i.c)&&s&&(t.initData=[]),{creationTime:Date.now(),originalManifestUri:a,duration:r.presentationTimeline.getDuration(),size:0,expiration:i.Eb(),streams:e,sessionIds:s?cn(i):[],drmInfo:t,appMetadata:o}}(e,s,t,n,i,r,a,o),E(b,function(e){return P((function(t){return 1==t.a?E(t,Promise.all(e.a.values()),2):t.return(e.Cb.a)}))}(s),4);case 4:if(v.size=b.b,m.expiration=n.Eb(),y=cn(n),m.sessionIds=o.offline.usePersistentLicense?y:[],d&&o.offline.usePersistentLicense&&!y.length)throw new le(2,9,9007);return b.return(m);case 2:return w(b),E(b,s.destroy(),5);case 5:C(b,0)}}))}(e,c.ba,s,h,t,n,r,a),11);case 11:if(p=v.b,pd(e),d)throw d;return E(v,c.ba.addManifests([p]),12);case 12:return f=v.b,pd(e),g=new Yc("manifest",c.path.ya,c.path.ba,f[0]),v.return(id(g,p));case 3:return w(v),e.sc=[],E(v,l.destroy(),13);case 13:if(!o){v.u(14);break}return E(v,o.stop(),14);case 14:if(!s){v.u(16);break}return E(v,s.destroy(),16);case 16:C(v,0);break;case 2:if(m=S(v),!c){v.u(18);break}return E(v,c.ba.removeSegments(e.sc,(function(){})),18);case 18:throw d||m}}))}(this,e,t||{},(function(){var t;return P((function(a){return 1==a.a?E(a,Xi(e,i.N,r.manifest.retryParameters,n||null),2):(t=a.b,a.return(xe(t)))}))}),r,a);var o=new at(t,(function(){return _c(a)}));return o.finally((function(){vt(i.dd,a)})),o.then=function(e){return _e("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),o.promise.then(e)},function(e,t){var n=t.promise;return e.Lb.push(n),t.finally((function(){vt(e.Lb,n)}))}(this,o)},i.Be=function(){return _e("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},i.gb=function(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,m,v,y;return P((function(b){if(1==b.a){for(i={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return Si(e,t,n)}))}(e,n.restrictions,i),function(e){e.variants=e.variants.filter((function(e){var t=!0;return e.audio&&(t=t&&ti(e.audio)),e.video&&(t=t&&ti(e.video)),t}))}(e),function(e,t){e.variants=e.variants.filter((function(e){return yn(t,e)}))}(e,t),r=[],a=n.preferredAudioChannelCount,_i(e,a),o=u(e.variants),s=o.next();!s.done;s=o.next())l=s.value,r.push(Ci(l));for(c=u(e.textStreams),d=c.next();!d.done;d=c.next())h=d.value,r.push(Ii(h));return E(b,n.offline.trackSelectionCallback(r),2)}for(p=b.b,f=new Set,g=new Set,m=u(p),v=m.next();!v.done;v=m.next())"variant"==(y=v.value).type&&f.add(y.id),"text"==y.type&&g.add(y.id);e.variants=e.variants.filter((function(e){return f.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return g.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=u(t),i=n.next();!i.done;i=n.next())for(var r=(i=u(t)).next();!r.done;r=i.next());for(t=u(e),n=t.next();!n.done;n=t.next())for(n=u(e),i=n.next();!i.done;i=n.next());}(e),T(b)}))},i.remove=function(e){return gd(this,function(e,t){var n,i,r,a,o,s;return P((function(l){switch(l.a){case 1:if(fd(),null==(n=qc(t))||"manifest"!=n.a)throw new le(2,9,9004,t);return i=n,r=new Nc,k(l),E(l,r.init(),4);case 4:return E(l,Bc(r,i.ya(),i.ba()),5);case 5:return E(l,(a=l.b).getManifests([i.key()]),6);case 6:return o=l.b,s=o[0],E(l,Promise.all([cd(e,s,r),dd(a,i,s)]),2);case 2:return w(l),E(l,r.destroy(),8);case 8:C(l,0)}}))}(this,e))},i.Te=function(){return gd(this,function(e){var t,n,i,r,a,o,s,l,c,d;return P((function(h){switch(h.a){case 1:return fd(),t=e.N,n=e.i.drm,i=new Nc,r=!1,k(h),E(h,i.init(),4);case 4:a=[],function(e,t){e.a.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return a.push(e)})),o=u(a),s=o.next();case 5:if(s.done){h.u(2);break}return E(h,(l=s.value).getAll(),8);case 8:return c=h.b,E(h,td(n,t,c),9);case 9:return d=h.b,E(h,l.remove(d),10);case 10:d.length!=c.length&&(r=!0),s=o.next(),h.u(5);break;case 2:return w(h),E(h,i.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!r)}}))}(this))},i.list=function(){return gd(this,P((function(i){switch(i.a){case 1:return fd(),e=[],t=new Nc,k(i),E(i,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.a.forEach((function(e,n){e.getCells().forEach((function(e,i){t({ya:n,ba:i},e)}))}))}(t,(function(t,i){n=n.then((function(){return P((function(n){if(1==n.a)return E(n,i.getAllManifests(),2);n.b.forEach((function(n,i){var r=id(new Yc("manifest",t.ya,t.ba,i),n);e.push(r)})),T(n)}))}))})),E(i,n,2);case 2:return w(i),E(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}})));var e,t,n},V("shaka.offline.Storage",sd),sd.deleteAll=function(){var e;return P((function(t){return 1==t.a?(e=new Nc,k(t),E(t,function(e){var t,n;return P((function(i){return 1==i.a?(t=Array.from(e.a.values()),(n=0<t.length)||Fc.forEach((function(e){(e=e())&&t.push(e)})),E(i,Promise.all(t.map((function(e){return e.erase()}))),2)):n?i.u(0):E(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.a?(w(t),E(t,e.destroy(),5)):C(t,0)}))},sd.prototype.list=sd.prototype.list,sd.prototype.removeEmeSessions=sd.prototype.Te,sd.prototype.remove=sd.prototype.remove,sd.prototype.getStoreInProgress=sd.prototype.Be,sd.prototype.store=sd.prototype.store,sd.prototype.getNetworkingEngine=sd.prototype.Fb,sd.prototype.getConfiguration=sd.prototype.getConfiguration,sd.prototype.configure=sd.prototype.configure,sd.prototype.destroy=sd.prototype.destroy,sd.support=ld;var vd=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function yd(){}function bd(e,t){for(var n={priority:t||0,ce:e},i=u(ee(Ed)),r=i.next();!r.done;r=i.next()){var a=(r=r.value).Y;if(r.item.priority<n.priority)return void Ed.splice(a,0,n)}Ed.push(n)}Wo.offline=ld,V("shaka.polyfill",yd),yd.register=bd,yd.installAll=function(){for(var e=u(Ed),t=e.next();!t.done;t=e.next()){t=t.value;try{t.ce()}catch(e){Y("Error installing polyfill!",e)}}};var Ed=[];function Td(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();if("function"==typeof Event)var n=new Event(t,e);else(n=document.createEvent("Event")).initEvent(t,e.bubbles,e.cancelable);e.target.dispatchEvent(n)}function Ad(e,t,n){"input"==e&&"range"===this.type&&(e="change"),HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function kd(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return(n=e.apply(this,n)).abort=function(){},n}}function _d(e,t){try{var n=new Cd(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Sd(e){var t=this.mediaKeys;return t&&t!=e&&Dd(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Dd(e,this):Promise.resolve()}function wd(e){if(oe(e=ae(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=He(e=Fe(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=re(e),this.dispatchEvent(t)}function Cd(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=u(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,o=!1;if(r.audioCapabilities)for(var s=u(r.audioCapabilities),l=s.next();!l.done;l=s.next())(l=l.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(i.audioCapabilities.push(l),o=!0));if(r.videoCapabilities)for(l=(r=u(r.videoCapabilities)).next();!l.done;l=r.next())(s=l.value).contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(i.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Id(e){this.a=new WebKitMediaKeys(e),this.b=new Pt}function Dd(e,t){if(e.b.Xa(),!t)return Promise.resolve();e.b.l(t,"webkitneedkey",wd);try{return lr(t,HTMLMediaElement.HAVE_METADATA,e.b,(function(){t.webkitSetMediaKeys(e.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Rd(e){pt.call(this),this.f=null,this.g=e,this.c=this.a=null,this.b=new Pt,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new Ld}function xd(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new dt("keystatuseschange"),e.dispatchEvent(n)}function Ld(){this.size=0,this.a=void 0}function Pd(e,t){try{var n=new Md(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Od(e){if(e.initData){var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=re(function(e){if(!e)return e;var t=new Qs(e);if(1>=t.data.length)return e;e=[];for(var n={},i=(t=u(t.data)).next();!i.done;n={Tb:n.Tb},i=t.next())n.Tb=i.value,e.some(function(e){return function(t){return ne(t,e.Tb)}}(n))||e.push(n.Tb);return Qe.apply(We,c(e))}(e.initData)),this.dispatchEvent(t)}}function Md(e,t){this.keySystem=e;for(var n=!1,i=u(t),r=i.next();!r.done;r=i.next()){var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(r=r.value).initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=u(r.audioCapabilities),l=s.next();!l.done;l=s.next())(l=l.value).contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(a.audioCapabilities.push(l),n=!0));if(r.videoCapabilities)for(l=(s=u(r.videoCapabilities)).next();!l.done;l=s.next())(l=l.value).contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,l.contentType.split(";")[0])&&(a.videoCapabilities.push(l),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Nd(e){var t=this.mediaKeys;return t&&t!=e&&Ud(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Ud(e,this):Promise.resolve()}function Bd(e){this.a=new MSMediaKeys(e),this.b=new Pt}function Ud(e,t){if(e.b.Xa(),!t)return Promise.resolve();e.b.l(t,"msneedkey",Od);try{return lr(t,HTMLMediaElement.HAVE_METADATA,e.b,(function(){t.msSetMediaKeys(e.a)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Fd(e){pt.call(this),this.f=null,this.g=e,this.c=this.a=null,this.b=new Pt,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new Hd}function Vd(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new dt("keystatuseschange"),e.dispatchEvent(n)}function Hd(){this.size=0,this.a=void 0}function jd(){return Promise.reject(Error("The key system specified is not supported."))}function Kd(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Gd(){throw new TypeError("Illegal constructor.")}function Wd(){throw this.keySystem="",new TypeError("Illegal constructor.")}function zd(e){return rh?rh+e.charAt(0).toUpperCase()+e.slice(1):e}function Yd(e,t){try{var n=new $d(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function qd(e){var t=this.mediaKeys;return t&&t!=e&&Qd(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Qd(e,this),Promise.resolve()}function $d(e,t){this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.a="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=u(t),o=a.next();!o.done;o=a.next()){var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(o=o.value).initDataTypes,sessionTypes:["temporary"],label:o.label},l=!1;if(o.audioCapabilities)for(var c=u(o.audioCapabilities),d=c.next();!d.done;d=c.next())(d=d.value).contentType&&(l=!0,r.canPlayType(d.contentType.split(";")[0],this.a)&&(s.audioCapabilities.push(d),i=!0));if(o.videoCapabilities)for(d=(c=u(o.videoCapabilities)).next();!d.done;d=c.next())(d=d.value).contentType&&(l=!0,r.canPlayType(d.contentType,this.a)&&(s.videoCapabilities.push(d),i=!0));if(l||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Xd(e){this.g=e,this.a=null,this.b=new Pt,this.c=[],this.f=new Map}function Qd(e,t){e.a=t,e.b.Xa();var n=rh;t&&(e.b.l(t,n+"needkey",(function(t){var n=document.createEvent("CustomEvent");n.initCustomEvent("encrypted",!1,!1,null),n.initDataType="cenc",n.initData=re(t.initData),e.a.dispatchEvent(n)})),e.b.l(t,n+"keymessage",(function(t){var n=Zd(e,t.sessionId);n&&(t=new dt("message",{messageType:null==n.keyStatuses.a?"licenserequest":"licenserenewal",message:t.message}),n.b&&(n.b.resolve(),n.b=null),n.dispatchEvent(t))})),e.b.l(t,n+"keyadded",(function(t){(t=Zd(e,t.sessionId))&&(nh(t,"usable"),t.a&&t.a.resolve(),t.a=null)})),e.b.l(t,n+"keyerror",(function(t){var n=Zd(e,t.sessionId);n&&n.handleError(t)})))}function Zd(e,t){var n=e.f.get(t);return n||((n=e.c.shift())?(n.sessionId=t,e.f.set(t,n),n):null)}function Jd(e,t,n){pt.call(this),this.f=e,this.h=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new Me,this.keyStatuses=new ih}function eh(e,t,n){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{if("persistent-license"==e.g)if(n)var i=ae(He("LOAD_SESSION|"+n));else{var r=He("PERSISTENT|");i=Qe(r,t)}else i=ae(t)}catch(e){return Promise.reject(e)}e.b=new Me;var a=zd("generateKeyRequest");try{e.f[a](e.c,i)}catch(t){if("InvalidStateError"!=t.name)return e.b=null,Promise.reject(t);new nt((function(){try{e.f[a](e.c,i)}catch(t){e.b.reject(t),e.b=null}})).R(.01)}return e.b}function th(e,t,n){if(e.a)e.a.then((function(){return th(e,t,n)})).catch((function(){return th(e,t,n)}));else{if(e.a=t,"webkit-org.w3.clearkey"==e.c){var i=Ue(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.a.reject(Error("Response is not a valid JSON Web Key Set.")),e.a=null),i=qe(r.keys[0].k),r=qe(r.keys[0].kid)}else i=ae(n),r=null;var a=zd("addKey");try{e.f[a](e.c,i,r,e.sessionId)}catch(t){e.a.reject(t),e.a=null}}}function nh(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,n=new dt("keystatuseschange"),e.dispatchEvent(n)}function ih(){this.size=0,this.a=void 0}bd((function(){op()}),-1),bd((function(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Td),document.addEventListener("webkitfullscreenerror",Td),document.addEventListener("mozfullscreenchange",Td),document.addEventListener("mozfullscreenerror",Td),document.addEventListener("MSFullscreenChange",Td),document.addEventListener("MSFullscreenError",Td)}})),bd((function(){Qt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=Ad)})),bd((function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})})),bd((function(){})),bd((function(){var t=Xt();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?(function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}(),12>=t?(kd(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):kd()):(Qt("Tizen 2")||Qt("Tizen 3")||Qt("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=Gt(t)[0]&&e(t)}}())})),Cd.prototype.createMediaKeys=function(){var e=new Id(this.keySystem);return Promise.resolve(e)},Cd.prototype.getConfiguration=function(){return this.a},Id.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Rd(this.a)},Id.prototype.setServerCertificate=function(){return Promise.resolve(!1)},m(Rd,pt),(i=Rd.prototype).generateRequest=function(e,t){var n=this;this.a=new Me;try{var i=this.g.createSession("video/mp4",ae(t));this.f=i,this.sessionId=i.sessionId||"",this.b.l(this.f,"webkitkeymessage",(function(e){n.a&&(n.a.resolve(),n.a=null),e=new dt("message",{messageType:null==n.keyStatuses.a?"license-request":"license-renewal",message:re(e.message)}),n.dispatchEvent(e)})),this.b.l(i,"webkitkeyadded",(function(){n.c&&(xd(n,"usable"),n.c.resolve(),n.c=null)})),this.b.l(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.f.error,null!=n.a)n.a.reject(e),n.a=null;else if(null!=n.c)n.c.reject(e),n.c=null;else switch(n.f.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:xd(n,"output-not-allowed");break;default:xd(n,"internal-error")}})),xd(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.c=new Me;try{this.f.update(ae(e))}catch(e){this.c.reject(e)}return this.c},i.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Xa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Ld.prototype).forEach=function(e){this.a&&e(this.a,Sn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=Sn.value();return!(!this.a||!ne(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},bd((function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Sd,e.MediaKeys=Id,e.MediaKeySystemAccess=Cd,navigator.requestMediaKeySystemAccess=_d)})),Md.prototype.createMediaKeys=function(){var e=new Bd(this.keySystem);return Promise.resolve(e)},Md.prototype.getConfiguration=function(){return this.a},Bd.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Fd(this.a)},Bd.prototype.setServerCertificate=function(){return Promise.resolve(!1)},m(Fd,pt),(i=Fd.prototype).generateRequest=function(e,t){var n=this;this.a=new Me;try{this.f=this.g.createSession("video/mp4",ae(t),null),this.b.l(this.f,"mskeymessage",(function(e){n.a&&(n.a.resolve(),n.a=null),e=new dt("message",{messageType:null==n.keyStatuses.a?"license-request":"license-renewal",message:re(e.message)}),n.dispatchEvent(e)})),this.b.l(this.f,"mskeyadded",(function(){n.a?(Vd(n,"usable"),n.a.resolve(),n.a=null):n.c&&(Vd(n,"usable"),n.c.resolve(),n.c=null)})),this.b.l(this.f,"mskeyerror",(function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=n.f.error,null!=n.a)n.a.reject(e),n.a=null;else if(null!=n.c)n.c.reject(e),n.c=null;else switch(n.f.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Vd(n,"output-not-allowed");break;default:Vd(n,"internal-error")}})),Vd(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.c=new Me;try{this.f.update(ae(e))}catch(e){this.c.reject(e)}return this.c},i.close=function(){try{this.f.close(),this.closed.resolve(),this.b.Xa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Hd.prototype).forEach=function(e){this.a&&e(this.a,Sn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=Sn.value();return!(!this.a||!ne(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},bd((function(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,e.MediaKeys=Bd,e.MediaKeySystemAccess=Md,navigator.requestMediaKeySystemAccess=Pd,HTMLMediaElement.prototype.setMediaKeys=Nd)})),Gd.prototype.createSession=function(){},Gd.prototype.setServerCertificate=function(){},Wd.prototype.getConfiguration=function(){},Wd.prototype.createMediaKeys=function(){},bd((function(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=jd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Kd,e.MediaKeys=Gd,e.MediaKeySystemAccess=Wd)}),-10),$d.prototype.createMediaKeys=function(){var e=new Xd(this.a);return Promise.resolve(e)},$d.prototype.getConfiguration=function(){return this.b},Xd.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.a||document.createElement("video");return t.src||(t.src="about:blank"),e=new Jd(t,this.g,e),this.c.push(e),e},Xd.prototype.setServerCertificate=function(){return Promise.resolve(!1)},m(Jd,pt),(i=Jd.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?nh(this,"output-restricted"):nh(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return eh(this,t,null)},i.load=function(e){return"persistent-license"==this.g?eh(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new Me;return th(this,t,e),t},i.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=zd("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(i=ih.prototype).forEach=function(e){this.a&&e(this.a,Sn.value())},i.get=function(e){if(this.has(e))return this.a},i.has=function(e){var t=Sn.value();return!(!this.a||!ne(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var rh="";function ah(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function oh(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function sh(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function lh(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function uh(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function ch(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function dh(t,n,i){return new e.TextTrackCue(t,n,i)}function hh(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function ph(){}function fh(e){var t=[];if(!e)return t;for(var n=u(e.childNodes),i=n.next();!i.done;i=n.next())(i=i.value).nodeType==Node.ELEMENT_NODE&&"br"!==i.nodeName&&(i=fh(i),t=t.concat(i));return t.length||t.push(e),t}function gh(e){if(!e)return[];for(var t=[],n=(e=u(e.childNodes)).next();!n.done;n=e.next())(n=n.value)instanceof Element&&(n.hasAttribute("begin")?t.push(n):t=t.concat(gh(n)));return t}function mh(e,t){for(var n="",i=u(e.childNodes),r=i.next();!r.done;r=i.next())"br"==(r=r.value).nodeName&&e.childNodes[0]!==r?n+="\n":r.childNodes&&0<r.childNodes.length?n+=mh(r,t):n+=t?r=(r=r.textContent.trim()).replace(/\s+/g," "):r.textContent;return n}function vh(e,t,n,i,r,a,o,s,l,c){if(l&&"br"==e.nodeName)return(e=new Ln(0,0,"")).spacer=!0,e;var d=/^[\s\n]*$/.test(e.textContent),h=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||h&&d||h&&!l)return null;d=_h(e.getAttribute("begin"),n),h=_h(e.getAttribute("end"),n);var p=_h(e.getAttribute("dur"),n);if(null==h&&null!=p&&(h=d+p),!l&&(null==d||null==h))throw new le(2,2,2001);if(d=l&&null==d?0:d+t,h=l&&null==h?0:h+t,p="",l=[],Array.from(e.childNodes).some((function(e){return e.nodeType==Node.TEXT_NODE&&/\S+/.test(e.textContent)})))p=mh(e,s);else for(var f=u(e.childNodes),g=f.next();!g.done;g=f.next())(g=vh(g.value,t,n,i,r,a,o,s,!0,c))&&(g.startTime=g.startTime||d,g.endTime=g.endTime||h,l.push(g));if((t=new Ln(d,h,p)).nestedCues=l,c&&(t.cellResolution=c),(a=kh(e,"region",a,"")[0])&&a.getAttribute("xml:id")){var m=a.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==m}))[0]}return function(e,t,n,i,r){"rtl"==bh(t,n,r,"direction")&&(e.direction="rtl");var a=bh(t,n,r,"writingMode");if("tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=Fn),(a=bh(t,n,r,"textAlign"))?(e.positionAlign=Vh[a],e.lineAlign=Fh[a],e.textAlign=Nn[a.toUpperCase()]):e.textAlign="start",(a=bh(t,n,r,"displayAlign"))&&(e.displayAlign=Un[a.toUpperCase()]),(a=bh(t,n,r,"color"))&&(e.color=a),(a=bh(t,n,r,"backgroundColor"))&&(e.backgroundColor=a),(a=bh(t,n,r,"border"))&&(e.border=a),(a=bh(t,n,r,"fontFamily"))&&(e.fontFamily=a),(a=bh(t,n,r,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=bh(t,n,r,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=bh(t,n,r,"lineHeight"))&&a.match(xh)&&(e.lineHeight=a),(a=bh(t,n,r,"fontSize"))&&(a.match(xh)||a.match(Rh))&&(e.fontSize=a),(a=bh(t,n,r,"fontStyle"))&&(e.fontStyle=zn[a.toUpperCase()]),i){a=i.getAttribute("imagetype");var o=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==a&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(i=bh(t,n,r,"letterSpacing"))&&i.match(xh)&&(e.letterSpacing=i),(i=bh(t,n,r,"linePadding"))&&i.match(xh)&&(e.linePadding=i),(i=bh(t,n,r,"opacity"))&&(e.opacity=parseFloat(i)),(n=Eh(n,r,"textDecoration"))&&yh(e,n),(t=Th(t,r,"textDecoration"))&&yh(e,t)}(t,e,a,i=kh(e,"backgroundImage",i,"#","http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt")[0],r),t}function yh(e,t){for(var n=u(t.split(" ")),i=n.next();!i.done;i=n.next())switch(i.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&vt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&vt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&vt(e.textDecoration,"overline")}}function bh(e,t,n,i){return(e=Th(e,n,i))?e:Eh(t,n,i)}function Eh(e,t,n){if(!e)return null;for(var i=fh(e),r=(i=u(i)).next();!r.done;r=i.next())if(r=nl(r.value,"http://www.w3.org/ns/ttml#styling",n))return r;return Ah(e,t,n)}function Th(e,t,n){var i=nl(e,"http://www.w3.org/ns/ttml#styling",n);return i||Ah(e,t,n)}function Ah(e,t,n){e=kh(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=nl(e[r],"urn:ebu:tt:style",n);a||(a=nl(e[r],"http://www.w3.org/ns/ttml#styling",n)),a||(a=Th(e[r],t,n)),a&&(i=a)}return i}function kh(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=r?nl(o,r,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(r=(t=u(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,o=(e=u(n)).next();!o.done;o=e.next())if(i+(o=o.value).getAttribute("xml:id")==r){a.push(o);break}return a}function _h(e,t){var n=null;if(Ph.test(e)){n=Ph.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);n=(a+=(o+=(Number(n[5])||0)/t.b)/t.frameRate)+60*r+3600*i}else Oh.test(e)?n=Sh(Oh,e):Mh.test(e)?n=Sh(Mh,e):Nh.test(e)?(n=Nh.exec(e),n=Number(n[1])/t.frameRate):Bh.test(e)?(n=Bh.exec(e),n=Number(n[1])/t.a):Uh.test(e)&&(n=Sh(Uh,e));return n}function Sh(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function wh(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}bd((function(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)rh="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Yd,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=qd,e.MediaKeys=Xd,e.MediaKeySystemAccess=$d}})),bd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=oh,Object.defineProperty(t,"disablePictureInPicture",{get:lh,set:uh,enumerable:!0,configurable:!0}),document.exitPictureInPicture=sh,document.addEventListener("webkitpresentationmodechanged",ah,!0))}})),bd((function(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}})),bd((function(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=ch)}})),bd((function(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=dh;else if(6==n)t=hh;else{try{var i=!!dh(1,2,"")}catch(e){i=!1}i&&(t=dh)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}})),ph.prototype.parseInit=function(){},ph.prototype.parseMedia=function(e,t){var n=Ue(e),i=[],r=new DOMParser,a=null;if(""==n)return i;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new le(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new le(2,2,2005,n.textContent);if(!(r=a.getElementsByTagName("tt")[0]))throw new le(2,2,2005,"TTML does not contain <tt> tag.");var o=nl(r,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=nl(r,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),l=nl(r,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=nl(r,"http://www.w3.org/ns/ttml#parameter","tickRate"),d=nl(r,"http://www.w3.org/ns/ttml#parameter","cellResolution");if(a=r.getAttribute("xml:space")||"default",n=nl(r,"http://www.w3.org/ns/ttml#styling","extent"),"default"!=a&&"preserve"!=a)throw new le(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,o=new wh(o,s,l,c),d=d&&(d=/^(\d+) (\d+)$/.exec(d))?{columns:parseInt(d[1],10),rows:parseInt(d[2],10)}:null,s=fh(r.getElementsByTagName("metadata")[0]),l=fh(r.getElementsByTagName("styling")[0]);for(var h=[],p=u(c=fh(r.getElementsByTagName("layout")[0])),f=p.next();!f.done;f=p.next()){var g=f.value,m=n;f=new Yn;var v,y,b=g.getAttribute("xml:id");b?(f.id=b,b=null,m&&(b=Dh.exec(m)||Lh.exec(m)),m=b?Number(b[1]):null,b=b?Number(b[2]):null,(v=Eh(g,l,"extent"))&&null!=(v=(y=Dh.exec(v))||Lh.exec(v))&&(f.width=null!=m?100*Number(v[1])/m:Number(v[1]),f.height=null!=b?100*Number(v[2])/b:Number(v[2]),f.widthUnits=y||null!=m?qn:0,f.heightUnits=y||null!=b?qn:0),(g=Eh(g,l,"origin"))&&null!=(v=(y=Dh.exec(g))||Lh.exec(g))&&(f.viewportAnchorX=null!=m?100*Number(v[1])/m:Number(v[1]),f.viewportAnchorY=null!=b?100*Number(v[2])/b:Number(v[2]),f.viewportAnchorUnits=y||null!=m?qn:0)):f=null,f&&h.push(f)}for(n=gh(r.getElementsByTagName("body")[0]),r=(n=u(n)).next();!r.done;r=n.next())(r=vh(r.value,t.periodStart,o,s,l,c,h,a,!1,d))&&i.push(r)}return i},V("shaka.text.TtmlTextParser",ph),ph.prototype.parseMedia=ph.prototype.parseMedia,ph.prototype.parseInit=ph.prototype.parseInit;var Ch,Ih,Dh=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Rh=/^(\d{1,2}(?:\.\d+)?|100)%$/,xh=/^(\d+px|\d+em|\d*\.?\d+c)$/,Lh=/^(\d+)px (\d+)px$/,Ph=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Oh=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Mh=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Nh=/^(\d*(?:\.\d*)?)f$/,Bh=/^(\d*(?:\.\d*)?)t$/,Uh=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,Fh={left:jn,center:"center",right:"end",start:jn,end:"end"},Vh={left:"line-left",center:"center",right:"line-right"};function Hh(){this.m=new ph}function jh(){}function Kh(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?Mn:Nn[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=Kn[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Hn,e.line=Number(n[1]),n[2]&&(e.lineAlign=Kn[n[2].toUpperCase()]))}function Gh(e){if(null==(e=Iu(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Wh(){this.a=null}function zh(e,t,n){var i,r,a;return(new Ur).box("payl",Hr((function(e){i=Ue(e)}))).box("iden",Hr((function(e){r=Ue(e)}))).box("sttg",Hr((function(e){a=Ue(e)}))).parse(e),i?function(e,t,n,i,r){if(e=new Ln(i,r,e),t&&(e.id=t),n)for(t=new wu(n),n=Du(t);n;)Kh(e,n,[]),Cu(t),n=Du(t);return e}(i,r,a,t,n):null}
/*
   @license
   EME Encryption Scheme Polyfill
   Copyright 2019 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
function Yh(){}function qh(){Ch?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Ch=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=$h):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function $h(e,t){var n,i=this;return P((function(r){return 1==r.a?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),E(r,Ch.call(i,e,t),2)):rp(n=r.b)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Ch,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Xh,r.return(Xh.call(i,e,t)))}))}function Xh(e,t){var n,i,r,a,o,s,l,c,d,h,p=this;return P((function(f){if(1==f.a){for(console.assert(p==navigator,'bad "this" for requestMediaKeySystemAccess'),n=ip(e),i=[],r=u(t),a=r.next();!a.done;a=r.next())o=a.value,s=Qh(o.videoCapabilities,n),l=Qh(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!l.length||((c=Object.assign({},o)).videoCapabilities=s,c.audioCapabilities=l,i.push(c));if(!i.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return E(f,Ch.call(p,e,i),2)}return h=f.b,f.return(new np(h,n))}))}function Qh(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Zh(){}function Jh(){navigator.mediaCapabilities?(Ih=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=ep):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function ep(e){var t,n=this;return P((function(i){return 1==i.a?(console.assert(n==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(i,Ih.call(n,e),2)):(t=i.b,e.keySystemConfiguration?rp(t.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Ih,i.return(t)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=tp,i.return(tp.call(n,e))):i.return(t))}))}function tp(e){var t,n,i,r,a,o,s,l=this;return P((function(u){return 1==u.a?(console.assert(l==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=ip(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},r&&r!=t||a&&a!=t)?u.return(o):E(u,Ih.call(l,e),2)):((s=u.b).keySystemAccess&&(s.keySystemAccess=new np(s.keySystemAccess,t)),u.return(s))}))}function np(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function ip(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function rp(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function ap(){}function op(){qh(),Jh()}Jn["application/ttml+xml"]=function(){return new ph},Hh.prototype.parseInit=function(e){var t=!1;if((new Ur).box("moov",Fr).box("trak",Fr).box("mdia",Fr).box("minf",Fr).box("stbl",Fr).ea("stsd",Vr).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new le(2,2,2007)},Hh.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new Ur).box("mdat",Hr((function(e){i=!0,r=r.concat(n.m.parseMedia(e,t))}))).parse(e,!1),!i)throw new le(2,2,2007);return r},V("shaka.text.Mp4TtmlParser",Hh),Hh.prototype.parseMedia=Hh.prototype.parseMedia,Hh.prototype.parseInit=Hh.prototype.parseInit,Jn['application/mp4; codecs="stpp"']=function(){return new Hh},Jn['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Hh},Jn['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Hh},jh.prototype.parseInit=function(){},jh.prototype.parseMedia=function(e,t){var n=Ue(e),i=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new le(2,2,2e3);if(n=t.periodStart,i[0].includes("X-TIMESTAMP-MAP")){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=i[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(n=Gh(new wu(r[1]))))throw new le(2,2,2e3);for(a=Number(a[1]),r=t.segmentStart;95443.7176888889<=r;)r-=95443.7176888889,a+=8589934592;n=t.periodStart+a/9e4-n}}a=[];for(var o=(r=u(i[0].split("\n"))).next();!o.done;o=r.next())if(o=o.value,/^Region:/.test(o)){o=new wu(o);var s=new Yn;Du(o),Cu(o);for(var l=Du(o);l;){var c=s,d=l;(l=/^id=(.*)$/.exec(d))?c.id=l[1]:(l=/^width=(\d{1,2}|100)%$/.exec(d))?c.width=Number(l[1]):(l=/^lines=(\d+)$/.exec(d))?(c.height=Number(l[1]),c.heightUnits=2):(l=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.regionAnchorX=Number(l[1]),c.regionAnchorY=Number(l[2])):(l=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(d))?(c.viewportAnchorX=Number(l[1]),c.viewportAnchorY=Number(l[2])):/^scroll=up$/.exec(d)&&(c.scroll="up"),Cu(o),l=Du(o)}a.push(s)}for(r=[],o=(i=u(i.slice(1))).next();!o.done;o=i.next()){if(l=n,1==(c=o.value.split("\n")).length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{o=null,c[0].includes("--\x3e")||(o=c[0],c.splice(0,1)),d=Gh(s=new wu(c[0]));var h=Iu(s,/[ \t]+--\x3e[ \t]+/g),p=Gh(s);if(null==d||null==h||null==p)throw new le(2,2,2001);for(c=new Ln(d+l,p+l,c.slice(1).join("\n").trim()),Cu(s),l=Du(s);l;)Kh(c,l,a),Cu(s),l=Du(s);null!=o&&(c.id=o),o=c}o&&r.push(o)}return r},V("shaka.text.VttTextParser",jh),jh.prototype.parseMedia=jh.prototype.parseMedia,jh.prototype.parseInit=jh.prototype.parseInit,Jn["text/vtt"]=function(){return new jh},Jn['text/vtt; codecs="vtt"']=function(){return new jh},Jn['text/vtt; codecs="wvtt"']=function(){return new jh},Wh.prototype.parseInit=function(e){var t=this,n=!1;if((new Ur).box("moov",Fr).box("trak",Fr).box("mdia",Fr).ea("mdhd",(function(e){0==e.version?(e.reader.skip(4),e.reader.skip(4),t.a=e.reader.K(),e.reader.skip(4)):(e.reader.skip(8),e.reader.skip(8),t.a=e.reader.K(),e.reader.skip(8)),e.reader.skip(4)})).box("minf",Fr).box("stbl",Fr).ea("stsd",Vr).box("wvtt",(function(){n=!0})).parse(e),!this.a)throw new le(2,2,2008);if(!n)throw new le(2,2,2008)},Wh.prototype.parseMedia=function(e,t){if(!this.a)throw new le(2,2,2008);var n,i=0,r=[],a=[],o=!1,s=!1,l=!1,c=null;if((new Ur).box("moof",Fr).box("traf",Fr).ea("tfdt",(function(e){o=!0,i=0==e.version?e.reader.K():e.reader.rb()})).ea("tfhd",(function(e){var t=e.flags;(e=e.reader).skip(4),1&t&&e.skip(8),2&t&&e.skip(4),c=8&t?e.K():null})).ea("trun",(function(e){s=!0;var t=e.version,n=e.flags,i=(e=e.reader).K();1&n&&e.skip(4),4&n&&e.skip(4);for(var a=[],o=(i=u(J(i))).next();!o.done;o=i.next())o={duration:null,sampleSize:null,rd:null},256&n&&(o.duration=e.K()),512&n&&(o.sampleSize=e.K()),1024&n&&e.skip(4),2048&n&&(o.rd=0==t?e.K():e.Od()),a.push(o);r=a})).box("mdat",Hr((function(e){l=!0,n=e}))).parse(e,!1),!l&&!o&&!s)throw new le(2,2,2008);for(var d=i,h=new Mr(n,0),p=u(r),f=p.next();!f.done;f=p.next()){var g=(f=f.value).duration||c,m=f.rd?i+f.rd:d;d=m+(g||0);var v=0;do{var y=h.K();v+=y;var b=null;"vttc"==Kr(h.K())?8<y&&(b=h.Wa(y-8)):h.skip(y-8),g&&b&&(y=zh(b,t.periodStart+m/this.a,t.periodStart+d/this.a),a.push(y))}while(f.sampleSize&&v<f.sampleSize)}return a.filter(Re)},V("shaka.text.Mp4VttParser",Wh),Wh.prototype.parseMedia=Wh.prototype.parseMedia,Wh.prototype.parseInit=Wh.prototype.parseInit,Jn['application/mp4; codecs="wvtt"']=function(){return new Wh},V("EmeEncryptionSchemePolyfill",Yh),Yh.install=qh,V("McEncryptionSchemePolyfill",Zh),Zh.install=Jh,np.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=u(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},np.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},V("EncryptionSchemePolyfills",ap),ap.install=op,void 0!==n&&n.exports&&(n.exports=ap)}.call(i,n,n,void 0),i.shaka)t[r]=i.shaka[r]}()}).call(this,n(/*! ./../../webpack/buildin/global.js */"./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":
/*!***********************************!*\
    !*** (webpack)/buildin/global.js ***!
    \***********************************/
/*! no static exports found */function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./src/clappr-dash-shaka-playback.js":
/*!*******************************************!*\
    !*** ./src/clappr-dash-shaka-playback.js ***!
    \*******************************************/
/*! no static exports found */function(e,t,n){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=n(/*! clappr */"clappr"),o=(r=n(/*! shaka-player */"./node_modules/shaka-player/dist/shaka-player.compiled.js"))&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t,n){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}},l(e,t,n||e)}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f(e);if(t){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,e);var t=h(n);function n(){var e;s(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r)))._levels=[],e._pendingAdaptationEvent=!1,e._isShakaReadyState=!1,e._minDvrSize=void 0===e.options.shakaMinimumDvrSize?60:e.options.shakaMinimumDvrSize,e}return c(n,[{key:"getDuration",value:function(){return this._duration}},{key:"getCurrentTime",value:function(){if(!this.shakaPlayerInstance)return 0;var e=this.shakaPlayerInstance.getMediaElement();return e?e.currentTime-this.seekRange.start:0}},{key:"name",get:function(){return"dash_shaka_playback"}},{key:"shakaVersion",get:function(){return o.default.player.Player.version}},{key:"shakaPlayerInstance",get:function(){return this._player}},{key:"levels",get:function(){return this._levels}},{key:"seekRange",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.seekRange():{start:0,end:0}}},{key:"currentLevel",set:function(e){var t=this;this._currentLevelId=e;var n=-1===this._currentLevelId;this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_START),n?(this._player.configure({abr:{enabled:!0}}),this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_END)):(this._player.configure({abr:{enabled:!1}}),this._pendingAdaptationEvent=!0,this.selectTrack(this.videoTracks.filter((function(e){return e.id===t._currentLevelId}))[0]))},get:function(){return this._currentLevelId||-1}},{key:"dvrEnabled",get:function(){return this._duration>=this._minDvrSize&&"live"===this.getPlaybackType()}},{key:"_duration",get:function(){return this.shakaPlayerInstance?this.seekRange.end-this.seekRange.start:0}},{key:"_startTime",get:function(){return this.seekRange.start}},{key:"presentationStartTimeAsDate",get:function(){return this.shakaPlayerInstance&&this.shakaPlayerInstance.getPresentationStartTimeAsDate()?new Date(this.shakaPlayerInstance.getPresentationStartTimeAsDate().getTime()+1e3*this.seekRange.start):0}},{key:"bandwidthEstimate",get:function(){return this.shakaPlayerInstance?this.shakaPlayerInstance.getStats().estimatedBandwidth:null}}],[{key:"canPlay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";o.default.polyfill.installAll();var n=o.default.Player.isBrowserSupported(),i=e.split("?")[0].match(/.*\.(.*)$/)||[];return n&&("mpd"===i[1]||t.indexOf("application/dash+xml")>-1)}},{key:"Events",get:function(){return{SHAKA_READY:"shaka:ready"}}},{key:"shakaPlayer",get:function(){return o.default}}]),c(n,[{key:"getProgramDateTime",value:function(){return this.presentationStartTimeAsDate}},{key:"_updateDvr",value:function(e){this.trigger(a.Events.PLAYBACK_DVR,e),this.trigger(a.Events.PLAYBACK_STATS_ADD,{dvr:e})}},{key:"seek",value:function(e){e<0&&(a.Log.warn("Attempt to seek to a negative time. Resetting to live point. Use seekToLivePoint() to seek to the live point."),e=this._duration),this.dvrEnabled&&this._updateDvr(e<this._duration-3),e+=this._startTime,this.el.currentTime=e}},{key:"pause",value:function(){this.el.pause(),this.dvrEnabled&&this._updateDvr(!0)}},{key:"play",value:function(){this._player||this._setup(),this.isReady?(this._stopped=!1,this._src=this.el.src,l(f(n.prototype),"play",this).call(this),this._startTimeUpdateTimer()):this.once(n.Events.SHAKA_READY,this.play)}},{key:"_onPlaying",value:function(){if(!this._isBuffering)return l(f(n.prototype),"_onPlaying",this).call(this)}},{key:"_onSeeking",value:function(){return this._isSeeking=!0,l(f(n.prototype),"_onSeeking",this).call(this)}},{key:"_onSeeked",value:function(){if(!this._isBuffering)return this._isSeeking=!1,l(f(n.prototype),"_onSeeked",this).call(this)}},{key:"_startTimeUpdateTimer",value:function(){var e=this;this._stopTimeUpdateTimer(),this._timeUpdateTimer=setInterval((function(){e._onTimeUpdate()}),100)}},{key:"_stopTimeUpdateTimer",value:function(){this._timeUpdateTimer&&clearInterval(this._timeUpdateTimer)}},{key:"_setupSrc",value:function(){}},{key:"_ready",value:function(){}},{key:"_onShakaReady",value:function(){this._isShakaReadyState=!0,this.trigger(n.Events.SHAKA_READY),this.trigger(a.Events.PLAYBACK_READY,this.name)}},{key:"error",value:function(e){a.Log.error("an error was raised by the video tag",e,this.el.error)}},{key:"isHighDefinitionInUse",value:function(){return!!this.highDefinition}},{key:"stop",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._stopped=!0,this._player?(this._sendStats(),this._player.unload().then((function(){l(f(n.prototype),"stop",e).call(e),e._player=null,e._isShakaReadyState=!1})).catch((function(){a.Log.error("shaka could not be unloaded")}))):l(f(n.prototype),"stop",this).call(this)}},{key:"getPlaybackType",value:function(){return(this.isReady&&this._player.isLive()?"live":"vod")||""}},{key:"selectTrack",value:function(e){if("text"===e.type)this._player.selectTextTrack(e);else{if("variant"!==e.type)throw new Error("Unhandled track type:",e.type);this._player.selectVariantTrack(e),e.mimeType.startsWith("video/")&&this._onAdaptation()}}},{key:"_enableShakaTextTrack",value:function(e){this.el.textTracks&&(this._shakaTTVisible=e,Array.from(this.el.textTracks).filter((function(e){return"subtitles"===e.kind})).forEach((function(t){return t.mode=!0===e?"showing":"hidden"})))}},{key:"_checkForClosedCaptions",value:function(){if(!this._ccIsSetup){if(this.hasClosedCaptionsTracks){this.trigger(a.Events.PLAYBACK_SUBTITLE_AVAILABLE);var e=this.closedCaptionsTrackId;this.closedCaptionsTrackId=e}this._ccIsSetup=!0}}},{key:"destroy",value:function(){var e=this;this._stopTimeUpdateTimer(),clearInterval(this.sendStatsId),this._player?this._player.destroy().then((function(){return e._destroy()})).catch((function(){e._destroy(),a.Log.error("shaka could not be destroyed")})):this._destroy(),l(f(n.prototype),"destroy",this).call(this)}},{key:"_setup",value:function(){var e=this;this._isShakaReadyState=!1,this._ccIsSetup=!1;var t=function(){e._player=e._createPlayer(),e._setInitialConfig(),e._loadSource()};this._player?this._player.destroy().then((function(){return t()})):t()}},{key:"_createPlayer",value:function(){var e=new o.default.Player(this.el);return e.addEventListener("error",this._onError.bind(this)),e.addEventListener("adaptation",this._onAdaptation.bind(this)),e.addEventListener("buffering",this._handleShakaBufferingEvents.bind(this)),e}},{key:"_setInitialConfig",value:function(){this._options.shakaConfiguration&&this._player.configure(this._options.shakaConfiguration),this._options.shakaOnBeforeLoad&&this._options.shakaOnBeforeLoad(this._player)}},{key:"_loadSource",value:function(){var e=this;this._player.load(this._options.src).then((function(){return e._loaded()})).catch((function(t){return e._setupError(t)}))}},{key:"_onTimeUpdate",value:function(){if(this.shakaPlayerInstance){var e={current:this.getCurrentTime(),total:this.getDuration(),firstFragDateTime:this.getProgramDateTime()};this._lastTimeUpdate&&e.current===this._lastTimeUpdate.current&&e.total===this._lastTimeUpdate.total||(this._lastTimeUpdate=e,this.trigger(a.Events.PLAYBACK_TIMEUPDATE,e,this.name))}}},{key:"_handleBufferingEvents",value:function(){}},{key:"_handleShakaBufferingEvents",value:function(e){this._stopped||(this._isBuffering=e.buffering,this._isBuffering?this._onBuffering():this._onBufferfull())}},{key:"_onBuffering",value:function(){this.trigger(a.Events.PLAYBACK_BUFFERING)}},{key:"_onBufferfull",value:function(){this.trigger(a.Events.PLAYBACK_BUFFERFULL),this._isSeeking&&this._onSeeked(),this.isPlaying()&&this._onPlaying()}},{key:"_loaded",value:function(){this._onShakaReady(),this._startToSendStats(),this._fillLevels(),this._checkForClosedCaptions()}},{key:"_fillLevels",value:function(){0===this._levels.length&&(this._levels=this.videoTracks.map((function(e){return{id:e.id,label:"".concat(e.height,"p")}})).reverse(),this.trigger(a.Events.PLAYBACK_LEVELS_AVAILABLE,this.levels))}},{key:"_startToSendStats",value:function(){var e=this,t=this._options.shakaSendStatsInterval||3e4;this.sendStatsId=setInterval((function(){return e._sendStats()}),t)}},{key:"_sendStats",value:function(){this.trigger(a.Events.PLAYBACK_STATS_ADD,this._player.getStats())}},{key:"_setupError",value:function(e){this._onError(e)}},{key:"_onError",value:function(e){var t={shakaError:e,videoError:this.el.error},i=t.shakaError.detail||t.shakaError,r=i.category,s=i.code,u=i.severity;if(t.videoError||!s&&!r)return l(f(n.prototype),"_onError",this).call(this);var c=u===o.default.util.Error.Severity.CRITICAL,d={code:"".concat(r,"_").concat(s),description:"Category: ".concat(r,", code: ").concat(s,", severity: ").concat(u),level:c?a.PlayerError.Levels.FATAL:a.PlayerError.Levels.WARN,raw:e},h=this.createError(d);a.Log.error("Shaka error event:",h),this.trigger(a.Events.PLAYBACK_ERROR,h)}},{key:"_onAdaptation",value:function(){var e=this.videoTracks.filter((function(e){return!0===e.active}))[0];this._fillLevels(),this._sendStats(),this._pendingAdaptationEvent&&(this.trigger(a.Events.PLAYBACK_LEVEL_SWITCH_END),this._pendingAdaptationEvent=!1),a.Log.debug("an adaptation has happened:",e),this.highDefinition=e.height>=720,this.trigger(a.Events.PLAYBACK_HIGHDEFINITIONUPDATE,this.highDefinition),this.trigger(a.Events.PLAYBACK_BITRATE,{bandwidth:e.bandwidth,width:e.width,height:e.height,level:e.id,bitrate:e.videoBandwidth})}},{key:"_updateSettings",value:function(){"vod"===this.getPlaybackType()?this.settings.left=["playpause","position","duration"]:this.dvrEnabled?this.settings.left=["playpause"]:this.settings.left=["playstop"],this.settings.seekEnabled=this.isSeekEnabled(),this.trigger(a.Events.PLAYBACK_SETTINGSUPDATE)}},{key:"_destroy",value:function(){this._isShakaReadyState=!1,a.Log.debug("shaka was destroyed")}},{key:"isReady",get:function(){return this._isShakaReadyState}},{key:"textTracks",get:function(){return this.isReady&&this._player.getTextTracks()}},{key:"audioTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("audio/")}))}},{key:"videoTracks",get:function(){return this.isReady&&this._player.getVariantTracks().filter((function(e){return e.mimeType.startsWith("video/")}))}},{key:"closedCaptionsTracks",get:function(){var e=0;return(this.textTracks||[]).filter((function(e){return"subtitle"===e.kind})).map((function(t){return{id:e++,name:t.label||t.language,track:t}}))}},{key:"closedCaptionsTrackId",get:function(){return l(f(n.prototype),"closedCaptionsTrackId",this)},set:function(e){if(this._player){var t,n=this.closedCaptionsTracks;if(-1!==e){if(!(t=n.find((function(t){return t.id===e}))))return void a.Log.warn('Track id "'.concat(e,'" not found'));if(this._shakaTTVisible&&!0===t.track.active)return void a.Log.info('Track id "'.concat(e,'" already showing'))}t?(this._player.selectTextTrack(t.track),this._player.setTextTrackVisibility(!0),this._enableShakaTextTrack(!0)):(this._player.setTextTrackVisibility(!1),this._enableShakaTextTrack(!1)),this._ccTrackId=e,this.trigger(a.Events.PLAYBACK_SUBTITLE_CHANGED,{id:e})}}}]),n}(a.HTML5Video),m=g;t.default=m,e.exports=t.default},clappr:
/*!******************************************************************************************!*\
    !*** external {"amd":"clappr","commonjs":"clappr","commonjs2":"clappr","root":"Clappr"} ***!
    \******************************************************************************************/
/*! no static exports found */function(t,n){t.exports=e}})},e.exports=n(Zo)})),rp=Kr(ip),ap='@font-face {\n  font-family: "opensans-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "opensans-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/opensans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/regular.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "proximanova-xbold";\n  src: url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/proximanova/extrabold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "clearsans-bold";\n  src: url("//s3.glbimg.com/cdn/fonts/clearsans/bold.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "clearsans-bolditalic";\n  src: url("//s3.glbimg.com/cdn/fonts/clearsans/bolditalic.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n@font-face {\n  font-family: "globotipo-tx-regular";\n  src: url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.woff2") format("woff2"), url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.woff") format("woff"), url("//s3.glbimg.com/cdn/fonts/globotipo/texto/Globo_Tx_Rg.ttf") format("truetype");\n  font-style: normal;\n  font-weight: normal; }\n\n.clappr-player#wp3-player-0 {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  -o-user-select: none;\n  user-select: none;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  transform: translate3d(0, 0, 0);\n  position: relative;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-style: normal;\n  font-weight: normal;\n  text-align: center;\n  overflow: hidden;\n  font-size: 100%;\n  font-family: "lucida grande", tahoma, verdana, arial, sans-serif;\n  text-shadow: none;\n  box-sizing: border-box;\n  display: block;\n  max-width: none;\n  box-sizing: inherit;\n  float: none;\n  -webkit-tap-highlight-color: transparent;\n  /*\n  * Utility class to hide content visually while keeping it screen reader-accessible.\n  * Source: https://www.scottohara.me/blog/2017/04/14/inclusively-hidden.html\n  */ }\n  .clappr-player#wp3-player-0:focus {\n    outline: 0; }\n  .clappr-player#wp3-player-0.fullscreen {\n    width: 100% !important;\n    height: 100% !important; }\n  .clappr-player#wp3-player-0.nocursor {\n    cursor: none; }\n  .clappr-player#wp3-player-0 .visually-hidden:not(:focus):not(:active) {\n    clip: rect(0 0 0 0);\n    -webkit-clip-path: inset(100%);\n            clip-path: inset(100%);\n    height: 1px;\n    overflow: hidden;\n    position: absolute;\n    white-space: nowrap;\n    width: 1px; }\n',op=n(n(n(n({DFP:nr,DAI:dr,GloboMediaControl:Rr},{PlayButton:xr,TimeIndicator:Mr,LiveIndicator:Fa,LiveButton:ya,Volume:Aa,Seekbar:Sa,FullscreenButton:Or,Settings:To,BackButton:Pr,VideoInfo:wo,Share:Ma,SkipRecap:Vr,SkipIntro:Hr,StartOver:fa,QuickSeek:Da,QuickSeekHint:Ra,ChromecastSenderIndicator:Oo,MediaControlPlaceHolder:Qo}),{},{Pip:Va,TapToUnmute:Ua,ErrorScreen:Go,Chromecast:Po,ThumbPreview:Ao,SeekTime:_r},Qh),{},{Subtitle:Yl,Poster:ds,Spinner:hs,StreamSense:ms,Comscore:rs,WebmediaAPIHit:Es,Horizon:au,WaitingRoom:bu,PlayerStats:es,GloboYoubora:Dd,GoogleAnalytics:yu,BitrateCapping:rh,LockClient:oh,Cuepoints:ts,EPG:us,ClickToPause:Er},Zh),{},{Overlay:Wo,DrawerHeader:Xo,SimulcastPing:lh,WatchSession:uh}),sp=[rp,np,tp],lp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["play_button","time_indicator","live_indicator","live_button","volume","seekbar","seekbar_info","fullscreen_button","settings","back_button","video_info","share","skip_recap","skip_intro","start_over","quick_seek","quick_seek_hint","chromecast_sender_indicator","media_control_placeholder"],n=e.filter((function(e){return e&&-1===t.indexOf(e)}));return t.concat(n)},up=Gr((function(e,t){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
!function(){var e="undefined"!=typeof window?window:jr,n={};for(var i in function(e,t,n){
/*
   @license
   Shaka Player
   Copyright 2016 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var o=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var n=o;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function l(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:r(e)}}function c(e){if(!(e instanceof Array)){e=u(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}s("Symbol",(function(e){function t(e,t){this.g=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),s("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=o[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return l(r(this))}})}return e}));var d,h="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var p;e:{var f={};try{f.__proto__={a:!0},p=f.a;break e}catch(e){}p=!1}d=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=d;function m(e,t){if(e.prototype=h(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.zh=t.prototype}function v(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function y(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}function b(e,t){e.i={Ee:t,Le:!0},e.g=e.m||e.j}function E(e,t,n){return e.g=n,{value:t}}function T(e){e.g=0}function A(e,t,n){e.m=t,null!=n&&(e.j=n)}function k(e){e.m=0,e.j=2}function _(e,t){e.g=t,e.m=0}function S(e){e.m=0;var t=e.i.Ee;return e.i=null,t}function w(e){e.u=[e.i],e.m=0,e.j=0}function C(e,t){var n=e.u.splice(0)[0];(n=e.i=e.i||n)?n.Le?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function I(e){this.g=new v,this.h=e}function D(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var a=r.value}catch(t){return e.g.l=null,b(e.g,t),R(e)}return e.g.l=null,i.call(e.g,a),R(e)}function R(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,b(e.g,t)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.Le)throw t.Ee;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function x(e){this.next=function(t){return y(e.g),e.g.l?t=D(e,e.g.l.next,t,e.g.s):(e.g.s(t),t=R(e)),t},this.throw=function(t){return y(e.g),e.g.l?t=D(e,e.g.l.throw,t,e.g.s):(b(e.g,t),t=R(e)),t},this.return=function(t){return function(e,t){y(e.g);var n=e.g.l;return n?D(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),R(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())}))}(new x(new I(e)))}function P(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Je:r,v:a}}return{Je:-1,v:void 0}}function N(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function B(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}v.prototype.s=function(e){this.h=e},v.prototype.return=function(e){this.i={return:e},this.g=this.j},v.prototype.A=function(e){this.g=e},s("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var r=o.setTimeout;n.prototype.i=function(e){r(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.J(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.u()},t.prototype.G=function(){var e=this;r((function(){if(e.B()){var t=o.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=o.CustomEvent,t=o.Event,n=o.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.u=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.H=function(e){var t=this.j();e.Lc(t.resolve,t.reject)},t.prototype.J=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.Lc(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Lc=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=u(e),a=r.next();!a.done;a=r.next())i(a.value).Lc(t,n)}))},t.all=function(e){var n=u(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Lc(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),s("WeakMap",(function(e){function t(e){if(this.g=(l+=Math.random()+1).toString(),e){e=u(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!O(e,s)){var t=new n;a(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var l=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!O(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return i(e)&&O(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return i(e)&&O(e,s)&&O(e[s],this.g)},t.prototype.delete=function(e){return!!(i(e)&&O(e,s)&&O(e[s],this.g))&&delete e[s][this.g]},t})),s("Map",(function(e){function t(){var e={};return e.Qa=e.next=e.head=e}function n(e,t){var n=e.g;return l((function(){if(n){for(;n.head!=e.g;)n=n.Qa;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e.h[n];if(i&&O(e.h,n))for(e=0;e<i.length;e++){var r=i[e];if(t!=t&&r.key!=r.key||t===r.key)return{id:n,list:i,index:e,fa:r}}return{id:n,list:i,index:-1,fa:void 0}}function r(e){if(this.h={},this.g=t(),this.size=0,e){e=u(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this.h[n.id]=[]),n.fa?n.fa.value=t:(n.fa={next:this.g,Qa:this.g.Qa,head:this.g,key:e,value:t},n.list.push(n.fa),this.g.Qa.next=n.fa,this.g.Qa=n.fa,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).fa||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.fa.Qa.next=e.fa.next,e.fa.next.Qa=e.fa.Qa,e.fa.head=null,this.size--,!0)},r.prototype.clear=function(){this.h={},this.g=this.g.Qa=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).fa},r.prototype.get=function(e){return(e=i(this,e).fa)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r})),s("Set",(function(e){function t(e){if(this.g=new Map,e){e=u(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(u([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&(!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(i){return e.call(t,i,i,n)}))},t)})),s("Array.prototype.findIndex",(function(e){return e||function(e,t){return M(this,e,t).Je}})),s("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),s("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(t=t||0)&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}})),s("String.prototype.includes",(function(e){return e||function(e,t){return-1!==N(this,e,"includes").indexOf(e,t||0)}})),s("Array.prototype.find",(function(e){return e||function(e,t){return M(this,e,t).v}})),s("String.prototype.startsWith",(function(e){return e||function(e,t){var n=N(this,e,"startsWith"),i=n.length,r=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<r&&t<i;)if(n[t++]!=e[a++])return!1;return a>=r}})),s("Array.prototype.keys",(function(e){return e||function(){return B(this,(function(e){return e}))}}));var U="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)O(i,r)&&(e[r]=i[r])}return e};s("Object.assign",(function(e){return e||U})),s("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}})),s("Array.prototype.values",(function(e){return e||function(){return B(this,(function(e,t){return t}))}})),s("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),s("Array.prototype.entries",(function(e){return e||function(){return B(this,(function(e,t){return[e,t]}))}})),s("String.prototype.repeat",(function(e){return e||function(e){var t=N(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),s("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),s("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)O(e,t)&&n.push(e[t]);return n}})),s("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),s("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),s("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)O(e,t)&&n.push([t,e[t]]);return n}}));var F=this||self;function V(e,t){e=e.split(".");var n,i=F;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}function H(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function j(e){return e.h/(1-Math.pow(e.g,e.i))}function K(){this.h=new H(2),this.j=new H(5),this.g=0,this.i=128e3,this.l=16e3}function G(){}function W(){}function z(){}function Y(e){var t=P.apply(1,arguments);$.has(e)||($.add(e),z.apply(G,c(t)))}function q(){}H.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},K.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},K.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},K.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(j(this.h),j(this.j))};var $=new Set;if(e.console&&e.console.log.bind){var X={},Q=(X[1]=console.error.bind(console),X[2]=console.warn.bind(console),X[3]=console.info.bind(console),X[4]=console.log.bind(console),X[5]=console.debug.bind(console),X[6]=console.debug.bind(console),X);z=Q[2],W=Q[1]}function Z(e){if(J.has(e))return J.get(e);var t=MediaSource.isTypeSupported(e);return J.set(e,t),t}var J=new Map;function ee(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function te(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function ne(e,t,n){if(n||(n=ee),e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=u(e)).next();!r.done;i={md:i.md},r=e.next()){if(i.md=r.value,-1==(r=t.findIndex(function(e){return function(t){return n(e.md,t)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function ie(e,t,n){if(n||(n=ee),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function re(e,t,n){this.startTime=e,this.direction=de,this.endTime=t,this.payload=n,this.region=new Te,this.position=null,this.positionAlign=oe,this.size=0,this.textAlign=se,this.writingMode=he,this.lineInterpretation=pe,this.line=null,this.lineHeight="",this.lineAlign=fe,this.displayAlign=ue,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=ye,this.fontStyle=be,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}function ae(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!ie(e.nestedCues,t.nestedCues,ae))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!ie(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}re.prototype.clone=function(){var e,t=new re(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},V("shaka.text.Cue",re);var oe="auto";re.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:oe};var se="center",le={LEFT:"left",RIGHT:"right",CENTER:se,START:"start",END:"end"};re.textAlign=le;var ue="after",ce={BEFORE:"before",CENTER:"center",AFTER:ue};re.displayAlign=ce;var de="ltr";re.direction={HORIZONTAL_LEFT_TO_RIGHT:de,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var he="horizontal-tb";re.writingMode={HORIZONTAL_TOP_TO_BOTTOM:he,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var pe=0;re.lineInterpretation={LINE_NUMBER:pe,PERCENTAGE:1};var fe="start",ge={CENTER:"center",START:fe,END:"end"};re.lineAlign=ge;var me={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};re.defaultTextColor=me;var ve={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};re.defaultTextBackgroundColor=ve;var ye=400;re.fontWeight={NORMAL:ye,BOLD:700};var be="normal",Ee={NORMAL:be,ITALIC:"italic",OBLIQUE:"oblique"};function Te(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Ae,this.scroll=ke}re.fontStyle=Ee,re.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},V("shaka.text.CueRegion",Te);var Ae=1;Te.units={PX:0,PERCENTAGE:Ae,LINES:2};var ke="";function _e(){}function Se(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(we(e)==we(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Ie(e);t=Ie(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function we(e){return e instanceof ArrayBuffer?e:e.buffer}function Ce(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ie(e,t,n){return Re(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function De(e,t,n){return Re(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function Re(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(we(e),t,Math.min(t+Math.max(n,0),r)-t)}function xe(e,t,n){var i=P.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1}Te.scrollMode={NONE:ke,UP:"up"},V("shaka.util.BufferUtils",_e),_e.toDataView=De,_e.toUint8=Ie,_e.toArrayBuffer=Ce,_e.equal=Se,xe.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},V("shaka.util.Error",xe),xe.Severity={RECOVERABLE:1,CRITICAL:2},xe.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},xe.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};
/*
   @license
   Copyright 2008 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */
var Le=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");
/*
   @license
   Copyright 2006 The Closure Library Authors
   SPDX-License-Identifier: Apache-2.0
  */function Pe(e){var t;e instanceof Pe?(Oe(this,e.Ea),this.pb=e.pb,this.Ha=e.Ha,Me(this,e.Kb),this.qa=e.qa,Ne(this,e.g.clone()),this.fb=e.fb):e&&(t=String(e).match(Le))?(Oe(this,t[1]||"",!0),this.pb=Be(t[2]||""),this.Ha=Be(t[3]||"",!0),Me(this,t[4]),this.qa=Be(t[5]||"",!0),Ne(this,t[6]||"",!0),this.fb=Be(t[7]||"")):this.g=new We(null)}function Oe(e,t,n){e.Ea=n?Be(t,!0):t,e.Ea&&(e.Ea=e.Ea.replace(/:$/,""))}function Me(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Kb=t}else e.Kb=null}function Ne(e,t,n){t instanceof We?e.g=t:(n||(t=Ue(t,Ke)),e.g=new We(t))}function Be(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Ue(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Fe),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fe(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=Pe.prototype).Ea="",i.pb="",i.Ha="",i.Kb=null,i.qa="",i.fb="",i.toString=function(){var e=[],t=this.Ea;if(t&&e.push(Ue(t,Ve,!0),":"),t=this.Ha){e.push("//");var n=this.pb;n&&e.push(Ue(n,Ve,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Kb)&&e.push(":",String(t))}return(t=this.qa)&&(this.Ha&&"/"!=t.charAt(0)&&e.push("/"),e.push(Ue(t,"/"==t.charAt(0)?je:He,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.fb)&&e.push("#",Ue(t,Ge)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.Ea&&(t=new Pe);var n=!!e.Ea;n?Oe(t,e.Ea):n=!!e.pb,n?t.pb=e.pb:n=!!e.Ha,n?t.Ha=e.Ha:n=null!=e.Kb;var i=e.qa;if(n)Me(t,e.Kb);else if(n=!!e.qa){if("/"!=i.charAt(0))if(this.Ha&&!this.qa)i="/"+i;else{var r=t.qa.lastIndexOf("/");-1!=r&&(i=t.qa.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.qa=i:n=""!==e.g.toString(),n?Ne(t,e.g.clone()):n=!!e.fb,n&&(t.fb=e.fb),t},i.clone=function(){return new Pe(this)};var Ve=/[#\/\?@]/g,He=/[#\?:]/g,je=/[#\?]/g,Ke=/[#\?@]/g,Ge=/#/g;function We(e){this.g=e||null}function ze(e){if(!e.la&&(e.la={},e.Oc=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var a=t[n].substring(0,i);r=t[n].substring(i+1)}else a=t[n];a=decodeURIComponent(a.replace(/\+/g," ")),r=r||"",e.add(a,decodeURIComponent(r.replace(/\+/g," ")))}}function Ye(e,t){return e.concat(t)}function qe(){}function $e(e){return null!=e}function Xe(e,t){if(0==t.length)return e;var n=t.map((function(e){return new Pe(e)}));return e.map((function(e){return new Pe(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(Ye,[]).map((function(e){return e.toString()}))}function Qe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function Ze(e,t){if(1==t.length)return t[0];if(null!=(e=Je(e,t)))return e;throw new xe(2,4,4025,t)}function Je(e,t){for(var n=u(nt[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=u(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==et?"":null}(i=We.prototype).la=null,i.Oc=null,i.add=function(e,t){ze(this),this.g=null;var n=this.la.hasOwnProperty(e)?this.la[e]:null;return n||(this.la[e]=n=[]),n.push(t),this.Oc++,this},i.set=function(e,t){return ze(this),this.g=null,this.la.hasOwnProperty(e)?this.la[e]=[t]:this.add(e,t),this},i.toString=function(){if(this.g)return this.g;if(!this.la)return"";var e,t=[];for(e in this.la)for(var n=encodeURIComponent(e),i=this.la[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.g=t.join("&")},i.clone=function(){var e=new We;if(e.g=this.g,this.la){var t,n={};for(t in this.la)n[t]=this.la[t].concat();e.la=n,e.Oc=this.Oc}return e};var et="text",tt={va:"video",Hc:"audio",X:et,Wb:"image",Gg:"application"},nt={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cx]$/,/^[du]dts$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function it(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function rt(e){this.h=e,this.g=void 0}function at(e){this.h=e,this.g=null}function ot(e){this.h=e,this.g=null}function st(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function lt(e){return""!=mt().canPlayType(e)}function ut(){return gt("Xbox One")}function ct(){return gt("Tizen")}function dt(){return gt("Web0S")&&gt("Chrome/38.0.2125.122 Safari/537.36")}function ht(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ct()&&!gt("PC=EOS")&&!gt("VirginMedia")&&!pt()&&!gt("AFT")}function pt(){return gt("PlayStation 4")}function ft(){if(!ht())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function gt(e){return(navigator.userAgent||"").includes(e)}function mt(){return yt||(vt||(vt=new ot((function(){yt=null}))),(yt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(yt=document.createElement("video")),vt.N(1),yt)}it.prototype.resolve=function(){},it.prototype.reject=function(){},rt.prototype.value=function(){return null==this.g&&(this.g=this.h()),this.g},at.prototype.N=function(t){var n=this;this.stop();var i=!0,r=null;return this.g=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.h()}),1e3*t),this},at.prototype.stop=function(){this.g&&(this.g(),this.g=null)},ot.prototype.Mb=function(){return this.stop(),this.h(),this},ot.prototype.N=function(e){var t=this;return this.stop(),this.g=new at((function(){t.h()})).N(e),this},ot.prototype.Ca=function(e){var t=this;return this.stop(),this.g=new at((function(){t.g.N(e),t.h()})).N(e),this},ot.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},V("shaka.util.Timer",ot),ot.prototype.stop=ot.prototype.stop,ot.prototype.tickEvery=ot.prototype.Ca,ot.prototype.tickAfter=ot.prototype.N,ot.prototype.tickNow=ot.prototype.Mb;var vt=null,yt=null;function bt(){}function Et(t){if(!t)return"";if(239==(t=Ie(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!pt())return(t=(new TextDecoder).decode(t)).includes("�")&&W('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r=65533;if(0==(128&t[i])?r=t[i]:t.length>=i+2&&192==(224&t[i])&&128==(192&t[i+1])?(r=(31&t[i])<<6|63&t[i+1],i+=1):t.length>=i+3&&224==(240&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])?(r=(15&t[i])<<12|(63&t[i+1])<<6|63&t[i+2],i+=2):t.length>=i+4&&240==(241&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])&&128==(192&t[i+3])&&(r=(7&t[i])<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=3),65535>=r)n+=String.fromCharCode(r);else{var a=1023&(r-=65536);n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+a)}}return n}function Tt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new xe(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=De(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return St.value()(i)}function At(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=Ie(e);if(239==n[0]&&187==n[1]&&191==n[2])return Et(n);if(254==n[0]&&255==n[1])return Tt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Tt(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Tt(e,!1);if(0==n[1]&&0==n[3])return Tt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Et(e);throw new xe(2,2,2003)}function kt(t){if(e.TextEncoder&&!pt()){var n=new TextEncoder;return Ce(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return Ce(n)}function _t(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}V("shaka.util.StringUtils",bt),bt.resetFromCharCode=function(){St.g=void 0},bt.toUTF16=_t,bt.toUTF8=kt,bt.fromBytesAutoDetect=At,bt.fromUTF16=Tt,bt.fromUTF8=Et;var St=new rt((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Ua:65536};0<t.Ua;(t={Ua:t.Ua}).Ua/=2)if(e(t.Ua))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Ua)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Ua));return n}}(t);return null}));function wt(){}function Ct(e){return e=Ie(e),e=St.value()(e),btoa(e)}function It(e,t){return t=null==t||t,e=Ct(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Dt(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function Rt(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function xt(e){var t=Ie(e);e="";for(var n=(t=u(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function Lt(){for(var e=P.apply(0,arguments),t=0,n=u(e),i=n.next();!i.done;i=n.next())t+=i.value.byteLength;for(t=new Uint8Array(t),n=0,i=(e=u(e)).next();!i.done;i=e.next())i=i.value,t.set(Ie(i),n),n+=i.byteLength;return t}function Pt(){}V("shaka.util.Uint8ArrayUtils",wt),wt.concat=Lt,wt.toHex=xt,wt.fromHex=Rt,wt.fromBase64=Dt,wt.toBase64=It,wt.toStandardBase64=Ct,V("shaka.dependencies",Pt),Pt.has=function(e){return Mt.has(e)},Pt.add=function(e,t){if(!Ot[e])throw Error(e+" is not supported");Mt.set(e,(function(){return t}))};var Ot={muxjs:"muxjs"};Pt.Allowed=Ot;var Mt=new Map([["muxjs",function(){return e.muxjs}]]);function Nt(e){var t=this;this.o=e,this.m=Mt.get("muxjs")(),this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.l=[],this.i=[],this.j=!1,this.g.on("data",(function(e){t.i=e.captions,t.l.push(Lt(e.initSegment,e.data))})),this.g.on("done",(function(){var e={data:Lt.apply(wt,c(t.l)),captions:t.i};t.h.resolve(e),t.j=!1}))}function Bt(e,t){var n=Ut(e),i="audio/aac"==e.toLowerCase().split(";")[0];return!(!Mt.get("muxjs")()||!n&&!i)&&(i?Z('audio/mp4; codecs="mp4a.40.2"'):t?Z(Vt(t,e)):(t=Vt("audio",e),e=Vt("video",e),Z(t)||Z(e)))}function Ut(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function Ft(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp4a.40.2"':Ut(t)?Vt(e,t):t}function Vt(e,t){if(t=t.replace(/mp2t/i,"mp4"),"audio"==e&&(t=t.replace("video","audio")),e=/avc1\.(66|77|100)\.(\d+)/.exec(t)){var n="avc1.",i=e[1],r=Number(e[2]);n=("66"==i?n+"4200":"77"==i?n+"4d00":n+"6400")+(r>>4).toString(16),n+=(15&r).toString(16),t=t.replace(e[0],n)}return t}function Ht(){}function jt(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Kt(e,t,n){return Bt(e=jt(e,t),n)?Ft(n,e):"audio"==n?e.replace("video","audio"):e}function Gt(e){var t=zt(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:return"ac-3";case"mp4a"===e&&"a6"===t:return"ec-3";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"dvh1"===e:case"dvhe"===e:return"dovi"}return e}function Wt(e){return(e=e.split(/ *; */)).shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function zt(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}function Yt(e){this.j=null,this.i=e,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.B="",this.o=new Map}function qt(e){return!(!Zt[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function $t(e,t,n){if(e.B=t,t=e.o.get(t))for(var i=u(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.i.append(r)}function Xt(e,t,n){t.startTime+=n,t.endTime+=n;for(var i=(t=u(t.nestedCues)).next();!i.done;i=t.next())Xt(e,i.value,n)}function Qt(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=u(t)).next();!s.done;s=t.next()){var l=s.value;s=l.stream,l=l.cue,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),Xt(e,l,r),l.startTime>=e.l&&l.startTime<e.m&&(o.get(s).get(a).push(l),s==e.B&&e.i.append([l]))}for(a=(r=u(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),s=(t=u(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,l=o.get(a).get(s),e.o.get(a).set(s,l);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}Nt.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},V("shaka.util.MimeUtils",Ht),Ht.getFullType=jt,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),Yt.prototype.destroy=function(){return this.i=this.j=null,this.o.clear(),Promise.resolve()},Yt.prototype.remove=function(e,t){var n=this;return L((function(i){if(1==i.g)return E(i,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),T(i)}))},V("shaka.text.TextEngine",Yt),Yt.prototype.destroy=Yt.prototype.destroy,Yt.findParser=function(e){return Zt[e]},Yt.unregisterParser=function(e){delete Zt[e]},Yt.registerParser=function(e,t){Zt[e]=t};var Zt={};function Jt(){}function en(e,t){return e=rn(e),t=rn(t),e.split("-")[0]==t.split("-")[0]}function tn(e,t){return e=rn(e),t=rn(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function nn(e,t){return e=rn(e),t=rn(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function rn(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=un.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function an(e,t){return e=rn(e),(t=rn(t))==e?4:tn(t,e)?3:nn(t,e)?2:tn(e,t)?1:0}function on(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),un.get(e)||e}function sn(e){return e.language?rn(e.language):e.audio&&e.audio.language?rn(e.audio.language):e.video&&e.video.language?rn(e.video.language):"und"}function ln(e,t){e=rn(e);var n=new Set,i=u(t);for(t=i.next();!t.done;t=i.next())n.add(rn(t.value));for(t=(i=u(n)).next();!t.done;t=i.next())if((t=t.value)==e)return t;for(t=(i=u(n)).next();!t.done;t=i.next())if(tn(t=t.value,e))return t;for(t=(i=u(n)).next();!t.done;t=i.next())if(nn(t=t.value,e))return t;for(t=(n=u(n)).next();!t.done;t=n.next())if(tn(e,t=t.value))return t;return null}V("shaka.util.LanguageUtils",Jt),Jt.findClosestLocale=ln,Jt.getLocaleForVariant=sn,Jt.getLocaleForText=function(e){return rn(e.language||"und")},Jt.getBase=on,Jt.relatedness=an,Jt.areSiblings=function(e,t){var n=on(e),i=on(t);return e!=n&&t!=i&&n==i},Jt.normalize=rn,Jt.isSiblingOf=nn,Jt.isParentOf=tn,Jt.areLanguageCompatible=en,Jt.areLocaleCompatible=function(e,t){return(e=rn(e))==(t=rn(t))};var un=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function cn(){this.g={}}function dn(e,t,n,i,r){var a=e.variants;(t.length||n.length)&&(a=function(e,t,n){for(var i={},r=(t=u(t)).next();!r.done;i={xd:i.xd},r=t.next())if(i.xd=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.xd)}}(i)),r.length){e=r;break}for(i={},n=u(n),t=n.next();!t.done;i={jd:i.jd},t=n.next())if(i.jd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.jd)}}(i)),t.length){e=t;break}return e}(a,t,n)),t=function(e){for(var t=new cn,n=(e=u(e)).next();!n.done;n=e.next()){var i=pn(n=n.value);t.push(i,n)}return t}(a=Ln(a,i)),t=function(e){var t=0,n=new Map,i=e.size();return e.forEach((function(e,r){for(var a=(r=u(r)).next();!a.done;a=r.next()){var o=(a=a.value).video;if(o&&o.width&&o.height){o=o.width*o.height*(o.frameRate||1),n.has(o)||n.set(o,new cn);var s=n.get(o);s.push(e,a),s.size()===i&&(t=Math.max(t,o))}}})),t?n.get(t):e}(t);var o=function(e,t){for(var n=(t=u(t)).next();!n.done;n=t.next())if((n=n.value)==Un||n==Fn){if(1==(e=hn(e,n)).size())return e.keys()[0]}else if(n==Vn)break;return function(e){var t="",n=1/0;return e.forEach((function(e,i){for(var r=0,a=0,o=(i=u(i)).next();!o.done;o=i.next())r+=o.value.bandwidth||0,++a;(r/=a)<n&&(t=e,n=r)})),t}(e)}(t,r);e.variants=e.variants.filter((function(e){return pn(e)==o}))}function hn(e,t){var n=0,i=new cn;return e.forEach((function(e,r){for(var a=0,o=0,s=u(r),l=s.next();!l.done;l=s.next())(l=l.value).decodingInfos.length&&(a+=l.decodingInfos[0][t]?1:0,o++);(a/=o)>n?(i.g={},i.push(e,r),n=a):a==n&&i.push(e,r)})),i}function pn(e){var t="";e.video&&(t=Gt(e.video.codecs));var n="";return e.audio&&(n=Gt(e.audio.codecs)),t+"-"+n}function fn(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;if(0!=e.disabledUntilTime){if(e.disabledUntilTime>Date.now()/1e3)return!1;e.disabledUntilTime=0}return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function gn(e,t,n){for(var i=!1,r=(e=u(e)).next();!r.done;r=e.next()){var a=(r=r.value).allowedByApplication;r.allowedByApplication=fn(r,t,n),a!=r.allowedByApplication&&(i=!0)}return i}function mn(e,t){return L((function(n){return 1==n.g?E(n,vn(t,0<t.offlineSessionIds.length),2):(An(e,t),function(e){e.textStreams=e.textStreams.filter((function(e){return qt(jt(e.mimeType,e.codecs))}))}(t),E(n,function(e){var t,n,i,r,a,o,s;return L((function(l){switch(l.g){case 1:t=[],n=u(e.imageStreams),i=n.next();case 2:if(i.done){l.A(4);break}if(r=i.value,a=r.mimeType,Hn.has(a)){l.A(5);break}if(!(o=jn.get(a))){Hn.set(a,!1),l.A(5);break}return E(l,function(e){return new Promise((function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then((function(){t(!0)})).catch((function(){t(!1)})):n.onload=n.onerror=function(){t(2===n.height)}}))}(o),7);case 7:s=l.h,Hn.set(a,s);case 5:Hn.get(a)&&t.push(r),i=n.next(),l.A(2);break;case 4:e.imageStreams=t,T(l)}}))}(t),0))}))}function vn(e,t){return L((function(n){if(1==n.g)return E(n,yn(e.variants,t,!1),2);e.variants=e.variants.filter((function(e){var t=e.video;if(t){var n=Tn(t.codecs);if(t.codecs.includes(",")){var i=t.codecs.split(",");n=Tn(n=Ze("video",i)),i=En(i=Ze("audio",i));var r=Kt(t.mimeType,i,"audio");if(!Z(r))return!1;n=[n,i].join()}if(!Z(i=Kt(t.mimeType,n,"video")))return!1;t.codecs=n}if(n=e.audio){if(i=En(n.codecs),!Z(r=Kt(n.mimeType,i,"audio")))return!1;n.codecs=i}return ut()&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&(t.codecs.includes("avc1.")||t.codecs.includes("avc3."))?(Mn(e),!1):((t=e.decodingInfos.some((function(e){return e.supported})))||Mn(e),t)})),T(n)}))}function yn(e,t,n){var i,r,a,o,s,l,c,d,h,p;return L((function(f){if(e.some((function(e){return e.decodingInfos.length})))return f.return();for(i=navigator.mediaCapabilities,r=[],a=function(e,t){var n;return L((function(r){return 1==r.g?(A(r,2),E(r,i.decodingInfo(t),4)):2!=r.g?(n=r.h,e.decodingInfos.push(n),_(r,0)):(S(r),JSON.stringify(t),void T(r))}))},o=u(e),s=o.next();!s.done;s=o.next())for(l=s.value,c=bn(l,t,n),d=u(c),h=d.next();!h.done;h=d.next())p=h.value,r.push(a(l,p));return E(f,Promise.all(r),0)}))}function bn(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var a=r.codecs;if(r.codecs.includes(",")){var o=r.codecs.split(",");a=Tn(a=Ze("video",o)),o=Ze("audio",o),o=Kt(r.mimeType,o,"audio"),n.audio={contentType:o,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(a=Tn(a),a=Kt(r.mimeType,a,"video"),n.video={contentType:a,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(i&&(a=En(i.codecs),a=Kt(i.mimeType,a,"audio"),n.audio={contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),!(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[n];e=[],a=new Map;for(var s=(o=u(o)).next();!s.done;s=o.next()){var l=s.value;a.get(l.keySystem)||a.set(l.keySystem,[]),a.get(l.keySystem).push(l)}o=t?"required":"optional",t=t?["persistent-license"]:["temporary"];for(var c=(l=u(a.keys())).next();!c.done;c=l.next()){var d=c.value;c=Object.assign({},n);var h=a.get(d);for(d={keySystem:d,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},s=(h=u(h)).next();!s.done;s=h.next()){if((s=s.value).initData&&s.initData.length){for(var p=new Set,f=u(s.initData),g=f.next();!g.done;g=f.next())p.add(g.value.initDataType);d.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(d.distinctiveIdentifier="required"),s.persistentStateRequired&&(d.persistentState="required"),s.sessionType&&(d.sessionTypes=[s.sessionType]),i&&(d.audio?d.audio.robustness=d.audio.robustness||s.audioRobustness:d.audio={robustness:s.audioRobustness}),r&&(d.video?d.video.robustness=d.video.robustness||s.videoRobustness:d.video={robustness:s.videoRobustness})}c.keySystemConfiguration=d,e.push(c)}return e}function En(e){return ct()&&"ac-3"==e.toLowerCase()?"ec-3":e}function Tn(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function An(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!kn(n,e.audio)||t&&e&&e.video&&!kn(t,e.video))}))}function kn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function _n(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=[];o&&s.push(o),a&&s.push(a);var l=[];n&&l.push(n.mimeType),t&&l.push(t.mimeType),l=l[0]||null;var c=[];t&&c.push(t.kind),n&&c.push(n.kind),c=c[0]||null;var d=new Set;if(t)for(var h=u(t.roles),p=h.next();!p.done;p=h.next())d.add(p.value);if(n)for(p=(h=u(n.roles)).next();!p.done;p=h.next())d.add(p.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:c,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:l,audioMimeType:i,videoMimeType:r,codecs:s.join(", "),audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(d),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles),e}function Sn(e){return{id:e.id,active:!1,type:et,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function wn(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function Cn(e){return e.__shaka_id||(e.__shaka_id=Bn++),e.__shaka_id}function In(e){var t=Rn(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function Dn(e){var t=Rn(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function Rn(e){return{id:Cn(e),active:!1,type:"",bandwidth:0,language:rn(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function xn(e){return e.allowedByApplication&&e.allowedByKeySystem}function Ln(e,t){for(var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map,r=(n=u(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(e=n.filter((function(e){return e<=t}))).length?i.get(Math.max.apply(Math,c(e))):i.get(Math.min.apply(Math,c(n)))}function Pn(e,t,n,i){var r=e,a=e.filter((function(e){return e.primary}));a.length&&(r=a);var o=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==o})),t){var s=ln(rn(t),e.map((function(e){return e.language})));s&&(r=e.filter((function(e){return rn(e.language)==s})))}if(r=r.filter((function(e){return e.forced==i})),n){if((e=On(r,n)).length)return e}else if(e=r.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=r.map((function(e){return e.roles})).reduce(Ye,[]),e.length?On(r,e[0]):r}function On(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function Mn(e){var t=[];return e.audio&&t.push(Nn(e.audio)),e.video&&t.push(Nn(e.video)),t.join(", ")}function Nn(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}(i=cn.prototype).push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},i.get=function(e){return(e=this.g[e])?e.slice():null},i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])},i.forEach=function(e){for(var t in this.g)e(t,this.g[t])},i.size=function(){return Object.keys(this.g).length},i.keys=function(){return Object.keys(this.g)};var Bn=0,Un="smooth",Fn="powerEfficient",Vn="bandwidth",Hn=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),jn=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Kn(){var e=this;this.l=null,this.o=!1,this.i=new K,navigator.connection&&navigator.connection.addEventListener("change",(function(){if(e.g.useNetworkInformation&&e.o){e.i=new K,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&e.l(t)}})),this.m=[],this.u=1,this.B=!1,this.h=this.j=this.g=this.s=null,this.D=new ot((function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.l(t)}}))}function Gn(e){var t=e.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.g.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function Wn(e,t,n,i){return e&&(t=t.filter((function(t){return fn(t,e,{width:i,height:n})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}(i=Kn.prototype).stop=function(){this.l=null,this.o=!1,this.m=[],this.u=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},i.init=function(e){this.l=e},i.chooseVariant=function(){var t=1/0,n=1/0;this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=e.screen.height*n,n*=e.screen.width),this.h&&this.g.restrictToElementSize&&(n=this.g.ignoreDevicePixelRatio?1:e.devicePixelRatio,t=this.j.clientWidth*n,n*=this.j.clientHeight),t=Wn(this.g.restrictions,this.m,t,n),n=this.i.getBandwidthEstimate(Gn(this)),this.m.length&&!t.length&&(t=[(t=Wn(null,this.m,1/0,1/0))[0]]);for(var i=t[0]||null,r=0;r<t.length;r++){for(var a=t[r],o=isNaN(this.u)?1:Math.abs(this.u),s=o*a.bandwidth/this.g.bandwidthDowngradeTarget,l={bandwidth:1/0},u=r+1;u<t.length;u++)if(a.bandwidth!=t[u].bandwidth){l=t[u];break}o=o*l.bandwidth/this.g.bandwidthUpgradeTarget,n>=s&&n<=o&&i.bandwidth!=a.bandwidth&&(i=a)}return this.s=Date.now(),i},i.enable=function(){this.o=!0},i.disable=function(){this.o=!1},i.segmentDownloaded=function(e,t){if(this.i.sample(e,t),null!=this.s&&this.o)e:{if(this.B){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{if(!((e=this.i).g>=e.i))break e;this.B=!0}e=this.chooseVariant(),this.i.getBandwidthEstimate(Gn(this)),e&&this.l(e)}},i.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(Gn(this))},i.setVariants=function(e){this.m=e},i.playbackRateChanged=function(e){this.u=e},i.setMediaElement=function(t){var n=this;this.j=t,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in e&&(this.h=new ResizeObserver((function(){n.D.N(zn)})),this.h.observe(this.j))},i.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)},V("shaka.abr.SimpleAbrManager",Kn),Kn.prototype.configure=Kn.prototype.configure,Kn.prototype.setMediaElement=Kn.prototype.setMediaElement,Kn.prototype.playbackRateChanged=Kn.prototype.playbackRateChanged,Kn.prototype.setVariants=Kn.prototype.setVariants,Kn.prototype.getBandwidthEstimate=Kn.prototype.getBandwidthEstimate,Kn.prototype.segmentDownloaded=Kn.prototype.segmentDownloaded,Kn.prototype.disable=Kn.prototype.disable,Kn.prototype.enable=Kn.prototype.enable,Kn.prototype.chooseVariant=Kn.prototype.chooseVariant,Kn.prototype.init=Kn.prototype.init,Kn.prototype.stop=Kn.prototype.stop;var zn=1;function Yn(e,t){this.g=e,this.h=t}function qn(e,t){var n=new Yn(5,0),i=Qn,r=i.g,a=n.h-r.h;(0<(n.g-r.g||a)?i.i:i.h)(i.g,n,e,t)}function $n(e,t,n,i){z([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Xn(e,t,n,i){W([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}Yn.prototype.toString=function(){return"v"+this.g+"."+this.h};var Qn=null;function Zn(e,t){for(this.h=e,this.g=new Set([e]),t=(e=u(t=t||[])).next();!t.done;t=e.next())this.add(t.value)}function Jn(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&ei(n,i)&&ti(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=!(ei(e=e.video,t=t.video)&&ti(e.roles,t.roles))),!n}function ei(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map((function(e){return zt(e)[0]})),t=t.codecs.split(",").map((function(e){return zt(e)[0]})),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ti(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=u(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function ni(e){this.g=e,this.h=new ii(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function ii(e,t,n,i){this.i=e,this.j=t,this.g=n,this.h=void 0===i?"":i}function ri(){this.g=si,this.h=(new Map).set(si,2).set(oi,1)}function ai(e,t,n){e.h.set(si,n).set(oi,t)}V("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),Zn.prototype.add=function(e){return!!Jn(this.h,e)&&(this.g.add(e),!0)},Zn.prototype.values=function(){return this.g.values()},ni.prototype.create=function(e){var t=this,n=e.filter((function(e){return Jn(t.g,e)}));return n.length?new Zn(n[0],n):this.h.create(e)},ii.prototype.create=function(e){var t=[];t=function(e,t){t=rn(t);var n=ln(t,e.map((function(e){return sn(e)})));return n?e.filter((function(e){return n==sn(e)})):[]}(e,this.i);var n=e.filter((function(e){return e.primary}));for(e=function(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}(t=t.length?t:n.length?n:e,this.j),e.length&&(t=e),this.g&&((e=Ln(t,this.g)).length&&(t=e)),this.h&&(e=function(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}(t,this.h),e.length&&(t=e)),e=new Zn(t[0]),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,Jn(e.h,n)&&e.add(n);return e};var oi=0,si=1;function li(e,t){var n={maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4};this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.o=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.m=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function ui(e){var t,n;return L((function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new xe(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i.return():(n=e.h*(1+(2*Math.random()-1)*e.o),E(i,new Promise((function(e){new ot(e).N(n/1e3)})),2))}e.h*=e.m,T(i)}))}function ci(e,t){this.promise=e,this.i=t,this.g=!1}function di(e){return new ci(Promise.reject(e),(function(){return Promise.resolve()}))}function hi(){var e=Promise.reject(new xe(2,7,7001));return e.catch((function(){})),new ci(e,(function(){return Promise.resolve()}))}function pi(e){return new ci(Promise.resolve(e),(function(){return Promise.resolve()}))}function fi(e){return new ci(e,(function(){return e.catch((function(){}))}))}function gi(e){return new ci(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function mi(t,n){if(n)if(n instanceof Map)for(var i=u(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function vi(e){var t,n=new mi(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}ci.prototype.abort=function(){return this.g=!0,this.i()},ci.prototype.finally=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},ci.prototype.Y=function(e,t){function n(n){return function(s){if(r.g&&n)a.reject(o);else{var l=n?e:t;l?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(l,s,a):(n?a.resolve:a.reject)(s)}}}function i(){return a.reject(o),r.abort()}var r=this,a=new it,o=new xe(2,7,7001);return this.promise.then(n(!0),n(!1)),new ci(a,(function(){return i()}))},V("shaka.util.AbortableOperation",ci),ci.prototype.chain=ci.prototype.Y,ci.prototype.finally=ci.prototype.finally,ci.all=gi,ci.prototype.abort=ci.prototype.abort,ci.notAbortable=fi,ci.completed=pi,ci.aborted=hi,ci.failed=di,mi.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},mi.prototype.stopImmediatePropagation=function(){this.g=!0},mi.prototype.stopPropagation=function(){},V("shaka.util.FakeEvent",mi);var yi={Ig:"abrstatuschanged",Jg:"adaptation",Kg:"buffering",Mg:"downloadfailed",Ng:"downloadheadersreceived",Og:"drmsessionupdate",Qg:"emsg",dh:"prft",Error:"error",Rg:"expirationupdated",Sg:"gapjumped",Vg:"loaded",Wg:"loading",Yg:"manifestparsed",Zg:"mediaqualitychanged",Metadata:"metadata",ah:"onstatechange",bh:"onstateidle",eh:"ratechange",gh:"segmentappended",hh:"sessiondata",ih:"stalldetected",jh:"streaming",kh:"textchanged",lh:"texttrackvisibility",mh:"timelineregionadded",nh:"timelineregionenter",oh:"timelineregionexit",ph:"trackschanged",rh:"unloading",sh:"variantchanged"};function bi(){this.ca=new cn,this.Wc=this}function Ei(e){var t=new Set;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||n.buffer&&n.buffer.constructor==ArrayBuffer)return n;if(t.has(n))return null;var i=n.constructor==Array;if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function Ti(e){var t,n={};for(t in e)n[t]=e[t];return n}function Ai(){this.g=[]}function ki(e,t){e.g.push(t.finally((function(){te(e.g,t)})))}function _i(e,t,n){bi.call(this),this.i=!1,this.m=new Ai,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.s=n||null,this.o=!1}function Si(e,t,n,i){n=n||xi;var r=Li[e];(!r||n>=r.priority)&&(Li[e]={priority:n,jg:t,kg:void 0!==i&&i})}function wi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Ci(e,t,n,i,r,a,o){e.o&&(n.uris[r]=n.uris[r].replace("http://","https://"));var s=new Pe(n.uris[r]),l=s.Ea,u=!1;l||(Oe(s,l=(l=location.protocol).slice(0,-1)),n.uris[r]=s.toString()),l=l.toLowerCase();var c=(l=Li[l])?l.jg:null;if(!c)return di(new xe(2,1,1e3,s));var d,h=l.kg,p=null,f=null,g=!1,m=!1;return fi(ui(i)).Y((function(){if(e.i)return hi();d=Date.now();var i=c(n.uris[r],n,t,(function(n,i,r){p&&p.stop(),f&&f.N(s/1e3),e.l&&t==Ri&&(e.l(n,i),u=!0,o.g=r)}),(function(i){e.j&&e.j(i,n,t),m=!0}));if(!h)return i;var a=n.retryParameters.connectionTimeout;a&&(p=new ot((function(){g=!0,i.abort()}))).N(a/1e3);var s=n.retryParameters.stallTimeout;return s&&(f=new ot((function(){g=!0,i.abort()}))),i})).Y((function(i){p&&p.stop(),f&&f.stop(),null==i.timeMs&&(i.timeMs=Date.now()-d);var r={response:i,Yf:u};return!m&&e.j&&e.j(i.headers,n,t),r}),(function(s){if(p&&p.stop(),f&&f.stop(),e.s){var l=null,u=0;s instanceof xe&&(l=s,1001==s.code&&(u=s.data[1])),e.s(n,l,u,g)}if(e.i)return hi();if(g&&(s=new xe(1,1,1003,n.uris[r],t)),s instanceof xe){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity)return l=new mi("retry",l=(new Map).set("error",s)),e.dispatchEvent(l),r=(r+1)%n.uris.length,Ci(e,t,n,i,r,s,o)}throw s}))}function Ii(){this.g=0}function Di(e,t,n){ci.call(this,e,t),this.h=n}bi.prototype.addEventListener=function(e,t){this.ca&&this.ca.push(e,t)},bi.prototype.removeEventListener=function(e,t){this.ca&&this.ca.remove(e,t)},bi.prototype.dispatchEvent=function(e){if(!this.ca)return!0;var t=this.ca.get(e.type)||[],n=this.ca.get("All");for(n&&(t=t.concat(n)),n=(t=u(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Wc,e.currentTarget=this.Wc;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented},bi.prototype.release=function(){this.ca=null},Ai.prototype.destroy=function(){for(var e=[],t=u(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},m(_i,bi),(i=_i.prototype).je=function(e){this.o=e},i.lg=function(e){this.g.add(e)},i.Bg=function(e){this.g.delete(e)},i.rf=function(){this.g.clear()},i.mg=function(e){this.h.add(e)},i.Cg=function(e){this.h.delete(e)},i.tf=function(){this.h.clear()},i.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),bi.prototype.release.call(this),this.m.destroy()},i.request=function(e,t){var n=this,i=new Ii;if(this.i){var r=Promise.reject(new xe(2,7,7001));return r.catch((function(){})),new Di(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Ei(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=Ei(t.uris),r=function(e,t,n){for(var i=pi(void 0),r={},a=(e=u(e.g)).next();!a.done;r={sd:r.sd},a=e.next())r.sd=a.value,i=i.Y(function(e){return function(){return n.body&&(n.body=Ce(n.body)),e.sd(t,n)}}(r));return i.Y(void 0,(function(e){if(e instanceof xe&&7001==e.code)throw e;throw new xe(2,1,1006,e)}))}(this,e,t);var a=r.Y((function(){return Ci(n,e,t,new li(t.retryParameters,!1),0,null,i)})),o=a.Y((function(t){return function(e,t,n){for(var i=pi(void 0),r={},a=(e=u(e.h)).next();!a.done;r={td:r.td},a=e.next())r.td=a.value,i=i.Y(function(e){return function(){var i=n.response;return i.data&&(i.data=Ce(i.data)),e.td(t,i)}}(r));return i.Y((function(){return n}),(function(e){var t=2;if(e instanceof xe){if(7001==e.code)throw e;t=e.severity}throw new xe(t,1,1007,e)}))}(n,e,t)})),s=Date.now(),l=0;r.promise.then((function(){l=Date.now()-s}),(function(){}));var c=0;a.promise.then((function(){c=Date.now()}),(function(){}));var d=o.Y((function(t){var i=Date.now()-c,r=t.response;return r.timeMs+=l,r.timeMs+=i,t.Yf||!n.l||r.fromCache||e!=Ri||n.l(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}));return r=new Di(d.promise,(function(){return d.abort()}),i),ki(this.m,r),r},V("shaka.net.NetworkingEngine",_i),_i.prototype.request=_i.prototype.request,_i.prototype.destroy=_i.prototype.destroy,_i.makeRequest=wi,_i.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},_i.prototype.clearAllResponseFilters=_i.prototype.tf,_i.prototype.unregisterResponseFilter=_i.prototype.Cg,_i.prototype.registerResponseFilter=_i.prototype.mg,_i.prototype.clearAllRequestFilters=_i.prototype.rf,_i.prototype.unregisterRequestFilter=_i.prototype.Bg,_i.prototype.registerRequestFilter=_i.prototype.lg,_i.unregisterScheme=function(e){delete Li[e]},_i.registerScheme=Si,_i.prototype.setForceHTTPS=_i.prototype.je,_i.NumBytesRemainingClass=Ii,m(Di,ci),_i.PendingRequest=Di;var Ri=1;_i.RequestType={MANIFEST:0,SEGMENT:Ri,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var xi=3;_i.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:xi};var Li={};function Pi(e){this.g=!1,this.h=new it,this.i=e}function Oi(e,t){if(e.g){if(t instanceof xe&&7003==t.code)throw t;throw new xe(2,7,7003,t)}}function Mi(){this.g=new cn}function Ni(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),function(e){var t=Bi;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}Bi=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.g)}Pi.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},(i=Mi.prototype).release=function(){this.nb(),this.g=null},i.C=function(e,t,n,i){this.g&&(e=new Ni(e,t,n,i),this.g.push(t,e))},i.ma=function(e,t,n,i){var r=this;this.C(e,t,(function i(a){r.zc(e,t,i),n(a)}),i)},i.zc=function(e,t,n){if(this.g)for(var i=this.g.get(t)||[],r=(i=u(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.zc(),this.g.remove(t,r))},i.nb=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,c(t.g[e]));for(n=(t=u(n)).next();!n.done;n=t.next())n.value.zc();this.g.g={}}},V("shaka.util.EventManager",Mi),Mi.prototype.removeAll=Mi.prototype.nb,Mi.prototype.unlisten=Mi.prototype.zc,Mi.prototype.listenOnce=Mi.prototype.ma,Mi.prototype.listen=Mi.prototype.C,Mi.prototype.release=Mi.prototype.release,Ni.prototype.zc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var Bi=void 0;function Ui(e,t){for(var n=[],i=(e=u(e)).next();!i.done;i=e.next())n.push(t(i.value));return n}function Fi(e){for(var t=new Map,n=u(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Vi(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function Hi(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=(e=u(e)).next();!n.done;n=e.next()){var i=u(n.value);if(n=i.next().value,i=i.next().value,!t.has(n))return!1;if((n=t.get(n))!=i||null==n)return!1}return!0}function ji(e,t){this.S=De(e),this.h=t==Gi,this.g=0}function Ki(){return new xe(2,3,3e3)}(i=ji.prototype).ga=function(){return this.g<this.S.byteLength},i.Z=function(){return this.g},i.Gf=function(){return this.S.byteLength},i.Ra=function(){try{var e=this.S.getUint8(this.g);return this.g+=1,e}catch(e){throw Ki()}},i.$d=function(){try{var e=this.S.getUint16(this.g,this.h);return this.g+=2,e}catch(e){throw Ki()}},i.K=function(){try{var e=this.S.getUint32(this.g,this.h);return this.g+=4,e}catch(e){throw Ki()}},i.Pe=function(){try{var e=this.S.getInt32(this.g,this.h);return this.g+=4,e}catch(e){throw Ki()}},i.$a=function(){try{if(this.h)var e=this.S.getUint32(this.g,!0),t=this.S.getUint32(this.g+4,!0);else t=this.S.getUint32(this.g,!1),e=this.S.getUint32(this.g+4,!1)}catch(e){throw Ki()}if(2097151<t)throw new xe(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.Za=function(e){if(this.g+e>this.S.byteLength)throw Ki();var t=Ie(this.S,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.S.byteLength)throw Ki();this.g+=e},i.sg=function(e){if(this.g<e)throw Ki();this.g-=e},i.seek=function(e){if(0>e||e>this.S.byteLength)throw Ki();this.g=e},i.sc=function(){for(var e=this.g;this.ga()&&0!=this.S.getUint8(this.g);)this.g+=1;return e=Ie(this.S,e,this.g-e),this.g+=1,Et(e)},V("shaka.util.DataViewReader",ji),ji.prototype.readTerminatedString=ji.prototype.sc,ji.prototype.seek=ji.prototype.seek,ji.prototype.rewind=ji.prototype.sg,ji.prototype.skip=ji.prototype.skip,ji.prototype.readBytes=ji.prototype.Za,ji.prototype.readUint64=ji.prototype.$a,ji.prototype.readInt32=ji.prototype.Pe,ji.prototype.readUint32=ji.prototype.K,ji.prototype.readUint16=ji.prototype.$d,ji.prototype.readUint8=ji.prototype.Ra,ji.prototype.getLength=ji.prototype.Gf,ji.prototype.getPosition=ji.prototype.Z,ji.prototype.hasMoreData=ji.prototype.ga;var Gi=1;function Wi(){this.i=[],this.h=[],this.g=!1}function zi(e){for(var t=Zi(e);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function Yi(e){for(var t=Zi(e),n=e.reader.K(),i=0;i<n&&(e.parser.qc(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function qi(e){var t=Zi(e);for(e.reader.skip(78);e.reader.ga()&&!e.parser.g;)e.parser.qc(e.start+t,e.reader,e.partialOkay)}function $i(e){return function(t){e(t.reader.Za(t.reader.S.byteLength-t.reader.Z()))}}function Xi(e){for(var t=0,n=(e=u(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Qi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Zi(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}ji.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Gi},(i=Wi.prototype).box=function(e,t){return e=Xi(e),this.i[e]=Ji,this.h[e]=t,this},i.P=function(e,t){return e=Xi(e),this.i[e]=er,this.h[e]=t,this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new ji(e,0),this.g=!1;e.ga()&&!this.g;)this.qc(0,e,t,n)},i.qc=function(e,t,n,i){var r=t.Z();if(i&&r+8>t.S.byteLength)this.g=!0;else{var a=t.K(),o=t.K(),s=Qi(o),l=!1;switch(a){case 0:a=t.S.byteLength-r;break;case 1:if(i&&t.Z()+8>t.S.byteLength)return void(this.g=!0);a=t.$a(),l=!0}var u=this.h[o];if(u){var c=null,d=null;if(this.i[o]==er){if(i&&t.Z()+4>t.S.byteLength)return void(this.g=!0);c=(d=t.K())>>>24,d&=16777215}o=r+a,n&&o>t.S.byteLength&&(o=t.S.byteLength),i&&o>t.S.byteLength?this.g=!0:(i=o-t.Z(),u({name:s,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t=new ji(t=0<i?t.Za(i):new Uint8Array(0),0),size:a,start:r+e,has64BitSize:l}))}else t.skip(Math.min(r+a-t.Z(),t.S.byteLength-t.Z()))}},V("shaka.util.Mp4Parser",Wi),Wi.headerSize=Zi,Wi.typeToString=Qi,Wi.allData=$i,Wi.visualSampleEntry=qi,Wi.sampleDescription=Yi,Wi.children=zi,Wi.prototype.parseNext=Wi.prototype.qc,Wi.prototype.parse=Wi.prototype.parse,Wi.prototype.stop=Wi.prototype.stop,Wi.prototype.fullBox=Wi.prototype.P,Wi.prototype.box=Wi.prototype.box;var Ji=0,er=1;function tr(e){var t=this;this.g=[],this.h=[],this.data=[],(new Wi).box("moov",zi).box("moof",zi).P("pssh",(function(e){if(!(1<e.version)){var n=Ie(e.reader.S,-12,e.size);if(t.data.push(n),t.g.push(xt(e.reader.Za(16))),0<e.version){n=e.reader.K();for(var i=0;i<n;i++){var r=xt(e.reader.Za(16));t.h.push(r)}}}})).parse(e)}function nr(e,t,n,i){var r=e.length,a=t.length+16+r;0<i&&(a+=4+16*n.size);var o=new Uint8Array(a),s=De(o),l=0;if(s.setUint32(l,a),l+=4,s.setUint32(l,1886614376),l+=4,1>i?s.setUint32(l,0):s.setUint32(l,16777216),l+=4,o.set(t,l),l+=t.length,0<i)for(s.setUint32(l,n.size),l+=4,n=(t=u(n)).next();!n.done;n=t.next())n=Rt(n.value),o.set(n,l),l+=n.length;return s.setUint32(l,r),o.set(e,l+4),o}function ir(e,t){return 1!=(e=ar(e,t)).length?null:e[0]}function rr(e,t,n){return 1!=(e=or(e,t,n)).length?null:e[0]}function ar(e,t){for(var n=[],i=(e=u(e.childNodes)).next();!i.done;i=e.next())(i=i.value)instanceof Element&&i.tagName==t&&n.push(i);return n}function or(e,t,n){for(var i=[],r=(e=u(e.childNodes)).next();!r.done;r=e.next())(r=r.value)instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function sr(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function lr(e,t,n){for(var i=(t=u(t)).next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function ur(e){return Array.from(e.childNodes).every(cr)?e.textContent.trim():null}function cr(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function dr(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r}function hr(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function pr(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function fr(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function gr(e){return 0==(e=Number(e))%1?e:null}function mr(e){return 0==(e=Number(e))%1&&0<e?e:null}function vr(e){return 0==(e=Number(e))%1&&0<=e?e:null}function yr(e){return e=Number(e),isNaN(e)?null:e}function br(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Er(e,t){var n=new DOMParser,i=Ar.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(e){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function Tr(e,t){try{return Er(Et(e),t)}catch(e){return null}}var Ar=new rt((function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}}));function kr(e,t){var n=this;t=void 0===t?1:t,this.D=e,this.G=new Set,this.l=this.u=null,this.da=this.W=!1,this.H=0,this.g=null,this.s=new Mi,this.i=new Map,this.B=[],this.o=new it,this.h=null,this.m=function(t){n.o.reject(t),e.onError(t)},this.ia=new Map,this.ba=new Map,this.O=new ot((function(){return function(e){var t=e.ia,n=e.ba;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),t=Array.from(n.values()),t.length&&t.every((function(e){return"expired"==e}))&&e.m(new xe(2,6,6014)),e.D.cd(Vi(n))}(n)})),this.L=!1,this.J=[],this.M=!1,this.ca=new ot((function(){!function(e){e.i.forEach((function(t,n){var i=t.Vd,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.D.onExpirationUpdated(n.sessionId,r),t.Vd=r)}))}(n)})).Ca(t),this.o.catch((function(){})),this.j=new Pi((function(){return function(e){return L((function(t){switch(t.g){case 1:return e.s.release(),e.s=null,e.o.reject(),e.ca.stop(),e.ca=null,e.O.stop(),e.O=null,E(t,Nr(e),2);case 2:if(!e.l){t.A(3);break}return A(t,4),E(t,e.l.setMediaKeys(null),6);case 6:_(t,5);break;case 4:S(t);case 5:e.l=null;case 3:e.g=null,e.G.clear(),e.u=null,e.B=[],e.h=null,e.m=function(){},e.D=null,e.V=!1,e.F=null,T(t)}}))}(n)})),this.V=!1,this.F=null}function _r(e,t,n){return e.B=n,e.L=0<n.length,Sr(e,t)}function Sr(t,n){var i,r,a,o,s,l,c,d,h,p,f,g;return L((function(m){if(1==m.g){if(i=function(t){if(t=Fi(t.h.clearKeys),0==t.size)return null;var n=[],i=[];t.forEach((function(e,t){var r=t;22!=r.length&&(r=It(Rt(t),!1)),22!=(t=e).length&&(t=It(Rt(e),!1)),e={kty:"oct",kid:r,k:t},n.push(e),i.push(e.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:Ie(kt(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(i)}}(t))for(r=u(n),a=r.next();!a.done;a=r.next())(o=a.value).video&&(o.video.drmInfos=[i]),o.audio&&(o.audio.drmInfos=[i]);for((s=n.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})))||(l=Fi(t.h.servers),function(e,t){var n=[];for(t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})})),e=u(e),t=e.next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(n,l)),c=u(n),a=c.next();!a.done;a=c.next())for(d=a.value,h=Ur(d),p=u(h),f=p.next();!f.done;f=p.next())Hr(f.value,Fi(t.h.servers),Fi(t.h.advanced||{}),t.h.keySystemsMapping);return E(m,yn(n,t.L,t.V),2)}return s||Object.keys(t.h.servers).length?(g=Lr(t,void 0,n),m.return(s?g:g.catch((function(){})))):(t.W=!0,m.return(Promise.resolve()))}))}function wr(e){var t;return L((function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(!e.F){n.A(2);break}return E(n,e.F,3);case 3:return Oi(e.j),n.return();case 2:return A(n,4),e.F=e.l.setMediaKeys(e.u),E(n,e.F,6);case 6:_(n,5);break;case 4:t=S(n),e.m(new xe(2,6,6003,t.message));case 5:Oi(e.j),T(n)}}))}function Cr(e){var t,n;return L((function(i){switch(i.g){case 1:if(!e.u||!e.g)return i.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){i.A(2);break}return t=wi([e.g.serverCertificateUri],e.h.retryParameters),A(i,3),E(i,e.D.kb.request(5,t).promise,5);case 5:n=i.h,e.g.serverCertificate=Ie(n.data),_(i,4);break;case 3:throw new xe(2,6,6017,S(i));case 4:if(e.j.g)return i.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(A(i,6),E(i,e.u.setServerCertificate(e.g.serverCertificate),8)):i.return();case 8:_(i,0);break;case 6:throw new xe(2,6,6004,S(i).message)}}))}function Ir(e){for(var t=(e.g?e.g.initData:[])||[],n=u(t),i=n.next();!i.done;i=n.next())Dr(e,(i=i.value).initDataType,i.initData);for(i=(n=u(e.B)).next();!i.done;i=n.next())Pr(e,i.value);return t.length||e.B.length||e.o.resolve(),e.o}function Dr(e,t,n){if(n.length){for(var i=e.i.values(),r=(i=u(i)).next();!r.done;r=i.next())if(Se(n,r.value.initData)&&!gt("Tizen 2"))return;0<e.i.size&&Fr(e)&&(e.o.resolve(),e.o=new it,e.o.catch((function(){}))),function(e,t,n,i){try{var r=e.u.createSession(i)}catch(t){return void e.m(new xe(2,6,6005,t.message))}e.s.C(r,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push(t):Or(e,t)})),e.s.C(r,"keystatuseschange",(function(t){return Mr(e,t)})),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Vd:1/0,Ja:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof xe||(t=new xe(2,6,6016,n)),void e.m(t)}e.h.logLicenseExchange&&It(n),r.generateRequest(t,n).catch((function(t){if(!e.j.g){e.i.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.m(new xe(2,6,6006,t.message,t,i))}}))}(e,t,n,e.g.sessionType)}}function Rr(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function xr(e){return e=Ui(e=e.i.keys(),(function(e){return e.sessionId})),Array.from(e)}function Lr(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,m;return L((function(v){switch(v.g){case 1:if(i=new Map,n.length){r=function(e,t,n){for(var i=u(t),r=i.next();!r.done;r=i.next()){var a=u(Ur(r.value));for(r=a.next();!r.done;r=a.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new xe(2,6,6e3);for(i={},e=u(e.h.preferredKeySystems),r=e.next();!r.done;i={qd:i.qd},r=e.next())for(i.qd=r.value,a=u(t),r=a.next();!r.done;r=a.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.qd}}(i)))return r.keySystemAccess;for(e=u([!0,!1]),r=e.next();!r.done;r=e.next())for(i=r.value,a=u(t),r=a.next();!r.done;r=a.next()){var o=u(r.value.decodingInfos);for(r=o.next();!r.done;r=o.next()){var s=r.value;if(s.supported&&s.keySystemAccess){var l=u(r=n.get(s.keySystemAccess.keySystem));for(r=l.next();!r.done;r=l.next())if(!!r.value.licenseServerUri==i)return s.keySystemAccess}}}return null}(e,n,i),v.A(2);break}return E(v,function(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,m,v;return L((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new xe(2,6,6e3);for(i=u(t.values()),r=i.next();!r.done;r=i.next())0==(a=r.value).audioCapabilities.length&&delete a.audioCapabilities,0==a.videoCapabilities.length&&delete a.videoCapabilities;o=u(e.h.preferredKeySystems),s=o.next();case 2:if(s.done){y.A(4);break}if(l=s.value,!t.has(l)){y.A(3);break}return c=t.get(l),A(y,6),E(y,navigator.requestMediaKeySystemAccess(l,[c]),8);case 8:return n=y.h,y.return(n);case 6:S(y);case 7:Oi(e.j);case 3:s=o.next(),y.A(2);break;case 4:d=u([!0,!1]),h=d.next();case 9:if(h.done){y.A(11);break}p=h.value,f=u(t.keys()),s=f.next();case 12:if(s.done){h=d.next(),y.A(9);break}if(g=s.value,m=t.get(g),v=m.drmInfos.some((function(e){return!!e.licenseServerUri})),v!=p){y.A(13);break}return A(y,15),E(y,navigator.requestMediaKeySystemAccess(g,[m]),17);case 17:return n=y.h,y.return(n);case 15:S(y);case 16:Oi(e.j);case 13:s=f.next(),y.A(12);break;case 11:return y.return(n)}}))}(e,t),3);case 3:r=v.h;case 2:if(!(a=r))throw new xe(2,6,6001);for(Oi(e.j),A(v,4),e.G.clear(),o=a.getConfiguration(),s=o.audioCapabilities||[],l=o.videoCapabilities||[],c=u(s),d=c.next();!d.done;d=c.next())h=d.value,e.G.add(h.contentType.toLowerCase());for(p=u(l),d=p.next();!d.done;d=p.next())f=d.value,e.G.add(f.contentType.toLowerCase());if(n.length){var y=a.keySystem,b=i.get(a.keySystem),T=[],k=[],w=[],C=[],I=new Set;Vr(b,T,w,k,C,I);var D=e.L?"persistent-license":"temporary";for(y={keySystem:y,licenseServerUri:T[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,persistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||D,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:w[0],serverCertificateUri:k[0],initData:C,keyIds:I},T=(b=u(b)).next();!T.done;T=b.next())(T=T.value).distinctiveIdentifierRequired&&(y.distinctiveIdentifierRequired=T.distinctiveIdentifierRequired),T.persistentStateRequired&&(y.persistentStateRequired=T.persistentStateRequired);b=y}else b=a.keySystem,y=t.get(a.keySystem),T=[],k=[],w=[],C=[],I=new Set,Vr(y.drmInfos,T,w,k,C,I),b={keySystem:b,licenseServerUri:T[0],distinctiveIdentifierRequired:"required"==y.distinctiveIdentifier,persistentStateRequired:"required"==y.persistentState,sessionType:y.sessionTypes[0]||"temporary",audioRobustness:(y.audioCapabilities?y.audioCapabilities[0].robustness:"")||"",videoRobustness:(y.videoCapabilities?y.videoCapabilities[0].robustness:"")||"",serverCertificate:w[0],serverCertificateUri:k[0],initData:C,keyIds:I};if(e.g=b,!e.g.licenseServerUri)throw new xe(2,6,6012,e.g.keySystem);return E(v,a.createMediaKeys(),6);case 6:return g=v.h,Oi(e.j),e.u=g,e.W=!0,E(v,Cr(e),7);case 7:Oi(e.j),_(v,0);break;case 4:if(m=S(v),Oi(e.j,m),e.g=null,e.G.clear(),m instanceof xe)throw m;throw new xe(2,6,6002,m.message)}}))}function Pr(e,t){var n,i,r,a,o;return L((function(s){switch(s.g){case 1:try{n=e.u.createSession("persistent-license")}catch(t){return i=new xe(2,6,6005,t.message),e.m(i),s.return(Promise.reject(i))}return e.s.C(n,"message",(function(t){e.l&&e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.M?e.J.push(t):Or(e,t)})),e.s.C(n,"keystatuseschange",(function(t){return Mr(e,t)})),r={initData:null,initDataType:null,loaded:!1,Vd:1/0,Ja:null,type:"persistent-license"},e.i.set(n,r),A(s,2),E(s,n.load(t),4);case 4:return a=s.h,Oi(e.j),a?(r.loaded=!0,Fr(e)&&e.o.resolve(),s.return(n)):(e.i.delete(n),e.m(new xe(2,6,6013)),s.return(Promise.resolve()));case 2:o=S(s),Oi(e.j,o),e.i.delete(n),e.m(new xe(2,6,6005,o.message));case 3:return s.return(Promise.resolve())}}))}function Or(e,t){var n,i,r,a,o,s,l,c,d,h,p,f;L((function(g){switch(g.g){case 1:return n=t.target,e.h.logLicenseExchange&&It(t.message),i=e.i.get(n),r=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(o=wi([r],e.h.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.g,i&&(o.initData=i.initData,o.initDataType=i.initDataType),Rr(e.g.keySystem)&&function(e){var t=Tt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){for(var n=u((t=Er(t,"PlayReadyKeyMessage")).getElementsByTagName("HttpHeader")),i=n.next();!i.done;i=n.next())i=i.value,e.headers[i.getElementsByTagName("name")[0].textContent]=i.getElementsByTagName("value")[0].textContent;e.body=Dt(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),s=Date.now(),A(g,2),E(g,e.D.kb.request(2,o).promise,4);case 4:l=g.h,_(g,3);break;case 2:return c=S(g),d=new xe(2,6,6007,c),e.m(d),i&&i.Ja&&i.Ja.reject(d),g.return();case 3:return e.j.g?g.return():(e.H+=(Date.now()-s)/1e3,e.h.logLicenseExchange&&It(l.data),A(g,5),E(g,n.update(l.data),7));case 7:_(g,6);break;case 5:return h=S(g),p=new xe(2,6,6008,h.message),e.m(p),i&&i.Ja&&i.Ja.reject(p),g.return();case 6:if(e.j.g)return g.return();f=new mi("drmsessionupdate"),e.D.onEvent(f),i&&(i.Ja&&i.Ja.resolve(),new ot((function(){i.loaded=!0,Fr(e)&&e.o.resolve()})).N(Kr)),T(g)}}))}function Mr(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach((function(t,r){if("string"==typeof r){var a=r;r=t,t=a}if(Rr(e.g.keySystem)&&16==r.byteLength&&(navigator.userAgent.match(/Edge?\//)||pt())){var o=(a=De(r)).getUint32(0,!0),s=a.getUint16(4,!0),l=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,l,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(i=!0),r=xt(r).slice(0,32),e.ia.set(r,t)}));var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Ja&&(e.i.delete(t),t.close().catch((function(){}))),Fr(e)&&(e.o.resolve(),e.O.N(Gr))}function Nr(e){var t;return L((function(n){return t=Array.from(e.i.entries()),e.i.clear(),E(n,Promise.all(t.map((function(t){var n=(t=u(t)).next().value,i=t.next().value;return L((function(t){return 1==t.g?(A(t,2),e.da||e.B.includes(n.sessionId)||"persistent-license"!==i.type?E(t,function(e){var t;return L((function(n){return 1==n.g?(t=new Promise((function(e,t){new ot(t).N(jr)})),A(n,2),E(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?_(n,0):(S(n),void T(n))}))}(n),5):E(t,n.remove(),5)):2!=t.g?_(t,0):(S(t),void T(t))}))}))),0)}))}function Br(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=(e=u(e)).next();!i.done;i=e.next()){i=i.value;for(var r={},a=u(t),o=a.next();!o.done;r={Da:r.Da},o=a.next())if(o=o.value,i.keySystem==o.keySystem){r.Da=[],r.Da=r.Da.concat(i.initData||[]),r.Da=r.Da.concat(o.initData||[]),r.Da=r.Da.filter(function(e){return function(t,n){return void 0===t.keyId||n===e.Da.findIndex((function(e){return e.keyId===t.keyId}))}}(r)),a=i.keyIds&&o.keyIds?new Set([].concat(c(i.keyIds),c(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r.Da,keyIds:a});break}}return n}function Ur(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function Fr(e){return function(e,t){for(var n=(e=u(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),(function(e){return e.loaded}))}function Vr(e,t,n,i,r,a){for(var o={},s=(e=u(e)).next();!s.done;o={oa:o.oa},s=e.next()){if(o.oa=s.value,t.includes(o.oa.licenseServerUri)||t.push(o.oa.licenseServerUri),i.includes(o.oa.serverCertificateUri)||i.push(o.oa.serverCertificateUri),o.oa.serverCertificate&&(n.some(function(e){return function(t){return Se(t,e.oa.serverCertificate)}}(o))||n.push(o.oa.serverCertificate)),o.oa.initData){s={};for(var l=u(o.oa.initData),c=l.next();!c.done;s={Dc:s.Dc},c=l.next())s.Dc=c.value,r.some(function(e){return function(t){var n=e.Dc;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Se(t.initData,n.initData)}}(s))||r.push(s.Dc)}if(o.oa.keyIds)for(l=(s=u(o.oa.keyIds)).next();!l.done;l=s.next())a.add(l.value)}}function Hr(t,n,i,r){var a=t.keySystem;!a||"org.w3.clearkey"==a&&t.licenseServerUri||(n.size&&(n=n.get(a)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(a))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri)),r[a]&&(t.keySystem=r[a]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready"))}(i=kr.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e){this.h=e},i.Yb=function(e){var t,n=this;return L((function(i){if(1==i.g)return n.u?(n.l=e,n.s.ma(n.l,"play",(function(){for(var e=u(n.J),t=e.next();!t.done;t=e.next())Or(n,t.value);n.M=!0,n.J=[]})),"webkitCurrentPlaybackTargetIsWireless"in n.l&&n.s.C(n.l,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Nr(n)})),(t=n.g.initData.find((function(e){return 0<e.initData.length})))||"com.apple.fps"!==n.g.keySystem||n.B.length?E(i,wr(n),2):i.A(2)):(n.s.ma(e,"encrypted",(function(){n.m(new xe(2,6,6010))})),i.return());Ir(n),t||n.B.length||n.h.parseInbandPsshEnabled||n.s.C(n.l,"encrypted",(function(e){return function(e,t){return L((function(n){if(1==n.g)return E(n,wr(e),2);Dr(e,t.initDataType,Ie(t.initData)),T(n)}))}(n,e)})),T(i)}))},i.ic=function(){for(var e=1/0,t=this.i.keys(),n=(t=u(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.Qc=function(){return Vi(this.ba)};var jr=1,Kr=5,Gr=.5,Wr=new rt((function(){return Ce(new Uint8Array([0]))}));function zr(){}function Yr(e,t,n,i){var r,a,o,s;return L((function(l){if(1==l.g)return i&&(r=Xr[i.toLowerCase()])?l.return(r):(a=$r(e))&&(o=Qr[a])?l.return(o):i?l.A(2):E(l,qr(e,t,n),3);if(2!=l.g&&(i=l.h)&&(s=Xr[i]))return l.return(s);throw new xe(2,4,4e3,e)}))}function qr(e,t,n){var i,r,a;return L((function(o){return 1==o.g?((i=wi([e],n)).method="HEAD",E(o,t.request(0,i).promise,2)):(r=o.h,a=r.headers["content-type"],o.return(a?a.toLowerCase().split(";").shift():""))}))}function $r(e){return 1==(e=new Pe(e).qa.split("/").pop().split(".")).length?"":e.pop().toLowerCase()}V("shaka.media.ManifestParser",zr),zr.unregisterParserByMime=function(e){delete Xr[e]},zr.registerParserByMime=function(e,t){Xr[e]=t},zr.registerParserByExtension=function(e,t){Qr[e]=t};var Xr={},Qr={};function Zr(e,t,n,i,r){var a=ea.value(),o=e.subarray(n.start,n.start+n.size),s=De(o),l=new Uint8Array(n.size+a.byteLength);for(l.set(o,0),(o=De(l)).setUint32(4,r),l.set(a,n.size),r=s.getUint32(4),o.setUint32(n.size+16,r),Jr(l,0,l.byteLength),r=new Uint8Array(e.byteLength+l.byteLength),n=ut()?n.start:n.start+n.size,a=e.subarray(n),r.set(e.subarray(0,n)),r.set(l,n),r.set(a,n+l.byteLength),i=(e=u(i)).next();!i.done;i=e.next())Jr(r,(i=i.value).start,i.size+l.byteLength);return l=De(r,t.start),t=Zi(t),e=l.getUint32(t),l.setUint32(t,e+1),r}function Jr(e,t,n){0!=(t=(e=De(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var ea=new rt((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function ta(e,t,n,i,r){if(i>=r)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}if(-1===a||-1===o)return null;for(var l=s=!1,u="white",c="black",d=na(i,r,s,l,u,c);a<=o;a++){for(var h=n[a],p=-1,f=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}if(-1===p||-1===f)h=ia(i,r),e.nestedCues.push(h);else{for(;p<=f;p++)if(g=h[p]){var m=g.l,v=g.i,y=g.j,b=g.h;m==s&&v==l&&y==u&&b==c||(d.payload&&e.nestedCues.push(d),d=na(i,r,m,v,y,b),s=m,l=v,u=y,c=b),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=ia(i,r),e.nestedCues.push(d)),d=na(i,r,s,l,u,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function na(e,t,n,i,r,a){return e=new re(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=a,e}function ia(e,t){return(e=new re(e,t,"")).lineBreak=!0,e}function ra(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function aa(e,t){this.i=[],this.g=1,this.h=0,this.u=e,this.s=t,this.j=this.m=!1,this.l="white",this.o="black",sa(this)}function oa(e,t,n){return ta(new re(t,n,""),"CC"+(e.u<<1|e.s+1),e.i,t,n)}function sa(e){ca(e,0,15),e.g=1}function la(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case da:i=ga.has(n)?ga.get(n):String.fromCharCode(n);break;case ha:i=ma.get(n);break;case pa:e.i[e.g].pop(),i=va.get(n);break;case fa:e.i[e.g].pop(),i=ya.get(n)}i&&e.i[e.g].push(new ra(i,e.m,e.j,e.o,e.l))}}function ua(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map((function(e){return e}));else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map((function(e){return e}))}function ca(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var da=0,ha=1,pa=2,fa=3,ga=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),ma=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),va=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),ya=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function ba(e,t){this.h=ka,this.o=new aa(e,t),this.i=new aa(e,t),this.l=new aa(e,t),this.g=this.i,this.j=0,this.m=null}function Ea(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==Sa&&e.h!==wa&&(r=oa(i,e.j,n),(n=e.i).g=0<n.h?n.h:0,ca(n,0,15),(n=e.l).g=0<n.h?n.h:0,ca(n,0,15),i.g=15),e.h=Sa,i.h=t,r}function Ta(e){e.h=_a,e.g=e.l,e.g.h=0}function Aa(e){Y("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=wa}var ka=0,_a=1,Sa=3,wa=4,Ca="black green blue cyan red yellow magenta black".split(" "),Ia="white green blue cyan red yellow magenta white_italics".split(" ");function Da(){this.l=!1,this.B=this.F=0,this.D=Ba,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",Ra(this)}function Ra(e){e.i=[];for(var t=0;16>t;t++)e.i.push(xa())}function xa(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function La(e,t){Pa(e)&&(e.i[e.h][e.g]=new ra(t,e.u,e.o,e.m,e.s),e.g++)}function Pa(e){var t=e.g<e.B&&0<=e.g;return e.h<e.F&&0<=e.h&&t}function Oa(e,t,n){var i=new re(e.j,t,"");return i.textAlign=e.D===Ma?"left":e.D===Na?"right":se,(n=ta(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Da.prototype.isVisible=function(){return this.l};var Ma=0,Na=1,Ba=2;function Ua(){this.i=[],this.h=null,this.g=0}function Fa(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new Va(e.h)),e.h=null,e.g=0))}function Va(e){this.g=0,this.h=e}function Ha(e){if(!e.ga())throw new xe(2,2,3e3);return e.h[e.g++]}function ja(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Ka(e,t,n,i){if(128<=n&&135>=n)i=7&n,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=Ha(t).value,t=null;for(var r=(n=u(Ga(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=Oa(r,i,e.i)),Ra(r);return t}if(137===n)for(n=(t=u(Ga(e,t=Ha(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=i),n.l=!0;else{if(138===n){for(n=Ha(t).value,t=null,r=(n=u(Ga(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=Oa(r,i,e.i)),r.l=!1;return t}if(139===n){for(n=Ha(t).value,t=null,r=(n=u(Ga(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()?t=Oa(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return Wa(e,t=Ha(t).value,i);if(143===n)return i=Wa(e,255,i),za(e),i;if(144===n)t.skip(1),i=Ha(t).value,e.g&&(e.g.o=0<(128&i),e.g.u=0<(64&i));else if(145===n)i=Ha(t).value,n=Ha(t).value,t.skip(1),e.g&&(t=Ya((48&n)>>4,(12&n)>>2,3&n),e.g.s=Ya((48&i)>>4,(12&i)>>2,3&i),e.g.m=t);else if(146===n)i=Ha(t).value,t=Ha(t).value,e.g&&((e=e.g).h=15&i,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),i=Ha(t).value,t.skip(1),e.g&&(e.g.D=3&i);else if(152<=n&&159>=n){if(n=(15&n)-8,!(r=null!==e.h[n])){var a=new Da;a.j=i,e.h[n]=a}i=Ha(t).value,Ha(t),Ha(t),a=Ha(t).value;var o=Ha(t).value;t=Ha(t).value,r&&0==(7&t)||((t=e.h[n]).h=0,t.g=0,t.u=!1,t.o=!1,t.s="white",t.m="black"),(t=e.h[n]).l=0<(32&i),t.F=1+(15&a),t.B=1+(63&o),e.g=e.h[n]}}}return null}function Ga(e,t){for(var n=[],i=0;8>i;i++)1==(1&t)&&e.h[i]&&n.push(i),t>>=1;return n}function Wa(e,t,n){for(var i=null,r=(t=u(Ga(e,t))).next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(i=Oa(a,n,e.i)),e.h[r]=null}return i}function za(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Ya(e,t,n){var i={0:0,1:0,2:1,3:1};return $a[(e=i[e])<<2|(t=i[t])<<1|(n=i[n])]}Va.prototype.ga=function(){return this.g<this.h.length},Va.prototype.Z=function(){return this.g},Va.prototype.skip=function(e){if(this.g+e>this.h.length)throw new xe(2,2,3e3);this.g+=e};var qa=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),$a="black blue green cyan red magenta yellow white".split(" ");function Xa(){this.h=[],this.g=[],this.i=new Ua,this.l=0,this.s=new Map([["CC1",new ba(0,0)],["CC2",new ba(0,1)],["CC3",new ba(1,0)],["CC4",new ba(1,1)]]),this.o=this.m=0,this.j=new Map,Qa(this)}function Qa(e){e.m=0,e.o=0;for(var t=(e=u(e.s.values())).next();!t.done;t=e.next())(t=t.value).h=2,t.g=t.i,t.m=null,sa(t.i),sa(t.l),sa(t.o)}function Za(e,t){var n=t.type;if(16==(112&t.xa)){var i=t.xa>>3&1;0===n?e.m=i:e.o=i}if(n=e.s.get("CC"+(n<<1|(n?e.o:e.m)+1)),255===t.xa&&255===t.La||!t.xa&&!t.La||!eo(t.xa)||!eo(t.La))return 45<=++e.l&&Qa(e),null;if(e.l=0,t.xa&=127,t.La&=127,!t.xa&&!t.La)return null;if(e=null,16==(112&t.xa))e:{if(i=t.xa,e=t.La,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,16==(240&i)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|e>>5&1];var r=(30&e)>>1;i="white";var a=!1;if(7>r?i=Ia[r]:7===r&&(a=!0),e=1==(1&e),n.h!==wa){if(r=n.g,n.h===Sa&&t!==r.g){var o=1+t-r.h;ua(r,o,1+r.g-r.h,r.h),ca(r,0,o-1),ca(r,t+1,15-t)}r.g=t,n.g.m=e,n.g.j=a,n.g.l=i,n.g.o="black"}}else if(17==(247&i)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",la(n.g,da,32),i=!1,"white_italics"===(t=Ia[(14&e)>>1])&&(t="white",i=!0),n.g.m=1==(1&e),n.g.j=i,n.g.l=t;else if(16==(247&i)&&32==(240&e)||23==(247&i)&&45==(255&e))t="black",0==(7&i)&&(t=Ca[(14&e)>>1]),n.g.o=t;else if(17==(247&i)&&48==(240&e))la(n.g,ha,e);else if(18==(246&i)&&32==(224&e))la(n.g,1&i?fa:pa,e);else if(20==(246&i)&&32==(240&e)){switch(e=t.pts,i=null,t.La){case 32:Ta(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:i=Ea(n,2,e);break;case 38:i=Ea(n,3,e);break;case 39:i=Ea(n,4,e);break;case 40:la(n.g,da,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=e;break;case 42:sa(n.o),Aa(n);break;case 43:Aa(n);break;case 44:t=n.i,i=null,n.h!==wa&&(i=oa(t,n.j,e)),ca(t,0,15);break;case 45:t=n.g,n.h!==Sa?i=null:(i=oa(t,n.j,e),ua(t,(a=t.g-t.h+1)-1,a,t.h),ca(t,0,a-1),ca(t,t.g,15-t.g),n.j=e);break;case 46:ca(n.l,0,15);break;case 47:t=null,n.h!==wa&&(t=oa(n.i,n.j,e)),i=n.l,n.l=n.i,n.i=i,Ta(n),n.j=e,i=t}e=i;break e}e=null}else i=t.La,la(n.g,da,t.xa),la(n.g,da,i);return e}function Ja(e,t){var n=[];try{for(;t.ga();){var i=Ha(t).value,r=(224&i)>>5,a=31&i;if(7===r&&0!=a&&(r=63&Ha(t).value),0!=r){e.j.has(r)||e.j.set(r,new ja(r));for(var o=e.j.get(r),s=t.Z();t.Z()-s<a;){var l=Ha(r=t),u=l.value,c=l.pts;if(16===u)u=u<<16|Ha(r).value;if(0<=u&&31>=u){var d=c;if(o.g){var h=o.g;switch(r=null,u){case 8:!Pa(h)||0>=h.g&&0>=h.h||(0>=h.g?(h.g=h.B-1,h.h--):h.g--,h.i[h.h][h.g]=null);break;case 13:if(h.isVisible()&&(r=Oa(h,d,o.i)),h.h+1>=h.F){d=h;for(var p=0,f=1;16>f;f++,p++)d.i[p]=d.i[f];for(f=0;1>f;f++,p++)d.i[p]=xa()}else h.h++;h.g=0;break;case 14:h.isVisible()&&(r=Oa(h,d,o.i)),h.i[h.h]=xa(),h.g=0;break;case 12:h.isVisible()&&(r=Oa(h,d,o.i)),Ra(h),(d=h).h=0,d.g=0}var g=r}else g=null}else if(128<=u&&159>=u)g=Ka(o,r,u,c);else{if(4096<=u&&4127>=u)8<=(d=255&u)&&15>=d?r.skip(1):16<=d&&23>=d?r.skip(2):24<=d&&31>=d&&r.skip(3);else if(4224<=u&&4255>=u)128<=(d=255&u)&&135>=d?r.skip(4):136<=d&&143>=d&&r.skip(5);else if(32<=u&&127>=u)r=u,o.g&&La(o.g,127===r?"♪":String.fromCharCode(r));else if(160<=u&&255>=u)o.g&&La(o.g,String.fromCharCode(u));else if(4128<=u&&4223>=u){if(r=255&u,o.g)if(qa.has(r)){var m=qa.get(r);La(o.g,m)}else La(o.g,"_")}else 4256<=u&&4351>=u&&o.g&&La(o.g,160!=(255&u)?"_":"[CC]");g=null}(r=g)&&n.push(r)}}}}catch(e){if(!(e instanceof xe&&3e3===e.code))throw e;Y("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function eo(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function to(){}function no(e,t){var n=null,i=null,r=null,a=e.K();return 1&t&&(r=e.$a()),2&t&&e.skip(4),8&t&&(n=e.K()),16&t&&(i=e.K()),{trackId:a,Ce:n,xf:i,th:r}}function io(e,t){return{we:1==t?e.$a():e.K()}}function ro(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.K()}}function ao(e,t,n){var i=e.K(),r=[],a=null;1&n&&(a=e.K()),4&n&&e.skip(4);for(var o=0;o<i;o++){var s={ee:null,sampleSize:null,ed:null};256&n&&(s.ee=e.K()),512&n&&(s.sampleSize=e.K()),1024&n&&e.skip(4),2048&n&&(s.ed=0==t?e.K():e.Pe()),r.push(s)}return{yh:i,Re:r,wf:a}}function oo(){this.j=new Map,this.i=this.h=0,this.g=so}to.prototype.init=function(){},to.prototype.parse=function(){return[]},oo.prototype.init=function(e){function t(e){(e=e.name)in co&&(n.g=co[e])}var n=this,i=[],r=[];if((new Wi).box("moov",zi).box("mvex",zi).P("trex",(function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.K(),t=t.K(),n.h=e,n.i=t})).box("trak",zi).P("tkhd",(function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.K(),i.push(e)})).box("mdia",zi).P("mdhd",(function(e){e=ro(e.reader,e.version),r.push(e.timescale)})).box("minf",zi).box("stbl",zi).P("stsd",Yi).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",qi).box("sinf",zi).box("frma",(function(e){(e=Qi(e=e.reader.K()))in co&&(n.g=co[e])})).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new xe(2,2,2010);this.g==so&&z("Unable to determine bitstream format for CEA parsing!"),i.forEach((function(e,t){n.j.set(e,r[t])}))},oo.prototype.parse=function(e){var t=this;if(this.g==so)return[];var n=[],i=this.h,r=this.i,a=[],o=null,s=null,l=null,d=9e4;return(new Wi).box("moof",(function(e){o=e.start,zi(e)})).box("traf",zi).P("trun",(function(e){e=ao(e.reader,e.version,e.flags),a=e.Re,s=e.wf})).P("tfhd",(function(e){e=no(e.reader,e.flags),i=e.Ce||t.h,r=e.xf||t.i,e=e.trackId,t.j.has(e)&&(d=t.j.get(e))})).P("tfdt",(function(e){l=io(e.reader,e.version).we})).box("mdat",(function(e){if(null===l)throw new xe(2,2,2010);e:{var h=e.reader,p=l,f=d,g=i,m=r,v=a,y=0,b=m;for(v.length&&(b=v[0].sampleSize||m),h.skip((o||0)+(s||0)-e.start-8);h.ga();){e=h.K();var E=h.Ra();switch(t.g){case lo:E=6==(E&=31);break;case uo:E=39==(E=E>>1&63)||40==E;break;default:break e}if(E){E=0,v.length>y&&(E=v[y].ed||0),E=(p+E)/f;for(var T,A=[],k=h.Za(e-1),_=T=0;_<k.length;)2==T&&3==k[_]?(T=0,(k=[].concat(c(k))).splice(_,1),k=new Uint8Array(k)):0==k[_]?T++:T=0,_++;for(T=k,_=0;_<T.length;){for(k=0;255==T[_];)k+=255,_++;k+=T[_++];for(var S=0;255==T[_];)S+=255,_++;S+=T[_++],4==k&&A.push(T.subarray(_,_+S)),_+=S}for(T=(A=u(A)).next();!T.done;T=A.next())n.push({ig:T.value,pts:E})}else try{h.skip(e-1)}catch(e){break}0==(b-=e+4)&&(p=v.length>y?p+(v[y].ee||g):p+g,y++,b=v.length>y&&v[y].sampleSize||m)}}})).parse(e,!1),n};var so=0,lo=1,uo=2,co={avc1:lo,avc3:lo,hev1:uo,hvc1:uo,dvh1:uo,dvhe:uo};function ho(e){this.h=new to,e.includes("video/mp4")&&(this.h=new oo),this.g=new Xa}function po(e,t){for(var n=(t=u(t=e.h.parse(t))).next();!n.done;n=t.next()){var i=n.value,r=Ie(i.ig);if(0<r.length&&(n=e.g,i=i.pts,181===(r=new ji(r,0)).Ra()&&49===r.$d()&&1195456820===r.K()&&3===r.Ra())){var a=r.Ra();if(0!=(64&a)){a&=31,r.skip(1);for(var o=0;o<a;o++){var s=r.Ra(),l=(4&s)>>2,d=r.Ra(),h=r.Ra();l&&(0===(s&=3)||1===s?n.h.push({pts:i,type:s,xa:d,La:h,order:n.h.length}):(n.g.push({pts:i,type:s,value:d,order:n.g.length}),n.g.push({pts:i,type:2,value:h,order:n.g.length})))}}}}return function(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var i=u(e.h),r=i.next();!r.done;r=i.next())(r=Za(e,r.value))&&n.push(r);for(r=(i=u(e.g)).next();!r.done;r=i.next())Fa(e.i,r.value);for(r=(i=u(e.i.i)).next();!r.done;r=i.next())r=Ja(e,r.value),n.push.apply(n,c(r));return e.i.i=[],e.h=[],e.g=[],n}(e.g)}function fo(e,t,n,i,r){this.ya=e,this.Ba=t,this.ka=n,this.Od=void 0===i?null:i,this.timescale=r}function go(e,t,n,i,r,a,o,s,l,u,c,d,h,p,f){u=void 0===u?[]:u,p=void 0===p?mo:p,this.startTime=e,this.j=this.endTime=t,this.u=n,this.Ba=i,this.ka=r,this.h=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=l,this.i=u,this.tilesLayout=void 0===c?"":c,this.s=void 0===d?null:d,this.g=void 0===h?null:h,this.status=p,this.l=void 0===f?null:f,this.o=null,this.m=0}ho.prototype.init=function(e){this.h.init(e)},fo.prototype.lc=function(){return this.Ba},fo.prototype.hc=function(){return this.ka},V("shaka.media.InitSegmentReference",fo),fo.prototype.getEndByte=fo.prototype.hc,fo.prototype.getStartByte=fo.prototype.lc,(i=go.prototype).ya=function(){return this.u()},i.getStartTime=function(){return this.startTime},i.Ef=function(){return this.endTime},i.lc=function(){return this.Ba},i.hc=function(){return this.ka},i.Vf=function(){return this.tilesLayout},i.Uf=function(){return this.s},i.Eb=function(){return this.status},i.bg=function(){this.status=vo},i.Ye=function(e){this.o=e},i.Sf=function(){return this.o},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=u(this.i),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},i.oe=function(e){null==this.g?W("Sync attempted without sync time!"):(e=this.g-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},V("shaka.media.SegmentReference",go),go.prototype.syncAgainst=go.prototype.oe,go.prototype.offset=go.prototype.offset,go.prototype.getThumbnailSprite=go.prototype.Sf,go.prototype.setThumbnailSprite=go.prototype.Ye,go.prototype.markAsUnavailable=go.prototype.bg,go.prototype.getStatus=go.prototype.Eb,go.prototype.getTileDuration=go.prototype.Uf,go.prototype.getTilesLayout=go.prototype.Vf,go.prototype.getEndByte=go.prototype.hc,go.prototype.getStartByte=go.prototype.lc,go.prototype.getEndTime=go.prototype.Ef,go.prototype.getStartTime=go.prototype.getStartTime,go.prototype.getUris=go.prototype.ya;var mo=0,vo=1;function yo(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function bo(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Eo(e,t){return!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t>=e.start(0)}function To(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=(e=u(Ao(e))).next();!i.done;i=e.next()){var r=i.value;i=r.start,(r=r.end)>t&&(n+=r-Math.max(i,t))}return n}function Ao(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function ko(){}function _o(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function So(e){var t={key:e.type,description:"",data:""};if("TXXX"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var i=Et(Ie(e.data,1,n));return e=Et(Ie(e.data,2+n)).replace(/\0*$/,""),t.description=i,t.data=e,t}return"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(n=e.data.subarray(1).indexOf(0))?null:(i=Et(Ie(e.data,1,n)),e=Et(Ie(e.data,2+n)).replace(/\0*$/,""),t.description=i,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(i=e.data.indexOf(0))?null:(i=Et(Ie(e.data,0,i)),e=Ce(e.data.subarray(i.length+1)),t.description=i,t.data=e,t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=Et(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=Et(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Ce(e.data),t):null}function wo(e){for(var t=0,n=[];t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9];){var i=_o(e,t+6);for(e[t+5]>>6&1&&(t+=10),i=(t+=10)+i;t+10<i;){var r=e.subarray(t),a=_o(r,4);(a=So(r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:a,data:r.subarray(10,10+a)}))&&n.push(a),t+=r.size+10}t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]&&(t+=10)}return n}function Co(){this.o=null,this.s=!1,this.l=this.m=null,this.B=[],this.g=this.h=null,this.u=[],this.j=null,this.i=[]}function Io(e){if(1!=(e[0]<<16|e[1]<<8|e[2]))return null;var t={data:new Uint8Array(0),xh:6+(e[4]<<8|e[5]),pts:null,dts:null},n=e[7];return 192&n&&(t.pts=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,t.dts=t.pts,64&n&&(t.dts=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)),t.data=e.subarray(9+e[8]),t}function Do(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71===e[n]&&71===e[n+188]&&71===e[n+376])return n;n++}return-1}function Ro(e,t,n){this.g=null,this.i=-1,this.j=e,this.h=t,this.l=n,"undefined"==typeof libDPIModule&&z("Could not Find LCEVC Library dependencies on this page"),"undefined"==typeof LcevcDil?z("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||z(LcevcDil.SupportObject.SupportError),"undefined"!=typeof LcevcDil&&"undefined"!=typeof libDPIModule&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}function xo(e,t){var n=Lo;switch(t.mimeType){case"video/webm":n=Po;break;case"video/mp4":n=Oo}e.g&&(e.i=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(n))}go.Status={Hg:mo,qh:vo,Xg:2},V("shaka.util.Id3Utils",ko),ko.getID3Frames=wo,Co.prototype.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Do(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(71===e[r]){var a=!!(64&e[r+1]),o=((31&e[r+1])<<8)+e[r+2];if(1<(48&e[r+3])>>4){var s=r+5+e[r+4];if(s===r+188)continue}else s=r+4;switch(o){case 0:a&&(s+=e[s]+1),this.o=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.o:a&&(s+=e[s]+1),o={audio:-1,video:-1,Ed:-1,audioCodec:"",videoCodec:""};var l=s+3+((15&(a=e)[s+1])<<8|a[s+2])-4;for(s+=12+((15&a[s+10])<<8|a[s+11]);s<l;){var u=(31&a[s+1])<<8|a[s+2];switch(a[s]){case 15:-1===o.audio&&(o.audio=u,o.audioCodec="aac");break;case 21:-1===o.Ed&&(o.Ed=u);break;case 27:-1===o.video&&(o.video=u,o.videoCodec="avc");break;case 3:case 4:-1===o.audio&&(o.audio=u,o.audioCodec="mp3");break;case 36:-1===o.video&&(o.video=u,o.videoCodec="hvc")}s+=5+((15&a[s+3])<<8|a[s+4])}a=o,null==this.l&&(this.l=a.video),null==this.g&&(this.g=a.audio),null==this.j&&(this.j=a.Ed),i&&!this.s&&(i=!1,r=t-188),this.s=!0;break;case this.l:a=e.subarray(s,r+188),null==this.m&&(s=Io(a))&&null!=s.pts&&(this.m=s.pts/9e4),this.B.push(a);break;case this.g:a=e.subarray(s,r+188),null==this.h&&(s=Io(a))&&null!=s.pts&&(this.h=s.pts/9e4),this.u.push(a);break;case this.j:this.i.push(e.subarray(s,r+188));break;default:i=!0}}return this},Co.prototype.getStartTime=function(){return{audio:this.h,video:this.m}},V("shaka.util.TsParser",Co),Ro.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},V("shaka.lcevc.Dil",Ro),Ro.prototype.release=Ro.prototype.release;var Lo=0,Po=1,Oo=2;function Mo(e,t,n,i){var r=this;this.j=e,this.F=null,this.m=t,this.h={},this.L={},this.O={},this.g=null,this.H=!1,this.V=n||function(){},this.D=i||null,this.i={},this.u=new Mi,this.o={},this.s=null,this.J=new it,this.l=function(e,t){var n=new MediaSource;return e.u.ma(n,"sourceopen",(function(){URL.revokeObjectURL(e.M),t.resolve()})),e.M=Zo(n),e.j.src=e.M,n}(this,this.J),this.G=new Pi((function(){return function(e){var t,n,i,r,a,o,s;return L((function(l){if(1==l.g){for(n in t=[],e.i)for(i=e.i[n],r=i[0],e.i[n]=i.slice(0,1),r&&t.push(r.p.catch(qe)),a=u(i.slice(1)),o=a.next();!o.done;o=a.next())o.value.p.reject(new xe(2,7,7003,void 0));for(s in e.g&&t.push(e.g.destroy()),e.m&&t.push(e.m.destroy()),e.o)t.push(e.o[s].destroy());return E(l,Promise.all(t),2)}e.u&&(e.u.release(),e.u=null),e.j&&(e.j.removeAttribute("src"),e.j.load(),e.j=null),e.F=null,e.l=null,e.g=null,e.m=null,e.h={},e.o={},e.s=null,e.i={},e.D=null,T(l)}))}(r)})),this.M="",this.B=!1,this.W=new it}function No(e,t,n){e.g||(e.g=new Yt(e.m));var i=e.g;e=e.H,"application/cea-608"!=t&&"application/cea-708"!=t&&(i.j=(0,Zt[t])(),i.j.setSequenceMode?i.j.setSequenceMode(n):z('Text parsers should have a "setSequenceMode" method!'),i.u=e)}function Bo(e){return!e.l||"ended"==e.l.readyState}function Uo(e,t){return t==et?e.g.g:yo(Vo(e,t))}function Fo(e,t){return t==et?e.g.h:bo(Vo(e,t))}function Vo(e,t){try{return e.h[t].buffered}catch(e){return null}}function Ho(e,t,n,i,r,a,o){var s,l,c,d,h,p,f,g,m,v,y,b,A,k,_,S,w,C,I,D,R,x;return a=void 0!==a&&a,o=void 0!==o&&o,L((function(P){switch(P.g){case 1:if(t!=(s=tt).X){P.A(2);break}if(!e.B){P.A(3);break}return E(P,e.W,4);case 4:l=P.h,e.g.s=l;case 3:return E(P,function(e,t,n,i){var r,a,o,s;return L((function(l){return 1==l.g?E(l,Promise.resolve(),2):e.j&&e.i?null==n||null==i?(e.j.parseInit(Ie(t)),l.return()):(r=e.u?n:e.s,a={periodStart:e.s,segmentStart:n,segmentEnd:i,vttOffset:r},o=e.j.parseMedia(Ie(t),a),s=o.filter((function(t){return t.startTime>=e.l&&t.startTime<e.m})),e.i.append(s),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),void T(l)):l.return()}))}(e.g,n,i?i.startTime:null,i?i.endTime:null),5);case 5:return P.return();case 2:if(c=Ie(n),d=e.L[t],e.o[t]&&(d=e.o[t].o),0>Do(c)?es.includes(d)&&((g=wo(c)).length&&i&&(m={cueTime:i.startTime,data:c,frames:g,dts:i.startTime,pts:i.startTime},e.V([m],0,i.endTime))):(h=(new Co).parse(c),p=i.startTime-(h.getStartTime()[t]||0),f=function(e){for(var t=[],n=new Uint8Array(0),i=e.i.length-1;0<=i;i--){var r=Io(n=Lt(e.i[i],n));r&&(t.unshift({cueTime:r.pts?r.pts/9e4:null,data:r.data,frames:wo(r.data),dts:r.dts,pts:r.pts}),n=new Uint8Array(0))}return t}(h),f.length&&e.V(f,p,i?i.endTime:null)),!e.o[t]){r&&t==s.va&&(e.g||No(e,"text/vtt",e.B),e.s||(e.s=new ho(d)),i?(v=po(e.s,n)).length&&(y=e.h[s.va].timestampOffset,Qt(e.g,v,i.startTime,i.endTime,y)):e.s.init(n)),P.A(6);break}return a&&e.o[t].g.resetCaptions(),E(P,function(e,t){return e.j=!0,e.h=new it,e.l=[],e.i=[],t=Ie(t),e.g.push(t),e.g.flush(),e.j&&e.h.reject(new xe(2,3,3018)),e.h}(e.o[t],n),7);case 7:b=P.h,e.g||No(e,"text/vtt",e.B),b.captions&&b.captions.length&&(A=e.h[s.va].timestampOffset,k=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new re(n.startTime,n.endTime,n.text)});return t}(b.captions),Qt(e.g,k,i?i.startTime:null,i?i.endTime:null,A)),n=b.data;case 6:if(n=function(e,t,n,i){var r=e.O[i];return null==n&&r&&(ct()||ut())&&"mp4"==e.L[i].split(";")[0].split("/")[1]&&(t=function(e){function t(){r=!0}function n(e){a.push(e),zi(e)}e=Ie(e);var i,r=!1,a=[],o=[];if((new Wi).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).P("stsd",(function(e){i=e,a.push(e),Yi(e)})).P("encv",t).P("enca",t).P("hev1",(function(e){o.push({box:e,lb:1701733238})})).P("hvc1",(function(e){o.push({box:e,lb:1701733238})})).P("avc1",(function(e){o.push({box:e,lb:1701733238})})).P("avc3",(function(e){o.push({box:e,lb:1701733238})})).P("ac-3",(function(e){o.push({box:e,lb:1701733217})})).P("ec-3",(function(e){o.push({box:e,lb:1701733217})})).P("mp4a",(function(e){o.push({box:e,lb:1701733217})})).parse(e),r)return e;if(0==o.length||!i)throw xt(e),new xe(2,3,3019);o.reverse();for(var s=u(o),l=s.next();!l.done;l=s.next())l=l.value,e=Zr(e,i,l.box,a,l.lb);return e}(t)),t}(e,n,i?i.startTime:null,t),_=e.h[t],S=Jo,!e.B||_.mode==S||!i){P.A(8);break}if(w=e.l.duration,!(t==s.va||!(s.va in e.h))){P.A(9);break}return C=[_.appendWindowStart,_.appendWindowEnd],_.appendWindowStart=0,_.appendWindowEnd=1/0,I=_.timestampOffset,_.timestampOffset=0,E(P,qo(e,t,(function(){return Ko(e,t,n)})),10);case 10:return E(P,qo(e,t,(function(){return Wo(e,t)})),11);case 11:return _.timestampOffset=I,_.appendWindowStart=C[0],_.appendWindowEnd=C[1],D=yo(Vo(e,t)),R=(i.startTime||0)-(D||0),e.W.resolve(R),E(P,qo(e,t,(function(){return Go(e,t,0,w)})),12);case 12:if(t!=s.va){P.A(9);break}return E(P,qo(e,t,(function(){e.j.currentTime-=.001,Yo(e,t)})),9);case 9:return _.mode=S,E(P,e.Aa(w),8);case 8:return i&&e.B&&t!=s.X&&(a||o)&&(x=i.startTime,qo(e,t,(function(){return Wo(e,t)})),qo(e,t,(function(){return zo(e,t,x)}))),E(P,qo(e,t,(function(){Ko(e,t,n)})),16);case 16:T(P)}}))}function jo(e,t){return L((function(n){return t==tt.X?e.g?E(n,e.g.remove(0,1/0),0):n.return():E(n,qo(e,t,(function(){return Go(e,t,0,e.l.duration)})),0)}))}function Ko(e,t,n){if("video"==t&&e.D){var i=e.D;i.g&&i.g.appendBuffer(n,"video",i.i)}e.h[t].appendBuffer(n)}function Go(e,t,n,i){i<=n?Yo(e,t):e.h[t].remove(n,i)}function Wo(e,t){var n=e.h[t].appendWindowStart,i=e.h[t].appendWindowEnd;e.h[t].abort(),e.h[t].appendWindowStart=n,e.h[t].appendWindowEnd=i,Yo(e,t)}function zo(e,t,n){0>n&&(n+=.001),e.h[t].timestampOffset=n,Yo(e,t)}function Yo(e,t){var n=e.i[t][0];n&&(n.p.resolve(),Xo(e,t))}function qo(e,t,n){return Oi(e.G),n={start:n,p:new it},e.i[t].push(n),1==e.i[t].length&&Qo(e,t),n.p}function $o(e,t){var n,i,r,a,o;return L((function(s){switch(s.g){case 1:for(r in Oi(e.G),n=[],i={},e.h)i.Ub=new it,a={start:function(e){return function(){return e.Ub.resolve()}}(i),p:i.Ub},e.i[r].push(a),n.push(i.Ub),1==e.i[r].length&&a.start(),i={Ub:i.Ub};return A(s,2),E(s,Promise.all(n),4);case 4:_(s,3);break;case 2:throw S(s);case 3:try{t()}catch(e){throw new xe(2,3,3015,e)}finally{for(o in e.h)Xo(e,o)}T(s)}}))}function Xo(e,t){e.i[t].shift(),Qo(e,t)}function Qo(e,t){var n=e.i[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new xe(2,3,3017,t)):n.p.reject(new xe(2,3,3015,i)),Xo(e,t)}}(i=Mo.prototype).destroy=function(){return this.G.destroy()},i.init=function(e,t,n){n=void 0!==n&&n;var i,r,a,o,s,l,c,d,h=this;return L((function(p){if(1==p.g)return i=tt,E(p,h.J,2);for(h.B=n,r={},a=u(e.keys()),o=a.next();!o.done;r={na:r.na},o=a.next())r.na=o.value,s=e.get(r.na),l=jt(s.mimeType,s.codecs),r.na==i.X?No(h,l,n):(!t&&Z(l)||!Bt(l,r.na)||(h.o[r.na]=new Nt(l),l=Ft(r.na,l)),c=l+h.F.sourceBufferExtraFeatures,d=h.l.addSourceBuffer(c),h.u.C(d,"error",function(e){return function(){h.i[e.na][0].p.reject(new xe(2,3,3014,h.j.error?h.j.error.code:0))}}(r)),h.u.C(d,"updateend",function(e){return function(){return Yo(h,e.na)}}(r)),h.h[r.na]=d,h.L[r.na]=l,h.i[r.na]=[],h.O[r.na]=!!s.drmInfos.length);T(p)}))},i.configure=function(e){this.F=e},i.Na=function(){var e={total:Ao(this.j.buffered),audio:Ao(Vo(this,"audio")),video:Ao(Vo(this,"video")),text:[]};if(this.g){var t=this.g.g,n=this.g.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var i=this;return L((function(r){return E(r,e==tt.X?i.g.remove(t,n):qo(i,e,(function(){return Go(i,e,t,n)})),0)}))},i.flush=function(e){var t=this;return L((function(n){return e==tt.X?n.return():E(n,qo(t,e,(function(){t.j.currentTime-=.001,Yo(t,e)})),0)}))},i.endOfStream=function(e){var t=this;return L((function(n){return E(n,$o(t,(function(){Bo(t)||(e?t.l.endOfStream(e):t.l.endOfStream())})),0)}))},i.Aa=function(e){var t=this;return L((function(n){return E(n,$o(t,(function(){if(e<t.l.duration)for(var n in t.h){var i={start:function(){},p:new it};t.i[n].unshift(i)}t.l.duration=e})),0)}))},i.getDuration=function(){return this.l.duration};var Zo=e.URL.createObjectURL,Jo="sequence",es=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function ts(e,t,n){this.i=e,this.m=t,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.u=!0,this.B=0,this.D=void 0===n||n,this.F=0,this.G=!1}function ns(e,t,n){this.l=n,this.j=e,this.s=rs(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=t,this.i=function(){}}function is(e){this.g=e}function rs(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=u(Ao(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function as(e,t,n,i,r){var a=this;this.o=r,this.g=e,this.s=t,this.D=n,this.i=new Mi,this.m=!1,this.B=e.readyState,this.u=0,this.h=i,this.l=!1,this.i.C(e,"waiting",(function(){return os(a)})),this.j=new ot((function(){os(a)})).Ca(.25)}function os(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.B&&(e.B=e.g.readyState),!(t=!e.h)){var n=(t=e.h).j,i=rs(n),r=n.g.currentTime,a=Date.now()/1e3;t.g==r&&t.s==i||(t.m=a,t.g=r,t.s=i,t.h=!1),(i=(r=a-t.m)>=t.u&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.o++,t.l(new mi("stalldetected"))),t=!i}t&&(t=e.g.currentTime,i=function(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:(e=Ao(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)})),0<=e?e:null)}(n=e.g.buffered,t,e.D.gapDetectionThreshold),null==i||0==i&&!e.l||((r=n.start(i))>=e.s.Oa()||.001>r-t||(0!=i&&n.end(i-1),e.g.currentTime=r,e.u++,e.o(new mi("gapjumped")))))}}}function ss(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=ls.value().get(t),n.ma(e,t,i))}(i=ts.prototype).getDuration=function(){return this.j},i.Kf=function(){return this.g},i.Xe=function(e){this.i=e},i.Aa=function(e){this.j=e},i.Pf=function(){return this.i},i.Ve=function(e){this.s=e},i.yc=function(e){this.u=e},i.me=function(e){this.o=e},i.We=function(e){this.m=e},i.Df=function(){return this.m},i.Ib=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,i=(e=u(e)).next();!i.done;i=e.next())i=i.value,t=Math.min(t,i.startTime),n=Math.max(n,i.endTime),this.g=Math.max(this.g,i.endTime-i.startTime);this.Td(t),this.h=Math.max(this.h,n),null!=this.i&&this.D&&!this.G&&(this.i=(Date.now()+this.s)/1e3-this.h-this.g)}},i.Md=function(){this.G=!0},i.Td=function(e){this.l=null==this.l?e:Math.min(this.l,e)},i.Sd=function(e){this.g=Math.max(this.g,e)},i.offset=function(e){null!=this.l&&(this.l+=e),null!=this.h&&(this.h+=e)},i.U=function(){return 1/0==this.j&&!this.u},i.jb=function(){return 1/0!=this.j&&!this.u},i.Pa=function(){return Math.max(this.B,this.gb()-this.o)},i.Ze=function(e){this.B=e},i.gb=function(){return this.U()||this.jb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},i.kc=function(e){var t=Math.max(this.l,this.B);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.gb()-this.o+e,this.Oa()))},i.Db=function(){return this.kc(0)},i.Oa=function(){return Math.max(0,this.gb()-(this.U()||this.jb()?this.m:0))},i.df=function(){return!(null==this.i||null!=this.h&&this.D)},i.Ue=function(e){this.F=e},V("shaka.media.PresentationTimeline",ts),ts.prototype.setAvailabilityTimeOffset=ts.prototype.Ue,ts.prototype.usingPresentationStartTime=ts.prototype.df,ts.prototype.getSeekRangeEnd=ts.prototype.Oa,ts.prototype.getSeekRangeStart=ts.prototype.Db,ts.prototype.getSafeSeekRangeStart=ts.prototype.kc,ts.prototype.getSegmentAvailabilityEnd=ts.prototype.gb,ts.prototype.setUserSeekStart=ts.prototype.Ze,ts.prototype.getSegmentAvailabilityStart=ts.prototype.Pa,ts.prototype.isInProgress=ts.prototype.jb,ts.prototype.isLive=ts.prototype.U,ts.prototype.offset=ts.prototype.offset,ts.prototype.notifyMaxSegmentDuration=ts.prototype.Sd,ts.prototype.notifyMinSegmentStartTime=ts.prototype.Td,ts.prototype.lockStartTime=ts.prototype.Md,ts.prototype.notifySegments=ts.prototype.Ib,ts.prototype.getDelay=ts.prototype.Df,ts.prototype.setDelay=ts.prototype.We,ts.prototype.setSegmentAvailabilityDuration=ts.prototype.me,ts.prototype.setStatic=ts.prototype.yc,ts.prototype.setClockOffset=ts.prototype.Ve,ts.prototype.getPresentationStartTime=ts.prototype.Pf,ts.prototype.setDuration=ts.prototype.Aa,ts.prototype.setPresentationStartTime=ts.prototype.Xe,ts.prototype.getMaxSegmentDuration=ts.prototype.Kf,ts.prototype.getDuration=ts.prototype.getDuration,ns.prototype.release=function(){this.l=this.j=null,this.i=function(){}},as.prototype.release=function(){this.i&&(this.i.release(),this.i=null),null!=this.j&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},as.prototype.Wd=function(){this.l=!0,os(this)};var ls=new rt((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function us(e,t,n){var i=this;this.g=e,this.l=t,this.j=n,this.m=!1,this.h=new Mi,this.i=new fs(e),ss(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){hs(i,i.j)}))}function cs(e){return e.m?e.g.currentTime:e.j}function ds(e,t){0<e.g.readyState?gs(e.i,t):ss(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){hs(e,e.j)}))}function hs(e,t){.001>Math.abs(e.g.currentTime-t)?ps(e):(e.h.ma(e.g,"seeking",(function(){ps(e)})),gs(e.i,0==e.g.currentTime?t:e.g.currentTime))}function ps(e){e.m=!0,e.h.C(e.g,"seeking",(function(){return e.l()}))}function fs(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new ot((function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}function gs(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.Ca(.1)}function ms(e){this.g=e,this.j=!1,this.h=null,this.i=new Mi}function vs(e,t,n,i,r,a){var o=this;this.i=e,this.g=t.presentationTimeline,this.B=t.minBufferTime||0,this.l=n,this.u=r,this.s=null,this.o=function(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;return t=new ns(new is(e),t.stallThreshold,n),function(e,t){e.i=t}(t,(function(){i?e.currentTime+=i:(e.pause(),e.play())})),t}(e,n,a),this.j=new as(e,t.presentationTimeline,n,this.o,a),this.h=new us(e,(function(){var e=o.j;e.m=!0,e.l=!1;var t=cs(o.h);return e=bs(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.s||o.s<t-1)?(o.s=t,ds(o.h,e),e=void 0):(o.u(),e=void 0),e}),function(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.Db():e.g.Oa():0>t&&(t=e.g.Oa()+t),ys(e,Es(e,t))}(this,i)),this.m=new ot((function(){if(0!=o.i.readyState&&!o.i.paused){var e=cs(o.h),t=o.g.Db(),n=o.g.Oa();3>n-t&&(t=n-3),e<t&&(e=bs(o,e),o.i.currentTime=e)}}))}function ys(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function bs(e,t){var n=Math.max(e.B,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Db(),a=e.g.Oa(),o=e.g.getDuration();3>a-r&&(r=a-3);var s=e.g.kc(n),l=e.g.kc(i);return n=e.g.kc(n+i),t>=o?ys(e,t):t>a?a:t<r?Eo(e.i.buffered,l)?l:n:t>=s||Eo(e.i.buffered,t)?t:n}function Es(e,t){var n=e.g.Db();return t<n?n:t>(e=e.g.Oa())?e:t}function Ts(e){this.g=e,this.h=null,this.i=0,this.j=!1}function As(e,t){for(var n=(e=u(e.g)).next();!n.done;n=e.next())t(n.value)}function ks(e,t,n){return new Ts([new go(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function _s(e,t,n){this.i=e,this.g=t,this.h=n}function Ss(){Ts.call(this,[]),this.l=[]}function ws(e){var t=this;this.g=e,this.j=!1,this.i=this.g.Tc(),this.h=new ot((function(){t.g.Me(.25*t.i)}))}function Cs(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.Tc()!=t&&e.g.le(t))}catch(e){}e.h.Ca(.25),0!=e.g.Tc()&&e.g.le(0)}function Is(e){var t=this;this.h=e,this.g=new Set,this.i=new ot((function(){Ds(t,!1)})).Ca(.25)}function Ds(e,t){for(var n=u(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function Rs(e){bi.call(this),this.g=new Map,this.h=e}function xs(e){bi.call(this);var t=this;this.g=new Set,this.i=e,this.h=new ot((function(){for(var e=t.i(),n=u(t.g),i=n.next();!i.done;i=n.next())(i=i.value).endTime<e.start&&(t.g.delete(i),i=new mi("regionremove",new Map([["region",i]])),t.dispatchEvent(i))})).Ca(2)}function Ls(e){bi.call(this);var t=this;this.i=e,this.g=new Map,this.l=[{rb:null,qb:Ms,ib:function(e,n){return Ps(t,"enter",e,n)}},{rb:Os,qb:Ms,ib:function(e,n){return Ps(t,"enter",e,n)}},{rb:Ns,qb:Ms,ib:function(e,n){return Ps(t,"enter",e,n)}},{rb:Ms,qb:Os,ib:function(e,n){return Ps(t,"exit",e,n)}},{rb:Ms,qb:Ns,ib:function(e,n){return Ps(t,"exit",e,n)}},{rb:Os,qb:Ns,ib:function(e,n){return Ps(t,"skip",e,n)}},{rb:Ns,qb:Os,ib:function(e,n){return Ps(t,"skip",e,n)}}],this.h=new Mi,this.h.C(this.i,"regionremove",(function(e){t.g.delete(e.region)}))}function Ps(e,t,n,i){t=new mi(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}us.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},fs.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},(i=ms.prototype).yd=function(){var e=this;ss(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,(function(){null==e.h||0==e.h?e.j=!0:(e.i.ma(e.g,"seeking",(function(){e.j=!0})),e.g.currentTime=Math.max(0,e.g.currentTime+e.h))}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},i.zd=function(e){this.h=this.j?this.h:e},i.Ic=function(){return(this.j?this.g.currentTime:this.h)||0},i.ue=function(){return 0},i.te=function(){return 0},i.Ne=function(){},(i=vs.prototype).yd=function(){this.m.Ca(.25)},i.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},i.zd=function(e){ds(this.h,e)},i.Ic=function(){var e=cs(this.h);return 0<this.i.readyState&&!this.i.paused?Es(this,e):e},i.ue=function(){return this.o?this.o.o:0},i.te=function(){return this.j.u},i.Ne=function(){this.j.Wd()},(i=Ts.prototype).release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},i.cg=function(){this.j=!0},i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length||0>(e-=this.i)||e>=this.g.length?null:this.g[e]},i.offset=function(e){if(!this.j)for(var t=u(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.pc=function(e){if(!this.j&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter((function(e){return Math.round(1e3*e.startTime)/1e3<t})),this.g.push.apply(this.g,c(e))}},i.Hb=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)})),this.pc(e),this.eb(t)},i.eb=function(e){if(!this.j){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e})),this.i+=t-this.g.length}},i.Wa=function(e,t,n){if(n=void 0!==n&&n,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new go(e.startTime,t,e.u,e.Ba,e.ka,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.i,e.tilesLayout,e.s,e.g,e.status,e.l))}},i.fd=function(e,t){var n=this;this.j||(this.h&&this.h.stop(),this.h=new ot((function(){var e=t();e?n.g.push.apply(n.g,c(e)):(n.h.stop(),n.h=null)})),this.h.Ca(e))},Ts.prototype[Symbol.iterator]=function(){return this.Cb(0)},Ts.prototype.Cb=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.i.length)for(var r=n.i.length-1;0<=r;--r){var a=n.i[r];if(e>=a.startTime&&e<a.endTime){t++,i=r-1;break}}return new _s(this,t,i)},V("shaka.media.SegmentIndex",Ts),Ts.forSingleSegment=ks,Ts.prototype.getIteratorForTime=Ts.prototype.Cb,Ts.prototype.updateEvery=Ts.prototype.fd,Ts.prototype.fit=Ts.prototype.Wa,Ts.prototype.evict=Ts.prototype.eb,Ts.prototype.mergeAndEvict=Ts.prototype.Hb,Ts.prototype.offset=Ts.prototype.offset,Ts.prototype.get=Ts.prototype.get,Ts.prototype.find=Ts.prototype.find,Ts.prototype.markImmutable=Ts.prototype.cg,Ts.prototype.release=Ts.prototype.release,_s.prototype.vf=function(){return this.g},_s.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.i.length&&e.ya().length&&this.h>=e.i.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.i.length?e.i[this.h]:e},_s.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.i.length?(this.h++,e.ya().length&&this.h==e.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),{value:e=this.current(),done:!e}},V("shaka.media.SegmentIterator",_s),_s.prototype.next=_s.prototype.next,_s.prototype.current=_s.prototype.current,_s.prototype.currentPosition=_s.prototype.vf,m(Ss,Ts),(i=Ss.prototype).clone=function(){var e=new Ss;return e.l=this.l.slice(),e},i.release=function(){for(var e=u(this.l),t=e.next();!t.done;t=e.next())t.value.release();this.l=[]},i.find=function(e){for(var t=0,n=u(this.l),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.i+i.g.length}return null},i.get=function(e){for(var t=0,n=u(this.l),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;t+=i.i+i.g.length}return null},i.offset=function(){},i.pc=function(){},i.eb=function(){},i.Hb=function(){},i.Wa=function(){},i.fd=function(){},V("shaka.media.MetaSegmentIndex",Ss),Ss.prototype.updateEvery=Ss.prototype.fd,Ss.prototype.fit=Ss.prototype.Wa,Ss.prototype.mergeAndEvict=Ss.prototype.Hb,Ss.prototype.evict=Ss.prototype.eb,Ss.prototype.merge=Ss.prototype.pc,Ss.prototype.offset=Ss.prototype.offset,Ss.prototype.get=Ss.prototype.get,Ss.prototype.find=Ss.prototype.find,Ss.prototype.release=Ss.prototype.release,ws.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},ws.prototype.set=function(e){this.i=e,Cs(this)},ws.prototype.Pc=function(){return this.g.Pc()},Is.prototype.release=function(){this.i.stop();for(var e=u(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},m(Rs,bi),Rs.prototype.release=function(){this.g.clear(),bi.prototype.release.call(this)},Rs.prototype.j=function(e){for(var t=u(this.g.values()),n=t.next();!n.done;n=t.next()){e:{for(var i=(n=n.value).rc,r=i.length-1;0<=r;r--){var a=i[r];if(a.position<=e){i=a.Od;break e}}i=null}if((r=i)&&(r=!((r=n.Ae)===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width)),r)e:{if(r=e,a=i.contentType,(a=this.h()[a])&&0<a.length){var o=a[a.length-1].end;if(r>=a[0].start&&r<o){r=!0;break e}}r=!1}r&&(n.Ae=i,JSON.stringify(i),n=new mi("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}},m(xs,bi),xs.prototype.release=function(){this.g.clear(),this.h.stop(),bi.prototype.release.call(this)},m(Ls,bi),Ls.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,bi.prototype.release.call(this)},Ls.prototype.j=function(e,t){for(var n=u(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),a=e<i.startTime?Os:e>i.endTime?Ns:Ms;this.g.set(i,a);for(var o=u(this.l),s=o.next();!s.done;s=o.next())(s=s.value).rb==r&&s.qb==a&&s.ib(i,t)}};var Os=1,Ms=2,Ns=3;function Bs(e,t,n,i,r){return e=wi(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Us(e,t){var n=this;this.g=t,this.m=e,this.i=null,this.u=1,this.o=this.l=null,this.D=!1,this.j=new Map,this.B=!1,this.F=null,this.s=!1,this.h=new Pi((function(){return function(e){var t,n,i,r;return L((function(a){if(1==a.g){for(t=[],n=u(e.j.values()),i=n.next();!i.done;i=n.next())Qs(r=i.value),t.push(Zs(r));return E(a,Promise.all(t),2)}e.j.clear(),e.g=null,e.m=null,e.i=null,T(a)}))}(n)}))}function Fs(e,t){var n=e.j.get("video");if(n){var i=n.stream;i&&(t?(t=i.trickModeVideo)&&!n.ob&&(js(e,t,!1,0,!1),n.ob=i):(i=n.ob)&&(n.ob=null,js(e,i,!0,0,!1)))}}function Vs(e,t,n,i,r,a){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,a=void 0!==a&&a,e.l=t,e.B&&(t.video&&js(e,t.video,n,i,r,a),t.audio&&js(e,t.audio,n,i,r,a))}function Hs(e,t){e.o=t,e.B&&js(e,t,!0,0,!1)}function js(e,t,n,i,r,a){var o=e.j.get(t.type);o||t.type!=et?o&&(o.ob&&(t.trickModeVideo?(o.ob=t,t=t.trickModeVideo):o.ob=null),o.stream!=t||r)&&(t.type==et&&No(e.g.R,jt(t.mimeType,t.codecs),e.m.sequenceMode),o.stream.closeSegmentIndex&&o.stream.closeSegmentIndex(),o.stream=t,o.aa=null,o.ve=!!a,n&&(o.ac?o.hd=!0:o.ra?(o.bb=!0,o.Nc=i,o.hd=!0):(Qs(o),$s(e,o,!0,i).catch((function(t){e.g&&e.g.onError(t)})))),function(e,t){var n,i;return L((function(r){if(1==r.g)return t.ta?(n=t.stream,i=t.ta,n.segmentIndex?r.A(2):E(r,n.createSegmentIndex(),2)):r.return();if(t.ta!=i||t.stream!=n)return r.return();var a=e.g.Sc(),o=Fo(e.g.R,t.type),s=t.stream.segmentIndex.find(t.pa?t.pa.endTime:a),l=null==s?null:t.stream.segmentIndex.get(s);s=l&&l.ka?l.ka-l.Ba:null,l&&!s&&(s=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8),s?((l=l.h)&&(s+=(l.ka?l.ka-l.Ba:null)||0),a=8*s/(l=e.g.getBandwidthEstimate())<(o||0)-a-Math.max(e.m.minBufferTime||0,e.i.rebufferingGoal)||t.ta.h.g>s):a=!1,a&&t.ta.abort(),T(r)}))}(e,o).catch((function(t){e.g&&e.g.onError(t)}))):function(e,t){var n,i,r,a;L((function(o){switch(o.g){case 1:return n=tt,A(o,2),E(o,jo(e.g.R,n.X),4);case 4:_(o,3);break;case 2:i=S(o),e.g&&e.g.onError(i);case 3:r=jt(t.mimeType,t.codecs),No(e.g.R,r,e.m.sequenceMode),(e.g.R.m.isTextVisible()||e.i.alwaysStreamText)&&(a=Gs(t),e.j.set(n.X,a),Xs(e,a,0)),T(o)}}))}(e,t)}function Ks(e,t){t.ac||t.bb||(t.ra?(t.bb=!0,t.Nc=0):null==Uo(e.g.R,t.type)?null==t.Ka&&Xs(e,t,0):(Qs(t),$s(e,t,!1,0).catch((function(t){e.g&&e.g.onError(t)}))))}function Gs(e){return{stream:e,type:e.type,aa:null,pa:null,Zc:null,Kd:null,Jd:null,Id:null,ob:null,endOfStream:!1,ra:!1,Ka:null,bb:!1,Nc:0,hd:!1,ac:!1,vc:!0,Rd:!1,be:!1,nc:!1,ta:null}}function Ws(t,n){var i,r,a,o,s;return L((function(l){switch(l.g){case 1:if(Oi(t.h),n.ra||null==n.Ka||n.ac)return l.return();if(n.Ka=null,!n.bb){l.A(2);break}return E(l,$s(t,n,n.hd,n.Nc),3);case 3:return l.return();case 2:if(n.stream.segmentIndex){l.A(4);break}return i=n.stream,E(l,n.stream.createSegmentIndex(),5);case 5:if(i!=n.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),n.ra||n.Ka||Xs(t,n,0),l.return();case 4:A(l,6),r=function(t,n){if(Ys(n))return function(e,t){var n=Fo(e,"video")||0;$t(e.g,t,n)}(t.g.R,n.stream.originalId||""),null;n.type==et&&function(e){e.g&&$t(e.g,"",0)}(t.g.R);var i=t.g.Sc(),r=n.pa?n.pa.endTime:i,a=function(e,t,n){return t==et?null==(e=e.g).h||e.h<n?0:e.h-Math.max(n,e.g):To(e=Vo(e,t),n)}(t.g.R,n.type,i),o=Math.max(t.m.minBufferTime||0,t.i.rebufferingGoal,t.i.bufferingGoal)*t.u,s=t.m.presentationTimeline.getDuration()-r,l=Fo(t.g.R,n.type);if(1e-6>s&&l)return n.endOfStream=!0,"video"==n.type&&(t=t.j.get(et))&&Ys(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,a>=o)return t.i.updateIntervalSeconds/2;if(a=function(e,t,n,i){if(t.aa)return t.aa.current();if(t.pa||i)return n=t.pa?t.pa.endTime:i,t.Rd=!0,t.aa=t.stream.segmentIndex.Cb(n),t.aa&&t.aa.next().value;e=e.i.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.aa=t.stream.segmentIndex.Cb(i),r=t.aa&&t.aa.next().value),r||(t.aa=t.stream.segmentIndex.Cb(n),r=t.aa&&t.aa.next().value),r}(t,n,i,l),!a)return t.i.updateIntervalSeconds;for(o=1/0,s=u(s=Array.from(t.j.values())),l=s.next();!l.done;l=s.next())Ys(l=l.value)||l.aa&&!l.aa.current()||(o=Math.min(o,l.pa?l.pa.endTime:i));return r>=o+t.m.presentationTimeline.g?t.i.updateIntervalSeconds:(function(t,n,i,r){var a,o,s,l,u,c,d,h,p,f,g,m,v,y;return L((function(b){switch(b.g){case 1:if(a=tt,o=n.stream,s=n.aa,n.ra=!0,A(b,2),2==r.Eb())throw new xe(1,1,1011);return E(b,function(e,t,n){var i,r,a,o,s,l,u,c;return L((function(d){return i=[],r=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,(o=n.timestampOffset)==t.Kd&&r==t.Jd&&a==t.Id||(s=function(){var n;return L((function(i){if(1==i.g)return A(i,2),t.Jd=r,t.Id=a,t.Kd=o,E(i,function(e,t,n,i,r,a){return L((function(o){return t==tt.X?(a||(e.g.s=n),function(e,t,n){e.l=t,e.m=n}(e.g,i,r),o.return()):E(o,Promise.all([qo(e,t,(function(){return Wo(e,t)})),a?Promise.resolve():qo(e,t,(function(){return zo(e,t,n)})),qo(e,t,(function(){e.h[t].appendWindowStart=0,e.h[t].appendWindowEnd=r,e.h[t].appendWindowStart=i,Yo(e,t)}))]),0)}))}(e.g.R,t.type,o,r,a,e.m.sequenceMode),4);if(2!=i.g)return _(i,0);throw n=S(i),t.Jd=null,t.Id=null,t.Kd=null,n}))},i.push(s())),!function(e,t){return e&&t?e.lc()==t.lc()&&e.hc()==t.hc()&&ie(e.ya(),t.ya()):e==t}(n.h,t.Zc)&&(t.Zc=n.h)&&(l=qs(e,t,n.h),u=function(){var i,r,a;return L((function(o){switch(o.g){case 1:return A(o,2),E(o,l,4);case 4:return i=o.h,Oi(e.h),(new Wi).box("moov",zi).box("trak",zi).box("mdia",zi).P("mdhd",(function(e){e=ro(e.reader||0,e.version||0),n.h.timescale=e.timescale})).parse(i),r=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,E(o,e.g.xe(t.type,i),5);case 5:return E(o,Ho(e.g.R,t.type,i,null,r),6);case 6:_(o,0);break;case 2:throw a=S(o),t.Zc=null,a}}))},e.g.fg(n.startTime,n.h),i.push(u())),e.m.sequenceMode&&(c=t.pa?t.pa.m:null,n.m!=c||t.Rd)&&(t.Rd=!1,i.push(function(e,t,n){return L((function(i){return t==tt.X?i.return():(qo(e,t,(function(){return Wo(e,t)})),E(i,qo(e,t,(function(){return zo(e,t,n)})),0))}))}(e.g.R,t.type,n.startTime))),E(d,Promise.all(i),0)}))}(t,n,r),4);case 4:return Oi(t.h),t.s?b.return():(l="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,u=e.ReadableStream,t.i.lowLatencyMode&&u&&l&&!r.l?(d=new Uint8Array(0),p=h=!1,f=function(e){var a,s,l;return L((function(u){return h?u.return():(p=!0,Oi(t.h),t.s?u.return():(d=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(d,e),a=!1,s=0,(new Wi).box("mdat",(function(e){s=e.size+e.start,a=!0})).parse(d,!1,!0),a?(l=d.subarray(0,s),d=d.subarray(s),E(u,zs(t,n,i,o,r,l),0)):u.A(0)))}))},E(b,qs(t,n,r,f),11)):E(b,qs(t,n,r),7));case 7:if(c=b.h,Oi(t.h),t.s)return b.return();if(!r.l){b.A(8);break}return E(b,function(t,n,i){var r,a,o,s;return L((function(l){if(1==l.g)return(r=n.l).cryptoKey?l.A(2):E(l,r.fetchKey(),3);if(!(a=r.iv))for(a=Ie(new ArrayBuffer(16)),o=r.firstMediaSequenceNumber+i.g,s=a.byteLength-1;0<=s;s--)a[s]=255&o,o>>=8;return l.return(e.crypto.subtle.decrypt({name:"AES-CBC",iv:a},r.cryptoKey,t))}))}(c,r,s),9);case 9:c=b.h;case 8:return Oi(t.h),n.bb?(n.ra=!1,Xs(t,n,0),b.return()):E(b,zs(t,n,i,o,r,c),6);case 11:if(g=b.h,p){b.A(6);break}return h=!0,Oi(t.h),t.s?b.return():n.bb?(n.ra=!1,Xs(t,n,0),b.return()):E(b,zs(t,n,i,o,r,g),6);case 6:if(Oi(t.h),t.s)return b.return();n.pa=r,s.next(),n.ra=!1,n.be=!1,m=t.g.R.Na(),v=m[n.type],JSON.stringify(v),n.bb||t.g.Wd(r.startTime,r.endTime,n.type),Xs(t,n,0),_(b,0);break;case 2:if(y=S(b),Oi(t.h,y),t.s)return b.return();if(n.ra=!1,7001==y.code)n.ra=!1,Qs(n),Xs(t,n,0),b.A(0);else if(n.type==a.X&&t.i.ignoreTextStreamFailures)t.j.delete(a.X),b.A(0);else{if(3017!=y.code)return n.nc=!0,y.severity=2,E(b,Js(t,y),0);(function(e,t,n){if(!Array.from(e.j.values()).some((function(e){return e!=t&&e.be}))){var i=Math.round(100*e.u);if(20<i)e.u-=.2;else{if(!(4<i))return t.nc=!0,e.s=!0,void e.g.onError(n);e.u-=.04}t.be=!0}Xs(e,t,4)})(t,n,y),b.A(0)}}}))}(t,n,i,a).catch((function(){})),null)}(t,n),null!=r&&(Xs(t,n,r),n.nc=!1),_(l,7);break;case 6:return a=S(l),E(l,Js(t,a),8);case 8:return l.return();case 7:if(o=Array.from(t.j.values()),!t.B||!o.every((function(e){return e.endOfStream}))){l.A(0);break}return E(l,t.g.R.endOfStream(),10);case 10:Oi(t.h),0!=(s=t.g.R.getDuration())&&s<t.m.presentationTimeline.getDuration()&&t.m.presentationTimeline.Aa(s),T(l)}}))}function zs(e,t,n,i,r,a){var o,s,l,u,c,d;return L((function(h){switch(h.g){case 1:return o=i.closedCaptions&&0<i.closedCaptions.size,l=null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length||e.i.dispatchAllEmsgBoxes,u=e.i.parsePrftBox&&!e.D,(l||u)&&(s=new Wi),l&&s.P("emsg",(function(t){var n=i.emsgSchemeIdUris;if(0===t.version)var a=t.reader.sc(),o=t.reader.sc(),s=t.reader.K(),l=t.reader.K(),u=t.reader.K(),c=t.reader.K(),d=r.startTime+l/s;else s=t.reader.K(),l=(d=t.reader.$a()/s+r.timestampOffset)-r.startTime,u=t.reader.K(),c=t.reader.K(),a=t.reader.sc(),o=t.reader.sc();t=t.reader.Za(t.reader.S.byteLength-t.reader.Z()),(n&&n.includes(a)||e.i.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==a?e.g.gg():"https://aomedia.org/emsg/ID3"==a?(n=wo(t)).length&&r&&e.g.hg([{cueTime:r.startTime,data:t,frames:n,dts:r.startTime,pts:r.startTime}],0,r.endTime):(n=new mi("emsg",n=(new Map).set("detail",{startTime:d,endTime:d+u/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:l,eventDuration:u,id:c,messageData:t})),e.g.onEvent(n)))})),u&&s.P("prft",(function(t){e:{if(!e.D&&r.h.timescale){t.reader.K();var n=t.reader.K();if(n=1e3*n+t.reader.K()/Math.pow(2,32)*1e3,0===t.version)var i=t.reader.K();else try{i=t.reader.$a()}catch(t){e.D=!0,i=void 0;break e}t=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+n).getTime(),i=new mi("prft",i=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-i/r.h.timescale*1e3)})),e.g.onEvent(i),e.D=!0}i=void 0}return i})),(l||u)&&s.parse(a),E(h,function(e,t,n){var i,r,a;return L((function(o){if(1==o.g)return i=Math.max(e.i.bufferBehind,e.m.presentationTimeline.g),null==(r=Uo(e.g.R,t.type))||.01>=(a=n-r-i)?o.return():E(o,e.g.R.remove(t.type,r,r+a),2);Oi(e.h),T(o)}))}(e,t,n),2);case 2:return Oi(e.h),c=t.vc,t.vc=!1,d=t.ve,t.ve=!1,E(h,e.g.xe(t.type,a),3);case 3:return E(h,Ho(e.g.R,t.type,a,r,o,c,d),4);case 4:Oi(e.h),T(h)}}))}function Ys(e){return e&&e.type==et&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function qs(e,t,n,i){var r,a,o,s,l;return L((function(u){return 1==u.g?(r=Ri,a=Bs(n.ya(),n.Ba,n.ka,e.i.retryParameters,i),o=t.stream,e.g.modifySegmentRequest(a,{type:o.type,init:n instanceof fo,duration:n.endTime-n.startTime,mimeType:o.mimeType,codecs:o.codecs,bandwidth:o.bandwidth}),s=e.g.kb.request(r,a),t.ta=s,E(u,s.promise,2)):(l=u.h,t.ta=null,u.return(l.data))}))}function $s(e,t,n,i){var r,a;return L((function(o){return 1==o.g?(t.bb=!1,t.hd=!1,t.Nc=0,t.ac=!0,t.pa=null,t.Zc=null,t.aa=null,i?(r=e.g.Sc(),a=e.g.R.getDuration(),E(o,e.g.R.remove(t.type,r+i,a),3)):E(o,jo(e.g.R,t.type),4)):3!=o.g?(Oi(e.h),n?E(o,e.g.R.flush(t.type),3):o.A(3)):(Oi(e.h),t.ac=!1,t.endOfStream=!1,t.ra||t.Ka||Xs(e,t,0),void T(o))}))}function Xs(e,t,n){var i=t.type;(i!=et||e.j.has(i))&&(t.Ka=new at((function(){var n;return L((function(i){return 1==i.g?(A(i,2),E(i,Ws(e,t),4)):2!=i.g?_(i,0):(n=S(i),e.g&&e.g.onError(n),void T(i))}))})).N(n))}function Qs(e){null!=e.Ka&&(e.Ka.stop(),e.Ka=null)}function Zs(e){return L((function(t){return e.ta?E(t,e.ta.abort(),0):t.A(0)}))}function Js(e,t){return L((function(n){if(1==n.g)return E(n,ui(e.F),2);Oi(e.h),e.g.onError(t),t.handled||e.i.failureCallback(t),T(n)}))}function el(e,t){var n=Hu(),i=this;this.j=t,this.i=e,this.l=n,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then((function(){return function(e){return L((function(t){if(e.s.g)t=t.A(0);else{if(0==e.m.length||e.g&&!e.g.hb)var n=!1;else{e.g&&(e.g.Ia.mb(),e.g=null);var i=(n=e.m.shift()).create(e.l);i?(n.Ia.Jb(),e.g={node:i.node,payload:i.payload,hb:i.hb,Ia:n.Ia}):n.Ia.dd(),n=!0}n?n=Promise.resolve():e.g?n=function(e){var t,n;return L((function(i){switch(i.g){case 1:return e.i=e.j.Mf(e.i,e.l,e.g.node,e.g.payload),A(i,2),e.h=e.j.yf(e.i,e.l,e.g.payload),E(i,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Ia.bd(),e.g=null),_(i,0);break;case 2:return 7001==(t=S(i)).code?e.g.Ia.mb():e.g.Ia.onError(t),e.g=null,e.h=null,n=e,E(i,e.j.handleError(e.l,t),5);case 5:n.i=i.h,T(i)}}))}(e):(e.j.eg(e.i),e.o=new it,n=e.o),t=E(t,n,1)}return t}))}(i)})),this.s=new Pi((function(){return function(e){var t,n;return L((function(i){if(1==i.g)return e.h&&e.h.abort(),nl(e),E(i,e.u,2);for(e.g&&e.g.Ia.mb(),t=u(e.m),n=t.next();!n.done;n=t.next())n.value.Ia.mb();e.g=null,e.m=[],e.j=null,T(i)}))}(i)}))}function tl(e,t){var n={Jb:function(){},bd:function(){},mb:function(){},onError:function(){},dd:function(){},wh:function(){}};return e.m.push({create:t,Ia:n}),e.h&&e.h.abort(),nl(e),n}function nl(e){e.o&&(e.o.resolve(),e.o=null)}function il(e){var t=[],n=700<=e.fontWeight,i="italic"==e.fontStyle,r=e.textDecoration.includes("underline");return n&&t.push("b"),i&&t.push("i"),r&&t.push("u"),n=t.reduce((function(e,t){return e+"<"+t+">"}),""),t=t.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak?"\n":e.nestedCues.length?e.nestedCues.map(il).join(""):n+e.payload+t}function rl(e,t){for(var n=(e=u(e)).next();!n.done;n=e.next())if((n=n.value).isContainer)rl(n.nestedCues,t);else{var i=n.clone();i.nestedCues=[],i.payload=il(n),t.push(i)}return t}function al(e){this.g=null;for(var t=u(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())(n=n.value).mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function ol(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function sl(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=u(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function ll(){}function ul(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function cl(t,n){var i=this;this.j=!1,this.i=[],this.B=t,this.m=n,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new ot((function(){pl(i)})).Ca(.25),this.h=new Map,this.s=new Mi,this.s.C(document,"fullscreenchange",(function(){pl(i,!0)})),this.l=null,"ResizeObserver"in e&&(this.l=new ResizeObserver((function(){pl(i,!0)})),this.l.observe(this.g)),this.o=new Map}function dl(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function hl(e,t,n,i,r){for(var a=!1,o=[],s=[],l=(t=u(t)).next();!l.done;l=t.next()){l=l.value,r.push(l);var c=e.h.get(l),d=l.startTime<=i&&l.endTime>i,h=c?c.ef:null;c&&(o.push(c.Bd),c.tc&&o.push(c.tc),d||(a=!0,e.h.delete(l),c=null)),d&&(s.push(l),c?dl(e,h)||(a=!0):(fl(e,l,r),h=(c=e.h.get(l)).ef,a=!0)),0<l.nestedCues.length&&h&&hl(e,l.nestedCues,h,i,r),r.pop()}if(a){for(r=(i=u(o)).next();!r.done;r=i.next())(r=r.value).parentElement&&r.parentElement.removeChild(r);for(s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),l=(s=u(s)).next();!l.done;l=s.next())(i=e.h.get(l.value)).tc?(n.appendChild(i.tc),i.tc.appendChild(i.Bd)):n.appendChild(i.Bd)}}function pl(e,t){if(e.g){var n=e.B.currentTime;if(!e.j||void 0!==t&&t){for(var i=(t=u(e.o.values())).next();!i.done;i=t.next())ul(i.value);ul(e.g),e.h.clear(),e.o.clear()}if(e.j){t=new Map;for(var r=(i=u(e.h.keys())).next();!r.done;r=i.next())r=r.value,t.set(r,e.h.get(r));hl(e,e.i,e.g,n,[])}}}function fl(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),i=!i&&0<t.nestedCues.length;var a=document.createElement(r);if("br"!=r&&function(e,t,n,i,r){var a=t.style,o=0==n.nestedCues.length,s=1<i.length;a.whiteSpace="pre-wrap";var l=n.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)}));if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=gl(n.linePadding,n,e.m),a.paddingRight=gl(n.linePadding,n,e.m),a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",a.width="100%",a.height="100%";else{if(n.nestedCues.length)var u=t;else u=document.createElement("span"),t.appendChild(u);n.border&&(u.style.border=n.border),r||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}(i,(function(e){return e.backgroundColor})))?u.style.backgroundColor=t:l&&(u.style.backgroundColor="rgba(0, 0, 0, 0.8)")),l&&(u.textContent=l)}s&&!i[i.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center",a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),o||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,a.fontSize=gl(n.fontSize,n,e.m),null!=n.line&&1==n.lineInterpretation&&(a.position="absolute",n.writingMode==he?(a.width="100%",n.lineAlign==fe?a.top=n.line+"%":"end"==n.lineAlign&&(a.bottom=100-n.line+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==fe?a.left=n.line+"%":"end"==n.lineAlign&&(a.right=100-n.line+"%")):(a.height="100%",n.lineAlign==fe?a.right=n.line+"%":"end"==n.lineAlign&&(a.left=100-n.line+"%"))),a.lineHeight=n.lineHeight,null!=n.position&&(n.writingMode==he?a.paddingLeft=n.position:a.paddingTop=n.position),"line-left"==n.positionAlign?a.cssFloat="left":"line-right"==n.positionAlign&&(a.cssFloat="right"),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==he?a.width=n.size+"%":a.height=n.size+"%")}(e,a,t,n,i),n=null,t.region&&t.region.id)if(r=(n=t.region).id+"_"+n.width+"x"+n.height+(n.heightUnits==Ae?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==Ae?"%":"px"),e.o.has(r))n=e.o.get(r);else{var o=document.createElement("span"),s=n.heightUnits==Ae?"%":"px",l=n.widthUnits==Ae?"%":"px",u=n.viewportAnchorUnits==Ae?"%":"px";o.id="shaka-text-region---"+r,o.classList.add("shaka-text-region"),o.style.height=n.height+s,o.style.width=n.width+l,o.style.position="absolute",o.style.top=n.viewportAnchorY+u,o.style.left=n.viewportAnchorX+u,o.style.display="flex",o.style.flexDirection="column",o.style.alignItems="center",o.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.o.set(r,o),n=o}r=a,i&&((r=document.createElement("span")).classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,a.appendChild(r)),e.h.set(t,{Bd:a,ef:r,tc:n})}function gl(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function ml(e,t){this.h=e,this.g=t,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function vl(e,t,n){try{if(e.g.enabled){var i={d:1e3*n.duration,st:e.h.U()?Rl:Dl};i.ot=function(e){var t=e.type;if(e.init)return wl;if("video"==t)return e.codecs.includes(",")?Sl:_l;if("audio"==t)return kl;if("text"==t)return"application/mp4"===e.mimeType?Il:Cl}(n);var r=i.ot===_l||i.ot===kl||i.ot===Sl||i.ot===Il;r&&(i.bl=function(e,t){if(t=e.h.Na()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find((function(e){return e.start<=n&&e.end>=n})))?1e3*(e.end-n):NaN}(e,n.type)),n.bandwidth&&(i.br=n.bandwidth/1e3),r&&i.ot!==Il&&(i.tb=function(e,t){var n=e.h.Xa();if(!n.length)return NaN;e=n[0];for(var i=(n=u(n)).next();!i.done;i=n.next())"variant"===(i=i.value).type&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case _l:return e.videoBandwidth||NaN;case kl:return e.audioBandwidth||NaN;default:return e.bandwidth}}(e,i.ot)/1e3),bl(e,t,i)}}catch(e){Y("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}}function yl(t){return t.j||(t.j=t.g.sessionId||e.crypto.randomUUID()),{v:1,sf:t.o,sid:t.j,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function bl(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,yl(e)),n.pr=e.h.Rc();var r=n.ot===_l||n.ot===Sl;if(e.l&&r&&(n.bs=!0,n.su=!0,e.l=!1),null==n.su&&(n.su=e.m),i)e=function(e){for(var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},o=(t=u(t)).next();!o.done;o=t.next())o=o.value,r[null!=a[o]?a[o]:1][o]=e[o];for(e=0;e<r.length;e++)(a=El(r[e]))&&(n["CMCD-"+i[e]]=a);return n}(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var a=El(n);a&&(t.uris=t.uris.map((function(e){return Tl(e,a)})))}}}function El(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function i(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var r=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort(),s=(o=u(o)).next();!s.done;s=o.next()){var l=e[s=s.value];if(i(l)&&("v"!==s||1!==l)&&("pr"!=s||1!==l)){var c=a[s];c&&(l=c(l));var d;d="string"===(c=typeof l)&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(l):"boolean"===c?s:"symbol"===c?s+"="+l.description:s+"="+l,r.push(d)}}return r.join(",")}function Tl(e,t){return!t||e.includes("offline:")?e:((e=new Pe(e)).g.set("CMCD",t),e.toString())}(i=Us.prototype).destroy=function(){return this.h.destroy()},i.configure=function(e){this.i=e,this.F=new li({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},i.start=function(){var e=this;return L((function(t){if(1==t.g)return E(t,function(e){var t,n,i,r,a,o,s,l,c,d;return L((function(h){if(1==h.g){if(t=tt,!e.l)throw new xe(2,5,5006);return n=new Map,i=new Set,e.l.audio&&(n.set(t.Hc,e.l.audio),i.add(e.l.audio)),e.l.video&&(n.set(t.va,e.l.video),i.add(e.l.video)),e.o&&(n.set(t.X,e.o),i.add(e.o)),r=e.g.R,a=e.i.forceTransmux,E(h,r.init(n,a,e.m.sequenceMode),2)}for(Oi(e.h),e.updateDuration(),o=u(n.keys()),s=o.next();!s.done;s=o.next())l=s.value,c=n.get(l),e.j.has(l)||(d=Gs(c),e.j.set(l,d),Xs(e,d,0));T(h)}))}(e),2);Oi(e.h),e.B=!0,T(t)}))},i.vc=function(){if(this.g)for(var e=this.g.Sc(),t=u(this.j.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;(n=this.j.get(i)).aa=null;var r=this.g.R;if(i==et?r=null!=(r=r.g).g&&null!=r.h&&(e>=r.g&&e<r.h):r=Eo(r=Vo(r,i),e),!r){if((null!=Fo(this.g.R,i)||n.ra)&&Ks(this,n),n.ta&&(n.ta.abort(),n.ta=null),i===et&&(i=this.g.R).s)for((i=i.s.g).l=0,i.h=[],i.g=[],(r=i.i).i=[],r.h=[],r.g=0,Qa(i),r=(i=u(i.j.values())).next();!r.done;r=i.next())za(r.value);n.vc=!0}}},i.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.R.Aa(e):this.g.R.Aa(Math.pow(2,32))},el.prototype.destroy=function(){return this.s.destroy()},(i=al.prototype).remove=function(e,t){return!!this.g&&(sl(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){var t=rl(e,[]),n=[];e=this.g.cues?Array.from(this.g.cues):[];for(var i={},r=(t=u(t)).next();!r.done;i={sb:i.sb},r=t.next())i.sb=r.value,e.some(function(e){return function(t){return t.startTime==e.sb.startTime&&t.endTime==e.sb.endTime&&t.text==e.sb.payload}}(i))||(r=ol(i.sb))&&n.push(r);for(i=(e=u(e=n.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?n.indexOf(t)-n.indexOf(e):n.indexOf(e)-n.indexOf(t)})))).next();!i.done;i=e.next())this.g.addCue(i.value)},i.destroy=function(){return this.g&&(sl(this.g,(function(){return!0})),this.g.mode="disabled"),this.g=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.g.mode},i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},V("shaka.text.SimpleTextDisplayer",al),al.prototype.setTextVisibility=al.prototype.setTextVisibility,al.prototype.isTextVisible=al.prototype.isTextVisible,al.prototype.destroy=al.prototype.destroy,al.prototype.append=al.prototype.append,al.prototype.remove=al.prototype.remove,V("shaka.util.Dom",ll),ll.removeAllChildren=ul,(i=cl.prototype).append=function(e){for(var t=[].concat(c(this.i)),n={},i=(e=u(e)).next();!i.done;n={Cc:n.Cc},i=e.next())n.Cc=i.value,t.some(function(e){return function(t){return ae(t,e.Cc)}}(n))||this.i.push(n.Cc);pl(this)},i.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},i.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter((function(n){return n.startTime<e||n.endTime>=t})),pl(this,n>this.i.length),!0},i.isTextVisible=function(){return this.j},i.setTextVisibility=function(e){this.j=e},V("shaka.text.UITextDisplayer",cl),cl.prototype.setTextVisibility=cl.prototype.setTextVisibility,cl.prototype.isTextVisible=cl.prototype.isTextVisible,cl.prototype.remove=cl.prototype.remove,cl.prototype.destroy=cl.prototype.destroy,cl.prototype.append=cl.prototype.append,V("shaka.text.WebVttGenerator",(function(){}));var Al="m",kl="a",_l="v",Sl="av",wl="i",Cl="c",Il="tt",Dl="v",Rl="l";function xl(){}function Ll(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var l=r+"."+a,u=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===u||o?delete e[a]:e[a]=Ei(u):u.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Ei(u)),l=Ll(e[a],t[a],u,i,l),s=s&&l):typeof t[a]!=typeof u||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=u.constructor?(W("Invalid config, wrong type for "+l),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&z("Unexpected number of arguments for "+l),e[a]=t[a]):(W("Invalid config, unrecognized key "+l),s=!1)}return s}function Pl(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Ol(e,t){return e&&t}function Ml(){}function Nl(e){return new Pe(e=At(e)).Ha}function Bl(e,t,n){function i(e){De(a).setUint32(o,e.byteLength,!0),o+=4,a.set(Ie(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new xe(2,6,6015);var r;r="string"==typeof t?_t(t,!0):t,e=_t(e=At(e),!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),a}function Ul(){}function Fl(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(e,t,n){return"com.apple.fps.1_0"==n.keySystem&&"skd"==t&&(t=n.serverCertificate,e=Bl(e,n=Nl(e),t)),e},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ut()},n={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return Ol([e],e)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return Ol([e])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(gt("Web0S")||ct()||gt("CrKey"))&&(i.stallSkip=0);var r={trackSelectionCallback:function(e){return L((function(t){return t.return(e)}))},downloadSizeCallback:function(e){var t;return L((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?E(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){return Ol([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},a={drm:t,manifest:n,streaming:i,mediaSource:{sourceBufferExtraFeatures:""},offline:r,abrFactory:function(){return new Kn},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return r.trackSelectionCallback=function(e){return L((function(t){return t.return(function(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=ln(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return rn(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));for(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),t=[],i.length&&(n=Math.floor(i.length/2),i.sort((function(e,t){return e.bandwidth-t.bandwidth})),t.push(i[n])),e=u(e),i=e.next();!i.done;i=e.next())(i=i.value).type!=et&&"image"!=i.type||t.push(i);return t}(e,a.preferredAudioLanguage))}))},a}function Vl(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Ll(e,t,n||Fl(),i,"")}function Hl(){this.g=null,this.h=[]}function jl(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function Kl(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=(e=u(e.h)).next();!i.done;i=e.next())n+=(i=i.value).state==t?i.duration:0;return n}function Gl(){this.i=this.h=null,this.g=[]}function Wl(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function zl(){this.u=this.B=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.M=this.O=this.H=this.J=this.L=this.l=this.o=NaN,this.g=new Hl,this.h=new Gl}function Yl(t,n){bi.call(this);var i=this;this.l=Gu,this.Uc=this.g=null,this.ia=!1,this.Xc=new Mi,this.Xb=new Mi,this.s=new Mi,this.Nb=this.i=this.Yc=this.J=this.j=this.ua=this.L=this.cf=this.V=this.Fa=this.M=this.Vc=this.H=this.xb=this.B=this.G=this.m=this.D=null,this.dc=!1,this.Nd=this.u=null,this.Yd=1e9,this.h=cu(this),this.ec={width:1/0,height:1/0},this.o=null,this.ub=new ii(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.vb=this.h.preferredTextLanguage,this.cc=this.h.preferredTextRole,this.$b=this.h.preferForcedSubs,this.Zb=[],this.fc=null,n&&n(this),this.D=function(e){return new _i((function(t,n){e.u&&e.u.segmentDownloaded(t,n)}),(function(t,n,i){t=(new Map).set("headers",t).set("request",n).set("requestType",i),e.dispatchEvent($l("downloadheadersreceived",t))}),(function(t,n,i,r){t=(new Map).set("request",t).set("error",n).set("httpResponseCode",i).set("aborted",r),e.dispatchEvent($l("downloadfailed",t))}))}(this),this.D.je(this.h.streaming.forceHTTPS),this.F=null,Xu&&(this.F=Xu()),this.Xc.C(e,"online",(function(){i.ce()})),this.O={name:"detach"},this.W={name:"attach"},this.da={name:"unload"},this.Zd={name:"manifest-parser"},this.Xd={name:"manifest"},this.wb={name:"media-source"},this.Qd={name:"drm-engine"},this.ba={name:"load"},this.de={name:"src-equals-drm-engine"},this.yb={name:"src-equals"};var r=new Map;r.set(this.W,(function(e,t){return fi(function(e,t,n){return null==t.mediaElement&&(t.mediaElement=n.mediaElement,e.Xb.C(t.mediaElement,"error",(function(){var t=Ru(e);t&&Iu(e,t)}))),e.g=t.mediaElement,Promise.resolve()}(i,e,t))})),r.set(this.O,(function(e){return e.mediaElement&&(i.Xb.nb(),e.mediaElement=null),i.F&&i.F.release(),i.g=null,fi(e=Promise.resolve())})),r.set(this.da,(function(e){return fi(Xl(i,e))})),r.set(this.wb,(function(e){return e=function(e,t){var n,i,r,a,o;return L((function(s){if(1==s.g)return n=e.h.textDisplayFactory,i=n(),e.Ud=n,r=function(e,t,n,i){return new Mo(e,t,n,i)}(t.mediaElement,i,(function(t,n,i){Ql(e,t,n,i)}),e.L),r.configure(e.h.mediaSource),a=e.h.manifest,o=a.segmentRelativeVttTiming,r.H=o,E(s,r.J,2);e.G=r,T(s)}))}(i,e),fi(e)})),r.set(this.Zd,(function(e,t){return e=function(e,t,n){var i,r,a,o;return L((function(s){if(1==s.g)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.D,e.Nb=i,a=e,E(s,Yr(i,r,e.h.manifest.retryParameters,t.mimeType),2);a.Yc=s.h,e.J=e.Yc(),o=Ei(e.h.manifest),n.mediaElement&&"AUDIO"===n.mediaElement.nodeName&&(o.disableVideo=!0),e.J.configure(o),T(s)}))}(i,e,t),fi(e)})),r.set(this.Xd,(function(e){return function(e,t){var n=t.uri;t=e.D,e.Fa=new xs((function(){return e.uc()})),e.Fa.addEventListener("regionadd",(function(t){t=t.region,Du(e,"timelineregionadded",t),e.F&&e.F.onDashTimedMetadata(t)})),e.ua=null,e.h.streaming.observeQualityChanges&&(e.ua=new Rs((function(){return e.Na()})),e.ua.addEventListener("qualitychange",(function(t){var n=t.quality;t=t.position,n=(new Map).set("mediaQuality",{bandwidth:n.bandwidth,audioSamplingRate:n.audioSamplingRate,codecs:n.codecs,contentType:n.contentType,frameRate:n.frameRate,height:n.height,mimeType:n.mimeType,channelsCount:n.channelsCount,pixelAspectRatio:n.pixelAspectRatio,width:n.width}).set("position",t),e.dispatchEvent($l("mediaqualitychanged",n))})));var i={networkingEngine:t,modifyManifestRequest:function(t,n){var i=e.V;try{i.g.enabled&&(i.o=n.format,bl(i,t,{ot:Al,su:!i.i}))}catch(e){Y("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}},modifySegmentRequest:function(t,n){vl(e.V,t,n)},filter:function(t){return du(e,t)},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,i=u(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"!=(r=r.value).mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);for(i=u(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=u(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",l=new Ss;s={id:e.Yd++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:l,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(o),label:null,type:et,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(t){var n=e.Fa;e:{for(var i=u(n.g),r=i.next();!r.done;r=i.next())if((r=r.value).schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.g.add(t),t=new mi("regionadd",new Map([["region",t]])),n.dispatchEvent(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return Iu(e,t)},isLowLatencyMode:function(){return e.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(t){var n=e.m?e.m.g:null;n&&e.m.u&&pu(e,n.keySystem,t)}},r=Date.now()/1e3;return new ci(function(){var t,a,o,s;return L((function(l){if(1==l.g)return t=e,E(l,e.J.start(n,i),2);if(t.i=l.h,a=$l("manifestparsed"),e.dispatchEvent(a),0==e.i.variants.length)throw new xe(2,4,4036);!function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.i),o=Date.now()/1e3,s=o-r,e.o.F=s,T(l)}))}(),(function(){return e.J.stop()}))}(i,e)})),r.set(this.Qd,(function(e){return e=function(e,t){var n,i;return L((function(r){return 1==r.g?(n=Date.now()/1e3,i=!0,e.m=eu(e,{kb:e.D,onError:function(t){Iu(e,t)},cd:function(t){xu(e,t)},onExpirationUpdated:function(t,n){Lu(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&i&&(i=!1,e.o.j=Date.now()/1e3-n,e.L&&((t=e.L).g&&t.h.classList.add("shaka-hidden")))}}),e.m.configure(e.h.drm),E(r,_r(e.m,e.i.variants,e.i.offlineSessionIds),2)):3!=r.g?E(r,e.m.Yb(t.mediaElement),3):E(r,du(e,e.i),0)}))}(i,e),fi(e)})),r.set(this.ba,(function(e,t){return fi(function(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b;return L((function(A){switch(A.g){case 1:for(t.startTime=n.startTime,null!=e.fc&&(t.startTime=e.fc,e.fc=null),i=t.mediaElement,r=t.uri,e.Nb=r,e.H=new ws({Tc:function(){return i.playbackRate},Pc:function(){return i.defaultPlaybackRate},le:function(e){i.playbackRate=e},Me:function(e){i.currentTime+=e}}),a=function(){return mu(e)},o=function(){return gu(e)},e.s.C(i,"playing",a),e.s.C(i,"pause",a),e.s.C(i,"ended",a),e.s.C(i,"ratechange",o),function(e,t){if(t.lcevc.enabled){var n=e.Xa();n&&n[0]&&n[0].videoMimeType==Qu.ts&&(navigator.userAgent.match(/Edge?\//)||navigator.userAgent.match(/Edge\//))&&(t.streaming.forceTransmux||z("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),ql(e),null==e.L&&(e.L=new Ro(e.g,e.cf,t.lcevc),e.G&&(e.G.D=e.L))}else ql(e)}(e,e.h),s=e.h.abrFactory,e.u&&e.Nd==s||(e.Nd=s,e.u=s(),"function"!=typeof e.u.setMediaElement&&(qn("AbrManager","Please use an AbrManager with setMediaElement function."),e.u.setMediaElement=function(){}),e.u.configure(e.h.abr)),e.ub=new ii(e.h.preferredAudioLanguage,e.h.preferredVariantRole,e.h.preferredAudioChannelCount),e.vb=e.h.preferredTextLanguage,e.cc=e.h.preferredTextRole,e.$b=e.h.preferForcedSubs,Pu(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd),e.u.init((function(t,n,i){e.j&&t!=e.j.l&&Eu(e,t,!0,void 0!==n&&n,void 0===i?0:i)})),e.u.setMediaElement(i),dn(e.i,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredAudioChannelCount,e.h.preferredDecodingAttributes),e.j=function(e){return new Us(e.i,{Sc:function(){return e.B?e.B.Ic():0},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},modifySegmentRequest:function(t,n){vl(e.V,t,n)},R:e.G,kb:e.D,onError:function(t){return Iu(e,t)},onEvent:function(t){return e.dispatchEvent(t)},gg:function(){e.J&&e.J.update&&e.J.update()},Wd:function(t,n,i){e.B&&e.B.Ne(),nu(e),t=(new Map).set("start",t).set("end",n).set("contentType",i),e.dispatchEvent($l("segmentappended",t))},fg:function(t,n){(n=n.Od)&&e.ua&&function(e,t,n){var i=function(e,t){var n=e.g.get(t);return n||(n={rc:[],Ae:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.rc;t.rc=r.filter((function(e,t){return!(e.position<=n&&t+1<r.length&&r[t+1].position<=n||e.position>=i)}))}else t.rc=[]}(e,i),e={Od:t,position:n},t=(i=i.rc).findIndex((function(e){return e.position>=n})),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}(e.ua,n,t)},xe:function(t,n){var i=e.m;if(i.h.parseInbandPsshEnabled&&["audio","video"].includes(t)){var r=0,a=u((n=new tr(Ie(n))).data);for(t=a.next();!t.done;t=a.next())r+=t.value.length;if(0==r)i=Promise.resolve();else{for(r=new Uint8Array(r),a=0,t=(n=u(n.data)).next();!t.done;t=n.next())t=t.value,r.set(t,a),a+=t.length;Dr(i,"cenc",r),i=i.o}}else i=Promise.resolve();return i},hg:function(t,n,i){Ql(e,t,n,i)}})}(e),e.j.configure(e.h.streaming),e.l=Wu,i.textTracks&&e.s.C(i.textTracks,"addtrack",(function(t){if(t.track&&"chapters"===(t=t.track).kind)Jl(e,t)})),e.dispatchEvent($l("streaming")),l=null,(c=e.j.l)||(l=yu(e)),d=[],p=u([(h=c||l).video,h.audio]),f=p.next();!f.done;f=p.next())(g=f.value)&&!g.segmentIndex&&d.push(g.createSegmentIndex());if(!(0<d.length)){A.A(2);break}return E(A,Promise.all(d),2);case 2:if(e.B=function(e,t){return new vs(e.g,e.i,e.h.streaming,t,(function(){e.xb&&Ds(e.xb,!0),e.j&&e.j.vc(),e.M&&nu(e)}),(function(t){return e.dispatchEvent(t)}))}(e,t.startTime),e.xb=function(e){var t=new Ls(e.Fa);t.addEventListener("enter",(function(t){Du(e,"timelineregionenter",t.region)})),t.addEventListener("exit",(function(t){Du(e,"timelineregionexit",t.region)})),t.addEventListener("skip",(function(t){var n=t.region;t.seeking||(Du(e,"timelineregionenter",n),Du(e,"timelineregionexit",n))}));var n=new Is(e.g);return n.g.add(t),e.ua&&n.g.add(e.ua),n}(e),m=Math.max(e.i.minBufferTime,e.h.streaming.rebufferingGoal),tu(e,m),c){A.A(4);break}if(Eu(e,l,!0,!1,0),!e.h.streaming.startAtSegmentBoundary){A.A(5);break}return v=e.B.Ic(),E(A,function(e,t){var n,i,r,a,o;return L((function(s){return 1==s.g?(n=e.audio,i=e.video,r=function(e,t){var n,i,r;return L((function(a){return 1==a.g?e?E(a,e.createSegmentIndex(),2):a.return(null):(i=(n=e.segmentIndex.Cb(t))?n.next().value:null)?(r=i.startTime,a.return(r)):a.return(null)}))},E(s,r(n,t),2)):3!=s.g?(a=s.h,E(s,r(i,t),3)):null!=(o=s.h)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)}))}(l,v),6);case 6:y=A.h,e.B.zd(y);case 5:Au(e,null,_n(l));case 4:return e.B.yd(),e.Fb().find((function(e){return e.active}))||((b=Pn(e.i.textStreams,e.vb,e.cc,e.$b)[0]||null)&&Wl(e.o.h,b,!0),l&&(b?(l.audio&&function(e,t,n){if(0==e.h.autoShowText)return!1;if(1==e.h.autoShowText)return!0;var i=rn(e.h.preferredTextLanguage);return n=rn(n.language),2==e.h.autoShowText?en(n,i):3==e.h.autoShowText?(e=rn(t.language),en(n,i)&&!en(e,n)):(z("Invalid autoShowText setting!"),!1)}(e,l.audio,b)&&(e.ia=!0),e.ia&&e.G.m.setTextVisibility(!0),wu(e)):e.ia=!1),b&&(e.h.streaming.alwaysStreamText||e.Hd())&&Hs(e.j,b)),E(A,e.j.start(),7);case 7:e.h.abr.enabled&&(e.u.enable(),Cu(e)),An(e.j?e.j.l:null,e.i),Mu(e.i),ku(e),vu(e),e.i.variants.some((function(e){return e.primary})),e.dc=!0,e.s.ma(i,"loadedmetadata",(function(){e.o.m=Date.now()/1e3-n.ne})),T(A)}}))}(i,e,t))})),r.set(this.de,(function(e,t){return e=function(e,t,n){var i,r,a,o,s,l,u;return L((function(c){return 1==c.g?(i=tt,r=Date.now()/1e3,a=!0,e.m=eu(e,{kb:e.D,onError:function(t){Iu(e,t)},cd:function(t){xu(e,t)},onExpirationUpdated:function(t,n){Lu(e,t,n)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&a&&(a=!1,e.o.j=Date.now()/1e3-r)}}),e.m.configure(e.h.drm),o=n.uri||"",s=$r(o),"application/x-mpegurl"==(l=Qu[s])&&ht()&&(l="application/vnd.apple.mpegurl"),l||(l="video/mp4"),u={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:l,codecs:n.mimeType?Wt(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:i.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.V=!0,E(c,_r(e.m,[u],[]),2)):E(c,e.m.Yb(t.mediaElement),0)}))}(i,e,t),fi(e)})),r.set(this.yb,(function(e,t){return function(e,t,n){function i(){return mu(e)}t.uri=n.uri,t.startTime=n.startTime,e.Nb=t.uri;var r=t.mediaElement;e.B=new ms(r);var a=!1;e.Zb.push((function(){a=!0})),null!=t.startTime&&e.B.zd(t.startTime),e.H=new ws({Tc:function(){return r.playbackRate},Pc:function(){return r.defaultPlaybackRate},le:function(e){r.playbackRate=e},Me:function(e){r.currentTime+=e}}),tu(e,e.h.streaming.rebufferingGoal),e.s.C(r,"playing",i),e.s.C(r,"pause",i),e.s.C(r,"ended",i),e.s.C(r,"ratechange",(function(){return gu(e)})),"none"!=r.preload&&e.s.ma(r,"loadedmetadata",(function(){e.o.m=Date.now()/1e3-n.ne})),r.audioTracks&&(e.s.C(r.audioTracks,"addtrack",(function(){return ku(e)})),e.s.C(r.audioTracks,"removetrack",(function(){return ku(e)})),e.s.C(r.audioTracks,"change",(function(){return ku(e)}))),r.textTracks&&(e.s.C(r.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.s.C(t,"cuechange",(function(){if(t.activeCues)for(var n=u(t.activeCues),i=n.next();!i.done;i=n.next())i=i.value,Zl(e,i.startTime,i.endTime,i.type,i.value),e.F&&e.F.onCueMetadataChange(i.value)}));var n=new ot((function(){for(var t=function(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"==e.kind}))}(e),n=(t=u(t)).next();!n.done;n=t.next())n.value.mode="hidden"})).Mb().N(.5);e.Zb.push((function(){n.stop()}))}}(e,t);break;case"chapters":Jl(e,t);break;default:ku(e)}})),e.s.C(r.textTracks,"removetrack",(function(){return ku(e)})),e.s.C(r.textTracks,"change",(function(){return ku(e)})));var o=$r(t.uri);r.src=function(e,t,n){try{if(!e.g.enabled)return t;var i=yl(e);e:{switch(n){case"video/webm":case"video/mp4":var r=Sl;break e;case"application/x-mpegurl":r=Al;break e}r=void 0}return i.ot=r,i.su=!0,Tl(t,El(i))}catch(e){return Y("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}(e.V,t.uri,Qu[o]),(ct()||gt("Web0S"))&&r.load(),e.l=zu,e.dispatchEvent($l("streaming"));var s=new it;return ss(r,HTMLMediaElement.HAVE_METADATA,e.s,(function(){e.B.yd(),s.resolve()})),ss(r,HTMLMediaElement.HAVE_CURRENT_DATA,e.s,(function(){return L((function(t){return 1==t.g?(function(e){var t=e.h.preferredAudioLanguage;if(""!=t){e.ge(t);var n=e.h.preferredVariantRole;""!=n&&e.ge(t,n)}}(e),ru(e).find((function(e){return"disabled"!=e.mode}))?t.A(2):E(t,new Promise((function(t){e.s.ma(r.textTracks,"change",t),new ot(t).N(1)})),2)):a?t.return():(function(e){var t=e.h.preferredTextLanguage,n=e.h.preferForcedSubs;if(""!=t){e.he(t,"",n);var i=e.h.preferredTextRole;""!=i&&e.he(t,i,n)}}(e),void T(t))}))})),r.error?s.reject(Ru(e)):"none"==r.preload&&(z('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),s.resolve()),e.s.ma(r,"error",(function(){s.reject(Ru(e))})),new ci(s,(function(){return s.reject(new xe(2,7,7001)),Promise.resolve()})).Y((function(){e.dc=!0}))}(i,e,t)})),this.Ga=new el(this.O,{Mf:function(e,t,n,r){var a=null;return e==i.O&&(a=n==i.O?i.O:i.W),e==i.W&&(a=n==i.O||t.mediaElement!=r.mediaElement?i.O:n==i.W?i.W:n==i.wb||n==i.ba?i.wb:n==i.yb?i.de:null),e==i.wb&&(a=n==i.ba&&t.mediaElement==r.mediaElement?i.Zd:i.da),e==i.Zd&&(a=Vu(i.ba,i.Xd,i.da,n,t,r)),e==i.Xd&&(a=Vu(i.ba,i.Qd,i.da,n,t,r)),e==i.Qd&&(a=Vu(i.ba,i.ba,i.da,n,t,r)),e==i.de&&(a=n==i.yb&&t.mediaElement==r.mediaElement?i.yb:i.da),e!=i.ba&&e!=i.yb||(a=i.da),e==i.da&&(a=r.mediaElement&&t.mediaElement==r.mediaElement?i.W:i.O),a},yf:function(e,t,n){return i.dispatchEvent($l("onstatechange",(new Map).set("state",e.name))),r.get(e)(t,n)},handleError:function(e){return L((function(t){return 1==t.g?E(t,Xl(i,e),2):t.return(e.mediaElement?i.W:i.O)}))},eg:function(e){i.dispatchEvent($l("onstateidle",(new Map).set("state",e.name)))}}),this.af=new ot((function(){gn(i.i.variants,i.h.restrictions,i.ec)&&yu(i)})),t&&this.Yb(t,!0)}function ql(e){null!=e.L&&(e.L.release(),e.L=null)}function $l(e,t){return new mi(e,t)}function Xl(e,t){var n,i,r,a,o,s,l,c,d;return L((function(h){switch(h.g){case 1:return e.l!=Ku&&(e.l=Gu),n=e.Zb.map((function(e){return e()})),e.Zb=[],E(h,Promise.all(n),2);case 2:if(e.dispatchEvent($l("unloading")),t.mimeType=null,t.startTime=null,t.uri=null,e.Fa&&(e.Fa.release(),e.Fa=null),t.mediaElement&&e.s.nb(),e.af.stop(),e.xb&&(e.xb.release(),e.xb=null),e.Vc&&(e.Vc.stop(),e.Vc=null),!e.J){h.A(3);break}return E(h,e.J.stop(),4);case 4:e.J=null,e.Yc=null;case 3:if(!e.u){h.A(5);break}return E(h,e.u.stop(),5);case 5:if(!e.j){h.A(7);break}return E(h,e.j.destroy(),8);case 8:e.j=null;case 7:if(e.H&&(e.H.release(),e.H=null),e.B&&(e.B.release(),e.B=null),!e.G){h.A(9);break}return E(h,e.G.destroy(),10);case 10:e.G=null;case 9:if(e.F&&e.F.onAssetUnload(),!t.mediaElement||!t.mediaElement.src){h.A(11);break}return E(h,new Promise((function(e){return new ot(e).N(.1)})),12);case 12:for(t.mediaElement.removeAttribute("src"),t.mediaElement.load();t.mediaElement.lastChild;)t.mediaElement.removeChild(t.mediaElement.firstChild);case 11:if(!e.m){h.A(13);break}return E(h,e.m.destroy(),14);case 14:e.m=null;case 13:if(e.Nb=null,e.M=null,e.i){for(i=u(e.i.variants),r=i.next();!r.done;r=i.next())for(a=r.value,o=u([a.audio,a.video]),s=o.next();!s.done;s=o.next())(l=s.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=u(e.i.textStreams),s=c.next();!s.done;s=c.next())(d=s.value).segmentIndex&&d.segmentIndex.release()}e.i=null,e.o=new zl,e.Ud=null,fu(e),T(h)}}))}function Ql(e,t,n,i){for(var r=(t=u(t)).next();!r.done;r=t.next())if((r=r.value).data&&r.cueTime&&r.frames){var a=r.cueTime+n,o=i;o&&a>o&&(o=a);for(var s=u(r.frames),l=s.next();!l.done;l=s.next())Zl(e,a,o,"org.id3",l.value);e.F&&e.F.onHlsTimedMetadata(r,a)}}function Zl(e,t,n,i,r){t=(new Map).set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent($l("metadata",t))}function Jl(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new ot((function(){t.mode="hidden"})).Mb().N(.5);e.Zb.push((function(){n.stop()}))}}function eu(e,t){return new kr(t,e.h.drm.updateExpirationTime)}function tu(e,t){e.M=new ri,e.M.g=oi,ai(e.M,t,Math.min(.5,t/2)),fu(e),e.Vc=new ot((function(){nu(e)})).Ca(.25)}function nu(e){switch(e.l){case zu:if(e.g.ended)var t=!0;else{var n=bo(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case Wu:e:if(e.g.ended||Bo(e.G))t=!0;else{if(e.i.presentationTimeline.U()){n=e.i.presentationTimeline.gb();var i=bo(e.g.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=To(e.g.buffered,e.g.currentTime);var r=t,a=(n=e.M).h.get(n.g);t=n.g,i=r||i>=a?si:oi,n.g=i,t!=i&&fu(e)}function iu(e){if(e.J){var t=Ei(e.h.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.J.configure(t)}if(e.m&&e.m.configure(e.h.drm),e.j){e.j.configure(e.h.streaming);try{hu(e,e.i)}catch(t){Iu(e,t)}e.u&&vu(e),!(t=e.j.l)||t.allowedByApplication&&t.allowedByKeySystem||bu(e)}if(e.D&&e.D.je(e.h.streaming.forceHTTPS),e.G&&(e.G.configure(e.h.mediaSource),e.G.H=e.h.manifest.segmentRelativeVttTiming,t=e.h.textDisplayFactory,e.Ud!=t)){var n=t(),i=e.G,r=i.m;i.m=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.g&&(i.g.i=n),e.Ud=t,e.j&&((n=(t=e.j).j.get(et))&&js(t,n.stream,!0,0,!0))}e.u&&(e.u.configure(e.h.abr),e.h.abr.enabled?e.u.enable():e.u.disable(),Cu(e)),e.M&&(t=e.h.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),ai(e.M,t,Math.min(.5,t/2))),e.i&&Pu(e.i.presentationTimeline,e.h.playRangeStart,e.h.playRangeEnd)}function ru(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function au(e){return Array.from(e.g.textTracks).filter((function(e){return"chapters"==e.kind}))}function ou(e,t){var n,i;return L((function(r){switch(r.g){case 1:return n=$r(t),(i=Zu[n])?r.return(i):(A(r,2),E(r,qr(t,e.D,e.h.streaming.retryParameters),4));case 4:i=r.h,_(r,3);break;case 2:S(r);case 3:if(i)return r.return(i);throw new xe(1,2,2011,n)}}))}function su(e,t,n,i,r,a,o){var s,l,u,c;return L((function(d){if(1==d.g)return"text/vtt"!=r||o.length?E(d,lu(e,t,e.D,e.h.streaming.retryParameters),3):d.A(2);2!=d.g&&(s=d.h,l=uu(e,s,r,o),u=new Blob([l],{type:"text/vtt"}),t=Zo(u),r="text/vtt"),c=document.createElement("track");var h=e.V,p=t;try{if(h.g.enabled){var f=yl(h);f.ot=Cl,f.su=!0;var g=Tl(p,El(f))}else g=p}catch(e){Y("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),g=p}return c.src=g,c.label=a,c.kind=i,c.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(c),d.return(c)}))}function lu(e,t,n,i){var r,a,o;return L((function(s){if(1==s.g){r=Ri,(a=wi([t],i)).method="GET";var l=e.V;try{l.g.enabled&&bl(l,a,{ot:Cl,su:!0})}catch(e){Y("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return E(s,n.request(r,a).promise,2)}return o=s.h,s.return(o.data)}))}function uu(e,t,n,i){var r=Zt[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration,vttOffset:0},t=Ie(t),function(e,t){function n(e){for(var n=e,i=u(t),r=i.next();!r.done;r=i.next())(r=r.value).end&&r.start<e&&(n+=r.end-r.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(i=Math.floor(n/60%60))?"0":"")+i+":"+(10>(r=Math.floor(n%60))?"0":"")+r+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}var i=rl(e,[]);e="WEBVTT\n\n";for(var r=(i=u(i)).next();!r.done;r=i.next())e+=n((r=r.value).startTime)+" --\x3e "+n(r.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case se:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}(t=n.parseMedia(t,e),i);throw new xe(2,2,2014,n)}function cu(e){var t=Fl();return t.streaming.failureCallback=function(t){if(e.U()){var n=null;1001==t.code||1002==t.code?n=1:1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.ce(n))}},t.textDisplayFactory=function(){return e.Uc?new cl(e.g,e.Uc):new al(e.g)},t}function du(e,t){return L((function(n){if(1==n.g)return E(n,function(e,t){return L((function(n){if(1==n.g)return E(n,mn(e.j?e.j.l:null,t),2);Mu(t),T(n)}))}(e,t),2);hu(e,t),T(n)}))}function hu(e,t){if(e.l!=Ku){gn(t.variants,e.h.restrictions,e.ec)&&e.j&&ku(e);var n=e.m?e.m.g:null;if(n&&e.m.u)for(var i=u(t.variants),r=i.next();!r.done;r=i.next())r=r.value,pu(e,n.keySystem,r.video),pu(e,n.keySystem,r.audio);Ou(e,t)}}function pu(e,t,n){if(n)for(var i=(n=u(n.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==t)for(var r=(i=u(i.initData||[])).next();!r.done;r=i.next())r=r.value,Dr(e.m,r.initDataType,r.initData)}function fu(e){var t=e.Fd();if(e.o&&e.M&&e.B){var n=e.H;n.j=t,Cs(n),e.V&&(n=e.V,t||n.i||(n.i=!0),n.i&&t&&(n.l=!0),n.m=t),mu(e)}t=(new Map).set("buffering",t),e.dispatchEvent($l("buffering",t))}function gu(e){var t=e.g.playbackRate;0!=t&&(e.H&&e.H.set(t),t=$l("ratechange"),e.dispatchEvent(t))}function mu(e){if(e.o&&e.M){var t=e.o.g;e.M.g==oi?jl(t,"buffering"):e.g.paused?jl(t,"paused"):e.g.ended?jl(t,"ended"):jl(t,"playing")}}function vu(e){try{Ou(e,e.i)}catch(t){return Iu(e,t),!1}var t=e.i.variants.filter((function(e){return xn(e)}));return t=e.ub.create(t),e.u.setVariants(Array.from(t.values())),!0}function yu(e){return vu(e)?e.u.chooseVariant():null}function bu(e){var t=yu(e);t&&Eu(e,t,!0,!0,0)}function Eu(e,t,n,i,r){var a=e.j.l;if(t==a)i&&Vs(e.j,t,i,r,!0);else{var o=e.o.h;o.h!=t&&(o.h=t,o.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Vs(e.j,t,i,r,void 0,n),i=null,a&&(i=_n(a)),t=_n(t),n?Au(e,i,t):_u(e,i,t)}}function Tu(e,t){var n=Array.from(e.g.audioTracks).find((function(e){return e.enabled}));t.enabled=!0,t.id!==n.id&&(n.enabled=!1),_u(e,n=Dn(n),t=Dn(t))}function Au(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&xo(e.L,n),Nu(e,n=$l("adaptation",t))}function ku(e){Nu(e,$l("trackschanged"))}function _u(e,t,n){t=(new Map).set("oldTrack",t).set("newTrack",n),e.L&&xo(e.L,n),Nu(e,n=$l("variantchanged",t))}function Su(e){Nu(e,$l("textchanged"))}function wu(e){Nu(e,$l("texttrackvisibility"))}function Cu(e){Nu(e,$l("abrstatuschanged",(new Map).set("newStatus",e.h.abr.enabled)))}function Iu(e,t){if(e.l!=Ku)if(function(e,t){if(1002!=t.code&&1011!=t.code||1!=t.category||!navigator.onLine)return!1;var n=e.h.streaming.maxDisabledTime;if(0==n){if(1011!=t.code)return!1;n=1}t=e.Xa().find((function(e){return e.active}));for(var i=e.i,r=u(i.variants),a=r.next();!a.done;a=r.next())(a=a.value).id===t.id&&(a.disabledUntilTime=Date.now()/1e3+n);return gn(i.variants,e.h.restrictions,e.ec),!!(t=yu(e))&&(i=e.Na().video.reduce((function(e,t){return e+t.end-t.start}),0),Eu(e,t,!1,!0,i),e.af.N(n),!0)}(e,t))t.handled=!0;else{var n=$l("error",(new Map).set("detail",t));e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function Du(e,t,n){n=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent($l(t,n))}function Ru(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new xe(2,3,3016,t,n,e.g.error.message)}function xu(e,t){if(e.j){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length)for(var a=(n=u(e.i.variants)).next();!a.done;a=n.next()){var o=[];(a=a.value).audio&&o.push(a.audio),a.video&&o.push(a.video);for(var s=(o=u(o)).next();!s.done;s=o.next()){var l=s.value;if(s=a.allowedByKeySystem,l.keyIds.size){a.allowedByKeySystem=!0;for(var c=(l=u(l.keyIds)).next();!c.done;c=l.next())c=c.value,c=t[i?"00":c],a.allowedByKeySystem=a.allowedByKeySystem&&!!c&&!qu.includes(c)}s!=a.allowedByKeySystem&&(r=!0)}}r&&!vu(e)||((t=e.j.l)&&!t.allowedByKeySystem&&bu(e),r&&ku(e))}}function Lu(e,t,n){e.J&&e.J.onExpirationUpdated&&e.J.onExpirationUpdated(t,n),t=$l("expirationupdated"),e.dispatchEvent(t)}function Pu(e,t,n){0<t&&(e.U()||e.Ze(t)),n<(t=e.getDuration())&&(e.U()||e.Aa(n))}function Ou(e,t){e=e.m?e.m.Qc():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var i=!1,r=!1,a=new Set,o=new Set,s=(t=u(t.variants)).next();!s.done;s=t.next()){var l=[];(s=s.value).audio&&l.push(s.audio),s.video&&l.push(s.video);for(var c=(l=u(l)).next();!c.done;c=l.next())if((c=c.value).keyIds.size)for(var d=(c=u(c.keyIds)).next();!d.done;d=c.next()){d=d.value;var h=e[n?"00":d];h?qu.includes(h)&&o.add(h):a.add(d)}s.allowedByApplication?s.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw new xe(2,4,4012,e={hasAppRestrictions:r,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)})}function Mu(e){if(!e.variants.some(xn))throw new xe(2,4,4032)}function Nu(e,t){L((function(n){if(1==n.g)return E(n,Promise.resolve(),2);e.l!=Ku&&e.dispatchEvent(t),T(n)}))}function Bu(e){for(var t=new Set,n=(e=u(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(rn(n.language)):t.add("und");return t}function Uu(e){for(var t=new Map,n=new Map,i=(e=u(e)).next();!i.done;i=e.next()){var r="und",a=[];(i=i.value).language&&(r=rn(i.language)),(a="variant"==i.type?i.audioRoles:i.roles)&&a.length||(a=[""]),t.has(r)||t.set(r,new Set);for(var o=(a=u(a)).next();!o.done;o=a.next())o=o.value,t.get(r).add(o),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(o,i.label))}var s=[];return t.forEach((function(e,t){for(var i=(e=u(e)).next();!i.done;i=e.next()){i=i.value;var r=null;n.has(t)&&n.get(t).has(i)&&(r=n.get(t).get(i)),s.push({language:t,role:i,label:r})}})),s}function Fu(){return new xe(2,7,7e3)}function Vu(e,t,n,i,r,a){return i==e&&r.mediaElement==a.mediaElement&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function Hu(){return{mediaElement:null,mimeType:null,startTime:null,ne:NaN,uri:null}}function ju(e){return new Promise((function(t,n){e.mb=function(){return n(Fu())},e.bd=function(){return t()},e.onError=function(e){return n(e)},e.dd=function(){return n(Fu())}}))}V("shaka.util.CmcdManager.StreamingFormat",{Lg:"d",Tg:"h",fh:"s",$g:"o"}),V("shaka.util.ConfigUtils",xl),xl.convertToConfigObject=Pl,xl.mergeConfigObjects=Ll,V("shaka.util.FairPlayUtils",Ml),Ml.commonFairPlayResponse=function(e,t){if(2===e){try{var n=Et(t.data)}catch(e){return}e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(e){}e&&(t.data=Ce(Dt(n)))}},Ml.conaxFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Ml.ezdrmFairPlayRequest=function(e,t){2===e&&(t.headers["Content-Type"]="application/octet-stream")},Ml.verimatrixFairPlayRequest=function(e,t){2===e&&(e=It(e=Ie(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=kt("spc="+e))},Ml.conaxInitDataTransform=function(t,n,i){if("skd"!==n)return t;n=i.serverCertificate,i=At(t).split("skd://").pop().split("?").shift(),i=e.atob(i);var r=new ArrayBuffer(2*i.length);r=new Uint16Array(r);for(var a=0,o=i.length;a<o;a++)r[a]=i.charCodeAt(a);return Bl(t,r,n)},Ml.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Bl(e,n=At(e).split(";").pop(),t))},Ml.verimatrixInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,Bl(e,n=At(e).split("skd://").pop(),t))},Ml.initDataTransform=Bl,Ml.defaultGetContentId=Nl,Ml.isFairPlaySupported=function(){var e;return L((function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},A(t,2),E(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(S(t),t.return(!1))}))},V("shaka.util.PlayerConfiguration",Ul),Ul.mergeConfigObjects=Vl,Ul.createDefault=Fl,m(Yl,bi),(i=Yl.prototype).destroy=function(){var e,t=this;return L((function(n){switch(n.g){case 1:return t.l==Ku?n.return():(ql(t),t.l=Ku,e=tl(t.Ga,(function(){return{node:t.O,payload:Hu(),hb:!1}})),E(n,new Promise((function(t){e.Jb=function(){},e.bd=function(){t()},e.mb=function(){t()},e.onError=function(){t()},e.dd=function(){t()}})),2));case 2:return E(n,t.Ga.destroy(),3);case 3:if(t.Xc&&(t.Xc.release(),t.Xc=null),t.Xb&&(t.Xb.release(),t.Xb=null),t.s&&(t.s.release(),t.s=null),t.Nd=null,t.u=null,t.h=null,t.o=null,t.Uc=null,t.V=null,!t.D){n.A(4);break}return E(n,t.D.destroy(),5);case 5:t.D=null;case 4:bi.prototype.release.call(t),T(n)}}))},i.Yb=function(e,t){if(t=void 0===t||t,this.l==Ku)return Promise.reject(Fu());var n=Hu();n.mediaElement=e,st()||(t=!1);var i=t?this.wb:this.W;return(e=tl(this.Ga,(function(){return{node:i,payload:n,hb:!1}}))).Jb=function(){},ju(e)},i.lf=function(e){this.cf=e},i.detach=function(){var e=this;if(this.l==Ku)return Promise.reject(Fu());var t=tl(this.Ga,(function(){return{node:e.O,payload:Hu(),hb:!1}}));return t.Jb=function(){},ju(t)},i.re=function(e){var t=this;if(e=void 0===e||e,this.l==Ku)return Promise.reject(Fu());this.dc=!1,st()||(e=!1),ql(this);var n=Hu(),i=tl(this.Ga,(function(i){var r=i.mediaElement&&e?t.wb:i.mediaElement?t.W:t.O;return n.mediaElement=i.mediaElement,{node:r,payload:n,hb:!1}}));return i.Jb=function(){},ju(i)},i.Fg=function(e){this.fc=e},i.load=function(e,t,n){var i=this;if(this.fc=null,this.dc=!1,this.l==Ku)return Promise.reject(Fu());this.dispatchEvent($l("loading"));var r=Hu();r.uri=e,r.ne=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var a=function(e,t){if(!st())return!0;var n=t.mimeType,i=t.uri||"";if(n||(n=$r(i),n=Qu[n]),n){if(""==(t.mediaElement||mt()).canPlayType(n))return!1;if(!st()||!(n in Xr)&&!($r(i)in Qr)||e.h.streaming.preferNativeHls)return!0;if(ht())return e.h.streaming.useNativeHlsOnSafari}return!1}(this,r)?this.yb:this.ba,o=tl(this.Ga,(function(e){return null==e.mediaElement?null:(r.mediaElement=e.mediaElement,{node:a,payload:r,hb:!0})}));return this.o=new zl,this.V=function(e){return new ml({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},Na:function(){return e.Na()},getCurrentTime:function(){return e.g?e.g.currentTime:0},Xa:function(){return e.Xa()},Rc:function(){return e.Rc()},U:function(){return e.U()}},e.h.cmcd)}(this),o.Jb=function(){},new Promise((function(e,t){o.dd=function(){return t(new xe(2,7,7002))},o.bd=function(){e(),i.dispatchEvent($l("loaded"))},o.mb=function(){return t(Fu())},o.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Pl(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(qn("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),e.streaming.forceTransmux=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&e.streaming.lowLatencyMode&&(null==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),null==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=Vl(this.h,e,cu(this));return iu(this),n},i.getConfiguration=function(){var e=cu(this);return Vl(e,this.h,cu(this)),e},i.Bf=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.g.currentTime+t,this.uc().end)))return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},i.rg=function(){for(var e in this.h)delete this.h[e];Vl(this.h,cu(this),cu(this)),iu(this)},i.Hf=function(){return this.l},i.Lf=function(){return this.g},i.jc=function(){return this.D},i.Dd=function(){return this.Nb},i.Ge=function(){return this.F?this.F:null},i.U=function(){return this.i?this.i.presentationTimeline.U():!(!this.g||!this.g.src)&&1/0==this.g.duration},i.jb=function(){return!!this.i&&this.i.presentationTimeline.jb()},i.Zf=function(){if(this.i){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},i.uc=function(){if(!this.dc)return{start:0,end:0};if(this.i){var e=this.i.presentationTimeline;return{start:e.Db(),end:e.Oa()}}return this.g&&this.g.src&&(e=this.g.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.Xf=function(){this.U()&&(this.g.currentTime=this.uc().end)},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.m?this.m.g:null},i.ic=function(){return this.m?this.m.ic():1/0},i.Qc=function(){return this.m?this.m.Qc():{}},i.Fd=function(){return!!this.M&&this.M.g==oi},i.Rc=function(){return this.g?this.H?this.H.i:1:0},i.Ag=function(e){0==e?z("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.H.set(e),this.l==Wu&&(this.u.playbackRateChanged(e),Fs(this.j,1<Math.abs(e))))},i.pf=function(){var e=this.H.Pc();this.l==zu&&this.H.set(e),this.l==Wu&&(this.H.set(e),this.u.playbackRateChanged(e),Fs(this.j,!1))},i.Xa=function(){if(this.i){for(var e=this.j?this.j.l:null,t=[],n=0,i=u(this.i.variants),r=i.next();!r.done;r=i.next())if(xn(r=r.value)){var a=_n(r);a.active=r==e,a.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map((function(e){return Dn(e)})):[]},i.Fb=function(){if(this.i){for(var e=this.j?this.j.o:null,t=[],n=u(this.i.textStreams),i=n.next();!i.done;i=n.next()){var r=Sn(i=i.value);r.active=i==e,t.push(r)}return t}return this.g&&this.g.src&&this.g.textTracks?ru(this).map((function(e){return In(e)})):[]},i.Ff=function(){return this.i?this.i.imageStreams.map((function(e){return wn(e)})):[]},i.Tf=function(e,t){var n,i,r,a,o,s,l,u,c,d,h,p,f,g,m,v,y,b,T,A,k=this;return L((function(_){return 1==_.g?k.i?(n=k.i.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?_.A(3):E(_,n.createSegmentIndex(),3):_.return(null):_.A(2):2!=_.g?null==(i=n.segmentIndex.find(t))?_.return(null):(r=n.segmentIndex.get(i),a=r.tilesLayout||n.tilesLayout,(o=/(\d+)x(\d+)/.exec(a))?(s=n.width||0,l=n.height||0,u=parseInt(o[1],10),c=parseInt(o[2],10),d=s/u,h=l/c,p=u*c,f=r.j-r.startTime,g=r.s||f/p,m=r.startTime,y=v=0,1<p&&(b=Math.floor((t-r.startTime)/g),m=r.startTime+b*g,v=b%u*d,y=Math.floor(b/u)*h),T=!1,(A=r.o)&&(T=!0,h=A.height,v=A.positionX,y=A.positionY,d=A.width),_.return({imageHeight:l,imageWidth:s,height:h,positionX:v,positionY:y,startTime:m,duration:g,uris:r.ya(),width:d,sprite:T})):_.return(null)):_.return(null)}))},i.Se=function(e){if(this.i&&this.j){var t=this.i.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.j.o&&(Wl(this.o.h,t,!1),Hs(this.j,t),Su(this),this.vb=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){for(var n=(t=u(t=ru(this))).next();!n.done;n=t.next())Cn(n=n.value)==e.id?n.mode=this.ia?"showing":"hidden":n.mode="disabled";Su(this)}},i.Te=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.j){this.h.abr.enabled&&z("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find((function(t){return t.id==e.id}));i&&xn(i)&&(Eu(this,i,!1,t,n),this.ub=new ni(i),vu(this))}else if(this.g&&this.g.audioTracks)for(n=(t=u(t=Array.from(this.g.audioTracks))).next();!n.done;n=t.next())if(Cn(n=n.value)==e.id){Tu(this,n);break}},i.Af=function(){return Uu(this.Xa())},i.Rf=function(){return Uu(this.Fb())},i.zf=function(){return Array.from(Bu(this.Xa()))},i.Qf=function(){return Array.from(Bu(this.Fb()))},i.ge=function(e,t,n){if(n=void 0===n?0:n,this.i&&this.B){this.ub=new ii(e,t||"",n,""),t=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},e=this.j.l;var i=this.ub.create(this.i.variants);n=null;for(var r=(i=u(i.values())).next();!r.done;r=i.next())r=r.value,(!n||t(n,e)>t(r,e))&&(n=r);n?(t=_n(n),this.Te(t,!0)):bu(this)}else if(this.g&&this.g.audioTracks){r=Array.from(this.g.audioTracks),e=rn(e),i=n=null;for(var a=(r=u(r)).next();!a.done;a=r.next()){var o=Dn(a=a.value);rn(o.language)==e&&(n=a,t?o.roles.includes(t)&&(i=a):0==o.roles.length&&(i=a))}i?Tu(this,i):n&&Tu(this,n)}},i.he=function(e,t,n){if(n=void 0!==n&&n,this.i&&this.B)this.vb=e,this.cc=t||"",this.$b=n,(e=Pn(this.i.textStreams,this.vb,this.cc,this.$b)[0]||null)&&e!=this.j.o&&(Wl(this.o.h,e,!1),this.h.streaming.alwaysStreamText||this.Hd())&&(Hs(this.j,e),Su(this));else{var i=rn(e);(e=this.Fb().find((function(e){return rn(e.language)==i&&(!t||e.roles.includes(t))&&e.forced==n})))&&this.Se(e)}},i.tg=function(e){if(this.i&&this.B){for(var t=null,n=u(this.i.variants),i=n.next();!i.done;i=n.next())if((i=i.value).audio.label==e){t=i;break}null!=t&&(this.ub=new ii(t.language,"",0,e),bu(this))}},i.Hd=function(){var e=this.ia;return this.G?this.G.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?ru(this).some((function(e){return"showing"==e.mode})):e},i.He=function(){return this.g&&this.g.src&&this.g.textTracks?au(this).map((function(e){return In(e)})):[]},i.Cf=function(e){var t=rn(e),n=au(this).filter((function(e){return rn(e.language)==t}));if(!n||!n.length)return[];e=[];for(var i=new Set,r=(n=u(n)).next();!r.done;r=n.next())if((r=r.value)&&r.cues)for(var a=(r=u(r.cues)).next();!a.done;a=r.next()){var o=a.value;(a=o.id)&&""!=a||(a=o.startTime+"-"+o.endTime+"-"+o.text),o={id:a,title:o.text,startTime:o.startTime,endTime:o.endTime},i.has(a)||(e.push(o),i.add(a))}return e},i.yg=function(e){if(e=!!e,this.ia!=e){if(this.ia=e,this.l==Wu)this.G.m.setTextVisibility(e),this.h.streaming.alwaysStreamText||(e?this.j.o||0<(e=Pn(this.i.textStreams,this.vb,this.cc,this.$b)).length&&(Hs(this.j,e[0]),Su(this)):function(e){var t=e.j.get(et);t&&(Qs(t),Zs(t).catch((function(){})),e.j.delete(et)),e.o=null}(this.j));else if(this.g&&this.g.src&&this.g.textTracks)for(var t=ru(this),n=(t=u(t)).next();!n.done;n=t.next())"disabled"!=(n=n.value).mode&&(n.mode=e?"showing":"hidden");wu(this)}},i.Of=function(){if(!this.U())return null;var e=this.Ga.l,t=0;if(this.B)t=this.B.Ic();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.Ie=function(){if(!this.U())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},i.Na=function(){if(this.l==Wu)return this.G.Na();var e={total:[],audio:[],video:[],text:[]};return this.l==zu&&(e.total=Ao(this.g.buffered)),e},i.getStats=function(){if(this.l!=Wu&&this.l!=zu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};mu(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.o;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.B&&(this.o.M=this.B.te(),this.o.O=this.B.ue()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.o;var i=Number(n.totalVideoFrames);t.L=Number(n.droppedVideoFrames),t.J=i,this.o.H=Number(n.corruptedVideoFrames)}this.m?n=(n=this.m).H?n.H:NaN:n=NaN,this.o.s=n,this.l==Wu&&((n=this.j.l)&&(this.o.B=(this.H?this.H.i:1)*n.bandwidth),n&&n.video&&(t=this.o,i=n.video.height||NaN,t.o=n.video.width||NaN,t.l=i),this.U()&&(n=this.Ie().valueOf()+1e3*this.uc().end,this.o.D=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),n=this.u.getBandwidthEstimate(),this.o.u=n),this.l==zu&&(n=this.o,t=e.videoHeight||NaN,n.o=e.videoWidth||NaN,n.l=t);var r=this.o;e=r.o,n=r.l,t=r.B,i=r.J;for(var a=r.L,o=r.H,s=r.O,l=r.M,c=r.u,d=r.i,h=r.m,p=r.F,f=r.j,g=Kl(r.g,"playing"),m=Kl(r.g,"paused"),v=Kl(r.g,"buffering"),y=r.s,b=r.D,E=r.G,T=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=u(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}(r.g),A=[],k=(r=u(r.h.g)).next();!k.done;k=r.next())k=k.value,A.push({timestamp:k.timestamp,id:k.id,type:k.type,fromAdaptation:k.fromAdaptation,bandwidth:k.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:a,corruptedFrames:o,stallsDetected:s,gapsJumped:l,estimatedBandwidth:c,completionPercent:d,loadLatency:h,manifestTimeSeconds:p,drmTimeSeconds:f,playTime:g,pauseTime:m,bufferingTime:v,licenseTime:y,liveLatency:b,maxSegmentDuration:E,stateHistory:T,switchHistory:A}},i.hf=function(e,t,n,i,r,a,o){o=void 0!==o&&o;var s,l,u,c,d,h,p,f,g,m,v=this;return L((function(y){switch(y.g){case 1:if(v.l!=Wu&&v.l!=zu)throw new xe(1,7,7004);if(i){y.A(2);break}return E(y,ou(v,e),3);case 3:i=y.h;case 2:if(s=[],v.F)try{s=v.F.getServerSideCuePoints()}catch(e){}if(v.l!=zu){y.A(4);break}return o&&(n="forced"),E(y,su(v,e,t,n,i,a||"",s),5);case 5:if(l=v.Fb(),u=l.find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return ku(v),y.return(u);throw new xe(1,2,2012);case 4:if(c=tt,1/0==(d=v.i.presentationTimeline.getDuration()))throw new xe(1,4,4033);if(!s.length){y.A(6);break}return E(y,lu(v,e,v.D,v.h.streaming.retryParameters),7);case 7:h=y.h,p=uu(v,h,i,s),f=new Blob([p],{type:"text/vtt"}),e=Zo(f),i="text/vtt";case 6:if(g={id:v.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ks(0,d,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:c.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},m=jt(g.mimeType,g.codecs),!qt(m))throw new xe(2,2,2014,i);return v.i.textStreams.push(g),ku(v),y.return(Sn(g))}}))},i.jf=function(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b=this;return L((function(T){switch(T.g){case 1:if(b.l!=Wu&&b.l!=zu)throw new xe(1,7,7004);if(b.l==zu)throw new xe(1,2,2016);if(t){T.A(2);break}return E(T,ou(b,e),3);case 3:t=T.h;case 2:if("text/vtt"!=t)throw new xe(1,2,2017,e);if(n=tt,1/0==(i=b.i.presentationTimeline.getDuration()))throw new xe(1,4,4045);return E(T,lu(b,e,b.D,b.h.streaming.retryParameters),4);case 4:if(r=T.h,!(a=Zt[t]))throw new xe(2,2,2014,t);for(o=a(),s={periodStart:0,segmentStart:0,segmentEnd:i,vttOffset:0},l=Ie(r),c=o.parseMedia(l,s),d=[],h={},p=u(c),f=p.next();!f.done;h={Rb:h.Rb},f=p.next())g=f.value,h.Rb=Xe([e],[g.payload])[0],m=new go(g.startTime,g.endTime,function(e){return function(){return[e.Rb]}}(h),0,null,null,0,0,1/0),h.Rb.includes("#xywh")&&(4===(v=h.Rb.split("#xywh=")[1].split(",")).length&&m.Ye({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)})),d.push(m);return y={id:b.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ts(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:n.Wb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},b.i.imageStreams.push(y),ku(b),T.return(wn(y))}}))},i.gf=function(e,t,n){var i,r,a,o,s=this;return L((function(l){switch(l.g){case 1:if(s.l!=Wu&&s.l!=zu)throw new xe(1,7,7004);if(n){l.A(2);break}return E(l,ou(s,e),3);case 3:n=l.h;case 2:if(i=[],s.F)try{i=s.F.getServerSideCuePoints()}catch(e){}return E(l,su(s,e,t,"chapters",n,"",i),4);case 4:if(r=l.h,a=s.He(),!(o=a.find((function(e){return e.language==t})))){l.A(5);break}return E(l,new Promise((function(e,t){s.s.ma(r,"load",e),s.s.ma(r,"error",(function(){t(new xe(1,2,2015))}))})),6);case 6:return l.return(o);case 5:throw new xe(1,2,2012)}}))},i.ke=function(e,t){this.ec.width=e,this.ec.height=t},i.ce=function(e){if(this.l==Wu){var t=this.j;if(e=void 0===e?.1:e,t.h.g)t=!1;else if(t.s)t=!1;else{for(var n=u(t.j.values()),i=n.next();!i.done;i=n.next())!(i=i.value).nc||i.ra||i.Ka||(i.nc=!1,Xs(t,i,e));t=!0}}else t=!1;return t},i.If=function(){return z("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Jf=function(){return this.Yc},i.$e=function(e){this.Uc=e},V("shaka.Player",Yl),Yl.prototype.setVideoContainer=Yl.prototype.$e,Yl.prototype.getManifestParserFactory=Yl.prototype.Jf,Yl.prototype.getManifest=Yl.prototype.If,Yl.prototype.retryStreaming=Yl.prototype.ce,Yl.prototype.setMaxHardwareResolution=Yl.prototype.ke,Yl.prototype.addChaptersTrack=Yl.prototype.gf,Yl.prototype.addThumbnailsTrack=Yl.prototype.jf,Yl.prototype.addTextTrackAsync=Yl.prototype.hf,Yl.prototype.getStats=Yl.prototype.getStats,Yl.prototype.getBufferedInfo=Yl.prototype.Na,Yl.prototype.getPresentationStartTimeAsDate=Yl.prototype.Ie,Yl.prototype.getPlayheadTimeAsDate=Yl.prototype.Of,Yl.prototype.setTextTrackVisibility=Yl.prototype.yg,Yl.prototype.getChapters=Yl.prototype.Cf,Yl.prototype.getChaptersTracks=Yl.prototype.He,Yl.prototype.isTextTrackVisible=Yl.prototype.Hd,Yl.prototype.selectVariantsByLabel=Yl.prototype.tg,Yl.prototype.selectTextLanguage=Yl.prototype.he,Yl.prototype.selectAudioLanguage=Yl.prototype.ge,Yl.prototype.getTextLanguages=Yl.prototype.Qf,Yl.prototype.getAudioLanguages=Yl.prototype.zf,Yl.prototype.getTextLanguagesAndRoles=Yl.prototype.Rf,Yl.prototype.getAudioLanguagesAndRoles=Yl.prototype.Af,Yl.prototype.selectVariantTrack=Yl.prototype.Te,Yl.prototype.selectTextTrack=Yl.prototype.Se,Yl.prototype.getThumbnails=Yl.prototype.Tf,Yl.prototype.getImageTracks=Yl.prototype.Ff,Yl.prototype.getTextTracks=Yl.prototype.Fb,Yl.prototype.getVariantTracks=Yl.prototype.Xa,Yl.prototype.cancelTrickPlay=Yl.prototype.pf,Yl.prototype.trickPlay=Yl.prototype.Ag,Yl.prototype.getPlaybackRate=Yl.prototype.Rc,Yl.prototype.isBuffering=Yl.prototype.Fd,Yl.prototype.getKeyStatuses=Yl.prototype.Qc,Yl.prototype.getExpiration=Yl.prototype.ic,Yl.prototype.drmInfo=Yl.prototype.drmInfo,Yl.prototype.keySystem=Yl.prototype.keySystem,Yl.prototype.goToLive=Yl.prototype.Xf,Yl.prototype.seekRange=Yl.prototype.uc,Yl.prototype.isAudioOnly=Yl.prototype.Zf,Yl.prototype.isInProgress=Yl.prototype.jb,Yl.prototype.isLive=Yl.prototype.U,Yl.prototype.getAdManager=Yl.prototype.Ge,Yl.prototype.getAssetUri=Yl.prototype.Dd,Yl.prototype.getNetworkingEngine=Yl.prototype.jc,Yl.prototype.getMediaElement=Yl.prototype.Lf,Yl.prototype.getLoadMode=Yl.prototype.Hf,Yl.prototype.resetConfiguration=Yl.prototype.rg,Yl.prototype.getBufferFullness=Yl.prototype.Bf,Yl.prototype.getConfiguration=Yl.prototype.getConfiguration,Yl.prototype.configure=Yl.prototype.configure,Yl.prototype.load=Yl.prototype.load,Yl.prototype.updateStartTime=Yl.prototype.Fg,Yl.prototype.unload=Yl.prototype.re,Yl.prototype.detach=Yl.prototype.detach,Yl.prototype.attachCanvas=Yl.prototype.lf,Yl.prototype.attach=Yl.prototype.Yb,Yl.probeSupport=function(e){var t,n,i,r,a;return e=void 0===e||e,L((function(o){if(1==o.g)return t={},e?E(o,function(){var e,t,n,i,r,a;return L((function(o){return 1==o.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{initDataTypes:["cenc"],videoCapabilities:t}],i=new Map,r=function(e){var t,r,a;return L((function(o){switch(o.g){case 1:if(A(o,2),"org.w3.clearkey"===e&&ft())throw Error("Unsupported keySystem");return E(o,navigator.requestMediaKeySystemAccess(e,n),4);case 4:return t=o.h,a=!!(r=t.getConfiguration().sessionTypes)&&r.includes("persistent-license"),gt("Tizen 3")&&(a=!1),i.set(e,{persistentState:a}),E(o,t.createMediaKeys(),5);case 5:_(o,0);break;case 2:S(o),i.set(e,null),T(o)}}))},a=e.map((function(e){return r(e)})),E(o,Promise.all(a),2)):o.return(Vi(i))}))}(),3):o.A(2);2!=o.g&&(t=o.h);var s={};if(st()){for(var l in Xr)s[l]=!0;for(var d in Qr)s[d]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var h=(d=u(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!h.done;h=d.next())s[h=h.value]=st()?!!Xr[h]:lt(h);for(var p in l)s[p]=st()?!!Qr[p]:lt(l[p]);for(n=s,s={},l=(p=u(p='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(c(es)))).next();!l.done;l=p.next())s[l=l.value]=st()?!!qt(l)||(Z(l)||Bt(l)):lt(l),s[d=l.split(";")[0]]=s[d]||s[l];for(a in i={manifest:n,media:s,drm:t},r=$u)i[a]=r[a]();return o.return(i)}))},Yl.isBrowserSupported=function(){if(e.Promise||z("A Promise implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||gt("Trident/"))return!1;var t=ft();return!(t&&13>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!st()||lt("application/x-mpegurl"))},Yl.setAdManagerFactory=function(e){Xu=e},Yl.registerSupportPlugin=function(e,t){$u[e]=t},Yl.prototype.destroy=Yl.prototype.destroy;var Ku=0,Gu=1,Wu=2,zu=3;Yl.LoadMode={DESTROYED:Ku,NOT_LOADED:Gu,MEDIA_SOURCE:Wu,SRC_EQUALS:zu},Yl.version="v4.3.4";var Yu=["4","3"];Qn=new function(e){this.g=e,this.i=$n,this.h=Xn}(new Yn(Number(Yu[0]),Number(Yu[1])));var qu=["output-restricted","internal-error"],$u={},Xu=null,Qu={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Zu={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Ju(){this.h=[],this.j=this.i=this.g=0}function ec(e,t,n){var i=this;this.h=e,this.g=t,this.m=n,this.i=!1,this.l=this.g.getVolume(),this.j=new Mi,this.j.C(this.g,google.ima.AdEvent.Type.PAUSED,(function(){i.i=!0})),this.j.C(this.g,google.ima.AdEvent.Type.RESUMED,(function(){i.i=!1}))}function tc(t,n,i,r){var a=this;this.o=t,this.i=n,this.s=null,this.u=NaN,this.l=r,this.j=null,this.h=new Mi,google.ima.settings.setLocale(i),(t=new google.ima.AdDisplayContainer(this.o,this.i)).initialize(),this.m=new google.ima.AdsLoader(t),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.4"),this.g=null,this.h.ma(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){!function(t,n){t.l(new mi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.u))),t.g=n.getAdsManager(t.i),t.l(new mi("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var i=t.g.getCuePoints();if(i.length){n=[];for(var r=(i=u(i)).next();!r.done;r=i.next())n.push({start:r.value,end:null});t.l(new mi("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new mi(n,t))}e.h.C(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){nc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){rc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.STARTED,(function(t){rc(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(e){t(e,"ad-first-quartile")})),e.h.C(e.g,google.ima.AdEvent.Type.MIDPOINT,(function(e){t(e,"ad-midpoint")})),e.h.C(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(e){t(e,"ad-third-quartile")})),e.h.C(e.g,google.ima.AdEvent.Type.COMPLETE,(function(e){t(e,"ad-complete")})),e.h.C(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){ac(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){ac(e,t)})),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPED,(function(e){t(e,"ad-skipped")})),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(e){t(e,"ad-volume-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,(function(e){t(e,"ad-muted")})),e.h.C(e.g,google.ima.AdEvent.Type.PAUSED,(function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))})),e.h.C(e.g,google.ima.AdEvent.Type.RESUMED,(function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))})),e.h.C(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(n){e.j&&t(n,"ad-skip-state-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.CLICK,(function(e){t(e,"ad-clicked")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_PROGRESS,(function(e){t(e,"ad-progress")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_BUFFERING,(function(e){t(e,"ad-buffering")})),e.h.C(e.g,google.ima.AdEvent.Type.IMPRESSION,(function(e){t(e,"ad-impression")})),e.h.C(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,(function(e){t(e,"ad-duration-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.USER_CLOSE,(function(e){t(e,"ad-closed")})),e.h.C(e.g,google.ima.AdEvent.Type.LOADED,(function(e){t(e,"ad-loaded")})),e.h.C(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(e){t(e,"all-ads-completed")})),e.h.C(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(e){t(e,"ad-linear-changed")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_METADATA,(function(e){t(e,"ad-metadata")})),e.h.C(e.g,google.ima.AdEvent.Type.LOG,(function(e){t(e,"ad-recoverable-error")})),e.h.C(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,(function(e){t(e,"ad-break-ready")})),e.h.C(e.g,google.ima.AdEvent.Type.INTERACTION,(function(e){t(e,"ad-interaction")}))}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.C(t.i,"loadeddata",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e?(t.s=new ResizeObserver((function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.s.observe(t.i)):t.h.C(document,"fullscreenchange",(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight,ic(t)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.i.addEventListener("play",(function(){t.g.start()}),{once:!0})}catch(e){ac(t,null)}}(a,t)})),this.h.C(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){nc(a,e)})),this.i.onended=function(){a.m.contentComplete()}}function nc(e,t){t.getError(),ac(e,null),e.l(new mi("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function ic(e){return document.fullscreenEnabled?!!document.fullscreenElement:!!(e=e.i).webkitSupportsFullscreen&&e.webkitDisplayingFullscreen}function rc(e,t){var n=t.getAd();n?(e.j=new ec(n,e.g,e.i),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new mi("ad-started",t)),e.j.isLinear()&&(e.o.setAttribute("ad-active","true"),e.i.pause())):z("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function ac(e,t){e.l(new mi("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.o.removeAttribute("ad-active"),e.i.play())}function oc(e,t){this.i=e,this.h=null,this.g=t}function sc(e,t,n,i){var r=this;this.s=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.F=!1,this.u=this.m=this.o=null,this.B="",this.D=[],this.h=new Mi,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,e),this.i(new mi("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){!function(e,t){e.i(new mi("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.F||e.h.C(e.l,"seeked",(function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.o=t,e.l.currentTime=n.start)}}))}(r,e)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.B.length?r.j.resolve(r.B):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.m=new oc(e,r.l),r.u&&(r.m.h=r.u),r.i(new mi("ad-started",(new Map).set("ad",r.m))),r.s.setAttribute("ad-active","true")})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.s.removeAttribute("ad-active");var e=r.l.currentTime;r.o&&r.o>e&&(r.l.currentTime=r.o,r.o=null)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.u=e.getStreamData().adProgressData,r.m&&(r.m.h=r.u)})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.i(new mi("ad-first-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.i(new mi("ad-midpoint"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.i(new mi("ad-third-quartile"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.i(new mi("ad-complete")),r.i(new mi("ad-stopped")),r.s.removeAttribute("ad-active"),r.m=null})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.i(new mi("ad-skipped")),r.i(new mi("ad-stopped"))})),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[];for(var n=(t=u(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e,r.i(new mi("ad-cue-points-changed",(new Map).set("cuepoints",e)))}))}function lc(){bi.call(this),this.g=this.i=null,this.h=new Ju,this.j=navigator.language}function uc(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof mi){var n={};for(i in t)(e=t[i])&&"object"==typeof e?"detail"==i&&(n[i]=e):i in Event||(n[i]=e);return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(n=(e=u(Object.getOwnPropertyNames(t))).next();!n.done;n=e.next())i.add(n.value);for(e={},n=(i=u(i)).next();!n.done;n=i.next())e[n=n.value]=t[n];t={__type__:"Error",contents:e}}else if(t instanceof TimeRanges){for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=u(Ao(t))).next();!n.done;n=t.next())e=(n=n.value).end,i.start.push(n.start),i.end.push(e);t=i}else t=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}}))}function cc(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n}))}(i=ec.prototype).getDuration=function(){return this.h.getDuration()},i.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.g.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.h.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.g.getAdSkippableState()},i.skip=function(){return this.g.skip()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.resume()},i.getVolume=function(){return this.g.getVolume()},i.setVolume=function(e){return this.g.setVolume(e)},i.isMuted=function(){return 0==this.g.getVolume()},i.isLinear=function(){return this.h.isLinear()},i.resize=function(e,t){var n=!1,i=this.m;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.g.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},i.getSequenceLength=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.h.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.h.getTitle()},i.getDescription=function(){return this.h.getDescription()},i.release=function(){this.g=this.h=null},V("shaka.ads.ClientSideAd",ec),ec.prototype.release=ec.prototype.release,ec.prototype.getDescription=ec.prototype.getDescription,ec.prototype.getTitle=ec.prototype.getTitle,ec.prototype.getPositionInSequence=ec.prototype.getPositionInSequence,ec.prototype.getSequenceLength=ec.prototype.getSequenceLength,ec.prototype.setMuted=ec.prototype.setMuted,ec.prototype.resize=ec.prototype.resize,ec.prototype.isLinear=ec.prototype.isLinear,ec.prototype.isMuted=ec.prototype.isMuted,ec.prototype.setVolume=ec.prototype.setVolume,ec.prototype.getVolume=ec.prototype.getVolume,ec.prototype.play=ec.prototype.play,ec.prototype.pause=ec.prototype.pause,ec.prototype.skip=ec.prototype.skip,ec.prototype.canSkipNow=ec.prototype.canSkipNow,ec.prototype.getTimeUntilSkippable=ec.prototype.getTimeUntilSkippable,ec.prototype.isSkippable=ec.prototype.isSkippable,ec.prototype.isPaused=ec.prototype.isPaused,ec.prototype.getRemainingTime=ec.prototype.getRemainingTime,ec.prototype.getMinSuggestedDuration=ec.prototype.getMinSuggestedDuration,ec.prototype.getDuration=ec.prototype.getDuration,tc.prototype.stop=function(){this.g&&this.g.stop(),this.o&&ul(this.o)},tc.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()},(i=oc.prototype).getDuration=function(){return this.h?this.h.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.i.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.i.getTitle()},i.getDescription=function(){return this.i.getDescription()},i.release=function(){this.g=this.h=this.i=null},V("shaka.ads.ServerSideAd",oc),oc.prototype.release=oc.prototype.release,oc.prototype.getDescription=oc.prototype.getDescription,oc.prototype.getTitle=oc.prototype.getTitle,oc.prototype.getPositionInSequence=oc.prototype.getPositionInSequence,oc.prototype.getSequenceLength=oc.prototype.getSequenceLength,oc.prototype.setMuted=oc.prototype.setMuted,oc.prototype.resize=oc.prototype.resize,oc.prototype.isLinear=oc.prototype.isLinear,oc.prototype.isMuted=oc.prototype.isMuted,oc.prototype.setVolume=oc.prototype.setVolume,oc.prototype.getVolume=oc.prototype.getVolume,oc.prototype.play=oc.prototype.play,oc.prototype.pause=oc.prototype.pause,oc.prototype.skip=oc.prototype.skip,oc.prototype.canSkipNow=oc.prototype.canSkipNow,oc.prototype.getTimeUntilSkippable=oc.prototype.getTimeUntilSkippable,oc.prototype.isSkippable=oc.prototype.isSkippable,oc.prototype.isPaused=oc.prototype.isPaused,oc.prototype.getRemainingTime=oc.prototype.getRemainingTime,oc.prototype.getMinSuggestedDuration=oc.prototype.getMinSuggestedDuration,oc.prototype.getDuration=oc.prototype.getDuration,sc.prototype.stop=function(){this.B="",this.o=null,this.D=[]},sc.prototype.release=function(){this.stop(),this.h&&this.h.release()},sc.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},m(lc,bi),(i=lc.prototype).setLocale=function(e){this.j=e},i.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new xe(2,10,1e4);this.i&&this.i.release(),this.i=new tc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},i.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),bi.prototype.release.call(this)},i.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new mi("ad-stopped")),this.h=new Ju},i.requestClientSideAds=function(e){if(!this.i)throw new xe(1,10,10001);var t=this.i;t.u=Date.now()/1e3,t.m.requestAds(e)},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new xe(2,10,10002);this.g&&this.g.release(),this.g=new sc(t,n,this.j,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.h.h.push(e.loadTime);break;case"ad-started":i.h.g++;break;case"ad-complete":i.h.i++;break;case"ad-skipped":i.h.j++}i.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new xe(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&z('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.3.4",(n=this.g).j?e=Promise.reject(new xe(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.F=!0),n.j=new it,n.g.requestStream(e),n.B=t||"",n.G=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new xe(1,10,10003);(e.mpt||e.mpv)&&z('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.3.4",this.g.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){if(!this.g)throw new xe(1,10,10003);return this.g.D},i.getStats=function(){var e=this.h;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},i.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},V("shaka.ads.AdManager",lc),lc.prototype.onCueMetadataChange=lc.prototype.onCueMetadataChange,lc.prototype.onHlsTimedMetadata=lc.prototype.onHlsTimedMetadata,lc.prototype.onDashTimedMetadata=lc.prototype.onDashTimedMetadata,lc.prototype.getStats=lc.prototype.getStats,lc.prototype.getServerSideCuePoints=lc.prototype.getServerSideCuePoints,lc.prototype.replaceServerSideAdTagParameters=lc.prototype.replaceServerSideAdTagParameters,lc.prototype.requestServerSideStream=lc.prototype.requestServerSideStream,lc.prototype.initServerSide=lc.prototype.initServerSide,lc.prototype.requestClientSideAds=lc.prototype.requestClientSideAds,lc.prototype.onAssetUnload=lc.prototype.onAssetUnload,lc.prototype.release=lc.prototype.release,lc.prototype.initClientSide=lc.prototype.initClientSide,lc.prototype.setLocale=lc.prototype.setLocale,lc.ADS_LOADED="ads-loaded",lc.AD_STARTED="ad-started",lc.AD_FIRST_QUARTILE="ad-first-quartile",lc.AD_MIDPOINT="ad-midpoint",lc.AD_THIRD_QUARTILE="ad-third-quartile",lc.AD_COMPLETE="ad-complete",lc.AD_STOPPED="ad-stopped",lc.AD_SKIPPED="ad-skipped",lc.AD_VOLUME_CHANGED="ad-volume-changed",lc.AD_MUTED="ad-muted",lc.AD_PAUSED="ad-paused",lc.AD_RESUMED="ad-resumed",lc.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",lc.CUEPOINTS_CHANGED="ad-cue-points-changed",lc.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",lc.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",lc.AD_CLICKED="ad-clicked",lc.AD_PROGRESS="ad-progress",lc.AD_BUFFERING="ad-buffering",lc.AD_IMPRESSION="ad-impression",lc.AD_DURATION_CHANGED="ad-duration-changed",lc.AD_CLOSED="ad-closed",lc.AD_LOADED="ad-loaded",lc.ALL_ADS_COMPLETED="all-ads-completed",lc.AD_LINEAR_CHANGED="ad-linear-changed",lc.AD_METADATA="ad-metadata",lc.AD_RECOVERABLE_ERROR="ad-recoverable-error",lc.AD_BREAK_READY="ad-break-ready",lc.AD_INTERACTION="ad-interaction",Xu=function(){return new lc};var dc="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),hc="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),pc=["loop","playbackRate"],fc=["pause","play"],gc={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},mc={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},vc={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},yc=[["getConfiguration","configure"]],bc=[["isTextTrackVisible","setTextTrackVisibility"]],Ec="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),Tc=["attach","attachCanvas","detach","load","unload"];function Ac(e,t,n,i,r,a,o){var s=this;this.G=e,this.M=o,this.j=new ot(t),this.O=n,this.u=!1,this.s=i,this.F=r,this.J=a,this.h=this.m=!1,this.L="",this.o=null,this.B=function(){return Cc(s)},this.D=function(e,t){switch((e=cc(t)).type){case"event":var n=e.targetName,i=vi(e.event);s.s(n,i);break;case"update":for(i in n=e.update)for(var r in e=s.g[i]||{},n[i])e[r]=n[i][r];s.u&&(s.O(),s.u=!1);break;case"asyncComplete":if(i=e.id,r=e.error,e=s.i[i],delete s.i[i],e)if(r){for(n in i=new xe(r.severity,r.category,r.code),r)i[n]=r[n];e.reject(i)}else e.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,Oc.add(this)}function kc(e,t,n){Lc=n,n.addUpdateListener(e.B),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),Cc(e),Dc(e,{type:"init",initState:t,appData:e.o}),e.l.resolve()}function _c(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new xe(2,8,n,t))}function Sc(e,t){var n=e.J();e.l=new it,e.u=!0,kc(e,n,t)}function wc(e){var t=Lc;t.removeUpdateListener(e.B),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function Cc(e){var t=!!Lc&&"connected"==Lc.status;if(e.h&&!t){for(var n in e.F(),e.g)e.g[n]={};Ic(e)}e.h=t,e.L=t?Lc.receiver.friendlyName:"",e.j.Mb()}function Ic(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new xe(1,7,7e3))}}function Dc(e,t){t=uc(t);var n=Lc;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,(function(){}),q)}catch(i){throw t=new xe(2,8,8005,i),n=new mi("error",(new Map).set("detail",t)),e.s("player",n),e.Ab(),t}}(i=Ac.prototype).destroy=function(){return Oc.delete(this),Ic(this),Lc&&wc(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},i.sa=function(){return this.h},i.ae=function(){return this.L},i.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Mb();var t=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=u(Oc),n=t.next();!n.done;n=t.next())Sc(n.value,e)}),(function(e){for(var t=u(Oc),n=t.next();!n.done;n=t.next())n=n.value,xc="available"==e,n.j.Mb()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),xc&&this.j.N(Rc),(t=Lc)&&t.status!=chrome.cast.SessionStatus.STOPPED?Sc(this,t):Lc=null}else e.__onGCastApiAvailable!==Mc&&(Pc=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Mc)},i.ie=function(e){this.o=e,this.h&&Dc(this,{type:"appData",appData:this.o})},i.cast=function(e){var t=this;return L((function(n){if(!t.m)throw new xe(1,8,8e3);if(!xc)throw new xe(1,8,8001);if(t.h)throw new xe(1,8,8002);return t.l=new it,chrome.cast.requestSession((function(n){return kc(t,e,n)}),(function(e){return _c(t,e)})),E(n,t.l,0)}))},i.Ab=function(){if(this.h){if(Ic(this),Lc){wc(this);try{Lc.stop((function(){}),(function(){}))}catch(e){}Lc=null}Cc(this)}},i.get=function(e,t){var n=this;if("video"==e){if(fc.includes(t))return function(){return n.Qe.apply(n,[e,t].concat(c(P.apply(0,arguments))))}}else if("player"==e){if(vc[t]&&!this.get("player","isLive")())return function(){};if(Ec.includes(t))return function(){return n.Qe.apply(n,[e,t].concat(c(P.apply(0,arguments))))};if(Tc.includes(t))return function(){return n.og.apply(n,[e,t].concat(c(P.apply(0,arguments))))};if(gc[t]||mc[t])return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,Dc(this,{type:"set",targetName:e,property:t,value:n})},i.Qe=function(e,t){Dc(this,{type:"call",targetName:e,methodName:t,args:P.apply(2,arguments)})},i.og=function(e,t){var n=P.apply(2,arguments),i=new it,r=this.H.toString();this.H++,this.i[r]=i;try{Dc(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};var Rc=.02,xc=!1,Lc=null,Pc=null,Oc=new Set;function Mc(t){if(Pc?e.__onGCastApiAvailable=Pc:delete e.__onGCastApiAvailable,Pc=null,t)for(var n=u(Oc),i=n.next();!i.done;i=n.next())i.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Nc(e,t,n,i){i=void 0!==i&&i,bi.call(this);var r=this;this.i=e,this.h=t,this.m=this.o=this.j=this.s=this.l=null,this.D=n,this.B=i,this.u=new Map,this.g=new Ac(n,(function(){return Fc(r)}),(function(){return Vc(r)}),(function(e,t){return Kc(r,e,t)}),(function(){return Hc(r)}),(function(){return Uc(r)}),i),function(e){e.g.init(),e.m=new Mi;for(var t=u(dc),n=t.next();!n.done;n=t.next())e.m.C(e.i,n.value,(function(t){e.g.sa()||(t=vi(t),e.j.dispatchEvent(t))}));for(var i in yi)e.m.C(e.h,yi[i],(function(t){e.g.sa()||e.o.dispatchEvent(t)}));for(var r in e.l={},t={},e.i)t.Sb=r,Object.defineProperty(e.l,t.Sb,{configurable:!1,enumerable:!0,get:function(t){return function(){return jc(e,t.Sb)}}(t),set:function(t){return function(n){var i=t.Sb;e.g.sa()?e.g.set("video",i,n):e.i[i]=n}}(t)}),t={Sb:t.Sb};e.s={},Bc(e,(function(t){Object.defineProperty(e.s,t,{configurable:!1,enumerable:!0,get:function(){return function(e,t){if(e.u.has(t)&&(t=e.u.get(t)),"addEventListener"==t)return function(t,n,i){return e.o.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.o.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.l};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.jc()};if("getDrmEngine"==t)return function(){return e.h.m};if("getAdManager"==t)return function(){return e.h.Ge()};if("setVideoContainer"==t)return function(t){return e.h.$e(t)};if(e.g.sa()){if("getManifest"==t||"drmInfo"==t)return function(){return z(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return z(t+"() does not work while casting!"),Promise.resolve()}}return e.g.sa()&&0==Object.keys(e.g.g.video).length&&(gc[t]||mc[t])||!e.g.sa()?e.h[t].bind(e.h):e.g.get("player",t)}(e,t)}})})),function(e){var t=new Map;Bc(e,(function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.u.set(n,i):e.u.set(i,n)):t.set(i,n)}))}(e),e.j=new bi,e.j.Wc=e.l,e.o=new bi,e.o.Wc=e.s}(this)}function Bc(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!a.has(e)}var i,r=e.h,a=new Set;for(i in r)n(i)&&(a.add(i),t(i,r[i]));for(e=Object.getPrototypeOf(r),i=Object.getPrototypeOf({});e&&e!=i;){for(var o=u(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())n(s=s.value)&&(a.add(s),t(s,r[s]));e=Object.getPrototypeOf(e)}}function Uc(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Dd(),startTime:null};e.i.pause();for(var n=u(pc),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),i=(n=u(yc)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(i=(n=u(bc)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function Fc(e){var t=new mi("caststatuschanged");e.dispatchEvent(t)}function Vc(e){var t=new mi(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Hc(e){for(var t=u(yc),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var a=e.i.autoplay;i=null,n||(i=e.g.get("video","currentTime")),r&&(e.i.autoplay=!1,t=e.h.load(r,i));var o={};for(i=(n=u(pc)).next();!i.done;i=n.next())i=i.value,o[i]=e.g.get("video",i);t.then((function(){if(e.i){for(var t=u(pc),n=t.next();!n.done;n=t.next())n=n.value,e.i[n]=o[n];for(n=(t=u(bc)).next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}e.i.autoplay=a,r&&e.i.play()}}),(function(t){t=new mi("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)}))}function jc(e,t){if("addEventListener"==t)return function(t,n,i){return e.j.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.j.removeEventListener(t,n,i)};if(e.g.sa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.sa()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function Kc(e,t,n){e.g.sa()&&("video"==t?e.j.dispatchEvent(n):"player"==t&&e.o.dispatchEvent(n))}function Gc(e,t,n,i){bi.call(this);var r=this;this.g=e,this.h=t,this.j=new Mi,this.H={video:e,player:t},this.D=n||function(){},this.J=i||function(e){return e},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.u=!0,this.s=this.l=null,this.G=new ot((function(){qc(r)})),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Wc(e)},t.onSenderDisconnected=function(){return Wc(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&Zc(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),Zc(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.s=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.s.onMessage=function(t){return function(e,t){var n=cc(t.data);switch(n.type){case"PLAY":e.g.play(),Jc(e);break;case"PAUSE":e.g.pause(),Jc(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;null!=t&&(e.g.currentTime=Number(t)),i&&"PLAYBACK_START"==i?(e.g.play(),Jc(e)):i&&"PLAYBACK_PAUSE"==i&&(e.g.pause(),Jc(e));break;case"STOP":e.h.re().then((function(){e.h&&Jc(e)}));break;case"GET_STATUS":Xc(e,Number(n.requestId));break;case"VOLUME":t=(i=n.volume).level,i=i.muted;var r=e.g.volume,a=e.g.muted;null!=t&&(e.g.volume=Number(t)),null!=i&&(e.g.muted=i),r==e.g.volume&&a==e.g.muted||Jc(e);break;case"LOAD":e.m=0,e.B=!1,e.u=!1,t=n.media,i=n.currentTime,r=e.J(t.contentId),a=n.autoplay||!0,e.D(t.customData),a&&(e.g.autoplay=!0),e.h.load(r,i).then((function(){e.h&&Xc(e)})).catch((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),Zc(e,{requestId:Number(n.requestId),type:i},e.s)}));break;default:Zc(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.s)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=cc(t.data);switch(n.type){case"init":e.m=0,e.B=!1,e.u=!0,function(e,t,n){var i,r,a,o,s,l,u,c,d,h;L((function(p){switch(p.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.D(n),a=e.g.autoplay,t.manifest?(e.g.autoplay=!1,A(p,5),E(p,e.h.load(t.manifest,t.startTime),7)):E(p,Promise.resolve(),3);case 7:_(p,3);break;case 5:return o=S(p),s=(new Map).set("detail",o),l=new mi("error",s),e.h&&e.h.dispatchEvent(l),p.return();case 3:if(!e.h)return p.return();for(u in t.video)c=t.video[u],e.g[u]=c;for(d in t.playerAfterLoad)h=t.playerAfterLoad[d],e.h[d](h);e.g.autoplay=a,t.manifest&&(e.g.play(),Jc(e)),T(p)}}))}(e,n.initState,n.appData),qc(e);break;case"appData":e.D(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(n);break}if("muted"==r){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":(i=e.H[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.m=0,e.B=!1);var a=n.id,o=t.senderId;n=(t=e.H[i])[r].apply(t,n.args),"player"==i&&"load"==r&&(n=n.then((function(){e.u=!0}))),n.then((function(){return Qc(e,o,a,null)}),(function(t){return Qc(e,o,a,t)}))}}(e,t)},t.start();for(var n=(t=u(dc)).next();!n.done;n=t.next())e.j.C(e.g,n.value,(function(t){return Yc(e,"video",t)}));for(var i in yi)e.j.C(e.h,yi[i],(function(t){return Yc(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.ke(3840,2160):e.h.ke(1920,1080),e.j.C(e.g,"loadeddata",(function(){e.B=!0})),e.j.C(e.h,"loading",(function(){e.o=!1,zc(e)})),e.j.C(e.g,"playing",(function(){e.o=!1,zc(e)})),e.j.C(e.g,"pause",(function(){zc(e)})),e.j.C(e.h,"unloading",(function(){e.o=!0,zc(e)})),e.j.C(e.g,"ended",(function(){new ot((function(){e.g&&e.g.ended&&(e.o=!0,zc(e))})).N(td)}))}(this)}function Wc(e){e.m=0,e.u=!0,e.F=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,zc(e)}function zc(e){var t;L((function(n){return 1==n.g?E(n,Promise.resolve(),2):e.h?(t=new mi("caststatuschanged"),e.dispatchEvent(t),$c(e)||Jc(e),void T(n)):n.return()}))}function Yc(e,t,n){e.h&&(qc(e),Zc(e,{type:"event",targetName:t,event:n},e.l))}function qc(e){e.G.N(ed);for(var t={video:{},player:{}},n=u(hc),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.U())for(var r in vc)0==e.m%vc[r]&&(t.player[r]=e.h[r]());for(var a in gc)0==e.m%gc[a]&&(t.player[a]=e.h[a]());for(var o in(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),Zc(e,{type:"update",update:t},e.l),mc)0==e.m%mc[o]&&((t={player:{}}).player[o]=e.h[o](),Zc(e,{type:"update",update:t},e.l));e.B&&(e.m+=1),$c(e)}function $c(e){return!(!e.u||!e.g.duration&&!e.h.U())&&(Xc(e),e.u=!1,!0)}function Xc(e,t){var n={contentId:e.h.Dd(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),Jc(e,void 0===t?0:t,n)}function Qc(e,t,n,i){e.h&&Zc(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function Zc(e,t,n,i){e.F&&(e=uc(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Jc(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?nd:e.h.Fd()?rd:e.g.paused?ad:id,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),Zc(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.s)}m(Nc,bi),(i=Nc.prototype).destroy=function(e){return e&&this.g.Ab(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,bi.prototype.release.call(this),Promise.all(e)},i.Wf=function(){return this.l},i.Nf=function(){return this.s},i.nf=function(){return this.g.m&&xc},i.sa=function(){return this.g.sa()},i.ae=function(){return this.g.ae()},i.cast=function(){var e,t=this;return L((function(n){return 1==n.g?(e=Uc(t),E(n,t.g.cast(e),2)):t.h?E(n,t.h.re(),0):n.return()}))},i.ie=function(e){this.g.ie(e)},i.zg=function(){!function(e){if(e.h){var t=e.J();chrome.cast.requestSession((function(n){return kc(e,t,n)}),(function(t){return _c(e,t)}))}}(this.g)},i.Ab=function(){this.g.Ab()},i.qf=function(e,t){t=void 0!==t&&t;var n=this;return L((function(i){if(1==i.g)return e==n.D&&t==n.B?i.return():(n.D=e,n.B=t,n.g.Ab(),E(i,n.g.destroy(),2));n.g=null,n.g=new Ac(e,(function(){return Fc(n)}),(function(){return Vc(n)}),(function(e,t){return Kc(n,e,t)}),(function(){return Hc(n)}),(function(){return Uc(n)}),t),n.g.init(),T(i)}))},V("shaka.cast.CastProxy",Nc),Nc.prototype.changeReceiverId=Nc.prototype.qf,Nc.prototype.forceDisconnect=Nc.prototype.Ab,Nc.prototype.suggestDisconnect=Nc.prototype.zg,Nc.prototype.setAppData=Nc.prototype.ie,Nc.prototype.cast=Nc.prototype.cast,Nc.prototype.receiverName=Nc.prototype.ae,Nc.prototype.isCasting=Nc.prototype.sa,Nc.prototype.canCast=Nc.prototype.nf,Nc.prototype.getPlayer=Nc.prototype.Nf,Nc.prototype.getVideo=Nc.prototype.Wf,Nc.prototype.destroy=Nc.prototype.destroy,m(Gc,bi),(i=Gc.prototype).isConnected=function(){return this.F},i.$f=function(){return this.o},i.wg=function(e){this.i=e},i.uf=function(){this.i=null},i.xg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.vg=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.ug=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return L((function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.h&&(e.push(t.h.destroy()),t.h=null),t.G&&(t.G.stop(),t.G=null),t.g=null,t.H=null,t.D=null,t.F=!1,t.o=!0,t.l=null,t.s=null,bi.prototype.release.call(t),E(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),T(n)}))},V("shaka.cast.CastReceiver",Gc),Gc.prototype.destroy=Gc.prototype.destroy,Gc.prototype.setContentArtist=Gc.prototype.ug,Gc.prototype.setContentImage=Gc.prototype.vg,Gc.prototype.setContentTitle=Gc.prototype.xg,Gc.prototype.clearContentMetadata=Gc.prototype.uf,Gc.prototype.setContentMetadata=Gc.prototype.wg,Gc.prototype.isIdle=Gc.prototype.$f,Gc.prototype.isConnected=Gc.prototype.isConnected;var ed=.5,td=5,nd="IDLE",id="PLAYING",rd="BUFFERING",ad="PAUSED";function od(e,t,n){var i=function(e){for(var t=[],n=(e=u(e)).next();!n.done;n=e.next())(n=ld(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));if(o.delete(null),1<o.size)throw new xe(2,4,4010);if(t||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.fe||(r=e.init||r,!1)}))).length&&(e=function(e,t,n,i){for(var r=[],a=(t=u(t)).next();!a.done;a=t.next()){var o=n[(a=a.value).fe];if(o){var s;if(s=rr(a.node,"urn:microsoft:playready","pro")){s=Dt(s.textContent);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);s=[{initData:nr(s,l,new Set,0),initDataType:"cenc",keyId:a.keyId}]}else s=null;if(l=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===a.fe)if(0==(l=i).size)l=null;else{var c=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);l=[{initData:nr(new Uint8Array([]),c,l,1),initDataType:"cenc",keyId:a.keyId}]}s=Qe(o,a.init||e||s||l),(o=cd.get(o))&&(s.licenseServerUri=o(a)),r.push(s)}}return r}(r,a,n,o),0==e.length&&(e=[Qe("",r)])),i.length&&(t||!a.length))for(e=[],n=(t=u(Object.values(n))).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(Qe(n,r));if(o=Array.from(o)[0]||null)for(n=(t=u(e)).next();!n.done;n=t.next())for(i=(n=u(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{Be:o,uh:r,drmInfos:e,Fe:!0}}function sd(e){return(e=rr(e.node,"urn:microsoft:playready","pro"))?(e=function(e){var t=0,n=De(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var a=Ie(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}(e=Dt(e.textContent)).filter((function(e){return e.type===ud}))[0],e&&(e=Er(e=Tt(e.value,!0),"WRMHEADER"))?function(e){for(var t=(e=u(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=u(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""}function ld(e){var t=e.getAttribute("schemeIdUri"),n=sr(e,"urn:mpeg:cenc:2013","default_KID"),i=or(e,"urn:mpeg:cenc:2013","pssh").map(ur);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new xe(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:Dt(e),keyId:null}}))}catch(e){throw new xe(2,4,4007)}return{node:e,fe:t,keyId:n,init:0<r.length?r:null}}var ud=1,cd=(new Map).set("com.widevine.alpha",(function(e){return(e=rr(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",sd).set("com.microsoft.playready.recommendation",sd).set("com.microsoft.playready.software",sd).set("com.microsoft.playready.hardware",sd).set("org.w3.clearkey",(function(e){return(e=rr(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.getAttribute("Lic_type")&&e.textContent?e.textContent:""}));function dd(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function hd(e,t){var n=pd(e,t,"timescale"),i=1;n&&(i=mr(n)||1);var r=pd(e,t,"duration");n=mr(r||""),"image"==e.I.contentType&&(n=yr(r||"")),n&&(n/=i);var a=pd(e,t,"startNumber");r=Number(pd(e,t,"presentationTimeOffset"))||0;var o=vr(a||"");if(null!=a&&null!=o||(o=1),a=fd(e,t,"SegmentTimeline"),t=null,a){t=i,e=e.T.duration||1/0,a=ar(a,"S");for(var s=[],l=-r,u=0;u<a.length;++u){var c=a[u],d=a[u+1],h=dr(c,"t",vr),p=dr(c,"d",vr);if(c=dr(c,"r",gr),null!=h&&(h-=r),!p)break;if(h=null!=h?h:l,0>(c=c||0))if(d){if(null==(d=dr(d,"t",vr)))break;if(h>=d)break;c=Math.ceil((d-h)/p)-1}else{if(1/0==e)break;if(h/t>=e)break;c=Math.ceil((e*t-h)/p)-1}for(0<s.length&&h!=l&&(s[s.length-1].end=h/t),d=0;d<=c;++d)l=h+p,s.push({start:h/t,end:l/t,Dg:h}),h=l}t=s}return{timescale:i,ha:n,Lb:o,Sa:r/i||0,se:r,timeline:t}}function pd(e,t,n){return[t(e.I),t(e.ea),t(e.$)].filter($e).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function fd(e,t,n){return[t(e.I),t(e.ea),t(e.$)].filter($e).map((function(e){return ir(e,n)})).reduce((function(e,t){return e||t}))}function gd(e,t,n,i,r,a){if(a=void 0===a?0:a,sr(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=sr(e,"http://www.w3.org/1999/xlink","href"),s=sr(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",l=u(Array.from(e.attributes)),c=l.next();!c.done;c=l.next())"http://www.w3.org/1999/xlink"==(c=c.value).namespaceURI&&e.removeAttributeNS(c.namespaceURI,c.localName);if(5<=a)return di(new xe(2,4,4028));if("onLoad"!=s)return di(new xe(2,4,4027));var d=Xe([i],[o]);return r.request(0,wi(d,t)).Y((function(i){if(!(i=Tr(i.data,e.tagName)))return di(new xe(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(s=(i=u(Array.from(i.attributes))).next();!s.done;s=i.next())e.setAttributeNode(s.value.cloneNode(!1));return gd(e,t,n,d[0],r,a+1)}))}(e,t,n,i,r,a);return n&&(o=o.Y(void 0,(function(){return gd(e,t,n,i,r,a)}))),o}o=[];for(var s=u(Array.from(e.childNodes)),l=s.next();!l.done;l=s.next())(l=l.value)instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==sr(l,"http://www.w3.org/1999/xlink","href")?e.removeChild(l):"SegmentTimeline"!=l.tagName&&o.push(gd(l,t,n,i,r,a)));return gi(o).Y((function(){return e}))}function md(e,t,n,i,r,a,o){var s,l=(new Wi).P("sidx",(function(e){s=function(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var l=o.reader.K();if(0==l)throw new xe(2,3,3005);if(0==o.version)var u=o.reader.K(),c=o.reader.K();else u=o.reader.$a(),c=o.reader.$a();o.reader.skip(2);var d=o.reader.$d();for(e=e+o.size+c,c=0;c<d;c++){var h=o.reader.K(),p=(2147483648&h)>>>31;h&=2147483647;var f=o.reader.K();if(o.reader.skip(4),1==p)throw new xe(2,3,3006);s.push(new go(u/l+n,(u+f)/l+n,(function(){return a}),e,e+h-1,t,n,i,r)),u+=f,e+=h}return o.parser.stop(),s}(t,i,r,a,o,n,e)}));if(e&&l.parse(e),s)return s;throw new xe(2,3,3004)}function vd(e){this.h=De(e),this.g=new ji(this.h,0)}function yd(e){var t=bd(e);if(7<t.length)throw new xe(2,3,3002);for(var n=0,i=(t=u(t)).next();!i.done;i=t.next())n=256*n+i.value;t=bd(e);e:{for(var r=(i=u(Ed)).next();!r.done;r=i.next())if(Se(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Z();else{if(8==t.length&&224&t[1])throw new xe(2,3,3001);for(r=i=0;r<t.length;r++){var a=t[r];i=0==r?a&(1<<8-t.length)-1:256*i+a}t=i}return t=e.g.Z()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Z(),i=De(e.h,e.g.Z(),t),e.g.skip(t),new Td(n,i)}function bd(e){var t=e.g.Z(),n=e.g.Ra();if(0==n)throw new xe(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ie(e.h,t,n)}vd.prototype.ga=function(){return this.g.ga()};var Ed=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Td(e,t){this.id=e,this.g=t}function Ad(e){if(8<e.g.byteLength)throw new xe(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new xe(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){t=256*t+e.g.getUint8(n)}return t}function kd(e){var t=new vd(e.g);if(179!=(e=yd(t)).id)throw new xe(2,3,3013);if(e=Ad(e),183!=(t=yd(t)).id)throw new xe(2,3,3012);t=new vd(t.g);for(var n=0;t.ga();){var i=yd(t);if(241==i.id){n=Ad(i);break}}return{Eg:e,ng:n}}function _d(e,t){if(!(t=fd(e,t,"Initialization")))return null;var n=e.I.wa,i=t.getAttribute("sourceURL");i&&(n=Xe(e.I.wa,[i])),i=0;var r=null;return(t=dr(t,"range",fr))&&(i=t.start,r=t.end),new fo((function(){return n}),i,r,Rd(e))}function Sd(e,t){var n=Number(pd(e,Cd,"presentationTimeOffset"))||0,i=pd(e,Cd,"timescale"),r=1;i&&(r=mr(i)||1);var a=n/r||0,o=_d(e,Cd);!function(e,t){if(Dd(e,t),!Id(e))throw new xe(2,4,4002)}(e,o);var s=Ti(e);return{Bb:function(){var e=fd(s,Cd,"RepresentationIndex"),n=s.I.wa;return e&&(e=e.getAttribute("sourceURL"))&&(n=Xe(s.I.wa,[e])),e=Id(s),wd(s,t,o,n,e.start,e.end,a)}}}function wd(e,t,n,i,r,a,o){var s,l,u,c,d,h,p,f,g,m,v,y,b,T,A;return L((function(k){if(1==k.g)return s=e.presentationTimeline,l=!e.Ma||!e.T.Gd,u=e.T.start,c=e.T.duration,d=e.I.mimeType.split("/")[1],p=null,f=[(h=t)(i,r,a),"webm"==d?h(n.ya(),n.Ba,n.ka):null],h=null,E(k,Promise.all(f),2);if(g=k.h,m=g[0],v=g[1]||null,null,b=u-o,T=u,A=c?u+c:1/0,"mp4"==d)var _=md(m,r,i,n,b,T,A);else{if(440786851!=yd(_=new vd(v)).id)throw new xe(2,3,3008);var S=yd(_);if(408125543!=S.id)throw new xe(2,3,3009);_=S.g.byteOffset,S=new vd(S.g);for(var w=null;S.ga();){var C=yd(S);if(357149030==C.id){w=C;break}}if(!w)throw new xe(2,3,3010);for(w=new vd(w.g),C=1e6,S=null;w.ga();){var I=yd(w);if(2807729==I.id)C=Ad(I);else if(17545==I.id)if(4==I.g.byteLength)S=I.g.getFloat32(0);else{if(8!=I.g.byteLength)throw new xe(2,3,3003);S=I.g.getFloat64(0)}}if(null==S)throw new xe(2,3,3011);if(S*=w=C/1e9,475249515!=(C=yd(new vd(m))).id)throw new xe(2,3,3007);_=function(e,t,n,i,r,a,o,s,l){function u(){return r}var c=[];e=new vd(e.g);for(var d=null,h=null;e.ga();){var p=yd(e);if(187==p.id){var f=kd(p);f&&(p=n*f.Eg,f=t+f.ng,null!=d&&c.push(new go(d+o,p+o,u,h,f-1,a,o,s,l)),d=p,h=f)}}return null!=d&&c.push(new go(d+o,i+o,u,h,null,a,o,s,l)),c}(C,_,w,S,i,n,b,T,A)}return y=_,s.Ib(y),p=new Ts(y),l&&p.Wa(T,A,!0),k.return(p)}))}function Cd(e){return e.wc}function Id(e){var t=fd(e,Cd,"RepresentationIndex");return e=fr((e=pd(e,Cd,"indexRange"))||""),t&&(e=dr(t,"range",fr,e)),e}function Dd(e,t){var n=e.I.mimeType.split("/")[1];if(e.I.contentType!=et&&"mp4"!=n&&"webm"!=n)throw new xe(2,4,4006);if("webm"==n&&!t)throw new xe(2,4,4005)}function Rd(e){var t=e.I;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.ad,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function xd(e,t){var n=_d(e,Ld),i=function(e){var t=function(e){return[e.I.ab,e.ea.ab,e.$.ab].filter($e).map((function(e){return ar(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){return t.getAttribute("indexRange")&&!e.Ke&&(e.Ke=!0),{dg:t.getAttribute("media"),start:(t=dr(t,"mediaRange",fr,{start:0,end:null})).start,end:t.end}}))}(e);e=hd(e,Ld);var n=e.Lb;0==n&&(n=1);var i=0;return e.ha?i=e.ha*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{ha:e.ha,startTime:i,Lb:n,Sa:e.Sa,timeline:e.timeline,Gb:t}}(e);if(!i.ha&&!i.timeline&&1<i.Gb.length)throw new xe(2,4,4002);if(!i.ha&&!e.T.duration&&!i.timeline&&1==i.Gb.length)throw new xe(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new xe(2,4,4002);var r=null,a=null;e.$.id&&e.I.id&&(a=t[e.$.id+","+e.I.id])&&(r=a.segmentIndex);var o=function(e,t,n,i,r){var a=i.Gb.length;i.timeline&&i.timeline.length!=i.Gb.length&&(a=Math.min(i.timeline.length,i.Gb.length));for(var o=e-i.Sa,s=t?e+t:1/0,l=[],u=i.startTime,c={},d=0;d<a;c={od:c.od},d++){var h=i.Gb[d];c.od=Xe(n,[h.dg]);var p=void 0;p=null!=i.ha?u+i.ha:i.timeline?i.timeline[d].end:u+t,l.push(new go(e+u,e+p,function(e){return function(){return e.od}}(c),h.start,h.end,r,o,e,s)),u=p}return l}(e.T.start,e.T.duration,e.I.wa,i,n);return t=!r,r?r.Hb(o,e.presentationTimeline.Pa()):r=new Ts(o),e.presentationTimeline.Ib(o),e.Ma&&e.T.Gd||r.Wa(e.T.start,e.T.duration?e.T.start+e.T.duration:1/0,t),a&&(a.segmentIndex=r),{Bb:function(){return r&&0!=r.g.length||r.pc(o),Promise.resolve(r)}}}function Ld(e){return e.ab}function Pd(e,t,n,i,r,a){var o=function(e){var t=pd(e,Od,"initialization");if(!t)return null;var n=e.I.id,i=e.bandwidth||null,r=e.I.wa;return new fo((function(){var e=dd(t,n,null,i,null);return Xe(r,[e])}),0,null,Rd(e))}(e),s=function(e){var t=hd(e,Od),n=pd(e,Od,"media");return e=pd(e,Od,"index"),{ha:t.ha,timescale:t.timescale,Lb:t.Lb,Sa:t.Sa,se:t.se,timeline:t.timeline,Pd:n,oc:e}}(e);!function(e){var t=e.oc?1:0;if(t+=e.timeline?1:0,t+=e.ha?1:0,0==t)throw new xe(2,4,4002);if(1!=t&&(e.oc&&(e.timeline=null),e.ha=null),!e.oc&&!e.Pd)throw new xe(2,4,4002)}(s);var l=Ti(e);if(s.oc)return Dd(e,o),{Bb:function(){var e=dd(s.oc,l.I.id,null,l.bandwidth||null,null);return e=Xe(l.I.wa,[e]),wd(l,t,o,e,0,null,s.Sa)}};if(s.ha)return i||"image"===e.ea.contentType||(e.presentationTimeline.Sd(s.ha),e.presentationTimeline.Td(e.T.start)),{Bb:function(){return function(e,t,n,i,r){function a(e){var n=(e-f)*p,r=n+t.Sa,a=n+c;return n=a+p,(a=new go(a,Math.min(n,s()),(function(){var t=dd(m,y,e,v,r*g);return Xe(b,[t])}),0,null,i,E,c,s())).j=n,a}function o(){var e=[Math.max(l.Pa(),c),Math.min(l.gb(),s())].map((function(e){return e-c}));return[Math.ceil(e[0]/p),Math.ceil(e[1]/p)-1].map((function(e){return e+f}))}function s(){var e=null!=d&&r[d]||h;return e?c+e:1/0}var l=e.presentationTimeline,c=e.T.start,d=e.$.id,h=e.T.duration,p=t.ha,f=t.Lb,g=t.timescale,m=t.Pd,v=e.bandwidth||null,y=e.I.id,b=e.I.wa,E=c-t.Sa,T=o();e=e.Ma?Math.max(T[0],T[1]-n+1):T[0],T=T[1],n=[];for(var A=e;A<=T;++A){var k=a(A);n.push(k)}var _=new Ts(n);if(n=l.gb()<s(),A=l.U(),n||A){var S=Math.max(e,T+1);_.fd(p,(function(){var e=l.Pa();_.eb(e);var t=u(o());t.next(),t=t.next().value;for(var n=[];S<=t;){var i=a(S);n.push(i),S++}return e>s()&&!n.length?null:n}))}return Promise.resolve(_)}(l,s,r,o,a)}};var c=null;i=i=null,e.$.id&&e.I.id&&(i=n[i=e.$.id+","+e.I.id])&&(c=i.segmentIndex);var d=function(e,t,n){var i=e.T.start,r=e.T.duration,a=i-t.Sa;r=r?i+r:1/0;for(var o=[],s={},l=0;l<t.timeline.length;s={nd:s.nd,rd:s.rd,ud:s.ud,kd:s.kd,wd:s.wd,ld:s.ld},l++){var u=t.timeline[l],c=u.start,d=u.Dg;u=u.end,s.ud=l+t.Lb,s.wd=d+t.se,s.rd=e.I.id,s.kd=e.bandwidth||null,s.nd=t.Pd,s.ld=e.I.wa,o.push(new go(i+c,i+u,function(e){return function(){var t=dd(e.nd,e.rd,e.ud,e.kd||null,e.wd);return Xe(e.ld,[t]).map((function(e){return e.toString()}))}}(s),0,null,n,a,i,r))}return o}(l,s,o);n=e.T.start;var h=e.T.duration?e.T.start+e.T.duration:1/0,p=!(e.Ma&&e.T.Gd);return c?(p&&new Ts(d).Wa(n,h,!0),c.Hb(d,e.presentationTimeline.Pa())):c=new Ts(d),e.presentationTimeline.Ib(d),p&&c.Wa(n,h),i&&e.Ma&&(i.segmentIndex=c),{Bb:function(){return c&&0!=c.g.length||c.pc(d),Promise.resolve(c)}}}function Od(e){return e.xc}function Md(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}function Nd(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,A,k,_,S,w,C,I,D,R,x,P,O;return L((function(L){switch(L.g){case 1:if(i=tt,function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).Kc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.channelsCount==s.channelsCount&&r.language==s.language&&r.bandwidth==s.bandwidth&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&ne(r.roles,s.roles)&&r.audioSamplingRate==s.audioSamplingRate&&r.primary==s.primary&&(a=!0);a||n.push(r)}t.Kc=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).gd),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.frameRate==s.frameRate&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.label==s.label&&ne(r.roles,s.roles)&&Hi(r.closedCaptions,s.closedCaptions)&&r.bandwidth==s.bandwidth&&(a=!0);a||n.push(r)}t.gd=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.language==s.language&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.bandwidth==s.bandwidth&&ne(r.roles,s.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}(t),function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){for(var n=[],i=u((t=t.value).imageStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=u(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&(a=!0);a||n.push(r)}t.imageStreams=n}}(t),!n&&1==t.length){r=t[0],e.g=r.Kc,e.h=r.gd,e.j=r.textStreams,e.i=r.imageStreams,L.A(2);break}for(a=-1,o=0;o<t.length;o++)s=t[o],e.m.has(s.id)||(e.m.add(s.id),-1==a&&(a=o));if(-1==a)return L.return();for(l=t.map((function(e){return e.Kc})),c=t.map((function(e){return e.gd})),d=t.map((function(e){return e.textStreams})),h=t.map((function(e){return e.imageStreams})),p=u(d),f=p.next();!f.done;f=p.next())f.value.push(th(i.X));for(g=u(h),m=g.next();!m.done;m=g.next())m.value.push(th(i.Wb));return E(L,Ud(e.g,l,a,jd,Gd),3);case 3:return E(L,Ud(e.h,c,a,jd,Gd),4);case 4:return E(L,Ud(e.j,d,a,jd,Gd),5);case 5:return E(L,Ud(e.i,h,a,jd,Gd),2);case 2:if(v=0,y=[],e.h.length&&e.g.length)for(w=u(e.g),C=w.next();!C.done;C=w.next())for(I=C.value,D=u(e.h),R=D.next();!R.done;R=D.next())x=R.value,P=Br(I.drmInfos,x.drmInfos),I.drmInfos.length&&x.drmInfos.length&&!P.length||(O=v++,y.push({id:O,language:I.language,primary:I.primary,audio:I,video:x,bandwidth:(I.bandwidth||0)+(x.bandwidth||0),drmInfos:P,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(b=e.h.concat(e.g),A=u(b),k=A.next();!k.done;k=A.next())_=k.value,S=v++,y.push({id:S,language:_.language,primary:_.primary,audio:_.type==i.Hc?_:null,video:_.type==i.va?_:null,bandwidth:_.bandwidth||0,drmInfos:_.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=y,T(L)}}))}function Bd(e){var t,n,i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,T,A,k,_,S,w;return L((function(C){switch(C.g){case 1:if(t=tt,1==e.length)return C.return(e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.Hc}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.va}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.X}))})),a=e.map((function(e){return e.filter((function(e){return e.type==t.Wb}))})),o=u(r),s=o.next();!s.done;s=o.next())s.value.push(eh(t.X));for(l=u(a),c=l.next();!c.done;c=l.next())c.value.push(eh(t.Wb));return E(C,Ud([],n,0,Kd,Wd),2);case 2:return d=C.h,E(C,Ud([],i,0,Kd,Wd),3);case 3:return h=C.h,E(C,Ud([],r,0,Kd,Wd),4);case 4:return p=C.h,E(C,Ud([],a,0,Kd,Wd),5);case 5:if(f=C.h,g=0,h.length&&d.length)for(b=u(d),T=b.next();!T.done;T=b.next())for(A=T.value,k=u(h),_=k.next();!_.done;_=k.next())S=_.value,w=g++,S.variantIds.push(w),A.variantIds.push(w);else for(m=h.concat(d),v=u(m),y=v.next();!y.done;y=v.next())y.value.variantIds=[g++];return C.return(h.concat(d).concat(p).concat(f))}}))}function Ud(e,t,n,i,r){var a,o,s,l,c,d,h,p,f,g,m,v,y,b,T,A,k,_;return L((function(S){switch(S.g){case 1:for(a=tt,o=[],s=0;s<t.length;s++)s>=n?o.push(new Set(t[s])):o.push(new Set);l=u(e),c=l.next();case 2:if(c.done){S.A(4);break}return E(S,function(e,t,n,i,r){return L((function(a){return 1==a.g?(zd(t,e),e.matchedStreams?e.segmentIndex?E(a,Fd(e,n),2):a.A(2):a.return(!1)):(Hd(e,n,i,r),a.return(!0))}))}(c.value,t,n,r,o),5);case 5:if(!S.h)throw new xe(2,4,4037);c=l.next(),S.A(2);break;case 4:for(d=u(o),h=d.next();!h.done;h=d.next())for(p=h.value,f=u(p),g=f.next();!g.done;g=f.next())m=g.value,(v=Vd(m,t,i,r,o))&&e.push(v);for(y=u(o),h=y.next();!h.done;h=y.next())for(b=h.value,T={},A=u(b),g=A.next();!g.done;T={Va:T.Va},g=A.next())if(T.Va=g.value,k=T.Va.type==a.X&&!T.Va.language,_=T.Va.type==a.Wb&&!T.Va.tilesLayout,!k&&!_&&e.some(function(e){return function(t){return t.mimeType==e.Va.mimeType&&Gt(t.codecs)==Gt(e.Va.codecs)}}(T)))throw new xe(2,4,4037);return S.return(e)}}))}function Fd(e,t){var n,i,r,a,o,s,l;return L((function(c){if(1==c.g){for(n=[],i=e.matchedStreams,r=u(i),a=r.next();!a.done;a=r.next())o=a.value,n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex());return E(c,Promise.all(n),2)}if(e.segmentIndex instanceof Ss)for(s=0;s<i.length;s++)(l=i[s]).segmentIndex&&s>=t&&e.segmentIndex.l.push(l.segmentIndex);T(c)}))}function Vd(e,t,n,i,r){var a=n(e);return zd(t,a),a.createSegmentIndex&&(a.createSegmentIndex=function(){return L((function(e){return a.segmentIndex?e.A(0):(a.segmentIndex=new Ss,E(e,Fd(a,0),0))}))}),a.matchedStreams?(Hd(a,0,i,r),a):null}function Hd(e,t,n,i){for(var r=e.matchedStreams,a=0;a<r.length;a++)if(a>=t){var o=r[a];n(e,o);var s=!0;"audio"==e.type&&0==an(e.language,o.language)&&(s=!1),s&&i[a].delete(o)}}function jd(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=u(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function Kd(e){return(e=Object.assign({},e)).keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function Gd(e,t){var n,i;e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris)))),e.keyIds=(n=e.keyIds,i=t.keyIds,new Set([].concat(c(n),c(i)))),null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||"");var r=Br(e.drmInfos,t.drmInfos);if(t.drmInfos.length&&e.drmInfos.length&&!r.length)throw new xe(2,4,4038);if(e.drmInfos=r,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map);for(var a=(r=u(t.closedCaptions)).next();!a.done;a=r.next()){var o=u(a.value);a=o.next().value,o=o.next().value,e.closedCaptions.set(a,o)}}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=jd(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),Gd(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&Gd(e.trickModeVideo,t)}function Wd(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(c(e.keyIds),c(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,c(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=u(t.closedCaptions)).next();!n.done;n=t.next()){var i=u(n.value);n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}}function zd(e,t){for(var n=[],i=(e=u(e)).next();!i.done;i=e.next()){for(var r=t,a={audio:Yd,video:Yd,text:qd,image:$d}[r.type],o={audio:Xd,video:Qd,text:Zd,image:Jd}[r.type],s=null,l=(i=u(i.value)).next();!l.done;l=i.next())!a(r,l=l.value)||s&&!o(r,s,l)||(s=l);if(!(r=s))return;n.push(r)}t.matchedStreams=n}function Yd(e,t){var n;return!(n=t.mimeType!=e.mimeType||Gt(t.codecs)!=Gt(e.codecs))&&(n=e.drmInfos)&&(e=e.drmInfos,t=t.drmInfos,n=!(!e.length||!t.length||0<Br(e,t).length)),!n}function qd(e,t){return!!e.language&&(!t.language||0!=an(e.language,t.language)&&t.kind==e.kind)}function $d(e){return!!e.tilesLayout}function Xd(e,t,n){if(e.id==n.id)return!0;var i=an(e.language,t.language),r=an(e.language,n.language);return r>i||!(r<i)&&(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((i=nh(e.channelsCount,t.channelsCount,n.channelsCount))==rh||i!=oh&&((i=nh(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==rh||i!=oh&&!(!e.bandwidth||ih(e.bandwidth,t.bandwidth,n.bandwidth)!=rh)))))}function Qd(e,t,n){if(e.id==n.id)return!0;var i=nh(e.width*e.height,t.width*t.height,n.width*n.height);if(i==rh)return!0;if(i==oh)return!1;if(e.frameRate){if((i=nh(e.frameRate,t.frameRate,n.frameRate))==rh)return!0;if(i==oh)return!1}return!(!e.bandwidth||ih(e.bandwidth,t.bandwidth,n.bandwidth)!=rh)}function Zd(e,t,n){if(e.id==n.id)return!0;var i=an(e.language,t.language),r=an(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),(r=n.roles.filter((function(t){return e.roles.includes(t)}))).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Jd(e,t,n){return e.id==n.id||nh(e.width*e.height,t.width*t.height,n.width*n.height)==rh}function eh(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function th(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ts([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function nh(e,t,n){if(t==e&&e!=n)return oh;if(n==e&&e!=t)return rh;if(t>e){if(n<=e||n-e<t-e)return rh;if(n-e>t-e)return oh}else{if(n>e)return oh;if(e-n<e-t)return rh;if(e-n>e-t)return oh}return ah}function ih(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?rh:t<e?oh:ah}Md.prototype.release=function(){for(var e=u(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var rh=1,ah=0,oh=-1;function sh(){var e=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.L={},this.j=new Md,this.F=0,this.H=new H(5),this.D=new ot((function(){!function(e){var t,n;L((function(i){switch(i.g){case 1:return t=0,A(i,2),E(i,lh(e),4);case 4:t=i.h,_(i,3);break;case 2:n=S(i),e.h&&(n.severity=1,e.h.onError(n));case 3:if(!e.h)return i.return();hh(e,t),T(i)}}))}(e)})),this.o=new Ai,this.s=null,this.J=[],this.u=1/0,this.B=!1}function lh(e){var t,n,i,r,a,o,s;return L((function(l){return 1==l.g?(t=wi(e.m,e.g.retryParameters),n=e.h.networkingEngine,e.h.modifyManifestRequest(t,{format:"d"}),i=Date.now(),r=n.request(0,t),ki(e.o,r),E(l,r.promise,2)):3!=l.g?(a=l.h,e.h?(a.uri&&!e.m.includes(a.uri)&&e.m.unshift(a.uri),E(l,function(e,t,n){var i,r,a,o;return L((function(s){if(1==s.g){if(!(i=Tr(t,"MPD")))throw new xe(2,4,4001,n);return e.g.dash.disableXlinkProcessing?s.return(uh(e,i,n)):(r=e.g.dash.xlinkFailGracefully,a=gd(i,e.g.retryParameters,r,n,e.h.networkingEngine),ki(e.o,a),E(s,a.promise,2))}return o=s.h,s.return(uh(e,o,n))}))}(e,a.data,a.uri),3)):l.return(0)):(o=Date.now(),s=(o-i)/1e3,e.H.sample(1,s),l.return(s))}))}function uh(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,k,w,C,I,D,R,x,P,O,M,N,B,U;return L((function(F){switch(F.g){case 1:if((i=e.g.dash.manifestPreprocessor)&&i(t),r=[n],0<(a=ar(t,"Location").map(ur).filter($e)).length&&(o=Xe(r,a),r=e.m=o),s=ar(t,"BaseURL"),l=s.map(ur),c=Xe(r,l),d=0,s&&s.length&&(d=dr(s[0],"availabilityTimeOffset",yr)||0),h=e.g.dash.ignoreMinBufferTime,p=0,h||(p=dr(t,"minBufferTime",pr)||0),e.F=dr(t,"minimumUpdatePeriod",pr,-1),f=dr(t,"availabilityStartTime",hr),g=dr(t,"timeShiftBufferDepth",pr),m=e.g.dash.ignoreSuggestedPresentationDelay,v=null,m||(v=dr(t,"suggestedPresentationDelay",pr)),y=e.g.dash.ignoreMaxSegmentDuration,b=null,y||(b=dr(t,"maxSegmentDuration",pr)),k=t.getAttribute("type")||"static",e.i)for(w=e.i.presentationTimeline,C=u(Object.values(e.l)),I=C.next();!I.done;I=C.next())(D=I.value).segmentIndex&&D.segmentIndex.eb(w.Pa());else R=e.g.defaultPresentationDelay||1.5*p,w=new ts(f,null!=v?v:R,e.g.dash.autoCorrectDrift);return w.yc("static"==k),w.U()&&!isNaN(e.g.availabilityWindowOverride)&&(g=e.g.availabilityWindowOverride),null==g&&(g=1/0),w.me(g),x=t.getAttribute("profiles")||"",P={Ma:"static"!=k,presentationTimeline:w,$:null,T:null,ea:null,I:null,bandwidth:0,Ke:!1,zb:d,profiles:x.split(",")},O=function(e,t,n,i){var r=dr(i,"mediaPresentationDuration",pr),a=[],o=0;i=ar(i,"Period");for(var s=0;s<i.length;s++){var l=i[s],u=i[s+1],c=dr(l,"start",pr,o),d=l.id,h=dr(l,"duration",pr),p=null;if(u){var f=dr(u,"start",pr);null!=f&&(p=f-c)}else null!=r&&(p=r-c);if(null==p&&(p=h),!(null!==e.s&&null!==d&&null!==c&&c<e.s)||e.J.includes(d)||s+1==i.length){if(null!==c&&(null===e.s||c>e.s)&&(e.s=c),o=ch(e,t,n,{start:c,duration:p,node:l,Gd:null==p||!u}),a.push(o),t.$.id&&p&&(e.L[t.$.id]=p),null==p){o=null;break}o=c+p}}return e.J=a.map((function(e){return e.id})),null!=r?{periods:a,duration:r,De:!1}:{periods:a,duration:o,De:!0}}(e,P,c,t),M=O.duration,N=O.periods,"static"!=k&&O.De||w.Aa(M||1/0),e.u&&!e.B&&e.h.isAutoLowLatencyMode()&&(e.h.enableLowLatencyMode(),e.B=e.h.isLowLatencyMode()),e.B?w.Ue(e.u):e.u&&z("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),w.Sd(b||1),E(F,Nd(e.j,N,P.Ma),2);case 2:if(e.i){e.i.variants=e.j.l,e.i.textStreams=e.j.j.slice(),e.i.imageStreams=e.j.i,e.h.filter(e.i),F.A(3);break}if(e.i={presentationTimeline:w,variants:e.j.l,textStreams:e.j.j.slice(),imageStreams:e.j.i,offlineSessionIds:[],minBufferTime:p||0,sequenceMode:e.g.dash.sequenceMode},!w.df()){F.A(4);break}return B=ar(t,"UTCTiming"),E(F,function(e,t,n){var i,r,a,o,s,l,c,d;return L((function(h){switch(h.g){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=u(i),o=a.next();case 2:if(o.done){h.A(4);break}switch(s=o.value,A(h,5),l=s.scheme,c=s.value,l){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return d=Date.parse(c),h.return(isNaN(d)?0:d-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":z("NTP UTCTiming scheme is not supported");break;default:z("Unrecognized scheme in UTCTiming element",l)}h.A(9);break;case 7:return E(h,fh(e,t,c,"HEAD"),10);case 10:return h.return(h.h);case 8:return E(h,fh(e,t,c,"GET"),11);case 11:return h.return(h.h);case 9:_(h,3);break;case 5:S(h);case 3:o=a.next(),h.A(2);break;case 4:return z("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h.return(0)}}))}(e,c,B),5);case 5:if(U=F.h,!e.h)return F.return();w.Ve(U);case 4:w.Md();case 3:e.h.makeTextStreamsForClosedCaptions(e.i),T(F)}}))}function ch(e,t,n,i){t.$=ph(i.node,null,n),t.T=i,t.$.zb=t.zb,t.$.id||(t.$.id="__shaka_period_"+i.start);var r=ar(i.node,"EventStream");n=t.presentationTimeline.Pa();for(var a=(r=u(r)).next();!a.done;a=r.next())gh(e,i.start,i.duration,a.value,n);if(n=ar(i.node,"AdaptationSet").map((function(n){return function(e,t,n){function i(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.ea=ph(n,t.$,null);var r,a=!1,o=ar(n,"Role"),s=o.map((function(e){return e.getAttribute("value")})).filter($e),l=void 0,d=t.ea.contentType==et;d&&(l="subtitle");for(var h=(o=u(o)).next();!h.done;h=o.next()){var p=(h=h.value).getAttribute("schemeIdUri");if(null==p||"urn:mpeg:dash:role:2011"==p)switch(h=h.getAttribute("value"),h){case"main":a=!0;break;case"caption":case"subtitle":l=h}}p=ar(n,"EssentialProperty"),o=null,h=!1;for(var f=(p=u(p)).next();!f.done;f=p.next()){var g=(f=f.value).getAttribute("schemeIdUri");"http://dashif.org/guidelines/trickmode"==g?o=f.getAttribute("value"):"urn:mpeg:mpegB:cicp:TransferCharacteristics"==g?r=i(parseInt(f.getAttribute("value"),10)):h=!0}for(p=u(p=ar(n,"SupplementalProperty")),f=p.next();!f.done;f=p.next())"urn:mpeg:mpegB:cicp:TransferCharacteristics"==(f=f.value).getAttribute("schemeIdUri")&&(r=i(parseInt(f.getAttribute("value"),10)));p=ar(n,"Accessibility");var m=new Map;for(p=u(p),f=p.next();!f.done;f=p.next())if(g=f.value,f=g.getAttribute("schemeIdUri"),g=g.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==f)if(f=1,null!=g)for(var v=u(g=g.split(";")),y=v.next();!y.done;y=v.next()){var b=y.value,A=y=void 0;b.includes("=")?(y=(b=b.split("="))[0].startsWith("CC")?b[0]:"CC"+b[0],A=b[1]||"und"):(y="CC"+f,2==g.length?f+=2:f++,A=b),m.set(y,rn(A))}else m.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==f)if(f=1,null!=g)for(g=u(g.split(";")),y=g.next();!y.done;y=g.next())y=y.value,b=v=void 0,y.includes("=")?(y=y.split("="),v="svc"+y[0],b=y[1].split(",")[0].split(":").pop()):(v="svc"+f,f++,b=y),m.set(v,rn(b));else m.set("svc1","und");else"urn:mpeg:dash:role:2011"==f&&null!=g&&(s.push(g),"captions"==g&&(l="caption"));if(h)return null;h=ar(n,"ContentProtection");var k=od(h,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),_=rn(n.getAttribute("lang")||"und"),S=n.getAttribute("label");if((h=ar(n,"Label"))&&h.length&&(h=h[0],h.textContent&&(S=h.textContent)),h=ar(n,"Representation"),n=h.map((function(n){return(n=function(e,t,n,i,r,a,o,s,l,u){if(t.I=ph(u,t.ea,null),e.u=Math.min(e.u,t.I.zb),!function(e){var t=e.wc?1:0;return t+=e.ab?1:0,t+=e.xc?1:0,0==t?e.contentType==et||"application"==e.contentType:(1!=t&&(e.wc&&(e.ab=null),e.xc=null),!0)}(t.I))return null;var c=t.T.start;t.bandwidth=dr(u,"bandwidth",mr)||0;var d=t.I.contentType,h=d==et||"application"==d;d="image"==d;try{var p=function(t,n,i){return function(e,t,n,i){var r,a,o,s,l;return L((function(u){return 1==u.g?(r=Ri,a=Bs(t,n,i,e.g.retryParameters),o=e.h.networkingEngine,s=o.request(r,a),ki(e.o,s),E(u,s.promise,2)):(l=u.h,u.return(l.data))}))}(e,t,n,i)};if(t.I.wc)var f=Sd(t,p);else if(t.I.ab)f=xd(t,e.l);else if(t.I.xc)f=Pd(t,p,e.l,!!e.i,e.g.dash.initialSegmentLimit,e.L);else{var g=t.I.wa,m=t.T.duration||0;f={Bb:function(){return Promise.resolve(ks(c,m,g))}}}}catch(e){if((h||d)&&4002==e.code)return null;throw e}p=ar(u,"ContentProtection"),p=function(e,t,n,i){var r=od(e,n,i);if(t.Fe)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.Fe=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new xe(2,4,4008);return r.Be||t.Be}(p,n,e.g.dash.ignoreDrmInfo,e.g.dash.keySystemsByURI),p=new Set(p?[p]:[]);var v=!1;ar(u,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(v=!0);var y,b,A=!1;if(h&&(A=s.includes("forced_subtitle")||s.includes("forced-subtitle")),d&&((u=ar(u,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(y=u.getAttribute("value")),!y))return null;u=t.I.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(u.includes("hvc1.2.4.L153.B0")||u.includes("hev1.2.4.L153.B0"))&&(b="PQ");var k=t.I.id?t.$.id+","+t.I.id:"",_={id:e.G++,originalId:t.I.id,createSegmentIndex:function(){var n,i;return L((function(r){if(1==r.g)return(n=k&&t.Ma&&e.l[k]?e.l[k]:_).segmentIndex?r.A(0):(i=n,E(r,f.Bb(),3));i.segmentIndex=r.h,T(r)}))},closeSegmentIndex:function(){_.segmentIndex&&(_.segmentIndex.release(),_.segmentIndex=null)},segmentIndex:null,mimeType:t.I.mimeType,codecs:t.I.codecs,frameRate:t.I.frameRate,pixelAspectRatio:t.I.pixelAspectRatio,bandwidth:t.bandwidth,width:t.I.width,height:t.I.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:p,language:r,label:a,type:t.ea.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.I.emsgSchemeIdUris,roles:s,forced:A,channelsCount:t.I.ad,audioSamplingRate:t.I.audioSamplingRate,spatialAudio:v,closedCaptions:l,hdr:b,tilesLayout:y,matchedStreams:[]};return k&&t.Ma&&!e.l[k]&&(e.l[k]=_),_}(e,t,k,l,_,S,a,s,m,n))&&(n.hdr=n.hdr||r),n})).filter((function(e){return!!e})),0==n.length){if(o="image"==t.ea.contentType,e.g.dash.ignoreEmptyAdaptationSet||d||o)return null;throw new xe(2,4,4003)}if(!t.ea.contentType||"application"==t.ea.contentType)for(t.ea.contentType=mh(n[0].mimeType,n[0].codecs),d=u(n),p=d.next();!p.done;p=d.next())p.value.type=t.ea.contentType;for(d=u(n),p=d.next();!p.done;p=d.next())for(p=p.value,f=u(k.drmInfos),g=f.next();!g.done;g=f.next())(g=g.value).keyIds=g.keyIds&&p.keyIds?new Set([].concat(c(g.keyIds),c(p.keyIds))):g.keyIds||p.keyIds;return d=h.map((function(e){return e.getAttribute("id")})).filter($e),{id:t.ea.id||"__fake__"+e.G++,contentType:t.ea.contentType,language:_,vh:a,streams:n,drmInfos:k.drmInfos,qe:o,qg:d}}(e,t,n)})).filter($e),t.Ma){for(i=[],a=(r=u(n)).next();!a.done;a=r.next())for(var o=(a=u(a.value.qg)).next();!o.done;o=a.next())i.push(o.value);if(i.length!=new Set(i).size)throw new xe(2,4,4018)}for(i=n.filter((function(e){return!e.qe})),r=(n=u(n=n.filter((function(e){return e.qe})))).next();!r.done;r=n.next()){a=(r=r.value).qe.split(" ");for(var s=(o=u(i)).next();!s.done;s=o.next()){var l=s.value;if(a.includes(l.id)){s={};for(var d=(l=u(l.streams)).next();!d.done;s={Gc:s.Gc},d=l.next())s.Gc=d.value,s.Gc.trickModeVideo=r.streams.find(function(e){return function(t){return Gt(e.Gc.codecs)==Gt(t.codecs)}}(s))}}}if(r=e.g.disableAudio?[]:dh(i,"audio"),o=e.g.disableVideo?[]:dh(i,"video"),a=e.g.disableText?[]:dh(i,et),n=e.g.disableThumbnails?[]:dh(i,"image"),!o.length&&!r.length)throw new xe(2,4,4004);for(i=[],s=(r=u(r)).next();!s.done;s=r.next())i.push.apply(i,c(s.value.streams));for(r=[],s=(o=u(o)).next();!s.done;s=o.next())r.push.apply(r,c(s.value.streams));for(o=[],s=(a=u(a)).next();!s.done;s=a.next())o.push.apply(o,c(s.value.streams));for(a=[],s=(n=u(n)).next();!s.done;s=n.next())a.push.apply(a,c(s.value.streams));return{id:t.$.id,Kc:i,gd:r,textStreams:o,imageStreams:a}}function dh(e,t){return e.filter((function(e){return e.contentType==t}))}function hh(e,t){0>e.F||e.D.N(Math.max(3,e.F-t,j(e.H)))}function ph(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ad:null,audioSamplingRate:null,zb:0},n=n||t.wa;for(var i=ar(e,"BaseURL"),r=i.map(ur),a=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,l=dr(e,"frameRate",br)||t.frameRate,c=e.getAttribute("sar")||t.pixelAspectRatio,d=ar(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice(),p=(d=u(d)).next();!p.done;p=d.next())p=p.value.getAttribute("schemeIdUri"),h.includes(p)||h.push(p);d=function(e){for(var t=(e=u(e)).next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(n,10)))continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(t=parseInt(n,16)))continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}(d=ar(e,"AudioChannelConfiguration"))||t.ad,p=dr(e,"audioSamplingRate",vr)||t.audioSamplingRate,a||(a=mh(o,s));var f=ir(e,"SegmentBase"),g=ir(e,"SegmentTemplate"),m=f&&dr(f,"availabilityTimeOffset",yr)||0,v=g&&dr(g,"availabilityTimeOffset",yr)||0;return i=i&&i.length&&dr(i[0],"availabilityTimeOffset",yr)||0,i=t.zb+i+m+v,{wa:Xe(n,r),wc:f||t.wc,ab:ir(e,"SegmentList")||t.ab,xc:g||t.xc,width:dr(e,"width",vr)||t.width,height:dr(e,"height",vr)||t.height,contentType:a,mimeType:o,codecs:s,frameRate:l,pixelAspectRatio:c,emsgSchemeIdUris:h,id:e.getAttribute("id"),ad:d,audioSamplingRate:p,zb:i}}function fh(e,t,n,i){var r,a,o,s,l,u;return L((function(c){if(1==c.g)return r=Xe(t,[n]),(a=wi(r,e.g.retryParameters)).method=i,o=e.h.networkingEngine.request(4,a),ki(e.o,o),E(c,o.promise,2);if(s=c.h,"HEAD"==i){if(!s.headers||!s.headers.date)return c.return(0);l=s.headers.date}else l=Et(s.data);return u=Date.parse(l),isNaN(u)?c.return(0):c.return(u-Date.now())}))}function gh(e,t,n,i,r){for(var a=i.getAttribute("schemeIdUri")||"",o=i.getAttribute("value")||"",s=dr(i,"timescale",vr)||1,l=(i=u(ar(i,"Event"))).next();!l.done;l=i.next()){var c=dr(l=l.value,"presentationTime",vr)||0,d=dr(l,"duration",vr)||0;d=(c=c/s+t)+d/s,null!=n&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<r||(l={schemeIdUri:a,value:o,startTime:c,endTime:d,id:l.getAttribute("id")||"",eventElement:l},e.h.onTimelineRegionAdded(l))}}function mh(e,t){return qt(jt(e,t))?et:e.split("/")[0]}function vh(e,t,n,i){this.h=e,this.type=t,this.g=n,this.segments=i||null}function yh(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=void 0===i?null:i}function bh(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function Eh(e,t){if(!(e=e.getAttribute(t)))throw new xe(2,4,4023,t);return e.value}function Th(e,t,n){n=void 0===n?[]:n,this.g=t,this.i=e,this.h=n}function Ah(e,t){this.name=e,this.value=t}function kh(e,t){return e.filter((function(e){return e.name==t}))}function _h(e,t){return e.filter((function(e){return Eh(e,"TYPE")==t}))}function Sh(e,t){return(e=kh(e,t)).length?e[0]:null}function wh(e,t){var n=0;return n=void 0===n?0:n,(e=Sh(e,t))?Number(e.value):n}function Ch(e,t){return Xe([e],[t])[0]}function Ih(e){this.h=e,this.g=0}function Dh(e){Rh(e,/[ \t]+/gm)}function Rh(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function xh(e){return e.g==e.h.length?null:(e=Rh(e,/[^ \t\n]*/gm))?e[0]:null}function Lh(){this.g=0}function Ph(e,t,n){var i=(t=(t=Et(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new xe(2,4,4015);t=0;for(var r=!0,a=u(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Oh(e,o),--e.g,Mh.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}for(a=[],r=!0,o=0;o<i.length;o++){var s=i[o],l=i[o+1];if(/^#(?!EXT)/m.test(s)||r)r=!1;else{if(s=Oh(e,s),Nh.includes(s.name)){if(1!=t)throw new xe(2,4,4017);var c=i.splice(o,i.length-o);i=n,r=[],o=[],l=[],s=null;for(var d=(c=u(c)).next();!d.done;d=c.next())d=d.value,/^(#EXT)/.test(d)?(d=Oh(e,d),Mh.includes(d.name)?a.push(d):"EXT-X-MAP"==d.name?s=d:"EXT-X-PART"==d.name?l.push(d):"EXT-X-PRELOAD-HINT"==d.name?"PART"==bh(d,"TYPE")?l.push(d):"MAP"==bh(d,"TYPE")&&(d.name="EXT-X-MAP",s=d):o.push(d)):/^#(?!EXT)/m.test(d)||(d=Ch(i,d.trim()),s&&o.push(s),r.push(new Th(d,o,l)),o=[],l=[]);return l.length&&(s&&o.push(s),r.push(new Th("",o,l))),new vh(n,t,a,r)}a.push(s),"EXT-X-STREAM-INF"==s.name&&(s.g.push(new Ah("URI",l)),r=!0)}}return new vh(n,t,a)}function Oh(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new xe(2,4,4016,t);t=n[1];var i,r=n[2];if(n=[],r){var a;(a=Rh(r=new Ih(r),/^([^,=]+)(?:,|$)/g))&&(i=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Rh(r,o);)n.push(new Ah(a[1],a[2]||a[3])),Dh(r)}return new yh(e,t,n,i)}(i=sh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,i=this;return L((function(r){if(1==r.g)return i.B=t.isLowLatencyMode(),i.m=[e],i.h=t,E(r,lh(i),2);if(n=r.h,i.h&&hh(i,n),!i.h)throw new xe(2,7,7001);return r.return(i.i)}))},i.stop=function(){for(var e=u(Object.values(this.l)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,null!=this.D&&(this.D.stop(),this.D=null),this.o.destroy()},i.update=function(){var e,t=this;return L((function(n){return 1==n.g?(A(n,2),E(n,lh(t),4)):2!=n.g?_(n,0):(e=S(n),t.h&&e?(t.h.onError(e),void T(n)):n.return())}))},i.onExpirationUpdated=function(){},V("shaka.dash.DashParser",sh),Qr.mpd=function(){return new sh},Xr["application/dash+xml"]=function(){return new sh},Xr["video/vnd.mpeg.dash.mpd"]=function(){return new sh},yh.prototype.toString=function(){var e="#"+this.name,t=this.g?this.g.map((function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)})):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},yh.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Mh="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),Nh="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Bh(){}function Uh(e){try{var t=Fh(e);return pi({uri:e,Oe:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return di(e)}}function Fh(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new xe(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new xe(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r=!1;return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:r?Dt(t):kt(t),contentType:i}}function Vh(){var e=this;this.g=this.i=null,this.Fa=1,this.o=new Map,this.u=new Map,this.F=new Map,this.F.set("video",new Map),this.F.set("audio",new Map),this.F.set(et,new Map),this.F.set("image",new Map),this.ua=new Set,this.h=new Map,this.j=null,this.M="",this.W=new Lh,this.O=0,this.B=-1,this.H=1/0,this.Ga=!1,this.m=new ot((function(){!function(e){var t,n;L((function(i){return 1==i.g?e.i?(A(i,2),E(i,e.update(),4)):i.return():2!=i.g?(pp(e)&&(t=e.O,e.m.N(t)),_(i,0)):(n=S(i),e.i?(n.severity=1,e.i.onError(n),e.m.N(.1),void T(i)):i.return())}))}(e)})),this.ia=Tp,this.D=null,this.ca=0,this.J=1/0,this.V=this.da=0,this.G=new Ai,this.L=new Map,this.s=new Map,this.ba=new Map,this.l=!1}function Hh(e,t){return pp(e)?e.F.get(t.type):t.$c}function jh(e,t){var n,i,r,a,o,s,l,u,d,h,p,f,g,m,v,y;return L((function(b){if(1==b.g)return n=t.Jc,i=new Pe(n),e.l&&t.Mc&&Ne(i,new We("_HLS_skip=YES")),E(b,hp(e,i.toString()),2);if(r=b.h,!t.stream.segmentIndex)return b.return();if(1!=(a=Ph(e.W,r.data,r.uri)).type)throw new xe(2,4,4017);o=kh(a.g,"EXT-X-DEFINE"),s=Wh(e,o),l=t.stream,u=Hh(e,t),d=tp(a,l.mimeType),h=d.keyIds,p=d.drmInfos,f=function(e,t){return e.size===t.size&&[].concat(c(e)).every((function(e){return t.has(e)}))},f(l.keyIds,h)||(l.keyIds=h,l.drmInfos=p,e.i.newDrmInfo(l)),g=lp(e,a,l.type,u,s),l.segmentIndex.Hb(g,e.j.Pa()),g.length&&(m=wh(a.g,"EXT-X-MEDIA-SEQUENCE"),v=u.get(m),l.segmentIndex.eb(v)),y=g[g.length-1],Sh(a.g,"EXT-X-ENDLIST")&&(t.mc=!0,t.Ya=y.endTime),T(b)}))}function Kh(e,t,n){t.Ya+=n;for(var i=(t=u(e=Hh(e,t))).next();!i.done;i=t.next()){var r=u(i.value);i=r.next().value,r=r.next().value,e.set(i,r+n)}}function Gh(e){if(pp(e)){if(e.O=e.J,e.ia==kp){var t=Xh(e);e.g.hls.useSafariBehaviorForLive&&(t=e.j.m),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.j.me(t)}}else e.j.Aa(Xh(e));e.j.Md()}function Wh(e,t){for(var n=new Map,i=(t=u(t)).next();!i.done;i=t.next()){var r=i.value;i=bh(r,"NAME");var a=bh(r,"VALUE");r=bh(r,"IMPORT"),i&&a&&n.set(i,a),r&&(i=e.o.get(r))&&n.set(r,i)}return n}function zh(e,t){var n=[];e.g.disableVideo||n.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||n.push(e.g.hls.defaultAudioCodec),n=bh(t,"CODECS",n.join(",")).split(/\s*,\s*/),e=new Set,t=[];for(var i=(n=u(n)).next();!i.done;i=n.next()){var r=zt(i=i.value)[0];e.has(r)||(t.push(i),e.add(r))}return t}function Yh(e){return rn(e=bh(e,"LANGUAGE")||"und")}function qh(e,t){var n=Eh(t,"GROUP-ID"),i="",r=Eh(t,"TYPE").toLowerCase();"subtitles"==r&&(r=et);var a=r;if(a!=et&&n&&e.s.has(n)&&(i=e.s.get(n)),r=up(Eh(t,"URI"),e.o),e.h.has(r))return e.h.get(r);var o=Yh(t),s=bh(t,"NAME"),l="YES"==bh(t,"DEFAULT"),u="audio"==a&&(u=bh(t,"CHANNELS"))?parseInt(u.split("/")[0],10):null,c="audio"==a&&(!!(c=bh(t,"CHANNELS"))&&c.includes("/JOC"));return i=$h(e,r,i,a,o,l,s,u,null,bh(t,"CHARACTERISTICS"),t="YES"==bh(t,"FORCED"),c),e.u.has(n)?e.u.get(n).push(i):e.u.set(n,[i]),e.h.has(r)?e.h.get(r):(e.h.set(r,i),i)}function $h(e,t,n,i,r,a,o,s,l,c,d,h){function p(p){var f,v,y,b,A,k,_,S,w,C,I,D,R;return L((function(x){if(1==x.g)return E(x,hp(e,m.Jc),2);if(3!=x.g)return f=x.h,p.aborted?x.return():(v=f.uri,y=Ph(e.W,f.data,v),b=pp(e),E(x,Jh(e,y,t,v,n,i,r,a,o,s,l,c,d,h),3));if(A=x.h,p.aborted)return x.return();if(k=A.stream,pp(e)&&!b&&rp(e),m.Jc=v,m.Ya=A.Ya,m.Mc=A.Mc,m.mc=A.mc,m.$c=A.$c,m.Ld=!0,g.segmentIndex=k.segmentIndex,g.encrypted=k.encrypted,g.drmInfos=k.drmInfos,g.keyIds=k.keyIds,g.mimeType=k.mimeType,es.includes(g.mimeType)&&(g.codecs=""),g.drmInfos.length&&e.i.newDrmInfo(g),i==(_=tt).va||i==_.Hc)for(S=u(e.h.values()),w=S.next();!w.done;w=S.next())(C=w.value).Ld||C.type!=i||(C.stream.mimeType=k.mimeType,es.includes(C.stream.mimeType)&&(C.stream.codecs=""));(function(e){if(!e.D)return!1;for(var t=[],n=[],i=(e=u(e.D.variants)).next();!i.done;i=e.next())(i=i.value).video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some((function(e){return e.segmentIndex}))||0<n.length&&!n.some((function(e){return e.segmentIndex})))})(e)&&(e.Ga?Zh(e,[m]):(e.Ga=!0,I=Array.from(e.h.values()),D=I.filter((function(e){return e.stream.segmentIndex})),Zh(e,D),Gh(e),0<(R=e.O)&&e.m.N(R))),T(x)}))}var f=Ch(e.M,t),g=ep(e,n,i,r,a,o,s,l,c,d,h);es.includes(g.mimeType)&&(g.codecs="");var m={stream:g,type:i,Ac:t,Jc:f,Ya:0,$c:new Map,Mc:!1,mc:!1,Cd:-1,Ld:!1},v=null,y=new AbortController;return g.createSegmentIndex=function(){return v||(y=new AbortController,v=new Promise((function(e){e(p(y.signal))})))},g.closeSegmentIndex=function(){v&&!g.segmentIndex&&y.abort(),g.segmentIndex&&(g.segmentIndex.release(),g.segmentIndex=null),v=null},m}function Xh(e){for(var t=1/0,n=(e=u(e.h.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&(t=Math.min(t,n.Ya));return t}function Qh(e,t){for(var n=[],i=(t=u(t)).next();!i.done;i=t.next())(i=i.value).segmentIndex&&As(i.segmentIndex,(function(e){n.push(e)}));e.j.Ib(n)}function Zh(e,t){if(!pp(e))for(var n=Xh(e),i=u(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Wa(0,n);for(r=(n=u(t)).next();!r.done;r=n.next())r=r.value.stream,es.includes(r.mimeType)&&(r.codecs="");Qh(e,t.map((function(e){return e.stream}))),e.g.hls.ignoreManifestProgramDateTime?function(e,t){for(var n=-1==e.B,i=u(t),r=i.next();!r.done;r=i.next()){var a=(r=r.value).stream.segmentIndex,o=Hh(e,r);if(a=a.g[0]||null)for(var s=(o=u(o)).next();!s.done;s=o.next()){var l=(s=u(s.value)).next().value;if(s.next().value==a.startTime){n&&(e.B=Math.max(e.B,l)),r.Cd=l;break}}}if(!(0>e.B))for(r=(t=u(t)).next();!r.done;r=t.next())(i=(n=r.value).stream.segmentIndex)&&(i.g.splice(0,e.B-n.Cd),(i=i.g[0]||null)&&(i=-i.startTime,n.stream.segmentIndex.offset(i),Kh(e,n,i)))}(e,t):function(e,t){if(1/0==e.H)for(var n=(t=u(t)).next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;null!=i&&null!=i.g&&(e.H=Math.min(e.H,i.g))}if(1/0!=(t=e.H))for(n=(i=u(e.h.values())).next();!n.done;n=i.next()){var r=(n=n.value).stream.segmentIndex;if(null!=r){var a=r.g[0]||null;if(null==a.g)W("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.Ac,"Expect AV sync issues!");else for(Kh(e,n,a.g-t-a.startTime),r=(n=u(r)).next();!r.done;r=n.next())r.value.oe(t)}}}(e,t)}function Jh(e,t,n,i,r,a,o,s,l,u,c,d,h,p,f){var g,m,v,y,b,T,A,k,_,S,w,C,I,D,R;return L((function(x){if(1==x.g){if(1!=t.type)throw new xe(2,4,4017);return g=kh(t.g,"EXT-X-DEFINE"),m=Wh(e,g),ip(e,t),f?x.A(2):E(x,function(e,t,n,i,r){var a,o,s,l,u,c,d,h,p,f;return L((function(g){return 1==g.g?(a=Ri,o=Math.trunc((i.segments.length-1)/2),s=up(i.segments[o].i,r),l=new Pe(s),u=l.qa.split(".").pop(),c=bp[t],(d=c[u])||(d=mp[u])||(d=cp(t,n))?g.return(d):((h=wi([s],e.g.retryParameters)).method="HEAD",E(g,gp(e,h,a),2))):(p=g.h,(f=p.headers["content-type"])?g.return(f.split(";")[0]):g.return(dp(t)))}))}(e,a,r,t,m),3)}if(2!=x.g&&(f=x.h),v=tp(t,f),y=v.drmInfos,b=v.keyIds,T=v.encrypted,A=v.kf,T&&!y.length&&!A)throw new xe(2,4,4026);return k=pp(e)?e.F.get(a):new Map,_=e.l,S=lp(e,t,a,k,m),_!=e.l&&ip(e,t),w=S[S.length-1].endTime,C=new Ts(S),D=!!(I=Sh(t.g,"EXT-X-SERVER-CONTROL"))&&null!=I.getAttribute("CAN-SKIP-UNTIL"),(R=ep(e,r,a,o,s,l,u,c,d,h,p)).segmentIndex=C,R.encrypted=T,R.drmInfos=y,R.keyIds=b,R.mimeType=f,x.return({stream:R,type:a,Ac:n,Jc:i,Ya:w,Mc:D,mc:!1,Cd:-1,$c:k,Ld:!1})}))}function ep(e,t,n,i,r,a,o,s,l,u,c){var d=cp(n,t)||dp(n);return{id:e.Fa++,originalId:a,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:d,codecs:t,kind:n==et?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,label:a,type:n,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:l?l.split(","):[],forced:u,channelsCount:o,audioSamplingRate:null,spatialAudio:c,closedCaptions:s,hdr:void 0,tilesLayout:void 0}}function tp(e,t){var n=[];if(e.segments)for(var i=(e=u(e.segments)).next();!i.done;i=e.next())i=kh(i.value.g,"EXT-X-KEY"),n.push.apply(n,c(i));i=e=!1;for(var r=[],a=new Set,o=(n=u(n)).next();!o.done;o=n.next()){var s=Eh(o=o.value,"METHOD");if("NONE"!=s)if(e=!0,"AES-128"==s)i=!0;else if(s=bh(o,"KEYFORMAT")||"identity",o=(s=Ep[s])?s(o,t):null){if(o.keyIds)for(var l=(s=u(o.keyIds)).next();!l.done;l=s.next())a.add(l.value);r.push(o)}}return{drmInfos:r,keyIds:a,encrypted:e,kf:i}}function np(t,n,i){if(!e.crypto||!e.crypto.subtle)throw z("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new xe(2,4,4042);var r=0,a=bh(n,"IV","");if(a){var o=Rt(a.substr(2));if(16!=o.byteLength)throw new xe(2,4,4043)}else r=wh(i.g,"EXT-X-MEDIA-SEQUENCE");var s=wi([n=Ch(i.h,Eh(n,"URI"))],t.g.retryParameters),l={method:"AES-128",iv:o,firstMediaSequenceNumber:r,fetchKey:function(){var n,i,r;return L((function(a){if(1==a.g)return E(a,gp(t,s,6),2);if(3!=a.g){if(!(n=a.h).data||16!=n.data.byteLength)throw new xe(2,4,4044);return i={name:"AES-CBC"},r=l,E(a,e.crypto.subtle.importKey("raw",n.data,i,!0,["decrypt"]),3)}r.cryptoKey=a.h,l.fetchKey=void 0,T(a)}))}};return l}function ip(e,t){var n=Sh(t.g,"EXT-X-PLAYLIST-TYPE"),i=Sh(t.g,"EXT-X-ENDLIST");if(i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i)fp(e,Tp);else{if(fp(e,n?kp:Ap),!(i=Sh(t.g,"EXT-X-TARGETDURATION")))throw new xe(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),n=Sh(t.g,"EXT-X-PART-INF"),e.l&&n?(e.da=Number(Eh(n,"PART-TARGET")),e.J=Math.min(e.da,e.J),t=Sh(t.g,"EXT-X-SERVER-CONTROL"),e.V=t?Number(Eh(t,"PART-HOLD-BACK")):0):e.J=Math.min(i,e.J),e.ca=Math.max(i,e.ca)}}function rp(e){var t=e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:e.V?e.V:e.ca*e.g.hls.liveSegmentsDelay;e.j.Xe(0),e.j.We(t),e.j.yc(!1)}function ap(e,t,n,i){return(n=Sh(n,"EXT-X-MAP"))?(t=[i=up(Ch(t,Eh(n,"URI")),i),bh(n,"BYTERANGE","")].join("-"),e.ba.has(t)||(n=function(e,t){var n=0,i=null;(t=bh(t,"BYTERANGE"))&&(n=t.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1);return new fo((function(){return[e]}),n,i)}(i,n),e.ba.set(t,n)),e.ba.get(t)):null}function op(e,t,n,i,r,a,o,s,l){var c=i.g,d=up(i.i,a),h=Sh(c,"EXTINF"),p=a=0,f=null;i.h.length&&!e.l&&z("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var g=null;if(!e.g.hls.ignoreManifestProgramDateTime){var m=Sh(c,"EXT-X-PROGRAM-DATE-TIME");m&&m.value&&(g=hr(m.value))}if(m=mo,Sh(c,"EXT-X-GAP")&&(m=2),!h){if(0==i.h.length)throw new xe(2,4,4024,"EXTINF");if(!e.l)return null}var v=[];if(e.l)for(var y={},b=0;b<i.h.length;y={pd:y.pd},b++){var E=i.h[b],T=0==b?n:v[v.length-1],A=0==b?r:T.endTime,k=Number(bh(E,"DURATION"))||e.da;if(k){k=A+k;var _=0,S=null;"EXT-X-PRELOAD-HINT"==E.name?_=(_=bh(E,"BYTERANGE-START"))?Number(_):0:(_=(S=u(sp(T,_=bh(E,"BYTERANGE")))).next().value,S=S.next().value),(T=bh(E,"URI"))&&(y.pd=Ch(o,T),T=mo,"YES"==bh(E,"GAP")&&(T=2),v.push(new go(A,k,function(e){return function(){return[e.pd]}}(y),_,S,t,0,0,1/0,[],"",null,null,T)))}}return a=h?r+Number(h.value.split(",")[0]):v[v.length-1].endTime,(e=Sh(c,"EXT-X-BYTERANGE"))?(p=(f=u(sp(n,e.value))).next().value,f=f.next().value):v.length&&(p=v[0].Ba,f=v[v.length-1].ka),n="",e=null,"image"==s&&(n="1x1",s=Sh(c,"EXT-X-TILES"))&&(n=Eh(s,"LAYOUT"),(s=bh(s,"DURATION"))&&(e=Number(s))),new go(r,a,(function(){return d.length?[d]:[]}),p,f,t,0,0,1/0,v,n,e,g,m,l)}function sp(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),i=(n=n[1]?Number(n[1]):e.ka+1)+t-1),[n,i]}function lp(e,t,n,i,r){var a=t.segments,o=void 0,s=wh(t.g,"EXT-X-DISCONTINUITY-SEQUENCE"),l=wh(t.g,"EXT-X-MEDIA-SEQUENCE"),c=Sh(t.g,"EXT-X-SKIP"),d=l+(c=c?Number(bh(c,"SKIPPED-SEGMENTS")):0),h=0;pp(e)&&i.has(d)&&(h=i.get(d));for(var p=[],f=null,g=0;g<a.length;g++){var m=a[g],v=0==g?h:f.endTime;d=l+c+g,Sh(m.g,"EXT-X-DISCONTINUITY")&&s++;for(var y=u(m.g),b=y.next();!b.done;b=y.next())"EXT-X-KEY"==(b=b.value).name&&(o="AES-128"==Eh(b,"METHOD")?np(e,b,t):void 0);i.set(d,v),y=ap(e,t.h,m.g,r),!e.l&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.l=e.i.isLowLatencyMode()),(f=m=op(e,y,f,m,v,r,t.h,n,o))&&(m.m=s,e.g.hls.ignoreManifestProgramDateTime&&null!=e.B&&d<e.B||p.push(m))}if(t=p.some((function(e){return null!=e.g})))for(n={},i=0;i<p.length;n={Qb:n.Qb,Pb:n.Pb,Bc:n.Bc,Ta:n.Ta,Ob:n.Ob},i++)if(n.Ta=p[i],null==n.Ta.g)for(n.Pb=0,n.Qb=i,r=function(e){return function(){var t=p[e.Qb];if(t){if(null!=t.g)return t.g+e.Pb;e.Pb-=t.endTime-t.startTime,e.Qb+=1}return null}}(n),n.Ob=0,n.Bc=i,a=function(e){return function(){var t=p[e.Bc];if(t){if(t!=e.Ta&&(e.Ob+=t.endTime-t.startTime),null!=t.g)return t.g+e.Ob;--e.Bc}return null}}(n);null==n.Ta.g;)n.Ta.g=a(),null==n.Ta.g&&(n.Ta.g=r());if(t)for(i=(n=u(p)).next();!i.done;i=n.next())for(i=(r=i.value).g,a=(r=u(r.i)).next();!a.done;a=r.next())(a=a.value).g=i,i+=a.endTime-a.startTime;if(e=e.H,t&&1/0!=e)for(i=(t=u(p)).next();!i.done;i=t.next())i.value.oe(e);return p}function up(e,t){var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var i=(n=u(n)).next();!i.done;i=n.next()){var r=(i=i.value).slice(2,i.length-1),a=t.get(r);if(!a)throw new xe(2,4,4039,r);e=e.replace(i,a)}return e}function cp(e,t){if(e==et){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":null:"image/jpeg"}function dp(e){return e==et?"text/vtt":bp[e].mp4}function hp(e,t){return t=wi([t],e.g.retryParameters),e.i.modifyManifestRequest(t,{format:"h"}),gp(e,t,0)}function pp(e){return e.ia!=Tp}function fp(e,t){e.ia=t,e.j&&e.j.yc(!pp(e)),pp(e)||e.m.stop()}function gp(e,t,n){if(!e.G)throw new xe(2,7,7001);return t=e.i.networkingEngine.request(n,t),ki(e.G,t),t.promise}V("shaka.net.DataUriPlugin",Bh),Bh.parse=Uh,Si("data",Uh),(i=Vh.prototype).configure=function(e){this.g=e},i.start=function(e,t){var n,i=this;return L((function(r){return 1==r.g?(i.i=t,i.l=t.isLowLatencyMode(),E(r,hp(i,e),2)):3!=r.g?(n=r.h,i.M=n.uri,E(r,function(e,t,n){var i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,k,_,w,C,I,D,R,x,P,O,M,N,B,U,F;return L((function(V){switch(V.g){case 1:i=Ph(e.W,t,e.M);for(var H=u(kh(i.g,"EXT-X-DEFINE")),j=H.next();!j.done;j=H.next()){var K=j.value;j=bh(K,"NAME"),K=bh(K,"VALUE"),j&&K&&(e.o.has(j)||e.o.set(j,K))}if(r=[],a=[],o=[],1==i.type)return w=e.g.hls.mediaPlaylistFullMimeType,i.segments.length&&(C=new Pe(i.segments[0].i),I=C.qa.split(".").pop(),(D=mp[I])?w=D:"ts"!==I&&"mp4"!==I&&(vp[I]?(D=vp[I],R=e.g.hls.defaultAudioCodec,w=D+'; codecs="'+R+'"'):yp[I]&&(D=yp[I],x=e.g.hls.defaultVideoCodec,w=D+'; codecs="'+x+'"'))),P=w.split(";")[0],O=P.split("/")[0],M=Wt(w),N=new Map,E(V,Jh(e,i,n,n,M,O,"",!0,"Media Playlist",null,N,null,!1,!1,P),5);for(s=kh(i.g,"EXT-X-MEDIA"),l=kh(i.g,"EXT-X-STREAM-INF"),c=kh(i.g,"EXT-X-IMAGE-STREAM-INF"),d=kh(i.g,"EXT-X-SESSION-KEY"),j=(H=u(l)).next();!j.done;j=H.next()){var G=j.value;K=bh(G,"AUDIO"),j=bh(G,"VIDEO");var W=bh(G,"SUBTITLES");if(G=zh(e,G),W){var z=Je(et,G);e.s.set(W,z),te(G,z)}K&&((W=Je("audio",G))||(W=e.g.hls.defaultAudioCodec),e.s.set(K,W)),j&&((K=Je("video",G))||(K=e.g.hls.defaultVideoCodec),e.s.set(j,K))}for(h=kh(i.g,"EXT-X-SESSION-DATA"),p=u(h),f=p.next();!f.done;f=p.next())g=f.value,m=bh(g,"DATA-ID"),v=bh(g,"URI"),y=bh(g,"LANGUAGE"),b=bh(g,"VALUE"),k=(new Map).set("id",m),v&&k.set("uri",Ch(e.M,v)),y&&k.set("language",y),b&&k.set("value",b),_=new mi("sessiondata",k),e.i&&e.i.onEvent(_);for(function(e,t){t=t.filter((function(e){var t=bh(e,"URI")||"";return"SUBTITLES"!=bh(e,"TYPE")&&""!=t}));for(var n=(t=u(t)).next();!n.done;n=t.next())qh(e,n.value)}(e,s),j=(H=u(H=_h(s,"CLOSED-CAPTIONS"))).next();!j.done;j=H.next())j=Yh(W=j.value),K=Eh(W,"GROUP-ID"),W=Eh(W,"INSTREAM-ID"),e.L.get(K)||e.L.set(K,new Map),e.L.get(K).set(W,j);return r=function(e,t,n){var i=[],r=new Set;if(0<n.length)for(var a=(n=u(n)).next();!a.done;a=n.next()){var o=Eh(a=a.value,"METHOD");if("NONE"!=o&&"AES-128"!=o&&(o=bh(a,"KEYFORMAT")||"identity",a=(o=Ep[o])?o(a,""):null)){if(a.keyIds)for(var s=(o=u(a.keyIds)).next();!s.done;s=o.next())r.add(s.value);i.push(a)}}return t=t.map((function(t){var n=bh(t,"FRAME-RATE"),a=Number(bh(t,"AVERAGE-BANDWIDTH"))||Number(Eh(t,"BANDWIDTH")),o=bh(t,"RESOLUTION"),s=(o=u(o?o.split("x"):[null,null])).next().value,l=o.next().value,c=bh(t,"VIDEO-RANGE");t=function(e,t){var n=zh(e,t),i=bh(t,"AUDIO"),r=bh(t,"VIDEO"),a=i||r;a=a&&e.u.has(a)?e.u.get(a):[],i={audio:i?a:[],video:r?a:[]},r=!1;var o=Eh(t,"URI"),s=i.audio.find((function(e){return e&&e.Ac==o})),l=Je("video",n),u=Je("audio",n);return u&&!l?a="audio":!a.length&&u&&l?(a="video",n=[[l,u].join()]):i.audio.length&&s?(a="audio",r=!0):a=i.video.length&&!i.audio.length?"audio":"video",r||(e=function(e,t,n,i){var r=up(Eh(t,"URI"),e.o);return e.h.has(r)?e.h.get(r):(t=bh(t,"CLOSED-CAPTIONS"),t="video"==i&&t&&"NONE"!=t?e.L.get(t):null,n=Ze(i,n),i=$h(e,r,n,i,"und",!1,null,null,t,null,!1,!1),e.h.has(r)?e.h.get(r):(e.h.set(r,i),i))}(e,t,n,a),i[e.stream.type]=[e]),i}(e,t),o=t.audio;for(var d=u(t=t.video),h=d.next();!h.done;h=d.next())(h=h.value.stream)&&(h.width=Number(s)||void 0,h.height=Number(l)||void 0,h.frameRate=Number(n)||void 0,h.hdr=c||void 0);for(n=e.g.disableAudio,o.length&&!n||(o=[null]),n=e.g.disableVideo,t.length&&!n||(t=[null]),n=[],s=(o=u(o)).next();!s.done;s=o.next())for(s=s.value,c=(l=u(t)).next();!c.done;c=l.next()){var p=c.value;(c=s?s.stream:null)&&(c.drmInfos=i,c.keyIds=r),(d=p?p.stream:null)&&(d.drmInfos=i,d.keyIds=r),h=s?s.stream.drmInfos:null;var f=p?p.stream.drmInfos:null;p=(p?p.Ac:"")+" - "+(s?s.Ac:""),c&&d&&h.length&&f.length&&!(0<Br(h,f).length)||e.ua.has(p)||(c={id:e.Fa++,language:c?c.language:"und",primary:!!c&&c.primary||!!d&&d.primary,audio:c,video:d,bandwidth:a,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n.push(c),e.ua.add(p))}return n})).reduce(Ye,[]),t=t.filter((function(e){return null!=e}))}(e,l,d),a=function(e,t){var n=_h(t,"SUBTITLES");t=n.map((function(t){if(e.g.disableText)return null;try{return qh(e,t).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}}));for(var i=(n=u(n)).next();!i.done;i=n.next()){var r=Eh(i.value,"GROUP-ID");if((i=e.s.get(r))&&(r=e.u.get(r)))for(var a=(r=u(r)).next();!a.done;a=r.next())(a=a.value).stream.codecs=i,a.stream.mimeType=cp(et,i)||dp(et)}return t.filter((function(e){return e}))}(e,s),E(V,function(e,t){var n,i;return L((function(r){return 1==r.g?(n=t.map((function(t){var n,i;return L((function(r){if(1==r.g)return e.g.disableThumbnails?r.return(null):(A(r,2),E(r,function(e,t){var n,i,r,a,o,s,l,u,c,d;return L((function(h){return 1==h.g?(n=up(Eh(t,"URI"),e.o),i=bh(t,"CODECS","jpeg")||"",e.h.has(n)?h.return(e.h.get(n)):(r=Yh(t),a=bh(t,"NAME"),o=bh(t,"CHARACTERISTICS"),s=$h(e,n,i,"image",r,!1,a,null,null,o,!1,!1),e.h.has(n)?h.return(e.h.get(n)):(l=bh(t,"RESOLUTION"))?E(h,s.stream.createSegmentIndex(),3):h.A(2))):(2!=h.g&&(u=s.stream.segmentIndex.get(0),c=u.tilesLayout)&&(s.stream.width=Number(l.split("x")[0])*Number(c.split("x")[0]),s.stream.height=Number(l.split("x")[1])*Number(c.split("x")[1])),(d=bh(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(d)),e.h.set(n,s),h.return(s))}))}(e,t),4));if(2!=r.g)return n=r.h,r.return(n.stream);if(i=S(r),e.g.hls.ignoreImageStreamFailures)return r.return(null);throw i}))})),E(r,Promise.all(n),2)):(i=r.h,r.return(i.filter((function(e){return e}))))}))}(e,c),4);case 4:o=V.h,V.A(3);break;case 5:B=V.h,e.h.set(n,B),r.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:"audio"==O?B.stream:null,video:"video"==O?B.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new xe(2,7,7001);e.j=new ts(null,0),e.j.yc(!0),1==i.type&&(pp(e)&&(rp(e),U=e.O,e.m.N(U)),F=Array.from(e.h.values()),Zh(e,F),Gh(e)),e.D={presentationTimeline:e.j,variants:r,textStreams:a,imageStreams:o,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},e.i.makeTextStreamsForClosedCaptions(e.D),T(V)}}))}(i,n.data,e),3)):r.return(i.D)}))},i.stop=function(){this.m&&(this.m.stop(),this.m=null);var e=[];return this.G&&(e.push(this.G.destroy()),this.G=null),this.g=this.i=null,this.ua.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(e)},i.update=function(){var e,t,n,i,r,a,o,s,l=this;return L((function(d){if(1==d.g){if(!pp(l))return d.return();for(e=[],t=Array.from(l.h.values()),n=t.filter((function(e){return e.stream.segmentIndex})),i=u(n),r=i.next();!r.done;r=i.next())a=r.value,e.push(jh(l,a));return E(d,Promise.all(e),2)}Qh(l,n.map((function(e){return e.stream}))),o=n.some((function(e){return 0==e.mc})),n.length&&!o&&(fp(l,_p.ff),s=t.map((function(e){return e.Ya})),l.j.Aa(Math.min.apply(Math,c(s))),l.i.updateDuration()),T(d)}))},i.onExpirationUpdated=function(){},V("shaka.hls.HlsParser",Vh);var mp={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},vp={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t"},yp={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},bp={audio:vp,video:yp,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Ep={"com.apple.streamingkeydelivery":function(t,n){if("video/mp2t"==n)throw new xe(2,4,4040);if(e.shakaMediaKeysPolyfill)throw new xe(2,4,4041);return Qe("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=Eh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=Qe("com.widevine.alpha",[{initDataType:"cenc",initData:t=Ie((t=Fh(t=Eh(e,"URI"))).data)}]),(e=bh(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=Eh(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?Qe("com.microsoft.playready",[{initDataType:"cenc",initData:e=nr(e=Ie((e=Fh(e=Eh(e,"URI"))).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]):null},identity:function(e){return e=Eh(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?Qe("org.w3.clearkey",null):null}},Tp="VOD",Ap="EVENT",kp="LIVE",_p={ff:Tp,Pg:Ap,Ug:kp};function Sp(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,Oe:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=At(t)}catch(e){}throw new xe(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function wp(){}function Cp(e,t,n,i,r){var a=new Pp;Fi(t.headers).forEach((function(e,t){a.append(t,e)}));var o=new xp,s={ye:!1,bf:!1};if(e=function(e,t,n,i,r,a,o){var s,l,u,c,d,h,p,f,g,m,v,y,b;return L((function(k){switch(k.g){case 1:return s=Rp,l=Lp,h=d=0,p=Date.now(),A(k,2),E(k,s(e,n),4);case 4:return u=k.h,a(Ip(u.headers)),f=u.clone().body.getReader(),m=(g=u.headers.get("Content-Length"))?parseInt(g,10):0,v=function(e){function t(){var n,i;return L((function(a){switch(a.g){case 1:return A(a,2),E(a,f.read(),4);case 4:n=a.h,_(a,3);break;case 2:return S(a),a.return();case 3:if(n.done){a.A(5);break}if(d+=n.value.byteLength,!o){a.A(5);break}return E(a,o(n.value),5);case 5:(100<(i=Date.now())-p||n.done)&&(r(i-p,d-h,m-d),h=d,p=i),n.done?e.close():(e.enqueue(n.value),t()),T(a)}}))}t()},new l({start:v}),E(k,u.arrayBuffer(),5);case 5:c=k.h,_(k,3);break;case 2:if(y=S(k),i.ye)throw new xe(1,1,7001,e,t);if(i.bf)throw new xe(1,1,1003,e,t);throw new xe(1,1,1002,e,y,t);case 3:return b=Ip(u.headers),k.return(Sp(b,c,u.status,e,u.url,t))}}))}(e,n,{body:t.body||void 0,headers:a,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,i,r,t.streamDataCallback),e=new ci(e,(function(){return s.ye=!0,o.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var l=new ot((function(){s.bf=!0,o.abort()}));l.N(t/1e3),e.finally((function(){l.stop()}))}return e}function Ip(e){var t={};return e.forEach((function(e,n){t[n.trim()]=e})),t}function Dp(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!e.fetch||!e.AbortController)}gt("Tizen 3")||gt("Tizen 2")||dt()||(Qr.m3u8=function(){return new Vh},Xr["application/x-mpegurl"]=function(){return new Vh},Xr["application/vnd.apple.mpegurl"]=function(){return new Vh}),V("shaka.net.HttpFetchPlugin",wp),wp.isSupported=Dp,wp.parse=Cp;var Rp=e.fetch,xp=e.AbortController,Lp=e.ReadableStream,Pp=e.Headers;function Op(){}function Mp(e,t,n,i,r){var a=new Bp,o=Date.now(),s=0,l=new Promise((function(l,u){a.open(t.method,e,!0),a.responseType="arraybuffer",a.timeout=t.retryParameters.timeout,a.withCredentials=t.allowCrossSiteCredentials,a.onabort=function(){u(new xe(1,1,7001,e,n))};var c=!1;for(var d in a.onreadystatechange=function(){if(2==a.readyState&&!c){var e=Np(a);r(e),c=!0}},a.onload=function(){var t=Np(a),i=a.response;try{var r=Sp(t,i,a.status,e,a.responseURL,n);l(r)}catch(e){u(e)}},a.onerror=function(t){u(new xe(1,1,1002,e,t,n))},a.ontimeout=function(){u(new xe(1,1,1003,e,n))},a.onprogress=function(e){var t=Date.now();(100<t-o||e.lengthComputable&&e.loaded==e.total)&&(i(t-o,e.loaded-s,e.total-e.loaded),s=e.loaded,o=t)},t.headers)a.setRequestHeader(d.toLowerCase(),t.headers[d]);a.send(t.body)}));return new ci(l,(function(){return a.abort(),Promise.resolve()}))}function Np(e){var t=e.getAllResponseHeaders().trim().split("\r\n");e={};for(var n=(t=u(t)).next();!n.done;n=t.next())e[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");return e}Dp()&&(Si("http",Cp,2,!0),Si("https",Cp,2,!0),Si("blob",Cp,2,!0)),V("shaka.net.HttpXHRPlugin",Op),Op.parse=Mp;var Bp=e.XMLHttpRequest;function Up(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function Fp(e){return e.ya().map((function(e){return"{"+encodeURI(e)+"}"})).join("")+":"+e.Ba+":"+e.ka}function Vp(e,t){return Bs(e.g.ya(),e.g.Ba,e.g.ka,t.streaming.retryParameters)}function Hp(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function jp(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Kp(e){var t=this;this.o=e,this.j=new Map,this.i=new Pi((function(){return Gp(t).catch((function(){}))})),this.h=[],this.m=function(){},this.l=function(){},this.g=new Hp}function Gp(e){var t=e.h.map((function(e){return e()}));return e.h=[],Promise.all(t)}function Wp(e,t,n,i,r,a){Oi(e.i);var o=(e.j.get(t)||Promise.resolve()).then((function(){var t,o,s,l,u,c,d;return L((function(h){if(1==h.g)return E(h,function(e,t){var n,i,r,a;return L((function(o){return 1==o.g?(n=Ri,i=e.o.request(n,t),r=function(){return i.abort()},e.h.push(r),E(o,i.promise,2)):(a=o.h,te(e.h,r),o.return(a.data))}))}(e,n),2);if(t=h.h,e.i.g)throw new xe(2,9,7001);if(r)for(l in o=Ie(t),(s=new tr(o)).data)u=Number(l),c=s.data[u],d=s.g[u],e.l(c,d);e.g.close(i,t.byteLength);var p=e.g;return e.m(0==p.i?0:p.j/p.i,e.g.h),h.return(a(t))}))}));e.j.set(t,o)}function zp(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new it,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Yp(e,t){return new Promise((function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var e;return L((function(i){if(1==i.g)return null==r.result?(n(),i.return()):(e=r.result,E(i,t(e.key,e.value,e),2));e.continue(),T(i)}))}}))}function qp(e){this.h=e,this.g=[]}function $p(e,t){return Xp(e,t,"readwrite")}function Xp(e,t,n){var i=new zp(n=e.h.transaction([t],n),t);return e.g.push(i),i.promise().then((function(){te(e.g,i)}),(function(){te(e.g,i)})),i}function Qp(e,t,n){this.h=new qp(e),this.i=t,this.g=n}function Zp(e){return Promise.reject(new xe(2,9,9011,"Cannot add new value to "+e))}function Jp(e,t,n,i){t=(e=$p(e.h,t)).store();for(var r={},a=(n=u(n)).next();!a.done;r={Ec:r.Ec},a=n.next())r.Ec=a.value,t.delete(r.Ec).onsuccess=function(e){return function(){return i(e.Ec)}}(r);return e.promise()}function ef(e,t,n){var i,r,a,o,s,l,c;return L((function(d){if(1==d.g){for(i=Xp(e.h,t,"readonly"),r=i.store(),a={},o=[],s={},l=u(n),c=l.next();!c.done;s={Vb:s.Vb,Tb:s.Tb},c=l.next())s.Tb=c.value,s.Vb=r.get(s.Tb),s.Vb.onsuccess=function(e){return function(){null==e.Vb.result&&o.push(e.Tb),a[e.Tb]=e.Vb.result}}(s);return E(d,i.promise(),2)}if(o.length)throw new xe(2,9,9012,"Could not find values for "+o);return d.return(n.map((function(e){return a[e]})))}))}function tf(e){this.g=new qp(e)}function nf(){this.g=new Map}function rf(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{za:n,ja:i},ja:e})}))})),t)return t;throw new xe(2,9,9013,"Could not find a cell that supports add-operations")}function af(e,t,n){if(!(e=e.g.get(t)))throw new xe(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new xe(2,9,9013,"Could not find cell with name "+n);return t}function of(e,t){sf.set(e,t)}Si("http",Mp,1,!0),Si("https",Mp,1,!0),Si("blob",Mp,1,!0),Hp.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}},Kp.prototype.destroy=function(){return this.i.destroy()},zp.prototype.abort=function(){var e=this;return L((function(t){if(1==t.g){try{e.i.abort()}catch(e){}return A(t,2),E(t,e.g,4)}if(2!=t.g)return _(t,0);S(t),T(t)}))},zp.prototype.store=function(){return this.h},zp.prototype.promise=function(){return this.g},qp.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},(i=Qp.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Zp(this.i)},i.removeSegments=function(e,t){return Jp(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return L((function(i){return 1==i.g?E(i,ef(n,n.i,e),2):(t=i.h,i.return(t.map((function(e){return n.ze(e)}))))}))},i.addManifests=function(){return Zp(this.g)},i.updateManifest=function(){return Promise.reject(new xe(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=$p(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return Jp(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return L((function(i){return 1==i.g?E(i,ef(n,n.g,e),2):(t=i.h,i.return(Promise.all(t.map((function(e){return n.bc(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return L((function(i){return 1==i.g?(e=Xp(n.h,n.g,"readonly"),t=new Map,E(i,Yp(e,(function(e,i){var r;return L((function(a){if(1==a.g)return E(a,n.bc(i),2);r=a.h,t.set(e,r),T(a)}))})),2)):3!=i.g?E(i,e.promise(),3):i.return(t)}))},i.ze=function(e){return e},i.bc=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,a,o,s,l,c=this;return L((function(d){if(1==d.g){for(n=$p(c.h,e),i=n.store(),r=[],a={},o=u(t),s=o.next();!s.done;a={Fc:a.Fc},s=o.next())l=s.value,a.Fc=i.add(l),a.Fc.onsuccess=function(e){return function(){r.push(e.Fc.result)}}(a);return E(d,n.promise(),2)}return d.return(r)}))},tf.prototype.destroy=function(){return this.g.destroy()},tf.prototype.getAll=function(){var e,t,n=this;return L((function(i){return 1==i.g?(e=Xp(n.g,"session-ids","readonly"),t=[],E(i,Yp(e,(function(e,n){t.push(n)})),2)):3!=i.g?E(i,e.promise(),3):i.return(t)}))},tf.prototype.add=function(e){for(var t=$p(this.g,"session-ids"),n=t.store(),i=(e=u(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},tf.prototype.remove=function(e){var t,n=this;return L((function(i){return 1==i.g?E(i,Yp(t=$p(n.g,"session-ids"),(function(t,n,i){e.includes(n.sessionId)&&i.delete()})),2):E(i,t.promise(),0)}))},nf.prototype.destroy=function(){for(var e=[],t=u(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},nf.prototype.init=function(){var e=this;sf.forEach((function(t,n){(t=t())&&e.g.set(n,t)}));for(var t=[],n=u(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},V("shaka.offline.StorageMuxer",nf),nf.unregister=function(e){sf.delete(e)},nf.register=of,nf.prototype.destroy=nf.prototype.destroy;var sf=new Map;function lf(){Qp.apply(this,arguments)}function uf(e,t){!function(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=u(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=u(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,a=u(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,i=(a=u(t)).next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(i=(t=u(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=u(e)).next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=u(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return function(e,t,n){var i=e.initSegmentUri?cf(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=cf(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}(n,e.startTime,t)}))}function cf(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new xe(2,9,9004,"Could not parse uri "+e)}function df(){Qp.apply(this,arguments)}function hf(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function pf(){Qp.apply(this,arguments)}function ff(){this.m=this.j=this.i=this.h=this.g=this.l=null}function gf(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function mf(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new gf(t,n,i,Number(e[4])):null}function vf(e,t){this.h=e,this.g=t}function yf(e,t){var n=new ts(null,0);n.Aa(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=function(e,t,n,i){for(var r=new Set,a=u(t),o=a.next();!o.done;o=a.next()){var s=u(o.value.variantIds);for(o=s.next();!o.done;o=s.next())r.add(o.value)}for(a=u(n),o=a.next();!o.done;o=a.next())for(s=u(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);for(a=new Map,r=u(r),o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=u(t),r=t.next();!r.done;r=t.next())for(r=r.value,o=bf(e,r,i),s=u(r.variantIds),r=s.next();!r.done;r=s.next())(r=a.get(r.value)).language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=u(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=bf(e,r,i),o=u(r.variantIds),r=o.next();!r.done;r=o.next())(r=a.get(r.value)).primary=r.primary||t.primary,r.video=t;return a}(e,i,r,n),r=t.streams.filter((function(e){return e.type==et})).map((function(t){return bf(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return bf(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=u(i.values()),l=s.next();!l.done;l=s.next())(l=l.value).audio&&l.audio.encrypted&&(l.audio.drmInfos=o),l.video&&l.video.encrypted&&(l.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:t.sequenceMode||!1}}function bf(e,t,n){var i=t.segments.map((function(t){return function(e,t){var n=new gf("segment",e.h,e.g,t.dataKey);return new go(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?function(e,t){var n=new gf("segment",e.h,e.g,t);return new fo((function(){return[n.toString()]}),0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}(e,t)}));return n.Ib(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ts(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function Ef(){this.g=null}function Tf(){}function Af(e){var t=mf(e);return t&&"manifest"==t.g?e=pi(e={uri:e,Oe:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}}):e=t&&"segment"==t.g?function(e,t){var n=new nf;return pi(void 0).Y((function(){return n.init()})).Y((function(){return af(n,t.za(),t.ja())})).Y((function(e){return e.getSegments([t.key()])})).Y((function(e){return{uri:t,data:e[0].data,headers:{}}})).finally((function(){return n.destroy()}))}(t.key(),t):di(new xe(2,1,9004,e)),e}function kf(e,t,n){var i,r,a,o,s,l;return L((function(c){switch(c.g){case 1:i=[];for(var d=[],h=u(n),p=h.next();!p.done;p=h.next()){p=p.value;for(var f=!1,g=u(d),m=g.next();!m.done;m=g.next())if(_f((m=m.value).info,p)){m.sessionIds.push(p.sessionId),f=!0;break}f||d.push({info:p,sessionIds:[p.sessionId]})}r=u(d),a=r.next();case 2:if(a.done){c.A(4);break}return o=a.value,s=function(e,t,n){var i,r;return L((function(a){switch(a.g){case 1:return i=new kr({kb:t,onError:function(){},cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),A(a,2),i.configure(e),E(a,function(e,t,n,i,r,a){var o=new Map;return(r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t}).drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],o.set(t,r),Lr(e,o,[])}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:_(a,3);break;case 2:return S(a),E(a,i.destroy(),5);case 5:case 9:return a.return([]);case 3:return A(a,6),E(a,Cr(i),8);case 8:_(a,7);break;case 6:return S(a),E(a,i.destroy(),9);case 7:return r=[],E(a,Promise.all(n.sessionIds.map((function(e){return L((function(t){return 1==t.g?(A(t,2),E(t,function(e,t){var n,i,r;return L((function(a){return 1==a.g?E(a,Pr(e,t),2):3!=a.g?(n=a.h)?(i=[],(r=e.i.get(n))&&(r.Ja=new it,i.push(r.Ja)),i.push(n.remove()),E(a,Promise.all(i),3)):a.return():(e.i.delete(n),void T(a))}))}(i,e),4)):2!=t.g?(r.push(e),_(t,0)):(S(t),void T(t))}))}))),10);case 10:return E(a,i.destroy(),11);case 11:return a.return(r)}}))}(e,t,o),E(c,s,5);case 5:l=c.h,i=i.concat(l),a=r.next(),c.A(2);break;case 4:return c.return(i)}}))}function _f(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ne(e.audioCapabilities,t.audioCapabilities,n)&&ne(e.videoCapabilities,t.videoCapabilities,n)}function Sf(e,t){var n=yf(new vf(e.za(),e.ja()),t),i=t.appMetadata||{};return n=wf(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function wf(e){for(var t=[],n=function(e){return e.filter((function(e){return xn(e)}))}(e.variants),i=(n=u(n)).next();!i.done;i=n.next())t.push(_n(i.value));for(n=(e=u(e.textStreams)).next();!n.done;n=e.next())t.push(Sn(n.value));return t}function Cf(){this.g={}}function If(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;0>=a&&(a=t.bandwidth),e.g[n.id]=r,e.g[i.id]=a}}function Df(e,t){e.g[t.id]=t.bandwidth||2048}function Rf(e,t){return null==(e=e.g[t])&&(e=0),e}function xf(e){var t=this;if(e&&e.constructor!=Yl)throw new xe(2,9,9008);this.g=this.h=null,e?(this.h=e.h,this.g=e.jc()):(this.h=Fl(),this.g=new _i),this.i=[],this.j=[];var n=!e;this.l=new Pi((function(){var e,i,r,a,o;return L((function(s){switch(s.g){case 1:return E(s,Promise.all(t.j.map((function(e){return Gp(e)}))),2);case 2:for(e=function(){},i=[],r=u(t.i),a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return E(s,Promise.all(i),3);case 3:if(!n){s.A(4);break}return E(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,T(s)}}))}))}function Lf(){if(st())e:{for(var e=u(sf.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Pf(e){var t,n,i;return L((function(r){switch(r.g){case 1:return E(r,(t=new nf).init(),2);case 2:return E(r,rf(t),3);case 3:return n=r.h,i=new gf("manifest",n.path.za,n.path.ja,e),E(r,t.destroy(),4);case 4:return E(r,(new xf).remove(i.toString()),0)}}))}function Of(e,t,n,i,r,a){var o,s,l,c,d,h,p,f,g,m,v;return L((function(y){switch(y.g){case 1:for(o=!1,A(y,2),s=!0,l=u(n.streams),c=l.next();!c.done;c=l.next())for(d=c.value,h=u(d.segments),p=h.next();!p.done;p=h.next())f=p.value,null!=(g=f.pendingSegmentRefId?i[f.pendingSegmentRefId]:null)&&(f.dataKey=g,f.pendingSegmentRefId=void 0),null!=(g=f.pendingInitSegmentRefId?i[f.pendingInitSegmentRefId]:null)&&(f.initSegmentKey=g,f.pendingInitSegmentRefId=void 0),f.pendingSegmentRefId&&(s=!1),f.pendingInitSegmentRefId&&(s=!1);return n.size+=r,s&&(n.isIncomplete=!1),E(y,e.updateManifest(t,n),4);case 4:o=!0,a(),_(y,0);break;case 2:return m=S(y),E(y,Pf(t),5);case 5:if(o){y.A(6);break}return v=Object.values(i),E(y,e.removeSegments(v,(function(){})),6);case 6:throw m}}))}function Mf(e){return e.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t}))}function Nf(e){return e.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))}))}function Bf(e,t){for(var n=[],i=u(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:jt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:jt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function Uf(e,t,n){return L((function(i){return E(i,function(e,t,n,i){var r,a,o;return L((function(s){return 1==s.g?i.drmInfo?(r=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new xe(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Bf(i,!1),videoCapabilities:Bf(i,!0)}})),E(s,kf(t,e,a),2)):s.return():3!=s.g?(o=s.h,E(s,r.remove(o),3)):E(s,r.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}(e.g,e.h.drm,n,t),0)}))}function Ff(e,t,n){function i(){}var r=function(e){for(var t=new Set,n=(e=u(e.streams)).next();!n.done;n=e.next())for(var i=(n=u(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey);return Array.from(t)}(n);return Sf(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function Vf(e,t,n,i,r,a){var o={id:i.id,originalId:i.originalId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,kind:i.kind,language:i.language,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout},s=r.offline.numberOfParallelDownloads,l=0;return function(e,t,n){if(t=e.segmentIndex.find(t),null!=t)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}(i,n.presentationTimeline.Pa(),(function(n){var r=Fp(n),u=void 0;if(!a.has(r)){var c=n.endTime-n.startTime;c=Rf(t,i.id)*c,c=jp(e.g,c),a.set(r,new Up(n,c,l,!1))}n.h&&(u=Fp(n.h),a.has(u)||(c=.5*Rf(t,i.id),c=jp(e.g,c),a.set(u,new Up(n.h,c,l,!0)))),o.segments.push({pendingInitSegmentRefId:u,initSegmentKey:u?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:r,dataKey:0}),l=(l+1)%s})),o}function Hf(e){if(e.l.g)throw new xe(2,9,7001)}function jf(){if(!Lf())throw new xe(2,9,9e3)}function Kf(e,t){return L((function(n){return 1==n.g?(e.i.push(t),k(n),E(n,t,4)):2!=n.g?n.return(n.h):(w(n),te(e.i,t),C(n,0))}))}function Gf(e){for(var t=new Set,n=u(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(i=(n=u(e.imageStreams)).next();!i.done;i=n.next())t.add(i.value);for(n=(e=u(e.variants)).next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}m(lf,Qp),lf.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return L((function(o){return n=$p(a.h,a.g),i=n.store(),r=new it,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new xe(2,9,9012,"Could not find values for "+e))},E(o,Promise.all([n.promise(),r]),0)}))},lf.prototype.bc=function(e){var t,n,i,r,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=uf(e.periods[n],r),t.push(a);return E(s,Bd(t),2)}return o=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})}))},lf.prototype.ze=function(e){return{data:e.data}},m(df,Qp),df.prototype.bc=function(e){var t,n,i,r,a,o;return L((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var l=e.periods[n],c=[],d=u(l.streams),h=d.next();!h.done;h=d.next())0!=(h=h.value).variantIds.length&&c.push(hf(h,l.startTime,l.startTime+r));a=c,t.push(a)}return E(s,Bd(t),2)}return o=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})}))},m(pf,Qp),(i=pf.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var i=(e=$p(e.h,e.g)).store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}(this,e,t)},i.bc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=ff.prototype).init=function(){var t=this,n=new it,i=!1,r=new ot((function(){i=!0,n.reject(new xe(2,9,9017))}));r.N(2);var a=e.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!i){var e=a.result;t.l=e;var o=e.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new lf(e,"segment","manifest"):null,t.g=o,o=(o=e.objectStoreNames).contains("manifest-v2")&&o.contains("segment-v2")?new df(e,"segment-v2","manifest-v2"):null,t.h=o,o=(o=e.objectStoreNames).contains("manifest-v3")&&o.contains("segment-v3")?new df(e,"segment-v3","manifest-v3"):null,t.i=o,o=(o=e.objectStoreNames).contains("manifest-v5")&&o.contains("segment-v5")?new pf(e,"segment-v5","manifest-v5"):null,t.j=o,e=e.objectStoreNames.contains("session-ids")?new tf(e):null,t.m=e,r.stop(),n.resolve()}},a.onupgradeneeded=function(){for(var e=a.result,t=u(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},a.onerror=function(e){i||(n.reject(new xe(2,9,9001,a.error)),r.stop(),e.preventDefault())},n},i.destroy=function(){var e=this;return L((function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return E(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return E(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return E(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return E(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return E(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),T(t)}}))},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return L((function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return E(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return E(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return E(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return E(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),E(n,function(){var t=new it,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new xe(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,E(n,t.init(),0)}}))},of("idb",(function(){return gt("CrKey")||ut()||!e.indexedDB?null:new ff})),gf.prototype.za=function(){return this.i},gf.prototype.ja=function(){return this.h},gf.prototype.key=function(){return this.l},gf.prototype.toString=function(){return this.j},(i=Ef.prototype).configure=function(){},i.start=function(e,t){var n,i,r,a,o,s,l=this;return L((function(u){switch(u.g){case 1:if(n=mf(e),l.g=n,null==n||"manifest"!=n.g)throw new xe(2,1,9004,e);return i=new nf,k(u),E(u,i.init(),4);case 4:return E(u,af(i,n.za(),n.ja()),5);case 5:return E(u,u.h.getManifests([n.key()]),6);case 6:return r=u.h,a=r[0],o=new vf(n.za(),n.ja()),s=yf(o,a),t.makeTextStreamsForClosedCaptions(s),u.return(s);case 2:return w(u),E(u,i.destroy(),7);case 7:C(u,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,a,o,s,l,u=this;return L((function(c){switch(c.g){case 1:return n=u.g,i=new nf,A(c,2,3),E(c,i.init(),5);case 5:return E(c,af(i,n.za(),n.ja()),6);case 6:return E(c,(r=c.h).getManifests([n.key()]),7);case 7:if(a=c.h,o=a[0],s=o.sessionIds.includes(e),l=null==o.expiration||o.expiration>t,!s||!l){c.A(3);break}return E(c,r.updateManifestExpiration(n.key(),t),3);case 3:return w(c),E(c,i.destroy(),10);case 10:C(c,0);break;case 2:S(c),c.A(3)}}))},Xr["application/x-offline-manifest"]=function(){return new Ef},V("shaka.offline.OfflineScheme",Tf),Tf.plugin=Af,Si("offline",Af),(i=xf.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Pl(e,t)),Vl(this.h,e)},i.getConfiguration=function(){var e=Fl();return Vl(e,this.h,Fl()),e},i.jc=function(){return this.g},i.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new Kp(this.g);return this.j.push(a),t=function(e,t,n,i,r,a){var o,s,l,c,d,h,p,f,g,m,v,y,b;return L((function(k){switch(k.g){case 1:return jf(),s=o=null,l=new nf,h=d=c=null,A(k,2,3),E(k,i(),5);case 5:return o=k.h,E(k,function(e,t,n,i){var r,a,o,s,l;return L((function(u){if(1==u.g)return r=null,a=e.g,o={networkingEngine:a,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},n.configure(i.manifest),Hf(e),E(u,n.start(t,o),2);if(3!=u.g)return s=u.h,Hf(e),l=Gf(s),E(u,Promise.all(Ui(l,(function(e){return e.createSegmentIndex()}))),3);if(Hf(e),r)throw r;return u.return(s)}))}(e,t,o,r),6);case 6:if(p=k.h,Hf(e),!(!p.presentationTimeline.U()&&!p.presentationTimeline.jb()))throw new xe(2,9,9005,t);return E(k,function(e,t,n,i){var r;return L((function(a){switch(a.g){case 1:return(r=new kr({kb:e.g,onError:n,cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(i.drm),E(a,function(e,t,n){return e.da=!0,e.B=[],e.L=n,Sr(e,t)}(r,t.variants,i.offline.usePersistentLicense),2);case 2:return E(a,Cr(r),3);case 3:return E(a,Ir(r),4);case 4:return a.return(r)}}))}(e,p,(function(e){h=h||e}),r),7);case 7:if(s=k.h,Hf(e),h)throw h;return E(k,function(e,t){var n,i,r,a,o,s,l,c,d,h,p,f,g,m,v,y,b,k,w,C,I,D,R,x,P,O,M,N;return L((function(L){switch(L.g){case 1:return n={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter((function(e){return fn(e,t,n)}))}(e,t.restrictions,n),E(L,vn(e,t.offline.usePersistentLicense),2);case 2:for(i=[],r=t.preferredAudioChannelCount,a=t.preferredDecodingAttributes,o=t.preferredVideoCodecs,s=t.preferredAudioCodecs,dn(e,o,s,r,a),l=u(e.variants),c=l.next();!c.done;c=l.next())d=c.value,i.push(_n(d));for(h=u(e.textStreams),p=h.next();!p.done;p=h.next())f=p.value,i.push(Sn(f));for(g=u(e.imageStreams),m=g.next();!m.done;m=g.next())v=m.value,i.push(wn(v));return E(L,t.offline.trackSelectionCallback(i),3);case 3:for(y=L.h,b=e.presentationTimeline.getDuration(),k=0,w=u(y),C=w.next();!C.done;C=w.next())I=C.value,D=I.bandwidth*b/8,k+=D;return A(L,4),E(L,t.offline.downloadSizeCallback(k),6);case 6:if(!L.h)throw new xe(2,9,9014);_(L,5);break;case 4:if((R=S(L))instanceof xe)throw R;throw new xe(2,9,9015);case 5:for(x=new Set,P=new Set,O=new Set,M=u(y),C=M.next();!C.done;C=M.next())"variant"==(N=C.value).type&&x.add(N.id),"text"==N.type&&P.add(N.id),"image"==N.type&&O.add(N.id);e.variants=e.variants.filter((function(e){return x.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return P.has(e.id)})),e.imageStreams=e.imageStreams.filter((function(e){return O.has(e.id)})),function(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=u(t),i=n.next();!i.done;i=n.next())for(var r=(i=u(t)).next();!r.done;r=i.next());for(t=u(e),n=t.next();!n.done;n=t.next())for(n=u(e),i=n.next();!i.done;i=n.next());}(e),T(L)}}))}(p,r),8);case 8:return E(k,l.init(),9);case 9:return Hf(e),E(k,rf(l),10);case 10:return c=k.h,Hf(e),f=function(e,t,n,i,r,a){var o=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=wf(t),appMetadata:n,isIncomplete:!1}}(n,t,i),s=r.offline.progressCallback;!function(e,t,n){e.m=t,e.l=n}(a,(function(e,t){o.size=t,s(o,e)}),(function(t,n){l&&r.offline.usePersistentLicense&&c==n&&Dr(e,"cenc",t)}));var l=Mf(t)&&!Nf(t),c=null;l&&(c=Wf.get(e.g.keySystem));for(var d=new Cf,h=u(t.textStreams),p=h.next();!p.done;p=h.next())d.g[p.value.id]=52;for(h=u(t.imageStreams),p=h.next();!p.done;p=h.next())Df(d,p.value);for(p=u(t.variants),h=p.next();!h.done;h=p.next())If(d,h.value);return d=function(e,t,n,i){for(var r=new Map,a=Gf(n),o=new Map,s=(a=u(a)).next();!s.done;s=a.next()){var l=Vf(e,t,n,s=s.value,i,r);o.set(s.id,l)}for(e=u(n.variants),t=e.next();!t.done;t=e.next())(t=t.value).audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),pe:Array.from(r.values())}}(a,d,t,r),a=d.streams,d=d.pe,p=e.g,h=r.offline.usePersistentLicense,p&&h&&(p.initData=[]),{ag:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.ic(),streams:a,sessionIds:h?xr(e):[],drmInfo:p,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode},pe:d}}(s,p,t,n,r,a),g=f.ag,m=f.pe,E(k,c.ja.addManifests([g]),11);case 11:if(v=k.h,Hf(e),d=v[0],Hf(e),h)throw h;return E(k,function(e,t,n,i,r,a,o,s,l){var c,d,h,p,f,g,m,v,y,b;return L((function(k){switch(k.g){case 1:if(c={},d=0,h=function(t,h){var p,f,g,m,v,y,b;return L((function(A){if(1==A.g){for(p={},f=u(t),g=f.next();!g.done;p={cb:p.cb},g=f.next())p.cb=g.value,m=Vp(p.cb,a),v=p.cb.i,y=p.cb.h,b=function(t){return function(n){var i,r,a;return L((function(s){if(1==s.g)return E(s,o.addSegments([{data:n}]),2);i=s.h,Hf(e),r=t.cb.g,a=Fp(r),c[a]=i[0],d+=n.byteLength,T(s)}))}}(p),Wp(r,p.cb.groupId,m,v,y,b);return E(A,function(e){return L((function(t){return 1==t.g?E(t,Promise.all(e.j.values()),2):t.return(e.g.h)}))}(r),2)}return h?(Hf(e),function(e,t,n,i){if(t.expiration=n.ic(),n=xr(n),t.sessionIds=i.offline.usePersistentLicense?n:[],Mf(e)&&i.offline.usePersistentLicense&&!n.length)throw new xe(2,9,9007)}(s,i,l,a),E(A,o.updateManifest(n,i),0)):A.A(0)}))},p=!1,A(k,2),!Mf(s)||!p||Nf(s)){k.A(4);break}return E(k,h(t.filter((function(e){return e.h})),!0),5);case 5:return Hf(e),t=t.filter((function(e){return!e.h})),f=c,g=d,c={},d=0,E(k,Of(o,n,i,f,g,(function(){return Hf(e)})),6);case 6:Hf(e);case 4:if(p){k.A(7);break}return E(k,h(t,!1),8);case 8:return Hf(e),m=c,v=d,c={},d=0,E(k,Of(o,n,i,m,v,(function(){return Hf(e)})),9);case 9:Hf(e);case 7:_(k,0);break;case 2:return y=S(k),b=Object.values(c),E(k,o.removeSegments(b,(function(){})),10);case 10:throw y}}))}(e,m,d,g,a,r,c.ja,p,s),12);case 12:return Hf(e),y=new gf("manifest",c.path.za,c.path.ja,d),k.return(Sf(y,g));case 3:return w(k),E(k,l.destroy(),13);case 13:if(!o){k.A(14);break}return E(k,o.stop(),14);case 14:if(!s){k.A(16);break}return E(k,s.destroy(),16);case 16:C(k,0);break;case 2:if(b=S(k),null==d){k.A(18);break}return E(k,Pf(d),18);case 18:throw h||b}}))}(this,e,t||{},(function(){var t;return L((function(a){return 1==a.g?E(a,Yr(e,i.g,r.manifest.retryParameters,n||null),2):(t=a.h,a.return(t()))}))}),r,a),(t=new ci(t,(function(){return Gp(a)}))).finally((function(){te(i.j,a)})),function(e,t){var n=t.promise;return e.i.push(n),t.finally((function(){te(e.i,n)}))}(this,t)},i.remove=function(e){return Kf(this,function(e,t){var n,i,r,a,o,s;return L((function(l){switch(l.g){case 1:if(jf(),null==(n=mf(t))||"manifest"!=n.g)throw new xe(2,9,9004,t);return i=n,r=new nf,k(l),E(l,r.init(),4);case 4:return E(l,af(r,i.za(),i.ja()),5);case 5:return E(l,(a=l.h).getManifests([i.key()]),6);case 6:return o=l.h,s=o[0],E(l,Promise.all([Uf(e,s,r),Ff(a,i,s)]),2);case 2:return w(l),E(l,r.destroy(),8);case 8:C(l,0)}}))}(this,e))},i.pg=function(){return Kf(this,function(e){var t,n,i,r,a,o,s,l,c,d;return L((function(h){switch(h.g){case 1:return jf(),t=e.g,n=e.h.drm,i=new nf,r=!1,k(h),E(h,i.init(),4);case 4:a=[],function(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}(i,(function(e){return a.push(e)})),o=u(a),s=o.next();case 5:if(s.done){h.A(2);break}return E(h,(l=s.value).getAll(),8);case 8:return c=h.h,E(h,kf(n,t,c),9);case 9:return d=h.h,E(h,l.remove(d),10);case 10:d.length!=c.length&&(r=!0),s=o.next(),h.A(5);break;case 2:return w(h),E(h,i.destroy(),11);case 11:C(h,3);break;case 3:return h.return(!r)}}))}(this))},i.list=function(){return Kf(this,L((function(i){switch(i.g){case 1:return jf(),e=[],t=new nf,k(i),E(i,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){t({za:n,ja:i},e)}))}))}(t,(function(t,i){n=n.then((function(){return L((function(n){if(1==n.g)return E(n,i.getAllManifests(),2);n.h.forEach((function(n,i){n=Sf(new gf("manifest",t.za,t.ja,i),n),e.push(n)})),T(n)}))}))})),E(i,n,2);case 2:return w(i),E(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}})));var e,t,n},V("shaka.offline.Storage",xf),xf.deleteAll=function(){var e;return L((function(t){return 1==t.g?(e=new nf,k(t),E(t,function(e){var t,n;return L((function(i){return 1==i.g?(t=Array.from(e.g.values()),(n=0<t.length)||sf.forEach((function(e){(e=e())&&t.push(e)})),E(i,Promise.all(t.map((function(e){return e.erase()}))),2)):n?i.A(0):E(i,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}(e),2)):5!=t.g?(w(t),E(t,e.destroy(),5)):C(t,0)}))},xf.prototype.list=xf.prototype.list,xf.prototype.removeEmeSessions=xf.prototype.pg,xf.prototype.remove=xf.prototype.remove,xf.prototype.store=xf.prototype.store,xf.prototype.getNetworkingEngine=xf.prototype.jc,xf.prototype.getConfiguration=xf.prototype.getConfiguration,xf.prototype.configure=xf.prototype.configure,xf.prototype.destroy=xf.prototype.destroy,xf.support=Lf;var Wf=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function zf(){}function Yf(e,t){for(e={priority:t||0,mf:e},t=0;t<qf.length;t++)if(qf[t].priority<e.priority)return void qf.splice(t,0,e);qf.push(e)}$u.offline=Lf,V("shaka.polyfill",zf),zf.register=Yf,zf.installAll=function(){for(var e=u(qf),t=e.next();!t.done;t=e.next()){t=t.value;try{t.mf()}catch(e){z("Error installing polyfill!",e)}}};var qf=[];function $f(){this.g=new Qf}function Xf(){e.AbortController||(e.AbortController=$f,e.AbortSignal=Qf)}function Qf(){bi.call(this),this.h=!1,this.g=void 0,this.onabort=null}function Zf(){}function Jf(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=u(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())eg(t.value)}function eg(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function tg(){}function ng(){Hv()}function ig(){}function rg(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ag),document.addEventListener("webkitfullscreenerror",ag),document.addEventListener("mozfullscreenchange",ag),document.addEventListener("mozfullscreenerror",ag),document.addEventListener("MSFullscreenChange",ag),document.addEventListener("MSFullscreenError",ag)}}function ag(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function og(){}function sg(){var e=!0;(ht()||gt("PlayStation 5")||pt()||gt("Web0S")||ct()||gt("CrKey")||gt("PC=EOS")||gt("Hisense")||gt("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),gg=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=lg)}function lg(t){var n,i,r,a,o,s,l,u,c,d,h,p,f;return L((function(g){switch(g.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},!t)return g.return(n);if(i=t.video,r=t.audio,"media-source"==t.type){if(!st())return g.return(n);if(i){if(gt("CrKey")){if(!e.cast)throw new xe(2,8,8e3);if(cast.__platform__&&cast.__platform__.canDisplayType){var m=i.contentType;i.width&&i.height&&(m+="; width="+i.width+"; height="+i.height),i.framerate&&(m+="; framerate="+i.framerate),"pq"===i.transferFunction&&(m+="; eotf=smpte2084"),m=cast.__platform__.canDisplayType(m)}else m=Z(i.contentType)}else m=Z(i.contentType);if(!m)return g.return(n)}if(r&&(a=r.contentType,!Z(a)))return g.return(n)}else{if("file"!=t.type)return g.return(n);if(i&&(o=i.contentType,!lt(o))||r&&(s=r.contentType,!lt(s)))return g.return(n)}return t.keySystemConfiguration?(l=t.keySystemConfiguration,u=[],c=[],l.audio&&(d={robustness:l.audio.robustness||"",contentType:t.audio.contentType},u.push(d)),l.video&&(h={robustness:l.video.robustness||"",contentType:t.video.contentType},c.push(h)),p={initDataTypes:[l.initDataType],distinctiveIdentifier:l.distinctiveIdentifier,persistentState:l.persistentState,sessionTypes:l.sessionTypes},u.length&&(p.audioCapabilities=u),c.length&&(p.videoCapabilities=c),A(g,3),E(g,navigator.requestMediaKeySystemAccess(l.keySystem,[p]),5)):(n.supported=!0,g.return(Promise.resolve(n)));case 5:f=g.h,_(g,4);break;case 3:S(g);case 4:f&&(n.supported=!0,n.keySystemAccess=f);case 2:return g.return(n)}}))}$f.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,void 0===t.g&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new mi("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},o.Object.defineProperties($f.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),zf.AbortController=$f,$f.install=Xf,m(Qf,bi),o.Object.defineProperties(Qf.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Yf(Xf),zf.Aria=Zf,Zf.install=Jf,Yf(Jf),zf.EncryptionScheme=tg,tg.install=ng,Yf(ng,-2),zf.Fullscreen=ig,ig.install=rg,Yf(rg),zf.MediaCapabilities=og,og.install=sg;var ug,cg,dg,hg,pg,fg,gg=null;function mg(){}function vg(){var t=ft();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}():t?12>=t?(yg(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):yg():(gt("Tizen 2")||gt("Tizen 3")||gt("Tizen 4"))&&function(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=zt(t)[0]&&e(t)}}()),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;gt("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=r.findIndex((function(e){return e.startsWith("vp09")}));return 0<=a&&(r[a]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}()}function yg(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,P.apply(0,arguments));return t.abort=function(){},t}}function bg(){}function Eg(){screen.orientation||null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new Tg;screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new mi("change");n.dispatchEvent(e)}))}()}function Tg(){bi.call(this),this.type="",this.angle=0}function Ag(){}function kg(e,t){try{var n=new wg(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function _g(e){var t=this.mediaKeys;return t&&t!=e&&Ig(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Ig(e,this):Promise.resolve()}function Sg(e){if(De(e=Ie(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=kt(e=Tt(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Ce(e),this.dispatchEvent(t)}function wg(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=u(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var a=u(n.audioCapabilities),o=a.next();!o.done;o=a.next())(o=o.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),r=!0));if(n.videoCapabilities)for(o=(n=u(n.videoCapabilities)).next();!o.done;o=n.next())(a=o.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Cg(e){this.h=new WebKitMediaKeys(e),this.g=new Mi}function Ig(e,t){if(e.g.nb(),!t)return Promise.resolve();e.g.C(t,"webkitneedkey",Sg);try{return ss(t,HTMLMediaElement.HAVE_METADATA,e.g,(function(){t.webkitSetMediaKeys(e.h)})),Promise.resolve()}catch(e){return Promise.reject(e)}}function Dg(e){bi.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Mi,this.sessionId="",this.expiration=NaN,this.closed=new it,this.keyStatuses=new xg}function Rg(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new mi("keystatuseschange"),e.dispatchEvent(t)}function xg(){this.size=0,this.g=void 0}function Lg(){}function Pg(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Og,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Mg,e.MediaKeys=Ng,e.MediaKeySystemAccess=Bg,e.shakaMediaKeysPolyfill=!0)}function Og(){return Promise.reject(Error("The key system specified is not supported."))}function Mg(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ng(){throw new TypeError("Illegal constructor.")}function Bg(){throw this.keySystem="",new TypeError("Illegal constructor.")}function Ug(){}function Fg(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Zg="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Hg,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=jg,e.MediaKeys=Gg,e.MediaKeySystemAccess=Kg,e.shakaMediaKeysPolyfill=!0}}function Vg(e){return Zg?Zg+e.charAt(0).toUpperCase()+e.slice(1):e}function Hg(e,t){try{var n=new Kg(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function jg(e){var t=this.mediaKeys;return t&&t!=e&&Wg(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Wg(e,this),Promise.resolve()}function Kg(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=(t=u(t)).next();!a.done;a=t.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var l=u(a.audioCapabilities),c=l.next();!c.done;c=l.next())(c=c.value).contentType&&(s=!0,r.canPlayType(c.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(c),i=!0));if(a.videoCapabilities)for(c=(l=u(a.videoCapabilities)).next();!c.done;c=l.next())(c=c.value).contentType&&(s=!0,r.canPlayType(c.contentType,this.g)&&(o.videoCapabilities.push(c),i=!0));if(s||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Gg(e){this.l=e,this.h=null,this.g=new Mi,this.i=[],this.j=new Map}function Wg(e,t){e.h=t,e.g.nb();var n=Zg;t&&(e.g.C(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Ce(t.initData),e.h.dispatchEvent(n)})),e.g.C(t,n+"keymessage",(function(t){var n=zg(e,t.sessionId);n&&(t=new mi("message",t=(new Map).set("messageType",null==n.keyStatuses.Eb()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.g.C(t,n+"keyadded",(function(t){(t=zg(e,t.sessionId))&&(Xg(t,"usable"),t.g&&t.g.resolve(),t.g=null)})),e.g.C(t,n+"keyerror",(function(t){var n=zg(e,t.sessionId);n&&n.handleError(t)})))}function zg(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Yg(e,t,n){bi.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new it,this.keyStatuses=new Qg}function qg(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=Ie(kt("LOAD_SESSION|"+n));else{var r=kt("PERSISTENT|");i=Lt(r,t)}else i=Ie(t)}catch(e){return Promise.reject(e)}e.h=new it;var a=Vg("generateKeyRequest");try{e.j[a](e.i,i)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new ot((function(){try{e.j[a](e.i,i)}catch(t){e.h.reject(t),e.h=null}})).N(.01)}return e.h}function $g(e,t,n){if(e.g)e.g.then((function(){return $g(e,t,n)})).catch((function(){return $g(e,t,n)}));else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var i=Et(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=Dt(r.keys[0].k),r=Dt(r.keys[0].kid)}else i=Ie(n),r=null;var a=Vg("addKey");try{e.j[a](e.i,i,r,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function Xg(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new mi("keystatuseschange"),e.dispatchEvent(t)}function Qg(){this.size=0,this.g=void 0}og.originalMcap=gg,Yf(sg,-1),zf.MediaSource=mg,mg.install=vg,Yf(vg),zf.Orientation=bg,bg.install=Eg,m(Tg,bi),Tg.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Tg.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Yf(Eg),zf.PatchedMediaKeysApple=Ag,Ag.uninstall=function(){ug&&(ug=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",cg),HTMLMediaElement.prototype.setMediaKeys=dg,e.MediaKeys=hg,e.MediaKeySystemAccess=pg,navigator.requestMediaKeySystemAccess=fg,cg=fg=dg=pg=hg=null,e.shakaMediaKeysPolyfill=!1)},Ag.install=function(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&(void 0!==t&&t&&(ug=!0,cg=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),dg=HTMLMediaElement.prototype.setMediaKeys,hg=e.MediaKeys,pg=e.MediaKeySystemAccess,fg=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=_g,e.MediaKeys=Cg,e.MediaKeySystemAccess=wg,navigator.requestMediaKeySystemAccess=kg,e.shakaMediaKeysPolyfill=!0)},wg.prototype.createMediaKeys=function(){var e=new Cg(this.keySystem);return Promise.resolve(e)},wg.prototype.getConfiguration=function(){return this.g},Cg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Dg(this.h)},Cg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},m(Dg,bi),(i=Dg.prototype).generateRequest=function(e,t){var n=this;this.h=new it;try{var i=this.l.createSession("video/mp4",Ie(t));this.i=i,this.sessionId=i.sessionId||"",this.j.C(this.i,"webkitkeymessage",(function(e){n.h&&(n.h.resolve(),n.h=null),e=new mi("message",e=(new Map).set("messageType",null==n.keyStatuses.Eb()?"license-request":"license-renewal").set("message",Ce(e.message))),n.dispatchEvent(e)})),this.j.C(i,"webkitkeyadded",(function(){n.g&&(Rg(n,"usable"),n.g.resolve(),n.g=null)})),this.j.C(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Rg(n,"output-not-allowed");break;default:Rg(n,"internal-error")}})),Rg(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new it;try{this.i.update(Ie(e))}catch(e){this.g.reject(e)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.nb()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=xg.prototype).Eb=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Wr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Wr.value();return!(!this.g||!Se(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},zf.PatchedMediaKeysNop=Lg,Lg.install=Pg,Ng.prototype.createSession=function(){},Ng.prototype.setServerCertificate=function(){},Bg.prototype.getConfiguration=function(){},Bg.prototype.createMediaKeys=function(){},Yf(Pg,-10),zf.PatchedMediaKeysWebkit=Ug,Ug.install=Fg,Kg.prototype.createMediaKeys=function(){var e=new Gg(this.g);return Promise.resolve(e)},Kg.prototype.getConfiguration=function(){return this.h},Gg.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Yg(t,this.l,e),this.i.push(e),e},Gg.prototype.setServerCertificate=function(){return Promise.resolve(!1)},m(Yg,bi),(i=Yg.prototype).handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Xg(this,"output-restricted"):Xg(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return qg(this,t,null)},i.load=function(e){return"persistent-license"==this.l?qg(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new it;return $g(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Vg("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=Qg.prototype).Eb=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Wr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Wr.value();return!(!this.g||!Se(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var Zg="";function Jg(){}function em(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=nm,Object.defineProperty(t,"disablePictureInPicture",{get:rm,set:am,enumerable:!0,configurable:!0}),document.exitPictureInPicture=im,document.addEventListener("webkitpresentationmodechanged",tm,!0))}}function tm(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function nm(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function im(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function rm(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function am(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function om(){}function sm(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=lm))}function lm(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function um(){}function cm(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=dm)}function dm(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}function hm(){}function pm(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:fm})}function fm(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function gm(){}function mm(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch((function(){})),e}}}function vm(){}function ym(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||dt())&&(t.getVideoPlaybackQuality=bm)}}function bm(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Em(){}function Tm(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=Am;else if(6==n)t=km;else{try{var i=!!Am(1,2,"")}catch(e){i=!1}i&&(t=Am)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function Am(t,n,i){return new e.TextTrackCue(t,n,i)}function km(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function _m(){}Yf(Fg),zf.PiPWebkit=Jg,Jg.install=em,Yf(em),zf.RandomUUID=om,om.install=sm,Yf(sm),zf.StorageEstimate=um,um.install=cm,Yf(cm),zf.Symbol=hm,hm.install=pm,Yf(pm),zf.VideoPlayPromise=gm,gm.install=mm,Yf(mm),zf.VideoPlaybackQuality=vm,vm.install=ym,Yf(ym),zf.VTTCue=Em,Em.install=Tm,Yf(Tm),_m.prototype.parseInit=function(){},_m.prototype.setSequenceMode=function(){},_m.prototype.parseMedia=function(e,t){for(var n=null,i=[],r=(e=u(e=Et(e).split(/\r?\n/))).next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=Sm.exec(r))){var a=wm.exec(r[1]);r=new re(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,r[2]),n&&(n.endTime=a,i.push(n)),n=r}return n&&i.push(n),i},V("shaka.text.LrcTextParser",_m),_m.prototype.parseMedia=_m.prototype.parseMedia,_m.prototype.setSequenceMode=_m.prototype.setSequenceMode,_m.prototype.parseInit=_m.prototype.parseInit;var Sm=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,wm=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function Cm(){}function Im(e,t,n,i,r,a,o,s,l,c,d){var h=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!d)return null;var p=document.createElement("span");p.textContent=e.textContent}else p=e;for(var f=null,g=u(ev),m=g.next();!m.done&&!(f=Om(p,"backgroundImage",i,"#",m.value)[0]);m=g.next());if(g=d,("p"==e.nodeName||f)&&(d=!0),s="default"==(p.getAttribute("xml:space")||(s?"default":"preserve")),e=[],!(m=Array.from(p.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}))))for(var v=u(p.childNodes),y=v.next();!y.done;y=v.next())(y=Im(y.value,t,n,i,r,a,o,s,l,p,d))&&e.push(y);i=null!=c,v=/\S/.test(p.textContent);var b=p.hasAttribute("begin")||p.hasAttribute("end")||p.hasAttribute("dur");if(!(b||v||"br"==p.tagName||0!=e.length||i&&!s))return null;for(v=(y=Nm(p,n)).start,y=y.end;h&&h.nodeType==Node.ELEMENT_NODE&&"tt"!=h.tagName;)v=(y=Mm(h,n,v,y)).start,y=y.end,h=h.parentNode;if(null==v&&(v=0),v+=t.periodStart,y=null==y?1/0:y+t.periodStart,v=Math.max(v,t.segmentStart),y=Math.min(y,t.segmentEnd),!b&&0<e.length)for(v=1/0,y=0,n=(t=u(e)).next();!n.done;n=t.next())n=n.value,v=Math.min(v,n.startTime),y=Math.max(y,n.endTime);if("br"==p.tagName)return(r=new re(v,y,"")).lineBreak=!0,r;if(t="",m&&(t=p.textContent,s&&(t=(t=t.trim()).replace(/\s+/g," "))),(t=new re(v,y,t)).nestedCues=e,d||(t.isContainer=!0),l&&(t.cellResolution=l),l=Om(p,"region",a,"")[0],p.hasAttribute("region")&&l&&l.getAttribute("xml:id")){var E=l.getAttribute("xml:id");t.region=o.filter((function(e){return e.id==E}))[0]}return o=l,c&&i&&!p.getAttribute("region")&&!p.getAttribute("style")&&(o=Om(c,"region",a,"")[0]),function(e,t,n,i,r,a,o){a=a||o,"rtl"==Rm(t,n,r,"direction",a)&&(e.direction="rtl"),o=Rm(t,n,r,"writingMode",a),"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=de),(o=Rm(t,n,r,"textAlign",!0))?(e.positionAlign=Qm[o],e.lineAlign=Xm[o],e.textAlign=le[o.toUpperCase()]):e.textAlign=se,(o=Rm(t,n,r,"displayAlign",!0))&&(e.displayAlign=ce[o.toUpperCase()]);(o=Rm(t,n,r,"color",a))&&(e.color=o);(o=Rm(t,n,r,"backgroundColor",a))&&(e.backgroundColor=o);(o=Rm(t,n,r,"border",a))&&(e.border=o);if(o=Rm(t,n,r,"fontFamily",a))switch(o){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=o}(o=Rm(t,n,r,"fontWeight",a))&&"bold"==o&&(e.fontWeight=700),o=Rm(t,n,r,"wrapOption",a),e.wrapLine=!o||"noWrap"!=o,(o=Rm(t,n,r,"lineHeight",a))&&o.match(jm)&&(e.lineHeight=o),(o=Rm(t,n,r,"fontSize",a))&&(o.match(jm)||o.match(Hm))&&(e.fontSize=o),(o=Rm(t,n,r,"fontStyle",a))&&(e.fontStyle=Ee[o.toUpperCase()]);if(i){o=i.getAttribute("imageType")||i.getAttribute("imagetype");var s=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==o&&"Base64"==s&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(i=Rm(t,n,r,"textOutline",a))&&(i=i.split(" "),i[0].match(jm)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(jm)?e.textStrokeWidth=i[0]:e.textStrokeColor="");(i=Rm(t,n,r,"letterSpacing",a))&&i.match(jm)&&(e.letterSpacing=i),(i=Rm(t,n,r,"linePadding",a))&&i.match(jm)&&(e.linePadding=i),(a=Rm(t,n,r,"opacity",a))&&(e.opacity=parseFloat(a));(n=xm(n,r,"textDecoration"))&&Dm(e,n),(t=Lm(t,r,"textDecoration"))&&Dm(e,t)}(t,p,o,f,r,g,0==e.length),t}function Dm(e,t){for(var n=(t=u(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&te(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&te(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&te(e.textDecoration,"overline")}}function Rm(e,t,n,i,r){return r=void 0===r||r,(e=Lm(e,n,i))?e:r?xm(t,n,i):null}function xm(e,t,n){if(!e)return null;var i=lr(e,Jm,n);return i||Pm(e,t,n)}function Lm(e,t,n){var i=lr(e,Jm,n);return i||Pm(e,t,n)}function Pm(e,t,n){e=Om(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=sr(e[r],"urn:ebu:tt:style",n);a||(a=lr(e[r],Jm,n)),a||(a=Lm(e[r],t,n)),a&&(i=a)}return i}function Om(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=r?sr(o,r,t):o.getAttribute(t))&&(o=o.parentNode)instanceof Element;);if(t=e)for(r=(t=u(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,o=(e=u(n)).next();!o.done;o=e.next())if(i+(o=o.value).getAttribute("xml:id")==r){a.push(o);break}return a}function Mm(e,t,n,i){return e=Nm(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function Nm(e,t){var n=Bm(e.getAttribute("begin"),t),i=Bm(e.getAttribute("end"),t);return e=Bm(e.getAttribute("dur"),t),null==i&&null!=e&&(i=n+e),{start:n,end:i}}function Bm(e,t){var n=null;if(Gm.test(e)){e=Gm.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),a=Number(e[4]);n=(r+=(a+=(Number(e[5])||0)/t.h)/t.frameRate)+60*i+3600*n}else if(Wm.test(e))n=Um(Wm,e);else if(zm.test(e))n=Um(zm,e);else if(Ym.test(e))e=Ym.exec(e),n=Number(e[1])/t.frameRate;else if(qm.test(e))e=qm.exec(e),n=Number(e[1])/t.g;else if($m.test(e))n=Um($m,e);else if(e)throw new xe(2,2,2001,"Could not parse cue time range in TTML");return n}function Um(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function Fm(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Zt["application/x-subtitle-lrc"]=function(){return new _m},Cm.prototype.parseInit=function(){},Cm.prototype.setSequenceMode=function(){},Cm.prototype.parseMedia=function(e,t){var n=Et(e);if(e=[],""==n)return e;var i=Er(n,"tt");if(!i)throw new xe(2,2,2005,"Failed to parse TTML.");if(!(n=i.getElementsByTagName("body")[0]))return[];var r=lr(i,Zm,"frameRate"),a=lr(i,Zm,"subFrameRate"),o=lr(i,Zm,"frameRateMultiplier"),s=lr(i,Zm,"tickRate"),l=lr(i,Zm,"cellResolution"),c=i.getAttribute("xml:space")||"default",d=lr(i,Jm,"extent");if("default"!=c&&"preserve"!=c)throw new xe(2,2,2005,"Invalid xml:space value: "+c);c="default"==c,r=new Fm(r,a,o,s),l=l&&(l=/^(\d+) (\d+)$/.exec(l))?{columns:parseInt(l[1],10),rows:parseInt(l[2],10)}:null,a=(a=i.getElementsByTagName("metadata")[0])?function(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}(a):[],o=Array.from(i.getElementsByTagName("style")),s=[];for(var h=u(i=Array.from(i.getElementsByTagName("region"))),p=h.next();!p.done;p=h.next()){var f=p.value;p=new Te;var g=f.getAttribute("xml:id");if(g){p.id=g;var m,v,y=null;d&&(y=Vm.exec(d)||Km.exec(d)),g=y?Number(y[1]):null,y=y?Number(y[2]):null,(m=xm(f,o,"extent"))&&(null!=(m=(v=Vm.exec(m))||Km.exec(m))&&(p.width=Number(m[1]),p.height=Number(m[2]),v||(null!=g&&(p.width=100*p.width/g),null!=y&&(p.height=100*p.height/y)),p.widthUnits=v||null!=g?Ae:0,p.heightUnits=v||null!=y?Ae:0)),(f=xm(f,o,"origin"))&&(null!=(m=(v=Vm.exec(f))||Km.exec(f))&&(p.viewportAnchorX=Number(m[1]),p.viewportAnchorY=Number(m[2]),v||(null!=y&&(p.viewportAnchorY=100*p.viewportAnchorY/y),null!=g&&(p.viewportAnchorX=100*p.viewportAnchorX/g)),p.viewportAnchorUnits=v||null!=g?Ae:0))}else p=null;p&&s.push(p)}if(ar(n,"p").length)throw new xe(2,2,2001,"<p> can only be inside <div> in TTML");for(h=(d=u(ar(n,"div"))).next();!h.done;h=d.next())if(ar(h.value,"span").length)throw new xe(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Im(n,t,r,a,o,i,s,c,l,null,!1))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},V("shaka.text.TtmlTextParser",Cm),Cm.prototype.parseMedia=Cm.prototype.parseMedia,Cm.prototype.setSequenceMode=Cm.prototype.setSequenceMode,Cm.prototype.parseInit=Cm.prototype.parseInit;var Vm=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Hm=/^(\d{1,2}(?:\.\d+)?|100)%$/,jm=/^(\d+px|\d+em|\d*\.?\d+c)$/,Km=/^(\d+)px (\d+)px$/,Gm=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Wm=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,zm=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Ym=/^(\d*(?:\.\d*)?)f$/,qm=/^(\d*(?:\.\d*)?)t$/,$m=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Xm={left:fe,center:"center",right:"end",start:fe,end:"end"},Qm={left:"line-left",center:"center",right:"line-right"},Zm=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Jm=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],ev=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function tv(){this.g=new Cm}function nv(){this.g=!1}function iv(e){for(var t=u(Object.entries(me)),n=t.next();!n.done;n=t.next()){var i=u(n.value);n=i.next().value,i=i.next().value;var r=new re(0,0,"");r.color=i,e.set("."+n,r)}for(n=(t=u(Object.entries(ve))).next();!n.done;n=t.next())n=(i=u(n.value)).next().value,i=i.next().value,(r=new re(0,0,"")).backgroundColor=i,e.set("."+n,r)}function rv(e,t,n){0===n.size&&iv(n);e:{var i=e;e=[];for(var r=-1,a="",o=0;o<i.length;o++)if("/"===i[o]&&0<o&&"<"===i[o-1]){var s=i.indexOf(">",o);if(s<=o){e=i;break e}if((s=i.substring(o+1,s))&&"c"===s){var l=e.pop();l?l===s?(a+="/"+s+">",o+=s.length+1):l.startsWith("c.")?(o+=s.length+1,a+="/"+l+">"):a+=i[o]:a+=i[o]}else a+=i[o]}else"<"===i[o]?"c"!=i[r=o+1]&&(r=-1):">"===i[o]&&0<r&&(e.push(i.substr(r,o-r)),r=-1),a+=i[o];e=a}for(i=[],a=-1,r=0;r<e.length;r++)"<"===e[r]?a=r+1:">"===e[r]&&0<a&&((a=e.substr(a,r-a)).match(cv)&&i.push(a),a=-1);for(r=(i=u(i)).next();!r.done;r=i.next())r=r.value,e=e.replace("<"+r+">",'<div time="'+r+'">'),e+="</div>";e:{for(r=e,a=[],o=-1,i="",e=!1,s=0;s<r.length;s++)if("/"===r[s]){if(-1===(l=r.indexOf(">",s))){e=r;break e}if((l=r.substring(s+1,l))&&"v"==l){e=!0;var c=null;if(a.length&&(c=a[a.length-1]),c){if(c===l)i+="/"+l+">";else{if(!c.startsWith("v")){i+=r[s];continue}i+="/"+c+">"}s+=l.length+1}else i+=r[s]}else i+=r[s]}else"<"===r[s]?"v"!=r[o=s+1]&&(o=-1):">"===r[s]&&0<o&&(a.push(r.substr(o,s-o)),o=-1),i+=r[s];for(a=(r=u(a)).next();!a.done;a=r.next())o=(a=a.value).replace(" ",".voice-"),i=(i=i.replace("<"+a+">","<"+o+">")).replace("</"+a+">","</"+o+">"),e||(i+="</"+o+">");e=i}if(r=Er("<span>"+e+"</span>","span")){if(i=[],1==(r=r.childNodes).length&&((a=r[0]).nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE))return void(t.payload=e);for(r=(e=u(r)).next();!r.done;r=e.next())ov(r.value,t,i,n);t.nestedCues=i}else t.payload=e}function av(e,t){return e&&0<e.length?e:t}function ov(e,t,n,i){var r=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=u(e.nodeName.split(/(?=[ .])+/g)),o=a.next();!o.done;o=a.next()){var s=o=o.value;if(s.startsWith(".voice-")){var l=s.split("-").pop();s='v[voice="'+l+'"]',i.has(s)||(s="v[voice="+l+"]")}switch(i.has(s)&&(s=i.get(s))&&(r.backgroundColor=av(s.backgroundColor,r.backgroundColor),r.color=av(s.color,r.color),r.fontFamily=av(s.fontFamily,r.fontFamily),r.fontSize=av(s.fontSize,r.fontSize),r.fontWeight=s.fontWeight,r.fontStyle=s.fontStyle,r.opacity=s.opacity,r.wrapLine=s.wrapLine),o){case"br":(o=t.clone()).lineBreak=!0,n.push(o);break;case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline");break;case"div":(o=e.getAttribute("time"))&&(o=lv(new Ih(o)))&&(r.startTime=o)}}if(cr(e))for(a=!0,i=u(e.textContent.split("\n")),e=i.next();!e.done;e=i.next())e=e.value,a||((a=t.clone()).lineBreak=!0,n.push(a)),0<e.length&&((a=r.clone()).payload=e,n.push(a)),a=!1;else for(e=(t=u(e.childNodes)).next();!e.done;e=t.next())ov(e.value,r,n,i)}function sv(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?se:le[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter((function(e){return e.id==t})),e.length?e[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=ge[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=pe,e.line=Number(n[1]),n[2]&&(e.lineAlign=ge[n[2].toUpperCase()]))}function lv(e){if(null==(e=Rh(e,cv)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function uv(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,(function(e){return t[e]||"'"})):e||""}Zt["application/ttml+xml"]=function(){return new Cm},tv.prototype.parseInit=function(e){var t=!1;if((new Wi).box("moov",zi).box("trak",zi).box("mdia",zi).box("minf",zi).box("stbl",zi).P("stsd",Yi).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new xe(2,2,2007)},tv.prototype.setSequenceMode=function(){},tv.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new Wi).box("mdat",$i((function(e){i=!0,r=r.concat(n.g.parseMedia(e,t))}))).parse(e,!1),!i)throw new xe(2,2,2007);return r},V("shaka.text.Mp4TtmlParser",tv),tv.prototype.parseMedia=tv.prototype.parseMedia,tv.prototype.setSequenceMode=tv.prototype.setSequenceMode,tv.prototype.parseInit=tv.prototype.parseInit,Zt['application/mp4; codecs="stpp"']=function(){return new tv},Zt['application/mp4; codecs="stpp.ttml"']=function(){return new tv},Zt['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new tv},Zt['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new tv},nv.prototype.parseInit=function(){},nv.prototype.setSequenceMode=function(e){this.g=e},nv.prototype.parseMedia=function(e,t){var n=(e=(e=Et(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new xe(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.g){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=n[0].match(/MPEGTS:(\d+)/m);if(i&&r){if(null==(e=lv(new Ih(i[1]))))throw new xe(2,2,2e3);for(r=Number(r[1]),i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}}for(t=[],i=(r=u(n[0].split("\n"))).next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new Ih(i);var a=new Te;xh(i),Dh(i);for(var o=xh(i);o;){var s=a,l=o;(o=/^id=(.*)$/.exec(l))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(l))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(l))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(l))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(l)&&(s.scroll="up"),Dh(i),o=xh(i)}t.push(a)}for(iv(r=new Map),i=[],a=(n=u(n.slice(1))).next();!a.done;a=n.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){for(s=[],o=-1,l=1;l<a.length;l++)a[l].includes("::cue")&&(s.push([]),o=s.length-1),-1!=o&&(s[o].push(a[l]),a[l].includes("}")&&(o=-1));for(o=(s=u(s)).next();!o.done;o=s.next()){var c=o.value;o="global",(l=c[0].match(/\((.*)\)/))&&(o=l.pop()),l=c.slice(1,-1),c[0].includes("}")&&(c=/\{(.*?)\}/.exec(c[0]))&&(l=c[1].split(";")),(c=r.get(o))||(c=new re(0,0,""));for(var d=!1,h=0;h<l.length;h++){var p=/^\s*([^:]+):\s*(.*)/.exec(l[h]);if(p){var f=p[2].trim().replace(";","");switch(p[1].trim()){case"background-color":case"background":d=!0,c.backgroundColor=f;break;case"color":d=!0,c.color=f;break;case"font-family":d=!0,c.fontFamily=f;break;case"font-size":d=!0,c.fontSize=f;break;case"font-weight":(700<=parseInt(f,10)||"bold"==f)&&(d=!0,c.fontWeight=700);break;case"font-style":switch(f){case"normal":d=!0,c.fontStyle=be;break;case"italic":d=!0,c.fontStyle="italic";break;case"oblique":d=!0,c.fontStyle="oblique"}break;case"opacity":d=!0,c.opacity=parseFloat(f);break;case"text-shadow":d=!0,c.textShadow=f;break;case"white-space":d=!0,c.wrapLine="noWrap"!=f}}}d&&r.set(o,c)}}if(d=e,1==a.length&&!a[0]||/^NOTE($|[ \t])/.test(a[0])||"STYLE"==a[0]||"REGION"==a[0])a=null;else{if(s=null,a[0].includes("--\x3e")||(s=a[0],a.splice(0,1)),l=lv(o=new Ih(a[0])),h=Rh(o,/[ \t]+--\x3e[ \t]+/g),c=lv(o),null==l||null==h||null==c)throw new xe(2,2,2001,"Could not parse cue time range in WebVTT");for(l+=d,c+=d,d=uv(a.slice(1).join("\n").trim()),r.has("global")?((a=r.get("global").clone()).startTime=l,a.endTime=c,a.payload=""):a=new re(l,c,""),rv(d,a,r),Dh(o),l=xh(o);l;)sv(a,l,t),Dh(o),l=xh(o);null!=s&&(a.id=s)}a&&i.push(a)}return i},V("shaka.text.VttTextParser",nv),nv.prototype.parseMedia=nv.prototype.parseMedia,nv.prototype.setSequenceMode=nv.prototype.setSequenceMode,nv.prototype.parseInit=nv.prototype.parseInit;var cv=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function dv(){this.g=null}function hv(e,t,n){var i,r,a;return(new Wi).box("payl",$i((function(e){i=Et(e)}))).box("iden",$i((function(e){r=Et(e)}))).box("sttg",$i((function(e){a=Et(e)}))).parse(e),i?function(e,t,n,i,r){if(i=new re(i,r,""),rv(e,i,new Map),t&&(i.id=t),n)for(e=new Ih(n),t=xh(e);t;)sv(i,t,[]),Dh(e),t=xh(e);return i}(i,r,a,t,n):null}function pv(){}function fv(e){if(null==(e=Rh(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function gv(){this.g=new nv}function mv(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=u((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function vv(){}function yv(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=bv(n))&&(e.color=n),(n=t.BackColour)&&(n=bv(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ue,e.textAlign="start";break;case 2:e.displayAlign=ue,e.textAlign=se;break;case 3:e.displayAlign=ue,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=se;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=se;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function bv(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Ev(e){return 3600*((e=wv.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Zt["text/vtt"]=function(){return new nv},Zt['text/vtt; codecs="vtt"']=function(){return new nv},Zt['text/vtt; codecs="wvtt"']=function(){return new nv},dv.prototype.parseInit=function(e){var t=this,n=!1;if((new Wi).box("moov",zi).box("trak",zi).box("mdia",zi).P("mdhd",(function(e){e=ro(e.reader,e.version),t.g=e.timescale})).box("minf",zi).box("stbl",zi).P("stsd",Yi).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new xe(2,2,2008);if(!n)throw new xe(2,2,2008)},dv.prototype.setSequenceMode=function(){},dv.prototype.parseMedia=function(e,t){if(!this.g)throw new xe(2,2,2008);var n,i=0,r=[],a=[],o=!1,s=!1,l=!1,c=null;if((new Wi).box("moof",zi).box("traf",zi).P("tfdt",(function(e){o=!0,i=io(e.reader,e.version).we})).P("tfhd",(function(e){c=no(e.reader,e.flags).Ce})).P("trun",(function(e){s=!0,r=ao(e.reader,e.version,e.flags).Re})).box("mdat",$i((function(e){l=!0,n=e}))).parse(e,!1),!l&&!o&&!s)throw new xe(2,2,2008);e=i;for(var d=new ji(n,0),h=u(r),p=h.next();!p.done;p=h.next()){var f=(p=p.value).ee||c,g=p.ed?i+p.ed:e;e=g+(f||0);var m=0;do{var v=d.K();m+=v;var y=null;"vttc"==Qi(d.K())?8<v&&(y=d.Za(v-8)):d.skip(v-8),f&&y&&(v=hv(y,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(v))}while(p.sampleSize&&m<p.sampleSize)}return a.filter($e)},V("shaka.text.Mp4VttParser",dv),dv.prototype.parseMedia=dv.prototype.parseMedia,dv.prototype.setSequenceMode=dv.prototype.setSequenceMode,dv.prototype.parseInit=dv.prototype.parseInit,Zt['application/mp4; codecs="wvtt"']=function(){return new dv},pv.prototype.parseInit=function(){},pv.prototype.setSequenceMode=function(){},pv.prototype.parseMedia=function(e){var t=Et(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=u(t.split("\n\n"))).next();!n.done;n=t.next()){var i=new Ih((n=n.value.split("\n"))[0]),r=fv(i),a=Rh(i,/,/g);if(i=fv(i),null==r||null==a||null==i)throw new xe(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new re(r,i,n.slice(1).join("\n").trim()))}return e},V("shaka.text.SbvTextParser",pv),pv.prototype.parseMedia=pv.prototype.parseMedia,pv.prototype.setSequenceMode=pv.prototype.setSequenceMode,pv.prototype.parseInit=pv.prototype.parseInit,Zt["text/x-subviewer"]=function(){return new pv},gv.prototype.parseInit=function(){},gv.prototype.setSequenceMode=function(){},gv.prototype.parseMedia=function(e,t){return e=Ie(kt(e=mv(e=Et(e)))),this.g.parseMedia(e,t)},V("shaka.text.SrtTextParser",gv),gv.srt2webvtt=mv,gv.prototype.parseMedia=gv.prototype.parseMedia,gv.prototype.setSequenceMode=gv.prototype.setSequenceMode,gv.prototype.parseInit=gv.prototype.parseInit,Zt["text/srt"]=function(){return new gv},vv.prototype.parseInit=function(){},vv.prototype.setSequenceMode=function(){},vv.prototype.parseMedia=function(e){for(var t="",n="",i=(e=u(e=Et(e).split(/\r?\n\s*\r?\n/))).next();!i.done;i=e.next()){var r=kv.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[],i=null;for(var a=(t=u(t.split(/\r?\n/))).next();!a.done;a=t.next())if(r=a.value,!/^\s*;/.test(r)&&(a=_v.exec(r)))if(r=a[1].trim(),a=a[2].trim(),"Format"==r)i=a.split(Sv);else if("Style"==r){r=a.split(Sv),a={};for(var o=0;o<i.length&&o<r.length;o++)a[i[o]]=r[o];e.push(a)}for(i=[],t=null,r={},a=(n=u(n.split(/\r?\n/))).next();!a.done;r={vd:r.vd},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=_v.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(Sv);else if("Dialogue"==a){o=o.split(Sv),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];o=new re(s=Ev(a.Start),Ev(a.End),o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),r.vd=a.Style,(a=e.find(function(e){return function(t){return t.Name==e.vd}}(r)))&&yv(o,a),i.push(o)}return i},V("shaka.text.SsaTextParser",vv),vv.prototype.parseMedia=vv.prototype.parseMedia,vv.prototype.setSequenceMode=vv.prototype.setSequenceMode,vv.prototype.parseInit=vv.prototype.parseInit;var Tv,Av,kv=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,_v=/^\s*([^:]+):\s*(.*)/,Sv=/\s*,\s*/,wv=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
/*
   @license
   EME Encryption Scheme Polyfill
   Copyright 2019 Google LLC
   SPDX-License-Identifier: Apache-2.0
  */
function Cv(){}function Iv(){Tv?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Tv=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Dv):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Dv(e,t){var n,i=this;return L((function(r){return 1==r.g?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),E(r,Tv.call(i,e,t),2)):Fv(n=r.h)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Tv,r.return(n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Rv,r.return(Rv.call(i,e,t)))}))}function Rv(e,t){var n,i,r,a,o,s,l,c,d,h,p=this;return L((function(f){if(1==f.g){for(console.assert(p==navigator,'bad "this" for requestMediaKeySystemAccess'),n=Uv(e),i=[],r=u(t),a=r.next();!a.done;a=r.next())o=a.value,s=xv(o.videoCapabilities,n),l=xv(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!l.length||((c=Object.assign({},o)).videoCapabilities=s,c.audioCapabilities=l,i.push(c));if(!i.length)throw(d=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return E(f,Tv.call(p,e,i),2)}return h=f.h,f.return(new Bv(h,n))}))}function xv(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function Lv(){}function Pv(){Av?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Av=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Ov):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Ov(e){var t,n,i,r=this;return L((function(a){switch(a.g){case 1:return console.assert(r==navigator.mediaCapabilities,'bad "this" for decodingInfo'),E(a,Av.call(r,e),2);case 2:if(t=a.h,!e.keySystemConfiguration)return a.return(t);if((n=t.keySystemAccess)&&Fv(n))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Av,a.return(t);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Mv,n){a.A(3);break}return i=t,E(a,Nv(e),4);case 4:return i.keySystemAccess=a.h,a.return(t);case 3:return a.return(Mv.call(r,e))}}))}function Mv(e){var t,n,i,r,a,o,s,l,u=this;return L((function(c){switch(c.g){case 1:return console.assert(u==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=Uv(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},r&&r!=t||a&&a!=t)?c.return(o):E(c,Av.call(u,e),2);case 2:if((s=c.h).keySystemAccess){s.keySystemAccess=new Bv(s.keySystemAccess,t),c.A(3);break}if(!e.keySystemConfiguration){c.A(3);break}return l=s,E(c,Nv(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(s)}}))}function Nv(e){var t,n;return L((function(i){if(1==i.g){var r=e.keySystemConfiguration,a=[],o=[];return r.audio&&a.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType}),r.video&&o.push({robustness:r.video.robustness||"",contentType:e.video.contentType}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},a.length&&(r.audioCapabilities=a),o.length&&(r.videoCapabilities=o),t=r,E(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)}))}function Bv(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function Uv(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Fv(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Vv(){}function Hv(){Iv(),Pv()}Zt["text/x-ssa"]=function(){return new vv},V("EmeEncryptionSchemePolyfill",Cv),Cv.install=Iv,V("McEncryptionSchemePolyfill",Lv),Lv.install=Pv,Bv.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=u(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(n=(t=u(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},Bv.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},V("EncryptionSchemePolyfills",Vv),Vv.install=Hv,void 0!==n&&n.exports&&(n.exports=Vv)}.call(n,e,e,void 0),n.shaka)t[i]=n.shaka[i]}()})),cp={html5_video:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls_fairplay_playback:function(e){return e.raw.code===e.raw.MEDIA_ERR_NETWORK},hls:function(e){if(e.raw.type===uo.ErrorTypes.NETWORK_ERROR)switch(e.raw.details){case uo.ErrorDetails.MANIFEST_LOAD_ERROR:case uo.ErrorDetails.LEVEL_LOAD_ERROR:case uo.ErrorDetails.FRAG_LOAD_ERROR:case uo.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:var t=e.raw.response;return!(t.code>=400&&t.code<500);case uo.ErrorDetails.MANIFEST_LOAD_TIMEOUT:case uo.ErrorDetails.LEVEL_LOAD_TIMEOUT:case uo.ErrorDetails.FRAG_LOAD_TIMEOUT:case uo.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:return!0;default:return!1}return!1},dash_shaka_playback:function(e){var t=e.raw.code||e.raw.detail&&e.raw.detail.code,n=e.raw.data||e.raw.detail&&e.raw.detail.data;switch(t){case up.util.Error.Code.BAD_HTTP_STATUS:var i=m(n,2)[1];return!(i>=400&&i<500);case up.util.Error.Code.HTTP_ERROR:case up.util.Error.Code.TIMEOUT:return!0;default:return!1}}},dp=function(e){if(uo){var t=function(t){l(i,t);var n=p(i);function i(){return r(this,i),n.apply(this,arguments)}return o(i,[{key:"load",value:function(t,n,r){if("manifest"===t.type){var a=r.onSuccess;r.onSuccess=function(t,n,i,r){var o={pop:r.getResponseHeader("x-pop"),host:r.getResponseHeader("x-host")};e.trigger(Tn.WM_STREAMING_DATA_LOADED,o),a(t,n,i)}}g(u(i.prototype),"load",this).call(this,t,n,r)}}]),i}(uo.DefaultConfig.loader);return e.video.isLive?t:void 0}},hp={enableWorker:!1,liveSyncDurationCount:2,backBufferLength:1/0,liveBackBufferLength:90,lowLatencyMode:!1,capLevelToPlayerSize:!0,enableWebVTT:!1,xhrSetup:function(e){e.withCredentials=!0}},pp=function(e){e.getNetworkingEngine().registerRequestFilter((function(e,t){e!==up.net.NetworkingEngine.RequestType.LICENSE&&(t.allowCrossSiteCredentials=!0)}))},fp=function(e){e.shakaConfiguration=e.shakaConfiguration||{};var t=function(e){return{maxAttempts:"manifest"===e?4:8}};["drm","manifest","streaming"].forEach((function(i){return e.shakaConfiguration[i]=function(i){return n(n({},e.shakaConfiguration[i]||{}),{},{retryParameters:t(i)})}(i)}))},gp=bn.LocalStorage,mp=bn.getHostname,vp=bn.getHostAndPathName,yp=window.WM&&window.WM.Settings||{},bp={limited:Q.isFirefox&&Q.isAndroid,preferredLevel:gp.load("selectedlevel",parseInt),changeFavicon:!1,mediacontrol:{plugins:lp()},chromecast:{appId:function(){if(yp.CastSenders){var e=Object.keys(yp.CastSenders).find((function(e){return e===mp()||e===vp()}));return e&&yp.CastSenders[e]}}()},preload:"none",hlsMinimumDvrSize:120,useDvrControls:!1,useBackgroundButton:!1,useHardwareVideoDecoder:!1,playback:{controls:!1,preload:"none",playInline:!0,recycleVideo:Q.isMobile,setHLSJSConfig:function(e,t){var i=function(e){return e.hlsRecoverAttempts=1,{manifestLoadingMaxRetry:3,fragLoadingMaxRetry:7,levelLoadingMaxRetry:7}}(e);e.playback.hlsjsConfig=n(n(n(n({},hp),i),e.HLSJSConfiguration||{}),{},{pLoader:dp(t)})},setShakaConfig:function(e,t){e.shakaOnBeforeLoad=pp,e.shakaMinimumDvrSize=180,e.shakaConfiguration=e.shakaConfiguration||{},fp(e),function(e){var t;e.shakaConfiguration=n(n({},e.shakaConfiguration),{},{preferredAudioLanguage:(null===(t=e.defaultAudio)||void 0===t?void 0:t.language)||"por"})}(e),t.isLive||(function(e){e.shakaConfiguration=e.shakaConfiguration||{},e.shakaConfiguration.streaming=n(n({},e.shakaConfiguration.streaming||{}),{bufferingGoal:120,rebufferingGoal:2,bufferBehind:30})}(e),function(e){var t=((window.WM&&window.WM.Settings||{}).ShakaConfig||{})["shaka-config-set-control"]||{};e.shakaConfiguration=n(n({},e.shakaConfiguration),{},{streaming:n(n({},e.shakaConfiguration.streaming||{}),t.streaming),abr:n(n({},e.shakaConfiguration.abr||{}),t.abr)})}(e),function(e){e.shakaConfiguration=n(n({},e.shakaConfiguration),{},{manifest:n(n({},e.shakaConfiguration.manifest||{}),{},{dash:n(n({},e.shakaConfiguration.manifest&&e.shakaConfiguration.manifest.dash||{}),{},{ignoreMinBufferTime:!0})})})}(e))},recoverableErros:cp},gaAccount:null,gaTrackerName:null,allowLocation:!1,disableVideoTagContextMenu:!0,stretched:!1,maxQualityLevel:"max",allowRestrictedContent:yp.allowRestrictedContent,videoInfo:{inlineEnabled:!1,fullscreenEnabled:!0},includeResetStyle:!0,customStyle:{mainStyle:ap,resetStyle:'.clappr-player#wp3-player-0 div, .clappr-player#wp3-player-0 span, .clappr-player#wp3-player-0 applet, .clappr-player#wp3-player-0 object, .clappr-player#wp3-player-0 iframe,\n.clappr-player#wp3-player-0 h1, .clappr-player#wp3-player-0 h2, .clappr-player#wp3-player-0 h3, .clappr-player#wp3-player-0 h4, .clappr-player#wp3-player-0 h5, .clappr-player#wp3-player-0 h6, .clappr-player#wp3-player-0 p, .clappr-player#wp3-player-0 blockquote, .clappr-player#wp3-player-0 pre,\n.clappr-player#wp3-player-0 a, .clappr-player#wp3-player-0 abbr, .clappr-player#wp3-player-0 acronym, .clappr-player#wp3-player-0 address, .clappr-player#wp3-player-0 big, .clappr-player#wp3-player-0 cite, .clappr-player#wp3-player-0 code,\n.clappr-player#wp3-player-0 del, .clappr-player#wp3-player-0 dfn, .clappr-player#wp3-player-0 em, .clappr-player#wp3-player-0 img, .clappr-player#wp3-player-0 ins, .clappr-player#wp3-player-0 kbd, .clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 s, .clappr-player#wp3-player-0 samp,\n.clappr-player#wp3-player-0 small, .clappr-player#wp3-player-0 strike, .clappr-player#wp3-player-0 strong, .clappr-player#wp3-player-0 sub, .clappr-player#wp3-player-0 sup, .clappr-player#wp3-player-0 tt, .clappr-player#wp3-player-0 var,\n.clappr-player#wp3-player-0 b, .clappr-player#wp3-player-0 u, .clappr-player#wp3-player-0 i, .clappr-player#wp3-player-0 center,\n.clappr-player#wp3-player-0 dl, .clappr-player#wp3-player-0 dt, .clappr-player#wp3-player-0 dd, .clappr-player#wp3-player-0 ol, .clappr-player#wp3-player-0 ul, .clappr-player#wp3-player-0 li,\n.clappr-player#wp3-player-0 fieldset, .clappr-player#wp3-player-0 form, .clappr-player#wp3-player-0 label, .clappr-player#wp3-player-0 legend,\n.clappr-player#wp3-player-0 table, .clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 tbody, .clappr-player#wp3-player-0 tfoot, .clappr-player#wp3-player-0 thead, .clappr-player#wp3-player-0 tr, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td,\n.clappr-player#wp3-player-0 article, .clappr-player#wp3-player-0 aside, .clappr-player#wp3-player-0 canvas, .clappr-player#wp3-player-0 details, .clappr-player#wp3-player-0 embed,\n.clappr-player#wp3-player-0 figure, .clappr-player#wp3-player-0 figcaption, .clappr-player#wp3-player-0 footer, .clappr-player#wp3-player-0 header, .clappr-player#wp3-player-0 hgroup,\n.clappr-player#wp3-player-0 menu, .clappr-player#wp3-player-0 nav, .clappr-player#wp3-player-0 output, .clappr-player#wp3-player-0 ruby, .clappr-player#wp3-player-0 section, .clappr-player#wp3-player-0 summary,\n.clappr-player#wp3-player-0 time, .clappr-player#wp3-player-0 mark, .clappr-player#wp3-player-0 audio, .clappr-player#wp3-player-0 video {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font: inherit;\n  font-size: 100%;\n  vertical-align: baseline; }\n\n.clappr-player#wp3-player-0 table {\n  border-collapse: collapse;\n  border-spacing: 0; }\n\n.clappr-player#wp3-player-0 caption, .clappr-player#wp3-player-0 th, .clappr-player#wp3-player-0 td {\n  text-align: left;\n  font-weight: normal;\n  vertical-align: middle; }\n\n.clappr-player#wp3-player-0 q, .clappr-player#wp3-player-0 blockquote {\n  quotes: none; }\n  .clappr-player#wp3-player-0 q:before, .clappr-player#wp3-player-0 q:after, .clappr-player#wp3-player-0 blockquote:before, .clappr-player#wp3-player-0 blockquote:after {\n    content: "";\n    content: none; }\n\n.clappr-player#wp3-player-0 a img {\n  border: none; }\n'},customErrors:Vo,shouldDeviceUseWebVTT:!0};Object.values(op).forEach((function(e){return it.registerPlugin(e)})),sp.forEach((function(e){return it.registerPlayback(e)}));var Ep=bn.DOM.hasPlayerElement,Tp=bn.getExperimentAlternative,Ap=window.WM&&window.WM.Settings||{},kp=Ap&&Ap.Domains||[],_p=function(e){l(i,e);var t=p(i);function i(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,i);var o=i.hasSourceMapped(a.source);o&&(a.source=o);var s=n(n({},bp),a);s.clapprStats={runEach:1e3,onReport:function(t){return e.onMetricsReceived(t)}},s.mediacontrol.plugins=lp(s.mediaControl&&s.mediaControl.plugins),s.bitrateCappingDisabled=Ap.bitrateCapping&&Ap.bitrateCapping.disabled||Ap.bitrateCappingDisabled,s.stretched&&(s.width=s.stretchWidth||s.width,s.height=s.stretchHeight||s.height),i.overrideOptions(s),s.plugins&&(s.plugins.loadExternalPluginsFirst=!1),!s.includeResetStyle&&delete s.customStyle.resetStyle,"string"==typeof(e=t.call(this,s)).options.defaultAudio&&(e.options.defaultAudio=e._forceNewAudioFormat(e.options)),"string"==typeof e.options.defaultSubtitle&&(e.options.defaultSubtitle=e._forceNewSubtitleFormat(e.options));var l=Tp(e.options,"player-isolated-experiment-02");Q.isAndroid&&"android_dvr"===l&&(Q.preventUsingCookies=!0,e.options.overrides={getPlayerType:function(){return l}}),Q.isiOS&&"ios_dvr"===l&&(Q.preventUsingCookies=!0,e.options.overrides={getPlayerType:function(){return l}});var u=/hlsjs-live-sync-duration-count-(\d+)/,c=l.match(u)&&l.match(u)[1];return c&&(e.options.HLSJSConfiguration={liveSyncDurationCount:c}),e}return o(i,[{key:"eventsMapping",get:function(){return Object.assign(g(u(i.prototype),"eventsMapping",this),{onPipAdded:Tn.PLAYER_PIP_ADDED,onPipDiscarded:Tn.PLAYER_PIP_DISCARDED,onMasterAdded:Tn.PLAYER_MASTER_ADDED,onMasterChanged:Tn.PLAYER_MASTER_CHANGED,onPipToMaster:Tn.PLAYER_PIPTOMASTER,onMediaControlShow:Tn.PLAYER_MEDIACONTROL_SHOW,onMediaControlHide:Tn.PLAYER_MEDIACONTROL_HIDE,onBackButtonClicked:Tn.BACK_BUTTON_CLICKED,onDrawerShow:Tn.DID_SHOW_DRAWER,onDrawerHide:Tn.DID_HIDE_DRAWER,onDrawerShowHint:Tn.DID_SHOW_DRAWER_HINT,onDrawerHideHint:Tn.DID_HIDE_DRAWER_HINT,onSubtitleChanged:Tn.WM_SUBTITLE_CHANGED,onAudioChanged:Tn.WM_AUDIO_CHANGED,onDidLoadCuepoints:Tn.DID_LOAD_CUEPOINTS,onDidReachCuepoint:Tn.DID_REACH_CUEPOINT})}},{key:"defaultOptions",get:function(){return bp}},{key:"container",get:function(){return this.core&&this.core.activeContainer}},{key:"playback",get:function(){return this.core&&this.core.activePlayback}},{key:"onMetricsReceived",value:function(e){this.container.trigger(Tn.WM_STATS_REPORTED,e)}},{key:"normalizeSources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sources||(void 0===e.source?[]:["".concat(e.source)]);return 0===(t=t.map((function(e){return"".concat(e||"")}))).length?["no.op"]:t}},{key:"isUnsupportedBrowser",value:function(){return Q.version<{chrome:41,firefox:38,ie:12,msie:12,safari:8}[Q.name.toLowerCase()]}},{key:"attachTo",value:function(e){g(u(i.prototype),"attachTo",this).call(this,e),this.validatePlayerEnvironment()}},{key:"validatePlayerEnvironment",value:function(){var e=this.playback&&"function"==typeof this.playback.onError,t=!i.isAllowedDomain(window.location.hostname)&&!i.isDevMode()&&e,n=(this.isUnsupportedBrowser()||Q.isCrawlerBot)&&e;t&&this.playback.onError(Vo.NOT_ALLOWED_DOMAIN,{useCodePrefix:!1}),n&&this.playback.onError(Vo.UNSUPPORTED_BROWSER,{useCodePrefix:!1})}},{key:"load",value:function(e){if(Ep(this.element)){var t=i.hasSourceMapped(e)||e;g(u(i.prototype),"load",this).call(this,t),this.validatePlayerEnvironment()}}},{key:"configure",value:function(e){var t=i.hasSourceMapped(e.source);t&&(e.source=t),this.options.stretched&&(e.width||e.height)&&(e.width=this.options.stretchWidth||e.width,e.height=this.options.stretchHeight||e.height),this.hasSourceChanged(e)||(delete e.sources,delete e.source),e.env=Pt.get(e.env,e.httpOnly),"string"==typeof e.defaultAudio&&(e.defaultAudio=this._forceNewAudioFormat(e)),"string"==typeof e.defaultSubtitle&&(e.defaultSubtitle=this._forceNewSubtitleFormat(e)),i.overrideOptions(e,this.options),e.plugins&&(e.plugins.loadExternalPluginsFirst=!1),g(u(i.prototype),"configure",this).call(this,e),this.validatePlayerEnvironment()}},{key:"hasSourceChanged",value:function(e){var t=this.normalizeSources(this.options),n=this.normalizeSources(e);return t[0]!==n[0]}},{key:"_forceNewAudioFormat",value:function(e){return{language:e.defaultAudio}}},{key:"_forceNewSubtitleFormat",value:function(e){return{language:e.defaultSubtitle,role:"subtitle"}}},{key:"_addEventListeners",value:function(){var e=this;g(u(i.prototype),"_addEventListeners",this).call(this),this.listenTo(this.core,Tn.WM_PIP_ADDED,this.onPipAdded),this.listenTo(this.core,Tn.WM_PIP_DISCARDED,this.onPipDiscarded),this.listenTo(this.core,Tn.WM_MASTER_ADDED,this.onMasterAdded),this.listenTo(this.core,Tn.WM_MASTER_CHANGED,this.onMasterChanged),this.listenTo(this.core,Tn.BACK_BUTTON_CLICKED,this.onBackButtonClicked),this.listenTo(this.core.mediaControl,De.MEDIACONTROL_SHOW,(function(){return e.trigger(Tn.PLAYER_MEDIACONTROL_SHOW)})),this.listenTo(this.core.mediaControl,De.MEDIACONTROL_HIDE,(function(){return e.trigger(Tn.PLAYER_MEDIACONTROL_HIDE)})),this.listenTo(this.core,Tn.DID_SHOW_DRAWER,this.onDrawerShow),this.listenTo(this.core,Tn.DID_HIDE_DRAWER,this.onDrawerHide),this.listenTo(this.core,Tn.DID_SHOW_DRAWER_HINT,this.onDrawerShowHint),this.listenTo(this.core,Tn.DID_HIDE_DRAWER_HINT,this.onDrawerHideHint)}},{key:"_addContainerEventListeners",value:function(){g(u(i.prototype),"_addContainerEventListeners",this).call(this),this.listenTo(this.container,Tn.WM_PIPTOMASTER,this.onPipToMaster),this.listenTo(this.container,Tn.WM_SUBTITLE_CHANGED,this.onSubtitleChanged),this.listenTo(this.container,Tn.DID_LOAD_CUEPOINTS,this.onDidLoadCuepoints),this.listenTo(this.container,Tn.DID_REACH_CUEPOINT,this.onDidReachCuepoint),this.listenTo(this.container,Tn.WM_AUDIO_CHANGED,this.onAudioChanged)}},{key:"onDrawerHide",value:function(){this.trigger(Tn.DID_HIDE_DRAWER)}},{key:"onDrawerShow",value:function(){this.trigger(Tn.DID_SHOW_DRAWER)}},{key:"onDrawerHideHint",value:function(){this.trigger(Tn.DID_HIDE_DRAWER_HINT)}},{key:"onDrawerShowHint",value:function(){this.trigger(Tn.DID_SHOW_DRAWER_HINT)}},{key:"onDidLoadCuepoints",value:function(e){this.trigger(Tn.DID_LOAD_CUEPOINTS,e)}},{key:"onDidReachCuepoint",value:function(e){this.trigger(Tn.DID_REACH_CUEPOINT,e)}},{key:"onSubtitleChanged",value:function(e){this.trigger(Tn.WM_SUBTITLE_CHANGED,e)}},{key:"onAudioChanged",value:function(e){this.trigger(Tn.WM_AUDIO_CHANGED,e)}},{key:"onBackButtonClicked",value:function(){this.trigger(Tn.BACK_BUTTON_CLICKED)}},{key:"onPipAdded",value:function(){this.trigger(Tn.PLAYER_PIP_ADDED)}},{key:"onPipDiscarded",value:function(){this.trigger(Tn.PLAYER_PIP_DISCARDED)}},{key:"onMasterAdded",value:function(){this.trigger(Tn.PLAYER_MASTER_ADDED)}},{key:"onMasterChanged",value:function(){this.trigger(Tn.PLAYER_MASTER_CHANGED)}},{key:"onPipToMaster",value:function(){this.trigger(Tn.PLAYER_PIPTOMASTER)}},{key:"version",value:function(){return i.version}},{key:"allVersions",value:function(){return i.allVersions}}],[{key:"version",get:function(){return"7.65.1"}},{key:"allVersions",get:function(){return{Player:"7.65.1",PlayerCore:"1.38.1",PlayerPlugins:"1.68.1",Clappr:bt,ShakaPlayer:up.Player.version,HLSjs:uo.version}}},{key:"overrideOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0===e.chromeless&&t.chromeless&&(e.chromeless=t.chromeless),e.videoInfo&&(e.videoInfo=n(n({},bp.videoInfo),e.videoInfo));var i=e.chromecast||{},r=i.appId||bp.chromecast.appId;e.chromecast={enabled:i.enabled&&!Q.isChromecast&&!!r,appId:r,enableBingeWatch:i.enableBingeWatch}}},{key:"hasSourceMapped",value:function(e){return Q.isChrome&&Ap.sourceMapping&&Ap.sourceMapping[e]}}]),i}(Dn);return _p.isDevMode=function(){return!1},_p.isAllowedDomain=function(e){return!Ap.Domains||kp.find((function(t){return t.test(e)}))},window.Clappr=window.Clappr||Clappr,window.$=window.$||$,e.DrawerBottom=$o,e.Environment=Pt,e.Errors=Vo,e.Events=Tn,e.MediaControlPlugin=Ti,e.Playbacks=sp,e.Player=_p,e.Plugins=op,e.Styler=En,e.mergeMediaControlPlugins=lp,e.playerStyle=ap,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
